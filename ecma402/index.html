<!doctype html>
<html lang="en-GB-oxendict"><head><meta name="viewport" content="width=device-width, initial-scale=1"><meta charset="utf-8"><meta property="og:image" content="https://tc39.es/ecmarkup/ecma-logo.png"><meta property="og:title" content="ECMAScript® 2026 Internationalization API Specification"><meta property="og:description" content="介绍
  本规范的源代码可在 https://github.com/tc39/ecma402 找到。
  ECMAScript 2026 国际化 API 规范（ECMA-402 第13版）为 ECMA-262 提供了关键的语言敏感功能。其功能选自诸如 Unicode 国际化组件（ICU）库（https://unicode-org.github.io/icu-docs/）、.NET 框架和 Java
    平台等成熟的国际化 API。
  第1版 API 由 Ecma TC39 于2010年9月成立的临时小组开发，基于 Nebojša Ćirić 和 Jungshik Shin 的提案。">
<link rel="icon" href="img/favicon.ico">
<link rel="stylesheet" href="css\ecmarkup.css"><link rel="stylesheet" href="css\print.css" media="print"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script>
  if (location.hostname === 'tc39.es' && location.protocol !== 'https:') {
    location.protocol = 'https:';
  }
</script>
<script src="https://htmlspecs.com/dropdown.js"></script>
<style>
  #metadata-block {
    margin: 4em 0;
    padding: 10px;
    border: 1px solid #ee8421;
  }

  #metadata-block h1 {
    font-size: 1.5em;
    margin-top: 0;
  }

  #metadata-block>ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  #ecma-logo {
    width: 500px;
  }
</style>
<title>ECMAScript® 2026 Internationalization API Specification</title><script src="js\ecmarkup.js?cache=iOvzCtp_" defer=""></script><style>
    @media print {
      @page :left {
        @bottom-right {
          content: '© Ecma International 2026';
        }
      }
      @page :right {
        @bottom-left {
          content: '© Ecma International 2026';
        }
      }
      @page :first {
        @bottom-left {
          content: '';
        }
        @bottom-right {
          content: '';
        }
      }
      @page :blank {
        @bottom-left {
          content: '';
        }
        @bottom-right {
          content: '';
        }
      }
    }
    </style><style>
      @import url("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css");
      @import url("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/a11y-dark.min.css") (prefers-color-scheme: dark);
    </style></head><body><div id="shortcuts-help">
<ul>
  <li><span>Toggle shortcuts help</span><code>?</code></li>
  <li><span>Toggle "can call user code" annotations</span><code>u</code></li>

  <li><span>Jump to search box</span><code>/</code></li>
  <li><span>Toggle pinning of the current clause</span><code>p</code></li>
  <li><span>Jump to the <i>n</i><sup>th</sup> pin</span><code>1-9</code></li>
  <li><span>Jump to the 10<sup>th</sup> pin</span><code>0</code></li>
  <li><span>Jump to the most recent link target</span><code>`</code></li>
</ul></div><div id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; stroke:currentColor" viewBox="0 0 120 120" width="54" height="54">
      <title>Menu</title>
      <path stroke-width="10" stroke-linecap="round" d="M30,60 h60  M30,30 m0,5 h60  M30,90 m0,-5 h60"></path>
    </svg></div><div id="menu-spacer" class="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins<button class="unpin-all">clear</button></div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#introduction" title="介绍">介绍</a></li><li><span class="item-toggle-none"></span><a href="#scope" title="范围"><span class="secnum">1</span> 范围</a></li><li><span class="item-toggle-none"></span><a href="#conformance" title="一致性"><span class="secnum">2</span> 一致性</a></li><li><span class="item-toggle-none"></span><a href="#normative-references" title="规范性引用"><span class="secnum">3</span> 规范性引用</a></li><li><span class="item-toggle">+</span><a href="#overview" title="概述"><span class="secnum">4</span> 概述</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-internationalization-localization-globalization" title="国际化、本地化和全球化"><span class="secnum">4.1</span> 国际化、本地化和全球化</a></li><li><span class="item-toggle-none"></span><a href="#sec-api-overview" title="API概述"><span class="secnum">4.2</span> API概述</a></li><li><span class="item-toggle-none"></span><a href="#sec-api-conventions" title="API约定"><span class="secnum">4.3</span> API约定</a></li><li><span class="item-toggle">+</span><a href="#sec-implementation-dependencies" title="实现依赖"><span class="secnum">4.4</span> 实现依赖</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-compatibility" title="跨实现的兼容性"><span class="secnum">4.4.1</span> 跨实现的兼容性</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#conventions" title="符号约定"><span class="secnum">5</span> 符号约定</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-402-well-known-intrinsic-objects" title="知名内在对象"><span class="secnum">5.1</span> 知名内在对象</a></li></ol></li><li><span class="item-toggle">+</span><a href="#locales-currencies-tz" title="语言环境、货币、时区、度量单位、数字系统、排序规则和日历的标识"><span class="secnum">6</span> 语言环境、货币、时区、度量单位、数字系统、排序规则和日历的标识</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-case-sensitivity-and-case-mapping" title="大小写敏感性与大小写映射"><span class="secnum">6.1</span> 大小写敏感性与大小写映射</a></li><li><span class="item-toggle">+</span><a href="#sec-language-tags" title="语言标签"><span class="secnum">6.2</span> 语言标签</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iswellformedlanguagetag" title="IsWellFormedLanguageTag ( locale )"><span class="secnum">6.2.1</span> IsWellFormedLanguageTag ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-canonicalizeunicodelocaleid" title="CanonicalizeUnicodeLocaleId ( locale )"><span class="secnum">6.2.2</span> CanonicalizeUnicodeLocaleId ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-defaultlocale" title="DefaultLocale ( )"><span class="secnum">6.2.3</span> DefaultLocale ( )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-currency-codes" title="货币代码"><span class="secnum">6.3</span> 货币代码</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iswellformedcurrencycode" title="IsWellFormedCurrencyCode ( currency )"><span class="secnum">6.3.1</span> IsWellFormedCurrencyCode ( <var>currency</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-availablecanonicalcurrencies" title="AvailableCanonicalCurrencies ( )"><span class="secnum">6.4</span> AvailableCanonicalCurrencies ( )</a></li><li><span class="item-toggle">+</span><a href="#sec-use-of-iana-time-zone-database" title="使用 IANA 时区数据库"><span class="secnum">6.5</span> 使用 IANA 时区数据库</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-availablenamedtimezoneidentifiers" title="AvailableNamedTimeZoneIdentifiers ( )"><span class="secnum">6.5.1</span> AvailableNamedTimeZoneIdentifiers ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getavailablenamedtimezoneidentifier" title="GetAvailableNamedTimeZoneIdentifier ( timeZoneIdentifier )"><span class="secnum">6.5.2</span> GetAvailableNamedTimeZoneIdentifier ( <var>timeZoneIdentifier</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-availableprimarytimezoneidentifiers" title="AvailablePrimaryTimeZoneIdentifiers ( )"><span class="secnum">6.5.3</span> AvailablePrimaryTimeZoneIdentifiers ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-string-split-to-list" title="StringSplitToList ( S, separator )"><span class="secnum">6.5.4</span> StringSplitToList ( <var>S</var>, <var>separator</var> )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-measurement-unit-identifiers" title="度量单位标识符"><span class="secnum">6.6</span> 度量单位标识符</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iswellformedunitidentifier" title="IsWellFormedUnitIdentifier ( unitIdentifier )"><span class="secnum">6.6.1</span> IsWellFormedUnitIdentifier ( <var>unitIdentifier</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-issanctionedsingleunitidentifier" title="IsSanctionedSingleUnitIdentifier ( unitIdentifier )"><span class="secnum">6.6.2</span> IsSanctionedSingleUnitIdentifier ( <var>unitIdentifier</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-availablecanonicalunits" title="AvailableCanonicalUnits ( )"><span class="secnum">6.6.3</span> AvailableCanonicalUnits ( )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-numberingsystem-identifiers" title="数字系统标识符"><span class="secnum">6.7</span> 数字系统标识符</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-availablecanonicalnumberingsystems" title="AvailableCanonicalNumberingSystems ( )"><span class="secnum">6.7.1</span> AvailableCanonicalNumberingSystems ( )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-collation-types" title="排序规则类型"><span class="secnum">6.8</span> 排序规则类型</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-availablecanonicalcollations" title="AvailableCanonicalCollations ( )"><span class="secnum">6.8.1</span> AvailableCanonicalCollations ( )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-calendar-types" title="日历类型"><span class="secnum">6.9</span> 日历类型</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-availablecalendars" title="AvailableCalendars ( )"><span class="secnum">6.9.1</span> AvailableCalendars ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-pattern-string-types" title="模式字符串类型"><span class="secnum">6.10</span> 模式字符串类型</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#requirements" title="ECMAScript标准内置对象的要求"><span class="secnum">7</span> ECMAScript标准内置对象的要求</a></li><li><span class="item-toggle">+</span><a href="#intl-object" title="Intl 对象"><span class="secnum">8</span> Intl 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-value-properties-of-the-intl-object" title="Intl 对象的值属性"><span class="secnum">8.1</span> Intl 对象的值属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl-%symbol.tostringtag%" title="Intl [ %Symbol.toStringTag% ]"><span class="secnum">8.1.1</span> Intl [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-constructor-properties-of-the-intl-object" title="Intl 对象的构造函数属性"><span class="secnum">8.2</span> Intl 对象的构造函数属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator-intro" title="Intl.Collator ( . . . )"><span class="secnum">8.2.1</span> Intl.Collator ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat-intro" title="Intl.DateTimeFormat ( . . . )"><span class="secnum">8.2.2</span> Intl.DateTimeFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.displaynames-intro" title="Intl.DisplayNames ( . . . )"><span class="secnum">8.2.3</span> Intl.DisplayNames ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.durationformat-intro" title="Intl.DurationFormat ( . . . )"><span class="secnum">8.2.4</span> Intl.DurationFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.listformat-intro" title="Intl.ListFormat ( . . . )"><span class="secnum">8.2.5</span> Intl.ListFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.locale-intro" title="Intl.Locale ( . . . )"><span class="secnum">8.2.6</span> Intl.Locale ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat-intro" title="Intl.NumberFormat ( . . . )"><span class="secnum">8.2.7</span> Intl.NumberFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules-intro" title="Intl.PluralRules ( . . . )"><span class="secnum">8.2.8</span> Intl.PluralRules ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.relativetimeformat-intro" title="Intl.RelativeTimeFormat ( . . . )"><span class="secnum">8.2.9</span> Intl.RelativeTimeFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter-intro" title="Intl.Segmenter ( . . . )"><span class="secnum">8.2.10</span> Intl.Segmenter ( . . . )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-function-properties-of-the-intl-object" title="Intl 对象的函数属性"><span class="secnum">8.3</span> Intl 对象的函数属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.getcanonicallocales" title="Intl.getCanonicalLocales ( locales )"><span class="secnum">8.3.1</span> Intl.getCanonicalLocales ( <var>locales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.supportedvaluesof" title="Intl.supportedValuesOf ( key )"><span class="secnum">8.3.2</span> Intl.supportedValuesOf ( <var>key</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#locale-and-parameter-negotiation" title="语言环境与参数协商"><span class="secnum">9</span> 语言环境与参数协商</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-internal-slots" title="服务构造函数的内部插槽"><span class="secnum">9.1</span> 服务构造函数的内部插槽</a></li><li><span class="item-toggle">+</span><a href="#sec-abstract-operations" title="抽象操作"><span class="secnum">9.2</span> 抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-canonicalizelocalelist" title="CanonicalizeLocaleList ( locales )"><span class="secnum">9.2.1</span> CanonicalizeLocaleList ( <var>locales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-canonicalizeuvalue" title="
        CanonicalizeUValue (
        ukey: Unicode 技术标准 #35 第1部分核心 第3.6.1节
          键和值定义中定义的 Unicode 语言环境扩展序列键,
        uvalue: 一个字符串,
        ): 一个字符串
      "><span class="secnum">9.2.2</span> 
        CanonicalizeUValue (
        <var>ukey</var>: Unicode 技术标准 #35 第1部分核心 第3.6.1节
          键和值定义中定义的 Unicode 语言环境扩展序列键,
        <var>uvalue</var>: 一个字符串,
        ): 一个字符串
      </a></li><li><span class="item-toggle-none"></span><a href="#sec-lookupmatchinglocalebyprefix" title="LookupMatchingLocaleByPrefix ( availableLocales, requestedLocales )"><span class="secnum">9.2.3</span> LookupMatchingLocaleByPrefix ( <var>availableLocales</var>, <var>requestedLocales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-lookupmatchinglocalebybestfit" title="LookupMatchingLocaleByBestFit ( availableLocales, requestedLocales )"><span class="secnum">9.2.4</span> LookupMatchingLocaleByBestFit ( <var>availableLocales</var>, <var>requestedLocales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-unicode-extension-components" title="UnicodeExtensionComponents ( extension )"><span class="secnum">9.2.5</span> UnicodeExtensionComponents ( <var>extension</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-insert-unicode-extension-and-canonicalize" title="InsertUnicodeExtensionAndCanonicalize ( locale, attributes, keywords )"><span class="secnum">9.2.6</span> InsertUnicodeExtensionAndCanonicalize ( <var>locale</var>, <var>attributes</var>, <var>keywords</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-resolvelocale" title="ResolveLocale ( availableLocales, requestedLocales, options, relevantExtensionKeys, localeData )"><span class="secnum">9.2.7</span> ResolveLocale ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>, <var>relevantExtensionKeys</var>, <var>localeData</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-resolveoptions" title="ResolveOptions ( constructor, localeData, locales, options [ , specialBehaviours [ , modifyResolutionOptions ] ] )"><span class="secnum">9.2.8</span> ResolveOptions ( <var>constructor</var>, <var>localeData</var>, <var>locales</var>, <var>options</var> [ , <var>specialBehaviours</var> [ , <var>modifyResolutionOptions</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-filterlocales" title="FilterLocales ( availableLocales, requestedLocales, options )"><span class="secnum">9.2.9</span> FilterLocales ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-coerceoptionstoobject" title="CoerceOptionsToObject ( options )"><span class="secnum">9.2.10</span> CoerceOptionsToObject ( <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getoption" title="GetOption ( options, property, type, values, default )"><span class="secnum">9.2.11</span> GetOption ( <var>options</var>, <var>property</var>, <var>type</var>, <var>values</var>, <var>default</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getbooleanorstringnumberformatoption" title="GetBooleanOrStringNumberFormatOption ( options, property, stringValues, fallback )"><span class="secnum">9.2.12</span> GetBooleanOrStringNumberFormatOption ( <var>options</var>, <var>property</var>, <var>stringValues</var>, <var>fallback</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-defaultnumberoption" title="DefaultNumberOption ( value, minimum, maximum, fallback )"><span class="secnum">9.2.13</span> DefaultNumberOption ( <var>value</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getnumberoption" title="GetNumberOption ( options, property, minimum, maximum, fallback )"><span class="secnum">9.2.14</span> GetNumberOption ( <var>options</var>, <var>property</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionpattern" title="PartitionPattern ( pattern )"><span class="secnum">9.2.15</span> PartitionPattern ( <var>pattern</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#collator-objects" title="Collator 对象"><span class="secnum">10</span> Collator 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-collator-constructor" title="Intl.Collator 构造函数"><span class="secnum">10.1</span> Intl.Collator 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator" title="Intl.Collator ( [ locales [ , options ] ] )"><span class="secnum">10.1.1</span> Intl.Collator ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-the-intl-collator-constructor" title="Intl.Collator 构造函数的属性"><span class="secnum">10.2</span> Intl.Collator 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype" title="Intl.Collator.prototype"><span class="secnum">10.2.1</span> Intl.Collator.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.supportedlocalesof" title="Intl.Collator.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">10.2.2</span> Intl.Collator.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl-collator-internal-slots" title="内部槽"><span class="secnum">10.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-the-intl-collator-prototype-object" title="Intl.Collator 原型对象的属性"><span class="secnum">10.3</span> Intl.Collator 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype.constructor" title="Intl.Collator.prototype.constructor"><span class="secnum">10.3.1</span> Intl.Collator.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype.resolvedoptions" title="Intl.Collator.prototype.resolvedOptions ( )"><span class="secnum">10.3.2</span> Intl.Collator.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle">+</span><a href="#sec-intl.collator.prototype.compare" title="get Intl.Collator.prototype.compare"><span class="secnum">10.3.3</span> get Intl.Collator.prototype.compare</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-collator-compare-functions" title="Collator 比较函数"><span class="secnum">10.3.3.1</span> Collator 比较函数</a></li><li><span class="item-toggle-none"></span><a href="#sec-collator-comparestrings" title="CompareStrings ( collator, x, y )"><span class="secnum">10.3.3.2</span> CompareStrings ( <var>collator</var>, <var>x</var>, <var>y</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype-%symbol.tostringtag%" title="Intl.Collator.prototype [ %Symbol.toStringTag% ]"><span class="secnum">10.3.4</span> Intl.Collator.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-collator-instances" title="Intl.Collator 实例的属性"><span class="secnum">10.4</span> Intl.Collator 实例的属性</a></li></ol></li><li><span class="item-toggle">+</span><a href="#datetimeformat-objects" title="DateTimeFormat 对象"><span class="secnum">11</span> DateTimeFormat 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-datetimeformat-constructor" title="Intl.DateTimeFormat 构造函数"><span class="secnum">11.1</span> Intl.DateTimeFormat 构造函数</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl.datetimeformat" title="Intl.DateTimeFormat ( [ locales [ , options ] ] )"><span class="secnum">11.1.1</span> Intl.DateTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-chaindatetimeformat" title="ChainDateTimeFormat ( dateTimeFormat, newTarget, this )"><span class="secnum">11.1.1.1</span> ChainDateTimeFormat ( <var>dateTimeFormat</var>, <var>newTarget</var>, <var>this</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-createdatetimeformat" title="CreateDateTimeFormat ( newTarget, locales, options, required, defaults )"><span class="secnum">11.1.2</span> CreateDateTimeFormat ( <var>newTarget</var>, <var>locales</var>, <var>options</var>, <var>required</var>, <var>defaults</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatoffsettimezoneidentifier" title="FormatOffsetTimeZoneIdentifier ( offsetMinutes )"><span class="secnum">11.1.3</span> FormatOffsetTimeZoneIdentifier ( <var>offsetMinutes</var> )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-datetimeformat-constructor" title="Intl.DateTimeFormat 构造函数的属性"><span class="secnum">11.2</span> Intl.DateTimeFormat 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype" title="Intl.DateTimeFormat.prototype"><span class="secnum">11.2.1</span> Intl.DateTimeFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.supportedlocalesof" title="Intl.DateTimeFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">11.2.2</span> Intl.DateTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle">+</span><a href="#sec-intl.datetimeformat-internal-slots" title="内部槽"><span class="secnum">11.2.3</span> 内部槽</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-format-record" title="DateTime Format Record"><span class="secnum">11.2.3.1</span> DateTime Format Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-range-pattern-record" title="DateTime Range Pattern Record"><span class="secnum">11.2.3.2</span> DateTime Range Pattern Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-range-pattern-format-record" title="DateTime Range Pattern Format Record"><span class="secnum">11.2.3.3</span> DateTime Range Pattern Format Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-range-pattern-part-record" title="DateTime Range Pattern Part Record"><span class="secnum">11.2.3.4</span> DateTime Range Pattern Part Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-styles-record" title="DateTime Styles Record"><span class="secnum">11.2.3.5</span> DateTime Styles Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-style-record" title="DateTime Style Record"><span class="secnum">11.2.3.6</span> DateTime Style Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-connector-record" title="DateTime Connector Record"><span class="secnum">11.2.3.7</span> DateTime Connector Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-date-range-record" title="DateTime Date Range Record"><span class="secnum">11.2.3.8</span> DateTime Date Range Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-time-range-record" title="DateTime Time Range Record"><span class="secnum">11.2.3.9</span> DateTime Time Range Record</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-style-range-record" title="DateTime Style Range Record"><span class="secnum">11.2.3.10</span> DateTime Style Range Record</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-datetimeformat-prototype-object" title="Intl.DateTimeFormat 原型对象的属性"><span class="secnum">11.3</span> Intl.DateTimeFormat 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.constructor" title="Intl.DateTimeFormat.prototype.constructor"><span class="secnum">11.3.1</span> Intl.DateTimeFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.resolvedOptions" title="Intl.DateTimeFormat.prototype.resolvedOptions ( )"><span class="secnum">11.3.2</span> Intl.DateTimeFormat.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.format" title="get Intl.DateTimeFormat.prototype.format"><span class="secnum">11.3.3</span> get Intl.DateTimeFormat.prototype.format</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.formatRange" title="Intl.DateTimeFormat.prototype.formatRange ( startDate, endDate )"><span class="secnum">11.3.4</span> Intl.DateTimeFormat.prototype.formatRange ( <var>startDate</var>, <var>endDate</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DateTimeFormat.prototype.formatRangeToParts" title="Intl.DateTimeFormat.prototype.formatRangeToParts ( startDate, endDate )"><span class="secnum">11.3.5</span> Intl.DateTimeFormat.prototype.formatRangeToParts ( <var>startDate</var>, <var>endDate</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DateTimeFormat.prototype.formatToParts" title="Intl.DateTimeFormat.prototype.formatToParts ( date )"><span class="secnum">11.3.6</span> Intl.DateTimeFormat.prototype.formatToParts ( <var>date</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype-%symbol.tostringtag%" title="Intl.DateTimeFormat.prototype [ %Symbol.toStringTag% ]"><span class="secnum">11.3.7</span> Intl.DateTimeFormat.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-datetimeformat-instances" title="Intl.DateTimeFormat 实例的属性"><span class="secnum">11.4</span> Intl.DateTimeFormat 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-datetimeformat-abstracts" title="DateTimeFormat 对象的抽象操作"><span class="secnum">11.5</span> DateTimeFormat 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-date-time-style-format" title="DateTimeStyleFormat ( dateStyle, timeStyle, styles )"><span class="secnum">11.5.1</span> DateTimeStyleFormat ( <var>dateStyle</var>, <var>timeStyle</var>, <var>styles</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-basicformatmatcher" title="BasicFormatMatcher ( options, formats )"><span class="secnum">11.5.2</span> BasicFormatMatcher ( <var>options</var>, <var>formats</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-bestfitformatmatcher" title="BestFitFormatMatcher ( options, formats )"><span class="secnum">11.5.3</span> BestFitFormatMatcher ( <var>options</var>, <var>formats</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetime-format-functions" title="DateTime 格式化函数"><span class="secnum">11.5.4</span> DateTime 格式化函数</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimepattern" title="FormatDateTimePattern ( dateTimeFormat, format, pattern, epochNanoseconds )"><span class="secnum">11.5.5</span> FormatDateTimePattern ( <var>dateTimeFormat</var>, <var>format</var>, <var>pattern</var>, <var>epochNanoseconds</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitiondatetimepattern" title="PartitionDateTimePattern ( dateTimeFormat, x )"><span class="secnum">11.5.6</span> PartitionDateTimePattern ( <var>dateTimeFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetime" title="FormatDateTime ( dateTimeFormat, x )"><span class="secnum">11.5.7</span> FormatDateTime ( <var>dateTimeFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimetoparts" title="FormatDateTimeToParts ( dateTimeFormat, x )"><span class="secnum">11.5.8</span> FormatDateTimeToParts ( <var>dateTimeFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitiondatetimerangepattern" title="PartitionDateTimeRangePattern ( dateTimeFormat, x, y )"><span class="secnum">11.5.9</span> PartitionDateTimeRangePattern ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimerange" title="FormatDateTimeRange ( dateTimeFormat, x, y )"><span class="secnum">11.5.10</span> FormatDateTimeRange ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimerangetoparts" title="FormatDateTimeRangeToParts ( dateTimeFormat, x, y )"><span class="secnum">11.5.11</span> FormatDateTimeRangeToParts ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-tolocaltime" title="ToLocalTime ( epochNs, calendar, timeZoneIdentifier )"><span class="secnum">11.5.12</span> ToLocalTime ( <var>epochNs</var>, <var>calendar</var>, <var>timeZoneIdentifier</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetimeformat-tolocaltime-records" title="ToLocalTime 记录"><span class="secnum">11.5.13</span> ToLocalTime 记录</a></li><li><span class="item-toggle-none"></span><a href="#sec-unwrapdatetimeformat" title="UnwrapDateTimeFormat ( dtf )"><span class="secnum">11.5.14</span> UnwrapDateTimeFormat ( <var>dtf</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#intl-displaynames-objects" title="DisplayNames 对象"><span class="secnum">12</span> DisplayNames 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-displaynames-constructor" title="Intl.DisplayNames 构造函数"><span class="secnum">12.1</span> Intl.DisplayNames 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames" title="Intl.DisplayNames ( locales, options )"><span class="secnum">12.1.1</span> Intl.DisplayNames ( <var>locales</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-displaynames-constructor" title="Intl.DisplayNames 构造函数的属性"><span class="secnum">12.2</span> Intl.DisplayNames 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype" title="Intl.DisplayNames.prototype"><span class="secnum">12.2.1</span> Intl.DisplayNames.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.supportedLocalesOf" title="Intl.DisplayNames.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">12.2.2</span> Intl.DisplayNames.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames-internal-slots" title="内部槽"><span class="secnum">12.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-displaynames-prototype-object" title="Intl.DisplayNames 原型对象的属性"><span class="secnum">12.3</span> Intl.DisplayNames 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype.constructor" title="Intl.DisplayNames.prototype.constructor"><span class="secnum">12.3.1</span> Intl.DisplayNames.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype.resolvedOptions" title="Intl.DisplayNames.prototype.resolvedOptions ( )"><span class="secnum">12.3.2</span> Intl.DisplayNames.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype.of" title="Intl.DisplayNames.prototype.of ( code )"><span class="secnum">12.3.3</span> Intl.DisplayNames.prototype.of ( <var>code</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.displaynames.prototype-%symbol.tostringtag%" title="Intl.DisplayNames.prototype [ %Symbol.toStringTag% ]"><span class="secnum">12.3.4</span> Intl.DisplayNames.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-displaynames-instances" title="Intl.DisplayNames 实例的属性"><span class="secnum">12.4</span> Intl.DisplayNames 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-intl-displaynames-abstracts" title="DisplayNames 对象的抽象操作"><span class="secnum">12.5</span> DisplayNames 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-canonicalcodefordisplaynames" title="CanonicalCodeForDisplayNames ( type, code )"><span class="secnum">12.5.1</span> CanonicalCodeForDisplayNames ( <var>type</var>, <var>code</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-isvaliddatetimefieldcode" title="IsValidDateTimeFieldCode ( field )"><span class="secnum">12.5.2</span> IsValidDateTimeFieldCode ( <var>field</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#durationformat-objects" title="DurationFormat 对象"><span class="secnum">13</span> DurationFormat 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-durationformat-constructor" title="Intl.DurationFormat 构造函数"><span class="secnum">13.1</span> Intl.DurationFormat 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat" title="Intl.DurationFormat ( [ locales [ , options ] ] )"><span class="secnum">13.1.1</span> Intl.DurationFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-durationformat-constructor" title="Intl.DurationFormat 构造函数的属性"><span class="secnum">13.2</span> Intl.DurationFormat 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.prototype" title="Intl.DurationFormat.prototype"><span class="secnum">13.2.1</span> Intl.DurationFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.supportedLocalesOf" title="Intl.DurationFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">13.2.2</span> Intl.DurationFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat-internal-slots" title="内部槽"><span class="secnum">13.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-durationformat-prototype-object" title="Intl.DurationFormat 原型对象的属性"><span class="secnum">13.3</span> Intl.DurationFormat 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.prototype.constructor" title="Intl.DurationFormat.prototype.constructor"><span class="secnum">13.3.1</span> Intl.DurationFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.prototype.resolvedOptions" title="Intl.DurationFormat.prototype.resolvedOptions ( )"><span class="secnum">13.3.2</span> Intl.DurationFormat.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.prototype.format" title="Intl.DurationFormat.prototype.format ( duration )"><span class="secnum">13.3.3</span> Intl.DurationFormat.prototype.format ( <var>duration</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.prototype.formatToParts" title="Intl.DurationFormat.prototype.formatToParts ( duration )"><span class="secnum">13.3.4</span> Intl.DurationFormat.prototype.formatToParts ( <var>duration</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DurationFormat.prototype-%symbol.tostringtag%" title="Intl.DurationFormat.prototype [ %Symbol.toStringTag% ]"><span class="secnum">13.3.5</span> Intl.DurationFormat.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-durationformat-instances" title="Intl.DurationFormat 实例的属性"><span class="secnum">13.4</span> Intl.DurationFormat 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-intl-durationformat-abstracts" title="DurationFormat 对象的抽象操作"><span class="secnum">13.5</span> DurationFormat 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-duration-records" title="持续时间记录"><span class="secnum">13.5.1</span> 持续时间记录</a></li><li><span class="item-toggle-none"></span><a href="#sec-tointegerifintegral" title="ToIntegerIfIntegral ( argument )"><span class="secnum">13.5.2</span> ToIntegerIfIntegral ( <var>argument</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-todurationrecord" title="ToDurationRecord ( input )"><span class="secnum">13.5.3</span> ToDurationRecord ( <var>input</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-durationsign" title="DurationSign ( duration )"><span class="secnum">13.5.4</span> DurationSign ( <var>duration</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-isvalidduration" title="IsValidDuration ( years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds )"><span class="secnum">13.5.5</span> IsValidDuration ( <var>years</var>, <var>months</var>, <var>weeks</var>, <var>days</var>, <var>hours</var>, <var>minutes</var>, <var>seconds</var>, <var>milliseconds</var>, <var>microseconds</var>, <var>nanoseconds</var> )</a></li><li><span class="item-toggle">+</span><a href="#sec-getdurationunitoptions" title="GetDurationUnitOptions ( unit, options, baseStyle, stylesList, digitalBase, prevStyle, twoDigitHours )"><span class="secnum">13.5.6</span> GetDurationUnitOptions ( <var>unit</var>, <var>options</var>, <var>baseStyle</var>, <var>stylesList</var>, <var>digitalBase</var>, <var>prevStyle</var>, <var>twoDigitHours</var> )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-durationformat-unit-options-record" title="持续时间单位选项记录"><span class="secnum">13.5.6.1</span> 持续时间单位选项记录</a></li><li><span class="item-toggle-none"></span><a href="#sec-validatedurationunitstyle" title="ValidateDurationUnitStyle ( unit, style, display, prevStyle )"><span class="secnum">13.5.6.2</span> ValidateDurationUnitStyle ( <var>unit</var>, <var>style</var>, <var>display</var>, <var>prevStyle</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-computefractionaldigits" title="ComputeFractionalDigits ( durationFormat, duration )"><span class="secnum">13.5.7</span> ComputeFractionalDigits ( <var>durationFormat</var>, <var>duration</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-nextunitfractional" title="NextUnitFractional ( durationFormat, unit )"><span class="secnum">13.5.8</span> NextUnitFractional ( <var>durationFormat</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumerichours" title="FormatNumericHours ( durationFormat, hoursValue, signDisplayed )"><span class="secnum">13.5.9</span> FormatNumericHours ( <var>durationFormat</var>, <var>hoursValue</var>, <var>signDisplayed</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumericminutes" title="FormatNumericMinutes ( durationFormat, minutesValue, hoursDisplayed, signDisplayed )"><span class="secnum">13.5.10</span> FormatNumericMinutes ( <var>durationFormat</var>, <var>minutesValue</var>, <var>hoursDisplayed</var>, <var>signDisplayed</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumericseconds" title="FormatNumericSeconds ( durationFormat, secondsValue, minutesDisplayed, signDisplayed )"><span class="secnum">13.5.11</span> FormatNumericSeconds ( <var>durationFormat</var>, <var>secondsValue</var>, <var>minutesDisplayed</var>, <var>signDisplayed</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumericunits" title="FormatNumericUnits ( durationFormat, duration, firstNumericUnit, signDisplayed )"><span class="secnum">13.5.12</span> FormatNumericUnits ( <var>durationFormat</var>, <var>duration</var>, <var>firstNumericUnit</var>, <var>signDisplayed</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-isfractionalsecondunitname" title="IsFractionalSecondUnitName ( unit )"><span class="secnum">13.5.13</span> IsFractionalSecondUnitName ( <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-listformatparts" title="ListFormatParts ( durationFormat, partitionedPartsList )"><span class="secnum">13.5.14</span> ListFormatParts ( <var>durationFormat</var>, <var>partitionedPartsList</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitiondurationformatpattern" title="PartitionDurationFormatPattern ( durationFormat, duration )"><span class="secnum">13.5.15</span> PartitionDurationFormatPattern ( <var>durationFormat</var>, <var>duration</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#listformat-objects" title="ListFormat 对象"><span class="secnum">14</span> ListFormat 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-listformat-constructor" title="Intl.ListFormat 构造函数"><span class="secnum">14.1</span> Intl.ListFormat 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat" title="Intl.ListFormat ( [ locales [ , options ] ] )"><span class="secnum">14.1.1</span> Intl.ListFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-listformat-constructor" title="Intl.ListFormat 构造函数的属性"><span class="secnum">14.2</span> Intl.ListFormat 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype" title="Intl.ListFormat.prototype"><span class="secnum">14.2.1</span> Intl.ListFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.supportedLocalesOf" title="Intl.ListFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">14.2.2</span> Intl.ListFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat-internal-slots" title="内部槽"><span class="secnum">14.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-listformat-prototype-object" title="Intl.ListFormat 原型对象的属性"><span class="secnum">14.3</span> Intl.ListFormat 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.constructor" title="Intl.ListFormat.prototype.constructor"><span class="secnum">14.3.1</span> Intl.ListFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.resolvedoptions" title="Intl.ListFormat.prototype.resolvedOptions ( )"><span class="secnum">14.3.2</span> Intl.ListFormat.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.format" title="Intl.ListFormat.prototype.format ( list )"><span class="secnum">14.3.3</span> Intl.ListFormat.prototype.format ( <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.formatToParts" title="Intl.ListFormat.prototype.formatToParts ( list )"><span class="secnum">14.3.4</span> Intl.ListFormat.prototype.formatToParts ( <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype-toStringTag" title="Intl.ListFormat.prototype [ %Symbol.toStringTag% ]"><span class="secnum">14.3.5</span> Intl.ListFormat.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-listformat-instances" title="Intl.ListFormat 实例的属性"><span class="secnum">14.4</span> Intl.ListFormat 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-intl-listformat-abstracts" title="ListFormat 对象的抽象操作"><span class="secnum">14.5</span> ListFormat 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-deconstructpattern" title="DeconstructPattern ( pattern, placeables )"><span class="secnum">14.5.1</span> DeconstructPattern ( <var>pattern</var>, <var>placeables</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-createpartsfromlist" title="CreatePartsFromList ( listFormat, list )"><span class="secnum">14.5.2</span> CreatePartsFromList ( <var>listFormat</var>, <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatlist" title="FormatList ( listFormat, list )"><span class="secnum">14.5.3</span> FormatList ( <var>listFormat</var>, <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatlisttoparts" title="FormatListToParts ( listFormat, list )"><span class="secnum">14.5.4</span> FormatListToParts ( <var>listFormat</var>, <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-createstringlistfromiterable" title="StringListFromIterable ( iterable )"><span class="secnum">14.5.5</span> StringListFromIterable ( <var>iterable</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#locale-objects" title="语言环境对象"><span class="secnum">15</span> 语言环境对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-locale-constructor" title="Intl.Locale 构造函数"><span class="secnum">15.1</span> Intl.Locale 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale" title="Intl.Locale ( tag [ , options ] )"><span class="secnum">15.1.1</span> Intl.Locale ( <var>tag</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-updatelanguageid" title="UpdateLanguageId ( tag, options )"><span class="secnum">15.1.2</span> UpdateLanguageId ( <var>tag</var>, <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-makelocalerecord" title="MakeLocaleRecord ( tag, options, localeExtensionKeys )"><span class="secnum">15.1.3</span> MakeLocaleRecord ( <var>tag</var>, <var>options</var>, <var>localeExtensionKeys</var> )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-locale-constructor" title="Intl.Locale 构造函数的属性"><span class="secnum">15.2</span> Intl.Locale 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype" title="Intl.Locale.prototype"><span class="secnum">15.2.1</span> Intl.Locale.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.locale-internal-slots" title="内部槽"><span class="secnum">15.2.2</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-locale-prototype-object" title="Intl.Locale 原型对象的属性"><span class="secnum">15.3</span> Intl.Locale 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.constructor" title="Intl.Locale.prototype.constructor"><span class="secnum">15.3.1</span> Intl.Locale.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.baseName" title="get Intl.Locale.prototype.baseName"><span class="secnum">15.3.2</span> get Intl.Locale.prototype.baseName</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.calendar" title="get Intl.Locale.prototype.calendar"><span class="secnum">15.3.3</span> get Intl.Locale.prototype.calendar</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.caseFirst" title="get Intl.Locale.prototype.caseFirst"><span class="secnum">15.3.4</span> get Intl.Locale.prototype.caseFirst</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.collation" title="get Intl.Locale.prototype.collation"><span class="secnum">15.3.5</span> get Intl.Locale.prototype.collation</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.firstDayOfWeek" title="get Intl.Locale.prototype.firstDayOfWeek"><span class="secnum">15.3.6</span> get Intl.Locale.prototype.firstDayOfWeek</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.hourCycle" title="get Intl.Locale.prototype.hourCycle"><span class="secnum">15.3.7</span> get Intl.Locale.prototype.hourCycle</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.language" title="get Intl.Locale.prototype.language"><span class="secnum">15.3.8</span> get Intl.Locale.prototype.language</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.maximize" title="Intl.Locale.prototype.maximize ( )"><span class="secnum">15.3.9</span> Intl.Locale.prototype.maximize ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.minimize" title="Intl.Locale.prototype.minimize ( )"><span class="secnum">15.3.10</span> Intl.Locale.prototype.minimize ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.numberingSystem" title="get Intl.Locale.prototype.numberingSystem"><span class="secnum">15.3.11</span> get Intl.Locale.prototype.numberingSystem</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.numeric" title="get Intl.Locale.prototype.numeric"><span class="secnum">15.3.12</span> get Intl.Locale.prototype.numeric</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.region" title="get Intl.Locale.prototype.region"><span class="secnum">15.3.13</span> get Intl.Locale.prototype.region</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.script" title="get Intl.Locale.prototype.script"><span class="secnum">15.3.14</span> get Intl.Locale.prototype.script</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.toString" title="Intl.Locale.prototype.toString ( )"><span class="secnum">15.3.15</span> Intl.Locale.prototype.toString ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getCalendars" title="Intl.Locale.prototype.getCalendars ( )"><span class="secnum">15.3.16</span> Intl.Locale.prototype.getCalendars ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getCollations" title="Intl.Locale.prototype.getCollations ( )"><span class="secnum">15.3.17</span> Intl.Locale.prototype.getCollations ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getHourCycles" title="Intl.Locale.prototype.getHourCycles ( )"><span class="secnum">15.3.18</span> Intl.Locale.prototype.getHourCycles ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getNumberingSystems" title="Intl.Locale.prototype.getNumberingSystems ( )"><span class="secnum">15.3.19</span> Intl.Locale.prototype.getNumberingSystems ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getTimeZones" title="Intl.Locale.prototype.getTimeZones ( )"><span class="secnum">15.3.20</span> Intl.Locale.prototype.getTimeZones ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getTextInfo" title="Intl.Locale.prototype.getTextInfo ( )"><span class="secnum">15.3.21</span> Intl.Locale.prototype.getTextInfo ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.getWeekInfo" title="Intl.Locale.prototype.getWeekInfo ( )"><span class="secnum">15.3.22</span> Intl.Locale.prototype.getWeekInfo ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.variants" title="get Intl.Locale.prototype.variants"><span class="secnum">15.3.23</span> get Intl.Locale.prototype.variants</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.locale.prototype-%symbol.tostringtag%" title="Intl.Locale.prototype [ %Symbol.toStringTag% ]"><span class="secnum">15.3.24</span> Intl.Locale.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-locale-instances" title="Intl.Locale 实例的属性"><span class="secnum">15.4</span> Intl.Locale 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-intl-locale-abstracts" title="语言环境对象的抽象操作"><span class="secnum">15.5</span> 语言环境对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-getlocalebasename" title="GetLocaleBaseName ( locale )"><span class="secnum">15.5.1</span> GetLocaleBaseName ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getlocalelanguage" title="GetLocaleLanguage ( locale )"><span class="secnum">15.5.2</span> GetLocaleLanguage ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getlocalescript" title="GetLocaleScript ( locale )"><span class="secnum">15.5.3</span> GetLocaleScript ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getlocaleregion" title="GetLocaleRegion ( locale )"><span class="secnum">15.5.4</span> GetLocaleRegion ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getlocalevariants" title="GetLocaleVariants ( locale )"><span class="secnum">15.5.5</span> GetLocaleVariants ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-unicodeextensionvalue" title="UnicodeExtensionValue ( locale, key )"><span class="secnum">15.5.6</span> UnicodeExtensionValue ( <var>locale</var>, <var>key</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-canonicalunicodesubdivision" title="CanonicalUnicodeSubdivision ( locale, key )"><span class="secnum">15.5.7</span> CanonicalUnicodeSubdivision ( <var>locale</var>, <var>key</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-regionpreference" title="RegionPreference ( locale )"><span class="secnum">15.5.8</span> RegionPreference ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-calendarsoflocale" title="CalendarsOfLocale ( loc )"><span class="secnum">15.5.9</span> CalendarsOfLocale ( <var>loc</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-collationsoflocale" title="CollationsOfLocale ( loc )"><span class="secnum">15.5.10</span> CollationsOfLocale ( <var>loc</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-hourcyclesoflocale" title="HourCyclesOfLocale ( loc )"><span class="secnum">15.5.11</span> HourCyclesOfLocale ( <var>loc</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-numberingsystemsoflocale" title="NumberingSystemsOfLocale ( loc )"><span class="secnum">15.5.12</span> NumberingSystemsOfLocale ( <var>loc</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-timezonesoflocale" title="TimeZonesOfLocale ( loc )"><span class="secnum">15.5.13</span> TimeZonesOfLocale ( <var>loc</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-textdirectionoflocale" title="TextDirectionOfLocale ( loc )"><span class="secnum">15.5.14</span> TextDirectionOfLocale ( <var>loc</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weekdaytouvalue" title="WeekdayToUValue ( fw )"><span class="secnum">15.5.15</span> WeekdayToUValue ( <var>fw</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weekdayuvaluetonumber" title="WeekdayUValueToNumber ( fw )"><span class="secnum">15.5.16</span> WeekdayUValueToNumber ( <var>fw</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weekinfooflocale" title="WeekInfoOfLocale ( loc )"><span class="secnum">15.5.17</span> WeekInfoOfLocale ( <var>loc</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#numberformat-objects" title="NumberFormat 对象"><span class="secnum">16</span> NumberFormat 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-numberformat-constructor" title="Intl.NumberFormat 构造函数"><span class="secnum">16.1</span> Intl.NumberFormat 构造函数</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl.numberformat" title="Intl.NumberFormat ( [ locales [ , options ] ] )"><span class="secnum">16.1.1</span> Intl.NumberFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-chainnumberformat" title="ChainNumberFormat ( numberFormat, newTarget, this )"><span class="secnum">16.1.1.1</span> ChainNumberFormat ( <var>numberFormat</var>, <var>newTarget</var>, <var>this</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-setnumberformatdigitoptions" title="SetNumberFormatDigitOptions ( intlObj, options, mnfdDefault, mxfdDefault, notation )"><span class="secnum">16.1.2</span> SetNumberFormatDigitOptions ( <var>intlObj</var>, <var>options</var>, <var>mnfdDefault</var>, <var>mxfdDefault</var>, <var>notation</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-setnumberformatunitoptions" title="SetNumberFormatUnitOptions ( intlObj, options )"><span class="secnum">16.1.3</span> SetNumberFormatUnitOptions ( <var>intlObj</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-numberformat-constructor" title="Intl.NumberFormat 构造函数的属性"><span class="secnum">16.2</span> Intl.NumberFormat 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype" title="Intl.NumberFormat.prototype"><span class="secnum">16.2.1</span> Intl.NumberFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.supportedlocalesof" title="Intl.NumberFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">16.2.2</span> Intl.NumberFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat-internal-slots" title="内部槽"><span class="secnum">16.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-numberformat-prototype-object" title="Intl.NumberFormat 原型对象的属性"><span class="secnum">16.3</span> Intl.NumberFormat 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.constructor" title="Intl.NumberFormat.prototype.constructor"><span class="secnum">16.3.1</span> Intl.NumberFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.resolvedoptions" title="Intl.NumberFormat.prototype.resolvedOptions ( )"><span class="secnum">16.3.2</span> Intl.NumberFormat.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.format" title="获取 Intl.NumberFormat.prototype.format"><span class="secnum">16.3.3</span> 获取 Intl.NumberFormat.prototype.format</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.formatrange" title="Intl.NumberFormat.prototype.formatRange ( start, end )"><span class="secnum">16.3.4</span> Intl.NumberFormat.prototype.formatRange ( <var>start</var>, <var>end</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.formatrangetoparts" title="Intl.NumberFormat.prototype.formatRangeToParts ( start, end )"><span class="secnum">16.3.5</span> Intl.NumberFormat.prototype.formatRangeToParts ( <var>start</var>, <var>end</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.formattoparts" title="Intl.NumberFormat.prototype.formatToParts ( value )"><span class="secnum">16.3.6</span> Intl.NumberFormat.prototype.formatToParts ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype-%symbol.tostringtag%" title="Intl.NumberFormat.prototype [ %Symbol.toStringTag% ]"><span class="secnum">16.3.7</span> Intl.NumberFormat.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-numberformat-instances" title="Intl.NumberFormat 实例的属性"><span class="secnum">16.4</span> Intl.NumberFormat 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-numberformat-abstracts" title="NumberFormat 对象的抽象操作"><span class="secnum">16.5</span> NumberFormat 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-currencydigits" title="CurrencyDigits ( currency )"><span class="secnum">16.5.1</span> CurrencyDigits ( <var>currency</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-number-format-functions" title="数字格式化函数"><span class="secnum">16.5.2</span> 数字格式化函数</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumerictostring" title="FormatNumericToString ( intlObject, x )"><span class="secnum">16.5.3</span> FormatNumericToString ( <var>intlObject</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionnumberpattern" title="PartitionNumberPattern ( numberFormat, x )"><span class="secnum">16.5.4</span> PartitionNumberPattern ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionnotationsubpattern" title="PartitionNotationSubPattern ( numberFormat, x, n, exponent )"><span class="secnum">16.5.5</span> PartitionNotationSubPattern ( <var>numberFormat</var>, <var>x</var>, <var>n</var>, <var>exponent</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumber" title="FormatNumeric ( numberFormat, x )"><span class="secnum">16.5.6</span> FormatNumeric ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumbertoparts" title="FormatNumericToParts ( numberFormat, x )"><span class="secnum">16.5.7</span> FormatNumericToParts ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-torawprecision" title="
        ToRawPrecision (
        x: 一个非负数学值,
        minPrecision: 1 到 21（含）的整数,
        maxPrecision: 1 到 21（含）的整数,
        unsignedRoundingMode:  的无符号舍入模式规范类型，或
        undefined,
        ): 一个包含 [[FormattedString]]（字符串）、[[RoundedNumber]]（数学值）、[[IntegerDigitsCount]]（整数）、[[RoundingMagnitude]]（整数）的记录
      "><span class="secnum">16.5.8</span> 
        ToRawPrecision (
        <var>x</var>: 一个非负数学值,
        <var>minPrecision</var>: 1 到 21（含）的整数,
        <var>maxPrecision</var>: 1 到 21（含）的整数,
        <var>unsignedRoundingMode</var>: <emu-xref href="#table-intl-unsigned-rounding-modes"></emu-xref> 的无符号舍入模式规范类型，或
        <emu-val>undefined</emu-val>,
        ): 一个包含 <var class="field">[[FormattedString]]</var>（字符串）、<var class="field">[[RoundedNumber]]</var>（数学值）、<var class="field">[[IntegerDigitsCount]]</var>（整数）、<var class="field">[[RoundingMagnitude]]</var>（整数）的记录
      </a></li><li><span class="item-toggle-none"></span><a href="#sec-torawfixed" title="
        ToRawFixed (
        x: 一个非负数学值,
        minFraction: 0 到 100（含）的整数,
        maxFraction: 0 到 100（含）的整数,
        roundingIncrement: 一个整数,
        unsignedRoundingMode:  的无符号舍入模式规范类型，或
        undefined,
        ): 一个包含 [[FormattedString]]（字符串）、[[RoundedNumber]]（数学值）、[[IntegerDigitsCount]]（整数）、[[RoundingMagnitude]]（整数）的记录
      "><span class="secnum">16.5.9</span> 
        ToRawFixed (
        <var>x</var>: 一个非负数学值,
        <var>minFraction</var>: 0 到 100（含）的整数,
        <var>maxFraction</var>: 0 到 100（含）的整数,
        <var>roundingIncrement</var>: 一个整数,
        <var>unsignedRoundingMode</var>: <emu-xref href="#table-intl-unsigned-rounding-modes"></emu-xref> 的无符号舍入模式规范类型，或
        <emu-val>undefined</emu-val>,
        ): 一个包含 <var class="field">[[FormattedString]]</var>（字符串）、<var class="field">[[RoundedNumber]]</var>（数学值）、<var class="field">[[IntegerDigitsCount]]</var>（整数）、<var class="field">[[RoundingMagnitude]]</var>（整数）的记录
      </a></li><li><span class="item-toggle-none"></span><a href="#sec-unwrapnumberformat" title="UnwrapNumberFormat ( nf )"><span class="secnum">16.5.10</span> UnwrapNumberFormat ( <var>nf</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getnumberformatpattern" title="GetNumberFormatPattern ( numberFormat, x )"><span class="secnum">16.5.11</span> GetNumberFormatPattern ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getnotationsubpattern" title="GetNotationSubPattern ( numberFormat, exponent )"><span class="secnum">16.5.12</span> GetNotationSubPattern ( <var>numberFormat</var>, <var>exponent</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-computeexponent" title="ComputeExponent ( numberFormat, x )"><span class="secnum">16.5.13</span> ComputeExponent ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-computeexponentformagnitude" title="ComputeExponentForMagnitude ( numberFormat, magnitude )"><span class="secnum">16.5.14</span> ComputeExponentForMagnitude ( <var>numberFormat</var>, <var>magnitude</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-runtime-semantics-stringintlmv" title="运行时语义：StringIntlMV"><span class="secnum">16.5.15</span> 运行时语义：StringIntlMV</a></li><li><span class="item-toggle-none"></span><a href="#sec-tointlmathematicalvalue" title="ToIntlMathematicalValue ( value )"><span class="secnum">16.5.16</span> ToIntlMathematicalValue ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getunsignedroundingmode" title="GetUnsignedRoundingMode ( roundingMode, sign )"><span class="secnum">16.5.17</span> GetUnsignedRoundingMode ( <var>roundingMode</var>, <var>sign</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-applyunsignedroundingmode" title="
        ApplyUnsignedRoundingMode (
        x: 一个数学值,
        r1: 一个数学值,
        r2: 一个数学值,
        unsignedRoundingMode:  的无符号舍入模式规范类型，或
        undefined,
        ): 一个数学值
      "><span class="secnum">16.5.18</span> 
        ApplyUnsignedRoundingMode (
        <var>x</var>: 一个数学值,
        <var>r1</var>: 一个数学值,
        <var>r2</var>: 一个数学值,
        <var>unsignedRoundingMode</var>: <emu-xref href="#table-intl-unsigned-rounding-modes"></emu-xref> 的无符号舍入模式规范类型，或
        <emu-val>undefined</emu-val>,
        ): 一个数学值
      </a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionnumberrangepattern" title="PartitionNumberRangePattern ( numberFormat, x, y )"><span class="secnum">16.5.19</span> PartitionNumberRangePattern ( <var>numberFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatapproximately" title="FormatApproximately ( numberFormat, result )"><span class="secnum">16.5.20</span> FormatApproximately ( <var>numberFormat</var>, <var>result</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-collapsenumberrange" title="CollapseNumberRange ( numberFormat, result )"><span class="secnum">16.5.21</span> CollapseNumberRange ( <var>numberFormat</var>, <var>result</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumericrange" title="FormatNumericRange ( numberFormat, x, y )"><span class="secnum">16.5.22</span> FormatNumericRange ( <var>numberFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumericrangetoparts" title="FormatNumericRangeToParts ( numberFormat, x, y )"><span class="secnum">16.5.23</span> FormatNumericRangeToParts ( <var>numberFormat</var>, <var>x</var>, <var>y</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#pluralrules-objects" title="PluralRules 对象"><span class="secnum">17</span> PluralRules 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-pluralrules-constructor" title="Intl.PluralRules 构造函数"><span class="secnum">17.1</span> Intl.PluralRules 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules" title="Intl.PluralRules ( [ locales [ , options ] ] )"><span class="secnum">17.1.1</span> Intl.PluralRules ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-pluralrules-constructor" title="Intl.PluralRules 构造函数的属性"><span class="secnum">17.2</span> Intl.PluralRules 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype" title="Intl.PluralRules.prototype"><span class="secnum">17.2.1</span> Intl.PluralRules.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.supportedlocalesof" title="Intl.PluralRules.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">17.2.2</span> Intl.PluralRules.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules-internal-slots" title="内部槽"><span class="secnum">17.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-pluralrules-prototype-object" title="Intl.PluralRules 原型对象的属性"><span class="secnum">17.3</span> Intl.PluralRules 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.constructor" title="Intl.PluralRules.prototype.constructor"><span class="secnum">17.3.1</span> Intl.PluralRules.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.resolvedoptions" title="Intl.PluralRules.prototype.resolvedOptions ( )"><span class="secnum">17.3.2</span> Intl.PluralRules.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.select" title="Intl.PluralRules.prototype.select ( value )"><span class="secnum">17.3.3</span> Intl.PluralRules.prototype.select ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.selectrange" title="Intl.PluralRules.prototype.selectRange ( start, end )"><span class="secnum">17.3.4</span> Intl.PluralRules.prototype.selectRange ( <var>start</var>, <var>end</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype-%symbol.tostringtag%" title="Intl.PluralRules.prototype [ %Symbol.toStringTag% ]"><span class="secnum">17.3.5</span> Intl.PluralRules.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-pluralrules-instances" title="Intl.PluralRules 实例的属性"><span class="secnum">17.4</span> Intl.PluralRules 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-intl-pluralrules-abstracts" title="PluralRules 对象的抽象操作"><span class="secnum">17.5</span> PluralRules 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-pluralruleselect" title="PluralRuleSelect ( locale, type, notation, compactDisplay, s )"><span class="secnum">17.5.1</span> PluralRuleSelect ( <var>locale</var>, <var>type</var>, <var>notation</var>, <var>compactDisplay</var>, <var>s</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-resolveplural" title="ResolvePlural ( pluralRules, n )"><span class="secnum">17.5.2</span> ResolvePlural ( <var>pluralRules</var>, <var>n</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-pluralruleselectrange" title="PluralRuleSelectRange ( locale, type, notation, compactDisplay, xp, yp )"><span class="secnum">17.5.3</span> PluralRuleSelectRange ( <var>locale</var>, <var>type</var>, <var>notation</var>, <var>compactDisplay</var>, <var>xp</var>, <var>yp</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-resolvepluralrange" title="ResolvePluralRange ( pluralRules, x, y )"><span class="secnum">17.5.4</span> ResolvePluralRange ( <var>pluralRules</var>, <var>x</var>, <var>y</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#relativetimeformat-objects" title="RelativeTimeFormat 对象"><span class="secnum">18</span> RelativeTimeFormat 对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-relativetimeformat-constructor" title="Intl.RelativeTimeFormat 构造函数"><span class="secnum">18.1</span> Intl.RelativeTimeFormat 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat" title="Intl.RelativeTimeFormat ( [ locales [ , options ] ] )"><span class="secnum">18.1.1</span> Intl.RelativeTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-relativetimeformat-constructor" title="Intl.RelativeTimeFormat 构造函数的属性"><span class="secnum">18.2</span> Intl.RelativeTimeFormat 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype" title="Intl.RelativeTimeFormat.prototype"><span class="secnum">18.2.1</span> Intl.RelativeTimeFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.supportedLocalesOf" title="Intl.RelativeTimeFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">18.2.2</span> Intl.RelativeTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat-internal-slots" title="内部槽"><span class="secnum">18.2.3</span> 内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-relativetimeformat-prototype-object" title="Intl.RelativeTimeFormat 原型对象的属性"><span class="secnum">18.3</span> Intl.RelativeTimeFormat 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype.constructor" title="Intl.RelativeTimeFormat.prototype.constructor"><span class="secnum">18.3.1</span> Intl.RelativeTimeFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.relativetimeformat.prototype.resolvedoptions" title="Intl.RelativeTimeFormat.prototype.resolvedOptions ( )"><span class="secnum">18.3.2</span> Intl.RelativeTimeFormat.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype.format" title="Intl.RelativeTimeFormat.prototype.format ( value, unit )"><span class="secnum">18.3.3</span> Intl.RelativeTimeFormat.prototype.format ( <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype.formatToParts" title="Intl.RelativeTimeFormat.prototype.formatToParts ( value, unit )"><span class="secnum">18.3.4</span> Intl.RelativeTimeFormat.prototype.formatToParts ( <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype-toStringTag" title="Intl.RelativeTimeFormat.prototype [ %Symbol.toStringTag% ]"><span class="secnum">18.3.5</span> Intl.RelativeTimeFormat.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-relativetimeformat-instances" title="Intl.RelativeTimeFormat 实例的属性"><span class="secnum">18.4</span> Intl.RelativeTimeFormat 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-intl-relativetimeformat--abstracts" title="RelativeTimeFormat 对象的抽象操作"><span class="secnum">18.5</span> RelativeTimeFormat 对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-singularrelativetimeunit" title="SingularRelativeTimeUnit ( unit )"><span class="secnum">18.5.1</span> SingularRelativeTimeUnit ( <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-PartitionRelativeTimePattern" title="PartitionRelativeTimePattern ( relativeTimeFormat, value, unit )"><span class="secnum">18.5.2</span> PartitionRelativeTimePattern ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-makepartslist" title="MakePartsList ( pattern, unit, parts )"><span class="secnum">18.5.3</span> MakePartsList ( <var>pattern</var>, <var>unit</var>, <var>parts</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-FormatRelativeTime" title="FormatRelativeTime ( relativeTimeFormat, value, unit )"><span class="secnum">18.5.4</span> FormatRelativeTime ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-FormatRelativeTimeToParts" title="FormatRelativeTimeToParts ( relativeTimeFormat, value, unit )"><span class="secnum">18.5.5</span> FormatRelativeTimeToParts ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#segmenter-objects" title="分词器对象"><span class="secnum">19</span> 分词器对象</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-intl-segmenter-constructor" title="Intl.Segmenter 构造函数"><span class="secnum">19.1</span> Intl.Segmenter 构造函数</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter" title="Intl.Segmenter ( [ locales [ , options ] ] )"><span class="secnum">19.1.1</span> Intl.Segmenter ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-segmenter-constructor" title="Intl.Segmenter 构造函数的属性"><span class="secnum">19.2</span> Intl.Segmenter 构造函数的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype" title="Intl.Segmenter.prototype"><span class="secnum">19.2.1</span> Intl.Segmenter.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.supportedlocalesof" title="Intl.Segmenter.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">19.2.2</span> Intl.Segmenter.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter-internal-slots" title="Intl.Segmenter 构造函数的内部槽"><span class="secnum">19.2.3</span> Intl.Segmenter 构造函数的内部槽</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-properties-of-intl-segmenter-prototype-object" title="Intl.Segmenter 原型对象的属性"><span class="secnum">19.3</span> Intl.Segmenter 原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype.constructor" title="Intl.Segmenter.prototype.constructor"><span class="secnum">19.3.1</span> Intl.Segmenter.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype.resolvedoptions" title="Intl.Segmenter.prototype.resolvedOptions ( )"><span class="secnum">19.3.2</span> Intl.Segmenter.prototype.resolvedOptions ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype.segment" title="Intl.Segmenter.prototype.segment ( string )"><span class="secnum">19.3.3</span> Intl.Segmenter.prototype.segment ( <var>string</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype-%symbol.tostringtag%" title="Intl.Segmenter.prototype [ %Symbol.toStringTag% ]"><span class="secnum">19.3.4</span> Intl.Segmenter.prototype [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-segmenter-instances" title="Intl.Segmenter 实例的属性"><span class="secnum">19.4</span> Intl.Segmenter 实例的属性</a></li><li><span class="item-toggle">+</span><a href="#sec-segments-objects" title="Segments 对象"><span class="secnum">19.5</span> Segments 对象</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createsegmentsobject" title="CreateSegmentsObject ( segmenter, string )"><span class="secnum">19.5.1</span> CreateSegmentsObject ( <var>segmenter</var>, <var>string</var> )</a></li><li><span class="item-toggle">+</span><a href="#sec-%intlsegmentsprototype%-object" title="%IntlSegmentsPrototype% 对象"><span class="secnum">19.5.2</span> %IntlSegmentsPrototype% 对象</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-%intlsegmentsprototype%.containing" title="%IntlSegmentsPrototype%.containing ( index )"><span class="secnum">19.5.2.1</span> %IntlSegmentsPrototype%.containing ( <var>index</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%intlsegmentsprototype%-%symbol.iterator%" title="%IntlSegmentsPrototype% [ %Symbol.iterator% ] ( )"><span class="secnum">19.5.2.2</span> %IntlSegmentsPrototype% [ %Symbol.iterator% ] ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-segments-instances" title="Segments 实例的属性"><span class="secnum">19.5.3</span> Segments 实例的属性</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-segment-iterator-objects" title="Segment Iterator 对象"><span class="secnum">19.6</span> Segment Iterator 对象</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createsegmentiterator" title="CreateSegmentIterator ( segmenter, string )"><span class="secnum">19.6.1</span> CreateSegmentIterator ( <var>segmenter</var>, <var>string</var> )</a></li><li><span class="item-toggle">+</span><a href="#sec-%intlsegmentiteratorprototype%-object" title="%IntlSegmentIteratorPrototype% 对象"><span class="secnum">19.6.2</span> %IntlSegmentIteratorPrototype% 对象</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-%intlsegmentiteratorprototype%.next" title="%IntlSegmentIteratorPrototype%.next ( )"><span class="secnum">19.6.2.1</span> %IntlSegmentIteratorPrototype%.next ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%intlsegmentiteratorprototype%.%symbol.tostringtag%" title="%IntlSegmentIteratorPrototype% [ %Symbol.toStringTag% ]"><span class="secnum">19.6.2.2</span> %IntlSegmentIteratorPrototype% [ %Symbol.toStringTag% ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-segment-iterator-instances" title="Segment Iterator 实例的属性"><span class="secnum">19.6.3</span> Segment Iterator 实例的属性</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-segment-data-objects" title="Segment Data 对象"><span class="secnum">19.7</span> Segment Data 对象</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createsegmentdataobject" title="CreateSegmentDataObject ( segmenter, string, startIndex, endIndex )"><span class="secnum">19.7.1</span> CreateSegmentDataObject ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var> )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-intl-segmenter-abstracts" title="分词器对象的抽象操作"><span class="secnum">19.8</span> 分词器对象的抽象操作</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-findboundary" title="FindBoundary ( segmenter, string, startIndex, direction )"><span class="secnum">19.8.1</span> FindBoundary ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>direction</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#locale-sensitive-functions" title="ECMAScript语言规范的区域敏感函数"><span class="secnum">20</span> ECMAScript语言规范的区域敏感函数</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sup-properties-of-the-string-prototype-object" title="String原型对象的属性"><span class="secnum">20.1</span> String原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-String.prototype.localeCompare" title="String.prototype.localeCompare ( that [ , locales [ , options ] ] )"><span class="secnum">20.1.1</span> String.prototype.localeCompare ( <var>that</var> [ , <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle">+</span><a href="#sup-string.prototype.tolocalelowercase" title="String.prototype.toLocaleLowerCase ( [ locales ] )"><span class="secnum">20.1.2</span> String.prototype.toLocaleLowerCase ( [ <var>locales</var> ] )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-transform-case" title="TransformCase ( S, locales, targetCase )"><span class="secnum">20.1.2.1</span> TransformCase ( <var>S</var>, <var>locales</var>, <var>targetCase</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sup-string.prototype.tolocaleuppercase" title="String.prototype.toLocaleUpperCase ( [ locales ] )"><span class="secnum">20.1.3</span> String.prototype.toLocaleUpperCase ( [ <var>locales</var> ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sup-properties-of-the-number-prototype-object" title="Number原型对象的属性"><span class="secnum">20.2</span> Number原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-number.prototype.tolocalestring" title="Number.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">20.2.1</span> Number.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sup-properties-of-the-bigint-prototype-object" title="BigInt原型对象的属性"><span class="secnum">20.3</span> BigInt原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-bigint.prototype.tolocalestring" title="BigInt.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">20.3.1</span> BigInt.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sup-properties-of-the-date-prototype-object" title="Date原型对象的属性"><span class="secnum">20.4</span> Date原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-date.prototype.tolocalestring" title="Date.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">20.4.1</span> Date.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sup-date.prototype.tolocaledatestring" title="Date.prototype.toLocaleDateString ( [ locales [ , options ] ] )"><span class="secnum">20.4.2</span> Date.prototype.toLocaleDateString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sup-date.prototype.tolocaletimestring" title="Date.prototype.toLocaleTimeString ( [ locales [ , options ] ] )"><span class="secnum">20.4.3</span> Date.prototype.toLocaleTimeString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sup-properties-of-the-array-prototype-object" title="Array原型对象的属性"><span class="secnum">20.5</span> Array原型对象的属性</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-array.prototype.tolocalestring" title="Array.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">20.5.1</span> Array.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li></ol></li><li><span class="item-toggle-none"></span><a href="#annex-implementation-dependent-behaviour" title="实现依赖行为"><span class="secnum">Annex A <span class="annex-kind">(informative)</span></span> 实现依赖行为</a></li><li><span class="item-toggle-none"></span><a href="#annex-incompatibilities" title="引入与先前版本不兼容的新增与变更"><span class="secnum">Annex B <span class="annex-kind">(informative)</span></span> 引入与先前版本不兼容的新增与变更</a></li><li><span class="item-toggle-none"></span><a href="#sec-colophon" title="跋"><span class="secnum">Annex C <span class="annex-kind">(informative)</span></span> 跋</a></li><li><span class="item-toggle-none"></span><a href="#sec-copyright-and-software-license" title="Copyright &amp; Software License">Copyright &amp; Software License</a></li></ol></div></div><div id="spec-container"><h1 class="version">Draft ECMA-402 / February 21, 2026</h1><h1 class="title">ECMAScript® 2026 Internationalization API Specification</h1>
<p><img src="img/ecma-logo.svg" id="ecma-logo"></p>
<div id="metadata-block">
  <h1>贡献本规范</h1>
  <p>本规范在 GitHub 上由 ECMAScript 社区协作开发。您可以通过以下方式参与本规范的开发：</p>
  <ul>
    <li>GitHub 仓库：<a href="https://github.com/tc39/ecma402">https://github.com/tc39/ecma402</a></li>
    <li>问题：<a href="https://github.com/tc39/ecma402/issues">所有问题</a>，<a href="https://github.com/tc39/ecma402/issues/new">提交新问题</a></li>
    <li>拉取请求：<a href="https://github.com/tc39/ecma402/pulls">所有拉取请求</a>，<a href="https://github.com/tc39/ecma402/pulls/new">创建新拉取请求</a></li>
    <li>测试套件：<a href="https://github.com/tc39/test262">Test262</a></li>
    <li>TC39-TG2：
      <ul>
        <li>召集人：<a href="mailto:shane@unicode.org">Shane F. Carr</a>（<a href="https://github.com/sffc">@sffc</a>）</li>
        <li>管理组：<a href="mailto:ecma402-admin@chromium.org">邮件联系</a></li>
      </ul>
    </li>
    <li>编辑：
      <ul>
        <li><a href="mailto:benallen@igalia.com">Ben Allen</a>（<a href="https://github.com/ben-allen">@ben-allen</a>）
        </li>
        <li><a href="mailto:richard.gibson+ecma402@gmail.com">Richard Gibson</a>（<a href="https://github.com/gibson042">@gibson042</a>）</li>
        <li><a href="mailto:ryzokuken@igalia.com">Ujjwal Sharma</a>（<a href="https://github.com/ryzokuken">@ryzokuken</a>）</li>
      </ul>
    </li>
    <li>
      社区：
      <ul>
        <li>Matrix：<a href="https://matrix.to/#/#tc39:matrix.org">#tc39:matrix.org</a></li>
        <li>Matrix：<a href="https://matrix.to/#/#tc39-ecma402:matrix.org">#tc39-ecma402:matrix.org</a></li>
      </ul>
    </li>
  </ul>
  <p>更多关于本文件创建方式的信息，请参见 <emu-xref href="#sec-colophon" id="_ref_0"><a href="#sec-colophon">colophon</a></emu-xref>。</p>
</div>
<emu-intro id="introduction">
  <h1>介绍</h1>
  <p>本规范的源代码可在 <a href="https://github.com/tc39/ecma402">https://github.com/tc39/ecma402</a> 找到。</p>
  <p>ECMAScript 2026 国际化 API 规范（ECMA-402 第13版）为 <emu-xref href="#ecma262" id="_ref_229"><a href="#ecma262">ECMA-262</a></emu-xref> 提供了关键的语言敏感功能。其功能选自诸如 <dfn id="icu" tabindex="-1">Unicode 国际化组件（ICU）库</dfn>（<a href="https://unicode-org.github.io/icu-docs/">https://unicode-org.github.io/icu-docs/</a>）、.NET 框架和 Java
    平台等成熟的国际化 API。</p>
  <p>第1版 API 由 Ecma TC39 于2010年9月成立的临时小组开发，基于 Nebojša Ćirić 和 Jungshik Shin 的提案。</p>
  <p>第2版 API 于2015年6月由大会采纳，作为 ECMAScript 第6版的补充。</p>
  <p>第3版 API 是在 Ecma TC39 新的年度发布节奏和开放开发流程下发布的首个版本。ECMA-402 源文档被构建为纯文本源文件，作为后续完全在 GitHub
    上开发的基础。在本标准开发的一年中，提交了数十个拉取请求和问题，涵盖了许多错误修复、编辑修正和其他改进。此外，还开发了许多软件工具以协助此工作，包括 Ecmarkup、Ecmarkdown 和 Grammarkdown。</p>
  <p>许多组织的数十位个人在 Ecma TC39 内为本版及之前各版的开发做出了重要贡献。此外，一个充满活力的社区也在支持 TC39 的 ECMAScript
    工作。该社区审查了众多草案，提交了数十份错误报告，进行了实现实验，贡献了测试套件，并向全球开发者社区普及了 ECMAScript 国际化。遗憾的是，无法识别和感谢每一位为此做出贡献的个人和组织。</p>
  <p>
    Norbert Lindenberg<br>
    ECMA-402，第1版项目编辑
  </p>
  <p>
    Rick Waldron<br>
    ECMA-402，第2版项目编辑
  </p>
  <p>
    Caridy Patiño<br>
    ECMA-402，第3、4、5版项目编辑
  </p>
  <p>
    Caridy Patiño, Daniel Ehrenberg, Leo Balter<br>
    ECMA-402，第6版项目编辑
  </p>
  <p>
    Leo Balter, Valerie Young, Isaac Durazo<br>
    ECMA-402，第7版项目编辑
  </p>
  <p>
    Leo Balter, Richard Gibson<br>
    ECMA-402，第8版项目编辑
  </p>
  <p>
    Leo Balter, Richard Gibson, Ujjwal Sharma<br>
    ECMA-402，第9版项目编辑
  </p>
  <p>
    Richard Gibson, Ujjwal Sharma<br>
    ECMA-402，第10版项目编辑
  </p>
  <p>
    Richard Gibson, Ujjwal Sharma<br>
    ECMA-402，第11版项目编辑
  </p>
  <p>
    Ben Allen, Richard Gibson, Ujjwal Sharma<br>
    ECMA-402，第12版项目编辑
  </p>
  <p>
    Ben Allen, Richard Gibson, Ujjwal Sharma<br>
    ECMA-402，第13版项目编辑
  </p>
</emu-intro>
<emu-clause id="scope">
  <h1><span class="secnum">1</span> 范围</h1>
  <p>本标准定义了 ECMAScript 对象的应用程序接口，支持需要适应不同人类语言和国家所使用的语言和文化习惯的程序。</p>
</emu-clause>
<emu-clause id="conformance">
  <h1><span class="secnum">2</span> 一致性</h1>
  <p>本规范的符合性实现必须符合 <emu-xref href="#ecma262" id="_ref_230"><a href="#ecma262">ECMA-262</a></emu-xref>，并且必须提供和支持本规范中描述的所有对象、属性、函数和程序语义。本规范中的任何内容都不应允许 <emu-xref href="#ecma262" id="_ref_231"><a href="#ecma262">ECMA-262</a></emu-xref> 明令禁止的行为，任何此类冲突应被视为编辑错误，而不是对 <emu-xref href="#ecma262" id="_ref_232"><a href="#ecma262">ECMA-262</a></emu-xref>
    限制的覆盖。</p>
  <p>符合性实现允许提供本规范之外的其他对象、属性和函数。特别是，符合性实现允许为本规范中描述的对象提供未在本规范中描述的属性及其值。符合性实现不允许为本规范中定义的函数添加可选参数。</p>
  <p>符合性实现允许接受额外的值，并在以下 <var>options</var> 参数的属性中具有实现定义的行为，而不是抛出 <emu-val>RangeError</emu-val>：</p>
  <ul>
    <li>所有构造函数和 <code>supportedLocalesOf</code> 方法中的 <var>options</var> 属性 <emu-val>"localeMatcher"</emu-val>。</li>
    <li>Collator 构造函数中的 <var>options</var> 属性 <emu-val>"usage"</emu-val> 和 <emu-val>"sensitivity"</emu-val>。</li>
    <li>NumberFormat 构造函数中的 <var>options</var> 属性
      <emu-val>"style"</emu-val>、<emu-val>"currencyDisplay"</emu-val>、<emu-val>"notation"</emu-val>、<emu-val>"compactDisplay"</emu-val>、<emu-val>"signDisplay"</emu-val>、<emu-val>"currencySign"</emu-val> 和 <emu-val>"unitDisplay"</emu-val>。
    </li>
    <li>NumberFormat 构造函数中的 <var>options</var> 属性
      <emu-val>"minimumIntegerDigits"</emu-val>、<emu-val>"minimumFractionDigits"</emu-val>、<emu-val>"maximumFractionDigits"</emu-val>、<emu-val>"minimumSignificantDigits"</emu-val> 和
      <emu-val>"maximumSignificantDigits"</emu-val>，前提是这些额外的值被解释为高于指定限制的整数值。</li>
    <li>DateTimeFormat 构造函数中的 <emu-xref href="#table-datetimeformat-components" id="_ref_1"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 所列的 <var>options</var> 属性。</li>
    <li>DateTimeFormat 构造函数中的 <var>options</var> 属性 <emu-val>"formatMatcher"</emu-val>。</li>
    <li>PluralRules 构造函数中的 <var>options</var> 属性 <emu-val>"minimumIntegerDigits"</emu-val>、<emu-val>"minimumFractionDigits"</emu-val>、<emu-val>"maximumFractionDigits"</emu-val> 和
      <emu-val>"minimumSignificantDigits"</emu-val>，前提是这些额外的值被解释为高于指定限制的整数值。</li>
    <li>PluralRules 构造函数中的 <var>options</var> 属性 <emu-val>"type"</emu-val>。</li>
    <li>RelativeTimeFormat 构造函数中的 <var>options</var> 属性 <emu-val>"style"</emu-val> 和 <emu-val>"numeric"</emu-val>。</li>
    <li>DisplayNames 构造函数中的 <var>options</var> 属性 <emu-val>"style"</emu-val> 和 <emu-val>"type"</emu-val>。</li>
  </ul>
</emu-clause>
<emu-clause id="normative-references">
  <h1><span class="secnum">3</span> 规范性引用</h1>
  <p>下列参考文献是本文件应用所必需的。对于有日期的引用，仅适用于所引用的版本。对于无日期的引用，适用参考文献的最新版本（包括任何修订）。</p>

  <p>
    ECMAScript 2026 语言规范（<dfn id="ecma262" tabindex="-1">ECMA-262</dfn> 第17版或后续版本）。<br>
    <a href="https://www.ecma-international.org/publications/standards/Ecma-262.htm">https://www.ecma-international.org/publications/standards/Ecma-262.htm</a>
  </p>

  <ul>
    <li>
      ISO/IEC 10646:2014：信息技术——通用多字节编码字符集（UCS），以及修正案1:2015和修正案2，以及其他修正案和勘误，或后续版本
      <ul>
        <li><a href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=63182">https://www.iso.org/iso/catalogue_detail.htm?csnumber=63182</a>
        </li>
        <li><a href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=65047">https://www.iso.org/iso/catalogue_detail.htm?csnumber=65047</a>
        </li>
        <li><a href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=66791">https://www.iso.org/iso/catalogue_detail.htm?csnumber=66791</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="https://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=64758">ISO
        4217:2015，货币和资金表示代码，或后续版本</a>
    </li>
    <li>
      <a href="https://tools.ietf.org/html/rfc4647">IETF RFC 4647，语言标签匹配，或后续版本</a>
    </li>
    <li>
      <a href="https://www.iana.org/time-zones/">IANA 时区数据库</a>
    </li>
    <li>
      <a href="https://unicode.org/versions/latest">Unicode 标准</a>
    </li>
    <li>
      <a href="https://unicode.org/reports/tr29/">Unicode 标准附件 #29：Unicode 文本分段</a>
    </li>
    <li>
      <a href="https://unicode.org/reports/tr10/">Unicode 技术标准 #10：Unicode 排序算法</a>
    </li>
    <li>
      <a href="https://unicode.org/reports/tr35/">Unicode 技术标准 #35：Unicode 区域数据标记语言（LDML）</a>
      <ul>
        <li>
          <a href="https://unicode.org/reports/tr35/#Unicode_Language_and_Locale_Identifiers">第1部分核心，第3节 Unicode
            语言和区域标识符</a>
        </li>
        <li>
          <a href="https://unicode.org/reports/tr35/tr35-general.html#Unit_Identifiers">第2部分通用，第6.2节 单位标识符</a>
        </li>
        <li>
          <a href="https://unicode.org/reports/tr35/tr35-numbers.html#Operands">第3部分数字，第5.1.1节 操作数</a>
        </li>
      </ul>
    </li>
  </ul>
  <emu-note><span class="note">Note</span><div class="note-contents">
    本规范依赖于这些参考文献的部分会尽力保持更新，但不能保证与这些标准保持同步。
  </div></emu-note>
</emu-clause>
<emu-clause id="overview">
  <h1><span class="secnum">4</span> 概述</h1>

  <p>本节为非规范性内容。</p>

  <emu-clause id="sec-internationalization-localization-globalization">
    <h1><span class="secnum">4.1</span> 国际化、本地化和全球化</h1>

    <p>
      软件的国际化是指设计软件，使其支持或能够轻松适应不同语言和文化期望用户的需求，并实现全球范围内的交流。本地化则是实际针对特定语言和文化进行适配。软件全球化通常被理解为国际化和本地化的结合。全球化从最低层开始，采用支持所有语言的文本表示，并使用标准标识符来识别语言、国家、时区及其他相关参数。它还包括使用用户界面语言和用户理解的数据展示，最后通常需要针对用户的语言、文化和环境进行产品特定的适配。
    </p>
    <p>
      <emu-xref href="#ecma262" id="_ref_233"><a href="#ecma262">ECMA-262</a></emu-xref>通过使用Unicode进行文本表示，并提供少量语言敏感的函数，为国际化奠定了基础，但应用程序对这些函数的行为控制有限。本规范在此基础上，提供了一套可定制的语言敏感功能。即使应用程序本身未国际化，该API也很有用，因为即便只针对一种语言和地区，也需要正确支持该语言和地区。然而，该API也支持同时支持多种语言和地区的应用程序，这在服务器环境中可能是必要的。
    </p>
  </emu-clause>

  <emu-clause id="sec-api-overview">
    <h1><span class="secnum">4.2</span> API概述</h1>

    <p>本规范旨在补充<emu-xref href="#ecma262" id="_ref_234"><a href="#ecma262">ECMA-262</a></emu-xref>，提供关键的语言敏感功能，可以整体或部分添加到其实现中。本规范引入了ECMAScript代码可观察的新语言值（如<var class="field">[[FallbackSymbol]]</var>内部槽的值，以及通过<emu-xref href="#sec-property-accessors"><a href="https://tc39.es/ecma262/#sec-property-accessors">属性访问</a></emu-xref>从<emu-xref href="#intl-object" id="_ref_235"><a href="#intl-object">%Intl%</a></emu-xref>可递归访问的值集合），并细化了<emu-xref href="#ecma262" id="_ref_236"><a href="#ecma262">ECMA-262</a></emu-xref>中某些函数的定义（如下所述）。这两类都不禁止<emu-xref href="#ecma262" id="_ref_237"><a href="#ecma262">ECMA-262</a></emu-xref>中定义的值和接口允许的其他行为，以支持任何实现采用本规范。
    </p>
    <p>
      本规范提供了大多数应用程序所需的几项关键语言敏感功能：区域选择与检查、字符串比较（排序）与大小写转换、复数规则、文本分段，以及数字、绝对和相对日期与时间、持续时间和列表的格式化。虽然<emu-xref href="#ecma262" id="_ref_238"><a href="#ecma262">ECMA-262</a></emu-xref>为这些基本功能提供了函数（在<emu-xref href="#sec-array.prototype"><a href="https://tc39.es/ecma262/#sec-array.prototype">Array.prototype</a></emu-xref>上：<code>toLocaleString</code>；在<emu-xref href="#sec-string.prototype"><a href="https://tc39.es/ecma262/#sec-string.prototype">String.prototype</a></emu-xref>上：<code>localeCompare</code>、<code>toLocaleLowerCase</code>、<code>toLocaleUpperCase</code>；在<emu-xref href="#sec-number.prototype"><a href="https://tc39.es/ecma262/#sec-number.prototype">Number.prototype</a></emu-xref>上：<code>toLocaleString</code>；在<emu-xref href="#sec-date.prototype"><a href="https://tc39.es/ecma262/#sec-date.prototype">Date.prototype</a></emu-xref>上：<code>toLocaleString</code>、<code>toLocaleDateString</code>和<code>toLocaleTimeString</code>），但它们的实际行为在很大程度上由实现决定。本规范提供了更多功能、对语言和行为细节的控制，以及更完整的功能规范。
    </p>

    <p>应用程序可以通过两种方式使用API：</p>
    <ol>
      <li>
        直接使用，通过<emu-xref href="#service-constructor" id="_ref_239"><a href="#service-constructor">服务构造函数</a></emu-xref>构造对象，指定首选语言列表和配置选项。该对象提供主要函数（如<code>compare</code>、<code>select</code>、<code>format</code>等），可重复调用。它还提供<code>resolvedOptions</code>函数，应用程序可用其查询对象的具体配置。
      </li>
      <li>
        间接使用，通过上述<emu-xref href="#ecma262" id="_ref_240"><a href="#ecma262">ECMA-262</a></emu-xref>的函数。排序和格式化函数在本规范中重新定义，接受与Collator、NumberFormat和DateTimeFormat构造函数相同的参数，并产生与其compare或format方法相同的结果。大小写转换函数重新定义为接受首选语言列表。
      </li>
    </ol>

    <p>Intl对象用于封装本规范定义的所有功能，以避免名称冲突。</p>

    <emu-note><span class="note">Note</span><div class="note-contents">虽然API包含多种格式化器，但不提供任何解析功能。这是有意为之，经过充分讨论，并在权衡所有利弊后做出决定。详见<a href="https://github.com/tc39/ecma402/issues/424">问题追踪</a>。</div></emu-note>
  </emu-clause>

  <emu-clause id="sec-api-conventions">
    <h1><span class="secnum">4.3</span> API约定</h1>

    <p>每个<emu-xref href="#sec-constructor-properties-of-the-intl-object" id="_ref_2"><a href="#sec-constructor-properties-of-the-intl-object">Intl构造函数</a></emu-xref>应表现得如同由类定义，在作为函数（无NewTarget）调用时抛出<emu-val>TypeError</emu-val>异常。为兼容以往版本，<emu-xref href="#sec-intl-collator-constructor" id="_ref_241"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>、<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_242"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>和<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_243"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>在作为函数调用时仍会构造并返回新对象。
    </p>

    <emu-note id="legacy-constructor"><span class="note"><a href="#legacy-constructor">Note</a></span><div class="note-contents">
      在ECMA 402 v1中，Intl构造函数支持一种操作模式，即用已有对象作为接收者调用时，会向该对象添加相关内部槽，使其变为类实例。在ECMA 402 v2中，为避免向现有对象添加内部槽，该能力被移除。在ECMA 402
      v3中，该能力以“规范性可选”模式重新添加，即构造函数调用时会将底层Intl实例链到任何对象上。详情见<a href="https://github.com/tc39/ecma402/issues/57">Issue
        57</a>。
    </div></emu-note>
  </emu-clause>

  <emu-clause id="sec-implementation-dependencies">
    <h1><span class="secnum">4.4</span> 实现依赖</h1>

    <p>由于国际化的特殊性，本规范必须将若干细节留给实现决定：</p>
    <ul>
      <li>
        <em>实现支持的具有充分本地化的区域集合：</em>语言学家已描述了数千种人类语言，IANA语言<emu-xref href="#bcp-47-subtag" id="_ref_244"><a href="#bcp-47-subtag">子标签</a></emu-xref>注册表包含7000多个主语言<emu-xref href="#bcp-47-subtag" id="_ref_245"><a href="#bcp-47-subtag">子标签</a></emu-xref>（用于区域标识符）。即使是大型区域数据集，如Common Locale Data
        Repository，也只覆盖所有语言及其地区或方言变体的一小部分。针对资源受限设备的实现可能还需进一步缩减集合。
      </li>
      <li>
        <em>本地化内容如格式模式的具体形式：</em>许多情况下，区域相关的惯例并未标准化，因此可能存在多种形式，或随时间变化。不同国际化库可能实现了不同形式，但实际上都不算错误。为允许该API基于现有库实现，必须允许这些差异。
      </li>
      <li>
        <em>Unicode子集：</em>某些操作（如排序）可作用于包含整个Unicode字符集的字符串。然而，Unicode标准和ECMAScript标准都允许实现将功能限制在Unicode字符集的子集。此外，区域惯例通常只规定与该区域相关字符的期望行为，而非整个Unicode字符集。Unicode排序算法结合了整个Unicode字符集的默认排序顺序和本地惯例的定制，子集和定制仍会导致行为差异。
      </li>
    </ul>
    <p>
      在浏览器实现中，某一来源可见的初始区域、货币、日历、编号系统及其他可枚举项集合，必须对所有共享同一用户代理字符串（引擎和平台版本）的用户一致。此外，这些集合的动态变化不得导致用户之间可区分。此约束旨在降低国际化固有的指纹识别风险，未来版本可能会放宽。受此约束，允许按需安装区域的浏览器实现首次收到某来源请求可能需安装新区域时，不得透露该区域是否已安装。
    </p>

    <p>在本规范中，实现和区域相关的行为称为<dfn tabindex="-1">ILD</dfn>，实现、区域和编号系统相关的行为称为<dfn tabindex="-1">ILND</dfn>。</p>

    <emu-clause id="sec-compatibility">
      <h1><span class="secnum">4.4.1</span> 跨实现的兼容性</h1>

      <p>
        ECMA
        402描述了其函数所用数据的结构。数据内容由实现决定，预期随时间变化且各实现不同。程序员可观察到这些差异，并可构造依赖特定输出的程序。但本规范力求描述合理约束，使编写良好的程序能在各实现间运行。鼓励实现继续努力协调语言数据。
      </p>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="conventions">
  <h1><span class="secnum">5</span> 符号约定</h1>

  <p>本标准使用 <emu-xref href="#ecma262" id="_ref_246"><a href="#ecma262">ECMA-262</a></emu-xref> 的符号约定子集：</p>

  <ul>
    <li>对象内部方法和内部槽，如 <emu-xref href="#sec-object-internal-methods-and-internal-slots" title=""><a href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots">Object Internal Methods and Internal Slots</a></emu-xref> 所述。</li>
    <li>算法约定，如 <emu-xref href="#sec-algorithm-conventions" title=""><a href="https://tc39.es/ecma262/#sec-algorithm-conventions">Algorithm Conventions</a></emu-xref> 所述，以及抽象操作的使用，如 <emu-xref href="#sec-type-conversion" title=""><a href="https://tc39.es/ecma262/#sec-type-conversion">Type Conversion</a></emu-xref>、<emu-xref href="#sec-testing-and-comparison-operations" title=""><a href="https://tc39.es/ecma262/#sec-testing-and-comparison-operations">Testing and Comparison Operations</a></emu-xref>、<emu-xref href="#sec-operations-on-objects" title=""><a href="https://tc39.es/ecma262/#sec-operations-on-objects">Operations on Objects</a></emu-xref> 和 <emu-xref href="#sec-operations-on-iterator-objects" title=""><a href="https://tc39.es/ecma262/#sec-operations-on-iterator-objects">Operations on Iterator Objects</a></emu-xref> 所述。</li>
    <li>内部槽，如 <emu-xref href="#sec-ordinary-object-internal-methods-and-internal-slots" title=""><a href="https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots">Ordinary Object Internal Methods and Internal Slots</a></emu-xref> 所述。</li>
    <li><emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> 和 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 规范类型，如 <emu-xref href="#sec-list-and-record-specification-type" title=""><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">The List and Record Specification Types</a></emu-xref> 所述。</li>
  </ul>

  <emu-note><span class="note">Note</span><div class="note-contents">
    如 <emu-xref href="#ecma262" id="_ref_247"><a href="#ecma262">ECMA-262</a></emu-xref> 所述，算法用于精确指定 ECMAScript 构造的必要语义，但并不意味着必须采用任何特定的实现技术。内部槽用于定义对象值的语义，但不是 API 的一部分。它们仅用于说明目的。API
    的实现必须表现得如同以此处描述的方式生成和操作内部槽。
  </div></emu-note>

  <p>作为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 规范类型的扩展，符号“[[&lt;<var>name</var>&gt;]]”表示字段名由变量 <var>name</var> 给出，<var>name</var> 必须为字符串值。例如，如果变量 <var>s</var> 的值为 <emu-val>"a"</emu-val>，则 [[&lt;<var>s</var>&gt;]] 表示字段
    <var class="field">[[a]]</var>。</p>

  <p>本规范使用标记为 <span class="normative-optional">规范性可选</span> 的区块，表示 ECMA 262 中 <a href="https://tc39.es/ecma262/#sec-additional-ecmascript-features-for-web-browsers">附录 B</a> 的含义。即，规范性可选部分在
    ECMAScript 宿主为网页浏览器时是必需的。如果 ECMAScript 宿主不是网页浏览器，则该部分内容是规范性的但可选。</p>

  <emu-clause id="sec-402-well-known-intrinsic-objects">
    <h1><span class="secnum">5.1</span> 知名内在对象</h1>

    <p>下表扩展了 <emu-xref href="#sec-well-known-intrinsic-objects" title=""><a href="https://tc39.es/ecma262/#sec-well-known-intrinsic-objects">Well-Known Intrinsic Objects</a></emu-xref> 中定义的知名内在对象表。</p>

    <emu-table id="table-402-well-known-intrinsic-objects"><figure><figcaption>Table 1: 知名内在对象（扩展）</figcaption>
      
      <table class="real-table">
        <thead>
          <tr>
            <th>内在名称</th>
            <th>全局名称</th>
            <th>ECMAScript 语言关联</th>
          </tr>
        </thead>
        <tbody><tr>
          <td><emu-xref href="#intl-object" id="_ref_248"><a href="#intl-object">%Intl%</a></emu-xref></td>
          <td><code>Intl</code></td>
          <td><code>Intl</code> 对象 (<emu-xref href="#intl-object" id="_ref_3"><a href="#intl-object">8</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-collator-constructor" id="_ref_249"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref></td>
          <td><code>Intl.Collator</code></td>
          <td><code>Intl.Collator</code> 构造函数 (<emu-xref href="#sec-intl-collator-constructor" id="_ref_4"><a href="#sec-intl-collator-constructor">10.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_250"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref></td>
          <td><code>Intl.DateTimeFormat</code></td>
          <td><code>Intl.DateTimeFormat</code> 构造函数 (<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_5"><a href="#sec-intl-datetimeformat-constructor">11.1</a></emu-xref>)
          </td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-displaynames-constructor" id="_ref_251"><a href="#sec-intl-displaynames-constructor">%Intl.DisplayNames%</a></emu-xref></td>
          <td><code>Intl.DisplayNames</code></td>
          <td><code>Intl.DisplayNames</code> 构造函数 (<emu-xref href="#sec-intl-displaynames-constructor" id="_ref_6"><a href="#sec-intl-displaynames-constructor">12.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-durationformat-constructor" id="_ref_252"><a href="#sec-intl-durationformat-constructor">%Intl.DurationFormat%</a></emu-xref></td>
          <td><code>Intl.DurationFormat</code></td>
          <td><code>Intl.DurationFormat</code> 构造函数 (<emu-xref href="#sec-intl-durationformat-constructor" id="_ref_7"><a href="#sec-intl-durationformat-constructor">13.1</a></emu-xref>)
          </td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-listformat-constructor" id="_ref_253"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref></td>
          <td><code>Intl.ListFormat</code></td>
          <td><code>Intl.ListFormat</code> 构造函数 (<emu-xref href="#sec-intl-listformat-constructor" id="_ref_8"><a href="#sec-intl-listformat-constructor">14.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-locale-constructor" id="_ref_254"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref></td>
          <td><code>Intl.Locale</code></td>
          <td><code>Intl.Locale</code> 构造函数 (<emu-xref href="#sec-intl-locale-constructor" id="_ref_9"><a href="#sec-intl-locale-constructor">15.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-numberformat-constructor" id="_ref_255"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref></td>
          <td><code>Intl.NumberFormat</code></td>
          <td><code>Intl.NumberFormat</code> 构造函数 (<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_10"><a href="#sec-intl-numberformat-constructor">16.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_256"><a href="#sec-intl-pluralrules-constructor">%Intl.PluralRules%</a></emu-xref></td>
          <td><code>Intl.PluralRules</code></td>
          <td><code>Intl.PluralRules</code> 构造函数 (<emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_11"><a href="#sec-intl-pluralrules-constructor">17.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_257"><a href="#sec-intl-relativetimeformat-constructor">%Intl.RelativeTimeFormat%</a></emu-xref></td>
          <td><code>Intl.RelativeTimeFormat</code></td>
          <td><code>Intl.RelativeTimeFormat</code> 构造函数 (<emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_12"><a href="#sec-intl-relativetimeformat-constructor">18.1</a></emu-xref>)
          </td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-segmenter-constructor" id="_ref_258"><a href="#sec-intl-segmenter-constructor">%Intl.Segmenter%</a></emu-xref></td>
          <td><code>Intl.Segmenter</code></td>
          <td><code>Intl.Segmenter</code> 构造函数 (<emu-xref href="#sec-intl-segmenter-constructor" id="_ref_13"><a href="#sec-intl-segmenter-constructor">19.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-%intlsegmentiteratorprototype%-object" id="_ref_259"><a href="#sec-%intlsegmentiteratorprototype%-object">%IntlSegmentIteratorPrototype%</a></emu-xref></td>
          <td></td>
          <td><emu-xref href="#sec-segment-iterator-objects" id="_ref_260"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref> 对象的原型 (<emu-xref href="#sec-%intlsegmentiteratorprototype%-object" id="_ref_14"><a href="#sec-%intlsegmentiteratorprototype%-object">19.6.2</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-%intlsegmentsprototype%-object" id="_ref_261"><a href="#sec-%intlsegmentsprototype%-object">%IntlSegmentsPrototype%</a></emu-xref></td>
          <td></td>
          <td>Segments 对象的原型 (<emu-xref href="#sec-%intlsegmentsprototype%-object" id="_ref_15"><a href="#sec-%intlsegmentsprototype%-object">19.5.2</a></emu-xref>)</td>
        </tr>
      </tbody></table>
    </figure></emu-table>
  </emu-clause>
</emu-clause>
<emu-clause id="locales-currencies-tz">
  <h1><span class="secnum">6</span> 语言环境、货币、时区、度量单位、数字系统、排序规则和日历的标识</h1>

  <p>本条款描述了本规范中用于标识语言环境、货币、时区、度量单位、数字系统、排序规则、日历和<emu-xref href="#sec-pattern-string-types" id="_ref_262"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>的字符串值。</p>

  <emu-clause id="sec-case-sensitivity-and-case-mapping">
    <h1><span class="secnum">6.1</span> 大小写敏感性与大小写映射</h1>

    <p>用于标识语言环境、货币、脚本和时区的字符串值以 ASCII 大小写不敏感方式解释，将代码单元 0x0041 到 0x005A（对应 Unicode 字符 LATIN CAPITAL LETTER A 到 LATIN
      CAPITAL LETTER Z）视为与相应代码单元 0x0061 到 0x007A（对应 Unicode 字符 LATIN SMALL LETTER A 到 LATIN SMALL LETTER
      Z）等价。不会应用其他大小写折叠等价关系。</p>
    <emu-note><span class="note">Note</span><div class="note-contents">
      例如，<emu-val>"ß"</emu-val>（U+00DF）不得匹配或映射到 <emu-val>"SS"</emu-val>（U+0053, U+0053）。<emu-val>"ı"</emu-val>（U+0131）不得匹配或映射到 <emu-val>"I"</emu-val>（U+0049）。
    </div></emu-note>
    <p>字符串值 <var>S</var> 的 <dfn tabindex="-1">ASCII-大写</dfn> 是通过将 <var>S</var> 中每个 ASCII 小写字母代码单元（0x0061 到 0x007A，包括）替换为相应的 ASCII 大写字母代码单元（0x0041 到
      0x005A，包括），同时保留所有其他代码单元而得到的字符串值。</p>
    <p>字符串值 <var>S</var> 的 <dfn tabindex="-1">ASCII-小写</dfn> 是通过将 <var>S</var> 中每个 ASCII 大写字母代码单元（0x0041 到 0x005A，包括）替换为相应的 ASCII 小写字母代码单元（0x0061 到
      0x007A，包括），同时保留所有其他代码单元而得到的字符串值。</p>
    <p>如果字符串值 <var>A</var> 的 ASCII-大写与字符串值 <var>B</var> 的 ASCII-大写完全相同，则 <var>A</var> 是 <var>B</var> 的 <dfn tabindex="-1">ASCII-大小写不敏感匹配</dfn>。如果 Unicode 代码点序列 <var>A</var> 的
      <emu-xref aoid="CodePointsToString"><a href="https://tc39.es/ecma262/#sec-codepointstostring">CodePointsToString</a></emu-xref>(<var>A</var>) 与 <var>B</var> 是 ASCII-大小写不敏感匹配，则 <var>A</var> 与 <var>B</var> 是 ASCII-大小写不敏感匹配。</p>
  </emu-clause>

  <emu-clause id="sec-language-tags">
    <h1><span class="secnum">6.2</span> 语言标签</h1>

    <p>
      本规范使用 <dfn variants="Unicode BCP 47 locale identifier" tabindex="-1">Unicode BCP 47 语言环境标识符</dfn>（定义见 <a href="https://unicode.org/reports/tr35/#BCP_47_Conformance">Unicode 技术标准 #35 第一部分核心，第 3.3 节 BCP 47
        合规性</a>），其算法引用 <a href="https://unicode.org/reports/tr35/#Unicode_Language_and_Locale_Identifiers">第 3 节 Unicode
        语言和语言环境标识符</a> 语法中定义的 <dfn variants="Unicode locale nonterminal" tabindex="-1">Unicode 语言环境非终结符</dfn>。
      每个标识符也可称为 <dfn variants="language tags" tabindex="-1">语言标签</dfn>，实际上也是 <a href="https://www.rfc-editor.org/rfc/bcp/bcp47.txt">BCP 47</a> 中使用的有效语言标签。
      按 <a href="https://unicode.org/reports/tr35/#Canonical_Unicode_Locale_Identifiers">Unicode 技术标准 #35 第一部分核心，第 3.2.1
        节 Canonical Unicode Locale Identifiers</a> 规范的规范形式语言环境标识符称为 "<dfn variants="Unicode canonicalized locale identifiers" tabindex="-1">Unicode 规范化语言环境标识符</dfn>"。
    </p>

    <p>
      语言环境标识符由大小写不敏感的 Unicode 基本拉丁字母数字 <dfn id="bcp-47-subtag" variants="subtag" tabindex="-1">子标签</dfn>组成，以 <emu-val>"-"</emu-val>（U+002D
      HYPHEN-MINUS）字符分隔，单字符 <emu-not-ref>子标签</emu-not-ref>称为 "<dfn variants="singleton subtag" tabindex="-1">单例子标签</dfn>"。
      <a href="https://unicode.org/reports/tr35/#u_Extension">Unicode 技术标准 #35 第一部分核心，第 3.6 节 Unicode BCP 47 U 扩展</a>
      <emu-xref href="#bcp-47-subtag" id="_ref_263"><a href="#bcp-47-subtag">子标签</a></emu-xref>序列被广泛使用，术语 "<dfn id="unicode-locale-extension-sequence" oldids="sec-unicode-locale-extension-sequences" variants="Unicode locale extension sequences" tabindex="-1"><span id="sec-unicode-locale-extension-sequences"></span>Unicode 语言环境扩展序列</dfn>" 描述了可被
      <code>unicode_locale_extensions</code> Unicode 语言环境非终结符匹配且不属于 <emu-val>"-x-…"</emu-val> 私有用途 <emu-not-ref>子标签序列</emu-not-ref>的最长
      <emu-not-ref>子字符串</emu-not-ref>。它以 <emu-val>"-u-"</emu-val> 开头，并包含所有紧随其后的非单例 <emu-not-ref>子标签</emu-not-ref>及其前导 <emu-val>"-"</emu-val>
      分隔符。例如，<emu-val>"en-US-u-fw-mon-x-u-ex-foobar"</emu-val> 的 <emu-not-ref>Unicode 语言环境扩展序列</emu-not-ref>为 <emu-val>"-u-fw-mon"</emu-val>。
    </p>

    <p>所有<emu-xref href="#sec-iswellformedlanguagetag" id="_ref_264"><a href="#sec-iswellformedlanguagetag">格式良好的语言标签</a></emu-xref>都适用于本规范定义的 API，但实现不要求使用 Unicode 通用语言环境数据存储库（<a href="https://cldr.unicode.org">CLDR</a>）数据进行验证；实现支持的语言环境集合及其语言标签是实现定义的。<emu-xref href="#sec-constructor-properties-of-the-intl-object" id="_ref_16"><a href="#sec-constructor-properties-of-the-intl-object">Intl 构造函数</a></emu-xref>将请求的语言标签映射到各自实现支持的语言环境。</p>

    <emu-clause id="sec-iswellformedlanguagetag" oldids="sec-isstructurallyvalidlanguagetag" type="abstract operation" aoid="IsWellFormedLanguageTag"><span id="sec-isstructurallyvalidlanguagetag"></span>
      <h1><span class="secnum">6.2.1</span> IsWellFormedLanguageTag ( <var>locale</var> )</h1>
      <p>The abstract operation IsWellFormedLanguageTag takes argument <var>locale</var> (一个字符串) and returns 一个布尔值. 判断 <var>locale</var> 是否为符合 <a href="https://unicode.org/reports/tr35/#unicode_bcp47_locale_id"><code>unicode_bcp47_locale_id</code></a>
          格式良好性约束的 <dfn variants="well-formed language tags" tabindex="-1">格式良好的语言标签</dfn>。不考虑 <var>locale</var>
          是否具有任何有意义的语义，也不区分别名<emu-xref href="#bcp-47-subtag" id="_ref_265"><a href="#bcp-47-subtag">子标签</a></emu-xref>与其首选替换<emu-xref href="#bcp-47-subtag" id="_ref_266"><a href="#bcp-47-subtag">子标签</a></emu-xref>，也不要求规范大小写或<emu-xref href="#bcp-47-subtag" id="_ref_267"><a href="#bcp-47-subtag">子标签</a></emu-xref>排序。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>lowerLocale</var> 为 <var>locale</var> 的 <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_268"><a href="#sec-case-sensitivity-and-case-mapping">ASCII-小写</a></emu-xref>。</li><li>如果 <var>lowerLocale</var> 不能被 <code>unicode_locale_id</code> <emu-xref href="#sec-language-tags" id="_ref_269"><a href="#sec-language-tags">Unicode 语言环境非终结符</a></emu-xref>匹配，则返回 <emu-val>false</emu-val>。</li><li>如果 <var>lowerLocale</var> 使用了 <a href="https://unicode.org/reports/tr35/#BCP_47_Conformance">Unicode 技术标准 #35 第一部分核心，第
          3.3 节 BCP 47 合规性</a> 中描述的任何向后兼容语法，则返回 <emu-val>false</emu-val>。</li><li>令 <var>baseName</var> 为 <emu-xref aoid="GetLocaleBaseName" id="_ref_270"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>lowerLocale</var>)。</li><li>令 <var>variants</var> 为 <emu-xref aoid="GetLocaleVariants" id="_ref_271"><a href="#sec-getlocalevariants">GetLocaleVariants</a></emu-xref>(<var>baseName</var>)。</li><li>如果 <var>variants</var> 不为 <emu-val>undefined</emu-val>，则</li><li>如果 <var>variants</var> 包含任何重复<emu-xref href="#bcp-47-subtag" id="_ref_272"><a href="#bcp-47-subtag">子标签</a></emu-xref>，则返回 <emu-val>false</emu-val>。</li><li>令 <var>extensions</var> 为 <var>lowerLocale</var> 中 <var>baseName</var> 后的后缀。</li><li>注：被 <code>pu_extensions</code> <emu-xref href="#sec-language-tags" id="_ref_273"><a href="#sec-language-tags">Unicode 语言环境非终结符</a></emu-xref>匹配的 <emu-val>"-x-…"</emu-val> 私有用途<emu-xref href="#bcp-47-subtag" id="_ref_274"><a href="#bcp-47-subtag">子标签</a></emu-xref>序列必须被忽略，但孤立的末尾 <emu-val>"x"</emu-val> <emu-xref href="#bcp-47-subtag" id="_ref_275"><a href="#bcp-47-subtag">子标签</a></emu-xref>且无后续内容不影响以下检查。</li><li>令 <var>puIndex</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>extensions</var>, <emu-val>"-x-"</emu-val>, 0)。</li><li>如果 <var>puIndex</var> 不为 <emu-const>not-found</emu-const>，则将 <var>extensions</var> 设置为 <var>extensions</var> 从 0 到 <var>puIndex</var> 的子字符串。</li><li>如果 <var>extensions</var> 不是空字符串，则</li><li>如果 <var>extensions</var> 包含任何重复<emu-xref href="#sec-language-tags" id="_ref_276"><a href="#sec-language-tags">单例子标签</a></emu-xref>，则返回 <emu-val>false</emu-val>。</li><li>令 <var>transformExtension</var> 为 <var>extensions</var> 中被 <code>transformed_extensions</code> <emu-xref href="#sec-language-tags" id="_ref_277"><a href="#sec-language-tags">Unicode 语言环境非终结符</a></emu-xref>匹配的最长
        <emu-not-ref>子字符串</emu-not-ref>。如果没有这样的 <emu-not-ref>子字符串</emu-not-ref>，则返回 <emu-val>true</emu-val>。</li><li>断言：<var>transformExtension</var> 从 0 到 3 的子字符串为 <emu-val>"-t-"</emu-val>。</li><li>令 <var>tPrefix</var> 为 <var>transformExtension</var> 从 3 开始的子字符串。</li><li>令 <var>tlang</var> 为 <var>tPrefix</var> 中被 <code>tlang</code> <emu-xref href="#sec-language-tags" id="_ref_278"><a href="#sec-language-tags">Unicode 语言环境非终结符</a></emu-xref>匹配的最长前缀。如果没有这样的前缀，则返回 <emu-val>true</emu-val>。</li><li>令 <var>tlangVariants</var> 为 <emu-xref aoid="GetLocaleVariants" id="_ref_279"><a href="#sec-getlocalevariants">GetLocaleVariants</a></emu-xref>(<var>tlang</var>)。</li><li>如果 <var>tlangVariants</var> 包含任何重复<emu-xref href="#bcp-47-subtag" id="_ref_280"><a href="#bcp-47-subtag">子标签</a></emu-xref>，则返回 <emu-val>false</emu-val>。</li><li>返回 <emu-val>true</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-canonicalizeunicodelocaleid" type="abstract operation" aoid="CanonicalizeUnicodeLocaleId">
      <h1><span class="secnum">6.2.2</span> CanonicalizeUnicodeLocaleId ( <var>locale</var> )</h1>
      <p>The abstract operation CanonicalizeUnicodeLocaleId takes argument <var>locale</var> (一个<emu-xref href="#sec-language-tags" id="_ref_281"><a href="#sec-language-tags">语言标签</a></emu-xref>) and returns 一个 <emu-xref href="#sec-language-tags" id="_ref_282"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>. 返回 <var>locale</var> 的规范化且大小写规则化形式。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>localeId</var> 为执行 <a href="https://unicode.org/reports/tr35/#processing-localeids">Processing LocaleIds</a>
        算法，将 <var>locale</var> 转换为规范形式，按 <a href="https://unicode.org/reports/tr35/#LocaleId_Canonicalization">Unicode 技术标准 #35
          第一部分核心，附录 C LocaleId Canonicalization</a>。</li><li id="step-canonicalizeunicodelocaleid-u-extension">如果 <var>localeId</var> 包含一个 <emu-not-ref>子字符串</emu-not-ref>是
        <emu-xref href="#unicode-locale-extension-sequence" id="_ref_283"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>，则</li><li>令 <var>extension</var> 为 <var>localeId</var> 中 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_284"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>的 <emu-not-ref>子字符串</emu-not-ref>。</li><li>令 <var>newExtension</var> 为 <emu-val>"-u"</emu-val>。</li><li>令 <var>components</var> 为 <emu-xref aoid="UnicodeExtensionComponents" id="_ref_285"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>extension</var>)。</li><li>对 <var>components</var>.<var class="field">[[Attributes]]</var> 的每个元素 <var>attr</var>，执行</li><li>将 <var>newExtension</var> 设置为 <var>newExtension</var>、<emu-val>"-"</emu-val> 和 <var>attr</var> 的字符串连接。</li><li>对 <var>components</var>.<var class="field">[[Keywords]]</var> 的每个记录 { <var class="field">[[Key]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>keyword</var>，执行</li><li>将 <var>newExtension</var> 设置为 <var>newExtension</var>、<emu-val>"-"</emu-val> 和 <var>keyword</var>.<var class="field">[[Key]]</var> 的字符串连接。</li><li>如果 <var>keyword</var>.<var class="field">[[Value]]</var> 不是空字符串，则</li><li>将 <var>newExtension</var> 设置为 <var>newExtension</var>、<emu-val>"-"</emu-val> 和 <var>keyword</var>.<var class="field">[[Value]]</var> 的字符串连接。</li><li>断言：<var>newExtension</var> 不是 <emu-val>"-u"</emu-val>。</li><li>将 <var>localeId</var> 设置为 <var>localeId</var> 的副本，其中首次出现的 <emu-not-ref>子字符串</emu-not-ref> <var>extension</var> 被替换为 <var>newExtension</var>。</li><li>返回 <var>localeId</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        步骤 <emu-xref href="#step-canonicalizeunicodelocaleid-u-extension" id="_ref_17"><a href="#step-canonicalizeunicodelocaleid-u-extension">2</a></emu-xref> 确保返回的<emu-xref href="#sec-language-tags" id="_ref_286"><a href="#sec-language-tags">语言标签</a></emu-xref>中的 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_287"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>包含：
        <ul>
          <li>仅输入中每个属性的第一个实例，且</li>
          <li>仅输入中每个键的第一个 <emu-not-ref>关键字</emu-not-ref>。</li>
        </ul>
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-defaultlocale" type="implementation-defined abstract operation" aoid="DefaultLocale">
      <h1><span class="secnum">6.2.3</span> DefaultLocale ( )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation DefaultLocale takes no arguments and returns 一个 <emu-xref href="#sec-language-tags" id="_ref_288"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>. 返回的字符串值表示主机环境当前语言环境的格式良好（<emu-xref href="#sec-iswellformedlanguagetag" id="_ref_18"><a href="#sec-iswellformedlanguagetag">6.2.1</a></emu-xref>）且规范化（<emu-xref href="#sec-canonicalizeunicodelocaleid" id="_ref_19"><a href="#sec-canonicalizeunicodelocaleid">6.2.2</a></emu-xref>）<emu-xref href="#sec-language-tags" id="_ref_289"><a href="#sec-language-tags">语言标签</a></emu-xref>。不得包含 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_290"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>。</p>
      <emu-note><span class="note">Note</span><div class="note-contents">
        返回值是潜在的指纹识别向量。在浏览器环境中，应与 <a href="https://html.spec.whatwg.org/#language-preferences"><code>navigator.language</code></a>
        匹配，以避免提供任何额外的区分信息。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-currency-codes">
    <h1><span class="secnum">6.3</span> 货币代码</h1>

    <p>本规范使用 ISO 4217 定义的 3 字母货币代码标识货币。其规范形式为大写。</p>

    <p>允许所有格式良好的 3 字母 ISO 4217 货币代码。但实现支持的货币代码与<emu-xref href="#sec-language-tags" id="_ref_291"><a href="#sec-language-tags">语言标签</a></emu-xref>组合是否有本地化货币符号是实现依赖的。如果没有本地化货币符号，则格式化时使用 ISO 4217 货币代码。</p>

    <emu-clause id="sec-iswellformedcurrencycode" type="abstract operation" aoid="IsWellFormedCurrencyCode">
      <h1><span class="secnum">6.3.1</span> IsWellFormedCurrencyCode ( <var>currency</var> )</h1>
      <p>The abstract operation IsWellFormedCurrencyCode takes argument <var>currency</var> (一个字符串) and returns 一个布尔值. 验证 <var>currency</var> 参数是否表示格式良好的 3 字母 ISO 4217 货币代码。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>currency</var> 的长度不是 3，则返回 <emu-val>false</emu-val>。</li><li>令 <var>normalized</var> 为 <var>currency</var> 的 <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_292"><a href="#sec-case-sensitivity-and-case-mapping">ASCII-大写</a></emu-xref>。</li><li>如果 <var>normalized</var> 包含任何代码单元不在 0x0041 到 0x005A（对应 Unicode 字符 LATIN CAPITAL LETTER A 到 LATIN CAPITAL LETTER
        Z）范围内，则返回 <emu-val>false</emu-val>。</li><li>返回 <emu-val>true</emu-val>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-availablecanonicalcurrencies" type="implementation-defined abstract operation" aoid="AvailableCanonicalCurrencies">
    <h1><span class="secnum">6.4</span> AvailableCanonicalCurrencies ( )</h1>
    <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation AvailableCanonicalCurrencies takes no arguments and returns 字符串列表. 返回的列表按字典序代码单元排序，包含唯一、格式良好且大写规范化的 3 字母 ISO 4217 货币代码，标识实现为 Intl.DisplayNames 和 Intl.NumberFormat 对象提供功能的货币。
      </p>
  </emu-clause>

  <emu-clause id="sec-use-of-iana-time-zone-database" oldids="sec-time-zone-names"><span id="sec-time-zone-names"></span>
    <h1><span class="secnum">6.5</span> 使用 IANA 时区数据库</h1>

    <p>
      采用本规范的实现必须支持时区：必须使用 IANA 时区数据库 <a href="https://www.iana.org/time-zones/">https://www.iana.org/time-zones/</a>
      提供可用命名时区标识符和 ECMAScript 计算与格式化所用数据。
      本节定义时区支持实现应如何使用 IANA 时区数据库。
      ECMAScript 内置对象返回的可用命名时区标识符必须是 IANA 时区数据库中的 Zone 名称或 Link 名称。
      可用命名时区标识符必须使用 IANA 时区数据库中的原始大小写。
    </p>
    <p>每个 IANA 时区数据库中的 Zone 必须是主时区标识符，每个 Link 名称必须是非主时区标识符并解析为其对应的 Zone 名称，以下例外情况由 <emu-xref aoid="AvailableNamedTimeZoneIdentifiers" id="_ref_293"><a href="#sup-availablenamedtimezoneidentifiers">AvailableNamedTimeZoneIdentifiers</a></emu-xref> 实现：
    </p>
    <ul>
      <li>
        出于历史原因，<emu-val>"UTC"</emu-val> 必须是主时区标识符。
        <emu-val>"Etc/UTC"</emu-val>、<emu-val>"Etc/GMT"</emu-val> 和 <emu-val>"GMT"</emu-val> 以及解析为它们的所有 Link 名称，必须是解析为 <emu-val>"UTC"</emu-val> 的非主时区标识符。
      </li>
      <li>
        zone.tab 文件 “TZ” 列中出现的任何 Link 名称必须是主时区标识符。
        例如，<emu-val>"Europe/Prague"</emu-val> 和 <emu-val>"Europe/Bratislava"</emu-val> 都必须是主时区标识符。
        此要求保证每个 <a href="https://www.iso.org/glossary-for-iso-3166.html">ISO 3166-1 Alpha-2</a>
        国家代码至少有一个主时区标识符，并确保未来某国时区规则变更不会影响使用其他国家时区的 ECMAScript 程序，除非这些国家的领土边界也发生变化。
      </li>
      <li>
        zone.tab 文件 “TZ” 列未列出的任何 Link 名称，且代表完全位于单一 <a href="https://www.iso.org/glossary-for-iso-3166.html">ISO 3166-1
          Alpha-2</a> 国家代码领土内的地理区域，必须解析为同一国家代码领土内的主标识符。
        例如，<emu-val>"Atlantic/Jan_Mayen"</emu-val> 必须解析为 <emu-val>"Arctic/Longyearbyen"</emu-val>。
      </li>
    </ul>

    <emu-note><span class="note">Note</span><div class="note-contents">
      <p>
        IANA 时区数据库提供影响主时区标识符的构建选项。
        默认构建选项会合并不同国家的时区，例如 <emu-val>"Atlantic/Reykjavik"</emu-val> 被构建为指向 Zone <emu-val>"Africa/Abidjan"</emu-val> 的 Link。
        地理和政治上不同的地区未来可能会在 IANA 时区数据库新版本中引入不同的时区规则。
        上述例外旨在缓解这些未来兼容性问题。
      </p>
      <p>
        Unicode 通用语言环境数据存储库（<a href="https://cldr.unicode.org">CLDR</a>）在确定哪些可用命名时区标识符是主或非主时区标识符时实现了上述大部分例外。
        虽然建议使用 CLDR 数据以实现间一致性，但并非强制。
        非 CLDR 基础实现仍可使用 CLDR 的 <a href="https://github.com/unicode-org/cldr/blob/main/common/bcp47/timezone.xml"><code>timezone.xml</code></a>
        标识符数据。
        实现也可直接构建 IANA 时区数据库，例如使用 <code>PACKRATDATA=backzone PACKRATLIST=zone.tab</code> 构建选项，并进行必要的后处理以确保符合上述要求。
      </p>
    </div></emu-note>

    <p>
      IANA 时区数据库通常每年更新五到十次。
      这些更新可能添加新的 Zone 或 Link 名称，可能将 Zone 改为 Link，也可能更改与任何 Zone 相关的 UTC 偏移和转换。
      建议实现尽快包含 IANA 时区数据库的更新。
      这样可确保 ECMAScript 程序能准确进行时区敏感计算，并能使用外部输入或主机环境提供的新可用命名时区标识符。
    </p>
    <p>
      虽然 IANA 时区数据库维护者力求稳定，但在极少数情况下（平均每年不到一次）Zone 可能被新 Zone 替换。
      例如，2022 年 "<emu-val>Europe/Kiev</emu-val>" 被弃用为指向新 "<emu-val>Europe/Kyiv</emu-val>" Zone 的 Link。
      被弃用的 Link 称为 <dfn variants="renamed time zone identifiers" tabindex="-1">重命名时区标识符</dfn>，新添加的 Zone 称为 <dfn variants="replacement time zone identifiers" tabindex="-1">替换时区标识符</dfn>。
    </p>
    <p>
      为减少这些罕见变更带来的影响，实现应最初将每个替换时区标识符作为解析为现有重命名时区标识符的非主时区标识符添加。
      这样 ECMAScript 程序可识别两个标识符，同时减少将替换时区标识符发送到尚未识别它的其他系统的概率。
      在 <dfn id="rename-waiting-period" tabindex="-1">重命名等待期</dfn>后，实现应将新 Zone 提升为主时区标识符，同时将重命名时区标识符降为非主。
      为给其他系统提供充足更新时间，建议的<emu-xref href="#rename-waiting-period" id="_ref_294"><a href="#rename-waiting-period">重命名等待期</a></emu-xref>为两年。
      但无需精确或动态。
      实现应在正常发布流程中更新时区数据时，将替换时区标识符设为主。
    </p>
    <p>
      仅当新 Zone 被添加以替换现有 Zone 时，才应适用等待期。
      如果现有 Zone 和 Link 被交换，则未发生重命名，无需等待期。
    </p>

    <p>
      如果实现于代理生命周期内修订时区信息，则要求可用命名时区标识符列表、与任何可用命名时区标识符关联的主时区标识符，以及与任何可用命名时区标识符关联的 UTC 偏移和转换，与代理先前观察到的结果一致。
      鉴于支持此要求的复杂性，建议实现为每个代理生命周期维护 IANA 时区数据库的完全一致副本。
    </p>

    <p>本节补充但不取代 <emu-xref href="#sec-time-zone-identifiers"><a href="https://tc39.es/ecma262/#sec-time-zone-identifiers">21.4.1.19</a></emu-xref>。</p>

    <emu-clause id="sup-availablenamedtimezoneidentifiers" oldids="sec-availabletimezones" type="implementation-defined abstract operation" aoid="AvailableNamedTimeZoneIdentifiers"><span id="sec-availabletimezones"></span>
      <h1><span class="secnum">6.5.1</span> AvailableNamedTimeZoneIdentifiers ( )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation AvailableNamedTimeZoneIdentifiers takes no arguments and returns 时区标识符记录列表. 
          结果描述本实现中所有可用命名时区标识符，以及每个可用命名时区标识符对应的主时区标识符。
          列表按每个时区标识符记录的 <var class="field">[[Identifier]]</var> 字段排序。
        </p>
      <p>此定义取代 <emu-xref href="#sec-availablenamedtimezoneidentifiers"><a href="https://tc39.es/ecma262/#sec-availablenamedtimezoneidentifiers">21.4.1.23</a></emu-xref> 中的定义。</p>
      <emu-alg><ol><li>令 <var>identifiers</var> 为 IANA 时区数据库中每个 Zone 或 Link 名称的字符串值列表。</li><li>断言：<var>identifiers</var> 中无元素与其他元素为 <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_295"><a href="#sec-case-sensitivity-and-case-mapping">ASCII-大小写不敏感匹配</a></emu-xref>。</li><li>按字典序代码单元排序 <var>identifiers</var>。</li><li>令 <var>result</var> 为新的空列表。</li><li>对 <var>identifiers</var> 的每个元素 <var>identifier</var>，执行</li><li>令 <var>primary</var> 为 <var>identifier</var>。</li><li>如果 <var>identifier</var> 是 IANA 时区数据库中的 Link 名称且未出现在 zone.tab 文件 “TZ” 列，则</li><li>令 <var>zone</var> 为 <var>identifier</var> 按 IANA 时区数据库解析 Link 名称规则解析到的 Zone 名称。</li><li>如果 <var>zone</var> 以 <emu-val>"Etc/"</emu-val> 开头，则</li><li>将 <var>primary</var> 设置为 <var>zone</var>。</li><li>否则，</li><li>令 <var>identifierCountryCode</var> 为包含 <var>identifier</var> 地理区域的 <a href="https://www.iso.org/glossary-for-iso-3166.html">ISO
          3166-1 Alpha-2</a> 国家代码。</li><li>令 <var>zoneCountryCode</var> 为包含 <var>zone</var> 地理区域的 ISO 3166-1 Alpha-2 国家代码。</li><li>如果 <var>identifierCountryCode</var> 等于 <var>zoneCountryCode</var>，则</li><li>将 <var>primary</var> 设置为 <var>zone</var>。</li><li>否则，</li><li>令 <var>countryCodeLineCount</var> 为 zone.tab 文件中 “country-code” 列为 <var>identifierCountryCode</var> 的行数。</li><li>如果 <var>countryCodeLineCount</var> 为 1，则</li><li>令 <var>countryCodeLine</var> 为 zone.tab 文件中 “country-code” 列为 <var>identifierCountryCode</var> 的行。</li><li>将 <var>primary</var> 设置为 <var>countryCodeLine</var> “TZ” 列内容。</li><li>否则，</li><li>令 <var>backzone</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>backzoneLinkLines</var> 为 IANA 时区数据库 backzone 文件中以 <emu-val>"Link "</emu-val> 或 <emu-val>"#PACKRATLIST zone.tab Link "</emu-val> 开头的行列表。</li><li>对 <var>backzoneLinkLines</var> 的每个元素 <var>line</var>，执行</li><li>令 <var>i</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>line</var>, <emu-val>"Link "</emu-val>, 0)。</li><li>将 <var>line</var> 设置为 <var>line</var> 从 <var>i</var> + 5 开始的子字符串。</li><li>令 <var>backzoneAndLink</var> 为 <emu-xref aoid="StringSplitToList" id="_ref_296"><a href="#sec-string-split-to-list">StringSplitToList</a></emu-xref>(<var>line</var>, <emu-val>" "</emu-val>)。</li><li>断言：<var>backzoneAndLink</var> 至少有两个元素，且 <var>backzoneAndLink</var>[0] 和 <var>backzoneAndLink</var>[1] 都是可用命名时区标识符。</li><li>如果 <var>backzoneAndLink</var>[1] 等于 <var>identifier</var>，则</li><li>断言：<var>backzone</var> 为 <emu-val>undefined</emu-val>。</li><li>将 <var>backzone</var> 设置为 <var>backzoneAndLink</var>[0]。</li><li>断言：<var>backzone</var> 不为 <emu-val>undefined</emu-val>。</li><li>将 <var>primary</var> 设置为 <var>backzone</var>。</li><li>如果 <var>primary</var> 是 <emu-val>"Etc/UTC"</emu-val>、<emu-val>"Etc/GMT"</emu-val> 或 <emu-val>"GMT"</emu-val>，则将 <var>primary</var> 设置为 <emu-val>"UTC"</emu-val>。</li><li>如果 <var>primary</var> 是<emu-xref href="#sec-use-of-iana-time-zone-database" id="_ref_297"><a href="#sec-use-of-iana-time-zone-database">替换时区标识符</a></emu-xref>且其<emu-xref href="#rename-waiting-period" id="_ref_298"><a href="#rename-waiting-period">重命名等待期</a></emu-xref>未结束，则</li><li>令 <var>renamedIdentifier</var> 为 <var>primary</var> 替换的<emu-xref href="#sec-use-of-iana-time-zone-database" id="_ref_299"><a href="#sec-use-of-iana-time-zone-database">重命名时区标识符</a></emu-xref>。</li><li>将 <var>primary</var> 设置为 <var>renamedIdentifier</var>。</li><li>令 <var>record</var> 为时区标识符记录 { <var class="field">[[Identifier]]</var>: <var>identifier</var>, <var class="field">[[PrimaryIdentifier]]</var>: <var>primary</var>&nbsp;}。</li><li>将 <var>record</var> 添加到 <var>result</var>。</li><li>断言：<var>result</var> 包含一个时区标识符记录 <var>r</var>，使得 <var>r</var>.<var class="field">[[Identifier]]</var> 为 <emu-val>"UTC"</emu-val> 且 <var>r</var>.<var class="field">[[PrimaryIdentifier]]</var> 为 <emu-val>"UTC"</emu-val>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        <p>上述解析 Link 到主时区标识符的算法旨在对应国际组件 ICU (<a href="https://icu.unicode.org/">ICU</a>) 中
          <code>icu::TimeZone::getIanaID()</code> 的行为，以及 Unicode 通用语言环境数据存储库 (<a href="https://cldr.unicode.org">CLDR</a>) 中时区标识符数据维护流程。
        </p>
        <p>
          此算法解析 Link 到主时区标识符时不会跨越 ISO 3166-1 Alpha-2 国家代码边界，使用 IANA 时区数据库 zone.tab 和 backzone 文件的数据。
          如果 Link 的国家代码在 zone.tab 中只有一行，则该行的 “TZ” 列决定主时区标识符。
          如果该国家代码在 zone.tab 中有多行，则需检查 backzone 历史映射以确定正确的主时区标识符。
        </p>
        <p>
          例如，若 IANA 时区数据库默认构建选项将 "Pacific/Truk"（国家代码 "FM"）标识为指向 "Pacific/Port_Moresby"（国家代码 "PG"）的 Link，则需检查 zone.tab
          文件中 "FM" 的行。
          若仅有一行，则该行 “TZ” 列决定 "Pacific/Truk" 的主时区标识符。
          若有多行，则需检查 backzone 文件，若有 "Link Pacific/Chuuk Pacific/Truk" 行，则使用 "Pacific/Chuuk" 作为主时区标识符。
        </p>
        <p>
          注意 zone.tab 是首选映射数据来源，因为 backzone 映射在极少数情况下可能跨越 ISO 3166-1 Alpha-2 国家代码边界。
          例如，"Atlantic/Jan_Mayen"（国家代码 "SJ"）在 backzone 中映射到 "Europe/Oslo"（国家代码 "NO"）。
          截至 IANA 时区数据库 2024a 版本，"Atlantic/Jan_Mayen" 是唯一发生此情况的案例。
        </p>
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        IANA 时区数据库中的时区标识符随时间变化。
        建议实现至少将 AvailableNamedTimeZoneIdentifiers 的结果限制为代理生命周期内 <emu-xref aoid="GetAvailableNamedTimeZoneIdentifier" id="_ref_300"><a href="#sec-getavailablenamedtimezoneidentifier">GetAvailableNamedTimeZoneIdentifier</a></emu-xref> 允许的变更。
        鉴于支持这些建议的复杂性，建议 AvailableNamedTimeZoneIdentifiers 的结果在代理生命周期内保持不变。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-getavailablenamedtimezoneidentifier" type="abstract operation" aoid="GetAvailableNamedTimeZoneIdentifier">
      <h1><span class="secnum">6.5.2</span> GetAvailableNamedTimeZoneIdentifier ( <var>timeZoneIdentifier</var> )</h1>
      <p>The abstract operation GetAvailableNamedTimeZoneIdentifier takes argument <var>timeZoneIdentifier</var> (一个字符串) and returns 时区标识符记录或 <emu-const>empty</emu-const>. 
          如果 <var>timeZoneIdentifier</var> 是可用命名时区标识符，则返回 <emu-xref aoid="AvailableNamedTimeZoneIdentifiers" id="_ref_301"><a href="#sup-availablenamedtimezoneidentifiers">AvailableNamedTimeZoneIdentifiers</a></emu-xref> 列表中的记录之一。
          否则返回 <emu-const>empty</emu-const>。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>对 <emu-xref aoid="AvailableNamedTimeZoneIdentifiers" id="_ref_302"><a href="#sup-availablenamedtimezoneidentifiers">AvailableNamedTimeZoneIdentifiers</a></emu-xref>() 的每个元素 <var>record</var>，执行</li><li>如果 <var>record</var>.<var class="field">[[Identifier]]</var> 与 <var>timeZoneIdentifier</var> 是 <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_303"><a href="#sec-case-sensitivity-and-case-mapping">ASCII-大小写不敏感匹配</a></emu-xref>，则返回 <var>record</var>。</li><li>返回 <emu-const>empty</emu-const>。</li></ol></emu-alg>
      <emu-note><span class="note">Note</span><div class="note-contents">
        对于任何 <var>timeZoneIdentifier</var> 或与其 <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_304"><a href="#sec-case-sensitivity-and-case-mapping">ASCII-大小写不敏感匹配</a></emu-xref>的值，要求返回的时区标识符记录在代理生命周期内字段值保持一致。
        进一步要求时区标识符在代理生命周期内不得动态从主变为非主，即如果 <var>timeZoneIdentifier</var> 与先前调用 GetAvailableNamedTimeZoneIdentifier 返回结果的
        <var class="field">[[PrimaryIdentifier]]</var> 字段是 <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_305"><a href="#sec-case-sensitivity-and-case-mapping">ASCII-大小写不敏感匹配</a></emu-xref>，则 GetAvailableNamedTimeZoneIdentifier(<var>timeZoneIdentifier</var>) 必须返回
        <var class="field">[[Identifier]]</var> 等于 <var class="field">[[PrimaryIdentifier]]</var> 的时区标识符记录。
        鉴于支持这些要求的复杂性，建议 <emu-xref aoid="AvailableNamedTimeZoneIdentifiers" id="_ref_306"><a href="#sup-availablenamedtimezoneidentifiers">AvailableNamedTimeZoneIdentifiers</a></emu-xref>（因此 GetAvailableNamedTimeZoneIdentifier 结果）在代理生命周期内保持不变。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-availableprimarytimezoneidentifiers" oldids="sec-availablecanonicaltimezones" type="abstract operation" aoid="AvailablePrimaryTimeZoneIdentifiers"><span id="sec-availablecanonicaltimezones"></span>
      <h1><span class="secnum">6.5.3</span> AvailablePrimaryTimeZoneIdentifiers ( )</h1>
      <p>The abstract operation AvailablePrimaryTimeZoneIdentifiers takes no arguments and returns 字符串列表. 返回的列表是 IANA 时区数据库支持的 Zone 和 Link 名称的排序列表。 It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>records</var> 为 <emu-xref aoid="AvailableNamedTimeZoneIdentifiers" id="_ref_307"><a href="#sup-availablenamedtimezoneidentifiers">AvailableNamedTimeZoneIdentifiers</a></emu-xref>()。</li><li>令 <var>result</var> 为新的空列表。</li><li>对 <var>records</var> 的每个元素 <var>timeZoneIdentifierRecord</var>，执行</li><li>如果 <var>timeZoneIdentifierRecord</var>.<var class="field">[[Identifier]]</var> 等于 <var>timeZoneIdentifierRecord</var>.<var class="field">[[PrimaryIdentifier]]</var>，则</li><li>将 <var>timeZoneIdentifierRecord</var>.<var class="field">[[Identifier]]</var> 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-string-split-to-list" type="abstract operation" aoid="StringSplitToList">
      <h1><span class="secnum">6.5.4</span> StringSplitToList ( <var>S</var>, <var>separator</var> )</h1>
      <p>The abstract operation StringSplitToList takes arguments <var>S</var> (一个字符串) and <var>separator</var> (一个字符串) and returns 字符串列表. 
          返回的列表包含 <var>S</var> 中所有不含 <var>separator</var> 且被 <var>separator</var> 紧邻前后的位置的互不重叠子字符串。
          每个 <emu-not-ref>子字符串</emu-not-ref>会是相邻 <var>separator</var> 之间、<var>S</var> 最开头的 <var>separator</var> 前或 <var>S</var> 最末尾的 <var>separator</var>
          后的空字符串，否则不会为空。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>断言：<var>S</var> 不是空字符串。</li><li>断言：<var>separator</var> 不是空字符串。</li><li>令 <var>separatorLength</var> 为 <var>separator</var> 的长度。</li><li>令 <var>substrings</var> 为新的空列表。</li><li>令 <var>i</var> 为 0。</li><li>令 <var>j</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>S</var>, <var>separator</var>, 0)。</li><li>当 <var>j</var> 不为 <emu-const>not-found</emu-const> 时重复，</li><li>令 <var>T</var> 为 <var>S</var> 从 <var>i</var> 到 <var>j</var> 的子字符串。</li><li>将 <var>T</var> 添加到 <var>substrings</var>。</li><li>将 <var>i</var> 设置为 <var>j</var> + <var>separatorLength</var>。</li><li>将 <var>j</var> 设置为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>S</var>, <var>separator</var>, <var>i</var>)。</li><li>令 <var>T</var> 为 <var>S</var> 从 <var>i</var> 开始的子字符串。</li><li>将 <var>T</var> 添加到 <var>substrings</var>。</li><li>返回 <var>substrings</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-measurement-unit-identifiers">
    <h1><span class="secnum">6.6</span> 度量单位标识符</h1>

    <p>本规范使用 <dfn variants="core unit identifiers,core unit ID,core unit IDs" tabindex="-1">核心单位标识符</dfn>（或等价的 <em>核心单位 ID</em>），定义见
      <a href="https://unicode.org/reports/tr35/tr35-general.html#Unit_Identifiers">Unicode 技术标准 #35 第二部分通用，第 6.2
        节单位标识符</a>。其规范形式为仅包含 Unicode 基本拉丁小写字母（U+0061 LATIN SMALL LETTER A 到 U+007A LATIN SMALL LETTER
      Z）及零个或多个中间连字符（U+002D HYPHEN-MINUS）的字符串。
    </p>

    <p>
      仅允许有限集合的核心单位标识符。
      尝试使用未被允许的核心单位标识符会导致 <emu-val>RangeError</emu-val>。
    </p>

    <emu-clause id="sec-iswellformedunitidentifier" type="abstract operation" aoid="IsWellFormedUnitIdentifier">
      <h1><span class="secnum">6.6.1</span> IsWellFormedUnitIdentifier ( <var>unitIdentifier</var> )</h1>
      <p>The abstract operation IsWellFormedUnitIdentifier takes argument <var>unitIdentifier</var> (一个字符串) and returns 一个布尔值. 验证 <var>unitIdentifier</var> 参数是否为格式良好的<emu-xref href="#sec-measurement-unit-identifiers" id="_ref_308"><a href="#sec-measurement-unit-identifiers">核心单位标识符</a></emu-xref>，要么是被允许的单一单位，要么是由两个被允许的单一单位通过除法组成的复合单位。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <emu-xref aoid="IsSanctionedSingleUnitIdentifier" id="_ref_309"><a href="#sec-issanctionedsingleunitidentifier">IsSanctionedSingleUnitIdentifier</a></emu-xref>(<var>unitIdentifier</var>) 为 <emu-val>true</emu-val>，则</li><li>返回 <emu-val>true</emu-val>。</li><li>令 <var>i</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>unitIdentifier</var>, <emu-val>"-per-"</emu-val>, 0)。</li><li>如果 <var>i</var> 为 <emu-const>not-found</emu-const> 或 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>unitIdentifier</var>, <emu-val>"-per-"</emu-val>, <var>i</var> + 1) 不为 <emu-const>not-found</emu-const>，则</li><li>返回 <emu-val>false</emu-val>。</li><li>断言：五字符子字符串 <emu-val>"-per-"</emu-val> 在 <var>unitIdentifier</var> 中仅出现一次，索引为 <var>i</var>。</li><li>令 <var>numerator</var> 为 <var>unitIdentifier</var> 从 0 到 <var>i</var> 的子字符串。</li><li>令 <var>denominator</var> 为 <var>unitIdentifier</var> 从 <var>i</var> + 5 开始的子字符串。</li><li>如果 <emu-xref aoid="IsSanctionedSingleUnitIdentifier" id="_ref_310"><a href="#sec-issanctionedsingleunitidentifier">IsSanctionedSingleUnitIdentifier</a></emu-xref>(<var>numerator</var>) 和 <emu-xref aoid="IsSanctionedSingleUnitIdentifier" id="_ref_311"><a href="#sec-issanctionedsingleunitidentifier">IsSanctionedSingleUnitIdentifier</a></emu-xref>(<var>denominator</var>) 都为
        <emu-val>true</emu-val>，则</li><li>返回 <emu-val>true</emu-val>。</li><li>返回 <emu-val>false</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-issanctionedsingleunitidentifier" type="abstract operation" oldids="sec-issanctionedsimpleunitidentifier" aoid="IsSanctionedSingleUnitIdentifier"><span id="sec-issanctionedsimpleunitidentifier"></span>
      <h1><span class="secnum">6.6.2</span> IsSanctionedSingleUnitIdentifier ( <var>unitIdentifier</var> )</h1>
      <p>The abstract operation IsSanctionedSingleUnitIdentifier takes argument <var>unitIdentifier</var> (一个字符串) and returns 一个布尔值. 验证 <var>unitIdentifier</var> 参数是否在本规范当前版本允许的单一单位标识符列表中，该列表是通用语言环境数据存储库 <a href="https://github.com/unicode-org/cldr/blob/maint/maint-38/common/validity/unit.xml">release 38 unit
            validity data</a> 的子集；列表可能随时间增长。如 <a href="https://unicode.org/reports/tr35/tr35-general.html#Unit_Identifiers">Unicode 技术标准 #35 第二部分通用，第 6.2
            节单位标识符</a> 所述，单一单位标识符是未由其他单位标识符乘除组成的<emu-xref href="#sec-measurement-unit-identifiers" id="_ref_312"><a href="#sec-measurement-unit-identifiers">核心单位标识符</a></emu-xref>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>unitIdentifier</var> 在下表 <emu-xref href="#table-sanctioned-single-unit-identifiers" id="_ref_20"><a href="#table-sanctioned-single-unit-identifiers">Table 2</a></emu-xref> 中，则返回 <emu-val>true</emu-val>。</li><li>否则返回 <emu-val>false</emu-val>.</li></ol></emu-alg>

      <emu-table id="table-sanctioned-single-unit-identifiers" oldids="table-sanctioned-simple-unit-identifiers"><figure><figcaption>Table 2: ECMAScript 允许使用的单一单位</figcaption><span id="table-sanctioned-simple-unit-identifiers"></span>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>单一单位标识符</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>acre</td>
          </tr>
          <tr>
            <td>bit</td>
          </tr>
          <tr>
            <td>byte</td>
          </tr>
          <tr>
            <td>celsius</td>
          </tr>
          <tr>
            <td>centimeter</td>
          </tr>
          <tr>
            <td>day</td>
          </tr>
          <tr>
            <td>degree</td>
          </tr>
          <tr>
            <td>fahrenheit</td>
          </tr>
          <tr>
            <td>fluid-ounce</td>
          </tr>
          <tr>
            <td>foot</td>
          </tr>
          <tr>
            <td>gallon</td>
          </tr>
          <tr>
            <td>gigabit</td>
          </tr>
          <tr>
            <td>gigabyte</td>
          </tr>
          <tr>
            <td>gram</td>
          </tr>
          <tr>
            <td>hectare</td>
          </tr>
          <tr>
            <td>hour</td>
          </tr>
          <tr>
            <td>inch</td>
          </tr>
          <tr>
            <td>kilobit</td>
          </tr>
          <tr>
            <td>kilobyte</td>
          </tr>
          <tr>
            <td>kilogram</td>
          </tr>
          <tr>
            <td>kilometer</td>
          </tr>
          <tr>
            <td>liter</td>
          </tr>
          <tr>
            <td>megabit</td>
          </tr>
          <tr>
            <td>megabyte</td>
          </tr>
          <tr>
            <td>meter</td>
          </tr>
          <tr>
            <td>microsecond</td>
          </tr>
          <tr>
            <td>mile</td>
          </tr>
          <tr>
            <td>mile-scandinavian</td>
          </tr>
          <tr>
            <td>milliliter</td>
          </tr>
          <tr>
            <td>millimeter</td>
          </tr>
          <tr>
            <td>millisecond</td>
          </tr>
          <tr>
            <td>minute</td>
          </tr>
          <tr>
            <td>month</td>
          </tr>
          <tr>
            <td>nanosecond</td>
          </tr>
          <tr>
            <td>ounce</td>
          </tr>
          <tr>
            <td>percent</td>
          </tr>
          <tr>
            <td>petabyte</td>
          </tr>
          <tr>
            <td>pound</td>
          </tr>
          <tr>
            <td>second</td>
          </tr>
          <tr>
            <td>stone</td>
          </tr>
          <tr>
            <td>terabit</td>
          </tr>
          <tr>
            <td>terabyte</td>
          </tr>
          <tr>
            <td>week</td>
          </tr>
          <tr>
            <td>yard</td>
          </tr>
          <tr>
            <td>year</td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-availablecanonicalunits" type="abstract operation" aoid="AvailableCanonicalUnits">
      <h1><span class="secnum">6.6.3</span> AvailableCanonicalUnits ( )</h1>
      <p>The abstract operation AvailableCanonicalUnits takes no arguments and returns 字符串列表. 返回的列表按字典序代码单元排序，由下表 <emu-xref href="#table-sanctioned-single-unit-identifiers" id="_ref_21"><a href="#table-sanctioned-single-unit-identifiers">Table 2</a></emu-xref>
          每行（除表头）列出的唯一简单单位标识符组成。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-numberingsystem-identifiers">
    <h1><span class="secnum">6.7</span> 数字系统标识符</h1>

    <p>本规范使用 <dfn variants="numbering system identifiers" tabindex="-1">数字系统标识符</dfn>，对应 <a href="https://unicode.org/reports/tr35/tr35-numbers.html#Numbering_Systems">Unicode 技术标准 #35 第三部分数字，第 1
        节数字系统</a>引用的名称。其规范形式为仅包含 Unicode 基本拉丁小写字母（U+0061 LATIN SMALL LETTER A 到 U+007A LATIN SMALL LETTER Z）的字符串。</p>

    <emu-clause id="sec-availablecanonicalnumberingsystems" type="implementation-defined abstract operation" aoid="AvailableCanonicalNumberingSystems">
      <h1><span class="secnum">6.7.1</span> AvailableCanonicalNumberingSystems ( )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation AvailableCanonicalNumberingSystems takes no arguments and returns 字符串列表. 返回的列表按字典序代码单元排序，包含唯一规范化<emu-xref href="#sec-numberingsystem-identifiers" id="_ref_313"><a href="#sec-numberingsystem-identifiers">数字系统标识符</a></emu-xref>，标识实现为 Intl.DateTimeFormat、Intl.NumberFormat 和 Intl.RelativeTimeFormat
          对象提供功能的数字系统。列表必须包含下表 <emu-xref href="#table-numbering-system-digits" id="_ref_22"><a href="#table-numbering-system-digits">Table 30</a></emu-xref> 每行（除表头）的 Numbering System 值。
        </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-collation-types">
    <h1><span class="secnum">6.8</span> 排序规则类型</h1>

    <p>本规范使用 <dfn variants="collation types" tabindex="-1">排序规则类型</dfn>，定义见 <a href="https://unicode.org/reports/tr35/tr35-collation.html#Collation_Types">Unicode 技术标准 #35 第五部分排序，第 3.1
        节排序规则类型</a>。其规范形式为仅包含 Unicode 基本拉丁小写字母（U+0061 LATIN SMALL LETTER A 到 U+007A LATIN SMALL LETTER
      Z）及零个或多个中间连字符（U+002D HYPHEN-MINUS）的字符串。</p>

    <emu-clause id="sec-availablecanonicalcollations" type="implementation-defined abstract operation" aoid="AvailableCanonicalCollations">
      <h1><span class="secnum">6.8.1</span> AvailableCanonicalCollations ( )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation AvailableCanonicalCollations takes no arguments and returns 字符串列表. 返回的列表按字典序代码单元排序，包含唯一规范化<emu-xref href="#sec-collation-types" id="_ref_314"><a href="#sec-collation-types">排序规则类型</a></emu-xref>，标识实现为 Intl.Collator 对象提供功能的排序规则。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-calendar-types">
    <h1><span class="secnum">6.9</span> 日历类型</h1>

    <p>本规范使用 <dfn variants="calendar types" tabindex="-1">日历类型</dfn>，定义见 <a href="https://unicode.org/reports/tr35/tr35-dates.html#Calendar_Elements">Unicode 技术标准 #35 第四部分日期，第 2
        节日历元素</a>。其规范形式为仅包含 Unicode 基本拉丁小写字母（U+0061 LATIN SMALL LETTER A 到 U+007A LATIN SMALL LETTER
      Z）及零个或多个中间连字符（U+002D HYPHEN-MINUS）的字符串。</p>

    <emu-clause id="sec-availablecalendars" oldids="sec-availablecanonicalcalendars" type="implementation-defined abstract operation" aoid="AvailableCalendars"><span id="sec-availablecanonicalcalendars"></span>
      <h1><span class="secnum">6.9.1</span> AvailableCalendars ( )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation AvailableCalendars takes no arguments and returns 字符串列表. 返回的列表按字典序代码单元排序，包含唯一规范化形式的<emu-xref href="#sec-calendar-types" id="_ref_315"><a href="#sec-calendar-types">日历类型</a></emu-xref>（<emu-xref href="#sec-calendar-types" id="_ref_23"><a href="#sec-calendar-types">6.9</a></emu-xref>），标识实现为 Intl.DateTimeFormat
          对象提供功能的日历，包括其别名（如 <emu-val>"islamicc"</emu-val> 和 <emu-val>"islamic-civil"</emu-val> 要么都包含要么都不包含）。列表必须包含 <emu-val>"iso8601"</emu-val>。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-pattern-string-types">
    <h1><span class="secnum">6.10</span> 模式字符串类型</h1>
    <p><dfn tabindex="-1">模式字符串</dfn>是一个字符串值，包含零个或多个形如 <emu-val>"{key}"</emu-val> 的子字符串，其中 key 可以是仅由 ASCII 单词字符组成的任意非空序列。抽象模式字符串的语法是实现细节，不向 ECMA-402
      用户公开。</p>
  </emu-clause>
</emu-clause>
<emu-clause id="requirements">
  <h1><span class="secnum">7</span> ECMAScript标准内置对象的要求</h1>

  <p>除非本文件另有规定，本标准中描述的对象、函数和构造器，均需遵守<emu-xref href="#sec-ecmascript-standard-built-in-objects" title=""><a href="https://tc39.es/ecma262/#sec-ecmascript-standard-built-in-objects">ECMAScript Standard Built-in Objects</a></emu-xref>中规定的标准内置ECMAScript对象的通用要求和限制。</p>
</emu-clause>
<emu-clause id="intl-object">
  <h1><span class="secnum">8</span> Intl 对象</h1>

  <p><dfn tabindex="-1">Intl 对象</dfn>：</p>
  <ul>
    <li>是 <dfn tabindex="-1">%Intl%</dfn>。</li>
    <li>是全局对象的 <emu-val>"Intl"</emu-val> 属性的初始值。</li>
    <li>是一个普通对象。</li>
    <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    <li>不是函数对象。</li>
    <li>没有 <var class="field">[[Construct]]</var> 内部方法；不能使用 <code>new</code> 运算符作为构造函数。</li>
    <li>没有 <var class="field">[[Call]]</var> 内部方法；不能作为函数调用。</li>
    <li>拥有 <var class="field">[[FallbackSymbol]]</var> 内部槽，该槽是当前 <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">realm</a></emu-xref> 中一个新的 <emu-xref href="#sec-symbol-constructor"><a href="https://tc39.es/ecma262/#sec-symbol-constructor">%Symbol%</a></emu-xref>，其 <var class="field">[[Description]]</var> 为 <emu-val>"IntlLegacyConstructedSymbol"</emu-val>。</li>
  </ul>

  <emu-clause id="sec-value-properties-of-the-intl-object">
    <h1><span class="secnum">8.1</span> Intl 对象的值属性</h1>

    <emu-clause id="sec-intl-%symbol.tostringtag%" oldids="sec-Intl-toStringTag"><span id="sec-Intl-toStringTag"></span>
      <h1><span class="secnum">8.1.1</span> Intl [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值是字符串值 <emu-val>"Intl"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-constructor-properties-of-the-intl-object">
    <h1><span class="secnum">8.2</span> Intl 对象的构造函数属性</h1>

    <p>除了 Intl.Locale 之外，以下每个构造函数都是一个<dfn id="service-constructor" tabindex="-1">服务构造函数</dfn>，用于创建提供区域敏感服务的对象。</p>

    <emu-clause id="sec-intl.collator-intro">
      <h1><span class="secnum">8.2.1</span> Intl.Collator ( . . . )</h1>
      <p>参见 <emu-xref href="#collator-objects" id="_ref_24"><a href="#collator-objects">10</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat-intro">
      <h1><span class="secnum">8.2.2</span> Intl.DateTimeFormat ( . . . )</h1>
      <p>参见 <emu-xref href="#datetimeformat-objects" id="_ref_25"><a href="#datetimeformat-objects">11</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.displaynames-intro">
      <h1><span class="secnum">8.2.3</span> Intl.DisplayNames ( . . . )</h1>
      <p>参见 <emu-xref href="#intl-displaynames-objects" id="_ref_26"><a href="#intl-displaynames-objects">12</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.durationformat-intro">
      <h1><span class="secnum">8.2.4</span> Intl.DurationFormat ( . . . )</h1>
      <p>参见 <emu-xref href="#durationformat-objects" id="_ref_27"><a href="#durationformat-objects">13</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.listformat-intro">
      <h1><span class="secnum">8.2.5</span> Intl.ListFormat ( . . . )</h1>
      <p>参见 <emu-xref href="#listformat-objects" id="_ref_28"><a href="#listformat-objects">14</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.locale-intro">
      <h1><span class="secnum">8.2.6</span> Intl.Locale ( . . . )</h1>
      <p>参见 <emu-xref href="#locale-objects" id="_ref_29"><a href="#locale-objects">15</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat-intro">
      <h1><span class="secnum">8.2.7</span> Intl.NumberFormat ( . . . )</h1>
      <p>参见 <emu-xref href="#numberformat-objects" id="_ref_30"><a href="#numberformat-objects">16</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules-intro">
      <h1><span class="secnum">8.2.8</span> Intl.PluralRules ( . . . )</h1>
      <p>参见 <emu-xref href="#pluralrules-objects" id="_ref_31"><a href="#pluralrules-objects">17</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.relativetimeformat-intro">
      <h1><span class="secnum">8.2.9</span> Intl.RelativeTimeFormat ( . . . )</h1>
      <p>参见 <emu-xref href="#relativetimeformat-objects" id="_ref_32"><a href="#relativetimeformat-objects">18</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter-intro">
      <h1><span class="secnum">8.2.10</span> Intl.Segmenter ( . . . )</h1>
      <p>参见 <emu-xref href="#segmenter-objects" id="_ref_33"><a href="#segmenter-objects">19</a></emu-xref>。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-function-properties-of-the-intl-object">
    <h1><span class="secnum">8.3</span> Intl 对象的函数属性</h1>

    <emu-clause id="sec-intl.getcanonicallocales">
      <h1><span class="secnum">8.3.1</span> Intl.getCanonicalLocales ( <var>locales</var> )</h1>

      <p>当 <code>getCanonicalLocales</code> 方法以参数 <var>locales</var> 被调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>ll</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_316"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>ll</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.supportedvaluesof">
      <h1><span class="secnum">8.3.2</span> Intl.supportedValuesOf ( <var>key</var> )</h1>

      <p>当 <code>supportedValuesOf</code> 方法以参数 <var>key</var> 被调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>key</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>key</var>)。</li><li>如果 <var>key</var> 是 <emu-val>"calendar"</emu-val>，则</li><li>令 <var>list</var> 为一个新的空列表。</li><li>对 <emu-xref aoid="AvailableCalendars" id="_ref_317"><a href="#sec-availablecalendars">AvailableCalendars</a></emu-xref>() 的每个元素 <var>identifier</var>，执行</li><li>令 <var>canonical</var> 为 CanonicalizeUValue(<emu-val>"ca"</emu-val>, <var>identifier</var>)。</li><li>如果 <var>identifier</var> 等于 <var>canonical</var>，则</li><li>将 <var>identifier</var> 添加到 <var>list</var>。</li><li>否则如果 <var>key</var> 是 <emu-val>"collation"</emu-val>，则</li><li>令 <var>list</var> 为 <emu-xref aoid="AvailableCanonicalCollations" id="_ref_318"><a href="#sec-availablecanonicalcollations">AvailableCanonicalCollations</a></emu-xref>()。</li><li>否则如果 <var>key</var> 是 <emu-val>"currency"</emu-val>，则</li><li>令 <var>list</var> 为 <emu-xref aoid="AvailableCanonicalCurrencies" id="_ref_319"><a href="#sec-availablecanonicalcurrencies">AvailableCanonicalCurrencies</a></emu-xref>()。</li><li>否则如果 <var>key</var> 是 <emu-val>"numberingSystem"</emu-val>，则</li><li>令 <var>list</var> 为 <emu-xref aoid="AvailableCanonicalNumberingSystems" id="_ref_320"><a href="#sec-availablecanonicalnumberingsystems">AvailableCanonicalNumberingSystems</a></emu-xref>()。</li><li>否则如果 <var>key</var> 是 <emu-val>"timeZone"</emu-val>，则</li><li>令 <var>list</var> 为 <emu-xref aoid="AvailablePrimaryTimeZoneIdentifiers" id="_ref_321"><a href="#sec-availableprimarytimezoneidentifiers">AvailablePrimaryTimeZoneIdentifiers</a></emu-xref>()。</li><li>否则如果 <var>key</var> 是 <emu-val>"unit"</emu-val>，则</li><li>令 <var>list</var> 为 <emu-xref aoid="AvailableCanonicalUnits" id="_ref_322"><a href="#sec-availablecanonicalunits">AvailableCanonicalUnits</a></emu-xref>()。</li><li>否则，</li><li>抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>list</var>)。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="locale-and-parameter-negotiation">
  <h1><span class="secnum">9</span> 语言环境与参数协商</h1>

  <p><emu-xref href="#service-constructor" id="_ref_34"><a href="#service-constructor">服务构造函数</a></emu-xref> 使用通用模式，将 <var>locales</var> 和 <var>options</var>
    参数表示的请求与实现的实际能力进行协商。此处以内部插槽、抽象操作和专用数据类型的方式解释这些通用行为。</p>

  <p><dfn id="available-locales-list" tabindex="-1">可用语言环境列表</dfn> 是一个任意排序且无重复的<emu-xref href="#sec-language-tags" id="_ref_323"><a href="#sec-language-tags">语言标签</a></emu-xref>列表，每个标签都 <emu-xref href="#sec-iswellformedlanguagetag" id="_ref_35"><a href="#sec-iswellformedlanguagetag">格式正确</a></emu-xref>、<emu-xref href="#sec-canonicalizeunicodelocaleid" id="_ref_36"><a href="#sec-canonicalizeunicodelocaleid">规范化</a></emu-xref>，且不包含 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_324"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>。它表示在特定上下文中实现所提供功能的所有语言环境。</p>

  <p><dfn id="language-priority-list" tabindex="-1">语言优先级列表</dfn> 是一个 <emu-xref href="#sec-iswellformedlanguagetag" id="_ref_37"><a href="#sec-iswellformedlanguagetag">格式正确</a></emu-xref>且<emu-xref href="#sec-canonicalizeunicodelocaleid" id="_ref_38"><a href="#sec-canonicalizeunicodelocaleid">规范化</a></emu-xref>的<emu-xref href="#sec-language-tags" id="_ref_325"><a href="#sec-language-tags">语言标签</a></emu-xref>列表，表示按优先级递减的语言环境偏好顺序。该术语与 <a href="https://www.rfc-editor.org/rfc/bcp/bcp47.txt">BCP 47</a> 在 <a href="https://www.rfc-editor.org/rfc/rfc4647.html#section-2.3">RFC 4647 section 2.3</a> 中定义的术语一致，但禁止 <emu-val>"*"</emu-val>
    元素且仅包含规范化内容。</p>

  <p><dfn id="resolution-option-descriptor" variants="Resolution Option Descriptors" tabindex="-1">解析选项描述符</dfn> 是一个包含字段
    <var class="field">[[Key]]</var>（字符串，通常是 <var class="field">[[RelevantExtensionKeys]]</var> 列表的元素）和 <var class="field">[[Property]]</var>（字符串）的记录，也可以包含 <var class="field">[[Type]]</var>（<emu-const>boolean</emu-const> 或 <emu-const>string</emu-const>）和
    <var class="field">[[Values]]</var>（<emu-const>empty</emu-const> 或 ECMAScript 语言值列表）。它描述了在对象构造期间如何读取与语言环境解析相关的选项。</p>

  <emu-clause id="sec-internal-slots">
    <h1><span class="secnum">9.1</span> 服务构造函数的内部插槽</h1>

    <p>每个<emu-xref href="#service-constructor" id="_ref_326"><a href="#service-constructor">服务构造函数</a></emu-xref>具有以下内部插槽：</p>

    <ul>
      <li><var class="field">[[AvailableLocales]]</var> 是一个<emu-xref href="#available-locales-list" id="_ref_327"><a href="#available-locales-list">可用语言环境列表</a></emu-xref>。它必须包含 <emu-xref aoid="DefaultLocale" id="_ref_328"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref>
        返回的值。此外，对于每个包含多个<emu-xref href="#bcp-47-subtag" id="_ref_329"><a href="#bcp-47-subtag">子标签</a></emu-xref>的元素，还必须包含具有相同语言<emu-xref href="#bcp-47-subtag" id="_ref_330"><a href="#bcp-47-subtag">子标签</a></emu-xref>且后续<emu-xref href="#bcp-47-subtag" id="_ref_331"><a href="#bcp-47-subtag">子标签</a></emu-xref>为严格子集（即省略一个或多个）的较宽泛<emu-xref href="#sec-language-tags" id="_ref_332"><a href="#sec-language-tags">语言标签</a></emu-xref>，以便作为 <emu-xref href="#sec-resolvelocale" id="_ref_39"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref> 的潜在回退。例如，
        <ul>
          <li>如果 <var class="field">[[AvailableLocales]]</var> 包含 <emu-val>"de-DE"</emu-val>，则还必须包含 <emu-val>"de"</emu-val>（可能用于满足如 <emu-val>"de-AT"</emu-val> 和 <emu-val>"de-CH"</emu-val> 的请求语言环境）。</li>
          <li>如果 <var class="field">[[AvailableLocales]]</var> 包含 <emu-val>"az-Latn-AZ"</emu-val>，则还必须包含 <emu-val>"az-AZ"</emu-val>（可能用于满足如 <emu-val>"az-Cyrl-AZ"</emu-val> 的请求语言环境，如果 <emu-val>"az-Cyrl"</emu-val>
            不可用）。</li>
        </ul>
      </li>
      <li><var class="field">[[RelevantExtensionKeys]]</var> 是 <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准
          #35 第1部分核心，第3.6.1节 键和值定义</a> 中定义的 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_333"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>键的列表，这些键与所构造对象的功能相关。</li>
      <li><var class="field">[[ResolutionOptionDescriptors]]</var> 是用于在对象构造期间读取选项的<emu-xref href="#resolution-option-descriptor" id="_ref_334"><a href="#resolution-option-descriptor">解析选项描述符</a></emu-xref>列表。</li>
      <li><var class="field">[[SortLocaleData]]</var> 和 <var class="field">[[SearchLocaleData]]</var>（用于 Intl.Collator）以及
        <var class="field">[[LocaleData]]</var>（用于其他<emu-xref href="#service-constructor" id="_ref_335"><a href="#service-constructor">服务构造函数</a></emu-xref>）都是记录。除了特定于<emu-xref href="#service-constructor" id="_ref_336"><a href="#service-constructor">服务构造函数</a></emu-xref>的字段外，每个记录还包含 <var class="field">[[AvailableLocales]]</var> 中每个语言环境的字段。每个此类语言环境命名字段的值是一个记录，其中
        <var class="field">[[RelevantExtensionKeys]]</var> 的每个元素标识一个字段名，该字段的值是一个非空字符串列表，表示在相关语言环境中实现支持的类型值，第一个元素为该语言环境中该键的默认值。</li>
    </ul>

    <emu-note><span class="note">Note</span><div class="note-contents">
      例如，DateTimeFormat 的实现可能在其 <var class="field">[[AvailableLocales]]</var> 内部插槽中包含<emu-xref href="#sec-language-tags" id="_ref_337"><a href="#sec-language-tags">语言标签</a></emu-xref> <emu-val>"fa-IR"</emu-val>，并且必须（根据 <emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_40"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>）在其 <var class="field">[[RelevantExtensionKeys]]</var> 内部插槽中包含键 <emu-val>"ca"</emu-val>、<emu-val>"hc"</emu-val> 和
      <emu-val>"nu"</emu-val>。
      该语言环境的默认日历通常为 <emu-val>"persian"</emu-val>，但实现可能还支持 <emu-val>"gregory"</emu-val>、<emu-val>"islamic"</emu-val> 和 <emu-val>"islamic-civil"</emu-val>。
      因此，DateTimeFormat 的 <var class="field">[[LocaleData]]</var> 内部插槽中的记录会包含一个 [[fa-IR]] 字段，其值为类似 { <var class="field">[[ca]]</var>: « <emu-val>"persian"</emu-val>, <emu-val>"gregory"</emu-val>,
      <emu-val>"islamic"</emu-val>, <emu-val>"islamic-civil"</emu-val> », <var class="field">[[hc]]</var>: « … », <var class="field">[[nu]]</var>: « … » } 的记录，以及其他语言环境命名字段，其值结构相同但列表元素不同。
    </div></emu-note>
  </emu-clause>

  <emu-clause id="sec-abstract-operations">
    <h1><span class="secnum">9.2</span> 抽象操作</h1>

    <emu-clause id="sec-canonicalizelocalelist" type="abstract operation" aoid="CanonicalizeLocaleList">
      <h1><span class="secnum">9.2.1</span> CanonicalizeLocaleList ( <var>locales</var> )</h1>
      <p>The abstract operation CanonicalizeLocaleList takes argument <var>locales</var> (一个 ECMAScript 语言值) and returns 返回一个包含<emu-xref href="#language-priority-list" id="_ref_338"><a href="#language-priority-list">语言优先级列表</a></emu-xref>的正常完成或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>locales</var> 为 <emu-val>undefined</emu-val>，则</li><li>返回一个新的空列表。</li><li>令 <var>seen</var> 为一个新的空列表。</li><li>如果 <var>locales</var> 是字符串，或 <var>locales</var> 是对象且具有 <var class="field">[[InitializedLocale]]</var> 内部插槽，则</li><li>令 <var>O</var> 为 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>locales</var>&nbsp;»)。</li><li>否则，</li><li>令 <var>O</var> 为 ?&nbsp;<emu-xref aoid="ToObject"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<var>locales</var>)。</li><li>令 <var>len</var> 为 ?&nbsp;<emu-xref aoid="LengthOfArrayLike"><a href="https://tc39.es/ecma262/#sec-lengthofarraylike">LengthOfArrayLike</a></emu-xref>(<var>O</var>)。</li><li>令 <var>k</var> 为 0。</li><li>重复，条件为 <var>k</var> &lt; <var>len</var>，</li><li>令 <var>Pk</var> 为 !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>k</var>))。</li><li>令 <var>kPresent</var> 为 ?&nbsp;<emu-xref aoid="HasProperty"><a href="https://tc39.es/ecma262/#sec-hasproperty">HasProperty</a></emu-xref>(<var>O</var>, <var>Pk</var>)。</li><li>如果 <var>kPresent</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>kValue</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>O</var>, <var>Pk</var>)。</li><li>如果 <var>kValue</var> 不是字符串且不是对象，则抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>kValue</var> 是对象且具有 <var class="field">[[InitializedLocale]]</var> 内部插槽，则</li><li>令 <var>tag</var> 为 <var>kValue</var>.<var class="field">[[Locale]]</var>。</li><li>否则，</li><li>令 <var>tag</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>kValue</var>)。</li><li>如果 <emu-xref aoid="IsWellFormedLanguageTag" id="_ref_339"><a href="#sec-iswellformedlanguagetag">IsWellFormedLanguageTag</a></emu-xref>(<var>tag</var>) 为 <emu-val>false</emu-val>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>canonicalizedTag</var> 为 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_340"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>tag</var>)。</li><li>如果 <var>seen</var> 不包含 <var>canonicalizedTag</var>，则将 <var>canonicalizedTag</var> 添加到 <var>seen</var>。</li><li>设置 <var>k</var> 为 <var>k</var> + 1。</li><li>返回 <var>seen</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        非规范性摘要：该抽象操作将 <var>locales</var> 参数解释为数组，并将其元素复制到列表中，验证元素是否为格式正确的<emu-xref href="#sec-language-tags" id="_ref_341"><a href="#sec-language-tags">语言标签</a></emu-xref>并进行规范化，且去除重复项。
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        要求 <var>kValue</var> 为字符串或对象意味着数字值 <emu-val>NaN</emu-val> 不会被解释为<emu-xref href="#sec-language-tags" id="_ref_342"><a href="#sec-language-tags">语言标签</a></emu-xref> <emu-val>"nan"</emu-val>，该标签代表闽南语。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-canonicalizeuvalue" type="abstract operation">
      <h1><span class="secnum">9.2.2</span> 
        CanonicalizeUValue (
        <var>ukey</var>: <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准 #35 第1部分核心 第3.6.1节
          键和值定义</a>中定义的 Unicode 语言环境扩展序列键,
        <var>uvalue</var>: 一个字符串,
        ): 一个字符串
      </h1>
      <p>The abstract operation UNKNOWN takes UNPARSEABLE ARGUMENTS. 返回的字符串是作为 <var>ukey</var> 的值的 <var>uvalue</var> 的规范且大小写标准化形式。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>lowerValue</var> 为 <var>uvalue</var> 的 ASCII 小写形式。</li><li>令 <var>canonicalized</var> 为将 <var>lowerValue</var> 作为 <var>ukey</var> 的值进行规范化后得到的字符串，规范化过程见 <a href="https://unicode.org/reports/tr35/#processing-localeids">Unicode 技术标准 #35 第1部分核心 附录C LocaleId规范化 第5节
          规范化语法，处理LocaleIds</a>。</li><li>注：建议实现使用 Common Locale Data Repository 提供的 <code>common/bcp47</code> 中的 'u' 扩展数据（可在 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 获取）。</li><li>返回 <var>canonicalized</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-lookupmatchinglocalebyprefix" type="abstract operation" oldids="sec-bestavailablelocale,sec-lookupmatcher" aoid="LookupMatchingLocaleByPrefix"><span id="sec-lookupmatcher"></span><span id="sec-bestavailablelocale"></span>
      <h1><span class="secnum">9.2.3</span> LookupMatchingLocaleByPrefix ( <var>availableLocales</var>, <var>requestedLocales</var> )</h1>
      <p>The abstract operation LookupMatchingLocaleByPrefix takes arguments <var>availableLocales</var> (<emu-xref href="#available-locales-list" id="_ref_343"><a href="#available-locales-list">可用语言环境列表</a></emu-xref>) and <var>requestedLocales</var> (<emu-xref href="#language-priority-list" id="_ref_344"><a href="#language-priority-list">语言优先级列表</a></emu-xref>) and returns 一个包含字段 <var class="field">[[locale]]</var>（<emu-xref href="#sec-language-tags" id="_ref_345"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>）和 <var class="field">[[extension]]</var>（<emu-xref href="#unicode-locale-extension-sequence" id="_ref_346"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>或 <emu-const>empty</emu-const>）的记录，或 <emu-val>undefined</emu-val>. 它根据 <a href="https://www.rfc-editor.org/rfc/bcp/bcp47.txt">BCP 47</a> 在 <a href="https://www.rfc-editor.org/rfc/rfc4647.html#section-3.4">RFC 4647 section 3.4</a> 中定义的查找算法，确定
          <var>availableLocales</var> 中最适合满足 <var>requestedLocales</var> 的元素，忽略 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_347"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>。如果找到非默认匹配，则返回一个记录，其中 <var class="field">[[locale]]</var> 字段包含
          <var>availableLocales</var> 中匹配的<emu-xref href="#sec-language-tags" id="_ref_348"><a href="#sec-language-tags">语言标签</a></emu-xref>，<var class="field">[[extension]]</var> 字段包含 <var>requestedLocales</var> 中对应元素的 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_349"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>（如果请求<emu-xref href="#sec-language-tags" id="_ref_350"><a href="#sec-language-tags">语言标签</a></emu-xref>没有此序列则为
          <emu-const>empty</emu-const>）。 It performs the following steps when called:</p>
      <emu-alg><ol><li>对于 <var>requestedLocales</var> 的每个元素 <var>locale</var>，执行</li><li>令 <var>extension</var> 为 <emu-const>empty</emu-const>。</li><li>如果 <var>locale</var> 包含 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_351"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>，则</li><li>设置 <var>extension</var> 为 <var>locale</var> 的 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_352"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>。</li><li>设置 <var>locale</var> 为去除任何 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_353"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>后的字符串值。</li><li>令 <var>prefix</var> 为 <var>locale</var>。</li><li>重复，条件为 <var>prefix</var> 不是空字符串，</li><li>如果 <var>availableLocales</var> 包含 <var>prefix</var>，则返回记录 { <var class="field">[[locale]]</var>: <var>prefix</var>, <var class="field">[[extension]]</var>: <var>extension</var>&nbsp;}。</li><li>如果 <var>prefix</var> 包含 <emu-val>"-"</emu-val>（码元 0x002D HYPHEN-MINUS），令 <var>pos</var> 为 <var>prefix</var> 中最后一次出现 <emu-val>"-"</emu-val> 的索引；否则令 <var>pos</var> 为 0。</li><li>重复，条件为 <var>pos</var> ≥ 2 且 <var>prefix</var> 从 <var>pos</var> - 2 到 <var>pos</var> - 1 的子串为 <emu-val>"-"</emu-val>，</li><li>设置 <var>pos</var> 为 <var>pos</var> - 2。</li><li>设置 <var>prefix</var> 为 <var>prefix</var> 从 0 到 <var>pos</var> 的子串。</li><li>返回 <emu-val>undefined</emu-val>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        当请求语言环境包含 <a href="https://unicode.org/reports/tr35/#BCP47_T_Extension">Unicode 技术标准 #35 第1部分核心 BCP 47 T 扩展</a>
        <emu-xref href="#bcp-47-subtag" id="_ref_354"><a href="#bcp-47-subtag">子标签</a></emu-xref>序列时，该算法中的截断可能会临时生成无效<emu-xref href="#sec-language-tags" id="_ref_355"><a href="#sec-language-tags">语言标签</a></emu-xref>。但这些标签不会被返回，因为 <var>availableLocales</var> 只包含有效<emu-xref href="#sec-language-tags" id="_ref_356"><a href="#sec-language-tags">语言标签</a></emu-xref>。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-lookupmatchinglocalebybestfit" type="implementation-defined abstract operation" oldids="sec-bestfitmatcher" aoid="LookupMatchingLocaleByBestFit"><span id="sec-bestfitmatcher"></span>
      <h1><span class="secnum">9.2.4</span> LookupMatchingLocaleByBestFit ( <var>availableLocales</var>, <var>requestedLocales</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation LookupMatchingLocaleByBestFit takes arguments <var>availableLocales</var> (<emu-xref href="#available-locales-list" id="_ref_357"><a href="#available-locales-list">可用语言环境列表</a></emu-xref>) and <var>requestedLocales</var> (<emu-xref href="#language-priority-list" id="_ref_358"><a href="#language-priority-list">语言优先级列表</a></emu-xref>) and returns 一个包含字段 <var class="field">[[locale]]</var>（<emu-xref href="#sec-language-tags" id="_ref_359"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>）和 <var class="field">[[extension]]</var>（<emu-xref href="#unicode-locale-extension-sequence" id="_ref_360"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>或 <emu-const>empty</emu-const>）的记录，或 <emu-val>undefined</emu-val>. 它根据实现定义的算法，确定 <var>availableLocales</var> 中最适合满足 <var>requestedLocales</var> 的元素，忽略 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_361"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>。该算法由实现决定，但应产生典型用户认为至少与
          <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_362"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref> 算法同等优良的结果。如果找到非默认匹配，则返回一个记录，其中 <var class="field">[[locale]]</var> 字段包含 <var>availableLocales</var>
          中匹配的<emu-xref href="#sec-language-tags" id="_ref_363"><a href="#sec-language-tags">语言标签</a></emu-xref>，<var class="field">[[extension]]</var> 字段包含 <var>requestedLocales</var> 中对应元素的 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_364"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>（如果请求<emu-xref href="#sec-language-tags" id="_ref_365"><a href="#sec-language-tags">语言标签</a></emu-xref>没有此序列则为 <emu-const>empty</emu-const>）。</p>
    </emu-clause>

    <emu-clause id="sec-unicode-extension-components" type="abstract operation" aoid="UnicodeExtensionComponents">
      <h1><span class="secnum">9.2.5</span> UnicodeExtensionComponents ( <var>extension</var> )</h1>
      <p>The abstract operation UnicodeExtensionComponents takes argument <var>extension</var> (<emu-xref href="#unicode-locale-extension-sequence" id="_ref_366"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>) and returns 一个包含字段 <var class="field">[[Attributes]]</var> 和 <var class="field">[[Keywords]]</var> 的记录. 它将 <var>extension</var> 分解为唯一属性列表和唯一键的 <emu-not-ref>关键字</emu-not-ref>列表。属性或
          <emu-not-ref>关键字</emu-not-ref>键的重复出现仅第一次有效，后续忽略。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>断言：<var>extension</var> 的 ASCII 小写形式为 <var>extension</var>。</li><li>断言：<var>extension</var> 从 0 到 3 的子串为 <emu-val>"-u-"</emu-val>。</li><li>令 <var>attributes</var> 为一个新的空列表。</li><li>令 <var>keywords</var> 为一个新的空列表。</li><li>令 <var>keyword</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>size</var> 为 <var>extension</var> 的长度。</li><li>令 <var>k</var> 为 3。</li><li>重复，条件为 <var>k</var> &lt; <var>size</var>，</li><li>令 <var>e</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>extension</var>, <emu-val>"-"</emu-val>, <var>k</var>)。</li><li>如果 <var>e</var> 为 <emu-const>not-found</emu-const>，令 <var>len</var> 为 <var>size</var> - <var>k</var>；否则令 <var>len</var> 为 <var>e</var> - <var>k</var>。</li><li>令 <var>subtag</var> 为 <var>extension</var> 从 <var>k</var> 到 <var>k</var> + <var>len</var> 的子串。</li><li>注：<emu-not-ref>关键字</emu-not-ref>是<emu-xref href="#bcp-47-subtag" id="_ref_367"><a href="#bcp-47-subtag">子标签</a></emu-xref>序列，第一个为长度2的键，后续（如有）长度为3到8，合并为值。属性是长度为3到8且在所有
        <emu-not-ref>关键字</emu-not-ref>之前的单个<emu-xref href="#bcp-47-subtag" id="_ref_368"><a href="#bcp-47-subtag">子标签</a></emu-xref>。</li><li>断言：<var>len</var> ≥ 2。</li><li>如果 <var>keyword</var> 为 <emu-val>undefined</emu-val> 且 <var>len</var> ≠ 2，则</li><li>如果 <var>subtag</var> 不是 <var>attributes</var> 的元素，则将 <var>subtag</var> 添加到 <var>attributes</var>。</li><li>否则如果 <var>len</var> = 2，则</li><li>设置 <var>keyword</var> 为记录 { <var class="field">[[Key]]</var>: <var>subtag</var>, <var class="field">[[Value]]</var>: <emu-val>""</emu-val>&nbsp;}。</li><li>如果 <var>keywords</var> 不包含 <var class="field">[[Key]]</var> 为 <var>keyword</var>.<var class="field">[[Key]]</var> 的元素，则将 <var>keyword</var> 添加到 <var>keywords</var>。</li><li>否则如果 <var>keyword</var>.<var class="field">[[Value]]</var> 为空字符串，则</li><li>设置 <var>keyword</var>.<var class="field">[[Value]]</var> 为 <var>subtag</var>。</li><li>否则，</li><li>设置 <var>keyword</var>.<var class="field">[[Value]]</var> 为 <var>keyword</var>.<var class="field">[[Value]]</var>、<emu-val>"-"</emu-val> 和 <var>subtag</var> 的字符串拼接。</li><li>设置 <var>k</var> 为 <var>k</var> + <var>len</var> + 1。</li><li>返回记录 { <var class="field">[[Attributes]]</var>: <var>attributes</var>, <var class="field">[[Keywords]]</var>: <var>keywords</var>&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-insert-unicode-extension-and-canonicalize" type="abstract operation" aoid="InsertUnicodeExtensionAndCanonicalize">
      <h1><span class="secnum">9.2.6</span> InsertUnicodeExtensionAndCanonicalize ( <var>locale</var>, <var>attributes</var>, <var>keywords</var> )</h1>
      <p>The abstract operation InsertUnicodeExtensionAndCanonicalize takes arguments <var>locale</var> (一个<emu-xref href="#sec-language-tags" id="_ref_369"><a href="#sec-language-tags">语言标签</a></emu-xref>), <var>attributes</var> (字符串列表), and <var>keywords</var> (记录列表) and returns 一个 <emu-xref href="#sec-language-tags" id="_ref_370"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>. 它将 <var>attributes</var> 和 <var>keywords</var> 合并到 <var>locale</var> 中作为 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_371"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>，并返回规范化结果。 It performs the following steps when called:</p>
      <emu-alg><ol><li>断言：<var>locale</var> 不包含 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_372"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>。</li><li>令 <var>extension</var> 为 <emu-val>"-u"</emu-val>。</li><li>对于 <var>attributes</var> 的每个元素 <var>attr</var>，执行</li><li>设置 <var>extension</var> 为 <var>extension</var>、<emu-val>"-"</emu-val> 和 <var>attr</var> 的字符串拼接。</li><li>对于 <var>keywords</var> 的每个记录 { <var class="field">[[Key]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>keyword</var>，执行</li><li>设置 <var>extension</var> 为 <var>extension</var>、<emu-val>"-"</emu-val> 和 <var>keyword</var>.<var class="field">[[Key]]</var> 的字符串拼接。</li><li>如果 <var>keyword</var>.<var class="field">[[Value]]</var> 不是空字符串，则设置 <var>extension</var> 为 <var>extension</var>、<emu-val>"-"</emu-val> 和 <var>keyword</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>如果 <var>extension</var> 为 <emu-val>"-u"</emu-val>，返回 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_373"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>locale</var>)。</li><li>令 <var>privateIndex</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>locale</var>, <emu-val>"-x-"</emu-val>, 0)。</li><li>如果 <var>privateIndex</var> 为 <emu-const>not-found</emu-const>，则</li><li>令 <var>newLocale</var> 为 <var>locale</var> 和 <var>extension</var> 的字符串拼接。</li><li>否则，</li><li>令 <var>preExtension</var> 为 <var>locale</var> 从 0 到 <var>privateIndex</var> 的子串。</li><li>令 <var>postExtension</var> 为 <var>locale</var> 从 <var>privateIndex</var> 开始的子串。</li><li>令 <var>newLocale</var> 为 <var>preExtension</var>、<var>extension</var> 和 <var>postExtension</var> 的字符串拼接。</li><li>断言：<emu-xref aoid="IsWellFormedLanguageTag" id="_ref_374"><a href="#sec-iswellformedlanguagetag">IsWellFormedLanguageTag</a></emu-xref>(<var>newLocale</var>) 为 <emu-val>true</emu-val>。</li><li>返回 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_375"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>newLocale</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-resolvelocale" type="abstract operation" aoid="ResolveLocale">
      <h1><span class="secnum">9.2.7</span> ResolveLocale ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>, <var>relevantExtensionKeys</var>, <var>localeData</var> )</h1>
      <p>The abstract operation ResolveLocale takes arguments <var>availableLocales</var> (<emu-xref href="#available-locales-list" id="_ref_376"><a href="#available-locales-list">可用语言环境列表</a></emu-xref>), <var>requestedLocales</var> (<emu-xref href="#language-priority-list" id="_ref_377"><a href="#language-priority-list">语言优先级列表</a></emu-xref>), <var>options</var> (记录), <var>relevantExtensionKeys</var> (字符串列表), and <var>localeData</var> (记录) and returns 记录. 它根据 <a href="https://www.rfc-editor.org/rfc/bcp/bcp47.txt">BCP 47</a> 在 <a href="https://www.rfc-editor.org/rfc/rfc4647.html#section-3">RFC 4647 section 3</a> 中定义的“查找”，使用
          <var>options</var>.<var class="field">[[localeMatcher]]</var> 指定的算法（<emu-xref aoid="LookupMatchingLocaleByBestFit" id="_ref_378"><a href="#sec-lookupmatchinglocalebybestfit">LookupMatchingLocaleByBestFit</a></emu-xref> 或 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_379"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>），忽略 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_380"><a href="#unicode-locale-extension-sequence">Unicode
          语言环境扩展序列</a></emu-xref>，确定 <var>availableLocales</var> 中最适合满足 <var>requestedLocales</var> 的元素，并返回包含匹配数据、每个相关扩展键的解析值（默认取自匹配语言环境的数据，可被请求的 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_381"><a href="#unicode-locale-extension-sequence">Unicode
          语言环境扩展序列</a></emu-xref>和 <var>options</var> 覆盖）的记录。如果 <var>requestedLocales</var> 中匹配元素包含 <emu-xref href="#unicode-locale-extension-sequence" id="_ref_382"><a href="#unicode-locale-extension-sequence">Unicode 语言环境扩展序列</a></emu-xref>，则将其复制到返回记录的 <var class="field">[[Locale]]</var>
          字段的<emu-xref href="#sec-language-tags" id="_ref_383"><a href="#sec-language-tags">语言标签</a></emu-xref>上，省略任何关键字 <emu-xref href="#sec-language-tags" id="_ref_384"><a href="#sec-language-tags">Unicode 语言环境非终结符</a></emu-xref>，其 key 不在 <var>relevantExtensionKeys</var> 中或 type 被 <var>options</var> 覆盖。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>matcher</var> 为 <var>options</var>.<var class="field">[[localeMatcher]]</var>。</li><li>如果 <var>matcher</var> 为 <emu-val>"lookup"</emu-val>，则</li><li>令 <var>r</var> 为 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_385"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>)。</li><li>否则，</li><li>令 <var>r</var> 为 <emu-xref aoid="LookupMatchingLocaleByBestFit" id="_ref_386"><a href="#sec-lookupmatchinglocalebybestfit">LookupMatchingLocaleByBestFit</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>)。</li><li>如果 <var>r</var> 为 <emu-val>undefined</emu-val>，则设置 <var>r</var> 为记录 { <var class="field">[[locale]]</var>: <emu-xref aoid="DefaultLocale" id="_ref_387"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref>(), <var class="field">[[extension]]</var>: <emu-const>empty</emu-const>&nbsp;}。</li><li>令 <var>foundLocale</var> 为 <var>r</var>.<var class="field">[[locale]]</var>。</li><li>令 <var>foundLocaleData</var> 为 <var>localeData</var>.[[&lt;<var>foundLocale</var>&gt;]]。</li><li>断言：<var>foundLocaleData</var> 为记录。</li><li>令 <var>result</var> 为一个新的记录。</li><li>设置 <var>result</var>.<var class="field">[[LocaleData]]</var> 为 <var>foundLocaleData</var>。</li><li>如果 <var>r</var>.<var class="field">[[extension]]</var> 不是 <emu-const>empty</emu-const>，则</li><li>令 <var>components</var> 为 <emu-xref aoid="UnicodeExtensionComponents" id="_ref_388"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>r</var>.<var class="field">[[extension]]</var>)。</li><li>令 <var>keywords</var> 为 <var>components</var>.<var class="field">[[Keywords]]</var>。</li><li>否则，</li><li>令 <var>keywords</var> 为一个新的空列表。</li><li>令 <var>supportedKeywords</var> 为一个新的空列表。</li><li>对于 <var>relevantExtensionKeys</var> 的每个元素 <var>key</var>，执行</li><li>令 <var>keyLocaleData</var> 为 <var>foundLocaleData</var>.[[&lt;<var>key</var>&gt;]]。</li><li>断言：<var>keyLocaleData</var> 为列表。</li><li>令 <var>value</var> 为 <var>keyLocaleData</var>[0]。</li><li>断言：<var>value</var> 为字符串或 <emu-val>null</emu-val>。</li><li>令 <var>supportedKeyword</var> 为 <emu-const>empty</emu-const>。</li><li>如果 <var>keywords</var> 包含 <var class="field">[[Key]]</var> 为 <var>key</var> 的元素，则</li><li>令 <var>entry</var> 为 <var>keywords</var> 中 <var class="field">[[Key]]</var> 为 <var>key</var> 的元素。</li><li>令 <var>requestedValue</var> 为 <var>entry</var>.<var class="field">[[Value]]</var>。</li><li>如果 <var>requestedValue</var> 不是空字符串，则</li><li>如果 <var>keyLocaleData</var> 包含 <var>requestedValue</var>，则</li><li>设置 <var>value</var> 为 <var>requestedValue</var>。</li><li>设置 <var>supportedKeyword</var> 为记录 { <var class="field">[[Key]]</var>: <var>key</var>, <var class="field">[[Value]]</var>: <var>value</var>&nbsp;}。</li><li>否则如果 <var>keyLocaleData</var> 包含 <emu-val>"true"</emu-val>，则</li><li>设置 <var>value</var> 为 <emu-val>"true"</emu-val>。</li><li>设置 <var>supportedKeyword</var> 为记录 { <var class="field">[[Key]]</var>: <var>key</var>, <var class="field">[[Value]]</var>: <emu-val>""</emu-val>&nbsp;}。</li><li>断言：<var>options</var> 有字段 [[&lt;<var>key</var>&gt;]]。</li><li>令 <var>optionsValue</var> 为 <var>options</var>.[[&lt;<var>key</var>&gt;]]。</li><li>断言：<var>optionsValue</var> 为字符串，或为 <emu-val>undefined</emu-val> 或 <emu-val>null</emu-val>。</li><li>如果 <var>optionsValue</var> 为字符串，则</li><li>令 <var>ukey</var> 为 <var>key</var> 的 ASCII 小写形式。</li><li>设置 <var>optionsValue</var> 为 CanonicalizeUValue(<var>ukey</var>, <var>optionsValue</var>)。</li><li>如果 <var>optionsValue</var> 为空字符串，则</li><li>设置 <var>optionsValue</var> 为 <emu-val>"true"</emu-val>。</li><li>如果 <emu-xref aoid="SameValue"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>optionsValue</var>, <var>value</var>) 为 <emu-val>false</emu-val> 且 <var>keyLocaleData</var> 包含 <var>optionsValue</var>，则</li><li>设置 <var>value</var> 为 <var>optionsValue</var>。</li><li>设置 <var>supportedKeyword</var> 为 <emu-const>empty</emu-const>。</li><li>如果 <var>supportedKeyword</var> 不是 <emu-const>empty</emu-const>，则将 <var>supportedKeyword</var> 添加到 <var>supportedKeywords</var>。</li><li>设置 <var>result</var>.[[&lt;<var>key</var>&gt;]] 为 <var>value</var>。</li><li>如果 <var>supportedKeywords</var> 非空，则</li><li>令 <var>supportedAttributes</var> 为一个新的空列表。</li><li>设置 <var>foundLocale</var> 为 <emu-xref aoid="InsertUnicodeExtensionAndCanonicalize" id="_ref_389"><a href="#sec-insert-unicode-extension-and-canonicalize">InsertUnicodeExtensionAndCanonicalize</a></emu-xref>(<var>foundLocale</var>, <var>supportedAttributes</var>,
        <var>supportedKeywords</var>)。</li><li>设置 <var>result</var>.<var class="field">[[Locale]]</var> 为 <var>foundLocale</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-resolveoptions" type="abstract operation" aoid="ResolveOptions">
      <h1><span class="secnum">9.2.8</span> ResolveOptions ( <var>constructor</var>, <var>localeData</var>, <var>locales</var>, <var>options</var> [ , <var>specialBehaviours</var> [ , <var>modifyResolutionOptions</var> ] ] )</h1>
      <p>The abstract operation ResolveOptions takes arguments <var>constructor</var> (<emu-xref href="#service-constructor" id="_ref_390"><a href="#service-constructor">服务构造函数</a></emu-xref>), <var>localeData</var> (记录), <var>locales</var> (一个 ECMAScript 语言值), and <var>options</var> (一个 ECMAScript 语言值) and optional arguments <var>specialBehaviours</var> (枚举列表) and <var>modifyResolutionOptions</var> (一个参数的抽象闭包) and returns 返回一个包含字段 <var class="field">[[Options]]</var>（对象）、<var class="field">[[ResolvedLocale]]</var>（记录）和 <var class="field">[[ResolutionOptions]]</var>（记录）的正常完成或抛出完成. 它读取 <var>constructor</var> 的输入并将其解析为语言环境。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_391"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>如果 <var>specialBehaviours</var> 存在且包含 <emu-const>require-options</emu-const> 且 <var>options</var> 为 <emu-val>undefined</emu-val>，则抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>specialBehaviours</var> 存在且包含 <emu-const>coerce-options</emu-const>，则设置 <var>options</var> 为 ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_392"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>)。否则，设置
        <var>options</var> 为 ?&nbsp;<emu-xref aoid="GetOptionsObject"><a href="https://tc39.es/ecma262/#sec-getoptionsobject">GetOptionsObject</a></emu-xref>(<var>options</var>)。</li><li>令 <var>matcher</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_393"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val>&nbsp;», <emu-val>"best
        fit"</emu-val>)。</li><li>令 <var>opt</var> 为记录 { <var class="field">[[localeMatcher]]</var>: <var>matcher</var>&nbsp;}。</li><li>对于 <var>constructor</var>.<var class="field">[[ResolutionOptionDescriptors]]</var> 的每个<emu-xref href="#resolution-option-descriptor" id="_ref_394"><a href="#resolution-option-descriptor">解析选项描述符</a></emu-xref> <var>desc</var>，执行</li><li>如果 <var>desc</var> 有 <var class="field">[[Type]]</var> 字段，令 <var>type</var> 为 <var>desc</var>.<var class="field">[[Type]]</var>；否则令 <var>type</var> 为 <emu-const>string</emu-const>。</li><li>如果 <var>desc</var> 有 <var class="field">[[Values]]</var> 字段，令 <var>values</var> 为 <var>desc</var>.<var class="field">[[Values]]</var>；否则令 <var>values</var> 为 <emu-const>empty</emu-const>。</li><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_395"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <var>desc</var>.<var class="field">[[Property]]</var>, <var>type</var>, <var>values</var>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>value</var> 不是 <emu-val>undefined</emu-val>，则</li><li>设置 <var>value</var> 为 !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>value</var>)。</li><li>如果 <var>value</var> 不能被 <code>type</code> <emu-xref href="#sec-language-tags" id="_ref_396"><a href="#sec-language-tags">Unicode 语言环境非终结符</a></emu-xref>匹配，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>key</var> 为 <var>desc</var>.<var class="field">[[Key]]</var>。</li><li>设置 <var>opt</var>.[[&lt;<var>key</var>&gt;]] 为 <var>value</var>。</li><li>如果 <var>modifyResolutionOptions</var> 存在，则执行 !&nbsp;<var>modifyResolutionOptions</var>(<var>opt</var>)。</li><li>令 <var>resolution</var> 为 <emu-xref aoid="ResolveLocale" id="_ref_397"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<var>constructor</var>.<var class="field">[[AvailableLocales]]</var>, <var>requestedLocales</var>, <var>opt</var>,
        <var>constructor</var>.<var class="field">[[RelevantExtensionKeys]]</var>, <var>localeData</var>)。</li><li>返回记录 { <var class="field">[[Options]]</var>: <var>options</var>, <var class="field">[[ResolvedLocale]]</var>: <var>resolution</var>, <var class="field">[[ResolutionOptions]]</var>: <var>opt</var>&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-filterlocales" type="abstract operation" oldids="sec-lookupsupportedlocales,sec-bestfitsupportedlocales,sec-supportedlocales" aoid="FilterLocales"><span id="sec-supportedlocales"></span><span id="sec-bestfitsupportedlocales"></span><span id="sec-lookupsupportedlocales"></span>
      <h1><span class="secnum">9.2.9</span> FilterLocales ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var> )</h1>
      <p>The abstract operation FilterLocales takes arguments <var>availableLocales</var> (<emu-xref href="#available-locales-list" id="_ref_398"><a href="#available-locales-list">可用语言环境列表</a></emu-xref>), <var>requestedLocales</var> (<emu-xref href="#language-priority-list" id="_ref_399"><a href="#language-priority-list">语言优先级列表</a></emu-xref>), and <var>options</var> (一个 ECMAScript 语言值) and returns 返回一个包含 <emu-xref href="#sec-language-tags" id="_ref_400"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>列表的正常完成或抛出完成. 它根据 <a href="https://www.rfc-editor.org/rfc/bcp/bcp47.txt">BCP 47</a> 在 <a href="https://www.rfc-editor.org/rfc/rfc4647.html#section-3">RFC 4647 section 3</a> 中定义的“过滤”，返回
          <var>requestedLocales</var> 中在指定算法下（<emu-xref aoid="LookupMatchingLocaleByBestFit" id="_ref_401"><a href="#sec-lookupmatchinglocalebybestfit">LookupMatchingLocaleByBestFit</a></emu-xref> 或 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_402"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>）能被 <var>availableLocales</var>
          匹配的元素，保留其相对顺序。 It performs the following steps when called:</p>
      <emu-alg><ol><li>设置 <var>options</var> 为 ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_403"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>)。</li><li>令 <var>matcher</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_404"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val>&nbsp;», <emu-val>"best
        fit"</emu-val>)。</li><li>令 <var>subset</var> 为一个新的空列表。</li><li>对于 <var>requestedLocales</var> 的每个元素 <var>locale</var>，执行</li><li>如果 <var>matcher</var> 为 <emu-val>"lookup"</emu-val>，则</li><li>令 <var>match</var> 为 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_405"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>(<var>availableLocales</var>, « <var>locale</var>&nbsp;»)。</li><li>否则，</li><li>令 <var>match</var> 为 <emu-xref aoid="LookupMatchingLocaleByBestFit" id="_ref_406"><a href="#sec-lookupmatchinglocalebybestfit">LookupMatchingLocaleByBestFit</a></emu-xref>(<var>availableLocales</var>, « <var>locale</var>&nbsp;»)。</li><li>如果 <var>match</var> 不是 <emu-val>undefined</emu-val>，则将 <var>locale</var> 添加到 <var>subset</var>。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>subset</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-coerceoptionstoobject" type="abstract operation" aoid="CoerceOptionsToObject">
      <h1><span class="secnum">9.2.10</span> CoerceOptionsToObject ( <var>options</var> )</h1>
      <p>The abstract operation CoerceOptionsToObject takes argument <var>options</var> (一个 ECMAScript 语言值) and returns 返回一个包含对象的正常完成或抛出完成. 
          它将 <var>options</var> 强制转换为适用于 <emu-xref aoid="GetOption" id="_ref_407"><a href="#sec-getoption">GetOption</a></emu-xref> 的对象，默认为空对象。
          因为它会将非 null 原始值转换为对象，建议新功能使用 <emu-xref aoid="GetOptionsObject"><a href="https://tc39.es/ecma262/#sec-getoptionsobject">GetOptionsObject</a></emu-xref> 替代。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>options</var> 为 <emu-val>undefined</emu-val>，则</li><li>返回 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>返回 ?&nbsp;<emu-xref aoid="ToObject"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getoption" type="abstract operation" aoid="GetOption">
      <h1><span class="secnum">9.2.11</span> GetOption ( <var>options</var>, <var>property</var>, <var>type</var>, <var>values</var>, <var>default</var> )</h1>
      <p>The abstract operation GetOption takes arguments <var>options</var> (一个对象), <var>property</var> (属性键), <var>type</var> (<emu-const>boolean</emu-const> 或 <emu-const>string</emu-const>), <var>values</var> (<emu-const>empty</emu-const> 或 ECMAScript 语言值列表), and <var>default</var> (<emu-const>required</emu-const> 或 ECMAScript 语言值) and returns 返回一个包含 ECMAScript 语言值的正常完成或抛出完成. 它提取 <var>options</var> 指定属性的值，转换为所需类型，若 <var>values</var> 非空则检查是否允许，并在值为 <emu-val>undefined</emu-val> 时替换为 <var>default</var>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>property</var>)。</li><li>如果 <var>value</var> 为 <emu-val>undefined</emu-val>，则</li><li>如果 <var>default</var> 为 <emu-const>required</emu-const>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>default</var>。</li><li>如果 <var>type</var> 为 <emu-const>boolean</emu-const>，则</li><li>设置 <var>value</var> 为 <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>value</var>)。</li><li>否则，</li><li>断言：<var>type</var> 为 <emu-const>string</emu-const>。</li><li>设置 <var>value</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>value</var>)。</li><li>如果 <var>values</var> 非空且不包含 <var>value</var>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>value</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getbooleanorstringnumberformatoption" type="abstract operation" aoid="GetBooleanOrStringNumberFormatOption">
      <h1><span class="secnum">9.2.12</span> GetBooleanOrStringNumberFormatOption ( <var>options</var>, <var>property</var>, <var>stringValues</var>, <var>fallback</var> )</h1>
      <p>The abstract operation GetBooleanOrStringNumberFormatOption takes arguments <var>options</var> (一个对象), <var>property</var> (属性键), <var>stringValues</var> (字符串列表), and <var>fallback</var> (一个 ECMAScript 语言值) and returns 返回一个包含布尔值、字符串或 <var>fallback</var> 的正常完成或抛出完成. 它提取 <var>options</var> 中名为 <var>property</var> 的属性值。如果该值为 <emu-val>undefined</emu-val>，返回 <var>fallback</var>；如果为 <emu-val>true</emu-val>，返回 <emu-val>true</emu-val>；如果转换为布尔值为 <emu-val>false</emu-val>，返回
          <emu-val>false</emu-val>；否则转换为字符串并在 <var>stringValues</var> 中允许时返回该字符串。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>property</var>)。</li><li>如果 <var>value</var> 为 <emu-val>undefined</emu-val>，返回 <var>fallback</var>。</li><li>如果 <var>value</var> 为 <emu-val>true</emu-val>，返回 <emu-val>true</emu-val>。</li><li>如果 <emu-xref aoid="ToBoolean"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>value</var>) 为 <emu-val>false</emu-val>，返回 <emu-val>false</emu-val>。</li><li>设置 <var>value</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>value</var>)。</li><li>如果 <var>stringValues</var> 不包含 <var>value</var>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>value</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-defaultnumberoption" type="abstract operation" aoid="DefaultNumberOption">
      <h1><span class="secnum">9.2.13</span> DefaultNumberOption ( <var>value</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</h1>
      <p>The abstract operation DefaultNumberOption takes arguments <var>value</var> (一个 ECMAScript 语言值), <var>minimum</var> (整数), <var>maximum</var> (整数), and <var>fallback</var> (整数或 <emu-val>undefined</emu-val>) and returns 返回一个包含整数或 <emu-val>undefined</emu-val> 的正常完成或抛出完成. 它将 <var>value</var> 转换为整数，检查是否在允许范围内，并在必要时填充 <var>fallback</var> 值。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>value</var> 为 <emu-val>undefined</emu-val>，返回 <var>fallback</var>。</li><li>设置 <var>value</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>)。</li><li>如果 <var>value</var> 非有限，或 <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>value</var>) &lt; <var>minimum</var>，或 <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>value</var>) &gt; <var>maximum</var>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>value</var>))。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getnumberoption" type="abstract operation" aoid="GetNumberOption">
      <h1><span class="secnum">9.2.14</span> GetNumberOption ( <var>options</var>, <var>property</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</h1>
      <p>The abstract operation GetNumberOption takes arguments <var>options</var> (一个对象), <var>property</var> (一个字符串), <var>minimum</var> (整数), <var>maximum</var> (整数), and <var>fallback</var> (整数或 <emu-val>undefined</emu-val>) and returns 返回一个包含整数或 <emu-val>undefined</emu-val> 的正常完成或抛出完成. 它提取 <var>options</var> 中名为 <var>property</var> 的属性值，转换为整数，检查是否在允许范围内，并在必要时填充 <var>fallback</var> 值。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>property</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_408"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>value</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionpattern" type="abstract operation" aoid="PartitionPattern">
      <h1><span class="secnum">9.2.15</span> PartitionPattern ( <var>pattern</var> )</h1>
      <p>The abstract operation PartitionPattern takes argument <var>pattern</var> (一个<emu-xref href="#sec-pattern-string-types" id="_ref_409"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>) and returns 一个包含字段 <var class="field">[[Type]]</var>（字符串）和 <var class="field">[[Value]]</var>（字符串或 <emu-val>undefined</emu-val>）的记录列表. 
          当 <var class="field">[[Type]]</var> 为 <emu-val>"literal"</emu-val> 时，<var class="field">[[Value]]</var> 字段为字符串值，否则为 <emu-val>undefined</emu-val>。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>result</var> 为一个新的空列表。</li><li>令 <var>placeholderEnd</var> 为 -1。</li><li>令 <var>placeholderStart</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>pattern</var>, <emu-val>"{"</emu-val>, 0)。</li><li>重复，条件为 <var>placeholderStart</var> 非 <emu-const>not-found</emu-const>，</li><li>令 <var>literal</var> 为 <var>pattern</var> 从 <var>placeholderEnd</var> + 1 到 <var>placeholderStart</var> 的子串。</li><li>如果 <var>literal</var> 不是空字符串，则</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>literal</var>&nbsp;} 添加到 <var>result</var>。</li><li>设置 <var>placeholderEnd</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>pattern</var>, <emu-val>"}"</emu-val>, <var>placeholderStart</var>)。</li><li>断言：<var>placeholderEnd</var> 非 <emu-const>not-found</emu-const> 且 <var>placeholderStart</var> &lt; <var>placeholderEnd</var>。</li><li>令 <var>placeholderName</var> 为 <var>pattern</var> 从 <var>placeholderStart</var> + 1 到 <var>placeholderEnd</var> 的子串。</li><li>将记录 { <var class="field">[[Type]]</var>: <var>placeholderName</var>, <var class="field">[[Value]]</var>: <emu-val>undefined</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>设置 <var>placeholderStart</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>pattern</var>, <emu-val>"{"</emu-val>, <var>placeholderEnd</var>)。</li><li>令 <var>tail</var> 为 <var>pattern</var> 从 <var>placeholderEnd</var> + 1 开始的子串。</li><li>如果 <var>tail</var> 不是空字符串，则</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>tail</var>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="collator-objects">
  <h1><span class="secnum">10</span> Collator 对象</h1>

  <emu-clause id="sec-intl-collator-constructor" oldids="sec-the-intl-collator-constructor"><span id="sec-the-intl-collator-constructor"></span>
    <h1><span class="secnum">10.1</span> Intl.Collator 构造函数</h1>

    <p>Intl.Collator 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.Collator%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_410"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"Collator"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_411"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_41"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-intl.collator" oldids="sec-initializecollator"><span id="sec-initializecollator"></span>
      <h1><span class="secnum">10.1.1</span> Intl.Collator ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当 <code>Intl.Collator</code> 函数以可选参数 <var>locales</var> 和 <var>options</var> 被调用时，执行以下步骤：</p>
      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，令 <var>newTarget</var> 为活动函数对象，否则令 <var>newTarget</var> 为 NewTarget。</li><li>令 <var>internalSlotsList</var> 为 « <var class="field">[[InitializedCollator]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[Usage]]</var>, <var class="field">[[Collation]]</var>, <var class="field">[[Numeric]]</var>,
        <var class="field">[[CaseFirst]]</var>, <var class="field">[[Sensitivity]]</var>, <var class="field">[[IgnorePunctuation]]</var>, <var class="field">[[BoundCompare]]</var>&nbsp;»。</li><li>令 <var>collator</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <emu-val>"%Intl.Collator.prototype%"</emu-val>,
        <var>internalSlotsList</var>)。</li><li>注：<emu-xref aoid="ResolveOptions" id="_ref_412"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref> 的 locale 数据来源取决于 <var>options</var> 的 <emu-val>"usage"</emu-val> 属性，但以下两步必须在该查找之前可观察地执行（且不得在 <emu-xref aoid="ResolveOptions" id="_ref_413"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref> 内部重复执行）。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_414"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>将 <var>options</var> 设置为 ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_415"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>)。</li><li>令 <var>usage</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_416"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"usage"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"sort"</emu-val>, <emu-val>"search"</emu-val>&nbsp;», <emu-val>"sort"</emu-val>)。</li><li>设置 <var>collator</var>.<var class="field">[[Usage]]</var> 为 <var>usage</var>。</li><li>如果 <var>usage</var> 是 <emu-val>"sort"</emu-val>，则</li><li>令 <var>localeData</var> 为 <emu-xref href="#sec-intl-collator-constructor" id="_ref_417"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[SortLocaleData]]</var>。</li><li>否则，</li><li>令 <var>localeData</var> 为 <emu-xref href="#sec-intl-collator-constructor" id="_ref_418"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[SearchLocaleData]]</var>。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_419"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-collator-constructor" id="_ref_420"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>, <var>localeData</var>,
        <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>requestedLocales</var>), <var>options</var>)。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>设置 <var>collator</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>如果 <var>r</var>.<var class="field">[[co]]</var> 为 <emu-val>null</emu-val>，令 <var>collation</var> 为 <emu-val>"default"</emu-val>。否则，令 <var>collation</var> 为 <var>r</var>.<var class="field">[[co]]</var>。</li><li>设置 <var>collator</var>.<var class="field">[[Collation]]</var> 为 <var>collation</var>。</li><li>设置 <var>collator</var>.<var class="field">[[Numeric]]</var> 为 <emu-xref aoid="SameValue"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>r</var>.<var class="field">[[kn]]</var>, <emu-val>"true"</emu-val>)。</li><li>设置 <var>collator</var>.<var class="field">[[CaseFirst]]</var> 为 <var>r</var>.<var class="field">[[kf]]</var>。</li><li>令 <var>resolvedLocaleData</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>如果 <var>usage</var> 是 <emu-val>"sort"</emu-val>，令 <var>defaultSensitivity</var> 为 <emu-val>"variant"</emu-val>。否则，令 <var>defaultSensitivity</var> 为
        <var>resolvedLocaleData</var>.<var class="field">[[sensitivity]]</var>。</li><li>设置 <var>collator</var>.<var class="field">[[Sensitivity]]</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_421"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"sensitivity"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"base"</emu-val>, <emu-val>"accent"</emu-val>,
        <emu-val>"case"</emu-val>, <emu-val>"variant"</emu-val>&nbsp;», <var>defaultSensitivity</var>)。</li><li>令 <var>defaultIgnorePunctuation</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[ignorePunctuation]]</var>。</li><li>设置 <var>collator</var>.<var class="field">[[IgnorePunctuation]]</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_422"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"ignorePunctuation"</emu-val>, <emu-const>boolean</emu-const>, <emu-const>empty</emu-const>,
        <var>defaultIgnorePunctuation</var>)。</li><li>返回 <var>collator</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-note><span class="note">Note</span><div class="note-contents">
      与 <emu-val>"search"</emu-val> 用法选项关联的排序方式只应用于查找匹配字符串，因为该排序方式不保证任何特定顺序。此行为在 <a href="https://unicode.org/reports/tr35/#UnicodeCollationIdentifier">Unicode 技术标准 #35 第1部分核心，Unicode Collation
        Identifier</a> 和 <a href="https://unicode.org/reports/tr10/#Searching">Unicode 技术标准 #10 Unicode Collation
        Algorithm，搜索与匹配</a> 中描述。
    </div></emu-note>
  </emu-clause>

  <emu-clause id="sec-properties-of-the-intl-collator-constructor">
    <h1><span class="secnum">10.2</span> Intl.Collator 构造函数的属性</h1>

    <p>Intl.Collator 构造函数：</p>
    <ul>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-intl.collator.prototype">
      <h1><span class="secnum">10.2.1</span> Intl.Collator.prototype</h1>

      <p><code>Intl.Collator.prototype</code> 的值为 <emu-xref href="#sec-properties-of-the-intl-collator-prototype-object" id="_ref_423"><a href="#sec-properties-of-the-intl-collator-prototype-object">%Intl.Collator.prototype%</a></emu-xref>。</p>

      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-intl.collator.supportedlocalesof">
      <h1><span class="secnum">10.2.2</span> Intl.Collator.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当 <code>supportedLocalesOf</code> 方法以参数 <var>locales</var> 和 <var>options</var> 被调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-collator-constructor" id="_ref_424"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_425"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_426"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl-collator-internal-slots">
      <h1><span class="secnum">10.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_42"><a href="#sec-internal-slots">9.1</a></emu-xref>
        描述的约束范围内由实现定义。<var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值是一个列表，必须包含元素 <emu-val>"co"</emu-val>，可以包含 <emu-val>"kf"</emu-val> 和 <emu-val>"kn"</emu-val> 元素中的任意一个或全部，且不得包含其他元素。</p>

      <emu-note><span class="note">Note</span><div class="note-contents">
        <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准 #35 第1部分核心，3.6.1节 键和值定义</a>
        描述了与排序相关的十个区域扩展键：<emu-val>"co"</emu-val> 用于排序器用途和特化，<emu-val>"ka"</emu-val> 用于替代处理，<emu-val>"kb"</emu-val> 用于反向二级权重，<emu-val>"kc"</emu-val> 用于大小写级别，<emu-val>"kf"</emu-val> 用于首字母大小写，<emu-val>"kh"</emu-val>
        用于平假名四级，<emu-val>"kk"</emu-val> 用于归一化，<emu-val>"kn"</emu-val> 用于数字，<emu-val>"kr"</emu-val> 用于重排序，<emu-val>"ks"</emu-val> 用于排序强度，以及 <emu-val>"vt"</emu-val> 用于变量顶。Collator 要求通过 options 对象的 <emu-val>"usage"</emu-val>
        属性指定用途，通过 <emu-val>"ignorePunctuation"</emu-val> 属性指定替代处理，通过 <emu-val>"sensitivity"</emu-val> 属性指定大小写级别和强度。<emu-xref href="#sec-language-tags" id="_ref_427"><a href="#sec-language-tags">语言标签</a></emu-xref>中的 <emu-val>"co"</emu-val>
        键仅支持排序器特化，<emu-val>"kb"</emu-val>、<emu-val>"kh"</emu-val>、<emu-val>"kk"</emu-val>、<emu-val>"kr"</emu-val> 和 <emu-val>"vt"</emu-val> 键在本版本的国际化 API 中不允许。其余键的支持由实现决定。
      </div></emu-note>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « { <var class="field">[[Key]]</var>: <emu-val>"co"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"collation"</emu-val> }, { <var class="field">[[Key]]</var>: <emu-val>"kn"</emu-val>,
        <var class="field">[[Property]]</var>: <emu-val>"numeric"</emu-val>, <var class="field">[[Type]]</var>: <emu-const>boolean</emu-const> }, { <var class="field">[[Key]]</var>: <emu-val>"kf"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"caseFirst"</emu-val>, <var class="field">[[Values]]</var>: «
        <emu-val>"upper"</emu-val>, <emu-val>"lower"</emu-val>, <emu-val>"false"</emu-val> » } »。</p>

      <p><var class="field">[[SortLocaleData]]</var> 和 <var class="field">[[SearchLocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_43"><a href="#sec-internal-slots">9.1</a></emu-xref>
        描述的约束范围内由实现定义，并且有以下额外约束，对所有区域值 <var>locale</var>：</p>

      <ul>
        <li><var class="field">[[SortLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[co]]</var> 和 <var class="field">[[SearchLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[co]]</var> 的第一个元素必须为
          <emu-val>null</emu-val>。</li>
        <li><emu-val>"standard"</emu-val> 和 <emu-val>"search"</emu-val> 不得作为任何 <var class="field">[[SortLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[co]]</var> 和
          <var class="field">[[SearchLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[co]]</var> 列表的元素。</li>
        <li><var class="field">[[SearchLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须有一个 <var class="field">[[sensitivity]]</var> 字段，其值为 <emu-val>"base"</emu-val>、<emu-val>"accent"</emu-val>、<emu-val>"case"</emu-val> 或
          <emu-val>"variant"</emu-val>。</li>
        <li><var class="field">[[SearchLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 和 <var class="field">[[SortLocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须有一个 <var class="field">[[ignorePunctuation]]</var>
          字段，其值为布尔值。</li>
      </ul>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-the-intl-collator-prototype-object">
    <h1><span class="secnum">10.3</span> Intl.Collator 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.Collator 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.Collator.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.Collator 实例，不具有 <var class="field">[[InitializedCollator]]</var> 内部槽或任何 Intl.Collator 实例对象的其他内部槽。</li>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-intl.collator.prototype.constructor">
      <h1><span class="secnum">10.3.1</span> Intl.Collator.prototype.constructor</h1>

      <p><code>Intl.Collator.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-collator-constructor" id="_ref_428"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.collator.prototype.resolvedoptions">
      <h1><span class="secnum">10.3.2</span> Intl.Collator.prototype.resolvedOptions ( )</h1>

      <p>此函数提供对对象初始化期间计算的区域和选项的访问。</p>

      <emu-alg><ol><li>令 <var>collator</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>collator</var>, <var class="field">[[InitializedCollator]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-collator-resolvedoptions-properties" id="_ref_44"><a href="#table-collator-resolvedoptions-properties">Table 3</a></emu-xref> 的每一行（除表头行），按表顺序，执行</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>collator</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>如果当前行有 Extension Key 值，则</li><li>令 <var>extensionKey</var> 为当前行的 Extension Key 值。</li><li>如果 <emu-xref href="#sec-intl-collator-constructor" id="_ref_429"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[RelevantExtensionKeys]]</var> 不包含 <var>extensionKey</var>，则</li><li>设置 <var>v</var> 为 <emu-val>undefined</emu-val>。</li><li>如果 <var>v</var> 不为 <emu-val>undefined</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-collator-resolvedoptions-properties"><figure><figcaption>Table 3: Collator 实例的已解析选项</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>属性</th>
              <th>扩展键</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Usage]]</var></td>
            <td><emu-val>"usage"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Sensitivity]]</var></td>
            <td><emu-val>"sensitivity"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[IgnorePunctuation]]</var></td>
            <td><emu-val>"ignorePunctuation"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Collation]]</var></td>
            <td><emu-val>"collation"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Numeric]]</var></td>
            <td><emu-val>"numeric"</emu-val></td>
            <td><emu-val>"kn"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[CaseFirst]]</var></td>
            <td><emu-val>"caseFirst"</emu-val></td>
            <td><emu-val>"kf"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-intl.collator.prototype.compare">
      <h1><span class="secnum">10.3.3</span> get Intl.Collator.prototype.compare</h1>

      <p>此命名访问器属性返回一个函数，该函数根据此 Collator 对象的排序顺序比较两个字符串。</p>
      <p>Intl.Collator.prototype.compare 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>collator</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>collator</var>, <var class="field">[[InitializedCollator]]</var>)。</li><li>如果 <var>collator</var>.<var class="field">[[BoundCompare]]</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>F</var> 为一个新的内置函数对象，如 <emu-xref href="#sec-collator-compare-functions" id="_ref_45"><a href="#sec-collator-compare-functions">10.3.3.1</a></emu-xref> 所定义。</li><li>设置 <var>F</var>.<var class="field">[[Collator]]</var> 为 <var>collator</var>。</li><li>设置 <var>collator</var>.<var class="field">[[BoundCompare]]</var> 为 <var>F</var>。</li><li>返回 <var>collator</var>.<var class="field">[[BoundCompare]]</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        返回的函数绑定到 <var>collator</var>，因此可以直接传递给 <code>Array.prototype.sort</code> 或其他函数。
      </div></emu-note>

      <emu-clause id="sec-collator-compare-functions">
        <h1><span class="secnum">10.3.3.1</span> Collator 比较函数</h1>

        <p>Collator 比较函数是一个匿名内置函数，具有 <var class="field">[[Collator]]</var> 内部槽。</p>
        <p>当 Collator 比较函数 <var>F</var> 以参数 <var>x</var> 和 <var>y</var> 被调用时，执行以下步骤：</p>

        <emu-alg><ol><li>令 <var>collator</var> 为 <var>F</var>.<var class="field">[[Collator]]</var>。</li><li>断言：<var>collator</var> 是一个对象且具有 <var class="field">[[InitializedCollator]]</var> 内部槽。</li><li>如果未提供 <var>x</var>，令 <var>x</var> 为 <emu-val>undefined</emu-val>。</li><li>如果未提供 <var>y</var>，令 <var>y</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>X</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>x</var>)。</li><li>令 <var>Y</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>y</var>)。</li><li>返回 <emu-xref aoid="CompareStrings" id="_ref_430"><a href="#sec-collator-comparestrings">CompareStrings</a></emu-xref>(<var>collator</var>, <var>X</var>, <var>Y</var>)。</li></ol></emu-alg>

        <p>Collator 比较函数的 <emu-val>"length"</emu-val> 属性为 <emu-val>2</emu-val><sub>𝔽</sub>。</p>
      </emu-clause>

      <emu-clause id="sec-collator-comparestrings" type="implementation-defined abstract operation" aoid="CompareStrings">
        <h1><span class="secnum">10.3.3.2</span> CompareStrings ( <var>collator</var>, <var>x</var>, <var>y</var> )</h1>
        <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation CompareStrings takes arguments <var>collator</var> (一个 Intl.Collator), <var>x</var> (一个字符串), and <var>y</var> (一个字符串) and returns 一个数字，但不是 <emu-val>NaN</emu-val>.</p>

        <p>如下所述的行为依赖于区域敏感地识别字符串的排序元素序列，特别是“基本字母”，不同的基本字母总是比较为不相等（导致包含它们的字符串也比较为不相等）。同一基本字母的不同变体（大小写、变音符号等）比较结果进一步取决于
          <var>collator</var>.<var class="field">[[Sensitivity]]</var>，如下：</p>

        <emu-table id="table-collator-comparestrings-sensitivity"><figure><figcaption>Table 4: Collator 敏感度的影响</figcaption>
          
          <table class="real-table">
            <thead style="white-space: nowrap">
              <tr>
                <th><var class="field">[[Sensitivity]]</var></th>
                <th>描述</th>
                <th><emu-val>"a"</emu-val> 与 <emu-val>"á"</emu-val> 比较</th>
                <th><emu-val>"a"</emu-val> 与 <emu-val>"A"</emu-val> 比较</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><emu-val>"base"</emu-val></td>
              <td>具有相同基本字母的字符不比较为不相等，无论大小写或变音符号差异。</td>
              <td>相等</td>
              <td>相等</td>
            </tr>
            <tr>
              <td><emu-val>"accent"</emu-val></td>
              <td>具有相同基本字母的字符仅在变音符号等差异时比较为不相等，无论大小写。</td>
              <td>不相等</td>
              <td>相等</td>
            </tr>
            <tr>
              <td><emu-val>"case"</emu-val></td>
              <td>具有相同基本字母的字符仅在大小写差异时比较为不相等，无论变音符号。</td>
              <td>相等</td>
              <td>不相等</td>
            </tr>
            <tr>
              <td><emu-val>"variant"</emu-val></td>
              <td>具有相同基本字母的字符在大小写、变音符号及其他差异时比较为不相等。</td>
              <td>不相等</td>
              <td>不相等</td>
            </tr>
          </tbody></table>
        </figure></emu-table>

        <emu-note><span class="note">Note 1</span><div class="note-contents">
          输入代码点到基本字母的映射可以包含任意收缩、扩展和冲突，包括对某些带变音符号字符的特殊处理。例如，在瑞典语中，“ö”是与“o”不同的基本字母，“v”和“w”被视为同一基本字母。在斯洛伐克语中，“ch”是一个基本字母，在英语中，“æ”是以“a”开头、“e”结尾的基本字母序列。
        </div></emu-note>

        <p>如果 <var>collator</var>.<var class="field">[[IgnorePunctuation]]</var> 为 <emu-val>true</emu-val>，则忽略标点（例如，仅标点不同的字符串比较为相等）。</p>

        <p>关于通过区域扩展键设置的选项解释，请参见 <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准 #35
            第1部分核心，3.6.1节 键和值定义</a>。</p>

        <p>实际返回值由实现定义，以允许编码附加信息，但对于任何给定 <var>collator</var>，作为 <var>x</var> 和 <var>y</var> 的函数，该操作必须是一个一致的比较器，在所有字符串集合上定义一个全序。该操作还必须识别并遵循 Unicode
          标准的规范等价，包括在比较可区分但规范等价的字符串时返回 <emu-val>+0</emu-val><sub>𝔽</sub>。</p>

        <emu-note><span class="note">Note 2</span><div class="note-contents">
          推荐 CompareStrings 抽象操作按照 <a href="https://unicode.org/reports/tr10/">Unicode 技术标准 #10：Unicode Collation
            Algorithm</a> 实现，并针对 <var>collator</var> 的有效区域和排序选项进行定制。推荐实现使用由 Common Locale Data Repository 提供的定制（<a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>）。
        </div></emu-note>

        <emu-note><span class="note">Note 3</span><div class="note-contents">
          应用程序不应假定具有相同已解析选项的 Collator 实例的 CompareStrings 抽象操作行为在同一实现的不同版本间保持不变。
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-intl.collator.prototype-%symbol.tostringtag%" oldids="sec-intl.collator.prototype-@@tostringtag"><span id="sec-intl.collator.prototype-@@tostringtag"></span>
      <h1><span class="secnum">10.3.4</span> Intl.Collator.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.Collator"</emu-val>。</p>

      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-collator-instances">
    <h1><span class="secnum">10.4</span> Intl.Collator 实例的属性</h1>

    <p>Intl.Collator 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-the-intl-collator-prototype-object" id="_ref_431"><a href="#sec-properties-of-the-intl-collator-prototype-object">%Intl.Collator.prototype%</a></emu-xref> 的属性。</p>

    <p>Intl.Collator 实例具有 <var class="field">[[InitializedCollator]]</var> 内部槽。</p>

    <p>Intl.Collator 实例还具有多个内部槽，这些槽由 <emu-xref href="#sec-intl-collator-constructor" title="" id="_ref_46"><a href="#sec-intl-collator-constructor">Intl.Collator 构造函数</a></emu-xref> 计算：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于排序的区域的<emu-xref href="#sec-language-tags" id="_ref_432"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[Usage]]</var> 是字符串值 <emu-val>"sort"</emu-val> 或 <emu-val>"search"</emu-val>，标识排序器用途。</li>
      <li><var class="field">[[Sensitivity]]</var> 是字符串值 <emu-val>"base"</emu-val>、<emu-val>"accent"</emu-val>、<emu-val>"case"</emu-val> 或 <emu-val>"variant"</emu-val>，标识排序器的敏感度。</li>
      <li><var class="field">[[IgnorePunctuation]]</var> 是布尔值，指定比较时是否忽略标点。</li>
      <li><var class="field">[[Collation]]</var> 是一个字符串值，表示用于排序的 <a href="https://unicode.org/reports/tr35/#UnicodeCollationIdentifier">Unicode
          Collation Identifier</a>，<emu-val>"standard"</emu-val> 和 <emu-val>"search"</emu-val> 不允许，<emu-val>"default"</emu-val> 允许。</li>
    </ul>

    <p>如果 <emu-xref href="#table-collator-resolvedoptions-properties" id="_ref_47"><a href="#table-collator-resolvedoptions-properties">Table 3</a></emu-xref> 中对应内部槽名称的键包含在 Intl.Collator 的
      <var class="field">[[RelevantExtensionKeys]]</var> 内部槽中，则 Intl.Collator 实例还具有以下内部槽：</p>

    <ul>
      <li><var class="field">[[Numeric]]</var> 是布尔值，指定是否使用数字排序。</li>
      <li><var class="field">[[CaseFirst]]</var> 是字符串值 <emu-val>"upper"</emu-val>、<emu-val>"lower"</emu-val> 或 <emu-val>"false"</emu-val>。</li>
    </ul>

    <p>最后，Intl.Collator 实例具有 <var class="field">[[BoundCompare]]</var> 内部槽，用于缓存 compare 访问器返回的函数（<emu-xref href="#sec-intl.collator.prototype.compare" id="_ref_48"><a href="#sec-intl.collator.prototype.compare">10.3.3</a></emu-xref>）。</p>
  </emu-clause>
</emu-clause>
<emu-clause id="datetimeformat-objects">
  <h1><span class="secnum">11</span> DateTimeFormat 对象</h1>

  <emu-clause id="sec-intl-datetimeformat-constructor">
    <h1><span class="secnum">11.1</span> Intl.DateTimeFormat 构造函数</h1>

    <p>Intl.DateTimeFormat 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.DateTimeFormat%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_433"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"DateTimeFormat"</emu-val> 属性的初始值。</li>
    </ul>

    <p>所有 <emu-xref href="#intl-object" id="_ref_434"><a href="#intl-object">Intl 对象</a></emu-xref>服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_49"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-intl.datetimeformat">
      <h1><span class="secnum">11.1.1</span> Intl.DateTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当调用 <code>Intl.DateTimeFormat</code> 函数并传入可选参数 <var>locales</var> 和 <var>options</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，则令 <var>newTarget</var> 为当前活动的函数对象，否则令 <var>newTarget</var> 为 NewTarget。</li><li>令 <var>dateTimeFormat</var> 为 ?&nbsp;<emu-xref aoid="CreateDateTimeFormat" id="_ref_435"><a href="#sec-createdatetimeformat">CreateDateTimeFormat</a></emu-xref>(<var>newTarget</var>, <var>locales</var>, <var>options</var>, <emu-const>any</emu-const>, <emu-const>date</emu-const>)。</li><li>如果实现支持 <emu-xref href="#legacy-constructor" id="_ref_50"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref> 的规范可选构造器模式，则</li><li>令 <var>this</var> 为 <emu-val>this</emu-val> 值。</li><li>返回 ?&nbsp;<emu-xref aoid="ChainDateTimeFormat" id="_ref_436"><a href="#sec-chaindatetimeformat">ChainDateTimeFormat</a></emu-xref>(<var>dateTimeFormat</var>, NewTarget, <var>this</var>)。</li><li>返回 <var>dateTimeFormat</var>。</li></ol></emu-alg>

      <emu-clause id="sec-chaindatetimeformat" type="abstract operation" normative-optional="" aoid="ChainDateTimeFormat"><div class="attributes-tag"><emu-xref href="#sec-conformance"><a href="https://tc39.es/ecma262/#sec-conformance">Normative Optional</a></emu-xref></div>
        <h1><span class="secnum">11.1.1.1</span> ChainDateTimeFormat ( <var>dateTimeFormat</var>, <var>newTarget</var>, <var>this</var> )</h1>
        <p>The abstract operation ChainDateTimeFormat takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat), <var>newTarget</var> (一个 ECMAScript 语言值), and <var>this</var> (一个 ECMAScript 语言值) and returns 正常完成包含一个对象或抛出完成. It performs the following steps when called:</p>
        <emu-alg><ol><li>如果 <var>newTarget</var> 是 <emu-val>undefined</emu-val> 且 ?&nbsp;<emu-xref aoid="OrdinaryHasInstance"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_437"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>, <var>this</var>) 为 <emu-val>true</emu-val>，则</li><li>执行 ?&nbsp;<emu-xref aoid="DefinePropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>this</var>, <emu-xref href="#intl-object" id="_ref_438"><a href="#intl-object">%Intl%</a></emu-xref>.<var class="field">[[FallbackSymbol]]</var>, PropertyDescriptor{ <var class="field">[[Value]]</var>:
          <var>dateTimeFormat</var>, <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val>&nbsp;})。</li><li>返回 <var>this</var>。</li><li>返回 <var>dateTimeFormat</var>。</li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-createdatetimeformat" type="abstract operation" oldids="sec-initializedatetimeformat,sec-todatetimeoptions" aoid="CreateDateTimeFormat"><span id="sec-todatetimeoptions"></span><span id="sec-initializedatetimeformat"></span>
      <h1><span class="secnum">11.1.2</span> CreateDateTimeFormat ( <var>newTarget</var>, <var>locales</var>, <var>options</var>, <var>required</var>, <var>defaults</var> )</h1>

      <p>The abstract operation CreateDateTimeFormat takes arguments <var>newTarget</var> (一个构造函数), <var>locales</var> (一个 ECMAScript 语言值), <var>options</var> (一个 ECMAScript 语言值), <var>required</var> (<emu-const>date</emu-const>, <emu-const>time</emu-const>, 或 <emu-const>any</emu-const>), and <var>defaults</var> (<emu-const>date</emu-const>, <emu-const>time</emu-const>, 或 <emu-const>all</emu-const>) and returns 正常完成包含一个 DateTimeFormat 对象或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>dateTimeFormat</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <emu-val>"%Intl.DateTimeFormat.prototype%"</emu-val>, «
        <var class="field">[[InitializedDateTimeFormat]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[Calendar]]</var>, <var class="field">[[NumberingSystem]]</var>, <var class="field">[[TimeZone]]</var>, <var class="field">[[HourCycle]]</var>,
        <var class="field">[[DateStyle]]</var>, <var class="field">[[TimeStyle]]</var>, <var class="field">[[DateTimeFormat]]</var>, <var class="field">[[BoundFormat]]</var>&nbsp;»)。</li><li>令 <var>hour12</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>modifyResolutionOptions</var> 为一个新的抽象闭包，参数为 (<var>options</var>)，捕获 <var>hour12</var> 并在调用时执行以下步骤：</li><li>设置 <var>hour12</var> 为 <var>options</var>.<var class="field">[[hour12]]</var>。</li><li>从 <var>options</var> 中移除字段 <var class="field">[[hour12]]</var>。</li><li>如果 <var>hour12</var> 不为 <emu-val>undefined</emu-val>，则设置 <var>options</var>.<var class="field">[[hc]]</var> 为 <emu-val>null</emu-val>。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_439"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_440"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>, <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_441"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var>,
        <var>locales</var>, <var>options</var>, « <emu-const>coerce-options</emu-const>&nbsp;», <var>modifyResolutionOptions</var>)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>resolvedCalendar</var> 为 <var>r</var>.<var class="field">[[ca]]</var>。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[Calendar]]</var> 为 <var>resolvedCalendar</var>。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[NumberingSystem]]</var> 为 <var>r</var>.<var class="field">[[nu]]</var>。</li><li>令 <var>resolvedLocaleData</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>如果 <var>hour12</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>hc</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[hourCycle12]]</var>。</li><li>否则如果 <var>hour12</var> 为 <emu-val>false</emu-val>，则</li><li>令 <var>hc</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[hourCycle24]]</var>。</li><li>否则，</li><li>断言：<var>hour12</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>hc</var> 为 <var>r</var>.<var class="field">[[hc]]</var>。</li><li>如果 <var>hc</var> 为 <emu-val>null</emu-val>，则设置 <var>hc</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[hourCycle]]</var>。</li><li>令 <var>timeZone</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"timeZone"</emu-val>)。</li><li>如果 <var>timeZone</var> 为 <emu-val>undefined</emu-val>，则</li><li>设置 <var>timeZone</var> 为 <emu-xref aoid="SystemTimeZoneIdentifier"><a href="https://tc39.es/ecma262/#sec-systemtimezoneidentifier">SystemTimeZoneIdentifier</a></emu-xref>()。</li><li>否则，</li><li>设置 <var>timeZone</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>timeZone</var>)。</li><li>如果 <emu-xref aoid="IsTimeZoneOffsetString"><a href="https://tc39.es/ecma262/#sec-istimezoneoffsetstring">IsTimeZoneOffsetString</a></emu-xref>(<var>timeZone</var>) 为 <emu-val>true</emu-val>，则</li><li>令 <var>parseResult</var> 为 <emu-xref aoid="ParseText"><a href="https://tc39.es/ecma262/#sec-parsetext">ParseText</a></emu-xref>(<emu-xref aoid="StringToCodePoints"><a href="https://tc39.es/ecma262/#sec-stringtocodepoints">StringToCodePoints</a></emu-xref>(<var>timeZone</var>), <emu-nt><a href="https://tc39.es/ecma262/#prod-UTCOffset">UTCOffset</a></emu-nt>)。</li><li>断言：<var>parseResult</var> 是一个 <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">Parse Node</a></emu-xref>。</li><li>如果 <var>parseResult</var> 包含多个 <emu-nt><a href="https://tc39.es/ecma262/#prod-MinuteSecond">MinuteSecond</a></emu-nt> <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">Parse Node</a></emu-xref>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>offsetNanoseconds</var> 为 <emu-xref aoid="ParseTimeZoneOffsetString"><a href="https://tc39.es/ecma262/#sec-parsetimezoneoffsetstring">ParseTimeZoneOffsetString</a></emu-xref>(<var>timeZone</var>)。</li><li>令 <var>offsetMinutes</var> 为 <var>offsetNanoseconds</var> / (6 × 10<sup>10</sup>)。</li><li>断言：<var>offsetMinutes</var> 是整数。</li><li>设置 <var>timeZone</var> 为 <emu-xref aoid="FormatOffsetTimeZoneIdentifier" id="_ref_442"><a href="#sec-formatoffsettimezoneidentifier">FormatOffsetTimeZoneIdentifier</a></emu-xref>(<var>offsetMinutes</var>)。</li><li>否则，</li><li>令 <var>timeZoneIdentifierRecord</var> 为 <emu-xref aoid="GetAvailableNamedTimeZoneIdentifier" id="_ref_443"><a href="#sec-getavailablenamedtimezoneidentifier">GetAvailableNamedTimeZoneIdentifier</a></emu-xref>(<var>timeZone</var>)。</li><li>如果 <var>timeZoneIdentifierRecord</var> 为 <emu-const>empty</emu-const>，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>timeZone</var> 为 <var>timeZoneIdentifierRecord</var>.<var class="field">[[PrimaryIdentifier]]</var>。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[TimeZone]]</var> 为 <var>timeZone</var>。</li><li>令 <var>formatOptions</var> 为一个新记录。</li><li>设置 <var>formatOptions</var>.<var class="field">[[hourCycle]]</var> 为 <var>hc</var>。</li><li>令 <var>hasExplicitFormatComponents</var> 为 <emu-val>false</emu-val>。</li><li>对 <emu-xref href="#table-datetimeformat-components" id="_ref_51"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的每一行（除表头外，按表顺序），执行：</li><li>令 <var>prop</var> 为当前行 Property 列给出的名称。</li><li>如果 <var>prop</var> 为 <emu-val>"fractionalSecondDigits"</emu-val>，则</li><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="GetNumberOption" id="_ref_444"><a href="#sec-getnumberoption">GetNumberOption</a></emu-xref>(<var>options</var>, <emu-val>"fractionalSecondDigits"</emu-val>, 1, 3, <emu-val>undefined</emu-val>)。</li><li>否则，</li><li>令 <var>values</var> 为当前行 Values 列给出的字符串列表。</li><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_445"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <var>prop</var>, <emu-const>string</emu-const>, <var>values</var>, <emu-val>undefined</emu-val>)。</li><li>设置 <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]] 为 <var>value</var>。</li><li>如果 <var>value</var> 不为 <emu-val>undefined</emu-val>，则</li><li>设置 <var>hasExplicitFormatComponents</var> 为 <emu-val>true</emu-val>。</li><li>令 <var>formatMatcher</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_446"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"formatMatcher"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"basic"</emu-val>, <emu-val>"best fit"</emu-val>&nbsp;», <emu-val>"best
        fit"</emu-val>)。</li><li>令 <var>dateStyle</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_447"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"dateStyle"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, <emu-val>"short"</emu-val>
&nbsp;», <emu-val>undefined</emu-val>)。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[DateStyle]]</var> 为 <var>dateStyle</var>。</li><li>令 <var>timeStyle</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_448"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"timeStyle"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, <emu-val>"short"</emu-val>
&nbsp;», <emu-val>undefined</emu-val>)。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[TimeStyle]]</var> 为 <var>timeStyle</var>。</li><li>如果 <var>dateStyle</var> 不为 <emu-val>undefined</emu-val> 或 <var>timeStyle</var> 不为 <emu-val>undefined</emu-val>，则</li><li>如果 <var>hasExplicitFormatComponents</var> 为 <emu-val>true</emu-val>，则</li><li>抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>required</var> 为 <emu-const>date</emu-const> 且 <var>timeStyle</var> 不为 <emu-val>undefined</emu-val>，则</li><li>抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>required</var> 为 <emu-const>time</emu-const> 且 <var>dateStyle</var> 不为 <emu-val>undefined</emu-val>，则</li><li>抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>styles</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[styles]]</var>.[[&lt;<var>resolvedCalendar</var>&gt;]]。</li><li>令 <var>bestFormat</var> 为 <emu-xref aoid="DateTimeStyleFormat" id="_ref_449"><a href="#sec-date-time-style-format">DateTimeStyleFormat</a></emu-xref>(<var>dateStyle</var>, <var>timeStyle</var>, <var>styles</var>)。</li><li>否则，</li><li>令 <var>needDefaults</var> 为 <emu-val>true</emu-val>。</li><li>如果 <var>required</var> 为 <emu-const>date</emu-const> 或 <emu-const>any</emu-const>，则</li><li>对 « <emu-val>"weekday"</emu-val>, <emu-val>"year"</emu-val>, <emu-val>"month"</emu-val>, <emu-val>"day"</emu-val>&nbsp;» 的每个属性名 <var>prop</var>，执行：</li><li>令 <var>value</var> 为 <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]]。</li><li>如果 <var>value</var> 不为 <emu-val>undefined</emu-val>，设置 <var>needDefaults</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>required</var> 为 <emu-const>time</emu-const> 或 <emu-const>any</emu-const>，则</li><li>对 « <emu-val>"dayPeriod"</emu-val>, <emu-val>"hour"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"second"</emu-val>, <emu-val>"fractionalSecondDigits"</emu-val>&nbsp;» 的每个属性名 <var>prop</var>，执行：</li><li>令 <var>value</var> 为 <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]]。</li><li>如果 <var>value</var> 不为 <emu-val>undefined</emu-val>，设置 <var>needDefaults</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>needDefaults</var> 为 <emu-val>true</emu-val> 且 <var>defaults</var> 为 <emu-const>date</emu-const> 或 <emu-const>all</emu-const>，则</li><li>对 « <emu-val>"year"</emu-val>, <emu-val>"month"</emu-val>, <emu-val>"day"</emu-val>&nbsp;» 的每个属性名 <var>prop</var>，执行：</li><li>设置 <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]] 为 <emu-val>"numeric"</emu-val>。</li><li>如果 <var>needDefaults</var> 为 <emu-val>true</emu-val> 且 <var>defaults</var> 为 <emu-const>time</emu-const> 或 <emu-const>all</emu-const>，则</li><li>对 « <emu-val>"hour"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"second"</emu-val>&nbsp;» 的每个属性名 <var>prop</var>，执行：</li><li>设置 <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]] 为 <emu-val>"numeric"</emu-val>。</li><li>令 <var>formats</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[formats]]</var>.[[&lt;<var>resolvedCalendar</var>&gt;]]。</li><li>如果 <var>formatMatcher</var> 为 <emu-val>"basic"</emu-val>，则</li><li>令 <var>bestFormat</var> 为 <emu-xref aoid="BasicFormatMatcher" id="_ref_450"><a href="#sec-basicformatmatcher">BasicFormatMatcher</a></emu-xref>(<var>formatOptions</var>, <var>formats</var>)。</li><li>否则，</li><li>令 <var>bestFormat</var> 为 <emu-xref aoid="BestFitFormatMatcher" id="_ref_451"><a href="#sec-bestfitformatmatcher">BestFitFormatMatcher</a></emu-xref>(<var>formatOptions</var>, <var>formats</var>)。</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[DateTimeFormat]]</var> 为 <var>bestFormat</var>。</li><li>如果 <var>bestFormat</var> 有字段 <var class="field">[[hour]]</var>，则</li><li>设置 <var>dateTimeFormat</var>.<var class="field">[[HourCycle]]</var> 为 <var>hc</var>。</li><li>返回 <var>dateTimeFormat</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatoffsettimezoneidentifier" type="abstract operation" aoid="FormatOffsetTimeZoneIdentifier">
      <h1><span class="secnum">11.1.3</span> FormatOffsetTimeZoneIdentifier ( <var>offsetMinutes</var> )</h1>
      <p>The abstract operation FormatOffsetTimeZoneIdentifier takes argument <var>offsetMinutes</var> (一个整数) and returns 一个字符串. 
          将 UTC 偏移（以分钟为单位）格式化为 ±HH:MM 格式的 UTC 偏移字符串。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>offsetMinutes</var> ≥ 0，令 <var>sign</var> 为码元 0x002B（加号）；否则令 <var>sign</var> 为码元 0x002D（减号）。</li><li>令 <var>absoluteMinutes</var> 为 <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>offsetMinutes</var>)。</li><li>令 <var>hours</var> 为 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>absoluteMinutes</var> / 60)。</li><li>令 <var>minutes</var> 为 <var>absoluteMinutes</var> 模 60。</li><li>返回 <var>sign</var>、<emu-xref aoid="ToZeroPaddedDecimalString"><a href="https://tc39.es/ecma262/#sec-tozeropaddeddecimalstring">ToZeroPaddedDecimalString</a></emu-xref>(<var>hours</var>, 2)、码元 0x003A（冒号）、<emu-xref aoid="ToZeroPaddedDecimalString"><a href="https://tc39.es/ecma262/#sec-tozeropaddeddecimalstring">ToZeroPaddedDecimalString</a></emu-xref>(<var>minutes</var>, 2) 的字符串拼接。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-datetimeformat-constructor">
    <h1><span class="secnum">11.2</span> Intl.DateTimeFormat 构造函数的属性</h1>

    <p>Intl.DateTimeFormat 构造函数：</p>
    <ul>
      <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-intl.datetimeformat.prototype">
      <h1><span class="secnum">11.2.1</span> Intl.DateTimeFormat.prototype</h1>

      <p><code>Intl.DateTimeFormat.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-datetimeformat-prototype-object" id="_ref_452"><a href="#sec-properties-of-intl-datetimeformat-prototype-object">%Intl.DateTimeFormat.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.supportedlocalesof">
      <h1><span class="secnum">11.2.2</span> Intl.DateTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当调用 <code>supportedLocalesOf</code> 方法并传入参数 <var>locales</var> 和 <var>options</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_453"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_454"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_455"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat-internal-slots">
      <h1><span class="secnum">11.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值由实现定义，但需遵循 <emu-xref href="#sec-internal-slots" id="_ref_52"><a href="#sec-internal-slots">9.1</a></emu-xref> 中的约束。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « <emu-val>"ca"</emu-val>, <emu-val>"hc"</emu-val>, <emu-val>"nu"</emu-val> »。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        <a href="https://unicode.org/reports/tr35/#Key_Type_Definitions">Unicode 技术标准 #35 第1部分核心，第3.6.1节 键和值类型定义</a>
        描述了四个与日期和时间格式相关的区域扩展键：<emu-val>"ca"</emu-val> 表示日历，<emu-val>"hc"</emu-val> 表示小时周期，<emu-val>"nu"</emu-val> 表示数字系统（用于格式化数字），<emu-val>"tz"</emu-val> 表示时区。但 DateTimeFormat 要求时区通过构造函数
        options 对象中的 <emu-val>"timeZone"</emu-val> 属性指定。
      </div></emu-note>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « { <var class="field">[[Key]]</var>: <emu-val>"ca"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"calendar"</emu-val> }, { <var class="field">[[Key]]</var>: <emu-val>"nu"</emu-val>,
        <var class="field">[[Property]]</var>: <emu-val>"numberingSystem"</emu-val> }, { <var class="field">[[Key]]</var>: <emu-val>"hour12"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"hour12"</emu-val>, <var class="field">[[Type]]</var>: <emu-const>boolean</emu-const> }, {
        <var class="field">[[Key]]</var>: <emu-val>"hc"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"hourCycle"</emu-val>, <var class="field">[[Values]]</var>: « <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val> » } »。</p>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值由实现定义，但需遵循 <emu-xref href="#sec-internal-slots" id="_ref_53"><a href="#sec-internal-slots">9.1</a></emu-xref> 及以下附加约束，对于所有区域值 <var>locale</var>：</p>

      <ul>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[nu]]</var> 必须是一个列表，且不包含 <emu-val>"native"</emu-val>、<emu-val>"traditio"</emu-val> 或 <emu-val>"finance"</emu-val>。
        </li>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[hc]]</var> 必须为 « <emu-val>null</emu-val>, <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val> »。
        </li>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[hourCycle]]</var> 必须为 <emu-val>"h11"</emu-val>、<emu-val>"h12"</emu-val>、<emu-val>"h23"</emu-val> 或 <emu-val>"h24"</emu-val>。
        </li>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[hourCycle12]]</var> 必须为 <emu-val>"h11"</emu-val> 或 <emu-val>"h12"</emu-val>。
        </li>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[hourCycle24]]</var> 必须为 <emu-val>"h23"</emu-val> 或 <emu-val>"h24"</emu-val>。
        </li>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须有 <var class="field">[[formats]]</var> 字段。该字段的值必须是一个记录，包含每个日历值 <var>calendar</var> 的 [[&lt;<var>calendar</var>&gt;]]
          字段。每个 [[&lt;<var>calendar</var>&gt;]] 字段的值必须是 <emu-xref href="#datetimeformat-format-record" id="_ref_456"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref> 的列表。列表中的多个记录可以使用相同字段子集，只要对应值至少有一个不同。每个区域必须至少包含以下字段组合：
          <ul>
            <li>weekday, year, month, day, hour, minute, second, fractionalSecondDigits</li>
            <li>weekday, year, month, day, hour, minute, second</li>
            <li>weekday, year, month, day</li>
            <li>year, month, day</li>
            <li>year, month</li>
            <li>month, day</li>
            <li>month</li>
            <li>hour, minute, second, fractionalSecondDigits</li>
            <li>hour, minute, second</li>
            <li>hour, minute</li>
            <li>dayPeriod, hour, minute, second, fractionalSecondDigits</li>
            <li>dayPeriod, hour, minute, second</li>
            <li>dayPeriod, hour, minute</li>
            <li>dayPeriod, hour</li>
          </ul>
        </li>
        <li>
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须有 <var class="field">[[styles]]</var> 字段。该字段的值必须是一个记录，包含每个日历值 <var>calendar</var> 的 [[&lt;<var>calendar</var>&gt;]]
          字段，每个字段的值为 <emu-xref href="#datetimeformat-styles-record" id="_ref_457"><a href="#datetimeformat-styles-record">DateTime Styles Record</a></emu-xref>。
        </li>
      </ul>

      <emu-clause id="sec-datetimeformat-format-record">
        <h1><span class="secnum">11.2.3.1</span> DateTime Format Record</h1>

        <p>每个 <dfn id="datetimeformat-format-record" variants="DateTime Format Records" tabindex="-1">DateTime Format Record</dfn> 都具有
          <emu-xref href="#table-datetimeformat-format-record" id="_ref_54"><a href="#table-datetimeformat-format-record">Table 5</a></emu-xref> 中定义的字段。
        </p>
        <emu-table id="table-datetimeformat-format-record"><figure><figcaption>Table 5: <emu-xref href="#datetimeformat-format-record" id="_ref_458"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[weekday]]</var></td>
              <td><var class="field">[[Weekday]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_55"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{weekday}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[era]]</var></td>
              <td><var class="field">[[Era]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_56"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{era}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[year]]</var></td>
              <td><var class="field">[[Year]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_57"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{year}"</emu-val>、<emu-val>"{yearName}"</emu-val> 或 <emu-val>"{relatedYear}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[month]]</var></td>
              <td><var class="field">[[Month]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_58"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{month}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[day]]</var></td>
              <td><var class="field">[[Day]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_59"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{day}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[dayPeriod]]</var></td>
              <td><var class="field">[[DayPeriod]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_60"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{dayPeriod}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[hour]]</var></td>
              <td><var class="field">[[Hour]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_61"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{hour}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[minute]]</var></td>
              <td><var class="field">[[Minute]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_62"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{minute}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[second]]</var></td>
              <td><var class="field">[[Second]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_63"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{second}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[fractionalSecondDigits]]</var></td>
              <td><var class="field">[[FractionalSecondDigits]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_64"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列
              </td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{fractionalSecondDigits}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[timeZoneName]]</var></td>
              <td><var class="field">[[TimeZoneName]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_65"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[pattern]]</var> 包含 <emu-val>"{timeZoneName}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[pattern]]</var></td>
              <td>Pattern 字符串</td>
              <td><emu-not-ref>包含</emu-not-ref>每个日期和时间格式组件字段的子串，格式为 <emu-val>"{"</emu-val> + 字段名 + <emu-val>"}"</emu-val>。如果记录有 <var class="field">[[year]]</var> 字段，字符串可能包含
                <emu-val>"{yearName}"</emu-val> 和 <emu-val>"{relatedYear}"</emu-val>。</td>
            </tr>
            <tr>
              <td><var class="field">[[pattern12]]</var></td>
              <td>Pattern 字符串</td>
              <td>可选字段。如果 <var class="field">[[hour]]</var> 字段存在则存在。除 <var class="field">[[pattern]]</var> 字段的子串外，还包含至少一个 <emu-val>"{ampm}"</emu-val> 或 <emu-val>"{dayPeriod}"</emu-val> 子串。</td>
            </tr>
            <tr>
              <td><var class="field">[[rangePatterns]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-record" id="_ref_459"><a href="#datetimeformat-range-pattern-record">DateTime Range Pattern Record</a></emu-xref></td>
              <td>该字段中的<emu-xref href="#sec-pattern-string-types" id="_ref_460"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>与 <var class="field">[[pattern]]</var> 类似。</td>
            </tr>
            <tr>
              <td><var class="field">[[rangePatterns12]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-record" id="_ref_461"><a href="#datetimeformat-range-pattern-record">DateTime Range Pattern Record</a></emu-xref></td>
              <td>可选字段。如果 <var class="field">[[hour]]</var> 字段存在则存在。该字段中的<emu-xref href="#sec-pattern-string-types" id="_ref_462"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>与 <var class="field">[[pattern12]]</var> 类似。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-range-pattern-record">
        <h1><span class="secnum">11.2.3.2</span> DateTime Range Pattern Record</h1>

        <p>每个 <dfn id="datetimeformat-range-pattern-record" tabindex="-1">DateTime Range Pattern Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-range-pattern-record" id="_ref_66"><a href="#table-datetimeformat-range-pattern-record">Table 6</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-range-pattern-record"><figure><figcaption>Table 6: <emu-xref href="#datetimeformat-range-pattern-record" id="_ref_463"><a href="#datetimeformat-range-pattern-record">DateTime Range Pattern Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[Default]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_464"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>包含默认范围模式，当没有更具体的范围模式时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Era]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_465"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 era 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Year]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_466"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 year 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Month]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_467"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 month 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Day]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_468"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 day 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[AmPm]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_469"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 ante 或 post meridiem 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[DayPeriod]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_470"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 day period 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Hour]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_471"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 hour 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Minute]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_472"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 minute 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[Second]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_473"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 second 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[FractionalSecondDigits]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_474"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></td>
              <td>可选字段。当起止日期最大不同的日历元素为 fractional seconds 时使用。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-range-pattern-format-record">
        <h1><span class="secnum">11.2.3.3</span> DateTime Range Pattern Format Record</h1>

        <p>每个 <dfn id="datetimeformat-range-pattern-format-record" tabindex="-1">DateTime Range Pattern Format Record</dfn> 都具有
          <emu-xref href="#table-datetimeformat-range-pattern-format-record" id="_ref_67"><a href="#table-datetimeformat-range-pattern-format-record">Table 7</a></emu-xref> 中定义的字段。
        </p>
        <emu-table id="table-datetimeformat-range-pattern-format-record"><figure><figcaption>Table 7: <emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_475"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[weekday]]</var></td>
              <td><var class="field">[[Weekday]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_68"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_476"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{weekday}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[era]]</var></td>
              <td><var class="field">[[Era]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_69"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_477"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{era}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[year]]</var></td>
              <td><var class="field">[[Year]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_70"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_478"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{year}"</emu-val>、<emu-val>"{yearName}"</emu-val> 或 <emu-val>"{relatedYear}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[month]]</var></td>
              <td><var class="field">[[Month]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_71"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_479"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{month}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[day]]</var></td>
              <td><var class="field">[[Day]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_72"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_480"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{day}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[dayPeriod]]</var></td>
              <td><var class="field">[[DayPeriod]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_73"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_481"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{dayPeriod}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[hour]]</var></td>
              <td><var class="field">[[Hour]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_74"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_482"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{hour}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[minute]]</var></td>
              <td><var class="field">[[Minute]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_75"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_483"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{minute}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[second]]</var></td>
              <td><var class="field">[[Second]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_76"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_484"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{second}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[fractionalSecondDigits]]</var></td>
              <td><var class="field">[[FractionalSecondDigits]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_77"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列
              </td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_485"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{fractionalSecondDigits}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[timeZoneName]]</var></td>
              <td><var class="field">[[TimeZoneName]]</var>，参见 <emu-xref href="#table-datetimeformat-components" id="_ref_78"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Values 列</td>
              <td>可选字段。如果 <var class="field">[[PatternParts]]</var> 中的<emu-xref href="#sec-pattern-string-types" id="_ref_486"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>包含 <emu-val>"{timeZoneName}"</emu-val> 子串则存在。</td>
            </tr>
            <tr>
              <td><var class="field">[[PatternParts]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-part-record" id="_ref_487"><a href="#datetimeformat-range-pattern-part-record">DateTime Range Pattern Part Record</a></emu-xref> 的列表</td>
              <td>每个记录表示范围模式的一部分。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-range-pattern-part-record">
        <h1><span class="secnum">11.2.3.4</span> DateTime Range Pattern Part Record</h1>

        <p>每个 <dfn id="datetimeformat-range-pattern-part-record" variants="DateTime Range Pattern Part Records" tabindex="-1">DateTime
            Range Pattern Part Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-range-pattern-part-record" id="_ref_79"><a href="#table-datetimeformat-range-pattern-part-record">Table 8</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-range-pattern-part-record"><figure><figcaption>Table 8: <emu-xref href="#datetimeformat-range-pattern-part-record" id="_ref_488"><a href="#datetimeformat-range-pattern-part-record">DateTime Range Pattern Part Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[Source]]</var></td>
              <td><emu-val>"shared"</emu-val>、<emu-val>"startRange"</emu-val> 或 <emu-val>"endRange"</emu-val> </td>
              <td>指示范围的哪个日期应使用 <var class="field">[[Pattern]]</var> 字段的值进行格式化。</td>
            </tr>
            <tr>
              <td><var class="field">[[Pattern]]</var></td>
              <td>Pattern 字符串</td>
              <td>与常规日期<emu-xref href="#sec-pattern-string-types" id="_ref_489"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>格式相同的字符串。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-styles-record">
        <h1><span class="secnum">11.2.3.5</span> DateTime Styles Record</h1>

        <p>每个 <dfn id="datetimeformat-styles-record" tabindex="-1">DateTime Styles Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-styles-record" id="_ref_80"><a href="#table-datetimeformat-styles-record">Table 9</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-styles-record"><figure><figcaption>Table 9: <emu-xref href="#datetimeformat-styles-record" id="_ref_490"><a href="#datetimeformat-styles-record">DateTime Styles Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[Date]]</var></td>
              <td><emu-xref href="#datetimeformat-style-record" id="_ref_491"><a href="#datetimeformat-style-record">DateTime Style Record</a></emu-xref></td>
            </tr>
            <tr>
              <td><var class="field">[[Time]]</var></td>
              <td><emu-xref href="#datetimeformat-style-record" id="_ref_492"><a href="#datetimeformat-style-record">DateTime Style Record</a></emu-xref></td>
            </tr>
            <tr>
              <td><var class="field">[[Connector]]</var></td>
              <td><emu-xref href="#datetimeformat-connector-record" id="_ref_493"><a href="#datetimeformat-connector-record">DateTime Connector Record</a></emu-xref></td>
            </tr>
            <tr>
              <td><var class="field">[[DateTimeRangeFormat]]</var></td>
              <td><emu-xref href="#datetimeformat-date-range-record" id="_ref_494"><a href="#datetimeformat-date-range-record">DateTime Date Range Record</a></emu-xref></td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-style-record">
        <h1><span class="secnum">11.2.3.6</span> DateTime Style Record</h1>

        <p>每个 <dfn id="datetimeformat-style-record" tabindex="-1">DateTime Style Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-style-record" id="_ref_81"><a href="#table-datetimeformat-style-record">Table 10</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-style-record"><figure><figcaption>Table 10: <emu-xref href="#datetimeformat-style-record" id="_ref_495"><a href="#datetimeformat-style-record">DateTime Style Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[full]]</var></td>
              <td><emu-xref href="#datetimeformat-format-record" id="_ref_496"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref></td>
              <td><emu-val>"full"</emu-val> 样式的格式记录。</td>
            </tr>
            <tr>
              <td><var class="field">[[long]]</var></td>
              <td><emu-xref href="#datetimeformat-format-record" id="_ref_497"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref></td>
              <td><emu-val>"long"</emu-val> 样式的格式记录。</td>
            </tr>
            <tr>
              <td><var class="field">[[medium]]</var></td>
              <td><emu-xref href="#datetimeformat-format-record" id="_ref_498"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref></td>
              <td><emu-val>"medium"</emu-val> 样式的格式记录。</td>
            </tr>
            <tr>
              <td><var class="field">[[short]]</var></td>
              <td><emu-xref href="#datetimeformat-format-record" id="_ref_499"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref></td>
              <td><emu-val>"short"</emu-val> 样式的格式记录。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-connector-record">
        <h1><span class="secnum">11.2.3.7</span> DateTime Connector Record</h1>

        <p>每个 <dfn id="datetimeformat-connector-record" tabindex="-1">DateTime Connector Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-connector-record" id="_ref_82"><a href="#table-datetimeformat-connector-record">Table 11</a></emu-xref> 中定义的字段。所有连接器<emu-xref href="#sec-pattern-string-types" id="_ref_500"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>必须包含 <emu-val>"{0}"</emu-val> 和 <emu-val>"{1}"</emu-val>。</p>
        <emu-table id="table-datetimeformat-connector-record"><figure><figcaption>Table 11: <emu-xref href="#datetimeformat-connector-record" id="_ref_501"><a href="#datetimeformat-connector-record">DateTime Connector Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[full]]</var></td>
              <td>Pattern 字符串</td>
              <td>日期样式为 <emu-val>"full"</emu-val> 时的连接器模式。</td>
            </tr>
            <tr>
              <td><var class="field">[[long]]</var></td>
              <td>Pattern 字符串</td>
              <td>日期样式为 <emu-val>"long"</emu-val> 时的连接器模式。</td>
            </tr>
            <tr>
              <td><var class="field">[[medium]]</var></td>
              <td>Pattern 字符串</td>
              <td>日期样式为 <emu-val>"medium"</emu-val> 时的连接器模式。</td>
            </tr>
            <tr>
              <td><var class="field">[[short]]</var></td>
              <td>Pattern 字符串</td>
              <td>日期样式为 <emu-val>"short"</emu-val> 时的连接器模式。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-date-range-record">
        <h1><span class="secnum">11.2.3.8</span> DateTime Date Range Record</h1>

        <p>每个 <dfn id="datetimeformat-date-range-record" tabindex="-1">DateTime Date Range Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-date-range-record" id="_ref_83"><a href="#table-datetimeformat-date-range-record">Table 12</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-date-range-record"><figure><figcaption>Table 12: <emu-xref href="#datetimeformat-date-range-record" id="_ref_502"><a href="#datetimeformat-date-range-record">DateTime Date Range Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[full]]</var></td>
              <td><emu-xref href="#datetimeformat-time-range-record" id="_ref_503"><a href="#datetimeformat-time-range-record">DateTime Time Range Record</a></emu-xref></td>
              <td>日期样式为 <emu-val>"full"</emu-val> 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[long]]</var></td>
              <td><emu-xref href="#datetimeformat-time-range-record" id="_ref_504"><a href="#datetimeformat-time-range-record">DateTime Time Range Record</a></emu-xref></td>
              <td>日期样式为 <emu-val>"long"</emu-val> 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[medium]]</var></td>
              <td><emu-xref href="#datetimeformat-time-range-record" id="_ref_505"><a href="#datetimeformat-time-range-record">DateTime Time Range Record</a></emu-xref></td>
              <td>日期样式为 <emu-val>"medium"</emu-val> 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[short]]</var></td>
              <td><emu-xref href="#datetimeformat-time-range-record" id="_ref_506"><a href="#datetimeformat-time-range-record">DateTime Time Range Record</a></emu-xref></td>
              <td>日期样式为 <emu-val>"short"</emu-val> 时使用。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-time-range-record">
        <h1><span class="secnum">11.2.3.9</span> DateTime Time Range Record</h1>

        <p>每个 <dfn id="datetimeformat-time-range-record" tabindex="-1">DateTime Time Range Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-time-range-record" id="_ref_84"><a href="#table-datetimeformat-time-range-record">Table 13</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-time-range-record"><figure><figcaption>Table 13: <emu-xref href="#datetimeformat-time-range-record" id="_ref_507"><a href="#datetimeformat-time-range-record">DateTime Time Range Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[full]]</var></td>
              <td><emu-xref href="#datetimeformat-style-range-record" id="_ref_508"><a href="#datetimeformat-style-range-record">DateTime Style Range Record</a></emu-xref></td>
              <td>时间样式为 <emu-val>"full"</emu-val> 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[long]]</var></td>
              <td><emu-xref href="#datetimeformat-style-range-record" id="_ref_509"><a href="#datetimeformat-style-range-record">DateTime Style Range Record</a></emu-xref></td>
              <td>时间样式为 <emu-val>"long"</emu-val> 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[medium]]</var></td>
              <td><emu-xref href="#datetimeformat-style-range-record" id="_ref_510"><a href="#datetimeformat-style-range-record">DateTime Style Range Record</a></emu-xref></td>
              <td>时间样式为 <emu-val>"medium"</emu-val> 时使用。</td>
            </tr>
            <tr>
              <td><var class="field">[[short]]</var></td>
              <td><emu-xref href="#datetimeformat-style-range-record" id="_ref_511"><a href="#datetimeformat-style-range-record">DateTime Style Range Record</a></emu-xref></td>
              <td>时间样式为 <emu-val>"short"</emu-val> 时使用。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-datetimeformat-style-range-record">
        <h1><span class="secnum">11.2.3.10</span> DateTime Style Range Record</h1>

        <p>每个 <dfn id="datetimeformat-style-range-record" tabindex="-1">DateTime Style Range Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-style-range-record" id="_ref_85"><a href="#table-datetimeformat-style-range-record">Table 14</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-datetimeformat-style-range-record"><figure><figcaption>Table 14: <emu-xref href="#datetimeformat-style-range-record" id="_ref_512"><a href="#datetimeformat-style-range-record">DateTime Style Range Record</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
                <th>描述</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[rangePatterns]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-record" id="_ref_513"><a href="#datetimeformat-range-pattern-record">DateTime Range Pattern Record</a></emu-xref></td>
              <td>用于组合日期和时间样式的范围模式。</td>
            </tr>
            <tr>
              <td><var class="field">[[rangePatterns12]]</var></td>
              <td><emu-xref href="#datetimeformat-range-pattern-record" id="_ref_514"><a href="#datetimeformat-range-pattern-record">DateTime Range Pattern Record</a></emu-xref></td>
              <td>可选字段。用于12小时格式组合日期和时间样式的范围模式。</td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        例如，实现可能在其英文区域数据中包含如下记录：
        <ul>
          <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
          <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
          <li><var class="field">[[pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val> </li>
          <li><var class="field">[[pattern12]]</var>: <emu-val>"{hour}:{minute} {ampm}"</emu-val> </li>
          <li><var class="field">[[rangePatterns]]</var>:
            <ul>
              <li><var class="field">[[Hour]]</var>:
                <ul>
                  <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[PatternParts]]</var>:
                    <ul>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" – "</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><var class="field">[[Minute]]</var>:
                <ul>
                  <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[PatternParts]]</var>:
                    <ul>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" – "</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><var class="field">[[Default]]</var>:
                <ul>
                  <li><var class="field">[[year]]</var>: <emu-val>"2-digit"</emu-val> </li>
                  <li><var class="field">[[month]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[day]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[PatternParts]]</var>:
                    <ul>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{day}/{month}/{year}, {hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" – "</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{day}/{month}/{year}, {hour}:{minute}"</emu-val>}</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li><var class="field">[[rangePatterns12]]</var>:
            <ul>
              <li><var class="field">[[Hour]]</var>:
                <ul>
                  <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[PatternParts]]</var>:
                    <ul>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" – "</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" {ampm}"</emu-val>}</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><var class="field">[[Minute]]</var>:
                <ul>
                  <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[PatternParts]]</var>:
                    <ul>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" – "</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" {ampm}"</emu-val>}</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><var class="field">[[Default]]</var>:
                <ul>
                  <li><var class="field">[[year]]</var>: <emu-val>"2-digit"</emu-val> </li>
                  <li><var class="field">[[month]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[day]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[hour]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[minute]]</var>: <emu-val>"numeric"</emu-val> </li>
                  <li><var class="field">[[PatternParts]]</var>:
                    <ul>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{day}/{month}/{year}, {hour}:{minute} {ampm}"</emu-val>}
                      </li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>" – "</emu-val>}</li>
                      <li>{<var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>, <var class="field">[[Pattern]]</var>: <emu-val>"{day}/{month}/{year}, {hour}:{minute} {ampm}"</emu-val>}</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div></emu-note>

      <emu-note><span class="note">Note 3</span><div class="note-contents">
        推荐实现使用由 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 提供的 Common Locale Data Repository
        区域数据。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-datetimeformat-prototype-object">
    <h1><span class="secnum">11.3</span> Intl.DateTimeFormat 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.DateTimeFormat 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.DateTimeFormat.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.DateTimeFormat 实例，不具有 <var class="field">[[InitializedDateTimeFormat]]</var> 内部槽，也没有 Intl.DateTimeFormat 实例对象的其他内部槽。</li>
      <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-intl.datetimeformat.prototype.constructor">
      <h1><span class="secnum">11.3.1</span> Intl.DateTimeFormat.prototype.constructor</h1>

      <p><code>Intl.DateTimeFormat.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_515"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype.resolvedOptions">
      <h1><span class="secnum">11.3.2</span> Intl.DateTimeFormat.prototype.resolvedOptions ( )</h1>

      <p>此函数用于访问对象初始化时计算的区域和选项。</p>

      <emu-alg><ol><li>令 <var>dtf</var> 为 <emu-val>this</emu-val> 值。</li><li>如果实现支持 <emu-xref href="#legacy-constructor" id="_ref_86"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref> 的规范可选构造器模式，则</li><li>设置 <var>dtf</var> 为 ?&nbsp;<emu-xref aoid="UnwrapDateTimeFormat" id="_ref_516"><a href="#sec-unwrapdatetimeformat">UnwrapDateTimeFormat</a></emu-xref>(<var>dtf</var>)。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, <var class="field">[[InitializedDateTimeFormat]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-datetimeformat-resolvedoptions-properties" id="_ref_87"><a href="#table-datetimeformat-resolvedoptions-properties">Table 15</a></emu-xref> 的每一行（除表头外，按表顺序），执行：</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>如果当前行有 Internal Slot 值，则</li><li>令 <var>v</var> 为 <var>dtf</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>否则，</li><li>令 <var>format</var> 为 <var>dtf</var>.<var class="field">[[DateTimeFormat]]</var>。</li><li>如果 <var>format</var> 有字段 [[&lt;<var>p</var>&gt;]] 且 <var>dtf</var>.<var class="field">[[DateStyle]]</var> 为 <emu-val>undefined</emu-val> 且 <var>dtf</var>.<var class="field">[[TimeStyle]]</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>v</var> 为 <var>format</var>.[[&lt;<var>p</var>&gt;]]。</li><li>否则，</li><li>令 <var>v</var> 为 <emu-val>undefined</emu-val>。</li><li>如果 <var>v</var> 不为 <emu-val>undefined</emu-val>，则</li><li>如果当前行有 Conversion 值，则</li><li>令 <var>conversion</var> 为当前行的 Conversion 值。</li><li>如果 <var>conversion</var> 为 <emu-const>hour12</emu-const>，则</li><li>如果 <var>v</var> 为 <emu-val>"h11"</emu-val> 或 <emu-val>"h12"</emu-val>，设置 <var>v</var> 为 <emu-val>true</emu-val>。否则，设置 <var>v</var> 为 <emu-val>false</emu-val>。</li><li>否则，</li><li>断言：<var>conversion</var> 为 <emu-const>number</emu-const>。</li><li>设置 <var>v</var> 为 <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>v</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-datetimeformat-resolvedoptions-properties"><figure><figcaption>Table 15: DateTimeFormat 实例的 resolvedOptions 属性</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>属性</th>
              <th>转换</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Calendar]]</var></td>
            <td><emu-val>"calendar"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[NumberingSystem]]</var></td>
            <td><emu-val>"numberingSystem"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[TimeZone]]</var></td>
            <td><emu-val>"timeZone"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[HourCycle]]</var></td>
            <td><emu-val>"hourCycle"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[HourCycle]]</var></td>
            <td><emu-val>"hour12"</emu-val></td>
            <td><emu-const>hour12</emu-const></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"weekday"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"era"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"year"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"month"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"day"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"dayPeriod"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"hour"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"minute"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"second"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"fractionalSecondDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"timeZoneName"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[DateStyle]]</var></td>
            <td><emu-val>"dateStyle"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[TimeStyle]]</var></td>
            <td><emu-val>"timeStyle"</emu-val></td>
            <td></td>
          </tr>
        </tbody></table>
      </figure></emu-table>

      <p>出于网页兼容性考虑，如果设置了 <emu-val>"hourCycle"</emu-val> 属性，则当 <emu-val>"hourCycle"</emu-val> 为 <emu-val>"h11"</emu-val> 或 <emu-val>"h12"</emu-val> 时，<emu-val>"hour12"</emu-val> 属性应设置为 <emu-val>true</emu-val>；当
        <emu-val>"hourCycle"</emu-val> 为 <emu-val>"h23"</emu-val> 或 <emu-val>"h24"</emu-val> 时，<emu-val>"hour12"</emu-val> 属性应设置为 <emu-val>false</emu-val>。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        在本版本 API 中，如果未在 Intl.DateTimeFormat 构造函数的 options 对象中提供 <emu-val>"timeZone"</emu-val> 属性，则 <emu-val>"timeZone"</emu-val> 属性将为宿主环境的时区标识符。第一版在此情况下将
        <emu-val>"timeZone"</emu-val> 属性设为 <emu-val>undefined</emu-val>。
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        为兼容第五版之前的版本，<emu-val>"hour12"</emu-val> 属性会与 <emu-val>"hourCycle"</emu-val> 属性一起设置。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype.format">
      <h1><span class="secnum">11.3.3</span> get Intl.DateTimeFormat.prototype.format</h1>

      <p>Intl.DateTimeFormat.prototype.format 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>dtf</var> 为 <emu-val>this</emu-val> 值。</li><li>如果实现支持 <emu-xref href="#legacy-constructor" id="_ref_88"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref> 的规范可选构造器模式，则</li><li>设置 <var>dtf</var> 为 ?&nbsp;<emu-xref aoid="UnwrapDateTimeFormat" id="_ref_517"><a href="#sec-unwrapdatetimeformat">UnwrapDateTimeFormat</a></emu-xref>(<var>dtf</var>)。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, <var class="field">[[InitializedDateTimeFormat]]</var>)。</li><li>如果 <var>dtf</var>.<var class="field">[[BoundFormat]]</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>F</var> 为 DateTime Format Functions (<emu-xref href="#sec-datetime-format-functions" id="_ref_89"><a href="#sec-datetime-format-functions">11.5.4</a></emu-xref>) 中定义的新内置函数对象。</li><li>设置 <var>F</var>.<var class="field">[[DateTimeFormat]]</var> 为 <var>dtf</var>。</li><li>设置 <var>dtf</var>.<var class="field">[[BoundFormat]]</var> 为 <var>F</var>。</li><li>返回 <var>dtf</var>.<var class="field">[[BoundFormat]]</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        返回的函数绑定到 <var>dtf</var>，因此可以直接传递给 <code>Array.prototype.map</code> 或其他函数。
        这是历史遗留的惯例，新特性已不再遵循，但为兼容现有程序而保留。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype.formatRange">
      <h1><span class="secnum">11.3.4</span> Intl.DateTimeFormat.prototype.formatRange ( <var>startDate</var>, <var>endDate</var> )</h1>

      <p>当调用 <code>formatRange</code> 方法并传入参数 <var>startDate</var> 和 <var>endDate</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>dtf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, <var class="field">[[InitializedDateTimeFormat]]</var>)。</li><li>如果 <var>startDate</var> 或 <var>endDate</var> 为 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>startDate</var>)。</li><li>令 <var>y</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>endDate</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatDateTimeRange" id="_ref_518"><a href="#sec-formatdatetimerange">FormatDateTimeRange</a></emu-xref>(<var>dtf</var>, <var>x</var>, <var>y</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DateTimeFormat.prototype.formatRangeToParts">
      <h1><span class="secnum">11.3.5</span> Intl.DateTimeFormat.prototype.formatRangeToParts ( <var>startDate</var>, <var>endDate</var> )</h1>

      <p>当调用 <code>formatRangeToParts</code> 方法并传入参数 <var>startDate</var> 和 <var>endDate</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>dtf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, <var class="field">[[InitializedDateTimeFormat]]</var>)。</li><li>如果 <var>startDate</var> 或 <var>endDate</var> 为 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>startDate</var>)。</li><li>令 <var>y</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>endDate</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatDateTimeRangeToParts" id="_ref_519"><a href="#sec-formatdatetimerangetoparts">FormatDateTimeRangeToParts</a></emu-xref>(<var>dtf</var>, <var>x</var>, <var>y</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DateTimeFormat.prototype.formatToParts">
      <h1><span class="secnum">11.3.6</span> Intl.DateTimeFormat.prototype.formatToParts ( <var>date</var> )</h1>

      <p>当调用 <code>formatToParts</code> 方法并传入参数 <var>date</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>dtf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, <var class="field">[[InitializedDateTimeFormat]]</var>)。</li><li>如果 <var>date</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>x</var> 为 !&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(%Date.now%, <emu-val>undefined</emu-val>)。</li><li>否则，</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>date</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatDateTimeToParts" id="_ref_520"><a href="#sec-formatdatetimetoparts">FormatDateTimeToParts</a></emu-xref>(<var>dtf</var>, <var>x</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype-%symbol.tostringtag%" oldids="sec-intl.datetimeformat.prototype-@@tostringtag"><span id="sec-intl.datetimeformat.prototype-@@tostringtag"></span>
      <h1><span class="secnum">11.3.7</span> Intl.DateTimeFormat.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.DateTimeFormat"</emu-val>。</p>

      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-datetimeformat-instances">
    <h1><span class="secnum">11.4</span> Intl.DateTimeFormat 实例的属性</h1>

    <p>Intl.DateTimeFormat 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-intl-datetimeformat-prototype-object" id="_ref_521"><a href="#sec-properties-of-intl-datetimeformat-prototype-object">%Intl.DateTimeFormat.prototype%</a></emu-xref> 的属性。</p>

    <p>Intl.DateTimeFormat 实例具有 <var class="field">[[InitializedDateTimeFormat]]</var> 内部槽。</p>

    <p>Intl.DateTimeFormat 实例还具有多个内部槽，这些槽由 <emu-xref href="#sec-intl-datetimeformat-constructor" title="" id="_ref_90"><a href="#sec-intl-datetimeformat-constructor">Intl.DateTimeFormat 构造函数</a></emu-xref> 计算：
    </p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于格式化的区域<emu-xref href="#sec-language-tags" id="_ref_522"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[Calendar]]</var> 是一个字符串值，表示用于格式化的 <a href="https://unicode.org/reports/tr35/#UnicodeCalendarIdentifier">Unicode
          日历标识符</a>。</li>
      <li><var class="field">[[NumberingSystem]]</var> 是一个字符串值，表示用于格式化的 <a href="https://unicode.org/reports/tr35/#UnicodeNumberSystemIdentifier">Unicode 数字系统标识符</a>。</li>
      <li><var class="field">[[TimeZone]]</var> 是一个用于格式化的字符串值，可以是可用的命名时区标识符，也可以是偏移时区标识符。</li>
      <li><var class="field">[[HourCycle]]</var> 是一个字符串值，指示应使用 12 小时制（<emu-val>"h11"</emu-val>、<emu-val>"h12"</emu-val>）还是 24 小时制（<emu-val>"h23"</emu-val>、<emu-val>"h24"</emu-val>）。<emu-val>"h11"</emu-val> 和 <emu-val>"h23"</emu-val> 从 0 开始，分别到 11
        和 23；<emu-val>"h12"</emu-val> 和 <emu-val>"h24"</emu-val> 从 1 开始，分别到 12 和 24。仅当 <var class="field">[[DateTimeFormat]]</var> 有 <var class="field">[[hour]]</var> 字段时才使用 <var class="field">[[HourCycle]]</var>。</li>
      <li><var class="field">[[DateStyle]]</var>、<var class="field">[[TimeStyle]]</var> 各自为 <emu-val>undefined</emu-val> 或字符串值，取值为 <emu-val>"full"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"medium"</emu-val> 或 <emu-val>"short"</emu-val>。</li>
      <li><var class="field">[[DateTimeFormat]]</var> 是一个 <emu-xref href="#datetimeformat-format-record" id="_ref_523"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref>。</li>
    </ul>

    <p>最后，Intl.DateTimeFormat 实例具有 <var class="field">[[BoundFormat]]</var> 内部槽，用于缓存格式访问器返回的函数（<emu-xref href="#sec-intl.datetimeformat.prototype.format" id="_ref_91"><a href="#sec-intl.datetimeformat.prototype.format">11.3.3</a></emu-xref>）。</p>
  </emu-clause>

  <emu-clause id="sec-datetimeformat-abstracts">
    <h1><span class="secnum">11.5</span> DateTimeFormat 对象的抽象操作</h1>

    <p>多个 DateTimeFormat 算法会使用下表中的值，该表提供了日期和时间格式组件的内部槽、属性名和允许值：</p>

    <emu-table id="table-datetimeformat-components"><figure><figcaption>Table 16: 日期和时间格式的组件</figcaption>
      
      <table class="real-table">
        <thead>
          <tr>
            <th>字段名</th>
            <th>属性</th>
            <th>值</th>
          </tr>
        </thead>
        <tbody><tr>
          <td><var class="field">[[Weekday]]</var></td>
          <td><emu-val>"weekday"</emu-val></td>
          <td><emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val>、<emu-val>"long"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Era]]</var></td>
          <td><emu-val>"era"</emu-val></td>
          <td><emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val>、<emu-val>"long"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Year]]</var></td>
          <td><emu-val>"year"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Month]]</var></td>
          <td><emu-val>"month"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val>、<emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val>、<emu-val>"long"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Day]]</var></td>
          <td><emu-val>"day"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[DayPeriod]]</var></td>
          <td><emu-val>"dayPeriod"</emu-val></td>
          <td><emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val>、<emu-val>"long"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Hour]]</var></td>
          <td><emu-val>"hour"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Minute]]</var></td>
          <td><emu-val>"minute"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[Second]]</var></td>
          <td><emu-val>"second"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val> </td>
        </tr>
        <tr>
          <td><var class="field">[[FractionalSecondDigits]]</var></td>
          <td><emu-val>"fractionalSecondDigits"</emu-val></td>
          <td>1、2、3</td>
        </tr>
        <tr>
          <td><var class="field">[[TimeZoneName]]</var></td>
          <td><emu-val>"timeZoneName"</emu-val></td>
          <td><emu-val>"short"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"shortOffset"</emu-val>、<emu-val>"longOffset"</emu-val>、<emu-val>"shortGeneric"</emu-val>、<emu-val>"longGeneric"</emu-val> </td>
        </tr>
      </tbody></table>
    </figure></emu-table>

    <emu-clause id="sec-date-time-style-format" type="abstract operation" aoid="DateTimeStyleFormat">
      <h1><span class="secnum">11.5.1</span> DateTimeStyleFormat ( <var>dateStyle</var>, <var>timeStyle</var>, <var>styles</var> )</h1>
      <p>The abstract operation DateTimeStyleFormat takes arguments <var>dateStyle</var> (<emu-val>"full"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"medium"</emu-val>、<emu-val>"short"</emu-val> 或 <emu-val>undefined</emu-val>，), <var>timeStyle</var> (<emu-val>"full"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"medium"</emu-val>、<emu-val>"short"</emu-val> 或 <emu-val>undefined</emu-val>，), and <var>styles</var> (一个 <emu-xref href="#datetimeformat-styles-record" id="_ref_524"><a href="#datetimeformat-styles-record">DateTime Styles Record</a></emu-xref>，) and returns 一个 <emu-xref href="#datetimeformat-format-record" id="_ref_525"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>断言：<var>dateStyle</var> 不为 <emu-val>undefined</emu-val> 或 <var>timeStyle</var> 不为 <emu-val>undefined</emu-val>。</li><li>如果 <var>timeStyle</var> 不为 <emu-val>undefined</emu-val>，则</li><li>断言：<var>timeStyle</var> 是 <emu-val>"full"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"medium"</emu-val> 或 <emu-val>"short"</emu-val> 之一。</li><li>令 <var>timeFormat</var> 为 <var>styles</var>.<var class="field">[[Time]]</var>.[[&lt;<var>timeStyle</var>&gt;]]。</li><li>如果 <var>dateStyle</var> 不为 <emu-val>undefined</emu-val>，则</li><li>断言：<var>dateStyle</var> 是 <emu-val>"full"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"medium"</emu-val> 或 <emu-val>"short"</emu-val> 之一。</li><li>令 <var>dateFormat</var> 为 <var>styles</var>.<var class="field">[[Date]]</var>.[[&lt;<var>dateStyle</var>&gt;]]。</li><li>如果 <var>dateStyle</var> 和 <var>timeStyle</var> 都不为 <emu-val>undefined</emu-val>，则</li><li>令 <var>format</var> 为一个新的 <emu-xref href="#datetimeformat-format-record" id="_ref_526"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref>。</li><li>将 <var>dateFormat</var> 的所有字段（除 <var class="field">[[pattern]]</var> 和 <var class="field">[[rangePatterns]]</var>）添加到 <var>format</var>。</li><li>将 <var>timeFormat</var> 的所有字段（除 <var class="field">[[pattern]]</var>、<var class="field">[[rangePatterns]]</var>、<var class="field">[[pattern12]]</var> 和 <var class="field">[[rangePatterns12]]</var>，如有）添加到 <var>format</var>。</li><li>令 <var>connector</var> 为 <var>styles</var>.<var class="field">[[Connector]]</var>.[[&lt;<var>dateStyle</var>&gt;]]。</li><li>令 <var>pattern</var> 为 <var>connector</var> 字符串，将 <emu-val>"{0}"</emu-val> 替换为 <var>timeFormat</var>.<var class="field">[[pattern]]</var>，<emu-val>"{1}"</emu-val> 替换为 <var>dateFormat</var>.<var class="field">[[pattern]]</var>。</li><li>设置 <var>format</var>.<var class="field">[[pattern]]</var> 为 <var>pattern</var>。</li><li>如果 <var>timeFormat</var> 有 <var class="field">[[pattern12]]</var> 字段，则</li><li>令 <var>pattern12</var> 为 <var>connector</var> 字符串，将 <emu-val>"{0}"</emu-val> 替换为 <var>timeFormat</var>.<var class="field">[[pattern12]]</var>，<emu-val>"{1}"</emu-val> 替换为
        <var>dateFormat</var>.<var class="field">[[pattern]]</var>。</li><li>设置 <var>format</var>.<var class="field">[[pattern12]]</var> 为 <var>pattern12</var>。</li><li>令 <var>dateTimeRangeFormat</var> 为 <var>styles</var>.<var class="field">[[DateTimeRangeFormat]]</var>.[[&lt;<var>dateStyle</var>&gt;]].[[&lt;<var>timeStyle</var>&gt;]]。</li><li>设置 <var>format</var>.<var class="field">[[rangePatterns]]</var> 为 <var>dateTimeRangeFormat</var>.<var class="field">[[rangePatterns]]</var>。</li><li>如果 <var>dateTimeRangeFormat</var> 有 <var class="field">[[rangePatterns12]]</var> 字段，则</li><li>设置 <var>format</var>.<var class="field">[[rangePatterns12]]</var> 为 <var>dateTimeRangeFormat</var>.<var class="field">[[rangePatterns12]]</var>。</li><li>返回 <var>format</var>。</li><li>如果 <var>timeStyle</var> 不为 <emu-val>undefined</emu-val>，则</li><li>返回 <var>timeFormat</var>。</li><li>断言：<var>dateStyle</var> 不为 <emu-val>undefined</emu-val>。</li><li>返回 <var>dateFormat</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-basicformatmatcher" type="abstract operation" aoid="BasicFormatMatcher">
      <h1><span class="secnum">11.5.2</span> BasicFormatMatcher ( <var>options</var>, <var>formats</var> )</h1>
      <p>The abstract operation BasicFormatMatcher takes arguments <var>options</var> (一个记录，) and <var>formats</var> (<emu-xref href="#datetimeformat-format-record" id="_ref_527"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref> 的列表，) and returns 一个 <emu-xref href="#datetimeformat-format-record" id="_ref_528"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>removalPenalty</var> 为 120。</li><li>令 <var>additionPenalty</var> 为 20。</li><li>令 <var>longLessPenalty</var> 为 8。</li><li>令 <var>longMorePenalty</var> 为 6。</li><li>令 <var>shortLessPenalty</var> 为 6。</li><li>令 <var>shortMorePenalty</var> 为 3。</li><li>令 <var>offsetPenalty</var> 为 1。</li><li>令 <var>bestScore</var> 为 -∞。</li><li>令 <var>bestFormat</var> 为 <emu-val>undefined</emu-val>。</li><li>对 <var>formats</var> 的每个元素 <var>format</var>，执行</li><li>令 <var>score</var> 为 0。</li><li>按 <emu-xref href="#table-datetimeformat-components" id="_ref_92"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的表顺序（除表头），对每一行执行</li><li>令 <var>property</var> 为当前行 Property 列给出的名称。</li><li>如果 <var>options</var> 有 [[&lt;<var>property</var>&gt;]] 字段，令 <var>optionsProp</var> 为 <var>options</var>.[[&lt;<var>property</var>&gt;]]；否则令 <var>optionsProp</var> 为
        <emu-val>undefined</emu-val>。</li><li>如果 <var>format</var> 有 [[&lt;<var>property</var>&gt;]] 字段，令 <var>formatProp</var> 为 <var>format</var>.[[&lt;<var>property</var>&gt;]]；否则令 <var>formatProp</var> 为
        <emu-val>undefined</emu-val>。</li><li>如果 <var>optionsProp</var> 为 <emu-val>undefined</emu-val> 且 <var>formatProp</var> 不为 <emu-val>undefined</emu-val>，则</li><li>设置 <var>score</var> 为 <var>score</var> - <var>additionPenalty</var>。</li><li>否则如果 <var>optionsProp</var> 不为 <emu-val>undefined</emu-val> 且 <var>formatProp</var> 为 <emu-val>undefined</emu-val>，则</li><li>设置 <var>score</var> 为 <var>score</var> - <var>removalPenalty</var>。</li><li>否则如果 <var>property</var> 为 <emu-val>"timeZoneName"</emu-val>，则</li><li>如果 <var>optionsProp</var> 为 <emu-val>"short"</emu-val> 或 <emu-val>"shortGeneric"</emu-val>，则</li><li>如果 <var>formatProp</var> 为 <emu-val>"shortOffset"</emu-val>，设置 <var>score</var> 为 <var>score</var> - <var>offsetPenalty</var>。</li><li>否则如果 <var>formatProp</var> 为 <emu-val>"longOffset"</emu-val>，设置 <var>score</var> 为 <var>score</var> - (<var>offsetPenalty</var> + <var>shortMorePenalty</var>)。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"short"</emu-val> 且 <var>formatProp</var> 为 <emu-val>"long"</emu-val>，设置 <var>score</var> 为 <var>score</var> - <var>shortMorePenalty</var>。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"shortGeneric"</emu-val> 且 <var>formatProp</var> 为 <emu-val>"longGeneric"</emu-val>，设置 <var>score</var> 为 <var>score</var> -
        <var>shortMorePenalty</var>。</li><li>否则如果 <var>optionsProp</var> ≠ <var>formatProp</var>，设置 <var>score</var> 为 <var>score</var> - <var>removalPenalty</var>。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"shortOffset"</emu-val> 且 <var>formatProp</var> 为 <emu-val>"longOffset"</emu-val>，则</li><li>设置 <var>score</var> 为 <var>score</var> - <var>shortMorePenalty</var>。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"long"</emu-val> 或 <emu-val>"longGeneric"</emu-val>，则</li><li>如果 <var>formatProp</var> 为 <emu-val>"longOffset"</emu-val>，设置 <var>score</var> 为 <var>score</var> - <var>offsetPenalty</var>。</li><li>否则如果 <var>formatProp</var> 为 <emu-val>"shortOffset"</emu-val>，设置 <var>score</var> 为 <var>score</var> - (<var>offsetPenalty</var> + <var>longLessPenalty</var>)。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"long"</emu-val> 且 <var>formatProp</var> 为 <emu-val>"short"</emu-val>，设置 <var>score</var> 为 <var>score</var> - <var>longLessPenalty</var>。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"longGeneric"</emu-val> 且 <var>formatProp</var> 为 <emu-val>"shortGeneric"</emu-val>，设置 <var>score</var> 为 <var>score</var> -
        <var>longLessPenalty</var>。</li><li>否则如果 <var>optionsProp</var> ≠ <var>formatProp</var>，设置 <var>score</var> 为 <var>score</var> - <var>removalPenalty</var>。</li><li>否则如果 <var>optionsProp</var> 为 <emu-val>"longOffset"</emu-val> 且 <var>formatProp</var> 为 <emu-val>"shortOffset"</emu-val>，则</li><li>设置 <var>score</var> 为 <var>score</var> - <var>longLessPenalty</var>。</li><li>否则如果 <var>optionsProp</var> ≠ <var>formatProp</var>，则</li><li>设置 <var>score</var> 为 <var>score</var> - <var>removalPenalty</var>。</li><li>否则如果 <var>optionsProp</var> ≠ <var>formatProp</var>，则</li><li>如果 <var>property</var> 为 <emu-val>"fractionalSecondDigits"</emu-val>，则</li><li>令 <var>values</var> 为 « 1、2、3&nbsp;»。</li><li>否则，</li><li>令 <var>values</var> 为 « <emu-val>"2-digit"</emu-val>、<emu-val>"numeric"</emu-val>、<emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val>、<emu-val>"long"</emu-val>&nbsp;»。</li><li>令 <var>optionsPropIndex</var> 为 <var>optionsProp</var> 在 <var>values</var> 中的索引。</li><li>令 <var>formatPropIndex</var> 为 <var>formatProp</var> 在 <var>values</var> 中的索引。</li><li>令 <var>delta</var> 为 <emu-xref aoid="max"><a href="https://tc39.es/ecma262/#eqn-max">max</a></emu-xref>(<emu-xref aoid="min"><a href="https://tc39.es/ecma262/#eqn-min">min</a></emu-xref>(<var>formatPropIndex</var> - <var>optionsPropIndex</var>, 2), -2)。</li><li>如果 <var>delta</var> = 2，设置 <var>score</var> 为 <var>score</var> - <var>longMorePenalty</var>。</li><li>否则如果 <var>delta</var> = 1，设置 <var>score</var> 为 <var>score</var> - <var>shortMorePenalty</var>。</li><li>否则如果 <var>delta</var> = -1，设置 <var>score</var> 为 <var>score</var> - <var>shortLessPenalty</var>。</li><li>否则如果 <var>delta</var> = -2，设置 <var>score</var> 为 <var>score</var> - <var>longLessPenalty</var>。</li><li>如果 <var>score</var> &gt; <var>bestScore</var>，则</li><li>设置 <var>bestScore</var> 为 <var>score</var>。</li><li>设置 <var>bestFormat</var> 为 <var>format</var>。</li><li>返回 <var>bestFormat</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-bestfitformatmatcher" type="implementation-defined abstract operation" aoid="BestFitFormatMatcher">
      <h1><span class="secnum">11.5.3</span> BestFitFormatMatcher ( <var>options</var>, <var>formats</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation BestFitFormatMatcher takes arguments <var>options</var> (一个记录，) and <var>formats</var> (<emu-xref href="#datetimeformat-format-record" id="_ref_529"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref> 的列表，) and returns 一个 <emu-xref href="#datetimeformat-format-record" id="_ref_530"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref>.</p>
    </emu-clause>

    <emu-clause id="sec-datetime-format-functions">
      <h1><span class="secnum">11.5.4</span> DateTime 格式化函数</h1>

      <p>DateTime 格式化函数是一个匿名内置函数，具有 <var class="field">[[DateTimeFormat]]</var> 内部槽。</p>
      <p>当 DateTime 格式化函数 <var>F</var> 被调用并传入可选参数 <var>date</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>dtf</var> 为 <var>F</var>.<var class="field">[[DateTimeFormat]]</var>。</li><li>断言：<var>dtf</var> 是一个对象且具有 <var class="field">[[InitializedDateTimeFormat]]</var> 内部槽。</li><li>如果未提供 <var>date</var> 或 <var>date</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>x</var> 为 !&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(%Date.now%, <emu-val>undefined</emu-val>)。</li><li>否则，</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>date</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_531"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>dtf</var>, <var>x</var>)。</li></ol></emu-alg>

      <p>DateTime 格式化函数的 <emu-val>"length"</emu-val> 属性为 <emu-val>1</emu-val><sub>𝔽</sub>。</p>
    </emu-clause>

    <emu-clause id="sec-formatdatetimepattern" type="abstract operation" aoid="FormatDateTimePattern">
      <h1><span class="secnum">11.5.5</span> FormatDateTimePattern ( <var>dateTimeFormat</var>, <var>format</var>, <var>pattern</var>, <var>epochNanoseconds</var> )</h1>
      <p>The abstract operation FormatDateTimePattern takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，), <var>format</var> (一个 <emu-xref href="#datetimeformat-format-record" id="_ref_532"><a href="#datetimeformat-format-record">DateTime Format Record</a></emu-xref> 或 <emu-xref href="#datetimeformat-range-pattern-format-record" id="_ref_533"><a href="#datetimeformat-range-pattern-format-record">DateTime Range Pattern Format Record</a></emu-xref>，), <var>pattern</var> (一个 Pattern 字符串，), and <var>epochNanoseconds</var> (一个 BigInt，) and returns 一个包含 <var class="field">[[Type]]</var>（字符串）和 <var class="field">[[Value]]</var>（字符串）字段的记录列表. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>locale</var> 为 <var>dateTimeFormat</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>nfOptions</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOptions</var>, <emu-val>"numberingSystem"</emu-val>, <var>dateTimeFormat</var>.<var class="field">[[NumberingSystem]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOptions</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>)。</li><li>令 <var>nf</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_534"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nfOptions</var>&nbsp;»)。</li><li>令 <var>nf2Options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf2Options</var>, <emu-val>"minimumIntegerDigits"</emu-val>, <emu-val>2</emu-val><sub>𝔽</sub>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf2Options</var>, <emu-val>"numberingSystem"</emu-val>, <var>dateTimeFormat</var>.<var class="field">[[NumberingSystem]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf2Options</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>)。</li><li>令 <var>nf2</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_535"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nf2Options</var>&nbsp;»)。</li><li>如果 <var>format</var> 有 <var class="field">[[fractionalSecondDigits]]</var> 字段，则</li><li>令 <var>fractionalSecondDigits</var> 为 <var>format</var>.<var class="field">[[fractionalSecondDigits]]</var>。</li><li>令 <var>nf3Options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf3Options</var>, <emu-val>"minimumIntegerDigits"</emu-val>, <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>fractionalSecondDigits</var>))。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf3Options</var>, <emu-val>"numberingSystem"</emu-val>, <var>dateTimeFormat</var>.<var class="field">[[NumberingSystem]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf3Options</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>)。</li><li>令 <var>nf3</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_536"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nf3Options</var>&nbsp;»)。</li><li>令 <var>tm</var> 为 <emu-xref aoid="ToLocalTime" id="_ref_537"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref>(<var>epochNanoseconds</var>, <var>dateTimeFormat</var>.<var class="field">[[Calendar]]</var>, <var>dateTimeFormat</var>.<var class="field">[[TimeZone]]</var>)。</li><li>令 <var>patternParts</var> 为 <emu-xref aoid="PartitionPattern" id="_ref_538"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>)。</li><li>令 <var>result</var> 为一个新的空列表。</li><li>对 <var>patternParts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>patternPart</var>，执行</li><li>令 <var>p</var> 为 <var>patternPart</var>.<var class="field">[[Type]]</var>。</li><li>如果 <var>p</var> 为 <emu-val>"literal"</emu-val>，则</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>patternPart</var>.<var class="field">[[Value]]</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 为 <emu-val>"fractionalSecondDigits"</emu-val>，则</li><li>断言：<var>format</var> 有 <var class="field">[[fractionalSecondDigits]]</var> 字段。</li><li>令 <var>v</var> 为 <var>tm</var>.<var class="field">[[Millisecond]]</var>。</li><li>设置 <var>v</var> 为 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>v</var> × 10<sup>( <var>fractionalSecondDigits</var> - 3 )</sup>)。</li><li>令 <var>fv</var> 为 <emu-xref aoid="FormatNumeric" id="_ref_539"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf3</var>, <var>v</var>)。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"fractionalSecond"</emu-val>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 为 <emu-val>"dayPeriod"</emu-val>，则</li><li>断言：<var>format</var> 有 <var class="field">[[dayPeriod]]</var> 字段。</li><li>令 <var>f</var> 为 <var>format</var>.<var class="field">[[dayPeriod]]</var>。</li><li>令 <var>fv</var> 为表示 <var>tm</var> 的日间段的字符串，形式由 <var>f</var> 指定；字符串值依赖于实现和 <var>dateTimeFormat</var> 的有效区域。</li><li>将记录 { <var class="field">[[Type]]</var>: <var>p</var>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 为 <emu-val>"timeZoneName"</emu-val>，则</li><li>断言：<var>format</var> 有 <var class="field">[[timeZoneName]]</var> 字段。</li><li>令 <var>f</var> 为 <var>format</var>.<var class="field">[[timeZoneName]]</var>。</li><li>令 <var>v</var> 为 <var>dateTimeFormat</var>.<var class="field">[[TimeZone]]</var>。</li><li>令 <var>fv</var> 为表示 <var>v</var> 的字符串，形式由 <var>f</var> 指定；字符串值依赖于实现和 <var>dateTimeFormat</var> 的有效区域。字符串值也可能依赖于 <var>tm</var> 的 <var class="field">[[InDST]]</var> 字段（如果 <var>f</var> 为
        <emu-val>"short"</emu-val>、<emu-val>"long"</emu-val>、<emu-val>"shortOffset"</emu-val> 或 <emu-val>"longOffset"</emu-val>）。如果实现没有该本地化表示，则使用 <var>v</var> 的字符串值。</li><li>将记录 { <var class="field">[[Type]]</var>: <var>p</var>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 匹配 <emu-xref href="#table-datetimeformat-components" id="_ref_93"><a href="#table-datetimeformat-components">Table 16</a></emu-xref> 的 Property 列，则</li><li>断言：<var>format</var> 有 [[&lt;<var>p</var>&gt;]] 字段。</li><li>令 <var>f</var> 为 <var>format</var>.[[&lt;<var>p</var>&gt;]]。</li><li>令 <var>v</var> 为 <var>tm</var> 的字段，其名称为匹配行的 Internal Slot 列。</li><li>如果 <var>p</var> 为 <emu-val>"year"</emu-val> 且 <var>v</var> ≤ 0，设置 <var>v</var> 为 1 - <var>v</var>。</li><li>如果 <var>p</var> 为 <emu-val>"month"</emu-val>，设置 <var>v</var> 为 <var>v</var> + 1。</li><li>如果 <var>p</var> 为 <emu-val>"hour"</emu-val> 且 <var>dateTimeFormat</var>.<var class="field">[[HourCycle]]</var> 为 <emu-val>"h11"</emu-val> 或 <emu-val>"h12"</emu-val>，则</li><li>设置 <var>v</var> 为 <var>v</var> 模 12。</li><li>如果 <var>v</var> 为 0 且 <var>dateTimeFormat</var>.<var class="field">[[HourCycle]]</var> 为 <emu-val>"h12"</emu-val>，设置 <var>v</var> 为 12。</li><li>如果 <var>p</var> 为 <emu-val>"hour"</emu-val> 且 <var>dateTimeFormat</var>.<var class="field">[[HourCycle]]</var> 为 <emu-val>"h24"</emu-val>，则</li><li>如果 <var>v</var> 为 0，设置 <var>v</var> 为 24。</li><li>如果 <var>f</var> 为 <emu-val>"numeric"</emu-val>，则</li><li>令 <var>fv</var> 为 <emu-xref aoid="FormatNumeric" id="_ref_540"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf</var>, <var>v</var>)。</li><li>否则如果 <var>f</var> 为 <emu-val>"2-digit"</emu-val>，则</li><li>令 <var>fv</var> 为 <emu-xref aoid="FormatNumeric" id="_ref_541"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf2</var>, <var>v</var>)。</li><li>令 <var>codePoints</var> 为 <emu-xref aoid="StringToCodePoints"><a href="https://tc39.es/ecma262/#sec-stringtocodepoints">StringToCodePoints</a></emu-xref>(<var>fv</var>)。</li><li>令 <var>count</var> 为 <var>codePoints</var> 的元素数量。</li><li>如果 <var>count</var> &gt; 2，则</li><li>令 <var>tens</var> 为 <var>codePoints</var>[<var>count</var> - 2]。</li><li>令 <var>ones</var> 为 <var>codePoints</var>[<var>count</var> - 1]。</li><li>设置 <var>fv</var> 为 <emu-xref aoid="CodePointsToString"><a href="https://tc39.es/ecma262/#sec-codepointstostring">CodePointsToString</a></emu-xref>(« <var>tens</var>, <var>ones</var>&nbsp;»)。</li><li>否则如果 <var>f</var> 为 <emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val> 或 <emu-val>"long"</emu-val>，则</li><li>令 <var>fv</var> 为表示 <var>v</var> 的字符串，形式由 <var>f</var> 指定；字符串值依赖于实现、有效区域和日历。如果 <var>p</var> 为 <emu-val>"month"</emu-val>，则字符串值也可能依赖于 <var>format</var>.<var class="field">[[day]]</var>
        是否存在。如果实现没有该本地化表示，则使用 <var>v</var> 的字符串值。</li><li>将记录 { <var class="field">[[Type]]</var>: <var>p</var>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 为 <emu-val>"ampm"</emu-val>，则</li><li>令 <var>v</var> 为 <var>tm</var>.<var class="field">[[Hour]]</var>。</li><li>如果 <var>v</var> 大于 11，则</li><li>令 <var>fv</var> 为 <emu-xref href="#sec-implementation-dependencies" id="_ref_542"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串，表示 <emu-val>"post meridiem"</emu-val>。</li><li>否则，</li><li>令 <var>fv</var> 为 <emu-xref href="#sec-implementation-dependencies" id="_ref_543"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串，表示 <emu-val>"ante meridiem"</emu-val>。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"dayPeriod"</emu-val>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 为 <emu-val>"relatedYear"</emu-val>，则</li><li>令 <var>v</var> 为 <var>tm</var>.<var class="field">[[RelatedYear]]</var>。</li><li>令 <var>fv</var> 为 <emu-xref aoid="FormatNumeric" id="_ref_544"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf</var>, <var>v</var>)。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"relatedYear"</emu-val>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则如果 <var>p</var> 为 <emu-val>"yearName"</emu-val>，则</li><li>令 <var>v</var> 为 <var>tm</var>.<var class="field">[[YearName]]</var>。</li><li>令 <var>fv</var> 为表示 <var>v</var> 的 <emu-xref href="#sec-implementation-dependencies" id="_ref_545"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"yearName"</emu-val>, <var class="field">[[Value]]</var>: <var>fv</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则，</li><li>令 <var>unknown</var> 为基于 <var>epochNanoseconds</var> 和 <var>p</var> 的实现、区域和数字系统相关字符串。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"unknown"</emu-val>, <var class="field">[[Value]]</var>: <var>unknown</var>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        推荐实现使用 Common Locale Data Repository（<a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>）提供的区域和日历相关字符串。DateTimeFormat <emu-val>"short"</emu-val> 字符串建议使用
        CLDR <emu-val>"abbreviated"</emu-val>，<emu-val>"long"</emu-val> 字符串建议使用 CLDR <emu-val>"wide"</emu-val>。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-partitiondatetimepattern" type="abstract operation" aoid="PartitionDateTimePattern">
      <h1><span class="secnum">11.5.6</span> PartitionDateTimePattern ( <var>dateTimeFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation PartitionDateTimePattern takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，) and <var>x</var> (一个 Number，) and returns 正常完成包含一个记录列表（字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）），或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>x</var> 为 <emu-xref aoid="TimeClip"><a href="https://tc39.es/ecma262/#sec-timeclip">TimeClip</a></emu-xref>(<var>x</var>)。</li><li>如果 <var>x</var> 为 <emu-val>NaN</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>epochNanoseconds</var> 为 <emu-xref aoid="ℤ"><a href="https://tc39.es/ecma262/#ℤ">ℤ</a></emu-xref>(<emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>x</var>) × 10<sup>6</sup>)。</li><li>令 <var>format</var> 为 <var>dateTimeFormat</var>.<var class="field">[[DateTimeFormat]]</var>。</li><li>如果 <var>dateTimeFormat</var>.<var class="field">[[HourCycle]]</var> 为 <emu-val>"h11"</emu-val> 或 <emu-val>"h12"</emu-val>，则</li><li>令 <var>pattern</var> 为 <var>format</var>.<var class="field">[[pattern12]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>format</var>.<var class="field">[[pattern]]</var>。</li><li>令 <var>result</var> 为 <emu-xref aoid="FormatDateTimePattern" id="_ref_546"><a href="#sec-formatdatetimepattern">FormatDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>format</var>, <var>pattern</var>, <var>epochNanoseconds</var>)。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetime" type="abstract operation" aoid="FormatDateTime">
      <h1><span class="secnum">11.5.7</span> FormatDateTime ( <var>dateTimeFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation FormatDateTime takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，) and <var>x</var> (一个 Number，) and returns 正常完成包含一个字符串或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionDateTimePattern" id="_ref_547"><a href="#sec-partitiondatetimepattern">PartitionDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对 <var>parts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var>，执行</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetimetoparts" type="abstract operation" aoid="FormatDateTimeToParts">
      <h1><span class="secnum">11.5.8</span> FormatDateTimeToParts ( <var>dateTimeFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation FormatDateTimeToParts takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，) and <var>x</var> (一个 Number，) and returns 正常完成包含一个数组或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionDateTimePattern" id="_ref_548"><a href="#sec-partitiondatetimepattern">PartitionDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对 <var>parts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var>，执行</li><li>令 <var>O</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>n</var>)), <var>O</var>)。</li><li><var>n</var> 加 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitiondatetimerangepattern" type="abstract operation" aoid="PartitionDateTimeRangePattern">
      <h1><span class="secnum">11.5.9</span> PartitionDateTimeRangePattern ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation PartitionDateTimeRangePattern takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，), <var>x</var> (一个 Number，), and <var>y</var> (一个 Number，) and returns 正常完成包含一个记录列表（字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）、<var class="field">[[Source]]</var>（字符串）），或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>设置 <var>x</var> 为 <emu-xref aoid="TimeClip"><a href="https://tc39.es/ecma262/#sec-timeclip">TimeClip</a></emu-xref>(<var>x</var>)。</li><li>如果 <var>x</var> 为 <emu-val>NaN</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>y</var> 为 <emu-xref aoid="TimeClip"><a href="https://tc39.es/ecma262/#sec-timeclip">TimeClip</a></emu-xref>(<var>y</var>)。</li><li>如果 <var>y</var> 为 <emu-val>NaN</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>xEpochNanoseconds</var> 为 <emu-xref aoid="ℤ"><a href="https://tc39.es/ecma262/#ℤ">ℤ</a></emu-xref>(<emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>x</var>) × 10<sup>6</sup>)。</li><li>令 <var>yEpochNanoseconds</var> 为 <emu-xref aoid="ℤ"><a href="https://tc39.es/ecma262/#ℤ">ℤ</a></emu-xref>(<emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>y</var>) × 10<sup>6</sup>)。</li><li>令 <var>tm1</var> 为 <emu-xref aoid="ToLocalTime" id="_ref_549"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref>(<var>xEpochNanoseconds</var>, <var>dateTimeFormat</var>.<var class="field">[[Calendar]]</var>, <var>dateTimeFormat</var>.<var class="field">[[TimeZone]]</var>)。</li><li>令 <var>tm2</var> 为 <emu-xref aoid="ToLocalTime" id="_ref_550"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref>(<var>yEpochNanoseconds</var>, <var>dateTimeFormat</var>.<var class="field">[[Calendar]]</var>, <var>dateTimeFormat</var>.<var class="field">[[TimeZone]]</var>)。</li><li>令 <var>format</var> 为 <var>dateTimeFormat</var>.<var class="field">[[DateTimeFormat]]</var>。</li><li>如果 <var>dateTimeFormat</var>.<var class="field">[[HourCycle]]</var> 为 <emu-val>"h11"</emu-val> 或 <emu-val>"h12"</emu-val>，则</li><li>令 <var>pattern</var> 为 <var>format</var>.<var class="field">[[pattern12]]</var>。</li><li>令 <var>rangePatterns</var> 为 <var>format</var>.<var class="field">[[rangePatterns12]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>format</var>.<var class="field">[[pattern]]</var>。</li><li>令 <var>rangePatterns</var> 为 <var>format</var>.<var class="field">[[rangePatterns]]</var>。</li><li>令 <var>selectedRangePattern</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>relevantFieldsEqual</var> 为 <emu-val>true</emu-val>。</li><li>令 <var>checkMoreFields</var> 为 <emu-val>true</emu-val>。</li><li>按 <emu-xref href="#table-datetimeformat-range-pattern-record" id="_ref_94"><a href="#table-datetimeformat-range-pattern-record">Table 6</a></emu-xref> 的表顺序（除表头），对每一行执行</li><li>令 <var>fieldName</var> 为当前行 Field Name 列给出的名称。</li><li>如果 <var>rangePatterns</var> 有名为 <var>fieldName</var> 的字段，令 <var>rangePattern</var> 为该字段；否则令 <var>rangePattern</var> 为 <emu-val>undefined</emu-val>。</li><li>如果 <var>selectedRangePattern</var> 不为 <emu-val>undefined</emu-val> 且 <var>rangePattern</var> 为 <emu-val>undefined</emu-val>，则</li><li>注：没有该字段的范围模式，后续不再检查。</li><li>设置 <var>checkMoreFields</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>fieldName</var> 不等于 <var class="field">[[Default]]</var> 且 <var>relevantFieldsEqual</var> 为 <emu-val>true</emu-val> 且 <var>checkMoreFields</var> 为 <emu-val>true</emu-val>，则</li><li>设置 <var>selectedRangePattern</var> 为 <var>rangePattern</var>。</li><li>如果 <var>fieldName</var> 为 <var class="field">[[AmPm]]</var>，则</li><li>如果 <var>tm1</var>.<var class="field">[[Hour]]</var> 小于 12，令 <var>v1</var> 为 <emu-val>"am"</emu-val>；否则令 <var>v1</var> 为 <emu-val>"pm"</emu-val>。</li><li>如果 <var>tm2</var>.<var class="field">[[Hour]]</var> 小于 12，令 <var>v2</var> 为 <emu-val>"am"</emu-val>；否则令 <var>v2</var> 为 <emu-val>"pm"</emu-val>。</li><li>否则如果 <var>fieldName</var> 为 <var class="field">[[DayPeriod]]</var>，则</li><li>令 <var>v1</var> 为表示 <var>tm1</var> 日间段的字符串，依赖于实现和 <var>dateTimeFormat</var> 的有效区域。</li><li>令 <var>v2</var> 为表示 <var>tm2</var> 日间段的字符串，依赖于实现和 <var>dateTimeFormat</var> 的有效区域。</li><li>否则如果 <var>fieldName</var> 为 <var class="field">[[FractionalSecondDigits]]</var>，则</li><li>如果 <var>format</var> 有 <var class="field">[[fractionalSecondDigits]]</var> 字段，则</li><li>令 <var>fractionalSecondDigits</var> 为 <var>format</var>.<var class="field">[[fractionalSecondDigits]]</var>。</li><li>否则，</li><li>令 <var>fractionalSecondDigits</var> 为 3。</li><li>令 <var>exp</var> 为 <var>fractionalSecondDigits</var> - 3。</li><li>令 <var>v1</var> 为 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tm1</var>.<var class="field">[[Millisecond]]</var> × 10<sup><var>exp</var></sup>)。</li><li>令 <var>v2</var> 为 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tm2</var>.<var class="field">[[Millisecond]]</var> × 10<sup><var>exp</var></sup>)。</li><li>否则，</li><li>令 <var>v1</var> 为 <var>tm1</var> 的字段，其名称为 <var>fieldName</var>。</li><li>令 <var>v2</var> 为 <var>tm2</var> 的字段，其名称为 <var>fieldName</var>。</li><li>如果 <var>v1</var> ≠ <var>v2</var>，则</li><li>设置 <var>relevantFieldsEqual</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>relevantFieldsEqual</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>collapsedResult</var> 为一个新的空列表。</li><li>令 <var>resultParts</var> 为 <emu-xref aoid="FormatDateTimePattern" id="_ref_551"><a href="#sec-formatdatetimepattern">FormatDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>format</var>, <var>pattern</var>, <var>xEpochNanoseconds</var>)。</li><li>对 <var>resultParts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>r</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>r</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>r</var>.<var class="field">[[Value]]</var>, <var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>&nbsp;} 添加到 <var>collapsedResult</var>。</li><li>返回 <var>collapsedResult</var>。</li><li>令 <var>rangeResult</var> 为一个新的空列表。</li><li>如果 <var>selectedRangePattern</var> 为 <emu-val>undefined</emu-val>，则</li><li>设置 <var>selectedRangePattern</var> 为 <var>rangePatterns</var>.<var class="field">[[Default]]</var>。</li><li>对 <var>selectedRangePattern</var>.<var class="field">[[PatternParts]]</var> 的每个记录 { <var class="field">[[Pattern]]</var>, <var class="field">[[Source]]</var>&nbsp;} <var>rangePatternPart</var>，执行</li><li>令 <var>pattern</var> 为 <var>rangePatternPart</var>.<var class="field">[[Pattern]]</var>。</li><li>令 <var>source</var> 为 <var>rangePatternPart</var>.<var class="field">[[Source]]</var>。</li><li>如果 <var>source</var> 为 <emu-val>"startRange"</emu-val> 或 <emu-val>"shared"</emu-val>，则</li><li>令 <var>z</var> 为 <var>xEpochNanoseconds</var>。</li><li>否则，</li><li>令 <var>z</var> 为 <var>yEpochNanoseconds</var>。</li><li>令 <var>resultParts</var> 为 <emu-xref aoid="FormatDateTimePattern" id="_ref_552"><a href="#sec-formatdatetimepattern">FormatDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>selectedRangePattern</var>, <var>pattern</var>, <var>z</var>)。</li><li>对 <var>resultParts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>r</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>r</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>r</var>.<var class="field">[[Value]]</var>, <var class="field">[[Source]]</var>: <var>source</var>&nbsp;} 添加到 <var>rangeResult</var>。</li><li>返回 <var>rangeResult</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetimerange" type="abstract operation" aoid="FormatDateTimeRange">
      <h1><span class="secnum">11.5.10</span> FormatDateTimeRange ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation FormatDateTimeRange takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，), <var>x</var> (一个 Number，), and <var>y</var> (一个 Number，) and returns 正常完成包含一个字符串或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionDateTimeRangePattern" id="_ref_553"><a href="#sec-partitiondatetimerangepattern">PartitionDateTimeRangePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>, <var>y</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对 <var>parts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Source]]</var>&nbsp;} <var>part</var>，执行</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetimerangetoparts" type="abstract operation" aoid="FormatDateTimeRangeToParts">
      <h1><span class="secnum">11.5.11</span> FormatDateTimeRangeToParts ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation FormatDateTimeRangeToParts takes arguments <var>dateTimeFormat</var> (一个 Intl.DateTimeFormat，), <var>x</var> (一个 Number，), and <var>y</var> (一个 Number，) and returns 正常完成包含一个数组或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionDateTimeRangePattern" id="_ref_554"><a href="#sec-partitiondatetimerangepattern">PartitionDateTimeRangePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>, <var>y</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对 <var>parts</var> 的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Source]]</var>&nbsp;} <var>part</var>，执行</li><li>令 <var>O</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"source"</emu-val>, <var>part</var>.<var class="field">[[Source]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>n</var>)), <var>O</var>)。</li><li><var>n</var> 加 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-tolocaltime" type="implementation-defined abstract operation" aoid="ToLocalTime">
      <h1><span class="secnum">11.5.12</span> ToLocalTime ( <var>epochNs</var>, <var>calendar</var>, <var>timeZoneIdentifier</var> )</h1>

      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation ToLocalTime takes arguments <var>epochNs</var> (一个 BigInt，), <var>calendar</var> (一个字符串，), and <var>timeZoneIdentifier</var> (一个字符串，) and returns 一个 <emu-xref href="#datetimeformat-tolocaltime-record" id="_ref_555"><a href="#datetimeformat-tolocaltime-record">ToLocalTime Record</a></emu-xref>. It performs the following steps when called:</p>

      <emu-alg><ol><li>如果 <emu-xref aoid="IsTimeZoneOffsetString"><a href="https://tc39.es/ecma262/#sec-istimezoneoffsetstring">IsTimeZoneOffsetString</a></emu-xref>(<var>timeZoneIdentifier</var>) 为 <emu-val>true</emu-val>，则</li><li>令 <var>offsetNs</var> 为 <emu-xref aoid="ParseTimeZoneOffsetString"><a href="https://tc39.es/ecma262/#sec-parsetimezoneoffsetstring">ParseTimeZoneOffsetString</a></emu-xref>(<var>timeZoneIdentifier</var>)。</li><li>否则，</li><li>断言：<emu-xref aoid="GetAvailableNamedTimeZoneIdentifier" id="_ref_556"><a href="#sec-getavailablenamedtimezoneidentifier">GetAvailableNamedTimeZoneIdentifier</a></emu-xref>(<var>timeZoneIdentifier</var>) 不为 <emu-const>empty</emu-const>。</li><li>令 <var>offsetNs</var> 为 <emu-xref aoid="GetNamedTimeZoneOffsetNanoseconds"><a href="https://tc39.es/ecma262/#sec-getnamedtimezoneoffsetnanoseconds">GetNamedTimeZoneOffsetNanoseconds</a></emu-xref>(<var>timeZoneIdentifier</var>, <var>epochNs</var>)。</li><li>令 <var>tz</var> 为 <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>epochNs</var>) + <var>offsetNs</var>。</li><li>如果 <var>calendar</var> 为 <emu-val>"gregory"</emu-val>，则</li><li>返回一个 <emu-xref href="#datetimeformat-tolocaltime-record" id="_ref_557"><a href="#datetimeformat-tolocaltime-record">ToLocalTime Record</a></emu-xref>，字段按 <emu-xref href="#table-datetimeformat-tolocaltime-record" id="_ref_95"><a href="#table-datetimeformat-tolocaltime-record">Table 17</a></emu-xref> 计算。</li><li>否则，</li><li>返回一个 <emu-xref href="#datetimeformat-tolocaltime-record" id="_ref_558"><a href="#datetimeformat-tolocaltime-record">ToLocalTime Record</a></emu-xref>，字段按给定 <var>calendar</var> 计算。计算应使用关于指定 <var>calendar</var> 的最佳可用信息。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-datetimeformat-tolocaltime-records">
      <h1><span class="secnum">11.5.13</span> ToLocalTime 记录</h1>

      <p>每个 <dfn id="datetimeformat-tolocaltime-record" tabindex="-1">ToLocalTime Record</dfn> 都具有 <emu-xref href="#table-datetimeformat-tolocaltime-record" id="_ref_96"><a href="#table-datetimeformat-tolocaltime-record">Table 17</a></emu-xref> 中定义的字段。</p>

      <emu-table id="table-datetimeformat-tolocaltime-record"><figure><figcaption>Table 17: <emu-xref aoid="ToLocalTime" id="_ref_559"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref> 返回的记录</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>字段名</th>
              <th>值类型</th>
              <th>公历计算方式</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Weekday]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="WeekDay"><a href="https://tc39.es/ecma262/#sec-weekday">WeekDay</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[Era]]</var></td>
            <td>字符串</td>
            <td>令 <var>year</var> 为 <emu-xref aoid="YearFromTime"><a href="https://tc39.es/ecma262/#sec-yearfromtime">YearFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>)))。如果 <var>year</var> &lt; <emu-val>1</emu-val><sub>𝔽</sub>，返回 <emu-val>"BC"</emu-val>，否则返回
              <emu-val>"AD"</emu-val>。</td>
          </tr>
          <tr>
            <td><var class="field">[[Year]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="YearFromTime"><a href="https://tc39.es/ecma262/#sec-yearfromtime">YearFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[RelatedYear]]</var></td>
            <td>整数或 <emu-val>undefined</emu-val></td>
            <td><emu-val>undefined</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[YearName]]</var></td>
            <td>字符串或 <emu-val>undefined</emu-val></td>
            <td><emu-val>undefined</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Month]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="MonthFromTime"><a href="https://tc39.es/ecma262/#sec-monthfromtime">MonthFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[Day]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="DateFromTime"><a href="https://tc39.es/ecma262/#sec-datefromtime">DateFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[Hour]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="HourFromTime"><a href="https://tc39.es/ecma262/#sec-hourfromtime">HourFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[Minute]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="MinFromTime"><a href="https://tc39.es/ecma262/#sec-minfromtime">MinFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[Second]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="SecFromTime"><a href="https://tc39.es/ecma262/#sec-secfromtime">SecFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[Millisecond]]</var></td>
            <td>整数</td>
            <td><emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="msFromTime"><a href="https://tc39.es/ecma262/#sec-msfromtime">msFromTime</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>tz</var> / 10<sup>6</sup>))))</td>
          </tr>
          <tr>
            <td><var class="field">[[InDST]]</var></td>
            <td>布尔值</td>
            <td>使用关于指定 <var>calendar</var> 和 <var>timeZoneIdentifier</var> 的最佳可用信息（包括 IANA 时区数据库的当前和历史时区偏移及夏令时规则）计算 <emu-val>true</emu-val> 或 <emu-val>false</emu-val>。</td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-unwrapdatetimeformat" type="abstract operation" normative-optional="" aoid="UnwrapDateTimeFormat"><div class="attributes-tag"><emu-xref href="#sec-conformance"><a href="https://tc39.es/ecma262/#sec-conformance">Normative Optional</a></emu-xref></div>
      <h1><span class="secnum">11.5.14</span> UnwrapDateTimeFormat ( <var>dtf</var> )</h1>
      <p>The abstract operation UnwrapDateTimeFormat takes argument <var>dtf</var> (一个 ECMAScript 语言值，) and returns 正常完成包含一个 ECMAScript 语言值或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>dtf</var> 不是对象，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>dtf</var> 没有 <var class="field">[[InitializedDateTimeFormat]]</var> 内部槽且 ?&nbsp;<emu-xref aoid="OrdinaryHasInstance"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_560"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>, <var>dtf</var>) 为 <emu-val>true</emu-val>，则</li><li>返回 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>dtf</var>, <emu-xref href="#intl-object" id="_ref_561"><a href="#intl-object">%Intl%</a></emu-xref>.<var class="field">[[FallbackSymbol]]</var>)。</li><li>返回 <var>dtf</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="intl-displaynames-objects">
  <h1><span class="secnum">12</span> DisplayNames 对象</h1>

  <emu-clause id="sec-intl-displaynames-constructor">
    <h1><span class="secnum">12.1</span> Intl.DisplayNames 构造函数</h1>

    <p>Intl.DisplayNames 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.DisplayNames%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_562"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"DisplayNames"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_563"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_97"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-Intl.DisplayNames">
      <h1><span class="secnum">12.1.1</span> Intl.DisplayNames ( <var>locales</var>, <var>options</var> )</h1>

      <p>当 <code>Intl.DisplayNames</code> 函数以参数 <var>locales</var> 和 <var>options</var> 被调用时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>displayNames</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.DisplayNames.prototype%"</emu-val>, «
        <var class="field">[[InitializedDisplayNames]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[Style]]</var>, <var class="field">[[Type]]</var>, <var class="field">[[Fallback]]</var>, <var class="field">[[LanguageDisplay]]</var>, <var class="field">[[Fields]]</var>&nbsp;»)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_564"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-displaynames-constructor" id="_ref_565"><a href="#sec-intl-displaynames-constructor">%Intl.DisplayNames%</a></emu-xref>, <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_566"><a href="#sec-intl-displaynames-constructor">%Intl.DisplayNames%</a></emu-xref>.<var class="field">[[LocaleData]]</var>, <var>locales</var>,
        <var>options</var>, « <emu-const>require-options</emu-const>&nbsp;»)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>令 <var>style</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_567"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val>&nbsp;», <emu-val>"long"</emu-val>)。</li><li>设置 <var>displayNames</var>.<var class="field">[[Style]]</var> 为 <var>style</var>。</li><li>令 <var>type</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_568"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"type"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"language"</emu-val>, <emu-val>"region"</emu-val>, <emu-val>"script"</emu-val>, <emu-val>"currency"</emu-val>,
        <emu-val>"calendar"</emu-val>, <emu-val>"dateTimeField"</emu-val>&nbsp;», <emu-val>undefined</emu-val>)。</li><li>如果 <var>type</var> 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>设置 <var>displayNames</var>.<var class="field">[[Type]]</var> 为 <var>type</var>。</li><li>令 <var>fallback</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_569"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"fallback"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"code"</emu-val>, <emu-val>"none"</emu-val>&nbsp;», <emu-val>"code"</emu-val>)。</li><li>设置 <var>displayNames</var>.<var class="field">[[Fallback]]</var> 为 <var>fallback</var>。</li><li>设置 <var>displayNames</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>resolvedLocaleData</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>令 <var>types</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[types]]</var>。</li><li>断言：<var>types</var> 是一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>（见 <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_98"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>）。</li><li>令 <var>languageDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_570"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"languageDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"dialect"</emu-val>, <emu-val>"standard"</emu-val>&nbsp;»,
        <emu-val>"dialect"</emu-val>)。</li><li>令 <var>typeFields</var> 为 <var>types</var>.[[&lt;<var>type</var>&gt;]]。</li><li>断言：<var>typeFields</var> 是一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>（见 <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_99"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>）。</li><li>如果 <var>type</var> 是 <emu-val>"language"</emu-val>，则</li><li>设置 <var>displayNames</var>.<var class="field">[[LanguageDisplay]]</var> 为 <var>languageDisplay</var>。</li><li>设置 <var>typeFields</var> 为 <var>typeFields</var>.[[&lt;<var>languageDisplay</var>&gt;]]。</li><li>断言：<var>typeFields</var> 是一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>（见 <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_100"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>）。</li><li>令 <var>styleFields</var> 为 <var>typeFields</var>.[[&lt;<var>style</var>&gt;]]。</li><li>断言：<var>styleFields</var> 是一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>（见 <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_101"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>）。</li><li>设置 <var>displayNames</var>.<var class="field">[[Fields]]</var> 为 <var>styleFields</var>。</li><li>返回 <var>displayNames</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-displaynames-constructor">
    <h1><span class="secnum">12.2</span> Intl.DisplayNames 构造函数的属性</h1>

    <p>Intl.DisplayNames 构造函数：</p>
    <ul>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-Intl.DisplayNames.prototype">
      <h1><span class="secnum">12.2.1</span> Intl.DisplayNames.prototype</h1>

      <p><code>Intl.DisplayNames.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-displaynames-prototype-object" id="_ref_571"><a href="#sec-properties-of-intl-displaynames-prototype-object">%Intl.DisplayNames.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.supportedLocalesOf">
      <h1><span class="secnum">12.2.2</span> Intl.DisplayNames.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当 <code>supportedLocalesOf</code> 方法以参数 <var>locales</var> 和 <var>options</var> 被调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_572"><a href="#sec-intl-displaynames-constructor">%Intl.DisplayNames%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_573"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_574"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames-internal-slots">
      <h1><span class="secnum">12.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_102"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « »。</p>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_103"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束及以下附加约束范围内由实现定义：</p>

      <ul>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须为所有 locale 值 <var>locale</var> 提供 <var class="field">[[types]]</var> 字段。该字段的值必须是一个
          <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，且必须包含所有显示名称类型的字段名：<emu-val>"language"</emu-val>、<emu-val>"region"</emu-val>、<emu-val>"script"</emu-val>、<emu-val>"currency"</emu-val>、<emu-val>"calendar"</emu-val> 和 <emu-val>"dateTimeField"</emu-val>。
        </li>
        <li>字段 <emu-val>"language"</emu-val> 的值必须是一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，且必须包含有效语言显示名称的字段名：<emu-val>"dialect"</emu-val> 和 <emu-val>"standard"</emu-val>。</li>
        <li>显示名称类型 <emu-val>"language"</emu-val> 下的语言显示字段应包含 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，且必须包含有效显示名称样式的字段名：<emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val> 和 <emu-val>"long"</emu-val>。</li>
        <li>字段 <emu-val>"region"</emu-val>、<emu-val>"script"</emu-val>、<emu-val>"currency"</emu-val>、<emu-val>"calendar"</emu-val> 和 <emu-val>"dateTimeField"</emu-val> 的值必须是
          <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，且必须包含所有显示名称样式的字段名：<emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val> 和 <emu-val>"long"</emu-val>。</li>
        <li>显示名称类型 <emu-val>"language"</emu-val> 下的显示名称样式字段应包含与 <code>unicode_language_id</code> Unicode locale
          非终结符匹配的语言代码的键。该字段的值必须是字符串。</li>
        <li>显示名称类型 <emu-val>"region"</emu-val> 下的显示名称样式字段应包含区域代码的键。该字段的值必须是字符串。</li>
        <li>显示名称类型 <emu-val>"script"</emu-val> 下的显示名称样式字段应包含脚本代码的键。该字段的值必须是字符串。</li>
        <li>显示名称类型 <emu-val>"currency"</emu-val> 下的显示名称样式字段应包含货币代码的键。该字段的值必须是字符串。</li>
        <li>显示名称类型 <emu-val>"calendar"</emu-val> 下的显示名称样式字段应包含与 <code>type</code> Unicode locale 非终结符匹配的日历标识符的键。该字段的值必须是字符串。</li>
        <li>显示名称类型 <emu-val>"dateTimeField"</emu-val> 下的显示名称样式字段应包含 <emu-xref href="#table-validcodefordatetimefield" id="_ref_104"><a href="#table-validcodefordatetimefield">Table 19</a></emu-xref>
          中列出的代码的键。该字段的值必须是字符串。</li>
      </ul>

      <emu-note><span class="note">Note</span><div class="note-contents">
        推荐实现使用由 Common Locale Data Repository 提供的本地化数据（可访问 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>）。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-displaynames-prototype-object">
    <h1><span class="secnum">12.3</span> Intl.DisplayNames 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.DisplayNames 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.DisplayNames.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.DisplayNames 实例，不具有 <var class="field">[[InitializedDisplayNames]]</var> 内部槽或任何 Intl.DisplayNames 实例对象的其他内部槽。</li>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-Intl.DisplayNames.prototype.constructor">
      <h1><span class="secnum">12.3.1</span> Intl.DisplayNames.prototype.constructor</h1>

      <p><code>Intl.DisplayNames.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_575"><a href="#sec-intl-displaynames-constructor">%Intl.DisplayNames%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.prototype.resolvedOptions">
      <h1><span class="secnum">12.3.2</span> Intl.DisplayNames.prototype.resolvedOptions ( )</h1>

      <p>此函数提供在对象初始化期间计算的 locale 和 options 的访问。</p>

      <emu-alg><ol><li>令 <var>displayNames</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>displayNames</var>, <var class="field">[[InitializedDisplayNames]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-displaynames-resolvedoptions-properties" id="_ref_105"><a href="#table-displaynames-resolvedoptions-properties">Table 18</a></emu-xref> 的每一行（除表头行外），按表顺序执行</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>displayNames</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>如果 <var>v</var> 不为 <emu-val>undefined</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-displaynames-resolvedoptions-properties"><figure><figcaption>Table 18: DisplayNames 实例的已解析选项</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>属性</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Style]]</var></td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Type]]</var></td>
            <td><emu-val>"type"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Fallback]]</var></td>
            <td><emu-val>"fallback"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[LanguageDisplay]]</var></td>
            <td><emu-val>"languageDisplay"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.prototype.of">
      <h1><span class="secnum">12.3.3</span> Intl.DisplayNames.prototype.of ( <var>code</var> )</h1>

      <p>当 <code>Intl.DisplayNames.prototype.of</code> 以参数 <var>code</var> 被调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>displayNames</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>displayNames</var>, <var class="field">[[InitializedDisplayNames]]</var>)。</li><li>令 <var>code</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>code</var>)。</li><li>设置 <var>code</var> 为 ?&nbsp;<emu-xref aoid="CanonicalCodeForDisplayNames" id="_ref_576"><a href="#sec-canonicalcodefordisplaynames">CanonicalCodeForDisplayNames</a></emu-xref>(<var>displayNames</var>.<var class="field">[[Type]]</var>, <var>code</var>)。</li><li>令 <var>fields</var> 为 <var>displayNames</var>.<var class="field">[[Fields]]</var>。</li><li>如果 <var>fields</var> 有字段 [[&lt;<var>code</var>&gt;]]，返回 <var>fields</var>.[[&lt;<var>code</var>&gt;]]。</li><li>如果 <var>displayNames</var>.<var class="field">[[Fallback]]</var> 是 <emu-val>"code"</emu-val>，返回 <var>code</var>。</li><li>返回 <emu-val>undefined</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.displaynames.prototype-%symbol.tostringtag%" oldids="sec-Intl.DisplayNames.prototype-@@tostringtag"><span id="sec-Intl.DisplayNames.prototype-@@tostringtag"></span>
      <h1><span class="secnum">12.3.4</span> Intl.DisplayNames.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.DisplayNames"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-displaynames-instances">
    <h1><span class="secnum">12.4</span> Intl.DisplayNames 实例的属性</h1>

    <p>Intl.DisplayNames 实例是普通对象，从 <emu-xref href="#sec-properties-of-intl-displaynames-prototype-object" id="_ref_577"><a href="#sec-properties-of-intl-displaynames-prototype-object">%Intl.DisplayNames.prototype%</a></emu-xref> 继承属性。</p>

    <p>Intl.DisplayNames 实例具有 <var class="field">[[InitializedDisplayNames]]</var> 内部槽。</p>

    <p>Intl.DisplayNames 实例还具有多个内部槽，这些槽由 <emu-xref href="#sec-intl-displaynames-constructor" title="" id="_ref_106"><a href="#sec-intl-displaynames-constructor">Intl.DisplayNames 构造函数</a></emu-xref> 计算：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于格式化的本地化<emu-xref href="#sec-language-tags" id="_ref_578"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[Style]]</var> 是字符串值之一：<emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val> 或 <emu-val>"long"</emu-val>，标识所用的显示名称样式。</li>
      <li><var class="field">[[Type]]</var> 是字符串值之一：<emu-val>"language"</emu-val>、<emu-val>"region"</emu-val>、<emu-val>"script"</emu-val>、<emu-val>"currency"</emu-val>、<emu-val>"calendar"</emu-val> 或 <emu-val>"dateTimeField"</emu-val>，标识请求的显示名称类型。
      </li>
      <li><var class="field">[[Fallback]]</var> 是字符串值之一：<emu-val>"code"</emu-val> 或 <emu-val>"none"</emu-val>，标识系统没有请求的显示名称时的回退返回。</li>
      <li><var class="field">[[LanguageDisplay]]</var> 是字符串值之一：<emu-val>"dialect"</emu-val> 或 <emu-val>"standard"</emu-val>，标识语言显示类型。仅当 <var class="field">[[Type]]</var> 为 <emu-val>"language"</emu-val> 时使用。</li>
      <li><var class="field">[[Fields]]</var> 是一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>（见 <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_107"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>），必须具有与
        <var class="field">[[Style]]</var>、<var class="field">[[Type]]</var> 和 <var class="field">[[LanguageDisplay]]</var> 相对应代码的键。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-displaynames-abstracts">
    <h1><span class="secnum">12.5</span> DisplayNames 对象的抽象操作</h1>

    <emu-clause id="sec-canonicalcodefordisplaynames" type="abstract operation" aoid="CanonicalCodeForDisplayNames">
      <h1><span class="secnum">12.5.1</span> CanonicalCodeForDisplayNames ( <var>type</var>, <var>code</var> )</h1>
      <p>The abstract operation CanonicalCodeForDisplayNames takes arguments <var>type</var> (一个字符串) and <var>code</var> (一个字符串) and returns 返回字符串的正常完成或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>type</var> 是 <emu-val>"language"</emu-val>，则</li><li>如果 <var>code</var> 不能被 <code>unicode_language_id</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>如果 <emu-xref aoid="IsWellFormedLanguageTag" id="_ref_579"><a href="#sec-iswellformedlanguagetag">IsWellFormedLanguageTag</a></emu-xref>(<var>code</var>) 为 <emu-val>false</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_580"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>code</var>)。</li><li>如果 <var>type</var> 是 <emu-val>"region"</emu-val>，则</li><li>如果 <var>code</var> 不能被 <code>unicode_region_subtag</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>code</var> 的 ASCII 大写形式。</li><li>如果 <var>type</var> 是 <emu-val>"script"</emu-val>，则</li><li>如果 <var>code</var> 不能被 <code>unicode_script_subtag</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>断言：<var>code</var> 的长度为 4，且每个代码单元都是 ASCII 字母（0x0041 到 0x005A 和 0x0061 到 0x007A，均包含）。</li><li>令 <var>first</var> 为 <var>code</var> 从 0 到 1 的子串的 ASCII 大写形式。</li><li>令 <var>rest</var> 为 <var>code</var> 从 1 开始的子串的 ASCII 小写形式。</li><li>返回 <var>first</var> 和 <var>rest</var> 的字符串拼接。</li><li>如果 <var>type</var> 是 <emu-val>"calendar"</emu-val>，则</li><li>如果 <var>code</var> 不能被 <code>type</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>如果 <var>code</var> 使用 <a href="https://unicode.org/reports/tr35/#BCP_47_Conformance">Unicode 技术标准 #35 第 1 部分核心，第 3.3 节
          BCP 47 兼容性</a> 描述的任何向后兼容语法，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>code</var> 的 ASCII 小写形式。</li><li>如果 <var>type</var> 是 <emu-val>"dateTimeField"</emu-val>，则</li><li>如果 <emu-xref aoid="IsValidDateTimeFieldCode" id="_ref_581"><a href="#sec-isvaliddatetimefieldcode">IsValidDateTimeFieldCode</a></emu-xref>(<var>code</var>) 的结果为 <emu-val>false</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>code</var>。</li><li>断言：<var>type</var> 是 <emu-val>"currency"</emu-val>。</li><li>如果 <emu-xref aoid="IsWellFormedCurrencyCode" id="_ref_582"><a href="#sec-iswellformedcurrencycode">IsWellFormedCurrencyCode</a></emu-xref>(<var>code</var>) 为 <emu-val>false</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>code</var> 的 ASCII 大写形式。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-isvaliddatetimefieldcode" type="abstract operation" aoid="IsValidDateTimeFieldCode">
      <h1><span class="secnum">12.5.2</span> IsValidDateTimeFieldCode ( <var>field</var> )</h1>
      <p>The abstract operation IsValidDateTimeFieldCode takes argument <var>field</var> (一个字符串) and returns 布尔值. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>field</var> 在 <emu-xref href="#table-validcodefordatetimefield" id="_ref_108"><a href="#table-validcodefordatetimefield">Table 19</a></emu-xref> 的 Code 列中列出，返回 <emu-val>true</emu-val>。</li><li>返回 <emu-val>false</emu-val>。</li></ol></emu-alg>

      <emu-table id="table-validcodefordatetimefield"><figure><figcaption>Table 19: DisplayNames 的日期时间字段代码</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>代码</th>
              <th>描述</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><emu-val>"era"</emu-val></td>
            <td>表示纪元字段，例如公历或儒略历中的公元或公元前。</td>
          </tr>
          <tr>
            <td><emu-val>"year"</emu-val></td>
            <td>表示年份（在纪元内）。</td>
          </tr>
          <tr>
            <td><emu-val>"quarter"</emu-val></td>
            <td>表示季度，例如 Q2、第二季度等。</td>
          </tr>
          <tr>
            <td><emu-val>"month"</emu-val></td>
            <td>表示月份，例如 Sep、September 等。</td>
          </tr>
          <tr>
            <td><emu-val>"weekOfYear"</emu-val></td>
            <td>表示一年中的周数。</td>
          </tr>
          <tr>
            <td><emu-val>"weekday"</emu-val></td>
            <td>表示星期几，例如 Tue、Tuesday 等。</td>
          </tr>
          <tr>
            <td><emu-val>"day"</emu-val></td>
            <td>表示月中的日期。</td>
          </tr>
          <tr>
            <td><emu-val>"dayPeriod"</emu-val></td>
            <td>表示日间时段，例如上午、下午等，或中午、傍晚等。</td>
          </tr>
          <tr>
            <td><emu-val>"hour"</emu-val></td>
            <td>表示小时。</td>
          </tr>
          <tr>
            <td><emu-val>"minute"</emu-val></td>
            <td>表示分钟。</td>
          </tr>
          <tr>
            <td><emu-val>"second"</emu-val></td>
            <td>表示秒。</td>
          </tr>
          <tr>
            <td><emu-val>"timeZoneName"</emu-val></td>
            <td>表示时区名称，例如 PDT、Pacific Daylight Time 等。</td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="durationformat-objects">
  <h1><span class="secnum">13</span> DurationFormat 对象</h1>

  <emu-clause id="sec-intl-durationformat-constructor">
    <h1><span class="secnum">13.1</span> Intl.DurationFormat 构造函数</h1>

    <p>Intl.DurationFormat 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.DurationFormat%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_583"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"DurationFormat"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_584"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_109"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-Intl.DurationFormat">
      <h1><span class="secnum">13.1.1</span> Intl.DurationFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当以可选参数 <var>locales</var> 和 <var>options</var> 调用 <code>Intl.DurationFormat</code> 函数时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>durationFormat</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.DurationFormatPrototype%"</emu-val>, «
        <var class="field">[[InitializedDurationFormat]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[NumberingSystem]]</var>, <var class="field">[[Style]]</var>, <var class="field">[[YearsOptions]]</var>, <var class="field">[[MonthsOptions]]</var>,
        <var class="field">[[WeeksOptions]]</var>, <var class="field">[[DaysOptions]]</var>, <var class="field">[[HoursOptions]]</var>, <var class="field">[[MinutesOptions]]</var>, <var class="field">[[SecondsOptions]]</var>,
        <var class="field">[[MillisecondsOptions]]</var>, <var class="field">[[MicrosecondsOptions]]</var>, <var class="field">[[NanosecondsOptions]]</var>, <var class="field">[[HourMinuteSeparator]]</var>,
        <var class="field">[[MinuteSecondSeparator]]</var>, <var class="field">[[FractionalDigits]]</var>&nbsp;»)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_585"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-durationformat-constructor" id="_ref_586"><a href="#sec-intl-durationformat-constructor">%Intl.DurationFormat%</a></emu-xref>, <emu-xref href="#sec-intl-durationformat-constructor" id="_ref_587"><a href="#sec-intl-durationformat-constructor">%Intl.DurationFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var>,
        <var>locales</var>, <var>options</var>)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>设置 <var>durationFormat</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>resolvedLocaleData</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>令 <var>digitalFormat</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[DigitalFormat]]</var>。</li><li>设置 <var>durationFormat</var>.<var class="field">[[HourMinuteSeparator]]</var> 为 <var>digitalFormat</var>.<var class="field">[[HourMinuteSeparator]]</var>。</li><li>设置 <var>durationFormat</var>.<var class="field">[[MinuteSecondSeparator]]</var> 为 <var>digitalFormat</var>.<var class="field">[[MinuteSecondSeparator]]</var>。</li><li>设置 <var>durationFormat</var>.<var class="field">[[NumberingSystem]]</var> 为 <var>r</var>.<var class="field">[[nu]]</var>。</li><li>令 <var>style</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_588"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"digital"</emu-val>&nbsp;»,
        <emu-val>"short"</emu-val>)。</li><li>设置 <var>durationFormat</var>.<var class="field">[[Style]]</var> 为 <var>style</var>。</li><li>令 <var>prevStyle</var> 为空字符串。</li><li>对 <emu-xref href="#table-durationformat" id="_ref_110"><a href="#table-durationformat">Table 20</a></emu-xref> 的每一行（除表头行），按表顺序，执行：</li><li>令 <var>slot</var> 为当前行的 Internal Slot 值。</li><li>令 <var>unit</var> 为当前行的 Unit 值。</li><li>令 <var>styles</var> 为当前行的 Styles 值。</li><li>令 <var>digitalBase</var> 为当前行的 Digital Default 值。</li><li>令 <var>unitOptions</var> 为 ?&nbsp;<emu-xref aoid="GetDurationUnitOptions" id="_ref_589"><a href="#sec-getdurationunitoptions">GetDurationUnitOptions</a></emu-xref>(<var>unit</var>, <var>options</var>, <var>style</var>, <var>styles</var>, <var>digitalBase</var>, <var>prevStyle</var>,
        <var>digitalFormat</var>.<var class="field">[[TwoDigitHours]]</var>)。</li><li>设置 <var>durationFormat</var> 的内部槽名为 <var>slot</var> 的值为 <var>unitOptions</var>。</li><li>如果 <var>unit</var> 是 <emu-val>"hours"</emu-val>、<emu-val>"minutes"</emu-val>、<emu-val>"seconds"</emu-val>、<emu-val>"milliseconds"</emu-val> 或 <emu-val>"microseconds"</emu-val> 之一，则</li><li>设置 <var>prevStyle</var> 为 <var>unitOptions</var>.<var class="field">[[Style]]</var>。</li><li>设置 <var>durationFormat</var>.<var class="field">[[FractionalDigits]]</var> 为 ?&nbsp;<emu-xref aoid="GetNumberOption" id="_ref_590"><a href="#sec-getnumberoption">GetNumberOption</a></emu-xref>(<var>options</var>, <emu-val>"fractionalDigits"</emu-val>, 0, 9,
        <emu-val>undefined</emu-val>)。</li><li>返回 <var>durationFormat</var>。</li></ol></emu-alg>
      <emu-table id="table-durationformat"><figure><figcaption>Table 20: DurationFormat 实例的内部槽和属性名</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Unit</th>
              <th>Styles</th>
              <th>Digital Default</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[YearsOptions]]</var></td>
            <td><emu-val>"years"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val> »</td>
            <td><emu-val>"short"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[MonthsOptions]]</var></td>
            <td><emu-val>"months"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val> »</td>
            <td><emu-val>"short"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[WeeksOptions]]</var></td>
            <td><emu-val>"weeks"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val> »</td>
            <td><emu-val>"short"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[DaysOptions]]</var></td>
            <td><emu-val>"days"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val> »</td>
            <td><emu-val>"short"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[HoursOptions]]</var></td>
            <td><emu-val>"hours"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"numeric"</emu-val>, <emu-val>"2-digit"</emu-val> »</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[MinutesOptions]]</var></td>
            <td><emu-val>"minutes"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"numeric"</emu-val>, <emu-val>"2-digit"</emu-val> »</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[SecondsOptions]]</var></td>
            <td><emu-val>"seconds"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"numeric"</emu-val>, <emu-val>"2-digit"</emu-val> »</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[MillisecondsOptions]]</var></td>
            <td><emu-val>"milliseconds"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"numeric"</emu-val> »</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[MicrosecondsOptions]]</var></td>
            <td><emu-val>"microseconds"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"numeric"</emu-val> »</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[NanosecondsOptions]]</var></td>
            <td><emu-val>"nanoseconds"</emu-val></td>
            <td>« <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"numeric"</emu-val> »</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-durationformat-constructor">
    <h1><span class="secnum">13.2</span> Intl.DurationFormat 构造函数的属性</h1>

    <p>Intl.DurationFormat 构造函数：</p>
    <ul>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-Intl.DurationFormat.prototype">
      <h1><span class="secnum">13.2.1</span> Intl.DurationFormat.prototype</h1>

      <p><code>Intl.DurationFormat.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-durationformat-prototype-object" id="_ref_591"><a href="#sec-properties-of-intl-durationformat-prototype-object">%Intl.DurationFormat.prototype%</a></emu-xref>。</p>

      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.DurationFormat.supportedLocalesOf">
      <h1><span class="secnum">13.2.2</span> Intl.DurationFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当以参数 <var>locales</var> 和 <var>options</var> 调用 <code>supportedLocalesOf</code> 方法时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-durationformat-constructor" id="_ref_592"><a href="#sec-intl-durationformat-constructor">%Intl.DurationFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_593"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_594"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DurationFormat-internal-slots">
      <h1><span class="secnum">13.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_111"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « <emu-val>"nu"</emu-val> »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « { <var class="field">[[Key]]</var>: <emu-val>"nu"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"numberingSystem"</emu-val> } »。</p>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_112"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义，并且对所有区域设置值 <var>locale</var>
        有以下附加约束：</p>

      <ul>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须是包含 <var class="field">[[nu]]</var> 和 <var class="field">[[DigitalFormat]]</var> 字段的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>。</li>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[nu]]</var> 必须是 <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_113"><a href="#sec-intl.numberformat-internal-slots">16.2.3</a></emu-xref> 指定的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>，并且不得包含 <emu-val>"native"</emu-val>、<emu-val>"traditio"</emu-val> 或
          <emu-val>"finance"</emu-val>。</li>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]].<var class="field">[[DigitalFormat]]</var> 必须是包含与该区域设置可用的每个数字系统对应的键的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>。每个键对应的值必须是包含以下字段的
          <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>：
          <ul>
            <li><var class="field">[[HourMinuteSeparator]]</var> 必须是字符串值，表示在使用 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val> 样式时该区域设置和数字系统组合下小时与分钟之间的适当分隔符。</li>
            <li><var class="field">[[MinuteSecondSeparator]]</var> 必须是字符串值，表示在使用 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val> 样式时该区域设置和数字系统组合下分钟与秒之间的适当分隔符。</li>
            <li><var class="field">[[TwoDigitHours]]</var> 必须是布尔值，指示在使用 <emu-val>"numeric"</emu-val> 样式时小时是否总是以两位数字显示。</li>
          </ul>
        </li>
      </ul>

      <emu-note><span class="note">Note</span><div class="note-contents">建议实现使用 Common Locale Data Repository 提供的区域数据（可在 <a href="http://cldr.unicode.org/">http://cldr.unicode.org/</a> 获取）。</div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-durationformat-prototype-object">
    <h1><span class="secnum">13.3</span> Intl.DurationFormat 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.DurationFormat 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.DurationFormat.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.DurationFormat 实例，不具有 <var class="field">[[InitializedDurationFormat]]</var> 内部槽，也没有 Intl.DurationFormat 实例对象的其他内部槽。</li>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-Intl.DurationFormat.prototype.constructor">
      <h1><span class="secnum">13.3.1</span> Intl.DurationFormat.prototype.constructor</h1>

      <p><code>Intl.DurationFormat.prototype.constructor</code> 的初始值为内在对象 <emu-xref href="#sec-intl-durationformat-constructor" id="_ref_595"><a href="#sec-intl-durationformat-constructor">%Intl.DurationFormat%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.DurationFormat.prototype.resolvedOptions">
      <h1><span class="secnum">13.3.2</span> Intl.DurationFormat.prototype.resolvedOptions ( )</h1>

      <p>此函数提供对对象初始化时计算的区域设置和选项的访问。</p>

      <emu-alg><ol><li>令 <var>df</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>df</var>, <var class="field">[[InitializedDurationFormat]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-durationformat-resolvedoptions-properties" id="_ref_114"><a href="#table-durationformat-resolvedoptions-properties">Table 21</a></emu-xref> 的每一行（除表头行），按表顺序，执行：</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>df</var> 的内部槽名为当前行 Internal Slot 值的值。</li><li>如果 <var>v</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果当前行有 Conversion 值，令 <var>conversion</var> 为该值；否则令 <var>conversion</var> 为 <emu-const>empty</emu-const>。</li><li>如果 <var>conversion</var> 为 <emu-const>number</emu-const>，则</li><li>设置 <var>v</var> 为 <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>v</var>)。</li><li>否则如果 <var>conversion</var> 不是 <emu-const>empty</emu-const>，则</li><li>断言：<var>conversion</var> 为 <emu-const>style+display</emu-const>，且 <var>v</var> 为 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>。</li><li>注：<var>v</var>.<var class="field">[[Style]]</var> 将以属性名 <var>p</var>（复数 Temporal 单位）表示，然后 <var>v</var>.<var class="field">[[Display]]</var> 以属性名 <var>p</var> 后缀 <emu-val>"Display"</emu-val> 表示。</li><li>令 <var>style</var> 为 <var>v</var>.<var class="field">[[Style]]</var>。</li><li>如果 <var>style</var> 为 <emu-val>"fractional"</emu-val>，则</li><li>断言：<emu-xref aoid="IsFractionalSecondUnitName" id="_ref_596"><a href="#sec-isfractionalsecondunitname">IsFractionalSecondUnitName</a></emu-xref>(<var>p</var>) 为 <emu-val>true</emu-val>。</li><li>设置 <var>style</var> 为 <emu-val>"numeric"</emu-val>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>style</var>)。</li><li>设置 <var>p</var> 为 <var>p</var> 与 <emu-val>"Display"</emu-val> 的字符串拼接。</li><li>设置 <var>v</var> 为 <var>v</var>.<var class="field">[[Display]]</var>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-durationformat-resolvedoptions-properties"><figure><figcaption>Table 21: DurationFormat 实例的 resolvedOptions 属性</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
              <th>Conversion</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[NumberingSystem]]</var></td>
            <td><emu-val>"numberingSystem"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Style]]</var></td>
            <td><emu-val>"style"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[YearsOptions]]</var></td>
            <td><emu-val>"years"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MonthsOptions]]</var></td>
            <td><emu-val>"months"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[WeeksOptions]]</var></td>
            <td><emu-val>"weeks"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[DaysOptions]]</var></td>
            <td><emu-val>"days"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[HoursOptions]]</var></td>
            <td><emu-val>"hours"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MinutesOptions]]</var></td>
            <td><emu-val>"minutes"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[SecondsOptions]]</var></td>
            <td><emu-val>"seconds"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MillisecondsOptions]]</var></td>
            <td><emu-val>"milliseconds"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MicrosecondsOptions]]</var></td>
            <td><emu-val>"microseconds"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[NanosecondsOptions]]</var></td>
            <td><emu-val>"nanoseconds"</emu-val></td>
            <td><emu-const>style+display</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[FractionalDigits]]</var></td>
            <td><emu-val>"fractionalDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-Intl.DurationFormat.prototype.format">
      <h1><span class="secnum">13.3.3</span> Intl.DurationFormat.prototype.format ( <var>duration</var> )</h1>

      <p>当调用 <code>format</code> 方法并传入参数 <var>duration</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>df</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>df</var>, <var class="field">[[InitializedDurationFormat]]</var>)。</li><li>令 <var>record</var> 为 ?&nbsp;<emu-xref aoid="ToDurationRecord" id="_ref_597"><a href="#sec-todurationrecord">ToDurationRecord</a></emu-xref>(<var>duration</var>)。</li><li>令 <var>parts</var> 为 <emu-xref aoid="PartitionDurationFormatPattern" id="_ref_598"><a href="#sec-partitiondurationformatpattern">PartitionDurationFormatPattern</a></emu-xref>(<var>df</var>, <var>record</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对每个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DurationFormat.prototype.formatToParts">
      <h1><span class="secnum">13.3.4</span> Intl.DurationFormat.prototype.formatToParts ( <var>duration</var> )</h1>

      <p>当调用 <code>formatToParts</code> 方法并传入参数 <var>duration</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>df</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>df</var>, <var class="field">[[InitializedDurationFormat]]</var>)。</li><li>令 <var>record</var> 为 ?&nbsp;<emu-xref aoid="ToDurationRecord" id="_ref_599"><a href="#sec-todurationrecord">ToDurationRecord</a></emu-xref>(<var>duration</var>)。</li><li>令 <var>parts</var> 为 <emu-xref aoid="PartitionDurationFormatPattern" id="_ref_600"><a href="#sec-partitiondurationformatpattern">PartitionDurationFormatPattern</a></emu-xref>(<var>df</var>, <var>record</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对每个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>令 <var>obj</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>obj</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>obj</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>如果 <var>part</var>.<var class="field">[[Unit]]</var> 不是 <emu-const>empty</emu-const>，执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>obj</var>, <emu-val>"unit"</emu-val>, <var>part</var>.<var class="field">[[Unit]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>n</var>), <var>obj</var>)。</li><li>设置 <var>n</var> 为 <var>n</var> + 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DurationFormat.prototype-%symbol.tostringtag%">
      <h1><span class="secnum">13.3.5</span> Intl.DurationFormat.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.DurationFormat"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-durationformat-instances">
    <h1><span class="secnum">13.4</span> Intl.DurationFormat 实例的属性</h1>

    <p>Intl.DurationFormat 实例从 <emu-xref href="#sec-properties-of-intl-durationformat-prototype-object" id="_ref_601"><a href="#sec-properties-of-intl-durationformat-prototype-object">%Intl.DurationFormat.prototype%</a></emu-xref> 继承属性。</p>
    <p>Intl.DurationFormat 实例具有 <var class="field">[[InitializedDurationFormat]]</var> 内部槽。</p>
    <p>Intl.DurationFormat 实例还具有多个内部槽，这些槽由 <emu-xref href="#sec-intl-durationformat-constructor" title="" id="_ref_115"><a href="#sec-intl-durationformat-constructor">Intl.DurationFormat 构造函数</a></emu-xref> 计算：
    </p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于格式化的区域设置的<emu-xref href="#sec-language-tags" id="_ref_602"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[NumberingSystem]]</var> 是一个字符串值，表示用于格式化的 <a href="https://unicode.org/reports/tr35/#UnicodeNumberSystemIdentifier">Unicode 数字系统标识符</a>。</li>
      <li><var class="field">[[Style]]</var> 是 <emu-val>"long"</emu-val>、<emu-val>"short"</emu-val>、<emu-val>"narrow"</emu-val> 或 <emu-val>"digital"</emu-val> 之一的字符串值，表示使用的持续时间格式化样式。</li>
      <li><var class="field">[[YearsOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Years]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[MonthsOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Months]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[WeeksOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Weeks]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[DaysOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Days]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[HoursOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Hours]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[MinutesOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Minutes]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[SecondsOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Seconds]]</var> 字段的格式化样式和显示条件。</li>
      <li><var class="field">[[MillisecondsOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Milliseconds]]</var> 字段的格式化样式和显示条件。
      </li>
      <li><var class="field">[[MicrosecondsOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Microseconds]]</var> 字段的格式化样式和显示条件。
      </li>
      <li><var class="field">[[NanosecondsOptions]]</var> 是一个 Duration Unit Options <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，标识 Duration <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 的 <var class="field">[[Nanoseconds]]</var> 字段的格式化样式和显示条件。
      </li>
      <li><var class="field">[[HourMinuteSeparator]]</var> 是一个字符串值，表示当小时和分钟都显示且都使用数字样式格式化时，小时与分钟之间使用的分隔符。</li>
      <li><var class="field">[[MinuteSecondSeparator]]</var> 是一个字符串值，表示当分钟和秒都显示且都使用数字样式格式化时，分钟与秒之间使用的分隔符。</li>
      <li><var class="field">[[FractionalDigits]]</var> 是 <emu-val>undefined</emu-val> 或非负整数，表示数字样式下使用的小数位数。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-durationformat-abstracts">
    <h1><span class="secnum">13.5</span> DurationFormat 对象的抽象操作</h1>

    <emu-clause id="sec-duration-records">
      <h1><span class="secnum">13.5.1</span> 持续时间记录</h1>
      <p><dfn variants="Duration Records" tabindex="-1">持续时间记录</dfn> 是用于表示持续时间的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 值。</p>
      <p>持续时间记录具有 <emu-xref href="#table-duration-record-fields" id="_ref_116"><a href="#table-duration-record-fields">Table 22</a></emu-xref> 中列出的字段。</p>
      <emu-table id="table-duration-record-fields" caption="持续时间记录字段"><figure><figcaption>Table 22: <emu-xref href="#sec-duration-records" id="_ref_603"><a href="#sec-duration-records">持续时间记录</a></emu-xref>字段</figcaption>
        <table class="real-table">
          <tbody><tr>
            <th>字段</th>
            <th>含义</th>
          </tr>
          <tr>
            <td><var class="field">[[Years]]</var></td>
            <td>
              持续时间中的年数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Months]]</var></td>
            <td>
              持续时间中的月数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Weeks]]</var></td>
            <td>
              持续时间中的周数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Days]]</var></td>
            <td>
              持续时间中的天数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Hours]]</var></td>
            <td>
              持续时间中的小时数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Minutes]]</var></td>
            <td>
              持续时间中的分钟数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Seconds]]</var></td>
            <td>
              持续时间中的秒数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Milliseconds]]</var></td>
            <td>
              持续时间中的毫秒数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Microseconds]]</var></td>
            <td>
              持续时间中的微秒数。
            </td>
          </tr>
          <tr>
            <td><var class="field">[[Nanoseconds]]</var></td>
            <td>
              持续时间中的纳秒数。
            </td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-tointegerifintegral" oldids="sec-tointegerwithoutrounding" type="abstract operation" aoid="ToIntegerIfIntegral"><span id="sec-tointegerwithoutrounding"></span>
      <h1><span class="secnum">13.5.2</span> ToIntegerIfIntegral ( <var>argument</var> )</h1>
      <p>The abstract operation ToIntegerIfIntegral takes argument <var>argument</var> (一个 ECMAScript 语言值) and returns 返回一个整数的正常完成，或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>number</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>argument</var>)。</li><li>如果 <var>number</var> 不是整数 Number，则抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>number</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-todurationrecord" type="abstract operation" aoid="ToDurationRecord">
      <h1><span class="secnum">13.5.3</span> ToDurationRecord ( <var>input</var> )</h1>
      <p>The abstract operation ToDurationRecord takes argument <var>input</var> (一个 ECMAScript 语言值) and returns 返回一个<emu-xref href="#sec-duration-records" id="_ref_604"><a href="#sec-duration-records">持续时间记录</a></emu-xref>的正常完成，或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>如果 <var>input</var> 不是对象，则</li><li>如果 <var>input</var> 是字符串，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>result</var> 为一个新<emu-xref href="#sec-duration-records" id="_ref_605"><a href="#sec-duration-records">持续时间记录</a></emu-xref>，每个字段初始值为 0。</li><li>令 <var>days</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"days"</emu-val>)。</li><li>如果 <var>days</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Days]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_606"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>days</var>)。</li><li>令 <var>hours</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"hours"</emu-val>)。</li><li>如果 <var>hours</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Hours]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_607"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>hours</var>)。</li><li>令 <var>microseconds</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"microseconds"</emu-val>)。</li><li>如果 <var>microseconds</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Microseconds]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_608"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>microseconds</var>)。</li><li>令 <var>milliseconds</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"milliseconds"</emu-val>)。</li><li>如果 <var>milliseconds</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Milliseconds]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_609"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>milliseconds</var>)。</li><li>令 <var>minutes</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"minutes"</emu-val>)。</li><li>如果 <var>minutes</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Minutes]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_610"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>minutes</var>)。</li><li>令 <var>months</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"months"</emu-val>)。</li><li>如果 <var>months</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Months]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_611"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>months</var>)。</li><li>令 <var>nanoseconds</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"nanoseconds"</emu-val>)。</li><li>如果 <var>nanoseconds</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Nanoseconds]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_612"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>nanoseconds</var>)。</li><li>令 <var>seconds</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"seconds"</emu-val>)。</li><li>如果 <var>seconds</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Seconds]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_613"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>seconds</var>)。</li><li>令 <var>weeks</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"weeks"</emu-val>)。</li><li>如果 <var>weeks</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Weeks]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_614"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>weeks</var>)。</li><li>令 <var>years</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>input</var>, <emu-val>"years"</emu-val>)。</li><li>如果 <var>years</var> 不是 <emu-val>undefined</emu-val>，则设置 <var>result</var>.<var class="field">[[Years]]</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerIfIntegral" id="_ref_615"><a href="#sec-tointegerifintegral">ToIntegerIfIntegral</a></emu-xref>(<var>years</var>)。</li><li>如果 <var>years</var>、<var>months</var>、<var>weeks</var>、<var>days</var>、<var>hours</var>、<var>minutes</var>、<var>seconds</var>、<var>milliseconds</var>、<var>microseconds</var> 和 <var>nanoseconds</var>
        都是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <emu-xref aoid="IsValidDuration" id="_ref_616"><a href="#sec-isvalidduration">IsValidDuration</a></emu-xref>( <var>result</var>.<var class="field">[[Years]]</var>, <var>result</var>.<var class="field">[[Months]]</var>, <var>result</var>.<var class="field">[[Weeks]]</var>, <var>result</var>.<var class="field">[[Days]]</var>,
        <var>result</var>.<var class="field">[[Hours]]</var>, <var>result</var>.<var class="field">[[Minutes]]</var>, <var>result</var>.<var class="field">[[Seconds]]</var>, <var>result</var>.<var class="field">[[Milliseconds]]</var>,
        <var>result</var>.<var class="field">[[Microseconds]]</var>, <var>result</var>.[[Nanoseconds]) 为 <emu-val>false</emu-val>，则</li><li>抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-durationsign" type="abstract operation" aoid="DurationSign">
      <h1><span class="secnum">13.5.4</span> DurationSign ( <var>duration</var> )</h1>
      <p>The abstract operation DurationSign takes argument <var>duration</var> (一个<emu-xref href="#sec-duration-records" id="_ref_617"><a href="#sec-duration-records">持续时间记录</a></emu-xref>) and returns -1, 0 或 1. It performs the following steps when called:</p>
      <emu-alg><ol><li>对于 « <var>duration</var>.<var class="field">[[Years]]</var>, <var>duration</var>.<var class="field">[[Months]]</var>, <var>duration</var>.<var class="field">[[Weeks]]</var>, <var>duration</var>.<var class="field">[[Days]]</var>,
        <var>duration</var>.<var class="field">[[Hours]]</var>, <var>duration</var>.<var class="field">[[Minutes]]</var>, <var>duration</var>.<var class="field">[[Seconds]]</var>, <var>duration</var>.<var class="field">[[Milliseconds]]</var>,
        <var>duration</var>.<var class="field">[[Microseconds]]</var>, <var>duration</var>.<var class="field">[[Nanoseconds]]</var>&nbsp;» 中的每个值 <var>v</var>，执行</li><li>如果 <var>v</var> &lt; 0，返回 -1。</li><li>如果 <var>v</var> &gt; 0，返回 1。</li><li>返回 0。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-isvalidduration" type="abstract operation" aoid="IsValidDuration">
      <h1><span class="secnum">13.5.5</span> IsValidDuration ( <var>years</var>, <var>months</var>, <var>weeks</var>, <var>days</var>, <var>hours</var>, <var>minutes</var>, <var>seconds</var>, <var>milliseconds</var>, <var>microseconds</var>, <var>nanoseconds</var> )</h1>
      <p>The abstract operation IsValidDuration takes arguments <var>years</var> (一个整数), <var>months</var> (一个整数), <var>weeks</var> (一个整数), <var>days</var> (一个整数), <var>hours</var> (一个整数), <var>minutes</var> (一个整数), <var>seconds</var> (一个整数), <var>milliseconds</var> (一个整数), <var>microseconds</var> (一个整数), and <var>nanoseconds</var> (一个整数) and returns 一个布尔值. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>sign</var> 为 0。</li><li>对于 « <var>years</var>, <var>months</var>, <var>weeks</var>, <var>days</var>, <var>hours</var>, <var>minutes</var>, <var>seconds</var>, <var>milliseconds</var>, <var>microseconds</var>,
        <var>nanoseconds</var>&nbsp;» 中的每个值 <var>v</var>，执行</li><li>如果 <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>v</var>) 不是有限值，返回 <emu-val>false</emu-val>。</li><li>如果 <var>v</var> &lt; 0，则</li><li>如果 <var>sign</var> &gt; 0，返回 <emu-val>false</emu-val>。</li><li>设置 <var>sign</var> 为 -1。</li><li>否则如果 <var>v</var> &gt; 0，则</li><li>如果 <var>sign</var> &lt; 0，返回 <emu-val>false</emu-val>。</li><li>设置 <var>sign</var> 为 1。</li><li>如果 <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>years</var>) ≥ 2<sup>32</sup>，返回 <emu-val>false</emu-val>。</li><li>如果 <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>months</var>) ≥ 2<sup>32</sup>，返回 <emu-val>false</emu-val>。</li><li>如果 <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>weeks</var>) ≥ 2<sup>32</sup>，返回 <emu-val>false</emu-val>。</li><li>令 <var>normalizedSeconds</var> 为 <var>days</var> × 86,400 + <var>hours</var> × 3600 + <var>minutes</var> × 60 + <var>seconds</var> + <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>milliseconds</var>))
        × 10<sup>-3</sup> + <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>microseconds</var>)) × 10<sup>-6</sup> + <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>nanoseconds</var>)) × 10<sup>-9</sup>。</li><li>注：上述步骤不能直接用浮点运算实现。分别乘以 10<sup>-3</sup>、10<sup>-6</sup> 和 10<sup>-9</sup> 时，<var>milliseconds</var>、<var>microseconds</var> 或
        <var>nanoseconds</var> 是不安全整数时可能不精确。可以用 C++ 的 <code>std::remquo()</code> 实现，或用字符串操作获得精确结果，因为乘的是 10 的幂。</li><li>如果 <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>normalizedSeconds</var>) ≥ 2<sup>53</sup>，返回 <emu-val>false</emu-val>。</li><li>返回 <emu-val>true</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getdurationunitoptions" type="abstract operation" aoid="GetDurationUnitOptions">
      <h1><span class="secnum">13.5.6</span> GetDurationUnitOptions ( <var>unit</var>, <var>options</var>, <var>baseStyle</var>, <var>stylesList</var>, <var>digitalBase</var>, <var>prevStyle</var>, <var>twoDigitHours</var> )</h1>
      <p>The abstract operation GetDurationUnitOptions takes arguments <var>unit</var> (一个字符串), <var>options</var> (一个对象), <var>baseStyle</var> (一个字符串), <var>stylesList</var> (字符串列表), <var>digitalBase</var> (一个字符串), <var>prevStyle</var> (一个字符串), and <var>twoDigitHours</var> (一个布尔值) and returns 返回一个<emu-xref href="#durationformat-unit-options-record" id="_ref_618"><a href="#durationformat-unit-options-record">持续时间单位选项记录</a></emu-xref>的正常完成，或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>style</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_619"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <var>unit</var>, <emu-const>string</emu-const>, <var>stylesList</var>, <emu-val>undefined</emu-val>)。</li><li>令 <var>displayDefault</var> 为 <emu-val>"always"</emu-val>。</li><li>如果 <var>style</var> 是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>baseStyle</var> 是 <emu-val>"digital"</emu-val>，则</li><li>设置 <var>style</var> 为 <var>digitalBase</var>。</li><li>如果 <var>unit</var> 不是 <emu-val>"hours"</emu-val>、<emu-val>"minutes"</emu-val> 或 <emu-val>"seconds"</emu-val> 之一，则设置 <var>displayDefault</var> 为 <emu-val>"auto"</emu-val>。</li><li>否则如果 <var>prevStyle</var> 是 <emu-val>"fractional"</emu-val>、<emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val> 之一，则</li><li>设置 <var>style</var> 为 <emu-val>"numeric"</emu-val>。</li><li>如果 <var>unit</var> 不是 <emu-val>"minutes"</emu-val> 或 <emu-val>"seconds"</emu-val>，则设置 <var>displayDefault</var> 为 <emu-val>"auto"</emu-val>。</li><li>否则，</li><li>设置 <var>style</var> 为 <var>baseStyle</var>。</li><li>设置 <var>displayDefault</var> 为 <emu-val>"auto"</emu-val>。</li><li>如果 <var>style</var> 是 <emu-val>"numeric"</emu-val> 且 <emu-xref aoid="IsFractionalSecondUnitName" id="_ref_620"><a href="#sec-isfractionalsecondunitname">IsFractionalSecondUnitName</a></emu-xref>(<var>unit</var>) 为 <emu-val>true</emu-val>，则</li><li>设置 <var>style</var> 为 <emu-val>"fractional"</emu-val>。</li><li>设置 <var>displayDefault</var> 为 <emu-val>"auto"</emu-val>。</li><li>令 <var>displayField</var> 为 <var>unit</var> 与 <emu-val>"Display"</emu-val> 的字符串拼接。</li><li>令 <var>display</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_621"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <var>displayField</var>, <emu-const>string</emu-const>, « <emu-val>"auto"</emu-val>, <emu-val>"always"</emu-val>&nbsp;», <var>displayDefault</var>)。</li><li>执行 ?&nbsp;<emu-xref aoid="ValidateDurationUnitStyle" id="_ref_622"><a href="#sec-validatedurationunitstyle">ValidateDurationUnitStyle</a></emu-xref>(<var>unit</var>, <var>style</var>, <var>display</var>, <var>prevStyle</var>)。</li><li>如果 <var>unit</var> 是 <emu-val>"hours"</emu-val> 且 <var>twoDigitHours</var> 为 <emu-val>true</emu-val>，设置 <var>style</var> 为 <emu-val>"2-digit"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"minutes"</emu-val> 或 <emu-val>"seconds"</emu-val> 且 <var>prevStyle</var> 是 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val>，设置 <var>style</var> 为 <emu-val>"2-digit"</emu-val>。</li><li>返回<emu-xref href="#durationformat-unit-options-record" id="_ref_623"><a href="#durationformat-unit-options-record">持续时间单位选项记录</a></emu-xref> { <var class="field">[[Style]]</var>: <var>style</var>, <var class="field">[[Display]]</var>: <var>display</var>&nbsp;}。</li></ol></emu-alg>

      <emu-clause id="sec-durationformat-unit-options-record">
        <h1><span class="secnum">13.5.6.1</span> 持续时间单位选项记录</h1>

        <p>每个 <dfn id="durationformat-unit-options-record" tabindex="-1">持续时间单位选项记录</dfn> 都具有 <emu-xref href="#table-durationformat-unit-options-record" id="_ref_117"><a href="#table-durationformat-unit-options-record">Table 23</a></emu-xref> 中定义的字段。</p>
        <emu-table id="table-durationformat-unit-options-record"><figure><figcaption>Table 23: <emu-xref href="#durationformat-unit-options-record" id="_ref_624"><a href="#durationformat-unit-options-record">持续时间单位选项记录</a></emu-xref></figcaption>
          
          <table class="real-table">
            <thead>
              <tr>
                <th>字段名</th>
                <th>值类型</th>
              </tr>
            </thead>
            <tbody><tr>
              <td><var class="field">[[Style]]</var></td>
              <td><emu-xref href="#table-durationformat" id="_ref_118"><a href="#table-durationformat">Table 20</a></emu-xref> 的 Styles 列中的字符串</td>
            </tr>
            <tr>
              <td><var class="field">[[Display]]</var></td>
              <td><emu-val>"auto"</emu-val> 或 <emu-val>"always"</emu-val></td>
            </tr>
          </tbody></table>
        </figure></emu-table>
      </emu-clause>

      <emu-clause id="sec-validatedurationunitstyle" type="abstract operation" aoid="ValidateDurationUnitStyle">
        <h1><span class="secnum">13.5.6.2</span> ValidateDurationUnitStyle ( <var>unit</var>, <var>style</var>, <var>display</var>, <var>prevStyle</var> )</h1>
        <p>The abstract operation ValidateDurationUnitStyle takes arguments <var>unit</var> (一个字符串), <var>style</var> (一个字符串), <var>display</var> (一个字符串), and <var>prevStyle</var> (一个字符串) and returns 返回 <emu-const>unused</emu-const> 的正常完成，或抛出完成. It performs the following steps when called:</p>
        <emu-alg><ol><li>如果 <var>display</var> 是 <emu-val>"always"</emu-val> 且 <var>style</var> 是 <emu-val>"fractional"</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>如果 <var>prevStyle</var> 是 <emu-val>"fractional"</emu-val> 且 <var>style</var> 不是 <emu-val>"fractional"</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>如果 <var>prevStyle</var> 是 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val> 且 <var>style</var> 不是 <emu-val>"fractional"</emu-val>、<emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val> 之一，抛出
          <emu-val>RangeError</emu-val> 异常。</li><li>返回 <emu-const>unused</emu-const>。</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents"><var>unit</var> 在上述算法中未被引用，但建议实现用于构造抛出异常的消息。</div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-computefractionaldigits" oldids="sec-addfractionaldigits" type="abstract operation" aoid="ComputeFractionalDigits"><span id="sec-addfractionaldigits"></span>
      <h1><span class="secnum">13.5.7</span> ComputeFractionalDigits ( <var>durationFormat</var>, <var>duration</var> )</h1>
      <p>The abstract operation ComputeFractionalDigits takes arguments <var>durationFormat</var> (一个 DurationFormat 对象) and <var>duration</var> (一个<emu-xref href="#sec-duration-records" id="_ref_625"><a href="#sec-duration-records">持续时间记录</a></emu-xref>) and returns 一个数学值. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>result</var> 为 0。</li><li>令 <var>exponent</var> 为 3。</li><li>对 <emu-xref href="#table-partition-duration-format-pattern" id="_ref_119"><a href="#table-partition-duration-format-pattern">Table 24</a></emu-xref> 的每一行（除表头行），按表顺序，执行</li><li>令 <var>unitOptions</var> 为 <var>durationFormat</var> 的内部槽名为当前行 Internal Slot 值的值。</li><li>如果 <var>unitOptions</var>.<var class="field">[[Style]]</var> 为 <emu-val>"fractional"</emu-val>，则</li><li>令 <var>unit</var> 为当前行的 Unit 值。</li><li>断言：<emu-xref aoid="IsFractionalSecondUnitName" id="_ref_626"><a href="#sec-isfractionalsecondunitname">IsFractionalSecondUnitName</a></emu-xref>(<var>unit</var>) 为 <emu-val>true</emu-val>。</li><li>令 <var>value</var> 为 <var>duration</var> 的字段名为当前行 Value Field 值的值。</li><li>设置 <var>result</var> 为 <var>result</var> + (<var>value</var> / 10<sup><var>exponent</var></sup>)。</li><li>设置 <var>exponent</var> 为 <var>exponent</var> + 3。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-nextunitfractional" type="abstract operation" aoid="NextUnitFractional">
      <h1><span class="secnum">13.5.8</span> NextUnitFractional ( <var>durationFormat</var>, <var>unit</var> )</h1>
      <p>The abstract operation NextUnitFractional takes arguments <var>durationFormat</var> (一个 DurationFormat 对象) and <var>unit</var> (一个字符串) and returns 一个布尔值. It performs the following steps when called:</p>

      <emu-alg><ol><li>如果 <var>unit</var> 为 <emu-val>"seconds"</emu-val> 且 <var>durationFormat</var>.<var class="field">[[MillisecondsOptions]]</var>.<var class="field">[[Style]]</var> 为 <emu-val>"fractional"</emu-val>，返回 <emu-val>true</emu-val>。</li><li>如果 <var>unit</var> 为 <emu-val>"milliseconds"</emu-val> 且 <var>durationFormat</var>.<var class="field">[[MicrosecondsOptions]]</var>.<var class="field">[[Style]]</var> 为 <emu-val>"fractional"</emu-val>，返回 <emu-val>true</emu-val>。</li><li>如果 <var>unit</var> 为 <emu-val>"microseconds"</emu-val> 且 <var>durationFormat</var>.<var class="field">[[NanosecondsOptions]]</var>.<var class="field">[[Style]]</var> 为 <emu-val>"fractional"</emu-val>，返回 <emu-val>true</emu-val>。</li><li>返回 <emu-val>false</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumerichours" type="abstract operation" aoid="FormatNumericHours">
      <h1><span class="secnum">13.5.9</span> FormatNumericHours ( <var>durationFormat</var>, <var>hoursValue</var>, <var>signDisplayed</var> )</h1>
      <p>The abstract operation FormatNumericHours takes arguments <var>durationFormat</var> (一个 DurationFormat 对象), <var>hoursValue</var> (一个整数), and <var>signDisplayed</var> (一个布尔值) and returns 一个记录列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>result</var> 为一个新空列表。</li><li>令 <var>hoursStyle</var> 为 <var>durationFormat</var>.<var class="field">[[HoursOptions]]</var>.<var class="field">[[Style]]</var>。</li><li>断言：<var>hoursStyle</var> 为 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val>。</li><li>令 <var>nfOpts</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>令 <var>numberingSystem</var> 为 <var>durationFormat</var>.<var class="field">[[NumberingSystem]]</var>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"numberingSystem"</emu-val>, <var>numberingSystem</var>)。</li><li>如果 <var>hoursStyle</var> 为 <emu-val>"2-digit"</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumIntegerDigits"</emu-val>, <emu-val>2</emu-val><sub>𝔽</sub>)。</li><li>如果 <var>signDisplayed</var> 为 <emu-val>false</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"signDisplay"</emu-val>, <emu-val>"never"</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>)。</li><li>令 <var>nf</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_627"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>durationFormat</var>.<var class="field">[[Locale]]</var>, <var>nfOpts</var>&nbsp;»)。</li><li>令 <var>hoursParts</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_628"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>nf</var>, <var>hoursValue</var>)。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var> 属于 <var>hoursParts</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>part</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>part</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <emu-val>"hour"</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumericminutes" type="abstract operation" aoid="FormatNumericMinutes">
      <h1><span class="secnum">13.5.10</span> FormatNumericMinutes ( <var>durationFormat</var>, <var>minutesValue</var>, <var>hoursDisplayed</var>, <var>signDisplayed</var> )</h1>
      <p>The abstract operation FormatNumericMinutes takes arguments <var>durationFormat</var> (一个 DurationFormat 对象), <var>minutesValue</var> (一个整数), <var>hoursDisplayed</var> (一个布尔值), and <var>signDisplayed</var> (一个布尔值) and returns 一个记录列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>result</var> 为一个新空列表。</li><li>如果 <var>hoursDisplayed</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>separator</var> 为 <var>durationFormat</var>.<var class="field">[[HourMinuteSeparator]]</var>。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>separator</var>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>&nbsp;} 添加到 <var>result</var>。</li><li>令 <var>minutesStyle</var> 为 <var>durationFormat</var>.<var class="field">[[MinutesOptions]]</var>.<var class="field">[[Style]]</var>。</li><li>断言：<var>minutesStyle</var> 为 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val>。</li><li>令 <var>nfOpts</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>令 <var>numberingSystem</var> 为 <var>durationFormat</var>.<var class="field">[[NumberingSystem]]</var>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"numberingSystem"</emu-val>, <var>numberingSystem</var>)。</li><li>如果 <var>minutesStyle</var> 为 <emu-val>"2-digit"</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumIntegerDigits"</emu-val>, <emu-val>2</emu-val><sub>𝔽</sub>)。</li><li>如果 <var>signDisplayed</var> 为 <emu-val>false</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"signDisplay"</emu-val>, <emu-val>"never"</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>)。</li><li>令 <var>nf</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_629"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>durationFormat</var>.<var class="field">[[Locale]]</var>, <var>nfOpts</var>&nbsp;»)。</li><li>令 <var>minutesParts</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_630"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>nf</var>, <var>minutesValue</var>)。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var> 属于 <var>minutesParts</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>part</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>part</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <emu-val>"minute"</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumericseconds" type="abstract operation" aoid="FormatNumericSeconds">
      <h1><span class="secnum">13.5.11</span> FormatNumericSeconds ( <var>durationFormat</var>, <var>secondsValue</var>, <var>minutesDisplayed</var>, <var>signDisplayed</var> )</h1>
      <p>The abstract operation FormatNumericSeconds takes arguments <var>durationFormat</var> (一个 DurationFormat 对象), <var>secondsValue</var> (一个数学值), <var>minutesDisplayed</var> (一个布尔值), and <var>signDisplayed</var> (一个布尔值) and returns 一个记录列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>result</var> 为一个新空列表。</li><li>如果 <var>minutesDisplayed</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>separator</var> 为 <var>durationFormat</var>.<var class="field">[[MinuteSecondSeparator]]</var>。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>separator</var>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>&nbsp;} 添加到 <var>result</var>。</li><li>令 <var>secondsStyle</var> 为 <var>durationFormat</var>.<var class="field">[[SecondsOptions]]</var>.<var class="field">[[Style]]</var>。</li><li>断言：<var>secondsStyle</var> 为 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val>。</li><li>令 <var>nfOpts</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>令 <var>numberingSystem</var> 为 <var>durationFormat</var>.<var class="field">[[NumberingSystem]]</var>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"numberingSystem"</emu-val>, <var>numberingSystem</var>)。</li><li>如果 <var>secondsStyle</var> 为 <emu-val>"2-digit"</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumIntegerDigits"</emu-val>, <emu-val>2</emu-val><sub>𝔽</sub>)。</li><li>如果 <var>signDisplayed</var> 为 <emu-val>false</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"signDisplay"</emu-val>, <emu-val>"never"</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>)。</li><li>令 <var>fractionDigits</var> 为 <var>durationFormat</var>.<var class="field">[[FractionalDigits]]</var>。</li><li>如果 <var>fractionDigits</var> 为 <emu-val>undefined</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"maximumFractionDigits"</emu-val>, <emu-val>9</emu-val><sub>𝔽</sub>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumFractionDigits"</emu-val>, <emu-val>+0</emu-val><sub>𝔽</sub>)。</li><li>否则，</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"maximumFractionDigits"</emu-val>, <var>fractionDigits</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumFractionDigits"</emu-val>, <var>fractionDigits</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"roundingMode"</emu-val>, <emu-val>"trunc"</emu-val>)。</li><li>令 <var>nf</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_631"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>durationFormat</var>.<var class="field">[[Locale]]</var>, <var>nfOpts</var>&nbsp;»)。</li><li>令 <var>secondsParts</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_632"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>nf</var>, <var>secondsValue</var>)。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var> 属于 <var>secondsParts</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>part</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>part</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <emu-val>"second"</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumericunits" type="abstract operation" aoid="FormatNumericUnits">
      <h1><span class="secnum">13.5.12</span> FormatNumericUnits ( <var>durationFormat</var>, <var>duration</var>, <var>firstNumericUnit</var>, <var>signDisplayed</var> )</h1>
      <p>The abstract operation FormatNumericUnits takes arguments <var>durationFormat</var> (一个 DurationFormat 对象), <var>duration</var> (一个<emu-xref href="#sec-duration-records" id="_ref_633"><a href="#sec-duration-records">持续时间记录</a></emu-xref>), <var>firstNumericUnit</var> (一个字符串), and <var>signDisplayed</var> (一个布尔值) and returns 一个记录列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>断言：<var>firstNumericUnit</var> 是 <emu-val>"hours"</emu-val>、<emu-val>"minutes"</emu-val> 或 <emu-val>"seconds"</emu-val>。</li><li>令 <var>numericPartsList</var> 为一个新空列表。</li><li>令 <var>hoursValue</var> 为 <var>duration</var>.<var class="field">[[Hours]]</var>。</li><li>令 <var>hoursDisplay</var> 为 <var>durationFormat</var>.<var class="field">[[HoursOptions]]</var>.<var class="field">[[Display]]</var>。</li><li>令 <var>minutesValue</var> 为 <var>duration</var>.<var class="field">[[Minutes]]</var>。</li><li>令 <var>minutesDisplay</var> 为 <var>durationFormat</var>.<var class="field">[[MinutesOptions]]</var>.<var class="field">[[Display]]</var>。</li><li>令 <var>secondsValue</var> 为 <var>duration</var>.<var class="field">[[Seconds]]</var>。</li><li>如果 <var>duration</var>.<var class="field">[[Milliseconds]]</var> 不为 0 或 <var>duration</var>.<var class="field">[[Microseconds]]</var> 不为 0 或 <var>duration</var>.<var class="field">[[Nanoseconds]]</var> 不为 0，则</li><li>设置 <var>secondsValue</var> 为 <var>secondsValue</var> + <emu-xref aoid="ComputeFractionalDigits" id="_ref_634"><a href="#sec-computefractionaldigits">ComputeFractionalDigits</a></emu-xref>(<var>durationFormat</var>, <var>duration</var>)。</li><li>令 <var>secondsDisplay</var> 为 <var>durationFormat</var>.<var class="field">[[SecondsOptions]]</var>.<var class="field">[[Display]]</var>。</li><li>令 <var>hoursFormatted</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>firstNumericUnit</var> 是 <emu-val>"hours"</emu-val>，则</li><li>如果 <var>hoursValue</var> 不为 0 或 <var>hoursDisplay</var> 是 <emu-val>"always"</emu-val>，则</li><li>设置 <var>hoursFormatted</var> 为 <emu-val>true</emu-val>。</li><li>如果 <var>secondsValue</var> 不为 0 或 <var>secondsDisplay</var> 是 <emu-val>"always"</emu-val>，则</li><li>令 <var>secondsFormatted</var> 为 <emu-val>true</emu-val>。</li><li>否则，</li><li>令 <var>secondsFormatted</var> 为 <emu-val>false</emu-val>。</li><li>令 <var>minutesFormatted</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>firstNumericUnit</var> 是 <emu-val>"hours"</emu-val> 或 <var>firstNumericUnit</var> 是 <emu-val>"minutes"</emu-val>，则</li><li>如果 <var>hoursFormatted</var> 为 <emu-val>true</emu-val> 且 <var>secondsFormatted</var> 为 <emu-val>true</emu-val>，则</li><li>设置 <var>minutesFormatted</var> 为 <emu-val>true</emu-val>。</li><li>否则如果 <var>minutesValue</var> 不为 0 或 <var>minutesDisplay</var> 是 <emu-val>"always"</emu-val>，则</li><li>设置 <var>minutesFormatted</var> 为 <emu-val>true</emu-val>。</li><li>如果 <var>hoursFormatted</var> 为 <emu-val>true</emu-val>，则</li><li>如果 <var>signDisplayed</var> 为 <emu-val>true</emu-val>，则</li><li>如果 <var>hoursValue</var> 为 0 且 <emu-xref aoid="DurationSign" id="_ref_635"><a href="#sec-durationsign">DurationSign</a></emu-xref>(<var>duration</var>) 为 -1，则</li><li>设置 <var>hoursValue</var> 为 <emu-const>negative-zero</emu-const>。</li><li>令 <var>hoursParts</var> 为 <emu-xref aoid="FormatNumericHours" id="_ref_636"><a href="#sec-formatnumerichours">FormatNumericHours</a></emu-xref>(<var>durationFormat</var>, <var>hoursValue</var>, <var>signDisplayed</var>)。</li><li>设置 <var>numericPartsList</var> 为 <var>numericPartsList</var> 与 <var>hoursParts</var> 的列表拼接。</li><li>设置 <var>signDisplayed</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>minutesFormatted</var> 为 <emu-val>true</emu-val>，则</li><li>如果 <var>signDisplayed</var> 为 <emu-val>true</emu-val>，则</li><li>如果 <var>minutesValue</var> 为 0 且 <emu-xref aoid="DurationSign" id="_ref_637"><a href="#sec-durationsign">DurationSign</a></emu-xref>(<var>duration</var>) 为 -1，则</li><li>设置 <var>minutesValue</var> 为 <emu-const>negative-zero</emu-const>。</li><li>令 <var>minutesParts</var> 为 <emu-xref aoid="FormatNumericMinutes" id="_ref_638"><a href="#sec-formatnumericminutes">FormatNumericMinutes</a></emu-xref>(<var>durationFormat</var>, <var>minutesValue</var>, <var>hoursFormatted</var>, <var>signDisplayed</var>)。</li><li>设置 <var>numericPartsList</var> 为 <var>numericPartsList</var> 与 <var>minutesParts</var> 的列表拼接。</li><li>设置 <var>signDisplayed</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>secondsFormatted</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>secondsParts</var> 为 <emu-xref aoid="FormatNumericSeconds" id="_ref_639"><a href="#sec-formatnumericseconds">FormatNumericSeconds</a></emu-xref>(<var>durationFormat</var>, <var>secondsValue</var>, <var>minutesFormatted</var>,
        <var>signDisplayed</var>)。</li><li>设置 <var>numericPartsList</var> 为 <var>numericPartsList</var> 与 <var>secondsParts</var> 的列表拼接。</li><li>返回 <var>numericPartsList</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-isfractionalsecondunitname" type="abstract operation" aoid="IsFractionalSecondUnitName">
      <h1><span class="secnum">13.5.13</span> IsFractionalSecondUnitName ( <var>unit</var> )</h1>
      <p>The abstract operation IsFractionalSecondUnitName takes argument <var>unit</var> (一个字符串) and returns 一个布尔值. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>unit</var> 是 <emu-val>"milliseconds"</emu-val>、<emu-val>"microseconds"</emu-val> 或 <emu-val>"nanoseconds"</emu-val> 之一，返回 <emu-val>true</emu-val>。</li><li>返回 <emu-val>false</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-listformatparts" type="abstract operation" aoid="ListFormatParts">
      <h1><span class="secnum">13.5.14</span> ListFormatParts ( <var>durationFormat</var>, <var>partitionedPartsList</var> )</h1>
      <p>The abstract operation ListFormatParts takes arguments <var>durationFormat</var> (一个 DurationFormat 对象) and <var>partitionedPartsList</var> (一个记录列表的列表) and returns 一个列表. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>lfOpts</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>lfOpts</var>, <emu-val>"type"</emu-val>, <emu-val>"unit"</emu-val>)。</li><li>令 <var>listStyle</var> 为 <var>durationFormat</var>.<var class="field">[[Style]]</var>。</li><li>如果 <var>listStyle</var> 是 <emu-val>"digital"</emu-val>，则</li><li>设置 <var>listStyle</var> 为 <emu-val>"short"</emu-val>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>lfOpts</var>, <emu-val>"style"</emu-val>, <var>listStyle</var>)。</li><li>令 <var>lf</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-listformat-constructor" id="_ref_640"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref>, « <var>durationFormat</var>.<var class="field">[[Locale]]</var>, <var>lfOpts</var>&nbsp;»)。</li><li>令 <var>strings</var> 为一个新空列表。</li><li>对 <var>partitionedPartsList</var> 中的每个元素 <var>parts</var>，执行</li><li>令 <var>string</var> 为空字符串。</li><li>对 <var>parts</var> 中的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>&nbsp;} <var>part</var>，执行</li><li>设置 <var>string</var> 为 <var>string</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>将 <var>string</var> 添加到 <var>strings</var>。</li><li>令 <var>formattedPartsList</var> 为 <emu-xref aoid="CreatePartsFromList" id="_ref_641"><a href="#sec-createpartsfromlist">CreatePartsFromList</a></emu-xref>(<var>lf</var>, <var>strings</var>)。</li><li>令 <var>partitionedPartsIndex</var> 为 0。</li><li>令 <var>partitionedLength</var> 为 <var>partitionedPartsList</var> 的元素数量。</li><li>令 <var>flattenedPartsList</var> 为一个新空列表。</li><li>对 <var>formattedPartsList</var> 中的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>listPart</var>，执行</li><li>如果 <var>listPart</var>.<var class="field">[[Type]]</var> 是 <emu-val>"element"</emu-val>，则</li><li>断言：<var>partitionedPartsIndex</var> &lt; <var>partitionedLength</var>。</li><li>令 <var>parts</var> 为 <var>partitionedPartsList</var>[<var>partitionedPartsIndex</var>]。</li><li>对 <var>parts</var> 中的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>&nbsp;} <var>part</var>，执行</li><li>将 <var>part</var> 添加到 <var>flattenedPartsList</var>。</li><li>设置 <var>partitionedPartsIndex</var> 为 <var>partitionedPartsIndex</var> + 1。</li><li>否则，</li><li>断言：<var>listPart</var>.<var class="field">[[Type]]</var> 是 <emu-val>"literal"</emu-val>。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>listPart</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>&nbsp;} 添加到 <var>flattenedPartsList</var>。</li><li>返回 <var>flattenedPartsList</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitiondurationformatpattern" type="abstract operation" aoid="PartitionDurationFormatPattern">
      <h1><span class="secnum">13.5.15</span> PartitionDurationFormatPattern ( <var>durationFormat</var>, <var>duration</var> )</h1>
      <p>The abstract operation PartitionDurationFormatPattern takes arguments <var>durationFormat</var> (一个 DurationFormat) and <var>duration</var> (一个<emu-xref href="#sec-duration-records" id="_ref_642"><a href="#sec-duration-records">持续时间记录</a></emu-xref>) and returns 一个列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>result</var> 为一个新空列表。</li><li>令 <var>signDisplayed</var> 为 <emu-val>true</emu-val>。</li><li>令 <var>numericUnitFound</var> 为 <emu-val>false</emu-val>。</li><li>当 <var>numericUnitFound</var> 为 <emu-val>false</emu-val> 时，按表顺序遍历 <emu-xref href="#table-partition-duration-format-pattern" id="_ref_120"><a href="#table-partition-duration-format-pattern">Table 24</a></emu-xref>
        的每一行（除表头行）：</li><li>令 <var>value</var> 为 <var>duration</var> 的字段名为当前行 Value Field 值的值。</li><li>令 <var>unitOptions</var> 为 <var>durationFormat</var> 的内部槽名为当前行 Internal Slot 值的值。</li><li>令 <var>style</var> 为 <var>unitOptions</var>.<var class="field">[[Style]]</var>。</li><li>令 <var>display</var> 为 <var>unitOptions</var>.<var class="field">[[Display]]</var>。</li><li>令 <var>unit</var> 为当前行的 Unit 值。</li><li>令 <var>numberFormatUnit</var> 为当前行的 NumberFormat Unit 值。</li><li>如果 <var>style</var> 是 <emu-val>"numeric"</emu-val> 或 <emu-val>"2-digit"</emu-val>，则</li><li>令 <var>numericPartsList</var> 为 <emu-xref aoid="FormatNumericUnits" id="_ref_643"><a href="#sec-formatnumericunits">FormatNumericUnits</a></emu-xref>(<var>durationFormat</var>, <var>duration</var>, <var>unit</var>, <var>signDisplayed</var>)。</li><li>如果 <var>numericPartsList</var> 非空，则将 <var>numericPartsList</var> 添加到 <var>result</var>。</li><li>设置 <var>numericUnitFound</var> 为 <emu-val>true</emu-val>。</li><li>否则，</li><li>令 <var>nfOpts</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>如果 <emu-xref aoid="NextUnitFractional" id="_ref_644"><a href="#sec-nextunitfractional">NextUnitFractional</a></emu-xref>(<var>durationFormat</var>, <var>unit</var>) 为 <emu-val>true</emu-val>，则</li><li>设置 <var>value</var> 为 <var>value</var> + <emu-xref aoid="ComputeFractionalDigits" id="_ref_645"><a href="#sec-computefractionaldigits">ComputeFractionalDigits</a></emu-xref>(<var>durationFormat</var>, <var>duration</var>)。</li><li>令 <var>fractionDigits</var> 为 <var>durationFormat</var>.<var class="field">[[FractionalDigits]]</var>。</li><li>如果 <var>fractionDigits</var> 为 <emu-val>undefined</emu-val>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"maximumFractionDigits"</emu-val>, <emu-val>9</emu-val><sub>𝔽</sub>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumFractionDigits"</emu-val>, <emu-val>+0</emu-val><sub>𝔽</sub>)。</li><li>否则，</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"maximumFractionDigits"</emu-val>, <var>fractionDigits</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"minimumFractionDigits"</emu-val>, <var>fractionDigits</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"roundingMode"</emu-val>, <emu-val>"trunc"</emu-val>)。</li><li>设置 <var>numericUnitFound</var> 为 <emu-val>true</emu-val>。</li><li>如果 <var>display</var> 是 <emu-val>"always"</emu-val> 或 <var>value</var> 不为 0，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"numberingSystem"</emu-val>, <var>durationFormat</var>.<var class="field">[[NumberingSystem]]</var>)。</li><li>如果 <var>signDisplayed</var> 为 <emu-val>true</emu-val>，则</li><li>设置 <var>signDisplayed</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>value</var> 为 0 且 <emu-xref aoid="DurationSign" id="_ref_646"><a href="#sec-durationsign">DurationSign</a></emu-xref>(<var>duration</var>) 为 -1，则设置 <var>value</var> 为 <emu-const>negative-zero</emu-const>。</li><li>否则，</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"signDisplay"</emu-val>, <emu-val>"never"</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"style"</emu-val>, <emu-val>"unit"</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"unit"</emu-val>, <var>numberFormatUnit</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOpts</var>, <emu-val>"unitDisplay"</emu-val>, <var>style</var>)。</li><li>令 <var>nf</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_647"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>durationFormat</var>.<var class="field">[[Locale]]</var>, <var>nfOpts</var>&nbsp;»)。</li><li>令 <var>parts</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_648"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>nf</var>, <var>value</var>)。</li><li>令 <var>list</var> 为一个新空列表。</li><li>对 <var>parts</var> 中的每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>part</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>part</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <var>numberFormatUnit</var>&nbsp;} 添加到 <var>list</var>。</li><li>将 <var>list</var> 添加到 <var>result</var>。</li><li>返回 <emu-xref aoid="ListFormatParts" id="_ref_649"><a href="#sec-listformatparts">ListFormatParts</a></emu-xref>(<var>durationFormat</var>, <var>result</var>)。</li></ol></emu-alg>

      <emu-table id="table-partition-duration-format-pattern"><figure><figcaption>Table 24: <emu-xref aoid="PartitionDurationFormatPattern" id="_ref_650"><a href="#sec-partitiondurationformatpattern">PartitionDurationFormatPattern</a></emu-xref> 相关的 DurationFormat 实例内部槽和属性</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Value Field</th>
              <th>Internal Slot</th>
              <th>Unit</th>
              <th>NumberFormat Unit</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Years]]</var></td>
            <td><var class="field">[[YearsOptions]]</var></td>
            <td><emu-val>"years"</emu-val></td>
            <td><emu-val>"year"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Months]]</var></td>
            <td><var class="field">[[MonthsOptions]]</var></td>
            <td><emu-val>"months"</emu-val></td>
            <td><emu-val>"month"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Weeks]]</var></td>
            <td><var class="field">[[WeeksOptions]]</var></td>
            <td><emu-val>"weeks"</emu-val></td>
            <td><emu-val>"week"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Days]]</var></td>
            <td><var class="field">[[DaysOptions]]</var></td>
            <td><emu-val>"days"</emu-val></td>
            <td><emu-val>"day"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Hours]]</var></td>
            <td><var class="field">[[HoursOptions]]</var></td>
            <td><emu-val>"hours"</emu-val></td>
            <td><emu-val>"hour"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Minutes]]</var></td>
            <td><var class="field">[[MinutesOptions]]</var></td>
            <td><emu-val>"minutes"</emu-val></td>
            <td><emu-val>"minute"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Seconds]]</var></td>
            <td><var class="field">[[SecondsOptions]]</var></td>
            <td><emu-val>"seconds"</emu-val></td>
            <td><emu-val>"second"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Milliseconds]]</var></td>
            <td><var class="field">[[MillisecondsOptions]]</var></td>
            <td><emu-val>"milliseconds"</emu-val></td>
            <td><emu-val>"millisecond"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Microseconds]]</var></td>
            <td><var class="field">[[MicrosecondsOptions]]</var></td>
            <td><emu-val>"microseconds"</emu-val></td>
            <td><emu-val>"microsecond"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Nanoseconds]]</var></td>
            <td><var class="field">[[NanosecondsOptions]]</var></td>
            <td><emu-val>"nanoseconds"</emu-val></td>
            <td><emu-val>"nanosecond"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="listformat-objects">
  <h1><span class="secnum">14</span> ListFormat 对象</h1>

  <emu-clause id="sec-intl-listformat-constructor">
    <h1><span class="secnum">14.1</span> Intl.ListFormat 构造函数</h1>

    <p>Intl.ListFormat 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.ListFormat%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_651"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"ListFormat"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_652"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的共同行为在 <emu-xref href="#sec-internal-slots" id="_ref_121"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-Intl.ListFormat">
      <h1><span class="secnum">14.1.1</span> Intl.ListFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当 <code>Intl.ListFormat</code> 函数以可选参数 <var>locales</var> 和 <var>options</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>listFormat</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.ListFormat.prototype%"</emu-val>, «
        <var class="field">[[InitializedListFormat]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[Type]]</var>, <var class="field">[[Style]]</var>, <var class="field">[[Templates]]</var>&nbsp;»)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_653"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-listformat-constructor" id="_ref_654"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref>, <emu-xref href="#sec-intl-listformat-constructor" id="_ref_655"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var>, <var>locales</var>,
        <var>options</var>)。</li><li>将 <var>options</var> 设置为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>将 <var>listFormat</var>.<var class="field">[[Locale]]</var> 设置为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>type</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_656"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"type"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"conjunction"</emu-val>, <emu-val>"disjunction"</emu-val>, <emu-val>"unit"</emu-val>&nbsp;»,
        <emu-val>"conjunction"</emu-val>)。</li><li>将 <var>listFormat</var>.<var class="field">[[Type]]</var> 设置为 <var>type</var>。</li><li>令 <var>style</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_657"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>&nbsp;», <emu-val>"long"</emu-val>)。</li><li>将 <var>listFormat</var>.<var class="field">[[Style]]</var> 设置为 <var>style</var>。</li><li>令 <var>resolvedLocaleData</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>令 <var>dataLocaleTypes</var> 为 <var>resolvedLocaleData</var>.[[&lt;<var>type</var>&gt;]]。</li><li>将 <var>listFormat</var>.<var class="field">[[Templates]]</var> 设置为 <var>dataLocaleTypes</var>.[[&lt;<var>style</var>&gt;]]。</li><li>返回 <var>listFormat</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-listformat-constructor">
    <h1><span class="secnum">14.2</span> Intl.ListFormat 构造函数的属性</h1>

    <p>Intl.ListFormat 构造函数：</p>
    <ul>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-Intl.ListFormat.prototype">
      <h1><span class="secnum">14.2.1</span> Intl.ListFormat.prototype</h1>

      <p><code>Intl.ListFormat.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-listformat-prototype-object" id="_ref_658"><a href="#sec-properties-of-intl-listformat-prototype-object">%Intl.ListFormat.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.supportedLocalesOf">
      <h1><span class="secnum">14.2.2</span> Intl.ListFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当 <code>supportedLocalesOf</code> 方法以参数 <var>locales</var> 和 <var>options</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-listformat-constructor" id="_ref_659"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_660"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_661"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat-internal-slots">
      <h1><span class="secnum">14.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_122"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « »。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Intl.ListFormat 没有任何相关扩展键。
      </div></emu-note>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_123"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义，并且对于
        <emu-xref href="#sec-intl-listformat-constructor" id="_ref_662"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var> 中的每个 locale 值 <var>locale</var>，还需满足以下额外约束：</p>

      <ul>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 是一个包含三个字段 <var class="field">[[conjunction]]</var>、<var class="field">[[disjunction]]</var> 和 <var class="field">[[unit]]</var> 的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>。每个字段都是一个
          <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，必须包含三种格式化样式名称的字段：<var class="field">[[long]]</var>、<var class="field">[[short]]</var> 和 <var class="field">[[narrow]]</var>。</li>
        <li>每个字段被视为 <dfn tabindex="-1">ListFormat 模板集</dfn>，必须是一个包含字段 <var class="field">[[Pair]]</var>、<var class="field">[[Start]]</var>、<var class="field">[[Middle]]</var> 和 <var class="field">[[End]]</var> 的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 列表。每个字段必须是 LDML
          <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> Format Rules 指定的模板字符串。每个模板字符串必须恰好包含 <emu-val>"{0}"</emu-val> 和 <emu-val>"{1}"</emu-val> 两个子串。子串 <emu-val>"{0}"</emu-val> 应出现在 <emu-val>"{1}"</emu-val> 之前。</li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        推荐实现使用 Common Locale Data Repository 提供的本地数据（可在 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 获取）。在 <a href="https://unicode.org/reports/tr35/tr35-general.html#ListPatterns">LDML 的 listPattern</a> 中，<code>conjunction</code>
        对应 "standard"，<code>disjunction</code> 对应 "or"，<code>unit</code> 对应 "unit"。
      </div></emu-note>

      <emu-note><span class="note">Note 3</span><div class="note-contents">
        在列表类型中，<code>conjunction</code> 表示基于 "和" 的列表（如 "A, B, 和 C"），<code>disjunction</code> 表示基于 "或" 的列表（如 "A, B, 或 C"），<code>unit</code> 表示带单位的值列表（如
        "5磅, 12盎司"）。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-listformat-prototype-object">
    <h1><span class="secnum">14.3</span> Intl.ListFormat 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.ListFormat 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.ListFormat.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.ListFormat 实例，不具有 <var class="field">[[InitializedListFormat]]</var> 内部槽或任何 Intl.ListFormat 实例对象的其他内部槽。</li>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-Intl.ListFormat.prototype.constructor">
      <h1><span class="secnum">14.3.1</span> Intl.ListFormat.prototype.constructor</h1>

      <p><code>Intl.ListFormat.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-listformat-constructor" id="_ref_663"><a href="#sec-intl-listformat-constructor">%Intl.ListFormat%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype.resolvedoptions">
      <h1><span class="secnum">14.3.2</span> Intl.ListFormat.prototype.resolvedOptions ( )</h1>

      <p>此函数提供对对象初始化期间计算的 locale 和 options 的访问。</p>

      <emu-alg><ol><li>令 <var>lf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>lf</var>, <var class="field">[[InitializedListFormat]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-listformat-resolvedoptions-properties" id="_ref_124"><a href="#table-listformat-resolvedoptions-properties">Table 25</a></emu-xref> 的每一行（除表头行外），按表顺序执行</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>lf</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>断言：<var>v</var> 不为 <emu-val>undefined</emu-val>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-listformat-resolvedoptions-properties"><figure><figcaption>Table 25: ListFormat 实例的 Resolved Options</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Type]]</var></td>
            <td><emu-val>"type"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Style]]</var></td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype.format">
      <h1><span class="secnum">14.3.3</span> Intl.ListFormat.prototype.format ( <var>list</var> )</h1>

      <p>当 <code>format</code> 方法以参数 <var>list</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>lf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>lf</var>, <var class="field">[[InitializedListFormat]]</var>)。</li><li>令 <var>stringList</var> 为 ?&nbsp;<emu-xref aoid="StringListFromIterable" id="_ref_664"><a href="#sec-createstringlistfromiterable">StringListFromIterable</a></emu-xref>(<var>list</var>)。</li><li>返回 <emu-xref aoid="FormatList" id="_ref_665"><a href="#sec-formatlist">FormatList</a></emu-xref>(<var>lf</var>, <var>stringList</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype.formatToParts">
      <h1><span class="secnum">14.3.4</span> Intl.ListFormat.prototype.formatToParts ( <var>list</var> )</h1>

      <p>当 <code>formatToParts</code> 方法以参数 <var>list</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>lf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>lf</var>, <var class="field">[[InitializedListFormat]]</var>)。</li><li>令 <var>stringList</var> 为 ?&nbsp;<emu-xref aoid="StringListFromIterable" id="_ref_666"><a href="#sec-createstringlistfromiterable">StringListFromIterable</a></emu-xref>(<var>list</var>)。</li><li>返回 <emu-xref aoid="FormatListToParts" id="_ref_667"><a href="#sec-formatlisttoparts">FormatListToParts</a></emu-xref>(<var>lf</var>, <var>stringList</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype-toStringTag">
      <h1><span class="secnum">14.3.5</span> Intl.ListFormat.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.ListFormat"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-listformat-instances">
    <h1><span class="secnum">14.4</span> Intl.ListFormat 实例的属性</h1>

    <p>Intl.ListFormat 实例从 <emu-xref href="#sec-properties-of-intl-listformat-prototype-object" id="_ref_668"><a href="#sec-properties-of-intl-listformat-prototype-object">%Intl.ListFormat.prototype%</a></emu-xref> 继承属性。</p>

    <p>Intl.ListFormat 实例具有 <var class="field">[[InitializedListFormat]]</var> 内部槽。</p>

    <p>Intl.ListFormat 实例还具有由 <emu-xref href="#sec-intl-listformat-constructor" title="" id="_ref_125"><a href="#sec-intl-listformat-constructor">Intl.ListFormat 构造函数</a></emu-xref> 计算的多个内部槽：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于列表格式样式的本地化<emu-xref href="#sec-language-tags" id="_ref_669"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[Type]]</var> 是字符串值 <emu-val>"conjunction"</emu-val>、<emu-val>"disjunction"</emu-val> 或 <emu-val>"unit"</emu-val> 之一，标识所用的列表类型。</li>
      <li><var class="field">[[Style]]</var> 是字符串值 <emu-val>"long"</emu-val>、<emu-val>"short"</emu-val> 或 <emu-val>"narrow"</emu-val> 之一，标识所用的列表格式样式。</li>
      <li><var class="field">[[Templates]]</var> 是一个 <emu-xref href="#sec-Intl.ListFormat-internal-slots" id="_ref_670"><a href="#sec-Intl.ListFormat-internal-slots">ListFormat 模板集</a></emu-xref>。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-listformat-abstracts">
    <h1><span class="secnum">14.5</span> ListFormat 对象的抽象操作</h1>

    <emu-clause id="sec-deconstructpattern" type="abstract operation" aoid="DeconstructPattern">
      <h1><span class="secnum">14.5.1</span> DeconstructPattern ( <var>pattern</var>, <var>placeables</var> )</h1>
      <p>The abstract operation DeconstructPattern takes arguments <var>pattern</var> (一个<emu-xref href="#sec-pattern-string-types" id="_ref_671"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>) and <var>placeables</var> (一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>) and returns 一个列表. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>patternParts</var> 为 <emu-xref aoid="PartitionPattern" id="_ref_672"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>)。</li><li>令 <var>result</var> 为一个新的空列表。</li><li>对每个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>patternPart</var> 属于 <var>patternParts</var>，执行</li><li>令 <var>part</var> 为 <var>patternPart</var>.<var class="field">[[Type]]</var>。</li><li>如果 <var>part</var> 是 <emu-val>"literal"</emu-val>，则</li><li>将 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>patternPart</var>.<var class="field">[[Value]]</var>&nbsp;} 添加到 <var>result</var>。</li><li>否则，</li><li>断言：<var>placeables</var> 有字段 [[&lt;<var>part</var>&gt;]]。</li><li>令 <var>subst</var> 为 <var>placeables</var>.[[&lt;<var>part</var>&gt;]]。</li><li>如果 <var>subst</var> 是一个列表，则</li><li>对每个元素 <var>s</var> 属于 <var>subst</var>，执行</li><li>将 <var>s</var> 添加到 <var>result</var>。</li><li>否则，</li><li>将 <var>subst</var> 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-createpartsfromlist" type="abstract operation" aoid="CreatePartsFromList">
      <h1><span class="secnum">14.5.2</span> CreatePartsFromList ( <var>listFormat</var>, <var>list</var> )</h1>
      <p>The abstract operation CreatePartsFromList takes arguments <var>listFormat</var> (一个 Intl.ListFormat) and <var>list</var> (一个字符串列表) and returns 一个字段为 <var class="field">[[Type]]</var>（<emu-val>"element"</emu-val> 或 <emu-val>"literal"</emu-val>）和 <var class="field">[[Value]]</var>（字符串）的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> 列表. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>size</var> 为 <var>list</var> 元素数量。</li><li>如果 <var>size</var> 为 0，则</li><li>返回一个新的空列表。</li><li>如果 <var>size</var> 为 2，则</li><li>令 <var>n</var> 为根据 <var>listFormat</var>.<var class="field">[[Locale]]</var>、<var>list</var>[0] 和 <var>list</var>[1] 实现定义的 <var>listFormat</var>.<var class="field">[[Templates]]</var> 索引。</li><li>令 <var>pattern</var> 为 <var>listFormat</var>.<var class="field">[[Templates]]</var>[<var>n</var>].<var class="field">[[Pair]]</var>。</li><li>令 <var>first</var> 为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>: <emu-val>"element"</emu-val>, <var class="field">[[Value]]</var>: <var>list</var>[0]&nbsp;}。</li><li>令 <var>second</var> 为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>: <emu-val>"element"</emu-val>, <var class="field">[[Value]]</var>: <var>list</var>[1]&nbsp;}。</li><li>令 <var>placeables</var> 为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[0]]</var>: <var>first</var>, <var class="field">[[1]]</var>: <var>second</var>&nbsp;}。</li><li>返回 <emu-xref aoid="DeconstructPattern" id="_ref_673"><a href="#sec-deconstructpattern">DeconstructPattern</a></emu-xref>(<var>pattern</var>, <var>placeables</var>)。</li><li>令 <var>last</var> 为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>: <emu-val>"element"</emu-val>, <var class="field">[[Value]]</var>: <var>list</var>[<var>size</var> - 1]&nbsp;}。</li><li>令 <var>parts</var> 为 « <var>last</var>&nbsp;»。</li><li>令 <var>i</var> 为 <var>size</var> - 2。</li><li>重复，条件为 <var>i</var> ≥ 0，</li><li>令 <var>head</var> 为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>: <emu-val>"element"</emu-val>, <var class="field">[[Value]]</var>: <var>list</var>[<var>i</var>]&nbsp;}。</li><li>令 <var>n</var> 为根据 <var>listFormat</var>.<var class="field">[[Locale]]</var>、<var>head</var> 和 <var>parts</var> 实现定义的 <var>listFormat</var>.<var class="field">[[Templates]]</var> 索引。</li><li>如果 <var>i</var> 为 0，则</li><li>令 <var>pattern</var> 为 <var>listFormat</var>.<var class="field">[[Templates]]</var>[<var>n</var>].<var class="field">[[Start]]</var>。</li><li>否则如果 <var>i</var> 小于 <var>size</var> - 2，则</li><li>令 <var>pattern</var> 为 <var>listFormat</var>.<var class="field">[[Templates]]</var>[<var>n</var>].<var class="field">[[Middle]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>listFormat</var>.<var class="field">[[Templates]]</var>[<var>n</var>].<var class="field">[[End]]</var>。</li><li>令 <var>placeables</var> 为 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[0]]</var>: <var>head</var>, <var class="field">[[1]]</var>: <var>parts</var>&nbsp;}。</li><li>将 <var>parts</var> 设置为 <emu-xref aoid="DeconstructPattern" id="_ref_674"><a href="#sec-deconstructpattern">DeconstructPattern</a></emu-xref>(<var>pattern</var>, <var>placeables</var>)。</li><li><var>i</var> 减 1。</li><li>返回 <var>parts</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        选择多个模板的索引 <var>n</var> 允许并列词根据上下文变化，例如西班牙语中，"y" 或 "e" 的选择取决于后续单词。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-formatlist" type="abstract operation" aoid="FormatList">
      <h1><span class="secnum">14.5.3</span> FormatList ( <var>listFormat</var>, <var>list</var> )</h1>
      <p>The abstract operation FormatList takes arguments <var>listFormat</var> (一个 Intl.ListFormat) and <var>list</var> (一个字符串列表) and returns 一个字符串. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 <emu-xref aoid="CreatePartsFromList" id="_ref_675"><a href="#sec-createpartsfromlist">CreatePartsFromList</a></emu-xref>(<var>listFormat</var>, <var>list</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对每个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>将 <var>result</var> 设置为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatlisttoparts" type="abstract operation" aoid="FormatListToParts">
      <h1><span class="secnum">14.5.4</span> FormatListToParts ( <var>listFormat</var>, <var>list</var> )</h1>
      <p>The abstract operation FormatListToParts takes arguments <var>listFormat</var> (一个 Intl.ListFormat) and <var>list</var> (一个字符串列表) and returns 一个数组. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 <emu-xref aoid="CreatePartsFromList" id="_ref_676"><a href="#sec-createpartsfromlist">CreatePartsFromList</a></emu-xref>(<var>listFormat</var>, <var>list</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对每个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>令 <var>O</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>n</var>)), <var>O</var>)。</li><li><var>n</var> 加 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-createstringlistfromiterable" type="abstract operation" aoid="StringListFromIterable">
      <h1><span class="secnum">14.5.5</span> StringListFromIterable ( <var>iterable</var> )</h1>
      <p>The abstract operation StringListFromIterable takes argument <var>iterable</var> (一个 ECMAScript 语言值) and returns 正常完成包含字符串列表或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>iterable</var> 是 <emu-val>undefined</emu-val>，则</li><li>返回一个新的空列表。</li><li>令 <var>iteratorRecord</var> 为 ?&nbsp;<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>iterable</var>, <emu-const>sync</emu-const>)。</li><li>令 <var>list</var> 为一个新的空列表。</li><li>重复，</li><li>令 <var>next</var> 为 ?&nbsp;<emu-xref aoid="IteratorStepValue"><a href="https://tc39.es/ecma262/#sec-iteratorstepvalue">IteratorStepValue</a></emu-xref>(<var>iteratorRecord</var>)。</li><li>如果 <var>next</var> 是 <emu-const>done</emu-const>，则</li><li>返回 <var>list</var>。</li><li>如果 <var>next</var> 不是字符串，则</li><li>令 <var>error</var> 为 <emu-xref aoid="ThrowCompletion"><a href="https://tc39.es/ecma262/#sec-throwcompletion">ThrowCompletion</a></emu-xref>(新创建的 <emu-val>TypeError</emu-val> 对象)。</li><li>返回 ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iteratorRecord</var>, <var>error</var>)。</li><li>将 <var>next</var> 添加到 <var>list</var>。</li></ol></emu-alg>
      <emu-note><span class="note">Note</span><div class="note-contents">
        <p>该算法在遇到非字符串值时会抛出异常，因为没有明显的针对任意值的本地化转换方式。</p>
      </div></emu-note>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="locale-objects">
  <h1><span class="secnum">15</span> 语言环境对象</h1>

  <emu-clause id="sec-intl-locale-constructor">
    <h1><span class="secnum">15.1</span> Intl.Locale 构造函数</h1>

    <p>Intl.Locale 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.Locale%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_677"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"Locale"</emu-val> 属性的初始值。</li>
    </ul>

    <emu-clause id="sec-Intl.Locale">
      <h1><span class="secnum">15.1.1</span> Intl.Locale ( <var>tag</var> [ , <var>options</var> ] )</h1>

      <p>当调用 <code>Intl.Locale</code> 函数并传入参数 <var>tag</var> 和可选参数 <var>options</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>localeExtensionKeys</var> 为 <emu-xref href="#sec-intl-locale-constructor" id="_ref_678"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref>.<var class="field">[[LocaleExtensionKeys]]</var>。</li><li>令 <var>internalSlotsList</var> 为 « <var class="field">[[InitializedLocale]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[Calendar]]</var>, <var class="field">[[Collation]]</var>, <var class="field">[[FirstDayOfWeek]]</var>,
        <var class="field">[[HourCycle]]</var>, <var class="field">[[NumberingSystem]]</var>&nbsp;»。</li><li>如果 <var>localeExtensionKeys</var> 包含 <emu-val>"kf"</emu-val>，则</li><li>将 <var class="field">[[CaseFirst]]</var> 添加到 <var>internalSlotsList</var>。</li><li>如果 <var>localeExtensionKeys</var> 包含 <emu-val>"kn"</emu-val>，则</li><li>将 <var class="field">[[Numeric]]</var> 添加到 <var>internalSlotsList</var>。</li><li>令 <var>locale</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.Locale.prototype%"</emu-val>, <var>internalSlotsList</var>)。</li><li>如果 <var>tag</var> 不是字符串且不是对象，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>tag</var> 是对象且 <var>tag</var> 拥有 <var class="field">[[InitializedLocale]]</var> 内部槽，则</li><li>令 <var>tag</var> 为 <var>tag</var>.<var class="field">[[Locale]]</var>。</li><li>否则，</li><li>令 <var>tag</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>tag</var>)。</li><li>将 <var>options</var> 设置为 ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_679"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>)。</li><li>如果 <emu-xref aoid="IsWellFormedLanguageTag" id="_ref_680"><a href="#sec-iswellformedlanguagetag">IsWellFormedLanguageTag</a></emu-xref>(<var>tag</var>) 为 <emu-val>false</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>注：由于 <a href="https://unicode.org/reports/tr35/#processing-languageids">LanguageId 规范化</a> 可根据 <a href="https://github.com/unicode-org/cldr/blob/main/common/supplemental/supplementalMetadata.xml"><code>supplementalMetadata.xml</code></a>
        的 Alias Rules 任意改变 <var>tag</var>，因此必须在应用 <var>options</var> 的覆盖前进行规范化。</li><li>将 <var>tag</var> 设置为 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_681"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>tag</var>)。</li><li>将 <var>tag</var> 设置为 ?&nbsp;<emu-xref aoid="UpdateLanguageId" id="_ref_682"><a href="#sec-updatelanguageid">UpdateLanguageId</a></emu-xref>(<var>tag</var>, <var>options</var>)。</li><li>令 <var>opt</var> 为新建的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>。</li><li>令 <var>calendar</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_683"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"calendar"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>calendar</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>calendar</var> 不能被 <code>type</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>opt</var>.<var class="field">[[ca]]</var> 为 <var>calendar</var>。</li><li>令 <var>collation</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_684"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"collation"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>collation</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>collation</var> 不能被 <code>type</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>opt</var>.<var class="field">[[co]]</var> 为 <var>collation</var>。</li><li>令 <var>fw</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_685"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"firstDayOfWeek"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>fw</var> 不是 <emu-val>undefined</emu-val>，则</li><li>将 <var>fw</var> 设置为 <emu-xref aoid="WeekdayToUValue" id="_ref_686"><a href="#sec-weekdaytouvalue">WeekdayToUValue</a></emu-xref>(<var>fw</var>)。</li><li>如果 <var>fw</var> 不能被 <code>type</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>opt</var>.<var class="field">[[fw]]</var> 为 <var>fw</var>。</li><li>令 <var>hc</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_687"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"hourCycle"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val>&nbsp;»,
        <emu-val>undefined</emu-val>)。</li><li>设置 <var>opt</var>.<var class="field">[[hc]]</var> 为 <var>hc</var>。</li><li>令 <var>kf</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_688"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"caseFirst"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"upper"</emu-val>, <emu-val>"lower"</emu-val>, <emu-val>"false"</emu-val>&nbsp;», <emu-val>undefined</emu-val>)。</li><li>设置 <var>opt</var>.<var class="field">[[kf]]</var> 为 <var>kf</var>。</li><li>令 <var>kn</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_689"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numeric"</emu-val>, <emu-const>boolean</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>kn</var> 不是 <emu-val>undefined</emu-val>，将 <var>kn</var> 设置为 !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>kn</var>)。</li><li>设置 <var>opt</var>.<var class="field">[[kn]]</var> 为 <var>kn</var>。</li><li>令 <var>numberingSystem</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_690"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numberingSystem"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>numberingSystem</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>numberingSystem</var> 不能被 <code>type</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>opt</var>.<var class="field">[[nu]]</var> 为 <var>numberingSystem</var>。</li><li>令 <var>r</var> 为 <emu-xref aoid="MakeLocaleRecord" id="_ref_691"><a href="#sec-makelocalerecord">MakeLocaleRecord</a></emu-xref>(<var>tag</var>, <var>opt</var>, <var>localeExtensionKeys</var>)。</li><li>设置 <var>locale</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[locale]]</var>。</li><li>设置 <var>locale</var>.<var class="field">[[Calendar]]</var> 为 <var>r</var>.<var class="field">[[ca]]</var>。</li><li>设置 <var>locale</var>.<var class="field">[[Collation]]</var> 为 <var>r</var>.<var class="field">[[co]]</var>。</li><li>设置 <var>locale</var>.<var class="field">[[FirstDayOfWeek]]</var> 为 <var>r</var>.<var class="field">[[fw]]</var>。</li><li>设置 <var>locale</var>.<var class="field">[[HourCycle]]</var> 为 <var>r</var>.<var class="field">[[hc]]</var>。</li><li>如果 <var>localeExtensionKeys</var> 包含 <emu-val>"kf"</emu-val>，则</li><li>设置 <var>locale</var>.<var class="field">[[CaseFirst]]</var> 为 <var>r</var>.<var class="field">[[kf]]</var>。</li><li>如果 <var>localeExtensionKeys</var> 包含 <emu-val>"kn"</emu-val>，则</li><li>如果 <emu-xref aoid="SameValue"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>r</var>.<var class="field">[[kn]]</var>, <emu-val>"true"</emu-val>) 为 <emu-val>true</emu-val> 或 <var>r</var>.<var class="field">[[kn]]</var> 是空字符串，则</li><li>设置 <var>locale</var>.<var class="field">[[Numeric]]</var> 为 <emu-val>true</emu-val>。</li><li>否则，</li><li>设置 <var>locale</var>.<var class="field">[[Numeric]]</var> 为 <emu-val>false</emu-val>。</li><li>设置 <var>locale</var>.<var class="field">[[NumberingSystem]]</var> 为 <var>r</var>.<var class="field">[[nu]]</var>。</li><li>返回 <var>locale</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-updatelanguageid" type="abstract operation" oldids="sec-apply-options-to-tag" aoid="UpdateLanguageId"><span id="sec-apply-options-to-tag"></span>
      <h1><span class="secnum">15.1.2</span> UpdateLanguageId ( <var>tag</var>, <var>options</var> )</h1>
      <p>The abstract operation UpdateLanguageId takes arguments <var>tag</var> (一个<emu-xref href="#sec-iswellformedlanguagetag" id="_ref_692"><a href="#sec-iswellformedlanguagetag">格式良好的语言标签</a></emu-xref>) and <var>options</var> (一个对象) and returns 正常完成包含<emu-xref href="#sec-iswellformedlanguagetag" id="_ref_693"><a href="#sec-iswellformedlanguagetag">格式良好的语言标签</a></emu-xref>或抛出完成. 根据 <var>options</var> 的对应属性更新 <var>tag</var> 中的 <code>unicode_language_id</code> <emu-xref href="#bcp-47-subtag" id="_ref_694"><a href="#bcp-47-subtag">子标签</a></emu-xref>，验证并返回结果。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>baseName</var> 为 <emu-xref aoid="GetLocaleBaseName" id="_ref_695"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>tag</var>)。</li><li>令 <var>language</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_696"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"language"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-xref aoid="GetLocaleLanguage" id="_ref_697"><a href="#sec-getlocalelanguage">GetLocaleLanguage</a></emu-xref>(<var>baseName</var>))。</li><li>如果 <var>language</var> 不能被 <code>unicode_language_subtag</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>script</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_698"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"script"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-xref aoid="GetLocaleScript" id="_ref_699"><a href="#sec-getlocalescript">GetLocaleScript</a></emu-xref>(<var>baseName</var>))。</li><li>如果 <var>script</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>script</var> 不能被 <code>unicode_script_subtag</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>region</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_700"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"region"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-xref aoid="GetLocaleRegion" id="_ref_701"><a href="#sec-getlocaleregion">GetLocaleRegion</a></emu-xref>(<var>baseName</var>))。</li><li>如果 <var>region</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>region</var> 不能被 <code>unicode_region_subtag</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>variants</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_702"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"variants"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-xref aoid="GetLocaleVariants" id="_ref_703"><a href="#sec-getlocalevariants">GetLocaleVariants</a></emu-xref>(<var>baseName</var>))。</li><li>如果 <var>variants</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>variants</var> 是空字符串，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>lowerVariants</var> 为 <var>variants</var> 的 ASCII 小写形式。</li><li>令 <var>variantSubtags</var> 为 <emu-xref aoid="StringSplitToList" id="_ref_704"><a href="#sec-string-split-to-list">StringSplitToList</a></emu-xref>(<var>lowerVariants</var>, <emu-val>"-"</emu-val>)。</li><li>对 <var>variantSubtags</var> 的每个元素 <var>variant</var>，执行</li><li>如果 <var>variant</var> 不能被 <code>unicode_variant_subtag</code> Unicode locale 非终结符匹配，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>如果 <var>variantSubtags</var> 包含任何重复元素，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>allExtensions</var> 为 <var>tag</var> 中 <var>baseName</var> 后的后缀。</li><li>令 <var>newTag</var> 为 <var>language</var>。</li><li>如果 <var>script</var> 不是 <emu-val>undefined</emu-val>，将 <var>newTag</var> 设置为 <var>newTag</var> 与 <emu-val>"-"</emu-val> 和 <var>script</var> 的字符串连接。</li><li>如果 <var>region</var> 不是 <emu-val>undefined</emu-val>，将 <var>newTag</var> 设置为 <var>newTag</var> 与 <emu-val>"-"</emu-val> 和 <var>region</var> 的字符串连接。</li><li>如果 <var>variants</var> 不是 <emu-val>undefined</emu-val>，将 <var>newTag</var> 设置为 <var>newTag</var> 与 <emu-val>"-"</emu-val> 和 <var>variants</var> 的字符串连接。</li><li>将 <var>newTag</var> 设置为 <var>newTag</var> 与 <var>allExtensions</var> 的字符串连接。</li><li>返回 <var>newTag</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-makelocalerecord" type="abstract operation" oldids="sec-apply-unicode-extension-to-tag" aoid="MakeLocaleRecord"><span id="sec-apply-unicode-extension-to-tag"></span>
      <h1><span class="secnum">15.1.3</span> MakeLocaleRecord ( <var>tag</var>, <var>options</var>, <var>localeExtensionKeys</var> )</h1>
      <p>The abstract operation MakeLocaleRecord takes arguments <var>tag</var> (一个<emu-xref href="#sec-language-tags" id="_ref_705"><a href="#sec-language-tags">语言标签</a></emu-xref>), <var>options</var> (一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>), and <var>localeExtensionKeys</var> (字符串列表) and returns 一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>. 构造并返回一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，其中每个 <var>localeExtensionKeys</var> 元素定义一个对应字段，数据来自 <var>tag</var> 的 Unicode locale 扩展序列并被 <var>options</var>
          的对应字段覆盖，并且还包含一个 <var class="field">[[locale]]</var> 字段，其值为将这些字段合并到 <var>tag</var> 后得到的 <emu-xref href="#sec-language-tags" id="_ref_706"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>tag</var> 包含一个 <emu-not-ref>substring</emu-not-ref> 是 Unicode locale 扩展序列，则</li><li>令 <var>extension</var> 为 <var>tag</var> 中 Unicode locale 扩展序列的 <emu-not-ref>substring</emu-not-ref>。</li><li>令 <var>components</var> 为 <emu-xref aoid="UnicodeExtensionComponents" id="_ref_707"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>extension</var>)。</li><li>令 <var>attributes</var> 为 <var>components</var>.<var class="field">[[Attributes]]</var>。</li><li>令 <var>keywords</var> 为 <var>components</var>.<var class="field">[[Keywords]]</var>。</li><li>否则，</li><li>令 <var>attributes</var> 为新空列表。</li><li>令 <var>keywords</var> 为新空列表。</li><li>令 <var>result</var> 为新建的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>。</li><li>对 <var>localeExtensionKeys</var> 的每个元素 <var>key</var>，执行</li><li>如果 <var>keywords</var> 包含一个 <var class="field">[[Key]]</var> 为 <var>key</var> 的元素，则</li><li>令 <var>entry</var> 为 <var>keywords</var> 中 <var class="field">[[Key]]</var> 为 <var>key</var> 的元素。</li><li>令 <var>value</var> 为 <var>entry</var>.<var class="field">[[Value]]</var>。</li><li>否则，</li><li>令 <var>entry</var> 为 <emu-const>empty</emu-const>。</li><li>令 <var>value</var> 为 <emu-val>undefined</emu-val>。</li><li>断言：<var>options</var> 拥有字段 [[&lt;<var>key</var>&gt;]]。</li><li>令 <var>overrideValue</var> 为 <var>options</var>.[[&lt;<var>key</var>&gt;]]。</li><li>如果 <var>overrideValue</var> 不是 <emu-val>undefined</emu-val>，则</li><li>将 <var>value</var> 设置为 CanonicalizeUValue(<var>key</var>, <var>overrideValue</var>)。</li><li>如果 <var>entry</var> 不是 <emu-const>empty</emu-const>，则</li><li>设置 <var>entry</var>.<var class="field">[[Value]]</var> 为 <var>value</var>。</li><li>否则，</li><li>将 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { <var class="field">[[Key]]</var>: <var>key</var>, <var class="field">[[Value]]</var>: <var>value</var>&nbsp;} 添加到 <var>keywords</var>。</li><li>设置 <var>result</var>.[[&lt;<var>key</var>&gt;]] 为 <var>value</var>。</li><li>令 <var>locale</var> 为 <var>tag</var> 移除所有 Unicode locale 扩展序列后的字符串值。</li><li>如果 <var>attributes</var> 非空或 <var>keywords</var> 非空，则</li><li>设置 <var>result</var>.<var class="field">[[locale]]</var> 为 <emu-xref aoid="InsertUnicodeExtensionAndCanonicalize" id="_ref_708"><a href="#sec-insert-unicode-extension-and-canonicalize">InsertUnicodeExtensionAndCanonicalize</a></emu-xref>(<var>locale</var>, <var>attributes</var>, <var>keywords</var>)。</li><li>否则，</li><li>设置 <var>result</var>.<var class="field">[[locale]]</var> 为 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_709"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>locale</var>)。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-locale-constructor">
    <h1><span class="secnum">15.2</span> Intl.Locale 构造函数的属性</h1>

    <p>Intl.Locale 构造函数：</p>
    <ul>
      <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>拥有以下属性：</li>
    </ul>

    <emu-clause id="sec-Intl.Locale.prototype">
      <h1><span class="secnum">15.2.1</span> Intl.Locale.prototype</h1>

      <p><code>Intl.Locale.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-locale-prototype-object" id="_ref_710"><a href="#sec-properties-of-intl-locale-prototype-object">%Intl.Locale.prototype%</a></emu-xref>。</p>
      <p>该属性的属性为 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> }。</p>
    </emu-clause>

    <emu-clause id="sec-intl.locale-internal-slots">
      <h1><span class="secnum">15.2.2</span> 内部槽</h1>

      <p><var class="field">[[LocaleExtensionKeys]]</var> 内部槽的值是一个列表，必须包含 « <emu-val>"ca"</emu-val>, <emu-val>"co"</emu-val>, <emu-val>"fw"</emu-val>, <emu-val>"hc"</emu-val>, <emu-val>"nu"</emu-val> » 的所有元素，还必须包含
        <emu-xref href="#sec-intl-collator-constructor" id="_ref_711"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[RelevantExtensionKeys]]</var> 中的 « <emu-val>"kf"</emu-val>, <emu-val>"kn"</emu-val> » 的任何元素，且不得包含其他元素。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-locale-prototype-object">
    <h1><span class="secnum">15.3</span> Intl.Locale 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.Locale 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.Locale.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.Locale 实例，不拥有 <var class="field">[[InitializedLocale]]</var> 内部槽或任何 Intl.Locale 实例对象的其他内部槽。</li>
      <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-Intl.Locale.prototype.constructor">
      <h1><span class="secnum">15.3.1</span> Intl.Locale.prototype.constructor</h1>

      <p><code>Intl.Locale.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-locale-constructor" id="_ref_712"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.baseName">
      <h1><span class="secnum">15.3.2</span> get Intl.Locale.prototype.baseName</h1>
      <p><code>Intl.Locale.prototype.baseName</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="GetLocaleBaseName" id="_ref_713"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.calendar">
      <h1><span class="secnum">15.3.3</span> get Intl.Locale.prototype.calendar</h1>
      <p><code>Intl.Locale.prototype.calendar</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[Calendar]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.caseFirst">
      <h1><span class="secnum">15.3.4</span> get Intl.Locale.prototype.caseFirst</h1>
      <p>仅当 <emu-xref href="#sec-intl-locale-constructor" id="_ref_714"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref>.<var class="field">[[LocaleExtensionKeys]]</var> 包含 <emu-val>"kf"</emu-val> 时，该属性存在。</p>
      <p><code>Intl.Locale.prototype.caseFirst</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[CaseFirst]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.collation">
      <h1><span class="secnum">15.3.5</span> get Intl.Locale.prototype.collation</h1>
      <p><code>Intl.Locale.prototype.collation</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[Collation]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.firstDayOfWeek">
      <h1><span class="secnum">15.3.6</span> get Intl.Locale.prototype.firstDayOfWeek</h1>
      <p><code>Intl.Locale.prototype.firstDayOfWeek</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[FirstDayOfWeek]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.hourCycle">
      <h1><span class="secnum">15.3.7</span> get Intl.Locale.prototype.hourCycle</h1>
      <p><code>Intl.Locale.prototype.hourCycle</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[HourCycle]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.language">
      <h1><span class="secnum">15.3.8</span> get Intl.Locale.prototype.language</h1>
      <p><code>Intl.Locale.prototype.language</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="GetLocaleLanguage" id="_ref_715"><a href="#sec-getlocalelanguage">GetLocaleLanguage</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.maximize">
      <h1><span class="secnum">15.3.9</span> Intl.Locale.prototype.maximize ( )</h1>

      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>令 <var>maximal</var> 为 <a href="https://unicode.org/reports/tr35/#Likely_Subtags">Add Likely Subtags</a> 算法应用于
        <var>loc</var>.<var class="field">[[Locale]]</var> 的结果。如果发生错误，则将 <var>maximal</var> 设置为 <var>loc</var>.<var class="field">[[Locale]]</var>。</li><li>返回 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-locale-constructor" id="_ref_716"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref>, <var>maximal</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.minimize">
      <h1><span class="secnum">15.3.10</span> Intl.Locale.prototype.minimize ( )</h1>

      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>令 <var>minimal</var> 为 <a href="https://unicode.org/reports/tr35/#Likely_Subtags">Remove Likely Subtags</a> 算法应用于
        <var>loc</var>.<var class="field">[[Locale]]</var> 的结果。如果发生错误，则将 <var>minimal</var> 设置为 <var>loc</var>.<var class="field">[[Locale]]</var>。</li><li>返回 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-locale-constructor" id="_ref_717"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref>, <var>minimal</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.numberingSystem">
      <h1><span class="secnum">15.3.11</span> get Intl.Locale.prototype.numberingSystem</h1>
      <p><code>Intl.Locale.prototype.numberingSystem</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[NumberingSystem]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.numeric">
      <h1><span class="secnum">15.3.12</span> get Intl.Locale.prototype.numeric</h1>
      <p>仅当 <emu-xref href="#sec-intl-locale-constructor" id="_ref_718"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref>.<var class="field">[[LocaleExtensionKeys]]</var> 包含 <emu-val>"kn"</emu-val> 时，该属性存在。</p>
      <p><code>Intl.Locale.prototype.numeric</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[Numeric]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.region">
      <h1><span class="secnum">15.3.13</span> get Intl.Locale.prototype.region</h1>
      <p><code>Intl.Locale.prototype.region</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="GetLocaleRegion" id="_ref_719"><a href="#sec-getlocaleregion">GetLocaleRegion</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.script">
      <h1><span class="secnum">15.3.14</span> get Intl.Locale.prototype.script</h1>
      <p><code>Intl.Locale.prototype.script</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="GetLocaleScript" id="_ref_720"><a href="#sec-getlocalescript">GetLocaleScript</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.toString">
      <h1><span class="secnum">15.3.15</span> Intl.Locale.prototype.toString ( )</h1>

      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <var>loc</var>.<var class="field">[[Locale]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getCalendars">
      <h1><span class="secnum">15.3.16</span> Intl.Locale.prototype.getCalendars ( )</h1>
      <p>调用 <code>getCalendars</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="CalendarsOfLocale" id="_ref_721"><a href="#sec-calendarsoflocale">CalendarsOfLocale</a></emu-xref>(<var>loc</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getCollations">
      <h1><span class="secnum">15.3.17</span> Intl.Locale.prototype.getCollations ( )</h1>
      <p>调用 <code>getCollations</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="CollationsOfLocale" id="_ref_722"><a href="#sec-collationsoflocale">CollationsOfLocale</a></emu-xref>(<var>loc</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getHourCycles">
      <h1><span class="secnum">15.3.18</span> Intl.Locale.prototype.getHourCycles ( )</h1>
      <p>调用 <code>getHourCycles</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="HourCyclesOfLocale" id="_ref_723"><a href="#sec-hourcyclesoflocale">HourCyclesOfLocale</a></emu-xref>(<var>loc</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getNumberingSystems">
      <h1><span class="secnum">15.3.19</span> Intl.Locale.prototype.getNumberingSystems ( )</h1>
      <p>调用 <code>getNumberingSystems</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="NumberingSystemsOfLocale" id="_ref_724"><a href="#sec-numberingsystemsoflocale">NumberingSystemsOfLocale</a></emu-xref>(<var>loc</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getTimeZones">
      <h1><span class="secnum">15.3.20</span> Intl.Locale.prototype.getTimeZones ( )</h1>
      <p>调用 <code>getTimeZones</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="TimeZonesOfLocale" id="_ref_725"><a href="#sec-timezonesoflocale">TimeZonesOfLocale</a></emu-xref>(<var>loc</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getTextInfo">
      <h1><span class="secnum">15.3.21</span> Intl.Locale.prototype.getTextInfo ( )</h1>
      <p>调用 <code>getTextInfo</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>令 <var>info</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>令 <var>dir</var> 为 <emu-xref aoid="TextDirectionOfLocale" id="_ref_726"><a href="#sec-textdirectionoflocale">TextDirectionOfLocale</a></emu-xref>(<var>loc</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>info</var>, <emu-val>"direction"</emu-val>, <var>dir</var>)。</li><li>返回 <var>info</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.getWeekInfo">
      <h1><span class="secnum">15.3.22</span> Intl.Locale.prototype.getWeekInfo ( )</h1>
      <p>调用 <code>getWeekInfo</code> 方法时，执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>令 <var>info</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>令 <var>wi</var> 为 <emu-xref aoid="WeekInfoOfLocale" id="_ref_727"><a href="#sec-weekinfooflocale">WeekInfoOfLocale</a></emu-xref>(<var>loc</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>info</var>, <emu-val>"firstDay"</emu-val>, <var>wi</var>.<var class="field">[[FirstDay]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>info</var>, <emu-val>"weekend"</emu-val>, <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>wi</var>.<var class="field">[[Weekend]]</var>))。</li><li>返回 <var>info</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.variants">
      <h1><span class="secnum">15.3.23</span> get Intl.Locale.prototype.variants</h1>
      <p><code>Intl.Locale.prototype.variants</code> 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>
      <emu-alg><ol><li>令 <var>loc</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, <var class="field">[[InitializedLocale]]</var>)。</li><li>返回 <emu-xref aoid="GetLocaleVariants" id="_ref_728"><a href="#sec-getlocalevariants">GetLocaleVariants</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.locale.prototype-%symbol.tostringtag%" oldids="sec-Intl.Locale.prototype-@@tostringtag"><span id="sec-Intl.Locale.prototype-@@tostringtag"></span>
      <h1><span class="secnum">15.3.24</span> Intl.Locale.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.Locale"</emu-val>。</p>

      <p>该属性的属性为 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> }。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-locale-instances">
    <h1><span class="secnum">15.4</span> Intl.Locale 实例的属性</h1>

    <p>Intl.Locale 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-intl-locale-prototype-object" id="_ref_729"><a href="#sec-properties-of-intl-locale-prototype-object">%Intl.Locale.prototype%</a></emu-xref> 的属性。</p>

    <p>Intl.Locale 实例拥有 <var class="field">[[InitializedLocale]]</var> 内部槽。</p>

    <p>Intl.Locale 实例还拥有多个内部槽，这些槽由 <emu-xref href="#sec-intl-locale-constructor" title="" id="_ref_126"><a href="#sec-intl-locale-constructor">Intl.Locale 构造函数</a></emu-xref> 计算：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于格式化的语言环境标签。</li>
      <li><var class="field">[[Calendar]]</var> 是 <emu-val>undefined</emu-val> 或一个字符串值，表示规范形式的 <a href="https://unicode.org/reports/tr35/#UnicodeCalendarIdentifier">Unicode 日历标识符</a>。</li>
      <li><var class="field">[[Collation]]</var> 是 <emu-val>undefined</emu-val> 或一个字符串值，表示规范形式的 <a href="https://unicode.org/reports/tr35/#UnicodeCollationIdentifier">Unicode 排序标识符</a>。</li>
      <li><var class="field">[[FirstDayOfWeek]]</var> 是 <emu-val>undefined</emu-val> 或一个字符串值，表示规范形式的 <a href="https://unicode.org/reports/tr35/#UnicodeFirstDayIdentifier">Unicode 首日标识符</a>。</li>
      <li><var class="field">[[HourCycle]]</var> 是 <emu-val>undefined</emu-val> 或一个字符串值，表示规范形式的 <a href="https://unicode.org/reports/tr35/#UnicodeHourCycleIdentifier">Unicode 小时周期标识符</a>。</li>
      <li><var class="field">[[NumberingSystem]]</var> 是 <emu-val>undefined</emu-val> 或一个字符串值，表示规范形式的 <a href="https://unicode.org/reports/tr35/#UnicodeNumberSystemIdentifier">Unicode 数字系统标识符</a>。</li>
      <li><var class="field">[[CaseFirst]]</var> 是 <emu-val>undefined</emu-val> 或字符串值 <emu-val>"upper"</emu-val>、<emu-val>"lower"</emu-val> 或 <emu-val>"false"</emu-val>。仅当 <emu-xref href="#sec-intl-locale-constructor" id="_ref_730"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref> 的 <var class="field">[[LocaleExtensionKeys]]</var>
        内部槽包含 <emu-val>"kf"</emu-val> 时，该内部槽存在。</li>
      <li><var class="field">[[Numeric]]</var> 是 <emu-val>undefined</emu-val> 或布尔值，指定该语言环境是否使用数字排序。仅当 <emu-xref href="#sec-intl-locale-constructor" id="_ref_731"><a href="#sec-intl-locale-constructor">%Intl.Locale%</a></emu-xref> 的 <var class="field">[[LocaleExtensionKeys]]</var> 内部槽包含 <emu-val>"kn"</emu-val>
        时，该内部槽存在。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-locale-abstracts">
    <h1><span class="secnum">15.5</span> 语言环境对象的抽象操作</h1>

    <emu-clause id="sec-getlocalebasename" type="abstract operation" aoid="GetLocaleBaseName">
      <h1><span class="secnum">15.5.1</span> GetLocaleBaseName ( <var>locale</var> )</h1>
      <p>The abstract operation GetLocaleBaseName takes argument <var>locale</var> (字符串) and returns 字符串. It performs the following steps when called:</p>
      <emu-alg><ol><li>断言：<var>locale</var> 能被 <code>unicode_locale_id</code> Unicode locale 非终结符匹配。</li><li>返回 <var>locale</var> 被 <code>unicode_language_id</code> Unicode locale 非终结符匹配的最长前缀。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getlocalelanguage" type="abstract operation" aoid="GetLocaleLanguage">
      <h1><span class="secnum">15.5.2</span> GetLocaleLanguage ( <var>locale</var> )</h1>
      <p>The abstract operation GetLocaleLanguage takes argument <var>locale</var> (字符串) and returns 字符串. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>baseName</var> 为 <emu-xref aoid="GetLocaleBaseName" id="_ref_732"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>locale</var>)。</li><li>断言：<var>baseName</var> 的第一个<emu-xref href="#bcp-47-subtag" id="_ref_733"><a href="#bcp-47-subtag">子标签</a></emu-xref>能被 <code>unicode_language_subtag</code> Unicode locale 非终结符匹配。</li><li>返回 <var>baseName</var> 的第一个<emu-xref href="#bcp-47-subtag" id="_ref_734"><a href="#bcp-47-subtag">子标签</a></emu-xref>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getlocalescript" type="abstract operation" aoid="GetLocaleScript">
      <h1><span class="secnum">15.5.3</span> GetLocaleScript ( <var>locale</var> )</h1>
      <p>The abstract operation GetLocaleScript takes argument <var>locale</var> (字符串) and returns 字符串或 <emu-val>undefined</emu-val>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>baseName</var> 为 <emu-xref aoid="GetLocaleBaseName" id="_ref_735"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>locale</var>)。</li><li>断言：<var>baseName</var> 至多包含一个能被 <code>unicode_script_subtag</code> Unicode locale 非终结符匹配的<emu-xref href="#bcp-47-subtag" id="_ref_736"><a href="#bcp-47-subtag">子标签</a></emu-xref>。</li><li>如果 <var>baseName</var> 包含一个被 <code>unicode_script_subtag</code> 匹配的<emu-xref href="#bcp-47-subtag" id="_ref_737"><a href="#bcp-47-subtag">子标签</a></emu-xref>，则返回该<emu-xref href="#bcp-47-subtag" id="_ref_738"><a href="#bcp-47-subtag">子标签</a></emu-xref>。</li><li>返回 <emu-val>undefined</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getlocaleregion" type="abstract operation" aoid="GetLocaleRegion">
      <h1><span class="secnum">15.5.4</span> GetLocaleRegion ( <var>locale</var> )</h1>
      <p>The abstract operation GetLocaleRegion takes argument <var>locale</var> (字符串) and returns 字符串或 <emu-val>undefined</emu-val>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>baseName</var> 为 <emu-xref aoid="GetLocaleBaseName" id="_ref_739"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>locale</var>)。</li><li>注：<code>unicode_region_subtag</code> <emu-xref href="#bcp-47-subtag" id="_ref_740"><a href="#bcp-47-subtag">子标签</a></emu-xref>仅在初始 <code>unicode_language_subtag</code> <emu-xref href="#bcp-47-subtag" id="_ref_741"><a href="#bcp-47-subtag">子标签</a></emu-xref>之后有效，可选地在其间有一个
        <code>unicode_script_subtag</code>。在该位置，<code>unicode_region_subtag</code> 不会与其他有效<emu-xref href="#bcp-47-subtag" id="_ref_742"><a href="#bcp-47-subtag">子标签</a></emu-xref>混淆，因为所有产生式互不重叠。</li><li>断言：<var>baseName</var> 的第一个<emu-xref href="#bcp-47-subtag" id="_ref_743"><a href="#bcp-47-subtag">子标签</a></emu-xref>能被 <code>unicode_language_subtag</code> Unicode locale 非终结符匹配。</li><li>令 <var>baseNameTail</var> 为 <var>baseName</var> 第一个<emu-xref href="#bcp-47-subtag" id="_ref_744"><a href="#bcp-47-subtag">子标签</a></emu-xref>后的后缀。</li><li>断言：<var>baseNameTail</var> 至多包含一个能被 <code>unicode_region_subtag</code> Unicode locale 非终结符匹配的<emu-xref href="#bcp-47-subtag" id="_ref_745"><a href="#bcp-47-subtag">子标签</a></emu-xref>。</li><li>如果 <var>baseNameTail</var> 包含一个被 <code>unicode_region_subtag</code> 匹配的<emu-xref href="#bcp-47-subtag" id="_ref_746"><a href="#bcp-47-subtag">子标签</a></emu-xref>，则返回该<emu-xref href="#bcp-47-subtag" id="_ref_747"><a href="#bcp-47-subtag">子标签</a></emu-xref>。</li><li>返回 <emu-val>undefined</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getlocalevariants" type="abstract operation" aoid="GetLocaleVariants">
      <h1><span class="secnum">15.5.5</span> GetLocaleVariants ( <var>locale</var> )</h1>
      <p>The abstract operation GetLocaleVariants takes argument <var>locale</var> (字符串) and returns 字符串或 <emu-val>undefined</emu-val>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>baseName</var> 为 <emu-xref aoid="GetLocaleBaseName" id="_ref_748"><a href="#sec-getlocalebasename">GetLocaleBaseName</a></emu-xref>(<var>locale</var>)。</li><li>注：<var>baseName</var> 中每个以 <emu-val>"-"</emu-val> 前缀的<emu-xref href="#bcp-47-subtag" id="_ref_749"><a href="#bcp-47-subtag">子标签</a></emu-xref>要么是 <code>unicode_script_subtag</code>、<code>unicode_region_subtag</code> 或
        <code>unicode_variant_subtag</code>，但任何被 <code>unicode_variant_subtag</code> 匹配的
        <emu-not-ref>substring</emu-not-ref> 都比其前缀更长，且前缀不会被其他产生式匹配。</li><li>令 <var>variants</var> 为 <var>baseName</var> 的最长后缀，该后缀以 <emu-val>"-"</emu-val> 和被 <code>unicode_variant_subtag</code> 匹配的
        <emu-not-ref>substring</emu-not-ref> 开始。如果没有这样的后缀，返回 <emu-val>undefined</emu-val>。</li><li>返回 <var>variants</var> 从第 1 个字符开始的子字符串。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-unicodeextensionvalue" type="abstract operation" aoid="UnicodeExtensionValue">
      <h1><span class="secnum">15.5.6</span> UnicodeExtensionValue ( <var>locale</var>, <var>key</var> )</h1>
      <p>The abstract operation UnicodeExtensionValue takes arguments <var>locale</var> (<emu-xref href="#sec-language-tags" id="_ref_750"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>) and <var>key</var> (字符串) and returns 字符串或 <emu-const>empty</emu-const>. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>locale</var> 包含 Unicode locale 扩展序列，则</li><li>令 <var>extension</var> 为 <var>locale</var> 的 Unicode locale 扩展序列。</li><li>令 <var>components</var> 为 <emu-xref aoid="UnicodeExtensionComponents" id="_ref_751"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>extension</var>)。</li><li>令 <var>keywords</var> 为 <var>components</var>.<var class="field">[[Keywords]]</var>。</li><li>如果存在 <var>keywords</var> 元素 <var>entry</var>，其 <var class="field">[[Key]]</var> 为 <var>key</var>，则返回 <var>entry</var>.<var class="field">[[Value]]</var>。</li><li>返回 <emu-const>empty</emu-const>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-canonicalunicodesubdivision" type="abstract operation" aoid="CanonicalUnicodeSubdivision">
      <h1><span class="secnum">15.5.7</span> CanonicalUnicodeSubdivision ( <var>locale</var>, <var>key</var> )</h1>
      <p>The abstract operation CanonicalUnicodeSubdivision takes arguments <var>locale</var> (<emu-xref href="#sec-language-tags" id="_ref_752"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>) and <var>key</var> (<emu-val>"rg"</emu-val> 或 <emu-val>"sd"</emu-val>) and returns 字符串或 <emu-val>undefined</emu-val>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>subdivision</var> 为 <emu-xref aoid="UnicodeExtensionValue" id="_ref_753"><a href="#sec-unicodeextensionvalue">UnicodeExtensionValue</a></emu-xref>(<var>locale</var>, <var>key</var>)。</li><li>如果 <var>subdivision</var> 为 <emu-const>empty</emu-const>，返回 <emu-val>undefined</emu-val>。</li><li>如果 <var>subdivision</var> 不能被 <code>unicode_subdivision_id</code> Unicode locale 非终结符匹配，返回 <emu-val>undefined</emu-val>。</li><li>令 <var>region</var> 为 <var>subdivision</var> 被 <code>unicode_region_subtag</code> Unicode locale 非终结符匹配的最长前缀。</li><li>令 <var>regionLocale</var> 为 <emu-val>"und-"</emu-val> 与 <var>region</var> 的字符串连接。</li><li>将 <var>regionLocale</var> 设置为 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_754"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>regionLocale</var>)。</li><li>返回 <emu-xref aoid="GetLocaleRegion" id="_ref_755"><a href="#sec-getlocaleregion">GetLocaleRegion</a></emu-xref>(<var>regionLocale</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-regionpreference" type="abstract operation" aoid="RegionPreference">
      <h1><span class="secnum">15.5.8</span> RegionPreference ( <var>locale</var> )</h1>
      <p>The abstract operation RegionPreference takes argument <var>locale</var> (<emu-xref href="#sec-language-tags" id="_ref_756"><a href="#sec-language-tags">Unicode 规范化语言环境标识符</a></emu-xref>) and returns 一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，字段 <var class="field">[[Region]]</var>（字符串）和 <var class="field">[[RegionOverride]]</var>（字符串或 <emu-val>undefined</emu-val>）. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>region</var> 为 <emu-xref aoid="GetLocaleRegion" id="_ref_757"><a href="#sec-getlocaleregion">GetLocaleRegion</a></emu-xref>(<var>locale</var>)。</li><li>如果 <var>region</var> 为 <emu-val>undefined</emu-val>，则</li><li>将 <var>region</var> 设置为 <emu-xref aoid="CanonicalUnicodeSubdivision" id="_ref_758"><a href="#sec-canonicalunicodesubdivision">CanonicalUnicodeSubdivision</a></emu-xref>(<var>locale</var>, <emu-val>"sd"</emu-val>)。</li><li>如果 <var>region</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>maximal</var> 为 <a href="https://unicode.org/reports/tr35/#Likely_Subtags">Add Likely Subtags</a> 算法应用于
        <var>locale</var> 的结果。如果发生错误，则将 <var>maximal</var> 设置为 <var>locale</var>。</li><li>将 <var>maximal</var> 设置为 <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_759"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>maximal</var>)。</li><li>将 <var>region</var> 设置为 <emu-xref aoid="GetLocaleRegion" id="_ref_760"><a href="#sec-getlocaleregion">GetLocaleRegion</a></emu-xref>(<var>maximal</var>)。</li><li>如果 <var>region</var> 为 <emu-val>undefined</emu-val>，则</li><li>将 <var>region</var> 设置为 <emu-val>"001"</emu-val>。</li><li>令 <var>regionOverride</var> 为 <emu-xref aoid="CanonicalUnicodeSubdivision" id="_ref_761"><a href="#sec-canonicalunicodesubdivision">CanonicalUnicodeSubdivision</a></emu-xref>(<var>locale</var>, <emu-val>"rg"</emu-val>)。</li><li>返回 { <var class="field">[[Region]]</var>: <var>region</var>, <var class="field">[[RegionOverride]]</var>: <var>regionOverride</var>&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-calendarsoflocale" type="implementation-defined abstract operation" aoid="CalendarsOfLocale">
      <h1><span class="secnum">15.5.9</span> CalendarsOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation CalendarsOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 数组. 以下算法参考 <a href="https://unicode.org/reports/tr35/tr35-dates.html#Calendar_Preference_Data">Unicode 技术标准 #35
            第 4 部分 日期，日历偏好数据</a>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>loc</var>.<var class="field">[[Calendar]]</var> 不是 <emu-val>undefined</emu-val>，则</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>loc</var>.<var class="field">[[Calendar]]</var>&nbsp;»)。</li><li>令 <var>preference</var> 为 <emu-xref aoid="RegionPreference" id="_ref_762"><a href="#sec-regionpreference">RegionPreference</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li><li>令 <var>region</var> 为 <var>preference</var>.<var class="field">[[Region]]</var>。</li><li>令 <var>regionOverride</var> 为 <var>preference</var>.<var class="field">[[RegionOverride]]</var>。</li><li>如果 <var>regionOverride</var> 不是 <emu-val>undefined</emu-val> 且 <var>regionOverride</var> 有日历偏好数据，则</li><li>令 <var>lookupRegion</var> 为 <var>regionOverride</var>。</li><li>否则，</li><li>令 <var>lookupRegion</var> 为 <var>region</var>。</li><li>令 <var>list</var> 为 <var>lookupRegion</var> 中用于日期和时间格式化的常用<emu-xref href="#sec-calendar-types" id="_ref_763"><a href="#sec-calendar-types">日历类型</a></emu-xref>的唯一规范形式列表（<emu-xref href="#sec-calendar-types" id="_ref_127"><a href="#sec-calendar-types">6.9</a></emu-xref>），按偏好降序排序。如果 <var>lookupRegion</var> 没有日历偏好数据，则列表为空。</li><li>如果 <var>list</var> 为空，将 <var>list</var> 设置为 « <emu-val>"gregory"</emu-val>&nbsp;»。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>list</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-collationsoflocale" type="implementation-defined abstract operation" aoid="CollationsOfLocale">
      <h1><span class="secnum">15.5.10</span> CollationsOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation CollationsOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 数组. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>loc</var>.<var class="field">[[Collation]]</var> 不是 <emu-val>undefined</emu-val>，则</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>loc</var>.<var class="field">[[Collation]]</var>&nbsp;»)。</li><li>令 <var>language</var> 为 <emu-xref aoid="GetLocaleLanguage" id="_ref_764"><a href="#sec-getlocalelanguage">GetLocaleLanguage</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li><li>如果 <var>language</var> 不是 <emu-val>"und"</emu-val>，则</li><li>令 <var>r</var> 为 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_765"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>(<emu-xref href="#sec-intl-collator-constructor" id="_ref_766"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>, « <var>loc</var>.<var class="field">[[Locale]]</var>&nbsp;»)。</li><li>如果 <var>r</var> 不是 <emu-val>undefined</emu-val>，则</li><li>令 <var>foundLocale</var> 为 <var>r</var>.<var class="field">[[locale]]</var>。</li><li>否则，</li><li>令 <var>foundLocale</var> 为 <emu-xref aoid="DefaultLocale" id="_ref_767"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref>()。</li><li>令 <var>foundLocaleData</var> 为 <emu-xref href="#sec-intl-collator-constructor" id="_ref_768"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>.<var class="field">[[SortLocaleData]]</var>.[[&lt;<var>foundLocale</var>&gt;]]。</li><li>令 <var>list</var> 为 <var>foundLocaleData</var>.<var class="field">[[co]]</var> 的副本。</li><li>断言：<var>list</var>[0] 为 <emu-val>null</emu-val>。</li><li>移除 <var>list</var> 的第一个元素。</li><li>否则，</li><li>令 <var>list</var> 为 « <emu-val>"emoji"</emu-val>, <emu-val>"eor"</emu-val>&nbsp;»。</li><li>令 <var>sorted</var> 为 <var>list</var> 的副本，按字典序排序。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>sorted</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-hourcyclesoflocale" type="implementation-defined abstract operation" aoid="HourCyclesOfLocale">
      <h1><span class="secnum">15.5.11</span> HourCyclesOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation HourCyclesOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 数组. 以下算法参考 <a href="https://unicode.org/reports/tr35/tr35-dates.html#Time_Data">Unicode 技术标准 #35 第 4 部分
            日期，时间数据</a>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>loc</var>.<var class="field">[[HourCycle]]</var> 不是 <emu-val>undefined</emu-val>，则</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>loc</var>.<var class="field">[[HourCycle]]</var>&nbsp;»)。</li><li>令 <var>preference</var> 为 <emu-xref aoid="RegionPreference" id="_ref_769"><a href="#sec-regionpreference">RegionPreference</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li><li>令 <var>region</var> 为 <var>preference</var>.<var class="field">[[Region]]</var>。</li><li>令 <var>regionOverride</var> 为 <var>preference</var>.<var class="field">[[RegionOverride]]</var>。</li><li>如果 <var>regionOverride</var> 不是 <emu-val>undefined</emu-val> 且 <var>regionOverride</var> 有时间数据，则</li><li>令 <var>lookupRegion</var> 为 <var>regionOverride</var>。</li><li>否则，</li><li>令 <var>lookupRegion</var> 为 <var>region</var>。</li><li>令 <var>list</var> 为 <var>lookupRegion</var> 中用于日期和时间格式化的常用小时周期标识符的唯一小写字符串列表，表示 12 小时制（<emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>）或 24 小时制（<emu-val>"h23"</emu-val>,
        <emu-val>"h24"</emu-val>），按偏好降序排序。如果 <var>lookupRegion</var> 没有时间数据，则列表为空。</li><li>如果 <var>list</var> 为空，将 <var>list</var> 设置为 « <emu-val>"h23"</emu-val>&nbsp;»。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>list</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-numberingsystemsoflocale" type="implementation-defined abstract operation" aoid="NumberingSystemsOfLocale">
      <h1><span class="secnum">15.5.12</span> NumberingSystemsOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation NumberingSystemsOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 数组. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>loc</var>.<var class="field">[[NumberingSystem]]</var> 不是 <emu-val>undefined</emu-val>，则</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>loc</var>.<var class="field">[[NumberingSystem]]</var>&nbsp;»)。</li><li>令 <var>r</var> 为 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_770"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_771"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>, « <var>loc</var>.<var class="field">[[Locale]]</var>&nbsp;»)。</li><li>如果 <var>r</var> 不是 <emu-val>undefined</emu-val>，则</li><li>令 <var>foundLocale</var> 为 <var>r</var>.<var class="field">[[locale]]</var>。</li><li>令 <var>foundLocaleData</var> 为 <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_772"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var>.[[&lt;<var>foundLocale</var>&gt;]]。</li><li>令 <var>numberingSystems</var> 为 <var>foundLocaleData</var>.<var class="field">[[nu]]</var>。</li><li>令 <var>list</var> 为 « <var>numberingSystems</var>[0]&nbsp;»。</li><li>否则，</li><li>令 <var>list</var> 为 « <emu-val>"latn"</emu-val>&nbsp;»。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>list</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-timezonesoflocale" type="implementation-defined abstract operation" aoid="TimeZonesOfLocale">
      <h1><span class="secnum">15.5.13</span> TimeZonesOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation TimeZonesOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 数组或 <emu-val>undefined</emu-val>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>region</var> 为 <emu-xref aoid="GetLocaleRegion" id="_ref_773"><a href="#sec-getlocaleregion">GetLocaleRegion</a></emu-xref>(<var>loc</var>.<var class="field">[[Locale]]</var>)。</li><li>如果 <var>region</var> 为 <emu-val>undefined</emu-val>，返回 <emu-val>undefined</emu-val>。</li><li>令 <var>list</var> 为 <var>region</var> 中常用的唯一规范时区标识符列表，必须是 IANA 时区数据库的规范 Zone 名称字符串。如果 <var>region</var> 没有常用时区，则列表为空。列表按字典序排序。</li><li>返回 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>( <var>list</var> )。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-textdirectionoflocale" type="implementation-defined abstract operation" aoid="TextDirectionOfLocale">
      <h1><span class="secnum">15.5.14</span> TextDirectionOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation TextDirectionOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 字符串或 <emu-val>undefined</emu-val>. 以下算法参考 <a href="https://unicode.org/reports/tr35/tr35.html#Script_Metadata">Unicode 技术标准 #35 第 1 部分
            核心，脚本元数据</a>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>locale</var> 为 <var>loc</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>script</var> 为 <emu-xref aoid="GetLocaleScript" id="_ref_774"><a href="#sec-getlocalescript">GetLocaleScript</a></emu-xref>(<var>locale</var>)。</li><li>如果 <var>script</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>maximal</var> 为 <a href="https://unicode.org/reports/tr35/#Likely_Subtags">Add Likely Subtags</a> 算法应用于
        <var>locale</var> 的结果。如果发生错误，返回 <emu-val>undefined</emu-val>。</li><li>将 <var>script</var> 设置为 <emu-xref aoid="GetLocaleScript" id="_ref_775"><a href="#sec-getlocalescript">GetLocaleScript</a></emu-xref>(<var>maximal</var>)。</li><li>如果 <var>script</var> 为 <emu-val>undefined</emu-val>，返回 <emu-val>undefined</emu-val>。</li><li>如果 <var>script</var> 的默认字符排列方向为右到左，返回 <emu-val>"rtl"</emu-val>。</li><li>如果 <var>script</var> 的默认字符排列方向为左到右，返回 <emu-val>"ltr"</emu-val>。</li><li>返回 <emu-val>undefined</emu-val>。</li></ol></emu-alg>
      <emu-note><span class="note">Note 1</span><div class="note-contents">
        当无法确定 <var>script</var> 的默认字符排列方向，或方向既不是右到左也不是左到右时，将返回 <emu-val>undefined</emu-val>。
      </div></emu-note>
      <emu-note><span class="note">Note 2</span><div class="note-contents">
        一种语言的文本可能有多种方向。用某种脚本书写的语言文本也可能有多种方向。因此，如果文本的元数据中包含方向信息，则该方向信息应作为主要依据。TextDirectionOfLocale
        返回的信息仅作为没有元数据时的备用机制，仅在没有方向信息但已知语言信息时使用。Web 开发者不应过度依赖此 API 来决定文本方向。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-weekdaytouvalue" type="abstract operation" aoid="WeekdayToUValue">
      <h1><span class="secnum">15.5.15</span> WeekdayToUValue ( <var>fw</var> )</h1>
      <p>The abstract operation WeekdayToUValue takes argument <var>fw</var> (字符串) and returns 字符串. 将数字表示的星期几字符串转换为 <a href="https://unicode.org/reports/tr35/#UnicodeFirstDayIdentifier">Unicode
            首日标识符</a>，并返回其他字符串原样。 It performs the following steps when called:</p>
      <emu-alg><ol><li>对 <emu-xref href="#table-locale-weekday-string-value" id="_ref_128"><a href="#table-locale-weekday-string-value">Table 26</a></emu-xref> 的每一行（除表头），按表顺序执行</li><li>令 <var>w</var> 为当前行的 Weekday 值。</li><li>令 <var>s</var> 为当前行的字符串值。</li><li>如果 <var>fw</var> 等于 <var>w</var>，返回 <var>s</var>。</li><li>返回 <var>fw</var>。</li></ol></emu-alg>

      <emu-table id="table-locale-weekday-string-value"><figure><figcaption>Table 26: 星期字符串与值</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Weekday</th>
              <th>String</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><emu-val>"0"</emu-val></td>
            <td><emu-val>"sun"</emu-val></td>
            <td><emu-val>7</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"1"</emu-val></td>
            <td><emu-val>"mon"</emu-val></td>
            <td><emu-val>1</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"2"</emu-val></td>
            <td><emu-val>"tue"</emu-val></td>
            <td><emu-val>2</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"3"</emu-val></td>
            <td><emu-val>"wed"</emu-val></td>
            <td><emu-val>3</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"4"</emu-val></td>
            <td><emu-val>"thu"</emu-val></td>
            <td><emu-val>4</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"5"</emu-val></td>
            <td><emu-val>"fri"</emu-val></td>
            <td><emu-val>5</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"6"</emu-val></td>
            <td><emu-val>"sat"</emu-val></td>
            <td><emu-val>6</emu-val><sub>𝔽</sub></td>
          </tr>
          <tr>
            <td><emu-val>"7"</emu-val></td>
            <td><emu-val>"sun"</emu-val></td>
            <td><emu-val>7</emu-val><sub>𝔽</sub></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-weekdayuvaluetonumber" type="abstract operation" aoid="WeekdayUValueToNumber">
      <h1><span class="secnum">15.5.16</span> WeekdayUValueToNumber ( <var>fw</var> )</h1>
      <p>The abstract operation WeekdayUValueToNumber takes argument <var>fw</var> (字符串) and returns 整数或 <emu-val>undefined</emu-val>. 将 <a href="https://unicode.org/reports/tr35/#UnicodeFirstDayIdentifier">Unicode 首日标识符</a> 转换为数字 ISO 8601
          <em>calendar day of week</em>，对于其他字符串返回 <emu-val>undefined</emu-val>。
         It performs the following steps when called:</p>
      <emu-alg><ol><li>对 <emu-xref href="#table-locale-weekday-string-value" id="_ref_129"><a href="#table-locale-weekday-string-value">Table 26</a></emu-xref> 的每一行（除表头），按表顺序执行</li><li>令 <var>s</var> 为当前行的字符串值。</li><li>令 <var>v</var> 为当前行的 Value 值。</li><li>如果 <var>fw</var> 等于 <var>s</var>，返回 <var>v</var>。</li><li>返回 <emu-val>undefined</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-weekinfooflocale" type="implementation-defined abstract operation" aoid="WeekInfoOfLocale">
      <h1><span class="secnum">15.5.17</span> WeekInfoOfLocale ( <var>loc</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation WeekInfoOfLocale takes argument <var>loc</var> (Intl.Locale) and returns 一个 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>. 以下算法参考 <a href="https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Patterns_Week_Elements">Unicode
            技术标准 #35 第 4 部分 日期，周元素</a>。 It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>locale</var> 为 <var>loc</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>r</var> 为 <emu-xref href="#table-locale-weekinfo-record" id="_ref_130"><a href="#table-locale-weekinfo-record">Table 27</a></emu-xref> 定义的字段的 <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>，值基于 <var>locale</var>。</li><li>令 <var>fws</var> 为 <var>loc</var>.<var class="field">[[FirstDayOfWeek]]</var>。</li><li>令 <var>fw</var> 为 <emu-xref aoid="WeekdayUValueToNumber" id="_ref_776"><a href="#sec-weekdayuvaluetonumber">WeekdayUValueToNumber</a></emu-xref>(<var>fws</var>)。</li><li>如果 <var>fw</var> 不是 <emu-val>undefined</emu-val>，则</li><li>设置 <var>r</var>.<var class="field">[[FirstDay]]</var> 为 <var>fw</var>。</li><li>返回 <var>r</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        该记录的返回值由 <var>locale</var> 决定，依据 <a href="https://www.unicode.org/reports/tr35/tr35-dates.html#Week_Data">Unicode 技术标准
          #35 第 4 部分 日期，周数据</a> 和 <a href="https://www.unicode.org/reports/tr35/tr35-dates.html#first-day-overrides">首日覆盖</a> 的规范。
      </div></emu-note>

      <emu-table id="table-locale-weekinfo-record"><figure><figcaption>Table 27: WeekInfo 记录字段</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Field Name</th>
              <th>Value</th>
              <th>Meaning</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[FirstDay]]</var></td>
            <td>日历周的 ISO 8601 <em>calendar day of week</em>，即其在以星期一为 <emu-val>1</emu-val><sub>𝔽</sub>、星期日为 <emu-val>7</emu-val><sub>𝔽</sub> 的周序列中的 1
              基序号。</td>
            <td>用于日历的“首日”是哪一天。</td>
          </tr>
          <tr>
            <td><var class="field">[[Weekend]]</var></td>
            <td>一个或多个 ISO 8601 <em>calendar day of week</em> 整数值 <emu-val>1</emu-val><sub>𝔽</sub>（星期一）到 <emu-val>7</emu-val><sub>𝔽</sub>（星期日），按升序排列。
            </td>
            <td>表示哪些星期几被视为“周末”的列表。注意，不同语言环境的周末天数可能不同，且可能不连续。</td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="numberformat-objects">
  <h1><span class="secnum">16</span> NumberFormat 对象</h1>

  <emu-clause id="sec-intl-numberformat-constructor">
    <h1><span class="secnum">16.1</span> Intl.NumberFormat 构造函数</h1>

    <p>Intl.NumberFormat 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.NumberFormat%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_777"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"NumberFormat"</emu-val> 属性的初始值。</li>
    </ul>

    <p>所有 <emu-xref href="#intl-object" id="_ref_778"><a href="#intl-object">Intl 对象</a></emu-xref>服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_131"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-intl.numberformat" oldids="sec-initializenumberformat"><span id="sec-initializenumberformat"></span>
      <h1><span class="secnum">16.1.1</span> Intl.NumberFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当以可选参数 <var>locales</var> 和 <var>options</var> 调用 <code>Intl.NumberFormat</code> 函数时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，令 <var>newTarget</var> 为活动函数对象，否则令 <var>newTarget</var> 为 NewTarget。</li><li>令 <var>numberFormat</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <emu-val>"%Intl.NumberFormat.prototype%"</emu-val>, «
        <var class="field">[[InitializedNumberFormat]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[LocaleData]]</var>, <var class="field">[[NumberingSystem]]</var>, <var class="field">[[Style]]</var>, <var class="field">[[Unit]]</var>,
        <var class="field">[[UnitDisplay]]</var>, <var class="field">[[Currency]]</var>, <var class="field">[[CurrencyDisplay]]</var>, <var class="field">[[CurrencySign]]</var>, <var class="field">[[MinimumIntegerDigits]]</var>,
        <var class="field">[[MinimumFractionDigits]]</var>, <var class="field">[[MaximumFractionDigits]]</var>, <var class="field">[[MinimumSignificantDigits]]</var>,
        <var class="field">[[MaximumSignificantDigits]]</var>, <var class="field">[[RoundingType]]</var>, <var class="field">[[Notation]]</var>, <var class="field">[[CompactDisplay]]</var>, <var class="field">[[UseGrouping]]</var>,
        <var class="field">[[SignDisplay]]</var>, <var class="field">[[RoundingIncrement]]</var>, <var class="field">[[RoundingMode]]</var>, <var class="field">[[ComputedRoundingPriority]]</var>, <var class="field">[[TrailingZeroDisplay]]</var>,
        <var class="field">[[BoundFormat]]</var>&nbsp;»)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_779"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_780"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_781"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var>, <var>locales</var>,
        <var>options</var>, « <emu-const>coerce-options</emu-const>&nbsp;»)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>设置 <var>numberFormat</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>设置 <var>numberFormat</var>.<var class="field">[[LocaleData]]</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>设置 <var>numberFormat</var>.<var class="field">[[NumberingSystem]]</var> 为 <var>r</var>.<var class="field">[[nu]]</var>。</li><li>执行 ?&nbsp;<emu-xref aoid="SetNumberFormatUnitOptions" id="_ref_782"><a href="#sec-setnumberformatunitoptions">SetNumberFormatUnitOptions</a></emu-xref>(<var>numberFormat</var>, <var>options</var>)。</li><li>令 <var>style</var> 为 <var>numberFormat</var>.<var class="field">[[Style]]</var>。</li><li>令 <var>notation</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_783"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"notation"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"standard"</emu-val>, <emu-val>"scientific"</emu-val>,
        <emu-val>"engineering"</emu-val>, <emu-val>"compact"</emu-val>&nbsp;», <emu-val>"standard"</emu-val>)。</li><li>设置 <var>numberFormat</var>.<var class="field">[[Notation]]</var> 为 <var>notation</var>。</li><li>如果 <var>style</var> 是 <emu-val>"currency"</emu-val> 且 <var>notation</var> 是 <emu-val>"standard"</emu-val>，则</li><li>令 <var>currency</var> 为 <var>numberFormat</var>.<var class="field">[[Currency]]</var>。</li><li>令 <var>cDigits</var> 为 <emu-xref aoid="CurrencyDigits" id="_ref_784"><a href="#sec-currencydigits">CurrencyDigits</a></emu-xref>(<var>currency</var>)。</li><li>令 <var>mnfdDefault</var> 为 <var>cDigits</var>。</li><li>令 <var>mxfdDefault</var> 为 <var>cDigits</var>。</li><li>否则，</li><li>令 <var>mnfdDefault</var> 为 0。</li><li>如果 <var>style</var> 是 <emu-val>"percent"</emu-val>，则</li><li>令 <var>mxfdDefault</var> 为 0。</li><li>否则，</li><li>令 <var>mxfdDefault</var> 为 3。</li><li>执行 ?&nbsp;<emu-xref aoid="SetNumberFormatDigitOptions" id="_ref_785"><a href="#sec-setnumberformatdigitoptions">SetNumberFormatDigitOptions</a></emu-xref>(<var>numberFormat</var>, <var>options</var>, <var>mnfdDefault</var>, <var>mxfdDefault</var>, <var>notation</var>)。</li><li>令 <var>compactDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_786"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"compactDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val>&nbsp;»,
        <emu-val>"short"</emu-val>)。</li><li>令 <var>defaultUseGrouping</var> 为 <emu-val>"auto"</emu-val>。</li><li>如果 <var>notation</var> 是 <emu-val>"compact"</emu-val>，则</li><li>设置 <var>numberFormat</var>.<var class="field">[[CompactDisplay]]</var> 为 <var>compactDisplay</var>。</li><li>设置 <var>defaultUseGrouping</var> 为 <emu-val>"min2"</emu-val>。</li><li>注：出于历史原因，字符串 <emu-val>"true"</emu-val> 和 <emu-val>"false"</emu-val> 被接受并替换为默认值。</li><li>令 <var>useGrouping</var> 为 ?&nbsp;<emu-xref aoid="GetBooleanOrStringNumberFormatOption" id="_ref_787"><a href="#sec-getbooleanorstringnumberformatoption">GetBooleanOrStringNumberFormatOption</a></emu-xref>(<var>options</var>, <emu-val>"useGrouping"</emu-val>, « <emu-val>"min2"</emu-val>, <emu-val>"auto"</emu-val>,
        <emu-val>"always"</emu-val>, <emu-val>"true"</emu-val>, <emu-val>"false"</emu-val>&nbsp;», <var>defaultUseGrouping</var>)。</li><li>如果 <var>useGrouping</var> 是 <emu-val>"true"</emu-val> 或 <emu-val>"false"</emu-val>，设置 <var>useGrouping</var> 为 <var>defaultUseGrouping</var>。</li><li>如果 <var>useGrouping</var> 是 <emu-val>true</emu-val>，设置 <var>useGrouping</var> 为 <emu-val>"always"</emu-val>。</li><li>设置 <var>numberFormat</var>.<var class="field">[[UseGrouping]]</var> 为 <var>useGrouping</var>。</li><li>令 <var>signDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_788"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"signDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"auto"</emu-val>, <emu-val>"never"</emu-val>, <emu-val>"always"</emu-val>,
        <emu-val>"exceptZero"</emu-val>, <emu-val>"negative"</emu-val>&nbsp;», <emu-val>"auto"</emu-val>)。</li><li>设置 <var>numberFormat</var>.<var class="field">[[SignDisplay]]</var> 为 <var>signDisplay</var>。</li><li>如果实现支持 <emu-xref href="#legacy-constructor" id="_ref_132"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref> 的规范可选构造器模式，则</li><li>令 <var>this</var> 为 <emu-val>this</emu-val> 值。</li><li>返回 ?&nbsp;<emu-xref aoid="ChainNumberFormat" id="_ref_789"><a href="#sec-chainnumberformat">ChainNumberFormat</a></emu-xref>(<var>numberFormat</var>, NewTarget, <var>this</var>)。</li><li>返回 <var>numberFormat</var>。</li></ol></emu-alg>

      <emu-clause id="sec-chainnumberformat" type="abstract operation" normative-optional="" aoid="ChainNumberFormat"><div class="attributes-tag"><emu-xref href="#sec-conformance"><a href="https://tc39.es/ecma262/#sec-conformance">Normative Optional</a></emu-xref></div>
        <h1><span class="secnum">16.1.1.1</span> ChainNumberFormat ( <var>numberFormat</var>, <var>newTarget</var>, <var>this</var> )</h1>
        <p>The abstract operation ChainNumberFormat takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat), <var>newTarget</var> (一个 ECMAScript 语言值), and <var>this</var> (一个 ECMAScript 语言值) and returns 正常完成包含一个对象或抛出完成. It performs the following steps when called:</p>
        <emu-alg><ol><li>如果 <var>newTarget</var> 是 <emu-val>undefined</emu-val> 且 ?&nbsp;<emu-xref aoid="OrdinaryHasInstance"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_790"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, <var>this</var>) 是 <emu-val>true</emu-val>，则</li><li>执行 ?&nbsp;<emu-xref aoid="DefinePropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>this</var>, <emu-xref href="#intl-object" id="_ref_791"><a href="#intl-object">%Intl%</a></emu-xref>.<var class="field">[[FallbackSymbol]]</var>, PropertyDescriptor{ <var class="field">[[Value]]</var>:
          <var>numberFormat</var>, <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val>&nbsp;})。</li><li>返回 <var>this</var>。</li><li>返回 <var>numberFormat</var>。</li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-setnumberformatdigitoptions" oldids="sec-setnfdigitoptions" type="abstract operation" aoid="SetNumberFormatDigitOptions"><span id="sec-setnfdigitoptions"></span>
      <h1><span class="secnum">16.1.2</span> SetNumberFormatDigitOptions ( <var>intlObj</var>, <var>options</var>, <var>mnfdDefault</var>, <var>mxfdDefault</var>, <var>notation</var> )</h1>
      <p>The abstract operation SetNumberFormatDigitOptions takes arguments <var>intlObj</var> (一个对象), <var>options</var> (一个对象), <var>mnfdDefault</var> (一个整数), <var>mxfdDefault</var> (一个整数), and <var>notation</var> (一个字符串) and returns 正常完成包含 <emu-const>unused</emu-const> 或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>mnid</var> 为 ?&nbsp;<emu-xref aoid="GetNumberOption" id="_ref_792"><a href="#sec-getnumberoption">GetNumberOption</a></emu-xref>(<var>options</var>, <emu-val>"minimumIntegerDigits"</emu-val>, 1, 21, 1)。</li><li>令 <var>mnfd</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"minimumFractionDigits"</emu-val>)。</li><li>令 <var>mxfd</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"maximumFractionDigits"</emu-val>)。</li><li>令 <var>mnsd</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"minimumSignificantDigits"</emu-val>)。</li><li>令 <var>mxsd</var> 为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"maximumSignificantDigits"</emu-val>)。</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumIntegerDigits]]</var> 为 <var>mnid</var>。</li><li>令 <var>roundingIncrement</var> 为 ?&nbsp;<emu-xref aoid="GetNumberOption" id="_ref_793"><a href="#sec-getnumberoption">GetNumberOption</a></emu-xref>(<var>options</var>, <emu-val>"roundingIncrement"</emu-val>, 1, 5000, 1)。</li><li>如果 <var>roundingIncrement</var> 不在 « 1, 2, 5, 10, 20, 25, 50, 100, 200, 250, 500, 1000, 2000, 2500, 5000&nbsp;» 中，抛出
        <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>roundingMode</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_794"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"roundingMode"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"ceil"</emu-val>, <emu-val>"floor"</emu-val>, <emu-val>"expand"</emu-val>,
        <emu-val>"trunc"</emu-val>, <emu-val>"halfCeil"</emu-val>, <emu-val>"halfFloor"</emu-val>, <emu-val>"halfExpand"</emu-val>, <emu-val>"halfTrunc"</emu-val>, <emu-val>"halfEven"</emu-val>&nbsp;», <emu-val>"halfExpand"</emu-val>)。</li><li>令 <var>roundingPriority</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_795"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"roundingPriority"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"auto"</emu-val>, <emu-val>"morePrecision"</emu-val>,
        <emu-val>"lessPrecision"</emu-val>&nbsp;», <emu-val>"auto"</emu-val>)。</li><li>令 <var>trailingZeroDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_796"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"trailingZeroDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"auto"</emu-val>,
        <emu-val>"stripIfInteger"</emu-val>&nbsp;», <emu-val>"auto"</emu-val>)。</li><li>注：<emu-xref aoid="SetNumberFormatDigitOptions" id="_ref_797"><a href="#sec-setnumberformatdigitoptions">SetNumberFormatDigitOptions</a></emu-xref> 所需的所有字段已从 <var>options</var> 读取。以下 AO 解释这些选项并可能抛出异常。</li><li>如果 <var>roundingIncrement</var> 不为 1，设置 <var>mxfdDefault</var> 为 <var>mnfdDefault</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingIncrement]]</var> 为 <var>roundingIncrement</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingMode]]</var> 为 <var>roundingMode</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[TrailingZeroDisplay]]</var> 为 <var>trailingZeroDisplay</var>。</li><li>如果 <var>mnsd</var> 是 <emu-val>undefined</emu-val> 且 <var>mxsd</var> 是 <emu-val>undefined</emu-val>，令 <var>hasSd</var> 为 <emu-val>false</emu-val>。否则，令 <var>hasSd</var> 为 <emu-val>true</emu-val>。</li><li>如果 <var>mnfd</var> 是 <emu-val>undefined</emu-val> 且 <var>mxfd</var> 是 <emu-val>undefined</emu-val>，令 <var>hasFd</var> 为 <emu-val>false</emu-val>。否则，令 <var>hasFd</var> 为 <emu-val>true</emu-val>。</li><li>令 <var>needSd</var> 为 <emu-val>true</emu-val>。</li><li>令 <var>needFd</var> 为 <emu-val>true</emu-val>。</li><li>如果 <var>roundingPriority</var> 是 <emu-val>"auto"</emu-val>，则</li><li>设置 <var>needSd</var> 为 <var>hasSd</var>。</li><li>如果 <var>needSd</var> 为 <emu-val>true</emu-val>，或 <var>hasFd</var> 为 <emu-val>false</emu-val> 且 <var>notation</var> 为 <emu-val>"compact"</emu-val>，则</li><li>设置 <var>needFd</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>needSd</var> 为 <emu-val>true</emu-val>，则</li><li>如果 <var>hasSd</var> 为 <emu-val>true</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumSignificantDigits]]</var> 为 ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_798"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mnsd</var>, 1, 21, 1)。</li><li>设置 <var>intlObj</var>.<var class="field">[[MaximumSignificantDigits]]</var> 为 ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_799"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mxsd</var>,
        <var>intlObj</var>.<var class="field">[[MinimumSignificantDigits]]</var>, 21, 21)。</li><li>否则，</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumSignificantDigits]]</var> 为 1。</li><li>设置 <var>intlObj</var>.<var class="field">[[MaximumSignificantDigits]]</var> 为 21。</li><li>如果 <var>needFd</var> 为 <emu-val>true</emu-val>，则</li><li>如果 <var>hasFd</var> 为 <emu-val>true</emu-val>，则</li><li>设置 <var>mnfd</var> 为 ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_800"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mnfd</var>, 0, 100, <emu-val>undefined</emu-val>)。</li><li>设置 <var>mxfd</var> 为 ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_801"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mxfd</var>, 0, 100, <emu-val>undefined</emu-val>)。</li><li>如果 <var>mnfd</var> 是 <emu-val>undefined</emu-val>，设置 <var>mnfd</var> 为 <emu-xref aoid="min"><a href="https://tc39.es/ecma262/#eqn-min">min</a></emu-xref>(<var>mnfdDefault</var>, <var>mxfd</var>)。</li><li>否则如果 <var>mxfd</var> 是 <emu-val>undefined</emu-val>，设置 <var>mxfd</var> 为 <emu-xref aoid="max"><a href="https://tc39.es/ecma262/#eqn-max">max</a></emu-xref>(<var>mxfdDefault</var>, <var>mnfd</var>)。</li><li>否则如果 <var>mnfd</var> 大于 <var>mxfd</var>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumFractionDigits]]</var> 为 <var>mnfd</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[MaximumFractionDigits]]</var> 为 <var>mxfd</var>。</li><li>否则，</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumFractionDigits]]</var> 为 <var>mnfdDefault</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[MaximumFractionDigits]]</var> 为 <var>mxfdDefault</var>。</li><li>如果 <var>needSd</var> 为 <emu-val>false</emu-val> 且 <var>needFd</var> 为 <emu-val>false</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumFractionDigits]]</var> 为 0。</li><li>设置 <var>intlObj</var>.<var class="field">[[MaximumFractionDigits]]</var> 为 0。</li><li>设置 <var>intlObj</var>.<var class="field">[[MinimumSignificantDigits]]</var> 为 1。</li><li>设置 <var>intlObj</var>.<var class="field">[[MaximumSignificantDigits]]</var> 为 2。</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>more-precision</emu-const>。</li><li>设置 <var>intlObj</var>.<var class="field">[[ComputedRoundingPriority]]</var> 为 <emu-val>"morePrecision"</emu-val>。</li><li>否则如果 <var>roundingPriority</var> 是 <emu-val>"morePrecision"</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>more-precision</emu-const>。</li><li>设置 <var>intlObj</var>.<var class="field">[[ComputedRoundingPriority]]</var> 为 <emu-val>"morePrecision"</emu-val>。</li><li>否则如果 <var>roundingPriority</var> 是 <emu-val>"lessPrecision"</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>less-precision</emu-const>。</li><li>设置 <var>intlObj</var>.<var class="field">[[ComputedRoundingPriority]]</var> 为 <emu-val>"lessPrecision"</emu-val>。</li><li>否则如果 <var>hasSd</var> 为 <emu-val>true</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>significant-digits</emu-const>。</li><li>设置 <var>intlObj</var>.<var class="field">[[ComputedRoundingPriority]]</var> 为 <emu-val>"auto"</emu-val>。</li><li>否则，</li><li>设置 <var>intlObj</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>fraction-digits</emu-const>。</li><li>设置 <var>intlObj</var>.<var class="field">[[ComputedRoundingPriority]]</var> 为 <emu-val>"auto"</emu-val>。</li><li>如果 <var>roundingIncrement</var> 不为 1，则</li><li>如果 <var>intlObj</var>.<var class="field">[[RoundingType]]</var> 不是 <emu-const>fraction-digits</emu-const>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>intlObj</var>.<var class="field">[[MaximumFractionDigits]]</var> 不是 <var>intlObj</var>.<var class="field">[[MinimumFractionDigits]]</var>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>返回 <emu-const>unused</emu-const>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-setnumberformatunitoptions" type="abstract operation" aoid="SetNumberFormatUnitOptions">
      <h1><span class="secnum">16.1.3</span> SetNumberFormatUnitOptions ( <var>intlObj</var>, <var>options</var> )</h1>
      <p>The abstract operation SetNumberFormatUnitOptions takes arguments <var>intlObj</var> (一个 Intl.NumberFormat) and <var>options</var> (一个对象) and returns 正常完成包含 <emu-const>unused</emu-const> 或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>style</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_802"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"decimal"</emu-val>, <emu-val>"percent"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"unit"</emu-val>&nbsp;»,
        <emu-val>"decimal"</emu-val>)。</li><li>设置 <var>intlObj</var>.<var class="field">[[Style]]</var> 为 <var>style</var>。</li><li>令 <var>currency</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_803"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"currency"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>currency</var> 是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>style</var> 是 <emu-val>"currency"</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>否则，</li><li>如果 <emu-xref aoid="IsWellFormedCurrencyCode" id="_ref_804"><a href="#sec-iswellformedcurrencycode">IsWellFormedCurrencyCode</a></emu-xref>(<var>currency</var>) 是 <emu-val>false</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>currencyDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_805"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"currencyDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"code"</emu-val>, <emu-val>"symbol"</emu-val>,
        <emu-val>"narrowSymbol"</emu-val>, <emu-val>"name"</emu-val>&nbsp;», <emu-val>"symbol"</emu-val>)。</li><li>令 <var>currencySign</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_806"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"currencySign"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"standard"</emu-val>, <emu-val>"accounting"</emu-val>&nbsp;»,
        <emu-val>"standard"</emu-val>)。</li><li>令 <var>unit</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_807"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"unit"</emu-val>, <emu-const>string</emu-const>, <emu-const>empty</emu-const>, <emu-val>undefined</emu-val>)。</li><li>如果 <var>unit</var> 是 <emu-val>undefined</emu-val>，则</li><li>如果 <var>style</var> 是 <emu-val>"unit"</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>否则，</li><li>如果 <emu-xref aoid="IsWellFormedUnitIdentifier" id="_ref_808"><a href="#sec-iswellformedunitidentifier">IsWellFormedUnitIdentifier</a></emu-xref>(<var>unit</var>) 是 <emu-val>false</emu-val>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>unitDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_809"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"unitDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"long"</emu-val>&nbsp;»,
        <emu-val>"short"</emu-val>)。</li><li>如果 <var>style</var> 是 <emu-val>"currency"</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[Currency]]</var> 为 <var>currency</var> 的 ASCII 大写。</li><li>设置 <var>intlObj</var>.<var class="field">[[CurrencyDisplay]]</var> 为 <var>currencyDisplay</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[CurrencySign]]</var> 为 <var>currencySign</var>。</li><li>如果 <var>style</var> 是 <emu-val>"unit"</emu-val>，则</li><li>设置 <var>intlObj</var>.<var class="field">[[Unit]]</var> 为 <var>unit</var>。</li><li>设置 <var>intlObj</var>.<var class="field">[[UnitDisplay]]</var> 为 <var>unitDisplay</var>。</li><li>返回 <emu-const>unused</emu-const>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-numberformat-constructor">
    <h1><span class="secnum">16.2</span> Intl.NumberFormat 构造函数的属性</h1>

    <p>Intl.NumberFormat 构造函数：</p>
    <ul>
      <li>有一个 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-intl.numberformat.prototype">
      <h1><span class="secnum">16.2.1</span> Intl.NumberFormat.prototype</h1>

      <p><code>Intl.NumberFormat.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-numberformat-prototype-object" id="_ref_810"><a href="#sec-properties-of-intl-numberformat-prototype-object">%Intl.NumberFormat.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.supportedlocalesof">
      <h1><span class="secnum">16.2.2</span> Intl.NumberFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当以参数 <var>locales</var> 和 <var>options</var> 调用 <code>supportedLocalesOf</code> 方法时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_811"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_812"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_813"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat-internal-slots">
      <h1><span class="secnum">16.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_133"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « <emu-val>"nu"</emu-val> »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « { <var class="field">[[Key]]</var>: <emu-val>"nu"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"numberingSystem"</emu-val> } »。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准 #35 第 1 部分核心，3.6.1 键和值定义</a>
        描述了与数字格式相关的三个区域扩展键：<emu-val>"cu"</emu-val> 表示货币，<emu-val>"cf"</emu-val> 表示货币格式样式，<emu-val>"nu"</emu-val> 表示数字系统。然而，Intl.NumberFormat 要求货币格式的货币通过选项对象中的 currency
        属性指定，货币格式样式通过选项对象中的 currencySign 属性指定。
      </div></emu-note>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_134"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义，并有以下附加约束：</p>

      <ul>
        <li>任何 <var class="field">[[LocaleData]]</var> 的 <emu-val>"nu"</emu-val> 字段的值的列表不得包含 <emu-val>"native"</emu-val>、<emu-val>"traditio"</emu-val> 或 <emu-val>"finance"</emu-val>。</li>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 必须为所有 locale 值 <var>locale</var> 提供 <var class="field">[[patterns]]</var>
          字段。该字段的值必须是一个记录，且必须有四种数字格式样式的字段：<emu-val>"decimal"</emu-val>、<emu-val>"percent"</emu-val>、<emu-val>"currency"</emu-val> 和 <emu-val>"unit"</emu-val>。</li>
        <li>
          上述 <emu-val>"currency"</emu-val> 和 <emu-val>"unit"</emu-val> 字段必须是至少包含 <emu-val>"fallback"</emu-val> 字段的记录。
          <emu-val>"currency"</emu-val> 可以有额外字段，其键对应 <emu-xref href="#sec-currency-codes" id="_ref_135"><a href="#sec-currency-codes">6.3</a></emu-xref> 的货币代码。
          每个 <emu-val>"currency"</emu-val> 字段必须是一个记录，包含对应 currencyDisplay 值的字段：<emu-val>"code"</emu-val>、<emu-val>"symbol"</emu-val>、<emu-val>"narrowSymbol"</emu-val> 和 <emu-val>"name"</emu-val>。
          每个这些字段必须包含对应 currencySign 值的记录：<emu-val>"standard"</emu-val> 或 <emu-val>"accounting"</emu-val>。<emu-val>unit</emu-val> 字段（在
          <var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]]）可以有除必需字段 <emu-val>"fallback"</emu-val> 外的其他字段，其键对应 <emu-xref href="#sec-measurement-unit-identifiers" id="_ref_136"><a href="#sec-measurement-unit-identifiers">6.6</a></emu-xref> 的核心测量单位标识符。
          每个 <emu-val>"unit"</emu-val> 字段必须是一个记录，包含对应 unitDisplay 值的字段：<emu-val>"narrow"</emu-val>、<emu-val>"short"</emu-val> 和 <emu-val>"long"</emu-val>。
        </li>
        <li>目前为止描述的 patterns 树的所有叶字段（<emu-val>"decimal"</emu-val>、<emu-val>"percent"</emu-val>、<emu-val>"currency"</emu-val> 的曾孙、<emu-val>"unit"</emu-val> 的孙）必须是包含
          <emu-val>"positivePattern"</emu-val>、<emu-val>"zeroPattern"</emu-val> 和 <emu-val>"negativePattern"</emu-val> 键的记录。</li>
        <li>
          上述字段（依赖符号的 pattern 字段）的值必须是包含子串 <emu-val>"{number}"</emu-val> 的字符串。
          <emu-val>"positivePattern"</emu-val> 必须包含子串 <emu-val>"{plusSign}"</emu-val> 但不包含 <emu-val>"{minusSign}"</emu-val>；<emu-val>"negativePattern"</emu-val> 必须包含子串 <emu-val>"{minusSign}"</emu-val> 但不包含
          <emu-val>"{plusSign}"</emu-val>；<emu-val>"zeroPattern"</emu-val> 不得包含 <emu-val>"{plusSign}"</emu-val> 或 <emu-val>"{minusSign}"</emu-val>。
          此外，<emu-val>"percent"</emu-val> 字段中的值还必须包含子串 <emu-val>"{percentSign}"</emu-val>；<emu-val>"currency"</emu-val>
          字段中的值还必须包含以下子串之一：<emu-val>"{currencyCode}"</emu-val>、<emu-val>"{currencyPrefix}"</emu-val> 或 <emu-val>"{currencySuffix}"</emu-val>；<emu-val>"unit"</emu-val>
          字段中的值还必须包含以下子串之一：<emu-val>"{unitPrefix}"</emu-val> 或 <emu-val>"{unitSuffix}"</emu-val>。
          当这些 pattern 字符串按 <emu-xref href="#ecma262" id="_ref_814"><a href="#ecma262">ECMA-262</a></emu-xref> 描述的 UTF-16 编码代码点序列解释时，不能包含 Unicode 标准中 General Category "Number, decimal digit"
          的任何代码点。
        </li>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 还必须为所有 locale 值 <var>locale</var> 提供 <var class="field">[[notationSubPatterns]]</var>
          字段。该字段的值必须是一个记录，包含两个字段：<var class="field">[[scientific]]</var> 和 <var class="field">[[compact]]</var>。<var class="field">[[scientific]]</var> 字段必须是包含子串
          <emu-val>"{number}"</emu-val>、<emu-val>"{scientificSeparator}"</emu-val> 和 <emu-val>"{scientificExponent}"</emu-val> 的字符串。<var class="field">[[compact]]</var> 字段必须是一个记录，包含两个字段：<emu-val>"short"</emu-val>
          和 <emu-val>"long"</emu-val>。每个字段必须是一个记录，包含所有实现支持的 compact notation 离散数量级的整数键。每个字段必须是一个字符串值，可以包含子串 <emu-val>"{number}"</emu-val>。<emu-val>"short"</emu-val>
          下的字符串必须包含子串 <emu-val>"{compactSymbol}"</emu-val>，<emu-val>"long"</emu-val> 下的字符串必须包含子串 <emu-val>"{compactName}"</emu-val>。</li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        推荐实现使用由 Common Locale Data Repository 提供的区域数据（可在 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 获取）。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-numberformat-prototype-object">
    <h1><span class="secnum">16.3</span> Intl.NumberFormat 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.NumberFormat 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.NumberFormat.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.NumberFormat 实例，不具有 <var class="field">[[InitializedNumberFormat]]</var> 内部槽或 Intl.NumberFormat 实例对象的其他内部槽。</li>
      <li>有一个 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-intl.numberformat.prototype.constructor">
      <h1><span class="secnum">16.3.1</span> Intl.NumberFormat.prototype.constructor</h1>

      <p><code>Intl.NumberFormat.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_815"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.resolvedoptions">
      <h1><span class="secnum">16.3.2</span> Intl.NumberFormat.prototype.resolvedOptions ( )</h1>

      <p>此函数提供对对象初始化期间计算的区域和选项的访问。</p>

      <emu-alg><ol><li>令 <var>nf</var> 为 <emu-val>this</emu-val> 值。</li><li>如果实现支持 <emu-xref href="#legacy-constructor" id="_ref_137"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref> 的规范可选构造器模式，则</li><li>设置 <var>nf</var> 为 ?&nbsp;<emu-xref aoid="UnwrapNumberFormat" id="_ref_816"><a href="#sec-unwrapnumberformat">UnwrapNumberFormat</a></emu-xref>(<var>nf</var>)。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, <var class="field">[[InitializedNumberFormat]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-numberformat-resolvedoptions-properties" id="_ref_138"><a href="#table-numberformat-resolvedoptions-properties">Table 28</a></emu-xref> 的每一行（除表头行外），按表顺序执行：</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>nf</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>如果 <var>v</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果当前行有 Conversion 值，则</li><li>断言：当前行的 Conversion 值为 <emu-const>number</emu-const>。</li><li>设置 <var>v</var> 为 <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>v</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-numberformat-resolvedoptions-properties"><figure><figcaption>Table 28: NumberFormat 实例的 Resolved Options</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>属性</th>
              <th>转换</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[NumberingSystem]]</var></td>
            <td><emu-val>"numberingSystem"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Style]]</var></td>
            <td><emu-val>"style"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Currency]]</var></td>
            <td><emu-val>"currency"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[CurrencyDisplay]]</var></td>
            <td><emu-val>"currencyDisplay"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[CurrencySign]]</var></td>
            <td><emu-val>"currencySign"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Unit]]</var></td>
            <td><emu-val>"unit"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[UnitDisplay]]</var></td>
            <td><emu-val>"unitDisplay"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[MinimumIntegerDigits]]</var></td>
            <td><emu-val>"minimumIntegerDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MinimumFractionDigits]]</var></td>
            <td><emu-val>"minimumFractionDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MaximumFractionDigits]]</var></td>
            <td><emu-val>"maximumFractionDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MinimumSignificantDigits]]</var></td>
            <td><emu-val>"minimumSignificantDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MaximumSignificantDigits]]</var></td>
            <td><emu-val>"maximumSignificantDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[UseGrouping]]</var></td>
            <td><emu-val>"useGrouping"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Notation]]</var></td>
            <td><emu-val>"notation"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[CompactDisplay]]</var></td>
            <td><emu-val>"compactDisplay"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[SignDisplay]]</var></td>
            <td><emu-val>"signDisplay"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[RoundingIncrement]]</var></td>
            <td><emu-val>"roundingIncrement"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[RoundingMode]]</var></td>
            <td><emu-val>"roundingMode"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[ComputedRoundingPriority]]</var></td>
            <td><emu-val>"roundingPriority"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[TrailingZeroDisplay]]</var></td>
            <td><emu-val>"trailingZeroDisplay"</emu-val></td>
            <td></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.format">
      <h1><span class="secnum">16.3.3</span> 获取 Intl.NumberFormat.prototype.format</h1>

      <p>Intl.NumberFormat.prototype.format 是一个访问器属性，其 set 访问器函数为 <emu-val>undefined</emu-val>。其 get 访问器函数执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>nf</var> 为 <emu-val>this</emu-val> 值。</li><li>如果实现支持 <emu-xref href="#legacy-constructor" id="_ref_139"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref> 的规范可选构造器模式，则</li><li>设置 <var>nf</var> 为 ?&nbsp;<emu-xref aoid="UnwrapNumberFormat" id="_ref_817"><a href="#sec-unwrapnumberformat">UnwrapNumberFormat</a></emu-xref>(<var>nf</var>)。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, <var class="field">[[InitializedNumberFormat]]</var>)。</li><li>如果 <var>nf</var>.<var class="field">[[BoundFormat]]</var> 为 <emu-val>undefined</emu-val>，则</li><li>令 <var>F</var> 为一个新的内置函数对象，如 Number Format Functions (<emu-xref href="#sec-number-format-functions" id="_ref_140"><a href="#sec-number-format-functions">16.5.2</a></emu-xref>) 所定义。</li><li>设置 <var>F</var>.<var class="field">[[NumberFormat]]</var> 为 <var>nf</var>。</li><li>设置 <var>nf</var>.<var class="field">[[BoundFormat]]</var> 为 <var>F</var>。</li><li>返回 <var>nf</var>.<var class="field">[[BoundFormat]]</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        返回的函数绑定到 <var>nf</var>，因此可以直接传递给 <code>Array.prototype.map</code> 或其他函数。
        这是历史遗留的惯例，作为兼容现有程序而保留，不再用于新特性。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.formatrange">
      <h1><span class="secnum">16.3.4</span> Intl.NumberFormat.prototype.formatRange ( <var>start</var>, <var>end</var> )</h1>

      <p>当调用 <code>formatRange</code> 方法并传入参数 <var>start</var> 和 <var>end</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>nf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, <var class="field">[[InitializedNumberFormat]]</var>)。</li><li>如果 <var>start</var> 为 <emu-val>undefined</emu-val> 或 <var>end</var> 为 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_818"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>start</var>)。</li><li>令 <var>y</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_819"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>end</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatNumericRange" id="_ref_820"><a href="#sec-formatnumericrange">FormatNumericRange</a></emu-xref>(<var>nf</var>, <var>x</var>, <var>y</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.formatrangetoparts">
      <h1><span class="secnum">16.3.5</span> Intl.NumberFormat.prototype.formatRangeToParts ( <var>start</var>, <var>end</var> )</h1>

      <p>当调用 <code>formatRangeToParts</code> 方法并传入参数 <var>start</var> 和 <var>end</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>nf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, <var class="field">[[InitializedNumberFormat]]</var>)。</li><li>如果 <var>start</var> 为 <emu-val>undefined</emu-val> 或 <var>end</var> 为 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_821"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>start</var>)。</li><li>令 <var>y</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_822"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>end</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatNumericRangeToParts" id="_ref_823"><a href="#sec-formatnumericrangetoparts">FormatNumericRangeToParts</a></emu-xref>(<var>nf</var>, <var>x</var>, <var>y</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.formattoparts">
      <h1><span class="secnum">16.3.6</span> Intl.NumberFormat.prototype.formatToParts ( <var>value</var> )</h1>

      <p>当调用 <code>formatToParts</code> 方法并传入可选参数 <var>value</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>nf</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, <var class="field">[[InitializedNumberFormat]]</var>)。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_824"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>value</var>)。</li><li>返回 <emu-xref aoid="FormatNumericToParts" id="_ref_825"><a href="#sec-formatnumbertoparts">FormatNumericToParts</a></emu-xref>(<var>nf</var>, <var>x</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype-%symbol.tostringtag%" oldids="sec-intl.numberformat.prototype-@@tostringtag"><span id="sec-intl.numberformat.prototype-@@tostringtag"></span>
      <h1><span class="secnum">16.3.7</span> Intl.NumberFormat.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.NumberFormat"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-numberformat-instances">
    <h1><span class="secnum">16.4</span> Intl.NumberFormat 实例的属性</h1>

    <p>Intl.NumberFormat 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-intl-numberformat-prototype-object" id="_ref_826"><a href="#sec-properties-of-intl-numberformat-prototype-object">%Intl.NumberFormat.prototype%</a></emu-xref>。</p>

    <p>Intl.NumberFormat 实例具有 <var class="field">[[InitializedNumberFormat]]</var> 内部槽。</p>

    <p>Intl.NumberFormat 实例还具有多个内部槽，这些槽由 <emu-xref href="#sec-intl-numberformat-constructor" title="" id="_ref_141"><a href="#sec-intl-numberformat-constructor">Intl.NumberFormat 构造函数</a></emu-xref> 计算：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串，表示用于格式化的<emu-xref href="#sec-language-tags" id="_ref_827"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[LocaleData]]</var> 是一个记录，表示实现用于格式化的数据。它是 <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_828"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var> 中与 <var class="field">[[Locale]]</var> 或其前缀相关的条目的值。</li>
      <li><var class="field">[[NumberingSystem]]</var> 是一个字符串，表示用于格式化的 <a href="https://unicode.org/reports/tr35/#UnicodeNumberSystemIdentifier">Unicode 数字系统标识符</a>。</li>
      <li><var class="field">[[Style]]</var> 是字符串 <emu-val>"decimal"</emu-val>、<emu-val>"currency"</emu-val>、<emu-val>"percent"</emu-val> 或 <emu-val>"unit"</emu-val> 之一，标识所测量的数量类型。</li>
      <li><var class="field">[[Currency]]</var> 是一个字符串，表示货币代码，仅在 <var class="field">[[Style]]</var> 为 <emu-val>"currency"</emu-val> 时使用。</li>
      <li><var class="field">[[CurrencyDisplay]]</var> 是字符串 <emu-val>"code"</emu-val>、<emu-val>"symbol"</emu-val>、<emu-val>"narrowSymbol"</emu-val> 或 <emu-val>"name"</emu-val> 之一，指定货币显示方式，仅在 <var class="field">[[Style]]</var> 为
        <emu-val>"currency"</emu-val> 时使用。</li>
      <li><var class="field">[[CurrencySign]]</var> 是字符串 <emu-val>"standard"</emu-val> 或 <emu-val>"accounting"</emu-val> 之一，指定负数是否以会计格式显示，仅在 <var class="field">[[Style]]</var> 为 <emu-val>"currency"</emu-val> 且
        <var class="field">[[SignDisplay]]</var> 不为 <emu-val>"never"</emu-val> 时使用。</li>
      <li><var class="field">[[Unit]]</var> 是<emu-xref href="#sec-measurement-unit-identifiers" id="_ref_829"><a href="#sec-measurement-unit-identifiers">核心单位标识符</a></emu-xref>，仅在 <var class="field">[[Style]]</var> 为 <emu-val>"unit"</emu-val> 时使用。</li>
      <li><var class="field">[[UnitDisplay]]</var> 是字符串 <emu-val>"short"</emu-val>、<emu-val>"narrow"</emu-val> 或 <emu-val>"long"</emu-val> 之一，指定单位显示方式，仅在 <var class="field">[[Style]]</var> 为 <emu-val>"unit"</emu-val> 时使用。</li>
      <li><var class="field">[[MinimumIntegerDigits]]</var> 是非负整数，表示最小整数位数。必要时会用前导零填充。</li>
      <li><var class="field">[[MinimumFractionDigits]]</var> 和 <var class="field">[[MaximumFractionDigits]]</var> 是非负整数，表示最小和最大小数位数。必要时会四舍五入或用尾随零填充。仅在 <var class="field">[[RoundingType]]</var> 为
        <emu-const>fraction-digits</emu-const>、<emu-const>more-precision</emu-const> 或 <emu-const>less-precision</emu-const> 时使用。</li>
      <li><var class="field">[[MinimumSignificantDigits]]</var> 和 <var class="field">[[MaximumSignificantDigits]]</var> 是正整数，表示最小和最大有效位数。若存在，格式化器会显示所需的有效位数。仅在
        <var class="field">[[RoundingType]]</var> 为 <emu-const>significant-digits</emu-const>、<emu-const>more-precision</emu-const> 或 <emu-const>less-precision</emu-const> 时使用。</li>
      <li><var class="field">[[UseGrouping]]</var> 是布尔值或字符串，表示何时使用分组分隔符。分组分隔符的位置及是否显示由实现定义。<emu-val>"always"</emu-val> 表示尽可能显示分组分隔符；<emu-val>"min2"</emu-val> 表示至少有2位时显示；<emu-val>"auto"</emu-val>
        表示按区域偏好显示。<emu-val>false</emu-val> 禁用分组分隔符。</li>
      <li><var class="field">[[RoundingType]]</var> 是 <emu-const>fraction-digits</emu-const>、<emu-const>significant-digits</emu-const>、<emu-const>more-precision</emu-const> 或 <emu-const>less-precision</emu-const>
        之一，表示舍入策略。<emu-const>fraction-digits</emu-const> 按 <var class="field">[[MinimumFractionDigits]]</var> 和 <var class="field">[[MaximumFractionDigits]]</var> 舍入；<emu-const>significant-digits</emu-const> 按
        <var class="field">[[MinimumSignificantDigits]]</var> 和 <var class="field">[[MaximumSignificantDigits]]</var> 舍入；<emu-const>more-precision</emu-const> 或 <emu-const>less-precision</emu-const>
        使用上述四项并按特定规则区分。<var class="field">[[RoundingType]]</var> 由 <emu-val>"roundingPriority"</emu-val> 选项派生。</li>
      <li><var class="field">[[ComputedRoundingPriority]]</var> 是字符串 <emu-val>"auto"</emu-val>、<emu-val>"morePrecision"</emu-val> 或 <emu-val>"lessPrecision"</emu-val> 之一，仅用于 <emu-xref href="#sec-intl.numberformat.prototype.resolvedoptions" id="_ref_142"><a href="#sec-intl.numberformat.prototype.resolvedoptions">16.3.2</a></emu-xref> 将 <var class="field">[[RoundingType]]</var> 转换回有效的
        <emu-val>"roundingPriority"</emu-val> 选项。</li>
      <li><var class="field">[[Notation]]</var> 是字符串 <emu-val>"standard"</emu-val>、<emu-val>"scientific"</emu-val>、<emu-val>"engineering"</emu-val> 或 <emu-val>"compact"</emu-val> 之一，指定格式化数字的显示方式。</li>
      <li><var class="field">[[CompactDisplay]]</var> 是字符串 <emu-val>"short"</emu-val> 或 <emu-val>"long"</emu-val> 之一，指定紧凑记法的显示方式，仅在 <var class="field">[[Notation]]</var> 为 <emu-val>"compact"</emu-val> 时使用。</li>
      <li>
        <var class="field">[[SignDisplay]]</var> 是字符串 <emu-val>"auto"</emu-val>、<emu-val>"always"</emu-val>、<emu-val>"never"</emu-val>、<emu-val>"exceptZero"</emu-val> 或 <emu-val>"negative"</emu-val> 之一，指定何时显示符号（非 <emu-val>"auto"</emu-val>
        时分别对应总是显示、从不显示、仅非零显示、仅负数非零显示）。
        在科学记法中，该槽影响尾数的符号显示，不影响指数。
      </li>
      <li><var class="field">[[RoundingIncrement]]</var> 是一个整数，能整除 10、100、1000 或 10000，表示舍入增量。例如 <var class="field">[[MaximumFractionDigits]]</var> 为 2 且
        <var class="field">[[RoundingIncrement]]</var> 为 5，则数字舍入到最接近的 0.05。</li>
      <li><var class="field">[[RoundingMode]]</var> 是 <dfn id="rounding-mode" tabindex="-1">舍入模式</dfn>，为 <emu-xref href="#table-intl-rounding-modes" id="_ref_143"><a href="#table-intl-rounding-modes">Table 29</a></emu-xref> 的 Identifier 列中的字符串之一。</li>
      <li><var class="field">[[TrailingZeroDisplay]]</var> 是字符串 <emu-val>"auto"</emu-val> 或 <emu-val>"stripIfInteger"</emu-val> 之一，表示是否在格式化为整数时去除尾随零。</li>
    </ul>

    <emu-table id="table-intl-rounding-modes"><figure><figcaption>Table 29: Intl.NumberFormat 的<emu-xref href="#rounding-mode" id="_ref_830"><a href="#rounding-mode">舍入模式</a></emu-xref></figcaption>
      
      <table class="real-table">
        <thead>
          <tr>
            <th rowspan="2">Identifier</th>
            <th rowspan="2">描述</th>
            <th colspan="5">示例：舍入到 0 小数位</th>
          </tr>
          <tr>
            <th>-1.5</th>
            <th>0.4</th>
            <th>0.5</th>
            <th>0.6</th>
            <th>1.5</th>
          </tr>
        </thead>
        <tbody><tr>
          <td><emu-val>"ceil"</emu-val></td>
          <td>向正无穷舍入</td>
          <td>⬆️ [-1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [2]</td>
        </tr>
        <tr>
          <td><emu-val>"floor"</emu-val></td>
          <td>向负无穷舍入</td>
          <td>⬇️ [-2]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [1]</td>
        </tr>
        <tr>
          <td><emu-val>"expand"</emu-val></td>
          <td>远离零舍入</td>
          <td>⬇️ [-2]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [2]</td>
        </tr>
        <tr>
          <td><emu-val>"trunc"</emu-val></td>
          <td>向零舍入</td>
          <td>⬆️ [-1]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [1]</td>
        </tr>
        <tr>
          <td><emu-val>"halfCeil"</emu-val></td>
          <td>中间值向正无穷舍入</td>
          <td>⬆️ [-1]</td>
          <td>⬇️ [0]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [2]</td>
        </tr>
        <tr>
          <td><emu-val>"halfFloor"</emu-val></td>
          <td>中间值向负无穷舍入</td>
          <td>⬇️ [-2]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬆️ [1]</td>
          <td>⬇️ [1]</td>
        </tr>
        <tr>
          <td><emu-val>"halfExpand"</emu-val></td>
          <td>中间值远离零舍入</td>
          <td>⬇️ [-2]</td>
          <td>⬇️ [0]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [2]</td>
        </tr>
        <tr>
          <td><emu-val>"halfTrunc"</emu-val></td>
          <td>中间值向零舍入</td>
          <td>⬆️ [-1]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬆️ [1]</td>
          <td>⬇️ [1]</td>
        </tr>
        <tr>
          <td><emu-val>"halfEven"</emu-val></td>
          <td>中间值向偶数舍入增量倍数</td>
          <td>⬇️ [-2]</td>
          <td>⬇️ [0]</td>
          <td>⬇️ [0]</td>
          <td>⬆️ [1]</td>
          <td>⬆️ [2]</td>
        </tr>
      </tbody></table>
      <emu-note><span class="note">Note</span><div class="note-contents">示例用于说明每个选项的独特行为。⬆️ 表示“向正无穷舍入”；⬇️ 表示“向负无穷舍入”。</div></emu-note>
    </figure></emu-table>

    <p>最后，Intl.NumberFormat 实例具有 <var class="field">[[BoundFormat]]</var> 内部槽，用于缓存 format 访问器 (<emu-xref href="#sec-intl.numberformat.prototype.format" id="_ref_144"><a href="#sec-intl.numberformat.prototype.format">16.3.3</a></emu-xref>) 返回的函数。</p>
  </emu-clause>

  <emu-clause id="sec-numberformat-abstracts">
    <h1><span class="secnum">16.5</span> NumberFormat 对象的抽象操作</h1>

    <emu-clause id="sec-currencydigits" type="implementation-defined abstract operation" aoid="CurrencyDigits">
      <h1><span class="secnum">16.5.1</span> CurrencyDigits ( <var>currency</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation CurrencyDigits takes argument <var>currency</var> (一个字符串) and returns 一个非负整数. It performs the following steps when called:</p>

      <emu-alg><ol><li>断言：<emu-xref aoid="IsWellFormedCurrencyCode" id="_ref_831"><a href="#sec-iswellformedcurrencycode">IsWellFormedCurrencyCode</a></emu-xref>(<var>currency</var>) 为 <emu-val>true</emu-val>。</li><li>返回一个非负整数，表示格式化该货币对应数量时使用的小数位数。如果没有可用的信息，则返回 2。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-number-format-functions">
      <h1><span class="secnum">16.5.2</span> 数字格式化函数</h1>

      <p>数字格式化函数是一个匿名内置函数，具有 <var class="field">[[NumberFormat]]</var> 内部槽。</p>
      <p>当数字格式化函数 <var>F</var> 被调用并传入可选参数 <var>value</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>nf</var> 为 <var>F</var>.<var class="field">[[NumberFormat]]</var>。</li><li>断言：<var>nf</var> 是一个对象且具有 <var class="field">[[InitializedNumberFormat]]</var> 内部槽。</li><li>如果未提供 <var>value</var>，令 <var>value</var> 为 <emu-val>undefined</emu-val>。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_832"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>value</var>)。</li><li>返回 <emu-xref aoid="FormatNumeric" id="_ref_833"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf</var>, <var>x</var>)。</li></ol></emu-alg>

      <p>数字格式化函数的 <emu-val>"length"</emu-val> 属性为 <emu-val>1</emu-val><sub>𝔽</sub>。</p>
    </emu-clause>

    <emu-clause id="sec-formatnumerictostring" oldids="sec-formatnumberstring" type="abstract operation" aoid="FormatNumericToString"><span id="sec-formatnumberstring"></span>
      <h1><span class="secnum">16.5.3</span> FormatNumericToString ( <var>intlObject</var>, <var>x</var> )</h1>
      <p>The abstract operation FormatNumericToString takes arguments <var>intlObject</var> (一个对象) and <var>x</var> (一个数学值或 <emu-const>negative-zero</emu-const>) and returns 一个包含 <var class="field">[[RoundedNumber]]</var>（数学值或 <emu-const>negative-zero</emu-const>）和 <var class="field">[[FormattedString]]</var>（字符串）的记录. It performs the following steps when called:</p>
      <emu-alg><ol><li>断言：<var>intlObject</var> 具有
        <var class="field">[[RoundingMode]]</var>、<var class="field">[[RoundingType]]</var>、<var class="field">[[MinimumSignificantDigits]]</var>、<var class="field">[[MaximumSignificantDigits]]</var>、<var class="field">[[MinimumIntegerDigits]]</var>、<var class="field">[[MinimumFractionDigits]]</var>、<var class="field">[[MaximumFractionDigits]]</var>、<var class="field">[[RoundingIncrement]]</var>
        和 <var class="field">[[TrailingZeroDisplay]]</var> 内部槽。</li><li>如果 <var>x</var> 是 <emu-const>negative-zero</emu-const>，则</li><li>令 <var>sign</var> 为 <emu-const>negative</emu-const>。</li><li>设置 <var>x</var> 为 0。</li><li>否则，</li><li>断言：<var>x</var> 是一个数学值。</li><li>如果 <var>x</var> &lt; 0，令 <var>sign</var> 为 <emu-const>negative</emu-const>；否则令 <var>sign</var> 为 <emu-const>positive</emu-const>。</li><li>如果 <var>sign</var> 为 <emu-const>negative</emu-const>，则</li><li>设置 <var>x</var> 为 -<var>x</var>。</li><li>令 <var>unsignedRoundingMode</var> 为 <emu-xref aoid="GetUnsignedRoundingMode" id="_ref_834"><a href="#sec-getunsignedroundingmode">GetUnsignedRoundingMode</a></emu-xref>(<var>intlObject</var>.<var class="field">[[RoundingMode]]</var>, <var>sign</var>)。</li><li>如果 <var>intlObject</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>significant-digits</emu-const>，则</li><li>令 <var>result</var> 为 ToRawPrecision(<var>x</var>, <var>intlObject</var>.<var class="field">[[MinimumSignificantDigits]]</var>,
        <var>intlObject</var>.<var class="field">[[MaximumSignificantDigits]]</var>, <var>unsignedRoundingMode</var>)。</li><li>否则如果 <var>intlObject</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>fraction-digits</emu-const>，则</li><li>令 <var>result</var> 为 ToRawFixed(<var>x</var>, <var>intlObject</var>.<var class="field">[[MinimumFractionDigits]]</var>, <var>intlObject</var>.<var class="field">[[MaximumFractionDigits]]</var>,
        <var>intlObject</var>.<var class="field">[[RoundingIncrement]]</var>, <var>unsignedRoundingMode</var>)。</li><li>否则，</li><li>令 <var>sResult</var> 为 ToRawPrecision(<var>x</var>, <var>intlObject</var>.<var class="field">[[MinimumSignificantDigits]]</var>,
        <var>intlObject</var>.<var class="field">[[MaximumSignificantDigits]]</var>, <var>unsignedRoundingMode</var>)。</li><li>令 <var>fResult</var> 为 ToRawFixed(<var>x</var>, <var>intlObject</var>.<var class="field">[[MinimumFractionDigits]]</var>, <var>intlObject</var>.<var class="field">[[MaximumFractionDigits]]</var>,
        <var>intlObject</var>.<var class="field">[[RoundingIncrement]]</var>, <var>unsignedRoundingMode</var>)。</li><li>如果 <var>fResult</var>.<var class="field">[[RoundingMagnitude]]</var> &lt; <var>sResult</var>.<var class="field">[[RoundingMagnitude]]</var>，令 <var>fixedIsMorePrecise</var> 为 <emu-val>true</emu-val>；否则令
        <var>fixedIsMorePrecise</var> 为 <emu-val>false</emu-val>。</li><li>如果 <var>intlObject</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>more-precision</emu-const> 且 <var>fixedIsMorePrecise</var> 为 <emu-val>true</emu-val>，则</li><li>令 <var>result</var> 为 <var>fResult</var>。</li><li>否则如果 <var>intlObject</var>.<var class="field">[[RoundingType]]</var> 为 <emu-const>less-precision</emu-const> 且 <var>fixedIsMorePrecise</var> 为 <emu-val>false</emu-val>，则</li><li>令 <var>result</var> 为 <var>fResult</var>。</li><li>否则，</li><li>令 <var>result</var> 为 <var>sResult</var>。</li><li>设置 <var>x</var> 为 <var>result</var>.<var class="field">[[RoundedNumber]]</var>。</li><li>令 <var>string</var> 为 <var>result</var>.<var class="field">[[FormattedString]]</var>。</li><li>如果 <var>intlObject</var>.<var class="field">[[TrailingZeroDisplay]]</var> 为 <emu-val>"stripIfInteger"</emu-val> 且 <emu-eqn class="inline"><var>x</var> <emu-xref aoid="modulo"><a href="https://tc39.es/ecma262/#eqn-modulo">modulo</a></emu-xref> 1 = 0</emu-eqn>，则</li><li>令 <var>i</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>string</var>, <emu-val>"."</emu-val>, 0)。</li><li>如果 <var>i</var> 不为 <emu-const>not-found</emu-const>，设置 <var>string</var> 为从 0 到 <var>i</var> 的子字符串。</li><li>令 <var>int</var> 为 <var>result</var>.<var class="field">[[IntegerDigitsCount]]</var>。</li><li>令 <var>minInteger</var> 为 <var>intlObject</var>.<var class="field">[[MinimumIntegerDigits]]</var>。</li><li>如果 <var>int</var> &lt; <var>minInteger</var>，则</li><li>令 <var>forwardZeros</var> 为 <var>minInteger</var> - <var>int</var> 个 0x0030（数字零）组成的字符串。</li><li>设置 <var>string</var> 为 <var>forwardZeros</var> 与 <var>string</var> 的字符串拼接。</li><li>如果 <var>sign</var> 为 <emu-const>negative</emu-const>，则</li><li>如果 <var>x</var> 为 0，设置 <var>x</var> 为 <emu-const>negative-zero</emu-const>。否则设置 <var>x</var> 为 -<var>x</var>。</li><li>返回记录 { <var class="field">[[RoundedNumber]]</var>: <var>x</var>, <var class="field">[[FormattedString]]</var>: <var>string</var>&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionnumberpattern" type="abstract operation" aoid="PartitionNumberPattern">
      <h1><span class="secnum">16.5.4</span> PartitionNumberPattern ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation PartitionNumberPattern takes arguments <var>numberFormat</var> (一个已初始化为 NumberFormat 的对象) and <var>x</var> (一个 Intl 数学值) and returns 一个包含 <var class="field">[[Type]]</var>（字符串）和 <var class="field">[[Value]]</var>（字符串）字段的记录列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>exponent</var> 为 0。</li><li>如果 <var>x</var> 是 <emu-const>not-a-number</emu-const>，则</li><li>令 <var>n</var> 为表示 <emu-val>NaN</emu-val> 的 <emu-xref href="#sec-implementation-dependencies" id="_ref_835"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值。</li><li>否则如果 <var>x</var> 是 <emu-const>positive-infinity</emu-const>，则</li><li>令 <var>n</var> 为表示正无穷的 <emu-xref href="#sec-implementation-dependencies" id="_ref_836"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值。</li><li>否则如果 <var>x</var> 是 <emu-const>negative-infinity</emu-const>，则</li><li>令 <var>n</var> 为表示负无穷的 <emu-xref href="#sec-implementation-dependencies" id="_ref_837"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值。</li><li>否则，</li><li>如果 <var>x</var> 不是 <emu-const>negative-zero</emu-const>，则</li><li>断言：<var>x</var> 是一个数学值。</li><li>如果 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"percent"</emu-val>，设置 <var>x</var> 为 100 × <var>x</var>。</li><li>设置 <var>exponent</var> 为 <emu-xref aoid="ComputeExponent" id="_ref_838"><a href="#sec-computeexponent">ComputeExponent</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>设置 <var>x</var> 为 <var>x</var> × 10<sup>-<var>exponent</var></sup>。</li><li>令 <var>formatNumberResult</var> 为 <emu-xref aoid="FormatNumericToString" id="_ref_839"><a href="#sec-formatnumerictostring">FormatNumericToString</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>令 <var>n</var> 为 <var>formatNumberResult</var>.<var class="field">[[FormattedString]]</var>。</li><li>设置 <var>x</var> 为 <var>formatNumberResult</var>.<var class="field">[[RoundedNumber]]</var>。</li><li>令 <var>pattern</var> 为 <emu-xref aoid="GetNumberFormatPattern" id="_ref_840"><a href="#sec-getnumberformatpattern">GetNumberFormatPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>令 <var>result</var> 为一个新的空列表。</li><li>令 <var>patternParts</var> 为 <emu-xref aoid="PartitionPattern" id="_ref_841"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>)。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>patternPart</var> 属于 <var>patternParts</var>，执行</li><li>令 <var>p</var> 为 <var>patternPart</var>.<var class="field">[[Type]]</var>。</li><li>如果 <var>p</var> 为 <emu-val>"literal"</emu-val>，则</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>patternPart</var>.<var class="field">[[Value]]</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"number"</emu-val>，则</li><li>令 <var>notationSubParts</var> 为 <emu-xref aoid="PartitionNotationSubPattern" id="_ref_842"><a href="#sec-partitionnotationsubpattern">PartitionNotationSubPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>, <var>n</var>, <var>exponent</var>)。</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>notationSubParts</var> 的列表拼接。</li><li>否则如果 <var>p</var> 为 <emu-val>"plusSign"</emu-val>，则</li><li>令 <var>plusSignSymbol</var> 为表示加号的 <emu-xref href="#sec-implementation-dependencies" id="_ref_843"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"plusSign"</emu-val>, <var class="field">[[Value]]</var>: <var>plusSignSymbol</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"minusSign"</emu-val>，则</li><li>令 <var>minusSignSymbol</var> 为表示减号的 <emu-xref href="#sec-implementation-dependencies" id="_ref_844"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"minusSign"</emu-val>, <var class="field">[[Value]]</var>: <var>minusSignSymbol</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"percentSign"</emu-val> 且 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"percent"</emu-val>，则</li><li>令 <var>percentSignSymbol</var> 为表示百分号的 <emu-xref href="#sec-implementation-dependencies" id="_ref_845"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"percentSign"</emu-val>, <var class="field">[[Value]]</var>: <var>percentSignSymbol</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"unitPrefix"</emu-val> 且 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"unit"</emu-val>，则</li><li>令 <var>unit</var> 为 <var>numberFormat</var>.<var class="field">[[Unit]]</var>。</li><li>令 <var>unitDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[UnitDisplay]]</var>。</li><li>令 <var>mu</var> 为在 <var>unitDisplay</var> 形式下，表示 <var>unit</var> 在 <var>x</var> 前的 <emu-xref href="#sec-implementation-dependencies" id="_ref_846"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值，可能依赖于语言的不同复数形式。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"unit"</emu-val>, <var class="field">[[Value]]</var>: <var>mu</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"unitSuffix"</emu-val> 且 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"unit"</emu-val>，则</li><li>令 <var>unit</var> 为 <var>numberFormat</var>.<var class="field">[[Unit]]</var>。</li><li>令 <var>unitDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[UnitDisplay]]</var>。</li><li>令 <var>mu</var> 为在 <var>unitDisplay</var> 形式下，表示 <var>unit</var> 在 <var>x</var> 后的 <emu-xref href="#sec-implementation-dependencies" id="_ref_847"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值，可能依赖于语言的不同复数形式。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"unit"</emu-val>, <var class="field">[[Value]]</var>: <var>mu</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"currencyCode"</emu-val> 且 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"currency"</emu-val>，则</li><li>令 <var>currency</var> 为 <var>numberFormat</var>.<var class="field">[[Currency]]</var>。</li><li>令 <var>cd</var> 为 <var>currency</var>。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"currency"</emu-val>, <var class="field">[[Value]]</var>: <var>cd</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"currencyPrefix"</emu-val> 且 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"currency"</emu-val>，则</li><li>令 <var>currency</var> 为 <var>numberFormat</var>.<var class="field">[[Currency]]</var>。</li><li>令 <var>currencyDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[CurrencyDisplay]]</var>。</li><li>令 <var>cd</var> 为在 <var>currencyDisplay</var> 形式下，表示 <var>currency</var> 在 <var>x</var> 前的 <emu-xref href="#sec-implementation-dependencies" id="_ref_848"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值，可能依赖于语言的不同复数形式。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"currency"</emu-val>, <var class="field">[[Value]]</var>: <var>cd</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"currencySuffix"</emu-val> 且 <var>numberFormat</var>.<var class="field">[[Style]]</var> 为 <emu-val>"currency"</emu-val>，则</li><li>令 <var>currency</var> 为 <var>numberFormat</var>.<var class="field">[[Currency]]</var>。</li><li>令 <var>currencyDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[CurrencyDisplay]]</var>。</li><li>令 <var>cd</var> 为在 <var>currencyDisplay</var> 形式下，表示 <var>currency</var> 在 <var>x</var> 后的 <emu-xref href="#sec-implementation-dependencies" id="_ref_849"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值，可能依赖于语言的不同复数形式。如果实现没有这样的表示，则使用 <var>currency</var> 本身。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"currency"</emu-val>, <var class="field">[[Value]]</var>: <var>cd</var>&nbsp;}。</li><li>否则，</li><li>令 <var>unknown</var> 为基于 <var>x</var> 和 <var>p</var> 的 <emu-xref href="#sec-implementation-dependencies" id="_ref_850"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"unknown"</emu-val>, <var class="field">[[Value]]</var>: <var>unknown</var>&nbsp;}。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionnotationsubpattern" type="abstract operation" aoid="PartitionNotationSubPattern">
      <h1><span class="secnum">16.5.5</span> PartitionNotationSubPattern ( <var>numberFormat</var>, <var>x</var>, <var>n</var>, <var>exponent</var> )</h1>
      <p>The abstract operation PartitionNotationSubPattern takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat), <var>x</var> (一个 Intl 数学值), <var>n</var> (一个字符串), and <var>exponent</var> (一个整数) and returns 一个包含 <var class="field">[[Type]]</var>（字符串）和 <var class="field">[[Value]]</var>（字符串）字段的记录列表. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>result</var> 为一个新的空列表。</li><li>如果 <var>x</var> 是 <emu-const>not-a-number</emu-const>，则</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"nan"</emu-val>, <var class="field">[[Value]]</var>: <var>n</var>&nbsp;}。</li><li>否则如果 <var>x</var> 是 <emu-const>positive-infinity</emu-const> 或 <emu-const>negative-infinity</emu-const>，则</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"infinity"</emu-val>, <var class="field">[[Value]]</var>: <var>n</var>&nbsp;}。</li><li>否则，</li><li>令 <var>notationSubPattern</var> 为 <emu-xref aoid="GetNotationSubPattern" id="_ref_851"><a href="#sec-getnotationsubpattern">GetNotationSubPattern</a></emu-xref>(<var>numberFormat</var>, <var>exponent</var>)。</li><li>令 <var>patternParts</var> 为 <emu-xref aoid="PartitionPattern" id="_ref_852"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>notationSubPattern</var>)。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>patternPart</var> 属于 <var>patternParts</var>，执行</li><li>令 <var>p</var> 为 <var>patternPart</var>.<var class="field">[[Type]]</var>。</li><li>如果 <var>p</var> 为 <emu-val>"literal"</emu-val>，则</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>patternPart</var>.<var class="field">[[Value]]</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"number"</emu-val>，则</li><li>如果 <var>numberFormat</var>.<var class="field">[[NumberingSystem]]</var> 匹配下表 Numbering System 列中的某个值，则</li><li>令 <var>digits</var> 为该行 Digits 列指定的码点列表。</li><li>断言：<var>digits</var> 的长度为 10。</li><li>令 <var>transliterated</var> 为空字符串。</li><li>令 <var>len</var> 为 <var>n</var> 的长度。</li><li>令 <var>position</var> 为 0。</li><li>重复，直到 <var>position</var> &lt; <var>len</var>，</li><li>令 <var>c</var> 为 <var>n</var> 中索引 <var>position</var> 的码元。</li><li>如果 0x0030 ≤ <var>c</var> ≤ 0x0039，则</li><li>注：<var>c</var> 是 ASCII 数字。</li><li>令 <var>i</var> 为 <var>c</var> - 0x0030。</li><li>设置 <var>c</var> 为 <emu-xref aoid="CodePointsToString"><a href="https://tc39.es/ecma262/#sec-codepointstostring">CodePointsToString</a></emu-xref>(« <var>digits</var>[<var>i</var>]&nbsp;»)。</li><li>设置 <var>transliterated</var> 为 <var>transliterated</var> 与 <var>c</var> 的字符串拼接。</li><li>设置 <var>position</var> 为 <var>position</var> + 1。</li><li>设置 <var>n</var> 为 <var>transliterated</var>。</li><li>否则，</li><li>使用实现相关算法将 <var>n</var> 映射为该数字系统下的适当表示。</li><li>令 <var>decimalSepIndex</var> 为 <emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>n</var>, <emu-val>"."</emu-val>, 0)。</li><li>如果 <var>decimalSepIndex</var> 不为 <emu-const>not-found</emu-const> 且 <var>decimalSepIndex</var> &gt; 0，则</li><li>令 <var>integer</var> 为 <var>n</var> 从 0 到 <var>decimalSepIndex</var> 的子字符串。</li><li>令 <var>fraction</var> 为 <var>n</var> 从 <var>decimalSepIndex</var> + 1 开始的子字符串。</li><li>否则，</li><li>令 <var>integer</var> 为 <var>n</var>。</li><li>令 <var>fraction</var> 为 <emu-val>undefined</emu-val>。</li><li>如果 <var>numberFormat</var>.<var class="field">[[UseGrouping]]</var> 为 <emu-val>false</emu-val>，则</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"integer"</emu-val>, <var class="field">[[Value]]</var>: <var>integer</var>&nbsp;}。</li><li>否则，</li><li>令 <var>groupSepSymbol</var> 为表示分组分隔符的 <emu-xref href="#sec-implementation-dependencies" id="_ref_853"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>令 <var>groups</var> 为一个列表，其元素为 <var>integer</var> 中由 <emu-xref href="#sec-implementation-dependencies" id="_ref_854"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 集合定义的位置的子字符串，顺序为从左到右，可能依赖于 <var>numberFormat</var>.<var class="field">[[UseGrouping]]</var> 的值。</li><li>断言：<var>groups</var> 列表的元素数量大于 0。</li><li>重复，直到 <var>groups</var> 列表为空，</li><li>移除第一个元素，令 <var>integerGroup</var> 为该元素的值。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"integer"</emu-val>, <var class="field">[[Value]]</var>: <var>integerGroup</var>&nbsp;}。</li><li>如果 <var>groups</var> 列表不为空，则</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"group"</emu-val>, <var class="field">[[Value]]</var>: <var>groupSepSymbol</var>&nbsp;}。</li><li>如果 <var>fraction</var> 不为 <emu-val>undefined</emu-val>，则</li><li>令 <var>decimalSepSymbol</var> 为表示小数分隔符的 <emu-xref href="#sec-implementation-dependencies" id="_ref_855"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"decimal"</emu-val>, <var class="field">[[Value]]</var>: <var>decimalSepSymbol</var>&nbsp;}。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"fraction"</emu-val>, <var class="field">[[Value]]</var>: <var>fraction</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"compactSymbol"</emu-val>，则</li><li>令 <var>compactSymbol</var> 为表示 <var>exponent</var> 的短形式 <emu-xref href="#sec-implementation-dependencies" id="_ref_856"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串，可能依赖于语言的不同复数形式。实现必须能提供该字符串，否则模式不会有 <emu-val>"{compactSymbol}"</emu-val> 占位符。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"compact"</emu-val>, <var class="field">[[Value]]</var>: <var>compactSymbol</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"compactName"</emu-val>，则</li><li>令 <var>compactName</var> 为表示 <var>exponent</var> 的长形式 <emu-xref href="#sec-implementation-dependencies" id="_ref_857"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串，可能依赖于语言的不同复数形式。实现必须能提供该字符串，否则模式不会有 <emu-val>"{compactName}"</emu-val> 占位符。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"compact"</emu-val>, <var class="field">[[Value]]</var>: <var>compactName</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"scientificSeparator"</emu-val>，则</li><li>令 <var>scientificSeparator</var> 为表示指数分隔符的 <emu-xref href="#sec-implementation-dependencies" id="_ref_858"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"exponentSeparator"</emu-val>, <var class="field">[[Value]]</var>: <var>scientificSeparator</var>&nbsp;}。</li><li>否则如果 <var>p</var> 为 <emu-val>"scientificExponent"</emu-val>，则</li><li>如果 <var>exponent</var> &lt; 0，则</li><li>令 <var>minusSignSymbol</var> 为表示减号的 <emu-xref href="#sec-implementation-dependencies" id="_ref_859"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"exponentMinusSign"</emu-val>, <var class="field">[[Value]]</var>: <var>minusSignSymbol</var>&nbsp;}。</li><li>令 <var>exponent</var> 为 -<var>exponent</var>。</li><li>令 <var>exponentResult</var> 为 ToRawFixed(<var>exponent</var>, 0, 0, 1, <emu-val>undefined</emu-val>)。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"exponentInteger"</emu-val>, <var class="field">[[Value]]</var>: <var>exponentResult</var>.<var class="field">[[FormattedString]]</var>&nbsp;}。</li><li>否则，</li><li>令 <var>unknown</var> 为基于 <var>x</var> 和 <var>p</var> 的 <emu-xref href="#sec-implementation-dependencies" id="_ref_860"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串。</li><li>向 <var>result</var> 添加记录 { <var class="field">[[Type]]</var>: <emu-val>"unknown"</emu-val>, <var class="field">[[Value]]</var>: <var>unknown</var>&nbsp;}。</li><li>返回 <var>result</var>。</li></ol></emu-alg>

      <emu-table id="table-numbering-system-digits"><figure><figcaption>Table 30: 具有简单数字映射的数字系统</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>数字系统</th>
              <th>数字</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>adlm</td>
            <td>U+1E950 到 U+1E959</td>
          </tr>
          <tr>
            <td>ahom</td>
            <td>U+11730 到 U+11739</td>
          </tr>
          <tr>
            <td>arab</td>
            <td>U+0660 到 U+0669</td>
          </tr>
          <tr>
            <td>arabext</td>
            <td>U+06F0 到 U+06F9</td>
          </tr>
          <tr>
            <td>bali</td>
            <td>U+1B50 到 U+1B59</td>
          </tr>
          <tr>
            <td>beng</td>
            <td>U+09E6 到 U+09EF</td>
          </tr>
          <tr>
            <td>bhks</td>
            <td>U+11C50 到 U+11C59</td>
          </tr>
          <tr>
            <td>brah</td>
            <td>U+11066 到 U+1106F</td>
          </tr>
          <tr>
            <td>cakm</td>
            <td>U+11136 到 U+1113F</td>
          </tr>
          <tr>
            <td>cham</td>
            <td>U+AA50 到 U+AA59</td>
          </tr>
          <tr>
            <td>deva</td>
            <td>U+0966 到 U+096F</td>
          </tr>
          <tr>
            <td>diak</td>
            <td>U+11950 到 U+11959</td>
          </tr>
          <tr>
            <td>fullwide</td>
            <td>U+FF10 到 U+FF19</td>
          </tr>
          <tr>
            <td>gara</td>
            <td>U+10D40 到 U+10D49</td>
          </tr>
          <tr>
            <td>gong</td>
            <td>U+11DA0 到 U+11DA9</td>
          </tr>
          <tr>
            <td>gonm</td>
            <td>U+11D50 到 U+11D59</td>
          </tr>
          <tr>
            <td>gujr</td>
            <td>U+0AE6 到 U+0AEF</td>
          </tr>
          <tr>
            <td>gukh</td>
            <td>U+16130 到 U+16139</td>
          </tr>
          <tr>
            <td>guru</td>
            <td>U+0A66 到 U+0A6F</td>
          </tr>
          <tr>
            <td>hanidec</td>
            <td>U+3007, U+4E00, U+4E8C, U+4E09, U+56DB, U+4E95, U+516D, U+4E03, U+516B, U+4E5D</td>
          </tr>
          <tr>
            <td>hmng</td>
            <td>U+16B50 到 U+16B59</td>
          </tr>
          <tr>
            <td>hmnp</td>
            <td>U+1E140 到 U+1E149</td>
          </tr>
          <tr>
            <td>java</td>
            <td>U+A9D0 到 U+A9D9</td>
          </tr>
          <tr>
            <td>kali</td>
            <td>U+A900 到 U+A909</td>
          </tr>
          <tr>
            <td>kawi</td>
            <td>U+11F50 到 U+11F59</td>
          </tr>
          <tr>
            <td>khmr</td>
            <td>U+17E0 到 U+17E9</td>
          </tr>
          <tr>
            <td>knda</td>
            <td>U+0CE6 到 U+0CEF</td>
          </tr>
          <tr>
            <td>krai</td>
            <td>U+16D70 到 U+16D79</td>
          </tr>
          <tr>
            <td>lana</td>
            <td>U+1A80 到 U+1A89</td>
          </tr>
          <tr>
            <td>lanatham</td>
            <td>U+1A90 到 U+1A99</td>
          </tr>
          <tr>
            <td>laoo</td>
            <td>U+0ED0 到 U+0ED9</td>
          </tr>
          <tr>
            <td>latn</td>
            <td>U+0030 到 U+0039</td>
          </tr>
          <tr>
            <td>lepc</td>
            <td>U+1C40 到 U+1C49</td>
          </tr>
          <tr>
            <td>limb</td>
            <td>U+1946 到 U+194F</td>
          </tr>
          <tr>
            <td>mathbold</td>
            <td>U+1D7CE 到 U+1D7D7</td>
          </tr>
          <tr>
            <td>mathdbl</td>
            <td>U+1D7D8 到 U+1D7E1</td>
          </tr>
          <tr>
            <td>mathmono</td>
            <td>U+1D7F6 到 U+1D7FF</td>
          </tr>
          <tr>
            <td>mathsanb</td>
            <td>U+1D7EC 到 U+1D7F5</td>
          </tr>
          <tr>
            <td>mathsans</td>
            <td>U+1D7E2 到 U+1D7EB</td>
          </tr>
          <tr>
            <td>mlym</td>
            <td>U+0D66 到 U+0D6F</td>
          </tr>
          <tr>
            <td>modi</td>
            <td>U+11650 到 U+11659</td>
          </tr>
          <tr>
            <td>mong</td>
            <td>U+1810 到 U+1819</td>
          </tr>
          <tr>
            <td>mroo</td>
            <td>U+16A60 到 U+16A69</td>
          </tr>
          <tr>
            <td>mtei</td>
            <td>U+ABF0 到 U+ABF9</td>
          </tr>
          <tr>
            <td>mymr</td>
            <td>U+1040 到 U+1049</td>
          </tr>
          <tr>
            <td>mymrepka</td>
            <td>U+116DA 到 U+116E3</td>
          </tr>
          <tr>
            <td>mymrpao</td>
            <td>U+116D0 到 U+116D9</td>
          </tr>
          <tr>
            <td>mymrshan</td>
            <td>U+1090 到 U+1099</td>
          </tr>
          <tr>
            <td>mymrtlng</td>
            <td>U+A9F0 到 U+A9F9</td>
          </tr>
          <tr>
            <td>nagm</td>
            <td>U+1E4F0 到 U+1E4F9</td>
          </tr>
          <tr>
            <td>newa</td>
            <td>U+11450 到 U+11459</td>
          </tr>
          <tr>
            <td>nkoo</td>
            <td>U+07C0 到 U+07C9</td>
          </tr>
          <tr>
            <td>olck</td>
            <td>U+1C50 到 U+1C59</td>
          </tr>
          <tr>
            <td>onao</td>
            <td>U+1E5F1 到 U+1E5FA</td>
          </tr>
          <tr>
            <td>orya</td>
            <td>U+0B66 到 U+0B6F</td>
          </tr>
          <tr>
            <td>osma</td>
            <td>U+104A0 到 U+104A9</td>
          </tr>
          <tr>
            <td>outlined</td>
            <td>U+1CCF0 到 U+1CCF9</td>
          </tr>
          <tr>
            <td>rohg</td>
            <td>U+10D30 到 U+10D39</td>
          </tr>
          <tr>
            <td>saur</td>
            <td>U+A8D0 到 U+A8D9</td>
          </tr>
          <tr>
            <td>segment</td>
            <td>U+1FBF0 到 U+1FBF9</td>
          </tr>
          <tr>
            <td>shrd</td>
            <td>U+111D0 到 U+111D9</td>
          </tr>
          <tr>
            <td>sind</td>
            <td>U+112F0 到 U+112F9</td>
          </tr>
          <tr>
            <td>sinh</td>
            <td>U+0DE6 到 U+0DEF</td>
          </tr>
          <tr>
            <td>sora</td>
            <td>U+110F0 到 U+110F9</td>
          </tr>
          <tr>
            <td>sund</td>
            <td>U+1BB0 到 U+1BB9</td>
          </tr>
          <tr>
            <td>sunu</td>
            <td>U+11BF0 到 U+11BF9</td>
          </tr>
          <tr>
            <td>takr</td>
            <td>U+116C0 到 U+116C9</td>
          </tr>
          <tr>
            <td>talu</td>
            <td>U+19D0 到 U+19D9</td>
          </tr>
          <tr>
            <td>tamldec</td>
            <td>U+0BE6 到 U+0BEF</td>
          </tr>
          <tr>
            <td>telu</td>
            <td>U+0C66 到 U+0C6F</td>
          </tr>
          <tr>
            <td>thai</td>
            <td>U+0E50 到 U+0E59</td>
          </tr>
          <tr>
            <td>tibt</td>
            <td>U+0F20 到 U+0F29</td>
          </tr>
          <tr>
            <td>tirh</td>
            <td>U+114D0 到 U+114D9</td>
          </tr>
          <tr>
            <td>tnsa</td>
            <td>U+16AC0 到 U+16AC9</td>
          </tr>
          <tr>
            <td>tols</td>
            <td>U+11DE0 到 U+11DE9</td>
          </tr>
          <tr>
            <td>vaii</td>
            <td>U+A620 到 U+A629</td>
          </tr>
          <tr>
            <td>wara</td>
            <td>U+118E0 到 U+118E9</td>
          </tr>
          <tr>
            <td>wcho</td>
            <td>U+1E2F0 到 U+1E2F9</td>
          </tr>
        </tbody></table>
      </figure></emu-table>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        计算依赖于 <emu-xref href="#sec-implementation-dependencies" id="_ref_861"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 和 <emu-xref href="#sec-implementation-dependencies" id="_ref_862"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串值，以及数字字符串中的位置，这些都取决于 <var>numberFormat</var> 的有效区域，或有效区域和数字系统。上述 <emu-xref href="#sec-implementation-dependencies" id="_ref_863"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 和 <emu-xref href="#sec-implementation-dependencies" id="_ref_864"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串值（货币名称除外）不得包含 Unicode
        标准中 General Category "Number, decimal digit" 的任何码点。
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        推荐实现使用由 Common Locale Data Repository 提供的区域数据（可在 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 获取）。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-formatnumber" type="abstract operation" aoid="FormatNumeric">
      <h1><span class="secnum">16.5.6</span> FormatNumeric ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation FormatNumeric takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>x</var> (一个 Intl 数学值) and returns 一个字符串. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_865"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对 <var>parts</var> 中每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var>，执行</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumbertoparts" type="abstract operation" aoid="FormatNumericToParts">
      <h1><span class="secnum">16.5.7</span> FormatNumericToParts ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation FormatNumericToParts takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>x</var> (一个 Intl 数学值) and returns 一个数组. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_866"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对 <var>parts</var> 中每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var>，执行</li><li>令 <var>O</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>n</var>)), <var>O</var>)。</li><li>将 <var>n</var> 增加 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-torawprecision" type="abstract operation">
      <h1><span class="secnum">16.5.8</span> 
        ToRawPrecision (
        <var>x</var>: 一个非负数学值,
        <var>minPrecision</var>: 1 到 21（含）的整数,
        <var>maxPrecision</var>: 1 到 21（含）的整数,
        <var>unsignedRoundingMode</var>: <emu-xref href="#table-intl-unsigned-rounding-modes" id="_ref_145"><a href="#table-intl-unsigned-rounding-modes">Table 31</a></emu-xref> 的无符号舍入模式规范类型，或
        <emu-val>undefined</emu-val>,
        ): 一个包含 <var class="field">[[FormattedString]]</var>（字符串）、<var class="field">[[RoundedNumber]]</var>（数学值）、<var class="field">[[IntegerDigitsCount]]</var>（整数）、<var class="field">[[RoundingMagnitude]]</var>（整数）的记录
      </h1>
      <p>The abstract operation UNKNOWN takes UNPARSEABLE ARGUMENTS. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>p</var> 为 <var>maxPrecision</var>。</li><li>如果 <var>x</var> = 0，</li><li>令 <var>m</var> 为由 <var>p</var> 个码元 0x0030（数字零）组成的字符串。</li><li>令 <var>e</var> 为 0。</li><li>令 <var>xFinal</var> 为 0。</li><li>否则，</li><li declared="n1,e1,r1">令 <var>n1</var> 和 <var>e1</var> 均为整数，<var>r1</var> 为数学值，<emu-eqn class="inline"><var>r1</var> = ToRawPrecisionFn(<var>n1</var>, <var>e1</var>,
          <var>p</var>)</emu-eqn>，满足 <emu-eqn class="inline"><var>r1</var> ≤ <var>x</var></emu-eqn> 且 <var>r1</var> 最大化。</li><li declared="n2,e2,r2">令 <var>n2</var> 和 <var>e2</var> 均为整数，<var>r2</var> 为数学值，<emu-eqn class="inline"><var>r2</var> = ToRawPrecisionFn(<var>n2</var>, <var>e2</var>,
          <var>p</var>)</emu-eqn>，满足 <emu-eqn class="inline"><var>r2</var> ≥ <var>x</var></emu-eqn> 且 <var>r2</var> 最小化。</li><li>令 <var>xFinal</var> 为 ApplyUnsignedRoundingMode(<var>x</var>, <var>r1</var>, <var>r2</var>, <var>unsignedRoundingMode</var>)。</li><li>如果 <var>xFinal</var> 是 <var>r1</var>，</li><li>令 <var>n</var> 为 <var>n1</var>。</li><li>令 <var>e</var> 为 <var>e1</var>。</li><li>否则，</li><li>令 <var>n</var> 为 <var>n2</var>。</li><li>令 <var>e</var> 为 <var>e2</var>。</li><li>令 <var>m</var> 为 <var>n</var> 的十进制表示的数字字符串（顺序，无前导零）。</li><li>如果 <var>e</var> ≥ (<var>p</var> - 1)，</li><li>设置 <var>m</var> 为 <var>m</var> 与 <var>e</var> - <var>p</var> + 1 个码元 0x0030（数字零）的字符串拼接。</li><li>令 <var>int</var> 为 <var>e</var> + 1。</li><li>否则如果 <var>e</var> ≥ 0，</li><li>设置 <var>m</var> 为前 <var>e</var> + 1 个码元、码元 0x002E（句点）、剩余 <var>p</var> - (<var>e</var> + 1) 个码元的字符串拼接。</li><li>令 <var>int</var> 为 <var>e</var> + 1。</li><li>否则，</li><li>断言：<var>e</var> &lt; 0。</li><li>设置 <var>m</var> 为 <emu-val>"0."</emu-val>、-(<var>e</var> + 1) 个码元 0x0030（数字零）、<var>m</var> 的字符串拼接。</li><li>令 <var>int</var> 为 1。</li><li>如果 <var>m</var> 包含码元 0x002E（句点）且 <var>maxPrecision</var> &gt; <var>minPrecision</var>，</li><li>令 <var>cut</var> 为 <var>maxPrecision</var> - <var>minPrecision</var>。</li><li>重复，直到 <var>cut</var> &gt; 0 且 <var>m</var> 的最后一个码元为 0x0030（数字零），</li><li>移除 <var>m</var> 的最后一个码元。</li><li>设置 <var>cut</var> 为 <var>cut</var> - 1。</li><li>如果 <var>m</var> 的最后一个码元为 0x002E（句点），</li><li>移除 <var>m</var> 的最后一个码元。</li><li>返回记录 { <var class="field">[[FormattedString]]</var>: <var>m</var>, <var class="field">[[RoundedNumber]]</var>: <var>xFinal</var>, <var class="field">[[IntegerDigitsCount]]</var>: <var>int</var>,
        <var class="field">[[RoundingMagnitude]]</var>: <var>e</var>–<var>p</var>+1&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-torawfixed" type="abstract operation">
      <h1><span class="secnum">16.5.9</span> 
        ToRawFixed (
        <var>x</var>: 一个非负数学值,
        <var>minFraction</var>: 0 到 100（含）的整数,
        <var>maxFraction</var>: 0 到 100（含）的整数,
        <var>roundingIncrement</var>: 一个整数,
        <var>unsignedRoundingMode</var>: <emu-xref href="#table-intl-unsigned-rounding-modes" id="_ref_146"><a href="#table-intl-unsigned-rounding-modes">Table 31</a></emu-xref> 的无符号舍入模式规范类型，或
        <emu-val>undefined</emu-val>,
        ): 一个包含 <var class="field">[[FormattedString]]</var>（字符串）、<var class="field">[[RoundedNumber]]</var>（数学值）、<var class="field">[[IntegerDigitsCount]]</var>（整数）、<var class="field">[[RoundingMagnitude]]</var>（整数）的记录
      </h1>
      <p>The abstract operation UNKNOWN takes UNPARSEABLE ARGUMENTS. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>f</var> 为 <var>maxFraction</var>。</li><li declared="n1,r1">令 <var>n1</var> 为整数，<var>r1</var> 为数学值，<emu-eqn class="inline"><var>r1</var> = ToRawFixedFn(<var>n1</var>, <var>f</var>)</emu-eqn>，满足 <emu-eqn class="inline"><var>n1</var>
          <emu-xref aoid="modulo"><a href="https://tc39.es/ecma262/#eqn-modulo">modulo</a></emu-xref> <var>roundingIncrement</var> = 0</emu-eqn>，<emu-eqn class="inline"><var>r1</var> ≤ <var>x</var></emu-eqn> 且 <var>r1</var> 最大化。</li><li declared="n2,r2">令 <var>n2</var> 为整数，<var>r2</var> 为数学值，<emu-eqn class="inline"><var>r2</var> = ToRawFixedFn(<var>n2</var>, <var>f</var>)</emu-eqn>，满足 <emu-eqn class="inline"><var>n2</var>
          <emu-xref aoid="modulo"><a href="https://tc39.es/ecma262/#eqn-modulo">modulo</a></emu-xref> <var>roundingIncrement</var> = 0</emu-eqn>，<emu-eqn class="inline"><var>r2</var> ≥ <var>x</var></emu-eqn> 且 <var>r2</var> 最小化。</li><li>令 <var>xFinal</var> 为 ApplyUnsignedRoundingMode(<var>x</var>, <var>r1</var>, <var>r2</var>, <var>unsignedRoundingMode</var>)。</li><li>如果 <var>xFinal</var> 是 <var>r1</var>，令 <var>n</var> 为 <var>n1</var>。否则令 <var>n</var> 为 <var>n2</var>。</li><li>如果 <var>n</var> = 0，令 <var>m</var> 为 <emu-val>"0"</emu-val>。否则令 <var>m</var> 为 <var>n</var> 的十进制表示的数字字符串（顺序，无前导零）。</li><li>如果 <var>f</var> ≠ 0，</li><li>令 <var>k</var> 为 <var>m</var> 的长度。</li><li>如果 <var>k</var> ≤ <var>f</var>，</li><li>令 <var>z</var> 为 <var>f</var> + 1 - <var>k</var> 个码元 0x0030（数字零）组成的字符串。</li><li>设置 <var>m</var> 为 <var>z</var> 与 <var>m</var> 的字符串拼接。</li><li>设置 <var>k</var> 为 <var>f</var> + 1。</li><li>令 <var>a</var> 为 <var>m</var> 的前 <var>k</var> - <var>f</var> 个码元，<var>b</var> 为剩余 <var>f</var> 个码元。</li><li>设置 <var>m</var> 为 <var>a</var>、<emu-val>"."</emu-val>、<var>b</var> 的字符串拼接。</li><li>令 <var>int</var> 为 <var>a</var> 的长度。</li><li>否则，</li><li>令 <var>int</var> 为 <var>m</var> 的长度。</li><li>令 <var>cut</var> 为 <var>maxFraction</var> - <var>minFraction</var>。</li><li>重复，直到 <var>cut</var> &gt; 0 且 <var>m</var> 的最后一个码元为 0x0030（数字零），</li><li>移除 <var>m</var> 的最后一个码元。</li><li>设置 <var>cut</var> 为 <var>cut</var> - 1。</li><li>如果 <var>m</var> 的最后一个码元为 0x002E（句点），</li><li>移除 <var>m</var> 的最后一个码元。</li><li>返回记录 { <var class="field">[[FormattedString]]</var>: <var>m</var>, <var class="field">[[RoundedNumber]]</var>: <var>xFinal</var>, <var class="field">[[IntegerDigitsCount]]</var>: <var>int</var>,
        <var class="field">[[RoundingMagnitude]]</var>: –<var>f</var>&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-unwrapnumberformat" type="abstract operation" normative-optional="" aoid="UnwrapNumberFormat"><div class="attributes-tag"><emu-xref href="#sec-conformance"><a href="https://tc39.es/ecma262/#sec-conformance">Normative Optional</a></emu-xref></div>
      <h1><span class="secnum">16.5.10</span> UnwrapNumberFormat ( <var>nf</var> )</h1>
      <p>The abstract operation UnwrapNumberFormat takes argument <var>nf</var> (一个 ECMAScript 语言值) and returns 正常完成包含 ECMAScript 语言值或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>nf</var> 不是对象，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>如果 <var>nf</var> 没有 <var class="field">[[InitializedNumberFormat]]</var> 内部槽且 ?
        <emu-xref aoid="OrdinaryHasInstance"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_867"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, <var>nf</var>) 是 <emu-val>true</emu-val>，</li><li>返回 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>nf</var>, <emu-xref href="#intl-object" id="_ref_868"><a href="#intl-object">%Intl%</a></emu-xref>.<var class="field">[[FallbackSymbol]]</var>)。</li><li>返回 <var>nf</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getnumberformatpattern" type="abstract operation" aoid="GetNumberFormatPattern">
      <h1><span class="secnum">16.5.11</span> GetNumberFormatPattern ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation GetNumberFormatPattern takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>x</var> (一个 Intl 数学值) and returns 一个字符串. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>resolvedLocaleData</var> 为 <var>numberFormat</var>.<var class="field">[[LocaleData]]</var>。</li><li>令 <var>patterns</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[patterns]]</var>。</li><li>断言：<var>patterns</var> 是一个记录（见 <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_147"><a href="#sec-intl.numberformat-internal-slots">16.2.3</a></emu-xref>）。</li><li>令 <var>style</var> 为 <var>numberFormat</var>.<var class="field">[[Style]]</var>。</li><li>如果 <var>style</var> 是 <emu-val>"percent"</emu-val>，</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.<var class="field">[[percent]]</var>。</li><li>否则如果 <var>style</var> 是 <emu-val>"unit"</emu-val>，</li><li>令 <var>unit</var> 为 <var>numberFormat</var>.<var class="field">[[Unit]]</var>。</li><li>令 <var>unitDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[UnitDisplay]]</var>。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.<var class="field">[[unit]]</var>。</li><li>如果 <var>patterns</var> 没有字段 [[&lt;<var>unit</var>&gt;]]，</li><li>设置 <var>unit</var> 为 <emu-val>"fallback"</emu-val>。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.[[&lt;<var>unit</var>&gt;]]。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.[[&lt;<var>unitDisplay</var>&gt;]]。</li><li>否则如果 <var>style</var> 是 <emu-val>"currency"</emu-val>，</li><li>令 <var>currency</var> 为 <var>numberFormat</var>.<var class="field">[[Currency]]</var>。</li><li>令 <var>currencyDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[CurrencyDisplay]]</var>。</li><li>令 <var>currencySign</var> 为 <var>numberFormat</var>.<var class="field">[[CurrencySign]]</var>。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.<var class="field">[[currency]]</var>。</li><li>如果 <var>patterns</var> 没有字段 [[&lt;<var>currency</var>&gt;]]，</li><li>设置 <var>currency</var> 为 <emu-val>"fallback"</emu-val>。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.[[&lt;<var>currency</var>&gt;]]。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.[[&lt;<var>currencyDisplay</var>&gt;]]。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.[[&lt;<var>currencySign</var>&gt;]]。</li><li>否则，</li><li>断言：<var>style</var> 是 <emu-val>"decimal"</emu-val>。</li><li>设置 <var>patterns</var> 为 <var>patterns</var>.<var class="field">[[decimal]]</var>。</li><li>如果 <var>x</var> 是 <emu-const>negative-infinity</emu-const>，</li><li>令 <var>category</var> 为 <emu-const>negative-non-zero</emu-const>。</li><li>否则如果 <var>x</var> 是 <emu-const>negative-zero</emu-const>，</li><li>令 <var>category</var> 为 <emu-const>negative-zero</emu-const>。</li><li>否则如果 <var>x</var> 是 <emu-const>not-a-number</emu-const>，</li><li>令 <var>category</var> 为 <emu-const>positive-zero</emu-const>。</li><li>否则如果 <var>x</var> 是 <emu-const>positive-infinity</emu-const>，</li><li>令 <var>category</var> 为 <emu-const>positive-non-zero</emu-const>。</li><li>否则，</li><li>断言：<var>x</var> 是一个数学值。</li><li>如果 <var>x</var> &lt; 0，</li><li>令 <var>category</var> 为 <emu-const>negative-non-zero</emu-const>。</li><li>否则如果 <var>x</var> &gt; 0，</li><li>令 <var>category</var> 为 <emu-const>positive-non-zero</emu-const>。</li><li>否则，</li><li>令 <var>category</var> 为 <emu-const>positive-zero</emu-const>。</li><li>令 <var>signDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[SignDisplay]]</var>。</li><li>如果 <var>signDisplay</var> 是 <emu-val>"never"</emu-val>，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[zeroPattern]]</var>。</li><li>否则如果 <var>signDisplay</var> 是 <emu-val>"auto"</emu-val>，</li><li>如果 <var>category</var> 是 <emu-const>positive-non-zero</emu-const> 或 <emu-const>positive-zero</emu-const>，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[zeroPattern]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[negativePattern]]</var>。</li><li>否则如果 <var>signDisplay</var> 是 <emu-val>"always"</emu-val>，</li><li>如果 <var>category</var> 是 <emu-const>positive-non-zero</emu-const> 或 <emu-const>positive-zero</emu-const>，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[positivePattern]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[negativePattern]]</var>。</li><li>否则如果 <var>signDisplay</var> 是 <emu-val>"exceptZero"</emu-val>，</li><li>如果 <var>category</var> 是 <emu-const>positive-zero</emu-const> 或 <emu-const>negative-zero</emu-const>，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[zeroPattern]]</var>。</li><li>否则如果 <var>category</var> 是 <emu-const>positive-non-zero</emu-const>，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[positivePattern]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[negativePattern]]</var>。</li><li>否则，</li><li>断言：<var>signDisplay</var> 是 <emu-val>"negative"</emu-val>。</li><li>如果 <var>category</var> 是 <emu-const>negative-non-zero</emu-const>，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[negativePattern]]</var>。</li><li>否则，</li><li>令 <var>pattern</var> 为 <var>patterns</var>.<var class="field">[[zeroPattern]]</var>。</li><li>返回 <var>pattern</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getnotationsubpattern" type="abstract operation" aoid="GetNotationSubPattern">
      <h1><span class="secnum">16.5.12</span> GetNotationSubPattern ( <var>numberFormat</var>, <var>exponent</var> )</h1>
      <p>The abstract operation GetNotationSubPattern takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>exponent</var> (一个整数) and returns 一个字符串. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>resolvedLocaleData</var> 为 <var>numberFormat</var>.<var class="field">[[LocaleData]]</var>。</li><li>令 <var>notationSubPatterns</var> 为 <var>resolvedLocaleData</var>.<var class="field">[[notationSubPatterns]]</var>。</li><li>断言：<var>notationSubPatterns</var> 是一个记录（见 <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_148"><a href="#sec-intl.numberformat-internal-slots">16.2.3</a></emu-xref>）。</li><li>令 <var>notation</var> 为 <var>numberFormat</var>.<var class="field">[[Notation]]</var>。</li><li>如果 <var>notation</var> 是 <emu-val>"scientific"</emu-val> 或 <var>notation</var> 是 <emu-val>"engineering"</emu-val>，</li><li>返回 <var>notationSubPatterns</var>.<var class="field">[[scientific]]</var>。</li><li>否则如果 <var>exponent</var> 不为 0，</li><li>断言：<var>notation</var> 是 <emu-val>"compact"</emu-val>。</li><li>令 <var>compactDisplay</var> 为 <var>numberFormat</var>.<var class="field">[[CompactDisplay]]</var>。</li><li>令 <var>compactPatterns</var> 为 <var>notationSubPatterns</var>.<var class="field">[[compact]]</var>.[[&lt;<var>compactDisplay</var>&gt;]]。</li><li>返回 <var>compactPatterns</var>.[[&lt;<var>exponent</var>&gt;]]。</li><li>否则，</li><li>返回 <emu-val>"{number}"</emu-val>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-computeexponent" type="abstract operation" aoid="ComputeExponent">
      <h1><span class="secnum">16.5.13</span> ComputeExponent ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation ComputeExponent takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>x</var> (一个数学值) and returns 一个整数. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>x</var> = 0，</li><li>返回 0。</li><li>如果 <var>x</var> &lt; 0，</li><li>令 <var>x</var> = -<var>x</var>。</li><li>令 <var>magnitude</var> 为 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<emu-xref aoid="log10"><a href="https://tc39.es/ecma262/#eqn-log10">log10</a></emu-xref>(<var>x</var>))。</li><li>令 <var>exponent</var> 为 <emu-xref aoid="ComputeExponentForMagnitude" id="_ref_869"><a href="#sec-computeexponentformagnitude">ComputeExponentForMagnitude</a></emu-xref>(<var>numberFormat</var>, <var>magnitude</var>)。</li><li>令 <var>x</var> 为 <var>x</var> × 10<sup>-<var>exponent</var></sup>。</li><li>令 <var>formatNumberResult</var> 为 <emu-xref aoid="FormatNumericToString" id="_ref_870"><a href="#sec-formatnumerictostring">FormatNumericToString</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>如果 <var>formatNumberResult</var>.<var class="field">[[RoundedNumber]]</var> = 0，</li><li>返回 <var>exponent</var>。</li><li>令 <var>newMagnitude</var> 为 <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<emu-xref aoid="log10"><a href="https://tc39.es/ecma262/#eqn-log10">log10</a></emu-xref>(<var>formatNumberResult</var>.<var class="field">[[RoundedNumber]]</var>))。</li><li>如果 <var>newMagnitude</var> 是 <var>magnitude</var> - <var>exponent</var>，</li><li>返回 <var>exponent</var>。</li><li>返回 <emu-xref aoid="ComputeExponentForMagnitude" id="_ref_871"><a href="#sec-computeexponentformagnitude">ComputeExponentForMagnitude</a></emu-xref>(<var>numberFormat</var>, <var>magnitude</var> + 1)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-computeexponentformagnitude" type="abstract operation" aoid="ComputeExponentForMagnitude">
      <h1><span class="secnum">16.5.14</span> ComputeExponentForMagnitude ( <var>numberFormat</var>, <var>magnitude</var> )</h1>
      <p>The abstract operation ComputeExponentForMagnitude takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>magnitude</var> (一个整数) and returns 一个整数. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>notation</var> 为 <var>numberFormat</var>.<var class="field">[[Notation]]</var>。</li><li>如果 <var>notation</var> 是 <emu-val>"standard"</emu-val>，</li><li>返回 0。</li><li>否则如果 <var>notation</var> 是 <emu-val>"scientific"</emu-val>，</li><li>返回 <var>magnitude</var>。</li><li>否则如果 <var>notation</var> 是 <emu-val>"engineering"</emu-val>，</li><li>令 <var>thousands</var> 为不大于 <var>magnitude</var> / 3 的最大整数。</li><li>返回 <var>thousands</var> × 3。</li><li>否则，</li><li>断言：<var>notation</var> 是 <emu-val>"compact"</emu-val>。</li><li>令 <var>exponent</var> 为当前区域紧凑记法下缩放给定数量级的 <emu-xref href="#sec-implementation-dependencies" id="_ref_872"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 整数。</li><li>返回 <var>exponent</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-runtime-semantics-stringintlmv" type="sdo" aoid="运行时语义：StringIntlMV">
      <h1><span class="secnum">16.5.15</span> 运行时语义：StringIntlMV</h1>
      <p>The <emu-xref href="#sec-algorithm-conventions-syntax-directed-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-syntax-directed-operations">syntax-directed operation</a></emu-xref> 运行时语义：StringIntlMV takes no arguments.</p>
      <emu-note><span class="note">Note</span><div class="note-contents">
        <p><emu-nt><a href="https://tc39.es/ecma262/#prod-StringNumericLiteral">StringNumericLiteral</a></emu-nt> 转换为 Number 值的过程整体类似于 <emu-nt><a href="https://tc39.es/ecma262/#prod-NumericLiteral">NumericLiteral</a></emu-nt> 的 <emu-xref aoid="NumericValue"><a href="https://tc39.es/ecma262/#sec-numericvalue">NumericValue</a></emu-xref> 判定（见 <emu-xref href="#sec-literals-numeric-literals"><a href="https://tc39.es/ecma262/#sec-literals-numeric-literals">12.9.3</a></emu-xref>），但部分细节不同。</p>
      </div></emu-note>
      <p>It is defined piecewise over the following productions:</p>
      <emu-grammar><emu-production name="StringNumericLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StringNumericLiteral">StringNumericLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="mkvpahdu"><emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-StrWhiteSpace">StrWhiteSpace</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>返回 0。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StringNumericLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StringNumericLiteral">StringNumericLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="_ljdljxm">
        <emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-StrWhiteSpace">StrWhiteSpace</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>
        <emu-nt><a href="https://tc39.es/ecma262/#prod-StrNumericLiteral">StrNumericLiteral</a></emu-nt>
        <emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-StrWhiteSpace">StrWhiteSpace</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>返回 <emu-nt><a href="https://tc39.es/ecma262/#prod-StrNumericLiteral">StrNumericLiteral</a></emu-nt> 的 StringIntlMV。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StrNumericLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StrNumericLiteral">StrNumericLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="6ge3c7dq"><emu-nt><a href="https://tc39.es/ecma262/#prod-NonDecimalIntegerLiteral">NonDecimalIntegerLiteral</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>返回 <emu-nt><a href="https://tc39.es/ecma262/#prod-NonDecimalIntegerLiteral">NonDecimalIntegerLiteral</a></emu-nt> 的 MV。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StrDecimalLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StrDecimalLiteral">StrDecimalLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="1g8bpsll">
        <emu-t>-</emu-t>
        <emu-nt><a href="https://tc39.es/ecma262/#prod-StrUnsignedDecimalLiteral">StrUnsignedDecimalLiteral</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>令 <var>a</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-StrUnsignedDecimalLiteral">StrUnsignedDecimalLiteral</a></emu-nt> 的 StringIntlMV。</li><li>如果 <var>a</var> 是 0，返回 <emu-const>negative-zero</emu-const>。</li><li>如果 <var>a</var> 是 <emu-const>positive-infinity</emu-const>，返回 <emu-const>negative-infinity</emu-const>。</li><li>返回 -<var>a</var>。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StrUnsignedDecimalLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StrUnsignedDecimalLiteral">StrUnsignedDecimalLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="sv6n-gkb"><emu-t>Infinity</emu-t></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>返回 <emu-const>positive-infinity</emu-const>。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StrUnsignedDecimalLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StrUnsignedDecimalLiteral">StrUnsignedDecimalLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="iokglhcc">
        <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt>
        <emu-t>.</emu-t>
        <emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>
        <emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>令 <var>a</var> 为第一个 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 的 MV。</li><li>如果第二个 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 存在，</li><li>令 <var>b</var> 为第二个 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 的 MV。</li><li>令 <var>n</var> 为第二个 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 的码点数。</li><li>否则，</li><li>令 <var>b</var> 为 0。</li><li>令 <var>n</var> 为 0。</li><li>如果 <emu-nt><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a></emu-nt> 存在，令 <var>e</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a></emu-nt> 的 MV。否则令 <var>e</var> 为 0。</li><li>返回 (<var>a</var> + (<var>b</var> × 10<sup>-<var>n</var></sup>)) × 10<sup><var>e</var></sup>。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StrUnsignedDecimalLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StrUnsignedDecimalLiteral">StrUnsignedDecimalLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="xpoqnclz">
        <emu-t>.</emu-t>
        <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt>
        <emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>令 <var>b</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 的 MV。</li><li>如果 <emu-nt><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a></emu-nt> 存在，令 <var>e</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a></emu-nt> 的 MV。否则令 <var>e</var> 为 0。</li><li>令 <var>n</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 的码点数。</li><li>返回 <var>b</var> × 10<sup><var>e</var> - <var>n</var></sup>。</li></ol></emu-alg>
      <emu-grammar><emu-production name="StrUnsignedDecimalLiteral" type="regexp" collapsed="">
    <emu-nt><a href="https://tc39.es/ecma262/#prod-StrUnsignedDecimalLiteral">StrUnsignedDecimalLiteral</a></emu-nt> <emu-geq>:::</emu-geq> <emu-rhs a="joj696lw">
        <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt>
        <emu-nt optional=""><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>令 <var>a</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-DecimalDigits">DecimalDigits</a></emu-nt> 的 MV。</li><li>如果 <emu-nt><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a></emu-nt> 存在，令 <var>e</var> 为 <emu-nt><a href="https://tc39.es/ecma262/#prod-ExponentPart">ExponentPart</a></emu-nt> 的 MV。否则令 <var>e</var> 为 0。</li><li>返回 <var>a</var> × 10<sup><var>e</var></sup>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-tointlmathematicalvalue" type="abstract operation" aoid="ToIntlMathematicalValue">
      <h1><span class="secnum">16.5.16</span> ToIntlMathematicalValue ( <var>value</var> )</h1>
      <p>The abstract operation ToIntlMathematicalValue takes argument <var>value</var> (一个 ECMAScript 语言值) and returns 正常完成包含一个 Intl 数学值或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>primValue</var> 为 ?&nbsp;<emu-xref aoid="ToPrimitive"><a href="https://tc39.es/ecma262/#sec-toprimitive">ToPrimitive</a></emu-xref>(<var>value</var>, <emu-const>number</emu-const>)。</li><li>如果 <var>primValue</var> 是 BigInt，返回 <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>primValue</var>)。</li><li>如果 <var>primValue</var> 是字符串，</li><li>令 <var>str</var> 为 <var>primValue</var>。</li><li>否则，</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>primValue</var>)。</li><li>如果 <var>x</var> 是 <emu-val>-0</emu-val><sub>𝔽</sub>，返回 <emu-const>negative-zero</emu-const>。</li><li>令 <var>str</var> 为 <emu-xref aoid="Number::toString"><a href="https://tc39.es/ecma262/#sec-numeric-types-number-tostring">Number::toString</a></emu-xref>(<var>x</var>, 10)。</li><li>令 <var>text</var> 为 <emu-xref aoid="StringToCodePoints"><a href="https://tc39.es/ecma262/#sec-stringtocodepoints">StringToCodePoints</a></emu-xref>(<var>str</var>)。</li><li>令 <var>literal</var> 为 <emu-xref aoid="ParseText"><a href="https://tc39.es/ecma262/#sec-parsetext">ParseText</a></emu-xref>(<var>text</var>, <emu-nt><a href="https://tc39.es/ecma262/#prod-StringNumericLiteral">StringNumericLiteral</a></emu-nt>)。</li><li>如果 <var>literal</var> 是错误列表，返回 <emu-const>not-a-number</emu-const>。</li><li>令 <var>intlMV</var> 为 <var>literal</var> 的 StringIntlMV。</li><li>如果 <var>intlMV</var> 是数学值，</li><li>令 <var>rounded</var> 为 <emu-xref aoid="RoundMVResult"><a href="https://tc39.es/ecma262/#sec-roundmvresult">RoundMVResult</a></emu-xref>(<emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>intlMV</var>))。</li><li>如果 <var>rounded</var> 是 <emu-val>+∞</emu-val><sub>𝔽</sub> 且 <var>intlMV</var> &lt; 0，返回 <emu-const>negative-infinity</emu-const>。</li><li>如果 <var>rounded</var> 是 <emu-val>+∞</emu-val><sub>𝔽</sub>，返回 <emu-const>positive-infinity</emu-const>。</li><li>如果 <var>rounded</var> 是 <emu-val>+0</emu-val><sub>𝔽</sub> 且 <var>intlMV</var> &lt; 0，返回 <emu-const>negative-zero</emu-const>。</li><li>如果 <var>rounded</var> 是 <emu-val>+0</emu-val><sub>𝔽</sub>，返回 0。</li><li>返回 <var>intlMV</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getunsignedroundingmode" type="abstract operation" aoid="GetUnsignedRoundingMode">
      <h1><span class="secnum">16.5.17</span> GetUnsignedRoundingMode ( <var>roundingMode</var>, <var>sign</var> )</h1>
      <p>The abstract operation GetUnsignedRoundingMode takes arguments <var>roundingMode</var> (一个<emu-xref href="#rounding-mode" id="_ref_873"><a href="#rounding-mode">舍入模式</a></emu-xref>) and <var>sign</var> (<emu-const>negative</emu-const> 或 <emu-const>positive</emu-const>) and returns <emu-xref href="#table-intl-unsigned-rounding-modes" id="_ref_149"><a href="#table-intl-unsigned-rounding-modes">Table 31</a></emu-xref> 的无符号<emu-xref href="#rounding-mode" id="_ref_874"><a href="#rounding-mode">舍入模式</a></emu-xref>规范类型. It performs the following steps when called:</p>
      <emu-alg><ol><li>返回 <emu-xref href="#table-intl-unsigned-rounding-modes" id="_ref_150"><a href="#table-intl-unsigned-rounding-modes">Table 31</a></emu-xref> 的 Unsigned Rounding Mode 列中，Identifier 列为
        <var>roundingMode</var> 且 Sign 列为 <var>sign</var> 的规范类型。</li></ol></emu-alg>
      <emu-table id="table-intl-unsigned-rounding-modes"><figure><figcaption>Table 31: <emu-xref href="#rounding-mode" id="_ref_875"><a href="#rounding-mode">舍入模式</a></emu-xref>到无符号<emu-xref href="#rounding-mode" id="_ref_876"><a href="#rounding-mode">舍入模式</a></emu-xref>的转换</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Identifier</th>
              <th>Sign</th>
              <th>Unsigned Rounding Mode</th>
            </tr>
          </thead>
          <tbody><tr>
            <td rowspan="2"><emu-val>"ceil"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>infinity</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>zero</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"floor"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>zero</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>infinity</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"expand"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>infinity</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>infinity</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"trunc"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>zero</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>zero</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"halfCeil"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>half-infinity</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>half-zero</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"halfFloor"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>half-zero</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>half-infinity</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"halfExpand"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>half-infinity</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>half-infinity</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"halfTrunc"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>half-zero</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>half-zero</emu-const></td>
          </tr>
          <tr>
            <td rowspan="2"><emu-val>"halfEven"</emu-val></td>
            <td><emu-const>positive</emu-const></td>
            <td><emu-const>half-even</emu-const></td>
          </tr>
          <tr>
            <td><emu-const>negative</emu-const></td>
            <td><emu-const>half-even</emu-const></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-applyunsignedroundingmode" type="abstract operation">
      <h1><span class="secnum">16.5.18</span> 
        ApplyUnsignedRoundingMode (
        <var>x</var>: 一个数学值,
        <var>r1</var>: 一个数学值,
        <var>r2</var>: 一个数学值,
        <var>unsignedRoundingMode</var>: <emu-xref href="#table-intl-unsigned-rounding-modes" id="_ref_151"><a href="#table-intl-unsigned-rounding-modes">Table 31</a></emu-xref> 的无符号舍入模式规范类型，或
        <emu-val>undefined</emu-val>,
        ): 一个数学值
      </h1>
      <p>The abstract operation UNKNOWN takes UNPARSEABLE ARGUMENTS. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>x</var> 是 <var>r1</var>，返回 <var>r1</var>。</li><li>断言：<var>r1</var> &lt; <var>x</var> &lt; <var>r2</var>。</li><li>断言：<var>unsignedRoundingMode</var> 不为 <emu-val>undefined</emu-val>。</li><li>如果 <var>unsignedRoundingMode</var> 是 <emu-const>zero</emu-const>，返回 <var>r1</var>。</li><li>如果 <var>unsignedRoundingMode</var> 是 <emu-const>infinity</emu-const>，返回 <var>r2</var>。</li><li>令 <var>d1</var> 为 <emu-eqn class="inline"><var>x</var> – <var>r1</var></emu-eqn>。</li><li>令 <var>d2</var> 为 <emu-eqn class="inline"><var>r2</var> – <var>x</var></emu-eqn>。</li><li>如果 <var>d1</var> &lt; <var>d2</var>，返回 <var>r1</var>。</li><li>如果 <var>d2</var> &lt; <var>d1</var>，返回 <var>r2</var>。</li><li>断言：<var>d1</var> 等于 <var>d2</var>。</li><li>如果 <var>unsignedRoundingMode</var> 是 <emu-const>half-zero</emu-const>，返回 <var>r1</var>。</li><li>如果 <var>unsignedRoundingMode</var> 是 <emu-const>half-infinity</emu-const>，返回 <var>r2</var>。</li><li>断言：<var>unsignedRoundingMode</var> 是 <emu-const>half-even</emu-const>。</li><li>令 <var>cardinality</var> 为 <emu-eqn class="inline">(<var>r1</var> / (<var>r2</var> – <var>r1</var>)) <emu-xref aoid="modulo"><a href="https://tc39.es/ecma262/#eqn-modulo">modulo</a></emu-xref> 2</emu-eqn>。</li><li>如果 <var>cardinality</var> 是 0，返回 <var>r1</var>。</li><li>返回 <var>r2</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionnumberrangepattern" type="abstract operation" aoid="PartitionNumberRangePattern">
      <h1><span class="secnum">16.5.19</span> PartitionNumberRangePattern ( <var>numberFormat</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation PartitionNumberRangePattern takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat), <var>x</var> (一个 Intl 数学值), and <var>y</var> (一个 Intl 数学值) and returns 正常完成包含字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）、<var class="field">[[Source]]</var>（字符串）的记录列表或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>x</var> 是 <emu-const>not-a-number</emu-const> 或 <var>y</var> 是 <emu-const>not-a-number</emu-const>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>xResult</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_877"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>)。</li><li>令 <var>yResult</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_878"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>numberFormat</var>, <var>y</var>)。</li><li>如果 <emu-xref aoid="FormatNumeric" id="_ref_879"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>numberFormat</var>, <var>x</var>) 等于 <emu-xref aoid="FormatNumeric" id="_ref_880"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>numberFormat</var>, <var>y</var>)，</li><li>令 <var>appxResult</var> 为 <emu-xref aoid="FormatApproximately" id="_ref_881"><a href="#sec-formatapproximately">FormatApproximately</a></emu-xref>(<var>numberFormat</var>, <var>xResult</var>)。</li><li>对 <var>appxResult</var> 中每个元素 <var>r</var>，执行</li><li>设置 <var>r</var>.<var class="field">[[Source]]</var> 为 <emu-val>"shared"</emu-val>。</li><li>返回 <var>appxResult</var>。</li><li>令 <var>result</var> 为新的空列表。</li><li>对 <var>xResult</var> 中每个元素 <var>r</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>r</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>r</var>.<var class="field">[[Value]]</var>, <var class="field">[[Source]]</var>: <emu-val>"startRange"</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>令 <var>rangeSeparator</var> 为用于分隔两个数字的 <emu-xref href="#sec-implementation-dependencies" id="_ref_882"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串值。</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>rangeSeparator</var>, <var class="field">[[Source]]</var>: <emu-val>"shared"</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>对 <var>yResult</var> 中每个元素 <var>r</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>r</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>r</var>.<var class="field">[[Value]]</var>, <var class="field">[[Source]]</var>: <emu-val>"endRange"</emu-val>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <emu-xref aoid="CollapseNumberRange" id="_ref_883"><a href="#sec-collapsenumberrange">CollapseNumberRange</a></emu-xref>(<var>numberFormat</var>, <var>result</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatapproximately" type="abstract operation" aoid="FormatApproximately">
      <h1><span class="secnum">16.5.20</span> FormatApproximately ( <var>numberFormat</var>, <var>result</var> )</h1>
      <p>The abstract operation FormatApproximately takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>result</var> (字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）的记录列表) and returns 字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）的记录列表. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>approximatelySign</var> 为用于表示数字近似的 <emu-xref href="#sec-implementation-dependencies" id="_ref_884"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 字符串值。</li><li>如果 <var>approximatelySign</var> 非空，在 <var>result</var> 的 <emu-xref href="#sec-implementation-dependencies" id="_ref_885"><a href="#sec-implementation-dependencies">ILND</a></emu-xref> 索引处插入记录 { <var class="field">[[Type]]</var>: <emu-val>"approximatelySign"</emu-val>, <var class="field">[[Value]]</var>:
        <var>approximatelySign</var>&nbsp;}。例如，若 <var>numberFormat</var> 的 <var class="field">[[Locale]]</var> 为 <emu-val>"en-US"</emu-val>、<var class="field">[[NumberingSystem]]</var> 为 <emu-val>"latn"</emu-val>、<var class="field">[[Style]]</var> 为
        <emu-val>"decimal"</emu-val>，新记录可能插入到 <var>result</var> 的第一个元素前。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-collapsenumberrange" type="implementation-defined abstract operation" aoid="CollapseNumberRange">
      <h1><span class="secnum">16.5.21</span> CollapseNumberRange ( <var>numberFormat</var>, <var>result</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation CollapseNumberRange takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat) and <var>result</var> (字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）、<var class="field">[[Source]]</var>（字符串）的记录列表) and returns 字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）、<var class="field">[[Source]]</var>（字符串）的记录列表.</p>
      <p>例如，实现可移除区间分隔符后的货币符号，将 <emu-val>"$3–$5"</emu-val> 转为 <emu-val>"$3–5"</emu-val>。</p>
      <p>实现也可为语法正确性修改记录 <var class="field">[[Value]]</var> 字段，如将 <emu-val>"0.5 miles–1 mile"</emu-val> 转为 <emu-val>"0.5–1 miles"</emu-val>。</p>
      <p>返回 <var>result</var> 未修改保证是 CollapseNumberRange 的正确实现。</p>
    </emu-clause>

    <emu-clause id="sec-formatnumericrange" type="abstract operation" aoid="FormatNumericRange">
      <h1><span class="secnum">16.5.22</span> FormatNumericRange ( <var>numberFormat</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation FormatNumericRange takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat), <var>x</var> (一个 Intl 数学值), and <var>y</var> (一个 Intl 数学值) and returns 正常完成包含一个字符串或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionNumberRangePattern" id="_ref_886"><a href="#sec-partitionnumberrangepattern">PartitionNumberRangePattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>, <var>y</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对 <var>parts</var> 中每个元素 <var>part</var>，执行</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumericrangetoparts" type="abstract operation" aoid="FormatNumericRangeToParts">
      <h1><span class="secnum">16.5.23</span> FormatNumericRangeToParts ( <var>numberFormat</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation FormatNumericRangeToParts takes arguments <var>numberFormat</var> (一个 Intl.NumberFormat), <var>x</var> (一个 Intl 数学值), and <var>y</var> (一个 Intl 数学值) and returns 正常完成包含一个数组或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionNumberRangePattern" id="_ref_887"><a href="#sec-partitionnumberrangepattern">PartitionNumberRangePattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>, <var>y</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对 <var>parts</var> 中每个元素 <var>part</var>，执行</li><li>令 <var>O</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"source"</emu-val>, <var>part</var>.<var class="field">[[Source]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>n</var>)), <var>O</var>)。</li><li>将 <var>n</var> 增加 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="pluralrules-objects">
  <h1><span class="secnum">17</span> PluralRules 对象</h1>

  <emu-clause id="sec-intl-pluralrules-constructor">
    <h1><span class="secnum">17.1</span> Intl.PluralRules 构造函数</h1>

    <p>Intl.PluralRules 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.PluralRules%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_888"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"PluralRules"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_889"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_152"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-intl.pluralrules" oldids="sec-initializepluralrules"><span id="sec-initializepluralrules"></span>
      <h1><span class="secnum">17.1.1</span> Intl.PluralRules ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当 <code>Intl.PluralRules</code> 函数以可选参数 <var>locales</var> 和 <var>options</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>pluralRules</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.PluralRules.prototype%"</emu-val>, «
        <var class="field">[[InitializedPluralRules]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[Type]]</var>, <var class="field">[[Notation]]</var>, <var class="field">[[CompactDisplay]]</var>, <var class="field">[[MinimumIntegerDigits]]</var>,
        <var class="field">[[MinimumFractionDigits]]</var>, <var class="field">[[MaximumFractionDigits]]</var>, <var class="field">[[MinimumSignificantDigits]]</var>,
        <var class="field">[[MaximumSignificantDigits]]</var>, <var class="field">[[RoundingType]]</var>, <var class="field">[[RoundingIncrement]]</var>, <var class="field">[[RoundingMode]]</var>,
        <var class="field">[[ComputedRoundingPriority]]</var>, <var class="field">[[TrailingZeroDisplay]]</var>&nbsp;»)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_890"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_891"><a href="#sec-intl-pluralrules-constructor">%Intl.PluralRules%</a></emu-xref>, <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_892"><a href="#sec-intl-pluralrules-constructor">%Intl.PluralRules%</a></emu-xref>.<var class="field">[[LocaleData]]</var>, <var>locales</var>,
        <var>options</var>, « <emu-const>coerce-options</emu-const>&nbsp;»)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>设置 <var>pluralRules</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>t</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_893"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"type"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"cardinal"</emu-val>, <emu-val>"ordinal"</emu-val>&nbsp;», <emu-val>"cardinal"</emu-val>)。</li><li>设置 <var>pluralRules</var>.<var class="field">[[Type]]</var> 为 <var>t</var>。</li><li>令 <var>notation</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_894"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"notation"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"standard"</emu-val>, <emu-val>"scientific"</emu-val>,
        <emu-val>"engineering"</emu-val>, <emu-val>"compact"</emu-val>&nbsp;», <emu-val>"standard"</emu-val>)。</li><li>设置 <var>pluralRules</var>.<var class="field">[[Notation]]</var> 为 <var>notation</var>。</li><li>令 <var>compactDisplay</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_895"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"compactDisplay"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val>&nbsp;»,
        <emu-val>"short"</emu-val>)。</li><li>如果 <var>notation</var> 是 <emu-val>"compact"</emu-val>，则</li><li>设置 <var>pluralRules</var>.<var class="field">[[CompactDisplay]]</var> 为 <var>compactDisplay</var>。</li><li>执行 ?&nbsp;<emu-xref aoid="SetNumberFormatDigitOptions" id="_ref_896"><a href="#sec-setnumberformatdigitoptions">SetNumberFormatDigitOptions</a></emu-xref>(<var>pluralRules</var>, <var>options</var>, 0, 3, <var>notation</var>)。</li><li>返回 <var>pluralRules</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-pluralrules-constructor">
    <h1><span class="secnum">17.2</span> Intl.PluralRules 构造函数的属性</h1>

    <p>Intl.PluralRules 构造函数：</p>
    <ul>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-intl.pluralrules.prototype">
      <h1><span class="secnum">17.2.1</span> Intl.PluralRules.prototype</h1>

      <p><code>Intl.PluralRules.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-pluralrules-prototype-object" id="_ref_897"><a href="#sec-properties-of-intl-pluralrules-prototype-object">%Intl.PluralRules.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.supportedlocalesof">
      <h1><span class="secnum">17.2.2</span> Intl.PluralRules.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当 <code>supportedLocalesOf</code> 方法以参数 <var>locales</var> 和 <var>options</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_898"><a href="#sec-intl-pluralrules-constructor">%Intl.PluralRules%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_899"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_900"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules-internal-slots">
      <h1><span class="secnum">17.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_153"><a href="#sec-internal-slots">9.1</a></emu-xref> 所述约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « »。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准 #35 第 1 部分核心，3.6.1 键和值定义</a>
        描述了与复数化过程无关的区域扩展键。
      </div></emu-note>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_154"><a href="#sec-internal-slots">9.1</a></emu-xref> 所述约束范围内由实现定义。</p>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        建议实现使用由 Common Locale Data Repository 提供的区域数据（可在 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 获取）。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-pluralrules-prototype-object">
    <h1><span class="secnum">17.3</span> Intl.PluralRules 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.PluralRules 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.PluralRules.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.PluralRules 实例，不具有 <var class="field">[[InitializedPluralRules]]</var> 内部槽或任何 Intl.PluralRules 实例对象的其他内部槽。</li>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-intl.pluralrules.prototype.constructor">
      <h1><span class="secnum">17.3.1</span> Intl.PluralRules.prototype.constructor</h1>

      <p><code>Intl.PluralRules.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_901"><a href="#sec-intl-pluralrules-constructor">%Intl.PluralRules%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype.resolvedoptions">
      <h1><span class="secnum">17.3.2</span> Intl.PluralRules.prototype.resolvedOptions ( )</h1>

      <p>此函数提供在对象初始化期间计算的区域和选项的访问。</p>

      <emu-alg><ol><li>令 <var>pr</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>pr</var>, <var class="field">[[InitializedPluralRules]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>令 <var>pluralCategories</var> 为包含所选区域 <var>pr</var>.<var class="field">[[Locale]]</var> 的 <emu-xref href="#sec-pluralruleselect" id="_ref_155"><a href="#sec-pluralruleselect">PluralRuleSelect</a></emu-xref> 所有可能结果的字符串列表，按如下顺序排序：<emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>,
        <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, <emu-val>"other"</emu-val>。</li><li>对 <emu-xref href="#table-pluralrules-resolvedoptions-properties" id="_ref_156"><a href="#table-pluralrules-resolvedoptions-properties">Table 32</a></emu-xref> 的每一行（除表头行外），按表顺序执行</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>如果 <var>p</var> 是 <emu-val>"pluralCategories"</emu-val>，则</li><li>令 <var>v</var> 为 <emu-xref aoid="CreateArrayFromList"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>pluralCategories</var>)。</li><li>否则，</li><li>令 <var>v</var> 为 <var>pr</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>如果 <var>v</var> 不是 <emu-val>undefined</emu-val>，则</li><li>如果当前行有 Conversion 值，则</li><li>断言：当前行的 Conversion 值为 <emu-const>number</emu-const>。</li><li>设置 <var>v</var> 为 <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>v</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-pluralrules-resolvedoptions-properties"><figure><figcaption>Table 32: PluralRules 实例的已解析选项</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
              <th>Conversion</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Type]]</var></td>
            <td><emu-val>"type"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[Notation]]</var></td>
            <td><emu-val>"notation"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[CompactDisplay]]</var></td>
            <td><emu-val>"compactDisplay"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[MinimumIntegerDigits]]</var></td>
            <td><emu-val>"minimumIntegerDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MinimumFractionDigits]]</var></td>
            <td><emu-val>"minimumFractionDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MaximumFractionDigits]]</var></td>
            <td><emu-val>"maximumFractionDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MinimumSignificantDigits]]</var></td>
            <td><emu-val>"minimumSignificantDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[MaximumSignificantDigits]]</var></td>
            <td><emu-val>"maximumSignificantDigits"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"pluralCategories"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[RoundingIncrement]]</var></td>
            <td><emu-val>"roundingIncrement"</emu-val></td>
            <td><emu-const>number</emu-const></td>
          </tr>
          <tr>
            <td><var class="field">[[RoundingMode]]</var></td>
            <td><emu-val>"roundingMode"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[ComputedRoundingPriority]]</var></td>
            <td><emu-val>"roundingPriority"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td><var class="field">[[TrailingZeroDisplay]]</var></td>
            <td><emu-val>"trailingZeroDisplay"</emu-val></td>
            <td></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype.select">
      <h1><span class="secnum">17.3.3</span> Intl.PluralRules.prototype.select ( <var>value</var> )</h1>

      <p>当 <code>select</code> 方法以参数 <var>value</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>pr</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>pr</var>, <var class="field">[[InitializedPluralRules]]</var>)。</li><li>令 <var>n</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_902"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>value</var>)。</li><li>返回 <emu-xref aoid="ResolvePlural" id="_ref_903"><a href="#sec-resolveplural">ResolvePlural</a></emu-xref>(<var>pr</var>, <var>n</var>).<var class="field">[[PluralCategory]]</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype.selectrange">
      <h1><span class="secnum">17.3.4</span> Intl.PluralRules.prototype.selectRange ( <var>start</var>, <var>end</var> )</h1>

      <p>当 <code>selectRange</code> 方法以参数 <var>start</var> 和 <var>end</var> 调用时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>pr</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>pr</var>, <var class="field">[[InitializedPluralRules]]</var>)。</li><li>如果 <var>start</var> 是 <emu-val>undefined</emu-val> 或 <var>end</var> 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>x</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_904"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>start</var>)。</li><li>令 <var>y</var> 为 ?&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_905"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>end</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="ResolvePluralRange" id="_ref_906"><a href="#sec-resolvepluralrange">ResolvePluralRange</a></emu-xref>(<var>pr</var>, <var>x</var>, <var>y</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype-%symbol.tostringtag%" oldids="sec-intl.pluralrules.prototype-tostringtag"><span id="sec-intl.pluralrules.prototype-tostringtag"></span>
      <h1><span class="secnum">17.3.5</span> Intl.PluralRules.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.PluralRules"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-pluralrules-instances">
    <h1><span class="secnum">17.4</span> Intl.PluralRules 实例的属性</h1>

    <p>Intl.PluralRules 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-intl-pluralrules-prototype-object" id="_ref_907"><a href="#sec-properties-of-intl-pluralrules-prototype-object">%Intl.PluralRules.prototype%</a></emu-xref> 的属性。</p>

    <p>Intl.PluralRules 实例具有 <var class="field">[[InitializedPluralRules]]</var> 内部槽。</p>

    <p>Intl.PluralRules 实例还具有由 <emu-xref href="#sec-intl-pluralrules-constructor" title="" id="_ref_157"><a href="#sec-intl-pluralrules-constructor">Intl.PluralRules 构造函数</a></emu-xref> 计算的多个内部槽：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是字符串值，表示用于复数规则的区域<emu-xref href="#sec-language-tags" id="_ref_908"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[Type]]</var> 是字符串值 <emu-val>"cardinal"</emu-val> 或 <emu-val>"ordinal"</emu-val>，标识所用复数规则。</li>
      <li><var class="field">[[Notation]]</var> 是字符串值 <emu-val>"standard"</emu-val>、<emu-val>"scientific"</emu-val>、<emu-val>"engineering"</emu-val> 或 <emu-val>"compact"</emu-val>，标识所用记法。</li>
      <li><var class="field">[[CompactDisplay]]</var> 是字符串值 <emu-val>"short"</emu-val> 或 <emu-val>"long"</emu-val>，指定在使用 <emu-val>"compact"</emu-val> 记法格式化时是否以短形式（"5K"）或长形式（"5
        thousand"）显示紧凑记法附加词，这在某些情况下会影响复数形式选择。仅当 <var class="field">[[Notation]]</var> 为 <emu-val>"compact"</emu-val> 时使用。</li>
      <li><var class="field">[[MinimumIntegerDigits]]</var> 是非负整数，表示要使用的最小整数位数。</li>
      <li><var class="field">[[MinimumFractionDigits]]</var> 和 <var class="field">[[MaximumFractionDigits]]</var> 是非负整数，表示要使用的最小和最大小数位数。数字会被舍入或填充尾随零（如有必要）。</li>
      <li><var class="field">[[MinimumSignificantDigits]]</var> 和 <var class="field">[[MaximumSignificantDigits]]</var>
        是正整数，表示要使用的最小和最大有效数字。要么都不存在，要么都存在；如果存在，则覆盖最小和最大整数及小数位数。</li>
      <li><var class="field">[[RoundingType]]</var> 是 <emu-const>fraction-digits</emu-const>、<emu-const>significant-digits</emu-const>、<emu-const>more-precision</emu-const> 或 <emu-const>less-precision</emu-const>，表示要使用的舍入策略，如
        <emu-xref href="#sec-properties-of-intl-numberformat-instances" id="_ref_158"><a href="#sec-properties-of-intl-numberformat-instances">16.4</a></emu-xref> 所述。
      </li>
      <li><var class="field">[[ComputedRoundingPriority]]</var> 是字符串值 <emu-val>"auto"</emu-val>、<emu-val>"morePrecision"</emu-val> 或 <emu-val>"lessPrecision"</emu-val>。仅在 <emu-xref href="#sec-intl.pluralrules.prototype.resolvedoptions" id="_ref_159"><a href="#sec-intl.pluralrules.prototype.resolvedoptions">17.3.2</a></emu-xref> 中用于将 <var class="field">[[RoundingType]]</var> 转换回有效的
        <emu-val>"roundingPriority"</emu-val> 选项。</li>
      <li><var class="field">[[RoundingIncrement]]</var> 是整数，可将 10、100、1000 或 10000 均分为十分、五分、四分或二分。表示相对于计算的舍入幅度应进行舍入的增量。例如，如果
        <var class="field">[[MaximumFractionDigits]]</var> 为 2 且 <var class="field">[[RoundingIncrement]]</var> 为 5，则格式化数字会舍入到最接近的 0.05（“镍舍入”）。</li>
      <li><var class="field">[[RoundingMode]]</var> 标识要使用的<emu-xref href="#rounding-mode" id="_ref_909"><a href="#rounding-mode">舍入模式</a></emu-xref>。</li>
      <li><var class="field">[[TrailingZeroDisplay]]</var> 是字符串值 <emu-val>"auto"</emu-val> 或 <emu-val>"stripIfInteger"</emu-val>，表示如果格式化数字为整数（即没有非零小数位），是否去除尾随零。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-pluralrules-abstracts">
    <h1><span class="secnum">17.5</span> PluralRules 对象的抽象操作</h1>

    <emu-clause id="sec-pluralruleselect" type="implementation-defined abstract operation" aoid="PluralRuleSelect">
      <h1><span class="secnum">17.5.1</span> PluralRuleSelect ( <var>locale</var>, <var>type</var>, <var>notation</var>, <var>compactDisplay</var>, <var>s</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation PluralRuleSelect takes arguments <var>locale</var> (<emu-xref href="#sec-language-tags" id="_ref_910"><a href="#sec-language-tags">语言标签</a></emu-xref>), <var>type</var> (<emu-val>"cardinal"</emu-val> 或 <emu-val>"ordinal"</emu-val>), <var>notation</var> (字符串), <var>compactDisplay</var> (<emu-val>"short"</emu-val> 或 <emu-val>"long"</emu-val>), and <var>s</var> (十进制字符串) and returns <emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, 或 <emu-val>"other"</emu-val>.</p>
    </emu-clause>

    <emu-clause id="sec-resolveplural" type="abstract operation" aoid="ResolvePlural">
      <h1><span class="secnum">17.5.2</span> ResolvePlural ( <var>pluralRules</var>, <var>n</var> )</h1>
      <p>The abstract operation ResolvePlural takes arguments <var>pluralRules</var> (一个 Intl.PluralRules) and <var>n</var> (一个 Intl 数学值) and returns 一个包含字段 <var class="field">[[PluralCategory]]</var> (<emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, 或 <emu-val>"other"</emu-val>) 和. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>n</var> 是 <emu-const>not-a-number</emu-const>，则</li><li>令 <var>s</var> 为表示 <emu-val>NaN</emu-val> 值的 <emu-xref href="#sec-implementation-dependencies" id="_ref_911"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值。</li><li>返回记录 { <var class="field">[[PluralCategory]]</var>: <emu-val>"other"</emu-val>, <var class="field">[[FormattedString]]</var>: <var>s</var>&nbsp;}。</li><li>如果 <var>n</var> 是 <emu-const>positive-infinity</emu-const>，则</li><li>令 <var>s</var> 为表示正无穷的 <emu-xref href="#sec-implementation-dependencies" id="_ref_912"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值。</li><li>返回记录 { <var class="field">[[PluralCategory]]</var>: <emu-val>"other"</emu-val>, <var class="field">[[FormattedString]]</var>: <var>s</var>&nbsp;}。</li><li>如果 <var>n</var> 是 <emu-const>negative-infinity</emu-const>，则</li><li>令 <var>s</var> 为表示负无穷的 <emu-xref href="#sec-implementation-dependencies" id="_ref_913"><a href="#sec-implementation-dependencies">ILD</a></emu-xref> 字符串值。</li><li>返回记录 { <var class="field">[[PluralCategory]]</var>: <emu-val>"other"</emu-val>, <var class="field">[[FormattedString]]</var>: <var>s</var>&nbsp;}。</li><li>令 <var>res</var> 为 <emu-xref aoid="FormatNumericToString" id="_ref_914"><a href="#sec-formatnumerictostring">FormatNumericToString</a></emu-xref>(<var>pluralRules</var>, <var>n</var>)。</li><li>令 <var>s</var> 为 <var>res</var>.<var class="field">[[FormattedString]]</var>。</li><li>令 <var>locale</var> 为 <var>pluralRules</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>type</var> 为 <var>pluralRules</var>.<var class="field">[[Type]]</var>。</li><li>令 <var>notation</var> 为 <var>pluralRules</var>.<var class="field">[[Notation]]</var>。</li><li>令 <var>compactDisplay</var> 为 <var>pluralRules</var>.<var class="field">[[CompactDisplay]]</var>。</li><li>令 <var>p</var> 为 <emu-xref aoid="PluralRuleSelect" id="_ref_915"><a href="#sec-pluralruleselect">PluralRuleSelect</a></emu-xref>(<var>locale</var>, <var>type</var>, <var>notation</var>, <var>compactDisplay</var>, <var>s</var>)。</li><li>返回记录 { <var class="field">[[PluralCategory]]</var>: <var>p</var>, <var class="field">[[FormattedString]]</var>: <var>s</var>&nbsp;}。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-pluralruleselectrange" type="implementation-defined abstract operation" aoid="PluralRuleSelectRange">
      <h1><span class="secnum">17.5.3</span> PluralRuleSelectRange ( <var>locale</var>, <var>type</var>, <var>notation</var>, <var>compactDisplay</var>, <var>xp</var>, <var>yp</var> )</h1>
      <p>The <emu-xref href="#implementation-defined"><a href="https://tc39.es/ecma262/#implementation-defined">implementation-defined</a></emu-xref> abstract operation PluralRuleSelectRange takes arguments <var>locale</var> (<emu-xref href="#sec-language-tags" id="_ref_916"><a href="#sec-language-tags">语言标签</a></emu-xref>), <var>type</var> (<emu-val>"cardinal"</emu-val> 或 <emu-val>"ordinal"</emu-val>), <var>notation</var> (字符串), <var>compactDisplay</var> (<emu-val>"short"</emu-val> 或 <emu-val>"long"</emu-val>), <var>xp</var> (<emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, 或 <emu-val>"other"</emu-val>), and <var>yp</var> (<emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, 或 <emu-val>"other"</emu-val>) and returns <emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, 或 <emu-val>"other"</emu-val>.</p>
    </emu-clause>

    <emu-clause id="sec-resolvepluralrange" type="abstract operation" aoid="ResolvePluralRange">
      <h1><span class="secnum">17.5.4</span> ResolvePluralRange ( <var>pluralRules</var>, <var>x</var>, <var>y</var> )</h1>
      <p>The abstract operation ResolvePluralRange takes arguments <var>pluralRules</var> (一个 Intl.PluralRules), <var>x</var> (一个 Intl 数学值), and <var>y</var> (一个 Intl 数学值) and returns 正常完成，包含 <emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, 或 <emu-val>"other"</emu-val>，或抛出完成. It performs the following steps when called:</p>
      <emu-alg><ol><li>如果 <var>x</var> 是 <emu-const>not-a-number</emu-const> 或 <var>y</var> 是 <emu-const>not-a-number</emu-const>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>xp</var> 为 <emu-xref aoid="ResolvePlural" id="_ref_917"><a href="#sec-resolveplural">ResolvePlural</a></emu-xref>(<var>pluralRules</var>, <var>x</var>)。</li><li>令 <var>yp</var> 为 <emu-xref aoid="ResolvePlural" id="_ref_918"><a href="#sec-resolveplural">ResolvePlural</a></emu-xref>(<var>pluralRules</var>, <var>y</var>)。</li><li>如果 <var>xp</var>.<var class="field">[[FormattedString]]</var> 等于 <var>yp</var>.<var class="field">[[FormattedString]]</var>，则</li><li>返回 <var>xp</var>.<var class="field">[[PluralCategory]]</var>。</li><li>令 <var>locale</var> 为 <var>pluralRules</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>type</var> 为 <var>pluralRules</var>.<var class="field">[[Type]]</var>。</li><li>令 <var>notation</var> 为 <var>pluralRules</var>.<var class="field">[[Notation]]</var>。</li><li>令 <var>compactDisplay</var> 为 <var>pluralRules</var>.<var class="field">[[CompactDisplay]]</var>。</li><li>返回 <emu-xref aoid="PluralRuleSelectRange" id="_ref_919"><a href="#sec-pluralruleselectrange">PluralRuleSelectRange</a></emu-xref>(<var>locale</var>, <var>type</var>, <var>notation</var>, <var>compactDisplay</var>, <var>xp</var>.<var class="field">[[PluralCategory]]</var>,
        <var>yp</var>.<var class="field">[[PluralCategory]]</var>)。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="relativetimeformat-objects">
  <h1><span class="secnum">18</span> RelativeTimeFormat 对象</h1>

  <emu-clause id="sec-intl-relativetimeformat-constructor">
    <h1><span class="secnum">18.1</span> Intl.RelativeTimeFormat 构造函数</h1>

    <p>Intl.RelativeTimeFormat 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.RelativeTimeFormat%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_920"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"RelativeTimeFormat"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_921"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_160"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-Intl.RelativeTimeFormat" oldids="sec-InitializeRelativeTimeFormat"><span id="sec-InitializeRelativeTimeFormat"></span>
      <h1><span class="secnum">18.1.1</span> Intl.RelativeTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当调用 <code>Intl.RelativeTimeFormat</code> 函数并传入可选参数 <var>locales</var> 和 <var>options</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>relativeTimeFormat</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.RelativeTimeFormat.prototype%"</emu-val>,
        « <var class="field">[[InitializedRelativeTimeFormat]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[LocaleData]]</var>, <var class="field">[[Style]]</var>, <var class="field">[[Numeric]]</var>, <var class="field">[[NumberFormat]]</var>,
        <var class="field">[[NumberingSystem]]</var>, <var class="field">[[PluralRules]]</var>&nbsp;»)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_922"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_923"><a href="#sec-intl-relativetimeformat-constructor">%Intl.RelativeTimeFormat%</a></emu-xref>, <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_924"><a href="#sec-intl-relativetimeformat-constructor">%Intl.RelativeTimeFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var>,
        <var>locales</var>, <var>options</var>, « <emu-const>coerce-options</emu-const>&nbsp;»)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>令 <var>locale</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>设置 <var>relativeTimeFormat</var>.<var class="field">[[Locale]]</var> 为 <var>locale</var>。</li><li>设置 <var>relativeTimeFormat</var>.<var class="field">[[LocaleData]]</var> 为 <var>r</var>.<var class="field">[[LocaleData]]</var>。</li><li>设置 <var>relativeTimeFormat</var>.<var class="field">[[NumberingSystem]]</var> 为 <var>r</var>.<var class="field">[[nu]]</var>。</li><li>令 <var>style</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_925"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>&nbsp;», <emu-val>"long"</emu-val>)。</li><li>设置 <var>relativeTimeFormat</var>.<var class="field">[[Style]]</var> 为 <var>style</var>。</li><li>令 <var>numeric</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_926"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numeric"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"always"</emu-val>, <emu-val>"auto"</emu-val>&nbsp;», <emu-val>"always"</emu-val>)。</li><li>设置 <var>relativeTimeFormat</var>.<var class="field">[[Numeric]]</var> 为 <var>numeric</var>。</li><li>令 <var>nfOptions</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOptions</var>, <emu-val>"numberingSystem"</emu-val>, <var>relativeTimeFormat</var>.<var class="field">[[NumberingSystem]]</var>)。</li><li>令 <var>relativeTimeFormat</var>.<var class="field">[[NumberFormat]]</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_927"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nfOptions</var>&nbsp;»)。</li><li>令 <var>relativeTimeFormat</var>.<var class="field">[[PluralRules]]</var> 为 !&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_928"><a href="#sec-intl-pluralrules-constructor">%Intl.PluralRules%</a></emu-xref>, « <var>locale</var>&nbsp;»)。</li><li>返回 <var>relativeTimeFormat</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-relativetimeformat-constructor">
    <h1><span class="secnum">18.2</span> Intl.RelativeTimeFormat 构造函数的属性</h1>

    <p>Intl.RelativeTimeFormat 构造函数：</p>
    <ul>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>具有以下属性：</li>
    </ul>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype">
      <h1><span class="secnum">18.2.1</span> Intl.RelativeTimeFormat.prototype</h1>

      <p><code>Intl.RelativeTimeFormat.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-relativetimeformat-prototype-object" id="_ref_929"><a href="#sec-properties-of-intl-relativetimeformat-prototype-object">%Intl.RelativeTimeFormat.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.supportedLocalesOf">
      <h1><span class="secnum">18.2.2</span> Intl.RelativeTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当调用 <code>supportedLocalesOf</code> 方法并传入参数 <var>locales</var> 和 <var>options</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_930"><a href="#sec-intl-relativetimeformat-constructor">%Intl.RelativeTimeFormat%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_931"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_932"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat-internal-slots">
      <h1><span class="secnum">18.2.3</span> 内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_161"><a href="#sec-internal-slots">9.1</a></emu-xref> 所述约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « <emu-val>"nu"</emu-val> »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « { <var class="field">[[Key]]</var>: <emu-val>"nu"</emu-val>, <var class="field">[[Property]]</var>: <emu-val>"numberingSystem"</emu-val> } »。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        <a href="https://unicode.org/reports/tr35/#Key_And_Type_Definitions_">Unicode 技术标准 #35 第1部分核心，第3.6.1节 键和值定义</a>
        描述了与相对时间格式相关的一个区域扩展键：<emu-val>"nu"</emu-val> 表示数字系统（格式化数字）。
      </div></emu-note>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_162"><a href="#sec-internal-slots">9.1</a></emu-xref> 所述约束范围内由实现定义，并且对于所有区域值
        <var>locale</var>，还需满足以下附加约束：</p>

      <ul>
        <li><var class="field">[[LocaleData]]</var>.[[&lt;<var>locale</var>&gt;]] 包含字段 <emu-val>"second"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"hour"</emu-val>, <emu-val>"day"</emu-val>, <emu-val>"week"</emu-val>, <emu-val>"month"</emu-val>,
          <emu-val>"quarter"</emu-val>, 和 <emu-val>"year"</emu-val>。还可以存在以上述名称与 <emu-val>"-narrow"</emu-val> 或 <emu-val>"-short"</emu-val> 字符串拼接而成的附加字段。对应这些字段的值是包含以下两类字段的记录：
          <ul>
            <li><emu-val>"future"</emu-val> 和 <emu-val>"past"</emu-val> 字段，这些字段是记录，包含与 <var>locale</var> 相关的每个复数类别的字段。对应这些字段的值是模式，可以包含 <emu-val>"{0}"</emu-val>，用于替换为格式化数字。</li>
            <li>可选地，附加字段，其键为 Number 的 <emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref> 结果，值为不作为模板处理的字面字符串。</li>
          </ul>
        </li>
        <li>
          <var class="field">[[LocaleData]]</var> 的任何区域字段的 <emu-val>"nu"</emu-val> 字段的值列表不得包含 <emu-val>"native"</emu-val>、<emu-val>"traditio"</emu-val> 或 <emu-val>"finance"</emu-val>。
        </li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        推荐实现使用由 Common Locale Data Repository 提供的区域数据（可在 <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a> 获取）。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-relativetimeformat-prototype-object">
    <h1><span class="secnum">18.3</span> Intl.RelativeTimeFormat 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.RelativeTimeFormat 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.RelativeTimeFormat.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.RelativeTimeFormat 实例，不具有 <var class="field">[[InitializedRelativeTimeFormat]]</var> 内部槽或任何 Intl.RelativeTimeFormat 实例对象的其他内部槽。
      </li>
      <li>具有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype.constructor">
      <h1><span class="secnum">18.3.1</span> Intl.RelativeTimeFormat.prototype.constructor</h1>

      <p><code>Intl.RelativeTimeFormat.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_933"><a href="#sec-intl-relativetimeformat-constructor">%Intl.RelativeTimeFormat%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.relativetimeformat.prototype.resolvedoptions">
      <h1><span class="secnum">18.3.2</span> Intl.RelativeTimeFormat.prototype.resolvedOptions ( )</h1>

      <p>此函数提供对对象初始化时计算的区域和选项的访问。</p>

      <emu-alg><ol><li>令 <var>relativeTimeFormat</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>relativeTimeFormat</var>, <var class="field">[[InitializedRelativeTimeFormat]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-relativetimeformat-resolvedoptions-properties" id="_ref_163"><a href="#table-relativetimeformat-resolvedoptions-properties">Table 33</a></emu-xref> 的每一行（除表头行外），按表顺序执行</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>relativeTimeFormat</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>断言：<var>v</var> 不为 <emu-val>undefined</emu-val>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-relativetimeformat-resolvedoptions-properties"><figure><figcaption>Table 33: RelativeTimeFormat 实例的已解析选项</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>属性</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Style]]</var></td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[Numeric]]</var></td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[NumberingSystem]]</var></td>
            <td><emu-val>"numberingSystem"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype.format">
      <h1><span class="secnum">18.3.3</span> Intl.RelativeTimeFormat.prototype.format ( <var>value</var>, <var>unit</var> )</h1>

      <p>当调用 <code>format</code> 方法并传入参数 <var>value</var> 和 <var>unit</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>relativeTimeFormat</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>relativeTimeFormat</var>, <var class="field">[[InitializedRelativeTimeFormat]]</var>)。</li><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>)。</li><li>令 <var>unit</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>unit</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatRelativeTime" id="_ref_934"><a href="#sec-FormatRelativeTime">FormatRelativeTime</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype.formatToParts">
      <h1><span class="secnum">18.3.4</span> Intl.RelativeTimeFormat.prototype.formatToParts ( <var>value</var>, <var>unit</var> )</h1>

      <p>当调用 <code>formatToParts</code> 方法并传入参数 <var>value</var> 和 <var>unit</var> 时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>relativeTimeFormat</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>relativeTimeFormat</var>, <var class="field">[[InitializedRelativeTimeFormat]]</var>)。</li><li>令 <var>value</var> 为 ?&nbsp;<emu-xref aoid="ToNumber"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>)。</li><li>令 <var>unit</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>unit</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FormatRelativeTimeToParts" id="_ref_935"><a href="#sec-FormatRelativeTimeToParts">FormatRelativeTimeToParts</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype-toStringTag">
      <h1><span class="secnum">18.3.5</span> Intl.RelativeTimeFormat.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.RelativeTimeFormat"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-relativetimeformat-instances">
    <h1><span class="secnum">18.4</span> Intl.RelativeTimeFormat 实例的属性</h1>

    <p>Intl.RelativeTimeFormat 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-intl-relativetimeformat-prototype-object" id="_ref_936"><a href="#sec-properties-of-intl-relativetimeformat-prototype-object">%Intl.RelativeTimeFormat.prototype%</a></emu-xref> 的属性。</p>

    <p>Intl.RelativeTimeFormat 实例具有 <var class="field">[[InitializedRelativeTimeFormat]]</var> 内部槽。</p>

    <p>Intl.RelativeTimeFormat 实例还具有由 <emu-xref href="#sec-intl-relativetimeformat-constructor" title="" id="_ref_164"><a href="#sec-intl-relativetimeformat-constructor">Intl.RelativeTimeFormat 构造函数</a></emu-xref>
      计算的多个内部槽：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是一个字符串值，表示用于格式化的区域<emu-xref href="#sec-language-tags" id="_ref_937"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[LocaleData]]</var> 是一个记录，表示实现用于格式化的可用数据。它是 <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_938"><a href="#sec-intl-relativetimeformat-constructor">%Intl.RelativeTimeFormat%</a></emu-xref>.<var class="field">[[LocaleData]]</var> 中与 <var class="field">[[Locale]]</var> 的值或其前缀相关的条目的值。
      </li>
      <li><var class="field">[[Style]]</var> 是字符串值 <emu-val>"long"</emu-val>、<emu-val>"short"</emu-val> 或 <emu-val>"narrow"</emu-val>，标识使用的相对时间格式样式。</li>
      <li><var class="field">[[Numeric]]</var> 是字符串值 <emu-val>"always"</emu-val> 或 <emu-val>"auto"</emu-val>，标识是否始终使用数字描述，或仅在没有更具体版本时使用（如 "1 day ago" 与 "yesterday"）。</li>
      <li><var class="field">[[NumberFormat]]</var> 是用于格式化的 Intl.NumberFormat 对象。</li>
      <li><var class="field">[[NumberingSystem]]</var> 是用于格式化的 <a href="https://unicode.org/reports/tr35/#UnicodeNumberSystemIdentifier">Unicode
          数字系统标识符</a> 的字符串值。</li>
      <li><var class="field">[[PluralRules]]</var> 是用于格式化的 Intl.PluralRules 对象。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-relativetimeformat--abstracts">
    <h1><span class="secnum">18.5</span> RelativeTimeFormat 对象的抽象操作</h1>

    <emu-clause id="sec-singularrelativetimeunit" type="abstract operation" aoid="SingularRelativeTimeUnit">
      <h1><span class="secnum">18.5.1</span> SingularRelativeTimeUnit ( <var>unit</var> )</h1>

      <p>The abstract operation SingularRelativeTimeUnit takes argument <var>unit</var> (一个字符串) and returns 返回字符串的正常完成或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>如果 <var>unit</var> 是 <emu-val>"seconds"</emu-val>，返回 <emu-val>"second"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"minutes"</emu-val>，返回 <emu-val>"minute"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"hours"</emu-val>，返回 <emu-val>"hour"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"days"</emu-val>，返回 <emu-val>"day"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"weeks"</emu-val>，返回 <emu-val>"week"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"months"</emu-val>，返回 <emu-val>"month"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"quarters"</emu-val>，返回 <emu-val>"quarter"</emu-val>。</li><li>如果 <var>unit</var> 是 <emu-val>"years"</emu-val>，返回 <emu-val>"year"</emu-val>。</li><li>如果 <var>unit</var> 不是 <emu-val>"second"</emu-val>、<emu-val>"minute"</emu-val>、<emu-val>"hour"</emu-val>、<emu-val>"day"</emu-val>、<emu-val>"week"</emu-val>、<emu-val>"month"</emu-val>、<emu-val>"quarter"</emu-val> 或 <emu-val>"year"</emu-val>，抛出 <emu-val>RangeError</emu-val>
        异常。</li><li>返回 <var>unit</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-PartitionRelativeTimePattern" type="abstract operation" aoid="PartitionRelativeTimePattern">
      <h1><span class="secnum">18.5.2</span> PartitionRelativeTimePattern ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</h1>

      <p>The abstract operation PartitionRelativeTimePattern takes arguments <var>relativeTimeFormat</var> (一个 Intl.RelativeTimeFormat), <var>value</var> (一个数字), and <var>unit</var> (一个字符串) and returns 返回包含字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）、<var class="field">[[Unit]]</var>（字符串或 <emu-const>empty</emu-const>）的记录列表的正常完成或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>如果 <var>value</var> 是 <emu-val>NaN</emu-val>、<emu-val>+∞</emu-val><sub>𝔽</sub> 或 <emu-val>-∞</emu-val><sub>𝔽</sub>，抛出 <emu-val>RangeError</emu-val> 异常。</li><li>令 <var>unit</var> 为 ?&nbsp;<emu-xref aoid="SingularRelativeTimeUnit" id="_ref_939"><a href="#sec-singularrelativetimeunit">SingularRelativeTimeUnit</a></emu-xref>(<var>unit</var>)。</li><li>令 <var>fields</var> 为 <var>relativeTimeFormat</var>.<var class="field">[[LocaleData]]</var>。</li><li>令 <var>patterns</var> 为 <var>fields</var>.[[&lt;<var>unit</var>&gt;]]。</li><li>令 <var>style</var> 为 <var>relativeTimeFormat</var>.<var class="field">[[Style]]</var>。</li><li>如果 <var>style</var> 是 <emu-val>"short"</emu-val> 或 <emu-val>"narrow"</emu-val>，则</li><li>令 <var>key</var> 为 <var>unit</var> 与 <emu-val>"-"</emu-val> 和 <var>style</var> 的字符串拼接。</li><li>如果 <var>fields</var> 有字段 [[&lt;<var>key</var>&gt;]]，则设置 <var>patterns</var> 为 <var>fields</var>.[[&lt;<var>key</var>&gt;]]。</li><li>如果 <var>relativeTimeFormat</var>.<var class="field">[[Numeric]]</var> 是 <emu-val>"auto"</emu-val>，则</li><li>令 <var>valueString</var> 为 !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>value</var>)。</li><li>如果 <var>patterns</var> 有字段 [[&lt;<var>valueString</var>&gt;]]，则</li><li>令 <var>result</var> 为 <var>patterns</var>.[[&lt;<var>valueString</var>&gt;]]。</li><li>返回包含记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>result</var>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>&nbsp;} 的列表。</li><li>如果 <var>value</var> 是 <emu-val>-0</emu-val><sub>𝔽</sub> 或 <var>value</var> &lt; <emu-val>-0</emu-val><sub>𝔽</sub>，则</li><li>令 <var>tl</var> 为 <emu-val>"past"</emu-val>。</li><li>否则，</li><li>令 <var>tl</var> 为 <emu-val>"future"</emu-val>。</li><li>令 <var>po</var> 为 <var>patterns</var>.[[&lt;<var>tl</var>&gt;]]。</li><li>令 <var>fv</var> 为 <emu-xref aoid="PartitionNumberPattern" id="_ref_940"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>relativeTimeFormat</var>.<var class="field">[[NumberFormat]]</var>, <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>value</var>))。</li><li>令 <var>pr</var> 为 <emu-xref aoid="ResolvePlural" id="_ref_941"><a href="#sec-resolveplural">ResolvePlural</a></emu-xref>(<var>relativeTimeFormat</var>.<var class="field">[[PluralRules]]</var>, <var>value</var>).<var class="field">[[PluralCategory]]</var>。</li><li>令 <var>pattern</var> 为 <var>po</var>.[[&lt;<var>pr</var>&gt;]]。</li><li>返回 <emu-xref aoid="MakePartsList" id="_ref_942"><a href="#sec-makepartslist">MakePartsList</a></emu-xref>(<var>pattern</var>, <var>unit</var>, <var>fv</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-makepartslist" type="abstract operation" aoid="MakePartsList">
      <h1><span class="secnum">18.5.3</span> MakePartsList ( <var>pattern</var>, <var>unit</var>, <var>parts</var> )</h1>

      <p>The abstract operation MakePartsList takes arguments <var>pattern</var> (一个<emu-xref href="#sec-pattern-string-types" id="_ref_943"><a href="#sec-pattern-string-types">模式字符串</a></emu-xref>), <var>unit</var> (一个字符串), and <var>parts</var> (表示格式化数字的记录列表) and returns 返回包含字段 <var class="field">[[Type]]</var>（字符串）、<var class="field">[[Value]]</var>（字符串）、<var class="field">[[Unit]]</var>（字符串或 <emu-const>empty</emu-const>）的记录列表. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>patternParts</var> 为 <emu-xref aoid="PartitionPattern" id="_ref_944"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>)。</li><li>令 <var>result</var> 为新的空列表。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>patternPart</var> 属于 <var>patternParts</var>，执行</li><li>如果 <var>patternPart</var>.<var class="field">[[Type]]</var> 是 <emu-val>"literal"</emu-val>，则</li><li>将记录 { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <var>patternPart</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>&nbsp;} 添加到 <var>result</var>。</li><li>否则，</li><li>断言：<var>patternPart</var>.<var class="field">[[Type]]</var> 是 <emu-val>"0"</emu-val>。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>将记录 { <var class="field">[[Type]]</var>: <var>part</var>.<var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>: <var>part</var>.<var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>: <var>unit</var>&nbsp;} 添加到 <var>result</var>。</li><li>返回 <var>result</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        示例：
        <emu-alg><ol><li>返回 <emu-xref aoid="MakePartsList" id="_ref_945"><a href="#sec-makepartslist">MakePartsList</a></emu-xref>(<emu-val>"AA{0}BB"</emu-val>, <emu-val>"hour"</emu-val>, « 记录 { <var class="field">[[Type]]</var>: <emu-val>"integer"</emu-val>, <var class="field">[[Value]]</var>: <emu-val>"15"</emu-val>&nbsp;}&nbsp;»)。</li></ol></emu-alg>
        将返回如下记录列表
        <kbd style="font: inherit; white-space: pre-wrap">
          «
          { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <emu-val>"AA"</emu-val>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>},
          { <var class="field">[[Type]]</var>: <emu-val>"integer"</emu-val>, <var class="field">[[Value]]</var>: <emu-val>"15"</emu-val>, <var class="field">[[Unit]]</var>: <emu-val>"hour"</emu-val>},
          { <var class="field">[[Type]]</var>: <emu-val>"literal"</emu-val>, <var class="field">[[Value]]</var>: <emu-val>"BB"</emu-val>, <var class="field">[[Unit]]</var>: <emu-const>empty</emu-const>}
          »
        </kbd>
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-FormatRelativeTime" type="abstract operation" aoid="FormatRelativeTime">
      <h1><span class="secnum">18.5.4</span> FormatRelativeTime ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</h1>

      <p>The abstract operation FormatRelativeTime takes arguments <var>relativeTimeFormat</var> (一个 Intl.RelativeTimeFormat), <var>value</var> (一个数字), and <var>unit</var> (一个字符串) and returns 返回字符串的正常完成或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionRelativeTimePattern" id="_ref_946"><a href="#sec-PartitionRelativeTimePattern">PartitionRelativeTimePattern</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>)。</li><li>令 <var>result</var> 为空字符串。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>设置 <var>result</var> 为 <var>result</var> 与 <var>part</var>.<var class="field">[[Value]]</var> 的字符串拼接。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-FormatRelativeTimeToParts" type="abstract operation" aoid="FormatRelativeTimeToParts">
      <h1><span class="secnum">18.5.5</span> FormatRelativeTimeToParts ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</h1>

      <p>The abstract operation FormatRelativeTimeToParts takes arguments <var>relativeTimeFormat</var> (一个 Intl.RelativeTimeFormat), <var>value</var> (一个数字), and <var>unit</var> (一个字符串) and returns 返回数组的正常完成或抛出完成. It performs the following steps when called:</p>

      <emu-alg><ol><li>令 <var>parts</var> 为 ?&nbsp;<emu-xref aoid="PartitionRelativeTimePattern" id="_ref_947"><a href="#sec-PartitionRelativeTimePattern">PartitionRelativeTimePattern</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>)。</li><li>令 <var>result</var> 为 !&nbsp;<emu-xref aoid="ArrayCreate"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0)。</li><li>令 <var>n</var> 为 0。</li><li>对每个记录 { <var class="field">[[Type]]</var>, <var class="field">[[Value]]</var>, <var class="field">[[Unit]]</var>&nbsp;} <var>part</var> 属于 <var>parts</var>，执行</li><li>令 <var>O</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.<var class="field">[[Type]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.<var class="field">[[Value]]</var>)。</li><li>如果 <var>part</var>.<var class="field">[[Unit]]</var> 不为 <emu-const>empty</emu-const>，则</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"unit"</emu-val>, <var>part</var>.<var class="field">[[Unit]]</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>n</var>)), <var>O</var>)。</li><li><var>n</var> 增加 1。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-clause id="segmenter-objects">
  <h1><span class="secnum">19</span> 分词器对象</h1>

  <emu-clause id="sec-intl-segmenter-constructor">
    <h1><span class="secnum">19.1</span> Intl.Segmenter 构造函数</h1>

    <p>Intl.Segmenter 构造函数：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.Segmenter%</dfn>。</li>
      <li>是 <emu-xref href="#intl-object" id="_ref_948"><a href="#intl-object">Intl 对象</a></emu-xref>的 <emu-val>"Segmenter"</emu-val> 属性的初始值。</li>
    </ul>

    <p><emu-xref href="#intl-object" id="_ref_949"><a href="#intl-object">Intl 对象</a></emu-xref>所有服务构造属性的通用行为在 <emu-xref href="#sec-internal-slots" id="_ref_165"><a href="#sec-internal-slots">9.1</a></emu-xref> 中指定。</p>

    <emu-clause id="sec-intl.segmenter">
      <h1><span class="secnum">19.1.1</span> Intl.Segmenter ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>当以可选参数 <var>locales</var> 和 <var>options</var> 调用 <code>Intl.Segmenter</code> 函数时，执行以下步骤：</p>

      <emu-alg><ol><li>如果 NewTarget 是 <emu-val>undefined</emu-val>，抛出 <emu-val>TypeError</emu-val> 异常。</li><li>令 <var>internalSlotsList</var> 为 « <var class="field">[[InitializedSegmenter]]</var>, <var class="field">[[Locale]]</var>, <var class="field">[[SegmenterGranularity]]</var>&nbsp;»。</li><li>令 <var>segmenter</var> 为 ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Intl.Segmenter.prototype%"</emu-val>,
        <var>internalSlotsList</var>)。</li><li>令 <var>optionsResolution</var> 为 ?&nbsp;<emu-xref aoid="ResolveOptions" id="_ref_950"><a href="#sec-resolveoptions">ResolveOptions</a></emu-xref>(<emu-xref href="#sec-intl-segmenter-constructor" id="_ref_951"><a href="#sec-intl-segmenter-constructor">%Intl.Segmenter%</a></emu-xref>, <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_952"><a href="#sec-intl-segmenter-constructor">%Intl.Segmenter%</a></emu-xref>.<var class="field">[[LocaleData]]</var>, <var>locales</var>,
        <var>options</var>)。</li><li>设置 <var>options</var> 为 <var>optionsResolution</var>.<var class="field">[[Options]]</var>。</li><li>令 <var>r</var> 为 <var>optionsResolution</var>.<var class="field">[[ResolvedLocale]]</var>。</li><li>设置 <var>segmenter</var>.<var class="field">[[Locale]]</var> 为 <var>r</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>granularity</var> 为 ?&nbsp;<emu-xref aoid="GetOption" id="_ref_953"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"granularity"</emu-val>, <emu-const>string</emu-const>, « <emu-val>"grapheme"</emu-val>, <emu-val>"word"</emu-val>, <emu-val>"sentence"</emu-val>&nbsp;»,
        <emu-val>"grapheme"</emu-val>)。</li><li>设置 <var>segmenter</var>.<var class="field">[[SegmenterGranularity]]</var> 为 <var>granularity</var>。</li><li>返回 <var>segmenter</var>。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-segmenter-constructor">
    <h1><span class="secnum">19.2</span> Intl.Segmenter 构造函数的属性</h1>

    <p>Intl.Segmenter 构造函数：</p>
    <ul>
      <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-function-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>。</li>
      <li>拥有以下属性：</li>
    </ul>

    <emu-clause id="sec-intl.segmenter.prototype">
      <h1><span class="secnum">19.2.1</span> Intl.Segmenter.prototype</h1>

      <p><code>Intl.Segmenter.prototype</code> 的值为 <emu-xref href="#sec-properties-of-intl-segmenter-prototype-object" id="_ref_954"><a href="#sec-properties-of-intl-segmenter-prototype-object">%Intl.Segmenter.prototype%</a></emu-xref>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>false</emu-val> } 属性。</p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.supportedlocalesof">
      <h1><span class="secnum">19.2.2</span> Intl.Segmenter.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>当以参数 <var>locales</var> 和 <var>options</var> 调用 <code>supportedLocalesOf</code> 方法时，执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>availableLocales</var> 为 <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_955"><a href="#sec-intl-segmenter-constructor">%Intl.Segmenter%</a></emu-xref>.<var class="field">[[AvailableLocales]]</var>。</li><li>令 <var>requestedLocales</var> 为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_956"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="FilterLocales" id="_ref_957"><a href="#sec-filterlocales">FilterLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter-internal-slots">
      <h1><span class="secnum">19.2.3</span> Intl.Segmenter 构造函数的内部槽</h1>

      <p><var class="field">[[AvailableLocales]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_166"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义。</p>

      <p><var class="field">[[RelevantExtensionKeys]]</var> 内部槽的值为 « »。</p>

      <p><var class="field">[[ResolutionOptionDescriptors]]</var> 内部槽的值为 « »。</p>
      <emu-note><span class="note">Note</span><div class="note-contents">
        Intl.Segmenter 没有任何相关扩展键。
      </div></emu-note>

      <p><var class="field">[[LocaleData]]</var> 内部槽的值在 <emu-xref href="#sec-internal-slots" id="_ref_167"><a href="#sec-internal-slots">9.1</a></emu-xref> 描述的约束范围内由实现定义。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-segmenter-prototype-object">
    <h1><span class="secnum">19.3</span> Intl.Segmenter 原型对象的属性</h1>

    <p><dfn tabindex="-1">Intl.Segmenter 原型对象</dfn>：</p>
    <ul>
      <li>是 <dfn tabindex="-1">%Intl.Segmenter.prototype%</dfn>。</li>
      <li>是一个普通对象。</li>
      <li>不是 Intl.Segmenter 实例，不具有 <var class="field">[[InitializedSegmenter]]</var> 内部槽或任何 Intl.Segmenter 实例对象的其他内部槽。</li>
      <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
    </ul>

    <emu-clause id="sec-intl.segmenter.prototype.constructor">
      <h1><span class="secnum">19.3.1</span> Intl.Segmenter.prototype.constructor</h1>

      <p><code>Intl.Segmenter.prototype.constructor</code> 的初始值为 <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_958"><a href="#sec-intl-segmenter-constructor">%Intl.Segmenter%</a></emu-xref>。</p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.prototype.resolvedoptions">
      <h1><span class="secnum">19.3.2</span> Intl.Segmenter.prototype.resolvedOptions ( )</h1>

      <p>此函数提供对对象初始化期间计算的 locale 和 options 的访问。</p>

      <emu-alg><ol><li>令 <var>segmenter</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segmenter</var>, <var class="field">[[InitializedSegmenter]]</var>)。</li><li>令 <var>options</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>对 <emu-xref href="#table-segmenter-resolvedoptions-properties" id="_ref_168"><a href="#table-segmenter-resolvedoptions-properties">Table 34</a></emu-xref> 的每一行（除表头行外），按表顺序执行</li><li>令 <var>p</var> 为当前行的 Property 值。</li><li>令 <var>v</var> 为 <var>segmenter</var> 的内部槽，其名称为当前行的 Internal Slot 值。</li><li>断言：<var>v</var> 不为 <emu-val>undefined</emu-val>。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>)。</li><li>返回 <var>options</var>。</li></ol></emu-alg>

      <emu-table id="table-segmenter-resolvedoptions-properties"><figure><figcaption>Table 34: 分词器实例的已解析选项</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>属性</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[Locale]]</var></td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td><var class="field">[[SegmenterGranularity]]</var></td>
            <td><emu-val>"granularity"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.prototype.segment">
      <h1><span class="secnum">19.3.3</span> Intl.Segmenter.prototype.segment ( <var>string</var> )</h1>

      <p><code>Intl.Segmenter.prototype.segment</code> 方法在 Intl.Segmenter 实例上以参数 <var>string</var> 调用，用于根据该实例的 locale 和 options 为字符串创建
        <emu-xref href="#sec-segments-objects" id="_ref_959"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>。执行以下步骤：</p>

      <emu-alg><ol><li>令 <var>segmenter</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segmenter</var>, <var class="field">[[InitializedSegmenter]]</var>)。</li><li>令 <var>string</var> 为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>string</var>)。</li><li>返回 <emu-xref aoid="CreateSegmentsObject" id="_ref_960"><a href="#sec-createsegmentsobject">CreateSegmentsObject</a></emu-xref>(<var>segmenter</var>, <var>string</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.prototype-%symbol.tostringtag%" oldids="sec-intl.segmenter.prototype-@@tostringtag"><span id="sec-intl.segmenter.prototype-@@tostringtag"></span>
      <h1><span class="secnum">19.3.4</span> Intl.Segmenter.prototype [ %Symbol.toStringTag% ]</h1>

      <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Intl.Segmenter"</emu-val>。</p>
      <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-segmenter-instances">
    <h1><span class="secnum">19.4</span> Intl.Segmenter 实例的属性</h1>

    <p>Intl.Segmenter 实例是普通对象，继承自 <emu-xref href="#sec-properties-of-intl-segmenter-prototype-object" id="_ref_961"><a href="#sec-properties-of-intl-segmenter-prototype-object">%Intl.Segmenter.prototype%</a></emu-xref> 的属性。</p>

    <p>Intl.Segmenter 实例具有 <var class="field">[[InitializedSegmenter]]</var> 内部槽。</p>

    <p>Intl.Segmenter 实例还具有由 <emu-xref href="#sec-intl-segmenter-constructor" title="" id="_ref_169"><a href="#sec-intl-segmenter-constructor">Intl.Segmenter 构造函数</a></emu-xref> 计算的内部槽：</p>

    <ul>
      <li><var class="field">[[Locale]]</var> 是字符串值，表示用于分词的本地化<emu-xref href="#sec-language-tags" id="_ref_962"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li>
      <li><var class="field">[[SegmenterGranularity]]</var> 是字符串值 <emu-val>"grapheme"</emu-val>、<emu-val>"word"</emu-val> 或 <emu-val>"sentence"</emu-val>，用于标识要分割的文本元素类型。</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-segments-objects">
    <h1><span class="secnum">19.5</span> Segments 对象</h1>

    <p><dfn tabindex="-1">Segments 实例</dfn>是一个对象，表示特定字符串的分段，受其构造 Intl.Segmenter 实例的 locale 和 options 影响。</p>

    <emu-clause id="sec-createsegmentsobject" type="abstract operation" aoid="CreateSegmentsObject">
      <h1><span class="secnum">19.5.1</span> CreateSegmentsObject ( <var>segmenter</var>, <var>string</var> )</h1>
      <p>The abstract operation CreateSegmentsObject takes arguments <var>segmenter</var> (一个 Intl.Segmenter) and <var>string</var> (一个字符串) and returns 一个 <emu-xref href="#sec-segments-objects" id="_ref_963"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>internalSlotsList</var> 为 « <var class="field">[[SegmentsSegmenter]]</var>, <var class="field">[[SegmentsString]]</var>&nbsp;»。</li><li>令 <var>segments</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-%intlsegmentsprototype%-object" id="_ref_964"><a href="#sec-%intlsegmentsprototype%-object">%IntlSegmentsPrototype%</a></emu-xref>, <var>internalSlotsList</var>)。</li><li>设置 <var>segments</var>.<var class="field">[[SegmentsSegmenter]]</var> 为 <var>segmenter</var>。</li><li>设置 <var>segments</var>.<var class="field">[[SegmentsString]]</var> 为 <var>string</var>。</li><li>返回 <var>segments</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-%intlsegmentsprototype%-object" oldids="sec-%segmentsprototype%-object"><span id="sec-%segmentsprototype%-object"></span>
      <h1><span class="secnum">19.5.2</span> %IntlSegmentsPrototype% 对象</h1>
      <p><dfn tabindex="-1">%IntlSegmentsPrototype%</dfn> 对象：</p>
      <ul>
        <li>是所有 Segments 对象的原型。</li>
        <li>是一个普通对象。</li>
        <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>。</li>
        <li>拥有以下属性：</li>
      </ul>

      <emu-clause id="sec-%intlsegmentsprototype%.containing" oldids="sec-%segmentsprototype%.containing"><span id="sec-%segmentsprototype%.containing"></span>
        <h1><span class="secnum">19.5.2.1</span> %IntlSegmentsPrototype%.containing ( <var>index</var> )</h1>
        <p><code>containing</code> 方法在 <emu-xref href="#sec-segments-objects" id="_ref_965"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>上以参数 <var>index</var> 调用，返回一个 <emu-xref href="#sec-segment-data-objects" id="_ref_966"><a href="#sec-segment-data-objects">Segment Data 对象</a></emu-xref>，描述字符串中包含指定索引处代码单元的分段，根据 <emu-xref href="#sec-segments-objects" id="_ref_967"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>的构造
          Intl.Segmenter 实例的 locale 和 options。执行以下步骤：</p>
        <emu-alg><ol><li>令 <var>segments</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segments</var>, <var class="field">[[SegmentsSegmenter]]</var>)。</li><li>令 <var>segmenter</var> 为 <var>segments</var>.<var class="field">[[SegmentsSegmenter]]</var>。</li><li>令 <var>string</var> 为 <var>segments</var>.<var class="field">[[SegmentsString]]</var>。</li><li>令 <var>len</var> 为 <var>string</var> 的长度。</li><li>令 <var>n</var> 为 ?&nbsp;<emu-xref aoid="ToIntegerOrInfinity"><a href="https://tc39.es/ecma262/#sec-tointegerorinfinity">ToIntegerOrInfinity</a></emu-xref>(<var>index</var>)。</li><li>如果 <var>n</var> &lt; 0 或 <var>n</var> ≥ <var>len</var>，返回 <emu-val>undefined</emu-val>。</li><li>令 <var>startIndex</var> 为 <emu-xref aoid="FindBoundary" id="_ref_968"><a href="#sec-findboundary">FindBoundary</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>n</var>, <emu-const>before</emu-const>)。</li><li>令 <var>endIndex</var> 为 <emu-xref aoid="FindBoundary" id="_ref_969"><a href="#sec-findboundary">FindBoundary</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>n</var>, <emu-const>after</emu-const>)。</li><li>返回 <emu-xref aoid="CreateSegmentDataObject" id="_ref_970"><a href="#sec-createsegmentdataobject">CreateSegmentDataObject</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var>)。</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-%intlsegmentsprototype%-%symbol.iterator%" oldids="sec-%intlsegmentsprototype%-@@iterator,sec-%segmentsprototype%-@@iterator"><span id="sec-%segmentsprototype%-@@iterator"></span><span id="sec-%intlsegmentsprototype%-@@iterator"></span>
        <h1><span class="secnum">19.5.2.2</span> %IntlSegmentsPrototype% [ %Symbol.iterator% ] ( )</h1>
        <p><code>%Symbol.iterator%</code> 方法在 <emu-xref href="#sec-segments-objects" id="_ref_971"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>上调用，用于根据其构造 Intl.Segmenter 实例的 locale 和 options 创建一个 <emu-xref href="#sec-segment-iterator-objects" id="_ref_972"><a href="#sec-segment-iterator-objects">Segment
          Iterator</a></emu-xref>。执行以下步骤：</p>
        <emu-alg><ol><li>令 <var>segments</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segments</var>, <var class="field">[[SegmentsSegmenter]]</var>)。</li><li>令 <var>segmenter</var> 为 <var>segments</var>.<var class="field">[[SegmentsSegmenter]]</var>。</li><li>令 <var>string</var> 为 <var>segments</var>.<var class="field">[[SegmentsString]]</var>。</li><li>返回 <emu-xref aoid="CreateSegmentIterator" id="_ref_973"><a href="#sec-createsegmentiterator">CreateSegmentIterator</a></emu-xref>(<var>segmenter</var>, <var>string</var>)。</li></ol></emu-alg>
        <p>此函数的 <emu-val>"name"</emu-val> 属性值为 <emu-val>"[Symbol.iterator]"</emu-val>。</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-segments-instances">
      <h1><span class="secnum">19.5.3</span> Segments 实例的属性</h1>

      <p><emu-xref href="#sec-segments-objects" id="_ref_974"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>是普通对象，继承自 <emu-xref href="#sec-%intlsegmentsprototype%-object" id="_ref_975"><a href="#sec-%intlsegmentsprototype%-object">%IntlSegmentsPrototype%</a></emu-xref> 的属性。</p>

      <p><emu-xref href="#sec-segments-objects" id="_ref_976"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>具有 <var class="field">[[SegmentsSegmenter]]</var> 内部槽，引用其构造的 Intl.Segmenter 实例。</p>

      <p><emu-xref href="#sec-segments-objects" id="_ref_977"><a href="#sec-segments-objects">Segments 实例</a></emu-xref>具有 <var class="field">[[SegmentsString]]</var> 内部槽，引用其所暴露分段的字符串值。</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-segment-iterator-objects">
    <h1><span class="secnum">19.6</span> Segment Iterator 对象</h1>

    <p><dfn tabindex="-1">Segment Iterator</dfn> 是一个对象，表示对特定字符串分段的迭代。</p>

    <emu-clause id="sec-createsegmentiterator" type="abstract operation" aoid="CreateSegmentIterator">
      <h1><span class="secnum">19.6.1</span> CreateSegmentIterator ( <var>segmenter</var>, <var>string</var> )</h1>
      <p>The abstract operation CreateSegmentIterator takes arguments <var>segmenter</var> (一个 Intl.Segmenter) and <var>string</var> (一个字符串) and returns 一个 <emu-xref href="#sec-segment-iterator-objects" id="_ref_978"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>internalSlotsList</var> 为 « <var class="field">[[IteratingSegmenter]]</var>, <var class="field">[[IteratedString]]</var>,
        <var class="field">[[IteratedStringNextSegmentCodeUnitIndex]]</var>&nbsp;»。</li><li>令 <var>iterator</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-%intlsegmentiteratorprototype%-object" id="_ref_979"><a href="#sec-%intlsegmentiteratorprototype%-object">%IntlSegmentIteratorPrototype%</a></emu-xref>, <var>internalSlotsList</var>)。</li><li>设置 <var>iterator</var>.<var class="field">[[IteratingSegmenter]]</var> 为 <var>segmenter</var>。</li><li>设置 <var>iterator</var>.<var class="field">[[IteratedString]]</var> 为 <var>string</var>。</li><li>设置 <var>iterator</var>.<var class="field">[[IteratedStringNextSegmentCodeUnitIndex]]</var> 为 0。</li><li>返回 <var>iterator</var>。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-%intlsegmentiteratorprototype%-object" oldids="sec-%segmentiteratorprototype%-object"><span id="sec-%segmentiteratorprototype%-object"></span>
      <h1><span class="secnum">19.6.2</span> %IntlSegmentIteratorPrototype% 对象</h1>
      <p><dfn tabindex="-1">%IntlSegmentIteratorPrototype%</dfn> 对象：</p>
      <ul>
        <li>是所有 <emu-xref href="#sec-segment-iterator-objects" id="_ref_980"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref> 对象的原型。</li>
        <li>是一个普通对象。</li>
        <li>拥有 <var class="field">[[Prototype]]</var> 内部槽，其值为 <emu-xref href="#sec-%iterator.prototype%-object"><a href="https://tc39.es/ecma262/#sec-%iterator.prototype%-object">%Iterator.prototype%</a></emu-xref>。</li>
        <li>拥有以下属性：</li>
      </ul>

      <emu-clause id="sec-%intlsegmentiteratorprototype%.next" oldids="sec-%segmentiteratorprototype%.next"><span id="sec-%segmentiteratorprototype%.next"></span>
        <h1><span class="secnum">19.6.2.1</span> %IntlSegmentIteratorPrototype%.next ( )</h1>
        <p><code>next</code> 方法在 <emu-xref href="#sec-segment-iterator-objects" id="_ref_981"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref> 实例上调用，用于向前推进一个分段并返回一个 <i>IteratorResult</i> 对象，描述新分段或声明迭代结束。执行以下步骤：</p>
        <emu-alg><ol><li>令 <var>iterator</var> 为 <emu-val>this</emu-val> 值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>iterator</var>, <var class="field">[[IteratingSegmenter]]</var>)。</li><li>令 <var>segmenter</var> 为 <var>iterator</var>.<var class="field">[[IteratingSegmenter]]</var>。</li><li>令 <var>string</var> 为 <var>iterator</var>.<var class="field">[[IteratedString]]</var>。</li><li>令 <var>startIndex</var> 为 <var>iterator</var>.<var class="field">[[IteratedStringNextSegmentCodeUnitIndex]]</var>。</li><li>令 <var>len</var> 为 <var>string</var> 的长度。</li><li>如果 <var>startIndex</var> ≥ <var>len</var>，则</li><li>返回 <emu-xref aoid="CreateIteratorResultObject"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIteratorResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>true</emu-val>)。</li><li>令 <var>endIndex</var> 为 <emu-xref aoid="FindBoundary" id="_ref_982"><a href="#sec-findboundary">FindBoundary</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <emu-const>after</emu-const>)。</li><li>设置 <var>iterator</var>.<var class="field">[[IteratedStringNextSegmentCodeUnitIndex]]</var> 为 <var>endIndex</var>。</li><li>令 <var>segmentData</var> 为 <emu-xref aoid="CreateSegmentDataObject" id="_ref_983"><a href="#sec-createsegmentdataobject">CreateSegmentDataObject</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var>)。</li><li>返回 <emu-xref aoid="CreateIteratorResultObject"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIteratorResultObject</a></emu-xref>(<var>segmentData</var>, <emu-val>false</emu-val>)。</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-%intlsegmentiteratorprototype%.%symbol.tostringtag%" oldids="sec-%intlsegmentiteratorprototype%.@@tostringtag,sec-%segmentiteratorprototype%.@@tostringtag"><span id="sec-%segmentiteratorprototype%.@@tostringtag"></span><span id="sec-%intlsegmentiteratorprototype%.@@tostringtag"></span>
        <h1><span class="secnum">19.6.2.2</span> %IntlSegmentIteratorPrototype% [ %Symbol.toStringTag% ]</h1>

        <p><emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性的初始值为字符串 <emu-val>"Segmenter String Iterator"</emu-val>。</p>
        <p>该属性具有 { <var class="field">[[Writable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Enumerable]]</var>: <emu-val>false</emu-val>, <var class="field">[[Configurable]]</var>: <emu-val>true</emu-val> } 属性。</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-segment-iterator-instances">
      <h1><span class="secnum">19.6.3</span> Segment Iterator 实例的属性</h1>
      <p><emu-xref href="#sec-segment-iterator-objects" id="_ref_984"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref> 实例是普通对象，继承自 %SegmentIteratorPrototype% 的属性。<emu-xref href="#sec-segment-iterator-objects" id="_ref_985"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref> 实例最初创建时具有 <emu-xref href="#table-segment-iterator-instance-slots" id="_ref_170"><a href="#table-segment-iterator-instance-slots">Table 35</a></emu-xref> 描述的内部槽。</p>
      <emu-table id="table-segment-iterator-instance-slots"><figure><figcaption>Table 35: <emu-xref href="#sec-segment-iterator-objects" id="_ref_986"><a href="#sec-segment-iterator-objects">Segment Iterator</a></emu-xref> 实例的内部槽</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>内部槽</th>
              <th>描述</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><var class="field">[[IteratingSegmenter]]</var></td>
            <td>用于迭代的 Intl.Segmenter 实例。</td>
          </tr>
          <tr>
            <td><var class="field">[[IteratedString]]</var></td>
            <td>正在迭代的字符串值。</td>
          </tr>
          <tr>
            <td><var class="field">[[IteratedStringNextSegmentCodeUnitIndex]]</var></td>
            <td>正在迭代的字符串值中下一个分段起始的代码单元索引。</td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-segment-data-objects">
    <h1><span class="secnum">19.7</span> Segment Data 对象</h1>

    <p><dfn tabindex="-1">Segment Data 对象</dfn>是一个对象，表示字符串中的特定分段。</p>

    <emu-clause id="sec-createsegmentdataobject" type="abstract operation" aoid="CreateSegmentDataObject">
      <h1><span class="secnum">19.7.1</span> CreateSegmentDataObject ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var> )</h1>
      <p>The abstract operation CreateSegmentDataObject takes arguments <var>segmenter</var> (一个 Intl.Segmenter), <var>string</var> (一个字符串), <var>startIndex</var> (一个非负整数), and <var>endIndex</var> (一个非负整数) and returns 一个 <emu-xref href="#sec-segment-data-objects" id="_ref_987"><a href="#sec-segment-data-objects">Segment Data 对象</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>len</var> 为 <var>string</var> 的长度。</li><li>断言：<var>endIndex</var> ≤ <var>len</var>。</li><li>断言：<var>startIndex</var> &lt; <var>endIndex</var>。</li><li>令 <var>result</var> 为 <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>)。</li><li>令 <var>segment</var> 为 <var>string</var> 从 <var>startIndex</var> 到 <var>endIndex</var> 的子字符串。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"segment"</emu-val>, <var>segment</var>)。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"index"</emu-val>, <emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>startIndex</var>))。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"input"</emu-val>, <var>string</var>)。</li><li>令 <var>granularity</var> 为 <var>segmenter</var>.<var class="field">[[SegmenterGranularity]]</var>。</li><li>如果 <var>granularity</var> 为 <code>"word"</code>，则</li><li>令 <var>isWordLike</var> 为布尔值，指示 <var>string</var> 中的 <var>segment</var> 是否根据 locale <var>segmenter</var>.<var class="field">[[Locale]]</var> 是“类词”。</li><li>执行 !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"isWordLike"</emu-val>, <var>isWordLike</var>)。</li><li>返回 <var>result</var>。</li></ol></emu-alg>
      <emu-note><span class="note">Note</span><div class="note-contents">分段是否“类词”由实现决定，建议实现采用本地化裁剪。一般来说，仅由空格和/或标点组成的分段（如 ICU [International Components for Unicode, 文档见 <a href="https://unicode-org.github.io/icu-docs/">https://unicode-org.github.io/icu-docs/</a>] 的 "WORD_NONE"
        边界终止的分段）不被视为“类词”。</div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-intl-segmenter-abstracts">
    <h1><span class="secnum">19.8</span> 分词器对象的抽象操作</h1>

    <emu-clause id="sec-findboundary" type="abstract operation" aoid="FindBoundary">
      <h1><span class="secnum">19.8.1</span> FindBoundary ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>direction</var> )</h1>
      <p>The abstract operation FindBoundary takes arguments <var>segmenter</var> (一个 Intl.Segmenter), <var>string</var> (一个字符串), <var>startIndex</var> (一个非负整数), and <var>direction</var> (<emu-const>before</emu-const> 或 <emu-const>after</emu-const>) and returns 一个非负整数. It performs the following steps when called:</p>
      <emu-alg><ol><li>令 <var>len</var> 为 <var>string</var> 的长度。</li><li>断言：<var>startIndex</var> &lt; <var>len</var>。</li><li>令 <var>locale</var> 为 <var>segmenter</var>.<var class="field">[[Locale]]</var>。</li><li>令 <var>granularity</var> 为 <var>segmenter</var>.<var class="field">[[SegmenterGranularity]]</var>。</li><li>如果 <var>direction</var> 是 <emu-const>before</emu-const>，则</li><li>在 <var>string</var> 中查找距离起始最多 <var>startIndex</var> 个代码单元的最后一个分段边界，使用 locale <var>locale</var> 和文本元素粒度 <var>granularity</var>。</li><li>如果找到边界，返回 <var>string</var> 中在其之前的代码单元数量。</li><li>返回 0。</li><li>断言：<var>direction</var> 是 <emu-const>after</emu-const>。</li><li>在 <var>string</var> 中查找紧随 <var>startIndex</var> 处代码单元之后的第一个分段边界，使用 locale <var>locale</var> 和文本元素粒度 <var>granularity</var>。</li><li>如果找到边界，返回 <var>string</var> 中在其之前的代码单元数量。</li><li>返回 <var>len</var>。</li></ol></emu-alg>
      <emu-note><span class="note">Note</span><div class="note-contents">边界判定由实现决定，但一般默认算法见 <a href="https://unicode.org/reports/tr29/">Unicode Standard Annex #29</a>。建议实现采用如
        Common Locale Data Repository (<a href="https://cldr.unicode.org">https://cldr.unicode.org</a>)
        提供的本地化裁剪。</div></emu-note>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="locale-sensitive-functions">
  <h1><span class="secnum">20</span> ECMAScript语言规范的区域敏感函数</h1>

  <p><emu-xref href="#ecma262" id="_ref_988"><a href="#ecma262">ECMA-262</a></emu-xref>描述了若干区域敏感函数。实现本规范的ECMAScript实现应按照此处描述实现这些函数。</p>

  <emu-note><span class="note">Note</span><div class="note-contents">
    在本条款的算法中创建的Collator、NumberFormat或DateTimeFormat对象仅在这些算法内部使用。它们不会被ECMAScript代码直接访问，且实现中不需要实际存在这些对象。
  </div></emu-note>

  <emu-clause id="sup-properties-of-the-string-prototype-object">
    <h1><span class="secnum">20.1</span> String原型对象的属性</h1>

    <emu-clause id="sup-String.prototype.localeCompare">
      <h1><span class="secnum">20.1.1</span> String.prototype.localeCompare ( <var>that</var> [ , <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#ecma262" id="_ref_989"><a href="#ecma262">ECMA-262</a></emu-xref>中提供的定义，<emu-xref href="#sec-string.prototype.localecompare"><a href="https://tc39.es/ecma262/#sec-string.prototype.localecompare">22.1.3.12</a></emu-xref>。</p>

      <p>当调用<code>localeCompare</code>方法并传入参数<var>that</var>及可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>O</var>为 ?&nbsp;<emu-xref aoid="RequireObjectCoercible"><a href="https://tc39.es/ecma262/#sec-requireobjectcoercible">RequireObjectCoercible</a></emu-xref>(<emu-val>this</emu-val> value)。</li><li>令<var>S</var>为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>O</var>)。</li><li>令<var>thatValue</var>为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>that</var>)。</li><li>令<var>collator</var>为 ?&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-collator-constructor" id="_ref_990"><a href="#sec-intl-collator-constructor">%Intl.Collator%</a></emu-xref>, « <var>locales</var>, <var>options</var>&nbsp;»)。</li><li>返回 <emu-xref aoid="CompareStrings" id="_ref_991"><a href="#sec-collator-comparestrings">CompareStrings</a></emu-xref>(<var>collator</var>, <var>S</var>, <var>thatValue</var>)。</li></ol></emu-alg>

      <p>该函数的<emu-val>"length"</emu-val>属性为<emu-val>1</emu-val><sub>𝔽</sub>。</p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        <code>localeCompare</code>方法本身不适合作为<code>Array.prototype.sort</code>的参数，因为后者要求一个带有两个参数的函数。
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        <code>localeCompare</code>函数有意设计为通用；它不要求其<emu-val>this</emu-val>值为String对象。因此，可以将其转移到其他类型对象上作为方法使用。
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sup-string.prototype.tolocalelowercase">
      <h1><span class="secnum">20.1.2</span> String.prototype.toLocaleLowerCase ( [ <var>locales</var> ] )</h1>

      <p>本定义取代<emu-xref href="#ecma262" id="_ref_992"><a href="#ecma262">ECMA-262</a></emu-xref>中提供的定义，<emu-xref href="#sec-string.prototype.tolocalelowercase"><a href="https://tc39.es/ecma262/#sec-string.prototype.tolocalelowercase">22.1.3.26</a></emu-xref>。</p>

      <p>该函数将String值解释为一系列代码点，如<emu-xref href="#ecma262" id="_ref_993"><a href="#ecma262">ECMA-262</a></emu-xref>中所述，<emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>。按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>O</var>为 ?&nbsp;<emu-xref aoid="RequireObjectCoercible"><a href="https://tc39.es/ecma262/#sec-requireobjectcoercible">RequireObjectCoercible</a></emu-xref>(<emu-val>this</emu-val> value)。</li><li>令<var>S</var>为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>O</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="TransformCase" id="_ref_994"><a href="#sec-transform-case">TransformCase</a></emu-xref>(<var>S</var>, <var>locales</var>, <emu-const>lower</emu-const>)。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        <code>toLocaleLowerCase</code>函数有意设计为通用；它不要求其<emu-val>this</emu-val>值为String对象。因此，可以将其转移到其他类型对象上作为方法使用。
      </div></emu-note>

      <emu-clause id="sec-transform-case" type="abstract operation" aoid="TransformCase">
        <h1><span class="secnum">20.1.2.1</span> TransformCase ( <var>S</var>, <var>locales</var>, <var>targetCase</var> )</h1>
        <p>The abstract operation TransformCase takes arguments <var>S</var> (一个字符串), <var>locales</var> (一个ECMAScript语言值), and <var>targetCase</var> (<emu-const>lower</emu-const>或<emu-const>upper</emu-const>). 它将<var>S</var>解释为一系列UTF-16编码的代码点，如<emu-xref href="#ecma262" id="_ref_995"><a href="#ecma262">ECMA-262</a></emu-xref>中所述，<emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>，并返回将其<emu-xref href="#sec-implementation-dependencies" id="_ref_996"><a href="#sec-implementation-dependencies">ILD</a></emu-xref>转换为<var>targetCase</var>后的新字符串值。 It performs the following steps when called:</p>
        <emu-alg><ol><li>令<var>requestedLocales</var>为 ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_997"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>)。</li><li>如果<var>requestedLocales</var>不是空列表，则</li><li>令<var>requestedLocale</var>为<var>requestedLocales</var>[0]。</li><li>否则，</li><li>令<var>requestedLocale</var>为 <emu-xref aoid="DefaultLocale" id="_ref_998"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref>()。
          1.
          令<var>availableLocales</var>为一个<emu-xref href="#available-locales-list" id="_ref_999"><a href="#available-locales-list">可用语言环境列表</a></emu-xref>，其中包含Unicode字符数据库中具有语言敏感大小写映射的<emu-xref href="#sec-language-tags" id="_ref_1000"><a href="#sec-language-tags">语言标签</a></emu-xref>。如果实现支持额外的区域敏感大小写映射，<var>availableLocales</var>还应包含其对应的<emu-xref href="#sec-language-tags" id="_ref_1001"><a href="#sec-language-tags">语言标签</a></emu-xref>。</li><li>令<var>match</var>为 <emu-xref aoid="LookupMatchingLocaleByPrefix" id="_ref_1002"><a href="#sec-lookupmatchinglocalebyprefix">LookupMatchingLocaleByPrefix</a></emu-xref>(<var>availableLocales</var>, « <var>requestedLocale</var>&nbsp;»)。</li><li>如果<var>match</var>不是<emu-val>undefined</emu-val>，令<var>locale</var>为<var>match</var>.<var class="field">[[locale]]</var>；否则令<var>locale</var>为<emu-val>"und"</emu-val>。</li><li>令<var>codePoints</var>为 <emu-xref aoid="StringToCodePoints"><a href="https://tc39.es/ecma262/#sec-stringtocodepoints">StringToCodePoints</a></emu-xref>(<var>S</var>)。</li><li>如果<var>targetCase</var>为<emu-const>lower</emu-const>，则</li><li>令<var>newCodePoints</var>为一个列表，其元素是根据实现自定义算法使用<var>locale</var>或Unicode默认大小写转换算法对<var>codePoints</var>进行小写转换的结果。</li><li>否则，</li><li>断言：<var>targetCase</var>为<emu-const>upper</emu-const>。</li><li>令<var>newCodePoints</var>为一个列表，其元素是根据实现自定义算法使用<var>locale</var>或Unicode默认大小写转换算法对<var>codePoints</var>进行大写转换的结果。</li><li>返回 <emu-xref aoid="CodePointsToString"><a href="https://tc39.es/ecma262/#sec-codepointstostring">CodePointsToString</a></emu-xref>(<var>newCodePoints</var>)。</li></ol></emu-alg>

        <p>代码点映射可根据Unicode标准的默认大小写转换算法的定制版本得出。实现可以使用Unicode字符数据库的<a href="https://unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt"><code>SpecialCasing.txt</code></a>文件中定义的区域敏感定制，以及/或CLDR，以及/或任何其他自定义定制。无论定制如何，符合规范的实现的大小写转换算法在给定相同输入代码点、区域和目标大小写时必须始终产生相同结果。
        </p>

        <emu-note><span class="note">Note</span><div class="note-contents">
          某些代码点的大小写映射可能产生多个代码点，因此结果长度可能与输入不同。由于<code>toLocaleUpperCase</code>和<code>toLocaleLowerCase</code>都具有上下文敏感行为，这些函数并非对称。换句话说，<code>s.toLocaleUpperCase().toLocaleLowerCase()</code>不一定等于<code>s.toLocaleLowerCase()</code>，<code>s.toLocaleLowerCase().toLocaleUpperCase()</code>也不一定等于<code>s.toLocaleUpperCase()</code>。
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sup-string.prototype.tolocaleuppercase">
      <h1><span class="secnum">20.1.3</span> String.prototype.toLocaleUpperCase ( [ <var>locales</var> ] )</h1>

      <p>本定义取代<emu-xref href="#ecma262" id="_ref_1003"><a href="#ecma262">ECMA-262</a></emu-xref>中提供的定义，<emu-xref href="#sec-string.prototype.tolocaleuppercase"><a href="https://tc39.es/ecma262/#sec-string.prototype.tolocaleuppercase">22.1.3.27</a></emu-xref>。</p>

      <p>该函数将String值解释为一系列代码点，如<emu-xref href="#ecma262" id="_ref_1004"><a href="#ecma262">ECMA-262</a></emu-xref>中所述，<emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>。按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>O</var>为 ?&nbsp;<emu-xref aoid="RequireObjectCoercible"><a href="https://tc39.es/ecma262/#sec-requireobjectcoercible">RequireObjectCoercible</a></emu-xref>(<emu-val>this</emu-val> value)。</li><li>令<var>S</var>为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>O</var>)。</li><li>返回 ?&nbsp;<emu-xref aoid="TransformCase" id="_ref_1005"><a href="#sec-transform-case">TransformCase</a></emu-xref>(<var>S</var>, <var>locales</var>, <emu-const>upper</emu-const>)。</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        <code>toLocaleUpperCase</code>函数有意设计为通用；它不要求其<emu-val>this</emu-val>值为String对象。因此，可以将其转移到其他类型对象上作为方法使用。
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-number-prototype-object">
    <h1><span class="secnum">20.2</span> Number原型对象的属性</h1>

    <p>以下定义引用了<emu-xref href="#ecma262" id="_ref_1006"><a href="#ecma262">ECMA-262</a></emu-xref>中定义的抽象操作thisNumberValue，<emu-xref href="#sec-properties-of-the-number-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-number-prototype-object">21.1.3</a></emu-xref>。</p>

    <emu-clause id="sup-number.prototype.tolocalestring">
      <h1><span class="secnum">20.2.1</span> Number.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#ecma262" id="_ref_1007"><a href="#ecma262">ECMA-262</a></emu-xref>中提供的定义，<emu-xref href="#sec-number.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-number.prototype.tolocalestring">21.1.3.4</a></emu-xref>。</p>

      <p>当调用<code>toLocaleString</code>方法并传入可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>x</var>为 ?&nbsp;<emu-xref aoid="ThisNumberValue"><a href="https://tc39.es/ecma262/#sec-thisnumbervalue">ThisNumberValue</a></emu-xref>(<emu-val>this</emu-val> value)。</li><li>令<var>numberFormat</var>为 ?&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_1008"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var>&nbsp;»)。</li><li>返回 <emu-xref aoid="FormatNumeric" id="_ref_1009"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>numberFormat</var>, !&nbsp;<emu-xref aoid="ToIntlMathematicalValue" id="_ref_1010"><a href="#sec-tointlmathematicalvalue">ToIntlMathematicalValue</a></emu-xref>(<var>x</var>))。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-bigint-prototype-object">
    <h1><span class="secnum">20.3</span> BigInt原型对象的属性</h1>

    <p>以下定义引用了<emu-xref href="#ecma262" id="_ref_1011"><a href="#ecma262">ECMA-262</a></emu-xref>中定义的抽象操作thisBigIntValue，<emu-xref href="#sec-properties-of-the-bigint-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-bigint-prototype-object">21.2.3</a></emu-xref>。</p>

    <emu-clause id="sup-bigint.prototype.tolocalestring">
      <h1><span class="secnum">20.3.1</span> BigInt.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#ecma262" id="_ref_1012"><a href="#ecma262">ECMA-262</a></emu-xref>中提供的定义，<emu-xref href="#sec-bigint.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-bigint.prototype.tolocalestring">21.2.3.2</a></emu-xref>。</p>

      <p>当调用<code>toLocaleString</code>方法并传入可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>x</var>为 ?&nbsp;<emu-xref aoid="ThisBigIntValue"><a href="https://tc39.es/ecma262/#sec-thisbigintvalue">ThisBigIntValue</a></emu-xref>(<emu-val>this</emu-val> value)。</li><li>令<var>numberFormat</var>为 ?&nbsp;<emu-xref aoid="Construct"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_1013"><a href="#sec-intl-numberformat-constructor">%Intl.NumberFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var>&nbsp;»)。</li><li>返回 <emu-xref aoid="FormatNumeric" id="_ref_1014"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>numberFormat</var>, <emu-xref aoid="ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>x</var>))。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-date-prototype-object">
    <h1><span class="secnum">20.4</span> Date原型对象的属性</h1>

    <p>以下定义引用了<emu-xref href="#ecma262" id="_ref_1015"><a href="#ecma262">ECMA-262</a></emu-xref>中定义的抽象操作thisTimeValue，<emu-xref href="#sec-properties-of-the-date-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-date-prototype-object">21.4.4</a></emu-xref>。
    </p>

    <emu-clause id="sup-date.prototype.tolocalestring">
      <h1><span class="secnum">20.4.1</span> Date.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#ecma262" id="_ref_1016"><a href="#ecma262">ECMA-262</a></emu-xref>中提供的定义，<emu-xref href="#sec-date.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-date.prototype.tolocalestring">21.4.4.39</a></emu-xref>。</p>

      <p>当调用<code>toLocaleString</code>方法并传入可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>dateObject</var>为<emu-val>this</emu-val>值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dateObject</var>, <var class="field">[[DateValue]]</var>)。</li><li>令<var>x</var>为<var>dateObject</var>.<var class="field">[[DateValue]]</var>。</li><li>如果<var>x</var>为<emu-val>NaN</emu-val>，返回<emu-val>"Invalid Date"</emu-val>。</li><li>令<var>dateFormat</var>为 ?&nbsp;<emu-xref aoid="CreateDateTimeFormat" id="_ref_1017"><a href="#sec-createdatetimeformat">CreateDateTimeFormat</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_1018"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>, <var>locales</var>, <var>options</var>, <emu-const>any</emu-const>, <emu-const>all</emu-const>)。</li><li>返回 !&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_1019"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>dateFormat</var>, <var>x</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sup-date.prototype.tolocaledatestring">
      <h1><span class="secnum">20.4.2</span> Date.prototype.toLocaleDateString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#sec-date.prototype.tolocaledatestring" title=""><a href="https://tc39.es/ecma262/#sec-date.prototype.tolocaledatestring">Date.prototype.toLocaleDateString ( [ <var>reserved1</var> [ , <var>reserved2</var> ] ] )</a></emu-xref>中提供的定义。</p>

      <p>当调用<code>toLocaleDateString</code>方法并传入可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>dateObject</var>为<emu-val>this</emu-val>值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dateObject</var>, <var class="field">[[DateValue]]</var>)。</li><li>令<var>x</var>为<var>dateObject</var>.<var class="field">[[DateValue]]</var>。</li><li>如果<var>x</var>为<emu-val>NaN</emu-val>，返回<emu-val>"Invalid Date"</emu-val>。</li><li>令<var>dateFormat</var>为 ?&nbsp;<emu-xref aoid="CreateDateTimeFormat" id="_ref_1020"><a href="#sec-createdatetimeformat">CreateDateTimeFormat</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_1021"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>, <var>locales</var>, <var>options</var>, <emu-const>date</emu-const>, <emu-const>date</emu-const>)。</li><li>返回 !&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_1022"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>dateFormat</var>, <var>x</var>)。</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sup-date.prototype.tolocaletimestring">
      <h1><span class="secnum">20.4.3</span> Date.prototype.toLocaleTimeString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#sec-date.prototype.tolocaletimestring" title=""><a href="https://tc39.es/ecma262/#sec-date.prototype.tolocaletimestring">Date.prototype.toLocaleTimeString ( [ <var>reserved1</var> [ , <var>reserved2</var> ] ] )</a></emu-xref>中提供的定义。</p>

      <p>当调用<code>toLocaleTimeString</code>方法并传入可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>dateObject</var>为<emu-val>this</emu-val>值。</li><li>执行 ?&nbsp;<emu-xref aoid="RequireInternalSlot"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dateObject</var>, <var class="field">[[DateValue]]</var>)。</li><li>令<var>x</var>为<var>dateObject</var>.<var class="field">[[DateValue]]</var>。</li><li>如果<var>x</var>为<emu-val>NaN</emu-val>，返回<emu-val>"Invalid Date"</emu-val>。</li><li>令<var>timeFormat</var>为 ?&nbsp;<emu-xref aoid="CreateDateTimeFormat" id="_ref_1023"><a href="#sec-createdatetimeformat">CreateDateTimeFormat</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_1024"><a href="#sec-intl-datetimeformat-constructor">%Intl.DateTimeFormat%</a></emu-xref>, <var>locales</var>, <var>options</var>, <emu-const>time</emu-const>, <emu-const>time</emu-const>)。</li><li>返回 !&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_1025"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>timeFormat</var>, <var>x</var>)。</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-array-prototype-object">
    <h1><span class="secnum">20.5</span> Array原型对象的属性</h1>

    <emu-clause id="sup-array.prototype.tolocalestring">
      <h1><span class="secnum">20.5.1</span> Array.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>本定义取代<emu-xref href="#sec-array.prototype.tolocalestring" title=""><a href="https://tc39.es/ecma262/#sec-array.prototype.tolocalestring">Array.prototype.toLocaleString ( [ <var>reserved1</var> [ , <var>reserved2</var> ] ] )</a></emu-xref>中提供的定义。</p>

      <p>当调用<code>toLocaleString</code>方法并传入可选参数<var>locales</var>和<var>options</var>时，按以下步骤执行：</p>

      <emu-alg><ol><li>令<var>array</var>为 ?&nbsp;<emu-xref aoid="ToObject"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<emu-val>this</emu-val> value)。</li><li>令<var>len</var>为 ?&nbsp;<emu-xref aoid="LengthOfArrayLike"><a href="https://tc39.es/ecma262/#sec-lengthofarraylike">LengthOfArrayLike</a></emu-xref>(<var>array</var>)。</li><li>令<var>separator</var>为适用于主机环境当前区域的实现定义列表分隔符字符串值（如<emu-val>", "</emu-val>）。</li><li>令<var>R</var>为空字符串。</li><li>令<var>k</var>为0。</li><li>当<var>k</var> &lt; <var>len</var>时重复，</li><li>如果<var>k</var> &gt; 0，则</li><li>将<var>R</var>设为<var>R</var>与<var>separator</var>的字符串连接。</li><li>令<var>nextElement</var>为 ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>array</var>, !&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<emu-xref aoid="𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>k</var>)))。</li><li>如果<var>nextElement</var>不是<emu-val>undefined</emu-val>或<emu-val>null</emu-val>，则</li><li>令<var>S</var>为 ?&nbsp;<emu-xref aoid="ToString"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(? <emu-xref aoid="Invoke"><a href="https://tc39.es/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>nextElement</var>, <emu-val>"toLocaleString"</emu-val>, « <var>locales</var>, <var>options</var>&nbsp;»))。</li><li>将<var>R</var>设为<var>R</var>与<var>S</var>的字符串连接。</li><li>将<var>k</var>设为<var>k</var> + 1。</li><li>返回<var>R</var>。</li></ol></emu-alg>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        此算法的步骤与<emu-xref href="#sec-array.prototype.tolocalestring" title=""><a href="https://tc39.es/ecma262/#sec-array.prototype.tolocalestring">Array.prototype.toLocaleString ( [ <var>reserved1</var> [ , <var>reserved2</var> ] ] )</a></emu-xref>中的步骤一致，唯一不同的是<emu-xref aoid="Invoke"><a href="https://tc39.es/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>nextElement</var>,
        <emu-val>"toLocaleString"</emu-val>)现在接受<var>locales</var>和<var>options</var>作为参数。
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        数组元素通过其<code>toLocaleString</code>方法转换为字符串，然后这些字符串被连接，并以实现定义的区域敏感分隔符字符串分隔。此函数类似于<code>toString</code>，但旨在生成与主机环境当前区域惯例相对应的区域敏感结果。
      </div></emu-note>

      <emu-note><span class="note">Note 3</span><div class="note-contents">
        <code>toLocaleString</code>函数有意设计为通用；它不要求其<emu-val>this</emu-val>值为Array对象。因此可以将其转移到其他类型对象上作为方法使用。
      </div></emu-note>
    </emu-clause>
  </emu-clause>
</emu-clause>
<emu-annex id="annex-implementation-dependent-behaviour">
  <h1><span class="secnum">Annex A <span class="annex-kind">(informative)</span></span> 实现依赖行为</h1>

  <p>本规范中的以下方面是实现依赖的：</p>

  <ul>
    <li>
      在所有功能中：
      <ul>
        <li>
          <var>options</var> 参数某些属性的附加值 (<emu-xref href="#conformance" id="_ref_171"><a href="#conformance">2</a></emu-xref>)
        </li>
        <li>
          默认区域 (<emu-xref href="#sec-defaultlocale" id="_ref_172"><a href="#sec-defaultlocale">6.2.3</a></emu-xref>)
        </li>
        <li>
          每个构造函数可用的区域集合 (<emu-xref href="#sec-internal-slots" id="_ref_173"><a href="#sec-internal-slots">9.1</a></emu-xref>)
        </li>
        <li>
          <emu-xref aoid="LookupMatchingLocaleByBestFit" id="_ref_1026"><a href="#sec-lookupmatchinglocalebybestfit">LookupMatchingLocaleByBestFit</a></emu-xref> 算法 (<emu-xref href="#sec-lookupmatchinglocalebybestfit" id="_ref_174"><a href="#sec-lookupmatchinglocalebybestfit">9.2.4</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 Collator 中：
      <ul>
        <li>
          对 Unicode 扩展键 <emu-val>"kf"</emu-val>、<emu-val>"kn"</emu-val> 及并行选项属性 <emu-val>"caseFirst"</emu-val>、<emu-val>"numeric"</emu-val> 的支持 (<emu-xref href="#sec-intl.collator" id="_ref_175"><a href="#sec-intl.collator">10.1.1</a></emu-xref>)
        </li>
        <li>
          每个区域除默认排序外支持的 <emu-val>"co"</emu-val> 键值（排序）集合 (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_176"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域支持的 <emu-val>"kf"</emu-val> 键值（大小写顺序）集合 (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_177"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域支持的 <emu-val>"kn"</emu-val> 键值（数字排序）集合 (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_178"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域的默认搜索敏感度 (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_179"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域的默认忽略标点符号值 (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_180"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          每个支持的区域及选项组合的排序顺序 (<emu-xref href="#sec-collator-compare-functions" id="_ref_181"><a href="#sec-collator-compare-functions">10.3.3.1</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>在 DateTimeFormat 中：
      <ul>
        <li>
          <emu-xref aoid="BestFitFormatMatcher" id="_ref_1027"><a href="#sec-bestfitformatmatcher">BestFitFormatMatcher</a></emu-xref> 算法 (<emu-xref href="#sec-createdatetimeformat" id="_ref_182"><a href="#sec-createdatetimeformat">11.1.2</a></emu-xref>)
        </li>
        <li>
          每个区域支持的 <emu-val>"ca"</emu-val> 键值（历法）集合 (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_183"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域支持的 <emu-val>"nu"</emu-val> 键值（数字系统）集合 (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_184"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域的默认 hourCycle 设置 (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_185"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域支持的日期时间格式集合（超出核心集合），包括每个组件的表示及相关模式 (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_186"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          本地化的星期名称、纪元名称、月份名称、日间名称、上午/下午指示符及时区名称 (<emu-xref href="#sec-formatdatetimepattern" id="_ref_187"><a href="#sec-formatdatetimepattern">11.5.5</a></emu-xref>)
        </li>
        <li>
          除 <emu-val>"gregory"</emu-val> 外其他历法的日历计算 (<emu-xref href="#sec-tolocaltime" id="_ref_188"><a href="#sec-tolocaltime">11.5.12</a></emu-xref>)
        </li>
        <li>
          IANA 时区数据库所有已知注册的 Zone 和 Link 名称及其与 UTC 的偏移和夏令时规则信息 (<emu-xref href="#sec-time-zone-identifiers"><a href="https://tc39.es/ecma262/#sec-time-zone-identifiers">21.4.1.19</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 DisplayNames 中：
      <ul>
        <li>
          本地化名称 (<emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_189"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 DurationFormat 中：
      <ul>
        <li>
          每个区域支持的 <emu-val>"nu"</emu-val> 键值（数字系统）集合 (<emu-xref href="#sec-Intl.DurationFormat-internal-slots" id="_ref_190"><a href="#sec-Intl.DurationFormat-internal-slots">13.2.3</a></emu-xref>)
        </li>
        <li>
          数字格式配置（以 <emu-val>"numeric"</emu-val> 样式使用两位小时及数字小时、分钟、秒的分隔符）每个区域 (<emu-xref href="#sec-Intl.DurationFormat-internal-slots" id="_ref_191"><a href="#sec-Intl.DurationFormat-internal-slots">13.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 ListFormat 中：
      <ul>
        <li>
          格式化值所用的模式 (<emu-xref href="#sec-Intl.ListFormat-internal-slots" id="_ref_192"><a href="#sec-Intl.ListFormat-internal-slots">14.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 Locale 中：
      <ul>
        <li>
          对 Unicode 扩展键 <emu-val>"kf"</emu-val>、<emu-val>"kn"</emu-val> 及并行选项属性 <emu-val>"caseFirst"</emu-val>、<emu-val>"numeric"</emu-val> 的支持 (<emu-xref href="#sec-Intl.Locale" id="_ref_193"><a href="#sec-Intl.Locale">15.1.1</a></emu-xref>)
        </li>
        <li>
          每个区域的首选历法 (<emu-xref href="#sec-calendarsoflocale" id="_ref_194"><a href="#sec-calendarsoflocale">15.5.9</a></emu-xref>)、排序 (<emu-xref href="#sec-collationsoflocale" id="_ref_195"><a href="#sec-collationsoflocale">15.5.10</a></emu-xref>)、小时制 (<emu-xref href="#sec-hourcyclesoflocale" id="_ref_196"><a href="#sec-hourcyclesoflocale">15.5.11</a></emu-xref>)、数字系统
          (<emu-xref href="#sec-numberingsystemsoflocale" id="_ref_197"><a href="#sec-numberingsystemsoflocale">15.5.12</a></emu-xref>) 和时区 (<emu-xref href="#sec-timezonesoflocale" id="_ref_198"><a href="#sec-timezonesoflocale">15.5.13</a></emu-xref>) 集合
        </li>
        <li>
          每个区域内一行字符的默认一般排序 (<emu-xref href="#sec-textdirectionoflocale" id="_ref_199"><a href="#sec-textdirectionoflocale">15.5.14</a></emu-xref>)
        </li>
        <li>
          每个区域的每周第一天及哪些天被视为周末（用于日历目的） (<emu-xref href="#sec-weekinfooflocale" id="_ref_200"><a href="#sec-weekinfooflocale">15.5.17</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 NumberFormat 中：
      <ul>
        <li>
          每个区域支持的 <emu-val>"nu"</emu-val> 键值（数字系统）集合 (<emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_201"><a href="#sec-intl.numberformat-internal-slots">16.2.3</a></emu-xref>)
        </li>
        <li>
          每个区域格式化为十进制、百分比、货币或单位值的模式（含或不含符号、货币会计格式、标准、紧凑或科学记数法） (<emu-xref href="#sec-formatnumber" id="_ref_202"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          格式化货币值时使用的小数位数 (<emu-xref href="#sec-formatnumber" id="_ref_203"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          <emu-val>NaN</emu-val> 和 <emu-val>Infinity</emu-val> 的本地化表示 (<emu-xref href="#sec-formatnumber" id="_ref_204"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          未在 <emu-xref href="#table-numbering-system-digits" id="_ref_205"><a href="#table-numbering-system-digits">Table 30</a></emu-xref> 中列出的数字系统的实现 (<emu-xref href="#sec-formatnumber" id="_ref_206"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          本地化的十进制和分组分隔符 (<emu-xref href="#sec-formatnumber" id="_ref_207"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          本地化的正负号 (<emu-xref href="#sec-formatnumber" id="_ref_208"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          本地化的数字分组方案 (<emu-xref href="#sec-formatnumber" id="_ref_209"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          紧凑记数法的本地化数量级阈值 (<emu-xref href="#sec-formatnumber" id="_ref_210"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          紧凑和科学记数法的本地化符号 (<emu-xref href="#sec-formatnumber" id="_ref_211"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          本地化的窄、短和长货币符号及名称 (<emu-xref href="#sec-formatnumber" id="_ref_212"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
        <li>
          本地化的窄、短和长单位符号 (<emu-xref href="#sec-formatnumber" id="_ref_213"><a href="#sec-formatnumber">16.5.6</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 PluralRules 中：
      <ul>
        <li>
          每个区域复数选择可能结果的字符串列表及其对应顺序 (<emu-xref href="#sec-intl.pluralrules" id="_ref_214"><a href="#sec-intl.pluralrules">17.1.1</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 RelativeTimeFormat 中：
      <ul>
        <li>
          每个区域支持的 <emu-val>"nu"</emu-val> 键值（数字系统）集合 (<emu-xref href="#sec-Intl.RelativeTimeFormat-internal-slots" id="_ref_215"><a href="#sec-Intl.RelativeTimeFormat-internal-slots">18.2.3</a></emu-xref>)
        </li>
        <li>
          格式化值所用的模式 (<emu-xref href="#sec-Intl.RelativeTimeFormat-internal-slots" id="_ref_216"><a href="#sec-Intl.RelativeTimeFormat-internal-slots">18.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      在 Segmenter 中：
      <ul>
        <li>
          边界判定算法 (<emu-xref href="#sec-findboundary" id="_ref_217"><a href="#sec-findboundary">19.8.1</a></emu-xref>)
        </li>
        <li>
          将分段归类为“类似单词” (<emu-xref href="#sec-createsegmentdataobject" id="_ref_218"><a href="#sec-createsegmentdataobject">19.7.1</a></emu-xref>)
        </li>
      </ul>
    </li>
  </ul>
</emu-annex>

<emu-annex id="annex-incompatibilities">
  <h1><span class="secnum">Annex B <span class="annex-kind">(informative)</span></span> 引入与先前版本不兼容的新增与变更</h1>

  <ul>
    <li>
      <emu-xref href="#sec-intl-collator-constructor" id="_ref_219"><a href="#sec-intl-collator-constructor">10.1</a></emu-xref>、<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_220"><a href="#sec-intl-numberformat-constructor">16.1</a></emu-xref>、<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_221"><a href="#sec-intl-datetimeformat-constructor">11.1</a></emu-xref> 在 ECMA-402 第1版中，构造函数可用于从任意对象创建 <emu-xref href="#intl-object" id="_ref_1028"><a href="#intl-object">Intl 对象</a></emu-xref>。第2版中不再支持此功能。
    </li>
    <li>
      <emu-xref href="#sec-intl.datetimeformat.prototype.format" id="_ref_222"><a href="#sec-intl.datetimeformat.prototype.format">11.3.3</a></emu-xref> 在 ECMA-402 第1版中，函数对象 <var>F</var> 的 <emu-val>"length"</emu-val>
      属性被设置为 <emu-val>+0</emu-val><sub>𝔽</sub>。第2版中，<emu-val>"length"</emu-val> 被设置为 <emu-val>1</emu-val><sub>𝔽</sub>。
    </li>
    <li>
      <emu-xref href="#sec-intl.collator.prototype-%symbol.tostringtag%" id="_ref_223"><a href="#sec-intl.collator.prototype-%symbol.tostringtag%">10.3.4</a></emu-xref> 在 ECMA-402
      第7版中，<code>Intl.Collator.prototype</code> 的 <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性被设置为 <emu-val>"Object"</emu-val>。第8版中，<emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 被设置为
      <emu-val>"Intl.Collator"</emu-val>。
    </li>
    <li>
      <emu-xref href="#sec-intl.datetimeformat.prototype-%symbol.tostringtag%" id="_ref_224"><a href="#sec-intl.datetimeformat.prototype-%symbol.tostringtag%">11.3.7</a></emu-xref> 在 ECMA-402
      第7版中，<code>Intl.DateTimeFormat.prototype</code> 的 <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性被设置为 <emu-val>"Object"</emu-val>。第8版中，<emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 被设置为
      <emu-val>"Intl.DateTimeFormat"</emu-val>。
    </li>
    <li>
      <emu-xref href="#sec-intl.numberformat.prototype-%symbol.tostringtag%" id="_ref_225"><a href="#sec-intl.numberformat.prototype-%symbol.tostringtag%">16.3.7</a></emu-xref> 在 ECMA-402
      第7版中，<code>Intl.NumberFormat.prototype</code> 的 <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性被设置为 <emu-val>"Object"</emu-val>。第8版中，<emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 被设置为
      <emu-val>"Intl.NumberFormat"</emu-val>。
    </li>
    <li>
      <emu-xref href="#sec-intl.pluralrules.prototype-%symbol.tostringtag%" id="_ref_226"><a href="#sec-intl.pluralrules.prototype-%symbol.tostringtag%">17.3.5</a></emu-xref> 在 ECMA-402
      第7版中，<code>Intl.PluralRules.prototype</code> 的 <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 属性被设置为 <emu-val>"Object"</emu-val>。第8版中，<emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 被设置为
      <emu-val>"Intl.PluralRules"</emu-val>。
    </li>
    <li>
      <emu-xref href="#sec-intl-%symbol.tostringtag%" id="_ref_227"><a href="#sec-intl-%symbol.tostringtag%">8.1.1</a></emu-xref> 在 ECMA-402 第7版中，<code>Intl</code> 的 <emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref>
      属性未定义。第8版中，<emu-xref href="#sec-well-known-symbols"><a href="https://tc39.es/ecma262/#sec-well-known-symbols">%Symbol.toStringTag%</a></emu-xref> 被设置为 <emu-val>"Intl"</emu-val>。
    </li>
    <li>
      <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_228"><a href="#sec-intl-numberformat-constructor">16.1</a></emu-xref> 在 ECMA-402 第8版中，当 style 为 <emu-val>"currency"</emu-val> 且
      maximumFractionDigits 被设置为低于该货币默认小数位数时，NumberFormat 构造函数会抛出错误。此行为在第9版中被修正，不再抛出错误。
    </li>
  </ul>
</emu-annex>
<emu-annex id="sec-colophon">
  <h1><span class="secnum">Annex C <span class="annex-kind">(informative)</span></span> 跋</h1>
  <p>本规范在<a href="https://github.com/tc39/ecma402">GitHub</a>上以一种名为<a href="https://github.com/tc39/ecmarkup">Ecmarkup</a>的纯文本源格式编写。Ecmarkup 是一种 HTML 和 Markdown 方言，为以纯文本编写 ECMAScript
    规范并处理规范为完整 HTML 渲染提供了框架和工具集，遵循本文件的编辑惯例。Ecmarkup 构建并集成了多种其他格式和技术，包括用于定义语法的<a href="https://github.com/rbuckton/grammarkdown">Grammarkdown</a>和用于编写算法步骤的<a href="https://github.com/tc39/ecmarkdown">Ecmarkdown</a>。本规范的 PDF 渲染使用打印样式表，利用 CSS Paged Media 规范，并通过<a href="https://www.princexml.com/">PrinceXML</a>进行转换。</p>
  <p>本规范的早期版本使用 Word 编写——构成本版基础的 Ecmarkup 源文本是通过自动转换工具将 ECMAScript 2015 Word 文档转换为 Ecmarkup 得到的。</p>
</emu-annex><emu-annex id="sec-copyright-and-software-license" back-matter="">
        <h1>Copyright &amp; Software License</h1>
        <p class="ECMAaddress">Ecma International</p>
<p class="ECMAaddress">Rue du Rhone 114</p>
<p class="ECMAaddress">CH-1204 Geneva</p>
<p class="ECMAaddress">Tel: +41 22 849 6000</p>
<p class="ECMAaddress">Fax: +41 22 849 6001</p>
<p class="ECMAaddress">Web: <a href="https://ecma-international.org/">https://ecma-international.org/</a></p>

        <div class="copyright-notice" id="copyright-notice"><h2>Copyright Notice</h2>
<p>COPYRIGHT NOTICE</p>

<p>© 2026 Ecma International</p>

<p>By obtaining and/or copying this work, you (the licensee) agree that you have read, understood, and will comply with the following terms and conditions.</p>

<p>This document may be copied, published and distributed to others, and certain derivative works of it may be prepared, copied, published, and distributed, in whole or in part, provided that the above copyright notice and this Copyright License and Disclaimer are included on all such copies and derivative works. The only derivative works that are permissible under this Copyright License and Disclaimer are:</p>

<p>(i) works which incorporate all or portion of this document for the purpose of providing commentary or explanation (such as an annotated version of the document),</p>

<p>(ii) works which incorporate all or portion of this document for the purpose of incorporating features that provide accessibility,</p>

<p>(iii) translations of this document into languages other than English and into different formats and</p>

<p>(iv) works by making use of this specification in standard conformant products by implementing (e.g. by copy and paste wholly or partly) the functionality therein.</p>

<p>However, the content of this document itself may not be modified in any way, including by removing the copyright notice or references to Ecma International, except as required to translate it into languages other than English or into a different format.</p>

<p>The official version of an Ecma International document is the English language version on the Ecma International website. In the event of discrepancies between a translated version and the official version, the official version shall govern.</p>

<p>The limited permissions granted above are perpetual and will not be revoked by Ecma International or its successors or assigns.</p>

<p>This document and the information contained herein is provided on an “AS IS” basis and ECMA INTERNATIONAL DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>
</div>
        <h2>Software License</h2>
        <p>All Software contained in this document ("Software") is protected by copyright and is being made available under the "BSD License", included below. This Software may be subject to third party rights (rights from parties other than Ecma International), including patent rights, and no licenses under such third party rights are granted under this license even if the third party concerned is a member of Ecma International. SEE THE ECMA CODE OF CONDUCT IN PATENT MATTERS AVAILABLE AT <a href="https://ecma-international.org/memento/codeofconduct.htm">https://ecma-international.org/memento/codeofconduct.htm</a> FOR INFORMATION REGARDING THE LICENSING OF PATENT CLAIMS THAT ARE REQUIRED TO IMPLEMENT ECMA INTERNATIONAL STANDARDS.</p>

<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>

<ol>
  <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
  <li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
  <li>Neither the name of the authors nor Ecma International may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>

<p>THIS SOFTWARE IS PROVIDED BY THE ECMA INTERNATIONAL "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL ECMA INTERNATIONAL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

      </emu-annex></div></body></html>