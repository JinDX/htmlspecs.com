<!DOCTYPE html>

<!--
  Scalable Vector Graphics (SVG) 2
  Chapter 11: Text

  Note: This document is generated from ../master/text.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="zh-hans" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>文本 — SVG 2</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Style sheets for local dev. Will be standardized in processing.
  Add attribute data-keep="" to any extra stylesheet link you do not want removed
  (or use <style>), and include it before here. -->


    <link rel="stylesheet" title="Default" href="https://www.w3.org/TR/SVG2/style/svg.css" type="text/css"
        media="screen">
    <link rel="alternate stylesheet" title="Only annotations for publication"
        href="https://www.w3.org/TR/SVG2/style/default_no_maturity.css" type="text/css" media="screen">
    <link rel="alternate stylesheet" title="No issues/annotations"
        href="https://www.w3.org/TR/SVG2/style/default_no_issues.css" type="text/css" media="screen">
    <link rel="stylesheet" href="//www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen">
    <script src="https://www.w3.org/TR/SVG2/style/link-fixup.js"></script>
</head>

<body class="chapter-text">

    <h1>第11章：文本</h1>
    <nav id="toc">
        <div class="header top"><a href="Overview.html">概述</a> . <a href="shapes.html">上一页</a> . <a
                href="embedded.html">下一页</a> . <a href="eltindex.html">元素</a> . <a href="attindex.html">属性</a> . <a
                href="propidx.html">属性</a></div>
        <h2 id="Contents" class="contents">目录</h2>
        <ol class="toc">
            <li>
                <ol class="toc">
                    <li><a href="text.html#Introduction"><span class="secno">11.1.</span> 引言</a>
                        <ol class="toc">
                            <li><a href="text.html#Definitions"><span class="secno">11.1.1.</span> 定义</a></li>
                            <li><a href="text.html#FontsGlyphs"><span class="secno">11.1.2.</span> 字体和字形</a>
                            </li>
                            <li><a href="text.html#GlyphsMetrics"><span class="secno">11.1.3.</span> 字形度量和布局</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextElement"><span class="secno">11.2.</span> ‘text’和
                            ‘tspan’元素</a>
                        <ol class="toc">
                            <li><a href="text.html#TSpanAttributes"><span class="secno">11.2.1.</span> 属性</a>
                            </li>
                            <li><a href="text.html#TSpanNotes"><span class="secno">11.2.2.</span> 关于 'x'、'y'、'dx'、'dy' 和
                                    'rotate' 的注释</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayout"><span class="secno">11.3.</span> 文本布局 – 引言</a>
                    </li>
                    <li><a href="text.html#TextLayoutContentArea"><span class="secno">11.4.</span> 文本布局 – 内容区域</a>
                        <ol class="toc">
                            <li><a href="text.html#InlineSize"><span class="secno">11.4.1.</span> ‘<span
                                        class="property">inline-size</span>’属性</a></li>
                            <li><a href="text.html#TextShapeInside"><span class="secno">11.4.2.</span> ‘<span
                                        class="property">shape-inside</span>’属性</a></li>
                            <li><a href="text.html#TextShapeSubtract"><span class="secno">11.4.3.</span> ‘<span
                                        class="property">shape-subtract</span>’属性</a></li>
                            <li><a href="text.html#TextShapeImageThreshold"><span class="secno">11.4.4.</span> ‘<span
                                        class="property">shape-image-threshold</span>’属性</a></li>
                            <li><a href="text.html#TextShapeMargin"><span class="secno">11.4.5.</span> ‘<span
                                        class="property">shape-margin</span>’属性</a></li>
                            <li><a href="text.html#TextShapePadding"><span class="secno">11.4.6.</span> ‘<span
                                        class="property">shape-padding</span>’属性</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayoutAlgorithm"><span class="secno">11.5.</span> 文本布局 –
                            算法</a></li>
                    <li><a href="text.html#TextLayoutPre"><span class="secno">11.6.</span> 预格式化文本</a>
                        <ol class="toc">
                            <li><a href="text.html#TextLayoutPreMultiline"><span class="secno">11.6.1.</span> 通过
                                    'white-space' 的多行文本</a></li>
                            <li><a href="text.html#TextLayoutPreAdjustments"><span class="secno">11.6.2.</span>
                                    重新定位字形</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayoutAuto"><span class="secno">11.7.</span> 自动换行文本</a>
                        <ol class="toc">
                            <li><a href="text.html#TextLayoutAutoNotes"><span class="secno">11.7.1.</span> 关于文本换行的注释</a>
                                <ol class="toc">
                                    <li><a href="text.html#TextLayoutAutoNotesStart"><span
                                                class="secno">11.7.1.1.</span> 第一行定位</a></li>
                                    <li><a href="text.html#TextLayoutAutoNotesBrokenLines"><span
                                                class="secno">11.7.1.2.</span> 断行</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextLayoutPath"><span class="secno">11.8.</span> 路径上的文本</a>
                        <ol class="toc">
                            <li><a href="text.html#TextPathElement"><span class="secno">11.8.1.</span> ‘textPath’元素</a>
                            </li>
                            <li><a href="text.html#TextPathAttributes"><span class="secno">11.8.2.</span> 属性</a>
                            </li>
                            <li><a href="text.html#TextpathLayoutRules"><span class="secno">11.8.3.</span> 路径上文本布局规则</a>
                            </li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextRenderingOrder"><span class="secno">11.9.</span> 文本渲染顺序</a>
                    </li>
                    <li><a href="text.html#TextProperties"><span class="secno">11.10.</span> 属性和伪元素</a>
                        <ol class="toc">
                            <li><a href="text.html#TextPropertiesSVG"><span class="secno">11.10.1.</span> SVG
                                    属性</a>
                                <ol class="toc">
                                    <li><a href="text.html#TextAnchoringProperties"><span
                                                class="secno">11.10.1.1.</span> 文本对齐，‘<span
                                                class="property">text-anchor</span>’属性</a></li>
                                    <li><a href="text.html#GlyphOrientationHorizontalProperty"><span
                                                class="secno">11.10.1.2.</span> ‘<span
                                                class="property">glyph-orientation-horizontal</span>’属性</a></li>
                                    <li><a href="text.html#GlyphOrientationVerticalProperty"><span
                                                class="secno">11.10.1.3.</span> ‘<span
                                                class="property">glyph-orientation-vertical</span>’属性</a></li>
                                    <li><a href="text.html#KerningProperty"><span class="secno">11.10.1.4.</span> ‘<span
                                                class="property">kerning</span>’属性</a></li>
                                </ol>
                            </li>
                            <li><a href="text.html#TextPropertiesAdaptions"><span class="secno">11.10.2.</span> SVG
                                    适应</a>
                                <ol class="toc">
                                    <li><a href="text.html#FontVariantProperty"><span class="secno">11.10.2.1.</span>
                                            ‘<span class="property">font-variant</span>’属性</a></li>
                                    <li><a href="text.html#LineHeightProperty"><span class="secno">11.10.2.2.</span>
                                            ‘<span class="property">line-height</span>’属性</a></li>
                                    <li><a href="text.html#WritingModeProperty"><span class="secno">11.10.2.3.</span>
                                            ‘<span class="property">writing-mode</span>’属性</a></li>
                                    <li><a href="text.html#DirectionProperty"><span class="secno">11.10.2.4.</span>
                                            ‘<span class="property">direction</span>’属性</a></li>
                                    <li><a href="text.html#DominantBaselineProperty"><span
                                                class="secno">11.10.2.5.</span> ‘<span
                                                class="property">dominant-baseline</span>’属性</a></li>
                                    <li><a href="text.html#AlignmentBaselineProperty"><span
                                                class="secno">11.10.2.6.</span> ‘<span
                                                class="property">alignment-baseline</span>’属性</a></li>
                                    <li><a href="text.html#BaselineShiftProperty"><span class="secno">11.10.2.7.</span>
                                            ‘<span class="property">baseline-shift</span>’属性</a></li>
                                    <li><a href="text.html#LetterSpacingProperty"><span class="secno">11.10.2.8.</span>
                                            ‘<span class="property">letter-spacing</span>’属性</a></li>
                                    <li><a href="text.html#WordSpacingProperty"><span class="secno">11.10.2.9.</span>
                                            ‘<span class="property">word-spacing</span>’属性</a></li>
                                    <li><a href="text.html#TextOverflowProperty"><span class="secno">11.10.2.10.</span>
                                            ‘<span class="property">text-overflow</span>’属性</a></li>
                                </ol>
                            </li>
                            <li><a href="text.html#WhiteSpace"><span class="secno">11.10.3.</span> 空白处理</a>
                                <ol class="toc">
                                    <li><a href="text.html#TextWhiteSpace"><span class="secno">11.10.3.1.</span> SVG 2
                                            优选空白处理，‘<span class="property">white-space</span>’属性</a></li>
                                    <li><a href="text.html#LegacyXMLSpace"><span class="secno">11.10.3.2.</span>
                                            传统空白处理，‘<span class="property">xml:space</span>’属性</a></li>
                                    <li><a href="text.html#DuplicateWhiteSpace"><span class="secno">11.10.3.3.</span>
                                            重复空白指令</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextDecorationProperties"><span class="secno">11.11.</span> 文本修饰</a>
                        <ol class="toc">
                            <li><a href="text.html#TextDecorationFillStroke"><span class="secno">11.11.1.</span> ‘<span
                                        class="property">text-decoration-fill</span>’和‘<span
                                        class="property">text-decoration-stroke</span>’属性</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#TextSelection"><span class="secno">11.12.</span> 文本选择和剪贴板操作</a>
                        <ol class="toc">
                            <li><a href="text.html#TextSelectionImplementationNotes"><span class="secno">11.12.1.</span>
                                    文本选择实现说明</a></li>
                        </ol>
                    </li>
                    <li><a href="text.html#DOMInterfaces"><span class="secno">11.13.</span> DOM 接口</a>
                        <ol class="toc">
                            <li><a href="text.html#InterfaceSVGTextContentElement"><span class="secno">11.13.1.</span>
                                    接口 SVGTextContentElement</a></li>
                            <li><a href="text.html#InterfaceSVGTextPositioningElement"><span
                                        class="secno">11.13.2.</span> 接口 SVGTextPositioningElement</a></li>
                            <li><a href="text.html#InterfaceSVGTextElement"><span class="secno">11.13.3.</span> 接口
                                    SVGTextElement</a></li>
                            <li><a href="text.html#InterfaceSVGTSpanElement"><span class="secno">11.13.4.</span> 接口
                                    SVGTSpanElement</a></li>
                            <li><a href="text.html#InterfaceSVGTextPathElement"><span class="secno">11.13.5.</span> 接口
                                    SVGTextPathElement</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </nav>

    <h2 id="Introduction" class="heading">11.1. 引言<a class="self-link" href="#Introduction"></a></h2>

    <p>
        要在 SVG 文档片段中渲染的文本使用 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素指定。<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素中的文本可以被渲染为：
    </p>
    <ul>
        <li>预格式化（有限的换行），</li>
        <li>自动换行（如果提供了 <a href="text.html#TermContentArea">内容区域</a>），</li>
        <li>沿路径（如果提供了 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
            元素）。</li>
    </ul>

    <p>
        <a href="text.html#TextLayout">文本布局</a>部分介绍了文本布局。接下来的部分涵盖了 <a href="text.html#TextLayoutContentArea">内容区域</a> 和
        用于在 <a href="text.html#TermContentArea">内容区域</a> 内布局文本的 <a href="text.html#TextLayoutAlgorithm">算法</a>。
        随后专门的布局规则对应于预格式化的文本 <a href="text.html#TextLayoutPre">pre-formatted</a>，
        自动换行的文本 <a href="text.html#TextLayoutAuto">auto-wrapped</a> 和沿路径的文本 <a href="text.html#TextLayoutPath">on a
            path</a>
        将在单独的部分中讨论。
    </p>

    <p class="note">
        SVG 1.1 中的文本布局规则主要在 SVG 1.1 规范中定义。这些规则在很大程度上反映了 CSS 中的规则。在 SVG 2 中，对 CSS 的依赖更加明确。在实践中，结果布局是相同的。直接依赖 CSS 规范的变化简化了
        SVG 规范，同时更明显地表明渲染代理可以使用相同的代码来渲染 HTML 和 SVG 中的文本。特别是，SVG 2 自动换行的文本基于 CSS 文本布局。
    </p>

    <p>
        SVG 的 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素像其他图形元素一样被渲染。
        因此，<a href="coords.html">坐标系统变换</a>、<a href="painting.html">绘制</a>、<a
            href="render.html#ClippingAndMasking">裁剪</a> 和
        <a href="render.html#ClippingAndMasking">遮罩</a> 特性适用于 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span> 元素，
        与适用于 <a href="shapes.html#TermShapeElement">形状</a>（如 <a href="paths.html">路径</a> 和 <a
            href="shapes.html#RectElement">矩形</a>）的方式相同。
    </p>

    <p>
        SVG 文本支持高级排版特性，包括：
    </p>
    <ul>
        <li>字体选择，</li>
        <li>使用自由、历史或风格连字，</li>
        <li>文本装饰（下划线、上划线等）。</li>
    </ul>

    <p>
        SVG 文本支持国际文本处理需求，如：
    </p>
    <ul>
        <li>文本的横向和纵向方向，</li>
        <li>从左到右或双向文本（即，交织右到左和从左到右的文本的语言，如阿拉伯语和希伯来语），</li>
        <li>
            复杂的文本布局，其中：字符与字形之间不总是一一对应，字符可能根据位置改变形状（例如阿拉伯语），
            并且字符可能根据上下文重新排序或组合（例如天城文），
        </li>
        <li>
            字形对齐到不同的基线（<em>字母</em>用于西方脚本，<em>悬挂</em>用于北印地文脚本，
            <em>表意</em>用于东亚脚本）。
        </li>
    </ul>

    <p>
        通过 <a href="struct.html#SwitchElement">根据用户的首选语言替换不同的文本字符串</a>，可以实现多语言 SVG 内容。
    </p>

    <p>
        要绘制的字符以 <a href="https://www.w3.org/TR/2008/REC-xml-20081126/#syntax">字符数据</a> 表达（[<a
            href="refs.html#ref-xml">xml</a>],
        第 2.4 节）在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素内部。因此：
    </p>

    <ul>
        <li>
            SVG 内容中的文本数据对视觉障碍者可轻松访问（参见 <a href="access.html">无障碍支持</a>）。
        </li>
        <li>
            在许多查看场景中，用户能够搜索和选择文本字符串，并将选定的文本字符串复制到系统剪贴板（参见 <a href="text.html#TextSelection">文本选择和剪贴板操作</a>）。
        </li>
        <li>
            兼容 XML 的 Web 搜索引擎将轻松找到 SVG 内容中的文本字符串，而无需额外努力与查找其他 XML 文档中的文本字符串相同。
        </li>
    </ul>

    <p>
        出于可访问性原因，建议包含在文档中的文本具有适当的语义标记以指示其功能。
        例如，
        为图表的某部分提供可见标签的文本元素应具有 <span class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>，
        并由相关组或路径元素的 <span class="attr-name">‘<a
                href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>
        属性引用。
        有关更多信息，请参见 <a href="access.html">SVG 可访问性指南</a>。
    </p>

    <h3 id="Definitions" class="heading">11.1.1. 定义<a class="self-link" href="#Definitions"></a></h3>

    <dl class="definitions">

        <dt><dfn id="TermCharacter" data-dfn-type="dfn" data-export="">字符</dfn></dt>
        <dd>
            字符是一个文本的原子单位，定义在XML中
            [<a href="https://www.w3.org/TR/2008/REC-xml-20081126/">XML</a>]。
            <p class="note">
                本质上是一个Unicode代码点。
                字符可以是控制指令（如制表符、回车或换行），
                可呈现的标记（字母、数字、标点符号或其他符号），
                或修饰符（如组合音调）。
            </p>
        </dd>

        <dt><dfn id="TermAddressableCharacter" data-dfn-type="dfn" data-export="">可寻址字符</dfn></dt>
        <dd>
            一个<a href="text.html#TermCharacter">字符</a>，可以通过文本定位
            属性和SVG DOM文本方法进行寻址。

            在布局过程中被丢弃的字符，如
            <a href="https://www.w3.org/TR/css-text-3/#white-space-phase-1">折叠的
                空格字符</a>不可寻址，带有值为<span class="prop-value">none</span>的
            <a class="property" href="render.html#VisibilityControl">display</a>属性的元素内的字符也不可寻址。

            可寻址字符通过其在UTF-16代码单元中的索引进行寻址
            （因此，单个Unicode代码点大于U+FFFF将映射为两个可寻址字符，因为
            一个UTF-16代码单元由16位组成）。

            索引在应用任何<a class="property"
                href="https://www.w3.org/TR/CSS21/text.html#propdef-text-transform">text-transform</a>转换之前确定，
            如在<a class="idlinterface"
                href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a>接口中所描述的那样。

            <p class="note">
                如果将来引入对CSS生成内容文本的支持，
                它将包括在可寻址字符数组中。
            </p>
        </dd>

        <dt id="TermTypographicCharacterUnit">排版字符</dt>
        <dd>
            一种书写系统的单位—例如拉丁字母（包括其变音符号）、韩文音节、汉字、
            缅甸音节集—在特定排版操作（换行、首字母效果、字距调整、对齐、
            垂直排列等）方面是不可分割的。有关规范性定义和此定义与Unicode字形集的关系，请参见
            <a href="https://drafts.csswg.org/css-text-3/#typographic-character-unit">CSS
                文本模块第3层</a>，
            ([<a href="refs.html#ref-css-text-3">css-text-3</a>] )。
        </dd>

        <dt id="TermFont">字体</dt>
        <dd>
            字体表示一个有组织的<a href="text.html#TermGlyph">字形</a>集合，
            其中各种字形表示将共享特定的外观或样式。
        </dd>

        <dt id="TermGlyph">字形</dt>
        <dd>
            字形表示在<a href="text.html#TermFont">字体</a>中渲染内容的单位。
            通常，要绘制的字符与相应的字形之间存在一对一的对应关系（例如，通常
            字符"A"使用单个字形呈现），但有时多个字形用于渲染单个字符
            （例如，带重音的字符）或单个字形可以用于渲染
            多个字符（例如，连字）。通常，字形由一个或多个<a href="shapes.html#TermShapeElement">形状</a>定义，例如
            <a href="paths.html">路径</a>，可能还有其他
            信息，例如帮助字体引擎在小尺寸下生成清晰文本的渲染提示。
        </dd>

        <dt><dfn id="TermTextContentElement" data-dfn-type="dfn" data-export="">文本内容元素</dfn></dt>
        <dd>
            文本内容元素是一个SVG元素，导致文本
            字符串被渲染到画布上。SVG文本内容
            元素有：
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>、<span
                class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>和<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>。
        </dd>

        <dt id="TermTextContentChildElement">文本内容子元素</dt>
        <dd>
            文本内容子元素是一个<a href="text.html#TermTextContentElement">文本内容元素</a>
            ，允许作为另一个<a href="text.html#TermTextContentElement">文本内容元素</a>的后代。在SVG中，文本内容子元素有：
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>和<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>。
        </dd>

        <dt id="TermTextContentBlockElement">文本内容块元素</dt>
        <dd>
            文本内容块元素是一个<a href="text.html#TermTextContentElement">文本内容元素</a>
            ，作为文本单位的独立元素，并且
            可选地包含某些子<a href="text.html#TermTextContentElement">文本内容元素</a>（例如
            <a href="text.html#TextElement"><span class="element-name">‘tspan’</span></a>）。
            <!--SVG Tiny 1.2定义了两个文本内容块元素：
	<a href="text.html#TextElement"><span class="element-name">'text'</span></a>
	and
	<a href="text.html#TextAreaElement"><span class="element-name">'textArea'</span></a>-->
            SVG 2定义了一个文本内容块元素：<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>。
        </dd>

        <dt id="TermContentArea">内容区域</dt>
        <dd>
            文本通常布局的区域。这等同于
            <a href="https://www.w3.org/TR/css3-exclusions/#content-area">CSS
                内容区域</a>。文本布局实际发生的区域可能因填充和/或排除而变小。
            <!-- CSS 2参考: href="https://www.w3.org/TR/CSS2/box.html#box-dimensions" -->
        </dd>

        <dt id="TermWrappingContext">换行上下文</dt>
        <dd>
            在文本布局过程中要排除的一个或多个区域（形状）。这与
            <a href="https://www.w3.org/TR/css3-exclusions/#wrapping-context">
                CSS换行上下文</a>相同。
        </dd>

        <dt id="TermWrappingArea">换行区域</dt>
        <dd>
            在减去任何填充或排除区域后，文本布局的区域（<a href="text.html#TermWrappingContext">换行上下文</a>）。这与
            <a href="https://www.w3.org/TR/css3-exclusions/#wrapping-area">
                CSS换行区域</a>相同。
        </dd>

        <dt id="TermLineBox">行框</dt>
        <dd>
            包含用于布局单行文本的所有内容的矩形区域。
            这与
            <a href="https://www.w3.org/TR/CSS2/visuren.html#line-box">CSS行框</a>相同。
            <p class="annotation">
                尽管各种CSS 3文本布局规范使用此术语，
                但目前没有建立正式定义。
                因此，链接至CSS 2.1，
                并且<a href="https://github.com/w3c/csswg-drafts/issues/363">已向CSS工作组提交了一个问题</a>。
            </p>
        </dd>

        <!-- 以下两个术语来自CSS书写模式3，为SVG简化。-->
        <dt id="TermInlineBaseDirection">行内基本方向</dt>
        <dd>
            内容在一行或一部分行文本中排列的主要方向。
            它定义了一行或一部分行文本的<q>开始</q>和<q>结束</q>两侧（例如与<a class="property"
                href="text.html#TextAnchorProperty">text-anchor</a>属性的应用相关）。它由<a class="property"
                href="text.html#DirectionProperty">direction</a>属性决定。
            （注意：文本行中的字符排列主要由Unicode双向算法控制，而不是行内基本方向。）
        </dd>

        <dt id="TermBlockFlowDirection">块流方向</dt>
        <dd>
            <a href="text.html#TermLineBox">行框</a>堆叠的方向。由<a class="property"
                href="text.html#WritingModeProperty">writing-mode</a>属性决定。
        </dd>

        <dt id="TermAlignmentPoint">对齐点</dt>
        <dd>
            字体字符上应与<a href="text.html#TermCurrentTextPosition">当前文本位置</a>对齐的点。由字形单元指标决定，可能取决于脚本和<a
                href="text.html#TermInlineBaseDirection">行内基本方向</a>。
        </dd>

        <dt id="TermCurrentTextPosition">当前文本位置</dt>
        <dd>
            在当前用户空间中，下一个要渲染的字体字符的<a href="text.html#TermAlignmentPoint">对齐点</a>应放置的位置。
        </dd>

        <dt id="TermTextChunk">文本块</dt>
        <dd>
            一个独立的文本块，所有字符都一起定位。每次新的绝对定位调整
            （由于<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>或
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性，或
            强制换行）都会创建一个新的<a href="text.html#TermTextChunk">文本块</a>。连字替代和双向重排仅在<a
                href="text.html#TermTextChunk">文本块</a>内发生。<a href="text.html#TermTextChunk">文本块</a>仅与预格式化文本相关。
        </dd>

        <dt id="TermWhiteSpaceCharacter">空格字符</dt>
        <dd>以下字符被视为空格字符：
            U+0009 制表符，
            U+000C 换页符（FF），
            U+000D 回车符（CR），
            U+000A 换行符（LF）和
            U+0020 空格。
        </dd>

    </dl>

    <h3 id="FontsGlyphs" class="heading">11.1.2. 字体和字形<a class="self-link" href="#FontsGlyphs"></a></h3>

    <p>
        字体由一系列字形以及其他必要信息（统称为字体表）组成，用于在某种视觉媒介上呈现字符。这些字形集合和字体表的组合称为<em>字体数据</em>。
    </p>

    <p>
        字体可能提供替换和定位表，格式化程序（文本形状器）可以利用这些表重新排序、组合和定位一系列字形，以形成一个或多个复合字形。组合可能简单如连字，或复杂如一个印地文音节，通常通过重新排序结合多个辅音和元音字形。这些表可能依赖于语言，允许使用语言适当的字母形式。
    </p>

    <p>
        当一个字形，无论简单或复合，代表一个不可分割的排版单位时，它被称为<a href="text.html#TermTypographicCharacterUnit">排版字符</a>。
    </p>

    <p>
        连字是高级文本布局的重要特性。有些连字是任意的，而其他（例如阿拉伯语）是必需的。以下明确规则适用于连字形成：
    </p>

    <ul>
        <li>
            <p>
                当字符位于不同的DOM文本节点时，不应启用连字形成；
                因此，由标记分隔的字符不应使用连字。
            </p>
        </li>
        <li>
            <p>
                当字符位于不同的<a href="text.html#TermTextChunk">文本块</a>时，不应启用连字形成。
            </p>
        </li>
        <li>
            <p>
                当两个字符之间的间距与默认间距不相同时（例如，当<a class="property"
                    href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>有非默认值，或<a
                    class="property" href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>的值为
                <span class="propvalue">justify</span>且<a class="property"
                    href="https://www.w3.org/TR/css-text-3/#text-justify-property">text-justify</a>
                的值为<span class="propvalue">distribute</span>时），不应使用任意连字。
                （见<a href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">CSS
                    文本模块第3级</a>，
                ([<a href="refs.html#ref-css-text-3">css-text-3</a>]）。
            </p>
            <p>
                SVG属性如<span class="attr-name">‘<a
                        href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、<span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>，
                和<span class="attr-name">‘<a
                        href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>（在<span
                    class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>）可以
                重新定位<a href="text.html#TermTypographicCharacterUnit">排版字符</a>，而不打破
                任意连字。
                如果不希望使用任意连字，可以通过使用<a class="property"
                    href="https://www.w3.org/TR/css-fonts-3/#font-variant-ligatures-prop">font-variant-ligatures</a>
                属性将其关闭。
            </p>
            <p>
                对于OpenType字体，任意连字包括由liga、clig、dlig、hlig和cala特性启用的那些；所需的连字在rlig特性中找到。
            </p>
        </li>
    </ul>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要求：</th>
                <td>包含对Web开放字体格式（WOFF）的明确支持。</td>
            </tr>
            <tr>
                <th>决议：</th>
                <td><a href="https://www.w3.org/2011/03/01-svg-minutes.html#item03">我们将在SVG 2中强制要求支持WOFF。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>允许访问完整的OpenType功能，以支持国际化和高级排版。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Chris（无行动）</td>
            </tr>
            <tr>
                <th>状态：</th>
                <td>完成</td>
            </tr>
        </table>
    </div>

    <p>
        正确的文本渲染可能依赖于使用与创作时相同的字体。因此，SVG要求支持可下载字体，正如在
        <a href="https://www.w3.org/TR/css-fonts-3/#font-resources">字体资源</a>部分定义的那样，
        <a href="https://www.w3.org/TR/css-fonts-3/">CSS字体模块</a>。特别是，需要支持Web开放字体格式
        [<a href="refs.html#ref-woff">WOFF</a>]。
    </p>

    <p class="note">
        SVG 2的新功能，WOFF允许作者提供渲染其内容所需的字体。这包括确保字体具有适当的OpenType表，以支持复杂脚本、
        任意连字、装饰、旧式数字等。WOFF还允许字体被压缩、子集化，并包含许可信息。
    </p>

    <h3 id="GlyphsMetrics" class="heading">11.1.3. 字形度量和布局<a class="self-link" href="#GlyphsMetrics"></a></h3>

    <p>
        字形的选择和定位通常根据CSS规则进行。然而，在某些情况下，SVG中文本的最终布局需要了解单个字形的几何属性。
    </p>

    <p>
        几何字体特性在基于EM框的坐标系统中表示。（EM是字形高度的相对度量。）一个1 EM高和1 EM宽的框称为<em>设计空间</em>。通过将EM细分为多个<em>每em单位</em>来赋予该空间几何坐标。
    </p>

    <p class="note">
        每em单位是字体特性。每em单位的典型值为1000或2048。
    </p>

    <p>
        EM框的坐标空间称为<em>设计空间坐标系统</em>。对于可缩放字体，用于绘制字形的曲线和线条使用该坐标系统表示。
    </p>

    <p class="note">
        通常，该坐标系统中的(0,0)点位于EM框的左边缘，而不在左下角。罗马大写字母底部的Y坐标通常为零。小写罗马字母的下行部分具有负坐标值。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/font_embox.svg"
            alt="一个'M'在EM框内显示坐标系统、基线、上升和下降。">
        <p class="caption">
            一个'M'在Em框（蓝色方块）内。'M'坐在基线（蓝线）上。坐标系统的原点由小黑圈表示。
        </p>
    </div>

    <p>
        SVG假设字体表将提供至少三个字体特性：上升、下降和一组基线表。上升是从字体的(0,0)点到EM框顶部的距离；下降是从字体的(0,0)点到EM框底部的距离。基线表将在下面解释。
    </p>

    <p class="note">
        在OpenType字体中（[<a
            href="refs.html#ref-opentype">OPENTYPE</a>]），对于水平书写模式，上升和下降由OS/2表中的sTypoAscender和sTypoDescender条目给出。对于垂直书写模式，下降（在这种情况下，从(0,0)点到字形左边缘的距离）通常为零，因为(0,0)点位于左边缘。垂直书写模式的上升为1
        em或由OpenType基础表中的表意文字顶部基线值指定。
    </p>

    <p>
        字形相对于每个字形上的特定点进行定位，该点称为<a href="text.html#TermAlignmentPoint">对齐点</a>。对于水平书写模式，字形的<a
            href="text.html#TermAlignmentPoint">对齐点</a>是垂直对齐的，而对于垂直书写模式，它们是水平对齐的。<a
            href="text.html#TermAlignmentPoint">对齐点</a>的位置取决于书写系统。例如，西方字形在大写字母的底部对齐，北印地文字形在字形顶部附近的水平笔画顶部对齐，远东字形则在字形的底部或中心对齐。
    </p>

    <p>
        在一个书写系统内和在具有单一字体大小的文本行内，对齐点的序列定义了一个几何线，称为<dfn id="TermBaseline" data-dfn-type="dfn"
            data-export="">基线</dfn>。西方及大多数其他字母和音节字形对齐到“字母”基线，北印地文字形对齐到“悬挂”基线，而远东字形对齐到“表意”基线。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/font_baseline.svg" alt="三种不同书写系统中的基线示例。">
        <p class="caption">
            三种不同书写系统中的基线示例（红线）。从左到右：字母、悬挂、表意。EM框在表意书写系统中以蓝色显示。
        </p>
    </div>

    <p>
        随着字形沿基线顺序放置，字形的<a href="text.html#TermAlignmentPoint">对齐点</a>通常位于<a
            href="text.html#TermCurrentTextPosition">当前文本位置</a>（一些属性，例如<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>可能会改变定位）。每放置一个字形后，<a
            href="text.html#TermCurrentTextPosition">当前文本位置</a>将通过字形的<em>推进</em>值（通常是水平文本的宽度或垂直文本的高度）进行推进，同时对字距或其他间距调整以及预格式化或自动换行文本中的新行进行任何修正。当<a
            class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>值为'middle'或'end'时，初始和最终的当前文本位置用于对齐。字形的推进在沿路径放置文本时是必需的。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/font_metrics.svg" alt="三种不同书写系统中的字体度量示例。">
        <p class="caption">
            字体度量的示例。蓝色框显示三个字形的几何框。标记的小圆圈显示在字形放置之前的<a
                href="text.html#TermCurrentTextPosition">当前文本位置</a>。小方框显示放置最后一个字形后的最终<a
                href="text.html#TermCurrentTextPosition">当前文本位置</a>。请注意，由于字距调整，字母'a'的框的左侧与字母'V'的框的右侧未对齐。
        </p>
    </div>

    <p>
        如果字形没有提供与当前字形方向对应的明确推进值，则应使用适当的近似值。对于垂直文本，建议的近似值是<em>em</em>大小。
    </p>

    <p>
        初始<a href="text.html#TermCurrentTextPosition">当前文本位置</a>由<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>和<span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性在<span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>元素或第一个渲染的<span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>元素（用于预格式化文本）或当<a
            href="text.html#TermContentArea">内容区域</a>由<a class="property"
            href="text.html#InlineSizeProperty">inline-size</a>属性确定时的自动换行文本来建立。对于其他自动换行文本，初始<a
            href="text.html#TermCurrentTextPosition">当前文本位置</a>由应用CSS换行算法后第一个渲染字形的位置决定。
    </p>

    <p>
        <dfn id="TermBaselineTable" data-dfn-type="dfn"
            data-export="">基线表</dfn>指定设计空间坐标系统中一个或多个基线的位置。基线表的功能是便于在同一文本行中混合不同书写系统时的对齐。由于所需的相对对齐可能取决于行（或块）中主导书写系统，因此每种书写系统可能有不同的基线表。此外，水平和垂直书写模式需要不同的对齐位置。因此，字体可能有一组基线表：通常，水平书写模式有一个或多个，垂直书写模式有零个或多个。
    </p>

    <p class="note">
        一些字体可能没有基线表的值。当给定字体不提供基线表时，建议在<a href="https://www.w3.org/TR/css-inline-3/#baseline-synthesis-fonts">CSS Inline
            Layout Module Level 3</a> [css-inline-3]中使用启发式方法来近似基线表。
    </p>

    <p>
        当在一段文本的中间指定不同的字体（或字体大小变化）时，<dfn id="TermDominantBaseline" data-dfn-type="dfn"
            data-export="">主导基线</dfn>决定用于将新字体（新大小）中的字形与先前字体对齐的基线。<a class="property"
            href="text.html#DominantBaselineProperty">dominant-baseline</a>属性用于设置主导基线。
    </p>

    <p>
        对象相对于其父级的对齐由<dfn id="TermAlignmentBaseline" data-dfn-type="dfn"
            data-export="">对齐基线</dfn>确定。它通常与主导基线相同，但可以通过使用首选的简写<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>属性或长写形式<a
            class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a>选择其他基线。
    </p>

    <p>
        主导基线可以临时移动（根据需要用于上标或下标），通过使用首选的简写<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>属性或长写形式<a
            class="property" href="text.html#BaselineShiftProperty">baseline-shift</a>属性。请注意，移动可以嵌套，每次移动会增加到之前的移动中。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/vertical_align.svg"
            alt="使用'vertical-align'属性的示例。左侧显示'[[z]]'，其中内括号较小。右侧显示'x2'，其中'2'为上标。">
        <p class="caption">
            使用'vertical-align'属性的示例。

            左侧：对包含'[z]'的<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>应用'vertical-align:mathematical'（'alignment-baseline:mathematical'）。浅蓝色线显示数学基线的位置。

            右侧：对包含'2'的<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>应用'vertical-align:super'（'baseline-shift:super'）。浅蓝色线表示基线的移动。
        </p>
    </div>

    <p>
        SVG进一步假设，对于字体数据中的每个字形，有两个宽度值、两个对齐基线和两个对齐点，一个用于水平书写模式，另一个用于垂直书写模式。（尽管指定为宽度，但对于垂直书写模式，宽度在垂直方向上使用。）对齐点的<a
            href="text.html#TermInlineBaseDirection">内联基线方向</a>位置位于字形的起始边缘。
    </p>

    <p>
        关于基线的更多信息可以在<a href="https://www.w3.org/TR/css-inline-3/#line-height">CSS Inline Layout Module Level
            3</a>规范中找到。[<a href="refs.html#ref-css-inline-3">css-inline-3</a>]（另见：<a
            href="https://www.w3.org/TR/css3-writing-modes/#intro-baselines">CSS Writing Modes Level 3</a>规范。[<a
            href="refs.html#ref-css-writing-modes-3">css-writing-modes-3</a>]）
    </p>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 需求：</th>
                <td>支持文本对齐到不同的基线。</td>
            </tr>
            <tr>
                <th>解决方案：</th>
                <td><a href="https://www.w3.org/2012/03/15-svg-irc#T21-07-21">SVG 2将支持字形对齐到不同的基线，可能通过使用现有或改进的CSS属性。</a>
                </td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>允许水平文本中的字形具有不同的垂直对齐，以实现风格效果。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Chris（无行动）</td>
            </tr>
            <tr>
                <th>状态：</th>
                <td>完成</td>
            </tr>
        </table>
    </div>

    <p>
        一行文本在<a href="text.html#TermLineBox">行框</a>内布局。多行文本是通过堆叠这些框产生的。<a href="text.html#TermLineBox">行框</a>的高度通过找到应用<a
            class="property" href="text.html#LineHeightProperty">line-height</a>属性后所有字形的最大上升和最大下降来确定。<a
            href="text.html#TermLineBox">行框</a>的宽度通常是包含文本块的宽度。在SVG中，当包含文本块没有固定几何形状（如预格式化文本）时，<a
            href="text.html#TermLineBox">行框</a>紧密包裹框内的字形框。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/line_box.svg"
            alt="句子'A big word.'，其中'big'使用较大的字体。">
        <p class="caption">
            确定<a href="text.html#TermLineBox">行框</a>高度的示例。

            首先，每个字形框（小浅蓝框）根据<a class="property" href="text.html#LineHeightProperty">line-height</a>属性垂直延伸。在这种情况下，<a
                class="property" href="text.html#LineHeightProperty">line-height</a>属性为125%。较大的字形的<a class="property"
                href="https://www.w3.org/TR/css-fonts-3/#font-size-prop">font-size</a>为96px，因此其额外高度为24px（96px的25%）。额外高度均匀分配在基线上下，形成红色框。（为清晰起见，所有在同一行内的字形已被组合在一起）。最终的<a
                href="text.html#TermLineBox">行框</a>（大型浅蓝框）是通过使用红框的最大扩展来找到的。
        </p>
    </div>

    <p>
        为了支持各种国际书写系统，<a href="text.html#TermLineBox">行框</a>可以水平或垂直定向。
        在垂直<a href="text.html#TermLineBox">行框</a>中，文本从上到下流动。
        在水平<a href="text.html#TermLineBox">行框</a>中，文本可以从左到右流动（例如，现代拉丁脚本），从右到左流动（例如，希伯来语或阿拉伯语），或混合左到右和右到左（双向文本）。
    </p>

    <p>
        双向文本的处理模型如下：
    </p>
    <ul>
        <li>
            用户代理处理以<em>逻辑顺序</em>提供的字符（即字符在原始文档中的出现顺序）。
        </li>
        <li>
            用户代理排除未渲染的元素并<a href="#WhiteSpace">合并空白</a>。
        </li>
        <li>
            用户代理确定在每个独立块内应该应用Unicode双向算法的独立块集合。
            <ul>
                <li>
                    每个<a href="text.html#TermTextChunk">文本块</a>表示一个独立的文本块。
                </li>
                <li>
                    由于处理<a class="property"
                        href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>或已弃用的
                    <a class="property" href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>
                    属性而导致的字形方向变化，将开始新的独立文本块以用于双向处理。
                </li>
            </ul>
        </li>
        <li>
            在每个独立文本块上处理Unicode双向算法及属性<a class="property" href="text.html#DirectionProperty">direction</a>和
            <a class="property" href="https://www.w3.org/TR/css-writing-modes-3/#unicode-bidi">unicode-bidi</a>后，
            用户代理将得到一个可能被重新排序的字符列表，这些字符现在以从左到右的渲染顺序排列。与字符重新排序同时进行的是，<span class="attr-name">‘<a
                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>以及<span
                class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            属性在<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>和<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>元素上也被重新排序，
            以保持字符与属性值之间的原始对应关系。
        </li>
    </ul>
    <p>
        虽然字距调整或连字处理可能是字体特定的，但首选模型是字距调整和连字处理在字符重新排序后发生。
    </p>

    <p>
        <a href="text.html#TermLineBox">行框</a>的方向以及它们堆叠的方向（<a href="text.html#TermBlockFlowDirection">块流方向</a>）由<a
            class="property" href="text.html#WritingModeProperty">writing-mode</a>属性决定。对于水平文本（<a class="property"
            href="text.html#WritingModeProperty">writing-mode</a>值
        <span class="prop-value">horizontal-tb</span>），<a href="text.html#TermLineBox">行框</a>
        从上到下堆叠。对于垂直文本，<a href="text.html#TermLineBox">行框</a>
        从右到左堆叠（<a class="property" href="text.html#WritingModeProperty">writing-mode</a>值
        <span class="prop-value">vertical-rl</span>）或从左到右堆叠
        （<a class="property" href="text.html#WritingModeProperty">writing-mode</a>值
        <span class="prop-value">vertical-lr</span>）。
    </p>

    <h2 id="TextElement" class="heading">11.2. <span class="element-name">‘text’</span> 和
        <span class="element-name">‘tspan’</span> 元素<a class="self-link" href="#TextElement"></a>
    </h2>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素定义了一个
        包含文本的图形元素。<span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素
        在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 或另一个
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素内，允许
        切换样式和/或调整渲染文本在 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素内相对于父元素的位置。
    </p>

    <p>
        在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和 <span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素中的字符数据，以及相关属性和特性，还有字体内部的字符到字形映射表，定义了
        要渲染的字形。<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和 <span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素上的属性和特性指示
        诸如书写方向、字体规范和绘制属性等内容，这些属性描述了如何准确渲染字符。本章的后续部分描述了
        相关的文本特定属性和特性。
    </p>

    <p>
        由于 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和 <span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素使用
        与其他图形元素相同的渲染方法，因此所有适用于
        <a href="painting.html">图形</a> 特性也适用于
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和 <span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素，
        除了 <a href="painting.html#Markers">标记</a>。
        此外，
        <a href="coords.html">坐标系统变换</a>、
        <a href="render.html#ClippingAndMasking">裁剪</a>和
        <a href="render.html#ClippingAndMasking">遮罩</a> 可以应用于
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素整体。
    </p>

    <p class="note">
        在 CSS 术语中，<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素作为块级元素。<span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>、<span
            class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 和 <span
            class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span>
        元素从 <a href="text.html#TermTextContentElement">文本内容元素</a> 派生，作为内联元素。
    </p>

    <p id="ObjectBoundingBoxUnitsTextObjects">
        可以对文本应用渐变、图案、裁剪路径、遮罩或滤镜。当这些功能应用于文本时，使用关键字 <span class="attr-value">'objectBoundingBox'</span>
        （见 <a href="coords.html#ObjectBoundingBox">对象边界框单位</a>）来指定相对于“对象边界框”的图形效果，则对象边界框单位相对于整个 <span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素计算，即使在同一个 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素内，对不同的
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 或 <span
            class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素应用不同的效果时也是如此。
    </p>

    <p>
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素在初始 <a
            href="text.html#TermCurrentTextPosition">当前文本位置</a> 渲染其第一个字形（在
        双向重新排序后）（可能会因 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性或 <a class="property"
            href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a> 属性的值而进行调整）。
        对于预格式化文本和自动换行文本，其中 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性决定了 <a
            class="text.html#TermContentArea">内容区域</a>，初始 <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 由
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 值确定，后者属于包含第一个渲染字符的
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 或 <span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素。

        对于形状中的自动换行文本或路径上的文本，请参见 <a href="text.html#TextLayoutAuto">自动换行文本</a> 或
        <a href="text.html#TextLayoutPath">路径上的文本</a> 部分，分别确定初始 <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。

        在渲染与给定字符对应的字形后，当前文本位置将更新为下一个字符。在最简单的情况下，新的当前文本位置为
        先前的当前文本位置加上字形的推进值（水平或垂直）。有关字形放置和字形推进的描述，请参见 <a href="text.html#TextLayoutAlgorithm">文本布局</a>。
    </p>

    <div class="example">
        <p>
            文本字符串 <q>Hello, out there!</q> 使用 Verdana 字体家族渲染到画布上，字形填充为蓝色。
        </p>
        <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
     xmlns="http://www.w3.org/2000/svg" version="1.1">

  &lt;text x="250" y="180"
        font-family="Verdana" font-size="64" fill="blue" >
    Hello, out there!
  &lt;/text>

&lt;/svg></pre>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text01.svg" alt="显示蓝色文本的图像。">
        </div>
    </div>

    <div class="example">
        <p>
            使用 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 来
            改变单词 <q>not</q> 的样式。
        </p>
        <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
     xmlns="http://www.w3.org/2000/svg" version="1.1">

  &lt;g font-family="Verdana" font-size="64" >
    &lt;text x="160" y="180" fill="blue" >
      You are
      &lt;tspan font-weight="bold" fill="red" >not&lt;/tspan>
      a banana.
    &lt;/text>
  &lt;/g>

&lt;/svg></pre>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/tspan01.svg" alt="蓝色文本，除了单词 'not' 是红色。">
        </div>
    </div>

    <div class="example">
        <p>
            两个 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素通过
            <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span
                class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
            属性在水平和垂直方向上重新定位。由于所有文本都在一个单一的
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素内，用户
            将能够在支持 <a href="text.html#TextSelection">文本选择和
                剪贴板操作</a> 的用户代理中选择所有文本并将其复制到系统剪贴板。
        </p>
        <pre>&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
     xmlns="http://www.w3.org/2000/svg" version="1.1">

  &lt;g font-family="Verdana" font-size="64" >
    &lt;text x="100" y="180" fill="blue" >
      But you
      &lt;tspan dx="2em" dy="-50" font-weight="bold" fill="red" >
        are
      &lt;/tspan>
      &lt;tspan dy="100">
        a peach!
      &lt;/tspan>
    &lt;/text>
  &lt;/g>

&lt;/svg></pre>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/tspan02.svg" alt="带有多个移动单词的句子。">
        </div>
    </div>

    <div class="element-summary">
        <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                    id="elementdef-text">text</dfn>’</span></div>
        <dl>
            <dt>类别：</dt>
            <dd><a href="struct.html#TermGraphicsElement">图形元素</a>、<a
                    href="render.html#TermRenderableElement">可渲染元素</a>、<a
                    href="text.html#TermTextContentElement">文本内容元素</a></dd>
            <dt>内容模型：</dt>
            <dd>以下元素或字符数据的任意数量，顺序不限：<ul class="no-bullets">
                    <li><a href="https://svgwg.org/specs/animations/#TermAnimationElement">动画元素</a><span
                            class="expanding"> — <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#AnimateMotionElement"><span>animateMotion</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#AnimateTransformElement"><span>animateTransform</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#DiscardElement"><span>discard</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermDescriptiveElement">描述性元素</a><span class="expanding"> —
                            <span class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="struct.html#TitleElement"><span>title</span></a>’</span>、<span
                                class="element-name">‘<a
                                    href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                    <li><a href="painting.html#TermPaintServerElement">绘画服务器元素</a><span class="expanding">
                            — <span class="element-name">‘<a
                                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>、
                            <span class="element-name">‘<a
                                    href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                    <li><a href="text.html#TermTextContentChildElement">文本内容子元素</a><span class="expanding"> — <span
                                class="element-name">‘<a
                                    href="text.html#TextElement"><span>tspan</span></a>’</span>、<span
                                class="element-name">‘<a
                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span></span></li>
                </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>、 <span
                    class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a></span>、
                <span class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>、 <span
                    class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a></span>、 <span
                    class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>、 <span
                    class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>
            </dd>
            <dt>属性：</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a href="struct.html#TermARIAAttribute">aria 属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-activedescendant"><span>aria-activedescendant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-atomic"><span>aria-atomic</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-autocomplete"><span>aria-autocomplete</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-busy"><span>aria-busy</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-checked"><span>aria-checked</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colcount"><span>aria-colcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colindex"><span>aria-colindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colspan"><span>aria-colspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-controls"><span>aria-controls</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-current"><span>aria-current</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span>aria-describedby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-details"><span>aria-details</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-disabled"><span>aria-disabled</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-dropeffect"><span>aria-dropeffect</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-errormessage"><span>aria-errormessage</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-expanded"><span>aria-expanded</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-flowto"><span>aria-flowto</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-grabbed"><span>aria-grabbed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup"><span>aria-haspopup</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-hidden"><span>aria-hidden</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-invalid"><span>aria-invalid</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><span>aria-keyshortcuts</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-label"><span>aria-label</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-level"><span>aria-level</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-live"><span>aria-live</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-modal"><span>aria-modal</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiline"><span>aria-multiline</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiselectable"><span>aria-multiselectable</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-orientation"><span>aria-orientation</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-owns"><span>aria-owns</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-placeholder"><span>aria-placeholder</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-posinset"><span>aria-posinset</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span>aria-pressed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-readonly"><span>aria-readonly</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-relevant"><span>aria-relevant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-required"><span>aria-required</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription"><span>aria-roledescription</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowcount"><span>aria-rowcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowindex"><span>aria-rowindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowspan"><span>aria-rowspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-selected"><span>aria-selected</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-setsize"><span>aria-setsize</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-sort"><span>aria-sort</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemax"><span>aria-valuemax</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemin"><span>aria-valuemin</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuenow"><span>aria-valuenow</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuetext"><span>aria-valuetext</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#RoleAttribute"><span>role</span></a>’</span></span></li>
                    <li><a href="struct.html#TermConditionalProcessingAttribute">条件处理属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="struct.html#RequiredExtensionsAttribute"><span>requiredExtensions</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#SystemLanguageAttribute"><span>systemLanguage</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermCoreAttribute">核心属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>,
                            <span class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>, <span
                                class="attr-name">‘<a href="styling.html#ClassAttribute"><span>class</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">全局事件属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">文档元素事件属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
                    <li><a href="interact.html#EventAttributes">图形事件属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusin</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusout</span></a>’</span></span></li>
                    <li><a href="styling.html#TermPresentationAttribute">表现属性</a><span class="expanding"> — </span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span></li>
                </ul>
            </dd>
            <dt>DOM 接口：</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a class="idlinterface" href="text.html#InterfaceSVGTextElement">SVGTextElement</a></li>
                </ul>
            </dd>
        </dl>
    </div>
    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要求：</th>
                <td>允许在 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
                    上进行变换。</td>
            </tr>
            <tr>
                <th>解决方案：</th>
                <td><a href="https://www.w3.org/2011/12/01-svg-irc#T21-02-34">SVG 2 将允许在 <span
                            class="element-name">‘tspan’</span> 上进行变换。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>与已经允许变换的其他元素（如 <span class="element-name">‘<a
                            href="linking.html#AElement"><span>a</span></a>’</span>）保持一致。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Cameron（无行动）</td>
            </tr>
            <tr>
                <th>状态：</th>
                <td>完成</td>
            </tr>
        </table>
        <p>
            此决定已被推翻。请参阅
            <a href="https://github.com/w3c/svgwg/issues/210">GitHub 问题
                210</a>。CSS/HTML 不允许在行内元素上进行变换，
            并且没有渲染器支持在行内（在 SVG 和 HTML 中）对 <span class="element-name">‘<a
                    href="linking.html#AElement"><span>a</span></a>’</span> 元素进行变换。
        </p>
    </div>

    <div class="element-summary">
        <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                    id="elementdef-tspan">tspan</dfn>’</span></div>
        <dl>
            <dt>类别：</dt>
            <dd><a href="struct.html#TermGraphicsElement">图形元素</a>，<a
                    href="render.html#TermRenderableElement">可渲染元素</a>，<a
                    href="text.html#TermTextContentElement">文本内容元素</a>，<a
                    href="text.html#TermTextContentChildElement">文本内容子元素</a></dd>
            <dt>内容模型：</dt>
            <dd>可以是以下元素或字符数据的任意数量，顺序不限：<ul class="no-bullets">
                    <li><a href="struct.html#TermDescriptiveElement">描述性元素</a><span class="expanding"> —
                            <span class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>，
                            <span class="element-name">‘<a
                                    href="struct.html#TitleElement"><span>title</span></a>’</span>，<span
                                class="element-name">‘<a
                                    href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                    <li><a href="painting.html#TermPaintServerElement">绘画服务器元素</a><span class="expanding">
                            — <span class="element-name">‘<a
                                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>，
                            <span class="element-name">‘<a
                                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>，
                            <span class="element-name">‘<a
                                    href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>，<span
                    class="element-name"><a
                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a></span>，<span
                    class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>，<span
                    class="element-name"><a
                        href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a></span>，<span
                    class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>，<span
                    class="element-name"><a href="text.html#TextElement"><span>tspan</span></a></span></dd>
            <dt>属性：</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a href="struct.html#TermARIAAttribute">aria 属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-activedescendant"><span>aria-activedescendant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-atomic"><span>aria-atomic</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-autocomplete"><span>aria-autocomplete</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-busy"><span>aria-busy</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-checked"><span>aria-checked</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colcount"><span>aria-colcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colindex"><span>aria-colindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colspan"><span>aria-colspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-controls"><span>aria-controls</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-current"><span>aria-current</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span>aria-describedby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-details"><span>aria-details</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-disabled"><span>aria-disabled</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-dropeffect"><span>aria-dropeffect</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-errormessage"><span>aria-errormessage</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-expanded"><span>aria-expanded</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-flowto"><span>aria-flowto</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-grabbed"><span>aria-grabbed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup"><span>aria-haspopup</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-hidden"><span>aria-hidden</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-invalid"><span>aria-invalid</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><span>aria-keyshortcuts</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-label"><span>aria-label</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-level"><span>aria-level</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-live"><span>aria-live</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-modal"><span>aria-modal</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiline"><span>aria-multiline</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiselectable"><span>aria-multiselectable</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-orientation"><span>aria-orientation</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-owns"><span>aria-owns</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-placeholder"><span>aria-placeholder</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-posinset"><span>aria-posinset</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span>aria-pressed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-readonly"><span>aria-readonly</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-relevant"><span>aria-relevant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-required"><span>aria-required</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription"><span>aria-roledescription</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowcount"><span>aria-rowcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowindex"><span>aria-rowindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowspan"><span>aria-rowspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-selected"><span>aria-selected</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-setsize"><span>aria-setsize</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-sort"><span>aria-sort</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemax"><span>aria-valuemax</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemin"><span>aria-valuemin</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuenow"><span>aria-valuenow</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuetext"><span>aria-valuetext</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#RoleAttribute"><span>role</span></a>’</span></span></li>
                    <li><a href="struct.html#TermConditionalProcessingAttribute">条件处理属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="struct.html#RequiredExtensionsAttribute"><span>requiredExtensions</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="struct.html#SystemLanguageAttribute"><span>systemLanguage</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermCoreAttribute">核心属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>，<span
                                class="attr-name">‘<a
                                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>，
                            <span class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>，<span
                                class="attr-name">‘<a href="styling.html#ClassAttribute"><span>class</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">全局事件属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">文档元素事件属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>，<span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>，<span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
                    <li><a href="interact.html#EventAttributes">图形事件属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusin</span></a>’</span>，<span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusout</span></a>’</span></span></li>
                    <li><a href="styling.html#TermPresentationAttribute">表现属性</a><span class="expanding"> — </span></li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                    </li>
                </ul>
            </dd>
            <dt>DOM 接口：</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a class="idlinterface" href="text.html#InterfaceSVGTSpanElement">SVGTSpanElement</a></li>
                </ul>
            </dd>
        </dl>
    </div>

    <h3 id="TSpanAttributes" class="heading">11.2.1. 属性<a class="self-link" href="#TSpanAttributes"></a></h3>

    <dl class="attrdef-list-svg2">

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名称</th>
                    <th>值</th>
                    <th>初始值</th>
                    <th>可动画</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementXAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">x</dfn>, <dfn id="TextElementYAttribute" data-dfn-type="element-attr"
                            data-dfn-for="text" data-export="">y</dfn></td>
                    <td>[ [ <a
                            href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                        | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]+ ]#</td>
                    <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 的默认值为
                        0；<br><span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
                        没有默认值</td>
                    <td>是</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                如果提供了一个 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 值，那么该值表示第一个字符的绝对 X (Y) 坐标。
            </p>
            <p>
                如果提供了多个 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 值，它们将作为第一个字符及其后续字符的 X (Y)
                坐标。
            </p>
            <p>
                如果提供的 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 多于字符数量，则多出的值将没有效果。
            </p>
            <p>
                如果字符数量超过了提供的 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>，或该属性未在 <span
                    class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
                上定义，则每个附加字符将根据最近的祖先元素的坐标渲染。
            </p>
            <ol style="list-style-type: lower-alpha">
                <li>
                    祖先元素指定的绝对坐标将优先使用。
                </li>
                <li>
                    否则，字符将从当前文本位置的 X (Y) 坐标开始渲染。
                </li>
            </ol>
            <p class="note">
                在 SVG 2 中，<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                和 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 的
                <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和
                <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                属性不是表现属性，无法通过 CSS 设置。
            </p>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名称</th>
                    <th>值</th>
                    <th>初始值</th>
                    <th>可动画</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementDXAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">dx</dfn>, <dfn id="TextElementDYAttribute" data-dfn-type="element-attr"
                            data-dfn-for="text" data-export="">dy</dfn></td>
                    <td>[ [ <a
                            href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                        | <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]+ ]#</td>
                    <td>(无)</td>
                    <td>是</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                如果提供了一个 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>，则该值表示
                <a href="text.html#TermCurrentTextPosition">当前文本位置</a>的新的相对 X（Y）坐标，用于渲染此元素或其任何后代中的第一个字符的字形。
                在渲染第一个字符的字形之前，<a href="text.html#TermCurrentTextPosition">当前文本位置</a>沿着当前用户坐标系的 x 轴（y 轴）
                被 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 偏移。
            </p>
            <p>
                如果提供了由逗号或空格分隔的 <var>n</var> 个 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 列表，
                则这些值表示在渲染字形之前，<a href="text.html#TermCurrentTextPosition">当前文本位置</a>沿着 x 轴（y 轴）的增量偏移，
                对应于该元素或其任何后代中的前 <var>n</var> 个 <a href="text.html#TermAddressableCharacter">可寻址字符</a>。
                因此，在渲染每个字符的字形之前，通过绘制上一个字符的字形，
                <a href="text.html#TermCurrentTextPosition">当前文本位置</a>会沿着当前用户坐标系的 x 轴（y 轴）发生偏移。
            </p>
            <p>
                如果提供的 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 比字符多，
                那么多余的 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 将不会对字形定位产生任何影响。
            </p>
            <p>
                如果字符比 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a> 多，或者未指定该属性，
                那么对于每个额外的字符：
            </p>
            <ol style="list-style-type: lower-alpha">
                <li>
                    如果祖先元素 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 或
                    <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 指定了通过
                    <span class="attr-name">‘dx’</span>（<span class="attr-name">‘dy’</span>）属性为给定字符的相对 X（Y）坐标
                    （最近的祖先优先），那么<a href="text.html#TermCurrentTextPosition">当前文本位置</a>沿着当前用户坐标系的
                    x 轴（y 轴）偏移相应的量，否则
                </li>
                <li>
                    没有额外的 x 轴（y 轴）偏移。
                </li>
            </ol>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名称</th>
                    <th>值</th>
                    <th>初始值</th>
                    <th>可动画</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementRotateAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">rotate</dfn></td>
                    <td>[ <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>+ ]#</td>
                    <td>(无)</td>
                    <td>是（不可叠加）。</td>
                </tr>
            </table>
        </dt>
        <dd>
            <p>
                补充旋转的角度（以度为单位），将应用于此元素中的每个字符对应的所有字形，
                相对于<a href="text.html#TermCurrentTextPosition">当前文本位置</a>进行旋转。
            </p>
            <p>
                如果提供了由逗号或空格分隔的<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>列表，
                则第一个<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>表示此元素或其任何后代中第一个字符的字形的补充旋转，
                第二个<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>表示第二个字符的字形的补充旋转，依此类推。
            </p>
            <p>
                如果提供的<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>比字符多，
                那么多余的<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>将被忽略。
            </p>
            <p>
                如果字符比<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>多，
                则对于每个额外的字符，必须使用由最后一个数字指定的旋转值。
            </p>
            <p>
                如果未指定该属性，并且某个<span class="element-name">‘<a
                        href="text.html#TextElement"><span>tspan</span></a>’</span>元素的祖先
                为某个字符通过 <span class="attr-name">‘<a
                        href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 属性
                （最近的祖先优先）指定了补充旋转，那么将该补充旋转应用于该字符。
                如果祖先的<span class="attr-name">‘<a
                        href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>属性中
                指定的<a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>少于字符，
                则对于每个额外的字符，必须使用由最后一个数字指定的旋转值。
            </p>
            <p>
                该补充旋转对渲染字形时<a href="text.html#TermCurrentTextPosition">当前文本位置</a>的修改规则没有影响，
                并且是对由于<a href="text.html#TextLayoutPath">路径上的文本</a>、<a class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">文本方向</a>、<a class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">水平字形方向</a>和
                <a class="property" href="text.html#GlyphOrientationVerticalProperty">垂直字形方向</a>的任何旋转的补充。
            </p>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名称</th>
                    <th>值</th>
                    <th>初始值</th>
                    <th>可动画</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementTextLengthAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">textLength</dfn></td>
                    <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a>
                        |
                        <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>
                    </td>
                    <td>见下文</td>
                    <td>是</td>
                </tr>
            </table>
        </dt>

        <dd>
            <p>
                作者计算的对应于该元素中的字符数据的所有进度值的总和，包括字形上的进度值（水平或垂直）、
                <a class="property" href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">字母间距</a>和
                <a class="property" href="https://www.w3.org/TR/css-text-3/#word-spacing-property">单词间距</a>属性的影响，
                以及由于该元素或其任何后代的 <span class="attr-name">‘<a
                        href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
                和 <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 属性的调整。
                此值用于校准用户代理的计算结果与作者的计算结果。
            </p>
            <p>
                此属性的目的是允许作者在视觉呈现顺序中，在双向重排后，
                对应于此元素的第一个和最后一个渲染字形实现精确对齐；
                因此，对于最后一个渲染字符（在双向重排后的视觉呈现顺序中），
                当用户代理确定适当的扩展/压缩文本字符串以适应 <span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> 的长度时，
                超出正常字形进度的任何补充字符间距（在大多数情况下）都会被忽略。
            </p>
            <p>
                如果某个元素上指定了 <span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> 属性，
                并且在其祖先上也指定了该属性，则该元素中的所有字符数据的调整
                仅由该元素上的 <span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> 属性值控制，
                可能会导致该元素内容的调整比例与共享同一祖先的其他内容的调整比例不同。
                用户代理必须假定该祖先内的其他内容的总进度值是该祖先的进度值与该元素的进度值之差。
            </p>
            <p class="note">
                此属性不适用于缩小或扩展文本的效果。
            </p>
            <p>
                负值是错误
                （参见<a href="conform.html#ErrorProcessing">错误处理</a>）。
            </p>
            <p>
                <span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                属性仅在 <a href="text.html#TermWrappingArea">包裹区域</a> 未由 <a class="property"
                    href="text.html#TextShapeInside">shape-inside</a> 或 <a class="property"
                    href="text.html#InlineSizeProperty">inline-size</a> 属性定义时才应用。
                它也不适用于任何有强制换行的 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                或
                <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素
                （由于 <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>
                属性值为
                <span class="prop-value">pre</span> 或 <span class="prop-value">pre-line</span>）。
            </p>
            <p>
                如果在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                元素中的任何地方都未指定该属性，
                则效果与作者的计算结果与用户代理的计算结果完全匹配一样；
                因此，不会进行任何进度调整。
                为了在 DOM 中<a href="types.html#TermReflect">反映</a>该属性，
                初始值为用户代理当前计算的长度值，以隐含的<a href="coords.html#TermUserUnits">用户单位</a>表示。
            </p>
        </dd>

        <dt>
            <table class="attrdef def">
                <tr>
                    <th>名称</th>
                    <th>值</th>
                    <th>初始值</th>
                    <th>可动画</th>
                </tr>
                <tr>
                    <td><dfn id="TextElementLengthAdjustAttribute" data-dfn-type="element-attr" data-dfn-for="text"
                            data-export="">lengthAdjust</dfn></td>
                    <td>spacing | spacingAndGlyphs</td>
                    <td>spacing</td>
                    <td>是</td>
                </tr>
            </table>
        </dt>
        <dd>
            <dl class="attrdef-values">
                <dt>spacing</dt>
                <dd>
                    表示仅调整进度值。字形本身不会被拉伸或压缩。
                </dd>

                <dt>spacingAndGlyphs</dt>
                <dd>
                    表示进度值被调整，并且字形本身在一个轴上被拉伸或压缩
                    （即，平行于<a href="text.html#TermInlineBaseDirection">行内基准方向</a>的方向）。
                </dd>
            </dl>

            <p>
                用户代理需要确保文本字符串的起始和结束位置正确，
                但中间字形的位置不可预测，因为用户代理可能会采用高级算法来拉伸或压缩文本字符串，
                以平衡正确的起始和结束定位与最佳排版效果。
            </p>
            <p>
                请注意，对于包含 <var>n</var> 个字符的文本字符串，进度值的调整通常只发生在 <var>n</var>−1 个字符上
                （请参阅属性 <span class="attr-name">‘<a
                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> 的描述），
                而字形的拉伸或压缩将应用于所有 <var>n</var> 个字符。
            </p>
        </dd>

    </dl>

    <h3 id="TSpanNotes" class="heading">11.2.2. 关于 'x'、'y'、'dx'、'dy' 和 'rotate' 的注释<a class="self-link"
            href="#TSpanNotes"></a></h3>

    <p>
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
        <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 属性在
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中非常有用，
        特别是在需要精确放置单个字形的高端排版场景中。这些属性可用于字符之间的小范围定位调整或大范围的定位调整，
        例如移动文本部分到新位置，以实现新行的视觉效果（兼容 SVG 1.1）。注意，当
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
        <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性在自动换行的文本中被忽略（除非初始<a href="text.html#TermCurrentTextPosition">当前文本位置</a>由
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性指定的
        <a href="text.html#TermContentArea">内容区域</a>定义）。
    </p>

    <p class="annotation" data-issue="2" id="issue2"><a class="self-link" href="#issue2"></a>
        在 2015 年悉尼 F2F 会议上决定，对于自动换行的文本，'dx'、'dy' 和 'rotate' 会被忽略。
        （从技术上讲，应用它们并不困难，但被认为并不真正有用。）
    </p>

    <p>
        在需要进行微观级别定位调整以实现高级排版控制的情况下，SVG 内容设计者需要确保所有文档查看者都能使用到所需的字体
        （例如，将所需字体数据打包成 SVG 字体或存储在与 SVG 内容相同网站上的替代 WebFont 格式），
        并确保查看软件会以预期的方式处理该字体（不同系统的字体处理能力、特性和字体布局机制差异很大）。
        如果 SVG 内容包含 <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 或
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 属性值，
        这些值是为特定字体以及特定查看软件集处理时使用的，如果这些要求中的任何一个没有得到满足，那么文本可能会显示出较差的质量。
    </p>

    <p>
        以下附加规则适用于属性 <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
        <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>，
        当它们包含数字列表时：
    </p>

    <ul>
        <li>
            当一个字符映射到一个字形时 – 在这种情况下，<var>n</var> 值的
            <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 属性
            应用于与第 <var>n</var> 个字符对应的字形。
        </li>

        <li>
            当一个字符映射到多个字形时（例如，当重音符号字形叠加在基本字形上时） – 在这种情况下，
            <var>n</var> 值的 <span class="attr-name">‘<a
                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
            值在渲染第一个字形之前应用（即，<a href="text.html#TermCurrentTextPosition">当前文本位置</a> 被调整）。
            第 <var>n</var> 值的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            旋转变换应用于与该字符对应的字形和字形之间的进度值（即，旋转值创建了一个临时的新旋转坐标系，
            并且与该字符对应的字形在此旋转坐标系中进行渲染）。
        </li>

        <li>
            当多个字符映射到一个字形时（例如使用连字时） – 假设第 <var>n</var> 个和
            第 (<var>n</var>+1) 个字符映射到一个字形。在这种情况下，第 <var>n</var> 值的
            <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            属性在渲染字形时应用。
            然而，第 (<var>n</var>+1) 值的
            <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            被忽略（例外情况：列表中的最后一个
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值仍然会应用于后续字符），
            而 <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
            则应用于后续字符（即第 (<var>n</var>+2) 个字符），如果存在的话，
            通过在渲染与该字符相关联的第一个字形之前按给定的数量平移
            <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。
        </li>

        <li>
            当字符与字形之间存在多对多的映射时（例如，当三个字符映射到两个字形时，
            第一个字形表示第一个字符和第二个字符的一半，第二个字形表示第二个字符的另一半和第三个字符） –
            假设第 <var>n</var> 个、第 (<var>n</var>+1) 个和第 (<var>n</var>+2) 个字符映射到两个字形。
            在这种情况下，第 <var>n</var> 值的
            <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
            值在渲染第一个字形之前应用（即，<a href="text.html#TermCurrentTextPosition">当前文本位置</a> 被调整）。
            第 <var>n</var> 值的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            旋转变换应用于两个字形和第一个字形的字形进度值（即，旋转值创建了一个临时的新旋转坐标系，
            并且两个字形在该临时旋转坐标系中渲染）。然而，第 (<var>n</var>+1) 和第 (<var>n</var>+2)
            值的 <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            属性不被应用（例外情况：列表中的最后一个
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值仍然会应用于后续字符），
            而 (<var>n</var>+1) 和 (<var>n</var>+2) 值的
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
            属性应用于后续字符（即第 (<var>n</var>+3) 个字符），如果存在的话，
            通过在渲染与该字符相关联的第一个字形之前按给定的数量平移
            <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。
        </li>

        <li>
            与双向文本的关系 – 文本布局是一个两步过程，其中首先将任何双向文本重新排序为从左到右的字符串，
            然后使用重新排序的文本字符串进行文本布局。每当
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素中的字符数据被重新排序时，<span class="attr-name">‘<a
                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            的对应元素也会被重新排序以保持对应关系。例如，假设有以下
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素：
            <div style="margin-left: 2em">
                <code>&lt;tspan dx="11 12 13 14 15 0 21 22 23 0 31 32 33 34 35 36">Latin and Hebrew&lt;/tspan></code>
            </div>
            并且“Hebrew”一词将从右向左绘制。首先，字符数据和
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
            列表中的对应值将重新排序，
            使得文本字符串变为“Latin and werbeH”，而 <span class="attr-name">‘<a
                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
            属性的值列表将变为“11 12 13 14 15 0 21 22 23 0 36 35 34 33 32 31”。在这种重新排序之后，
            将使用标准的从左到右的布局规则来定位与字符对应的字形。
        </li>
    </ul>

    <p>
        <span class="example-ref">示例 tspan04</span> 在 <span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素上使用了 <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性来旋转要渲染的字形。
        此示例展示了在 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素中包含的一个文本字符串，
        其字符数多于 <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性中指定的值数。在这种情况下，<span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性的最后一个指定值必须应用于字符串中的剩余字符。
    </p>

    <div class="example">
        <pre class="xml">﻿&lt;?xml version="1.0" standalone="no"?>
    &lt;svg width="10cm" height="3cm" viewBox="0 0 1000 300"
      xmlns="http://www.w3.org/2000/svg" version="1.1">
      &lt;desc>
        Example tspan04 - The number of rotate values is less than the number of
        characters in the string.
      &lt;/desc>
      &lt;text font-family="Verdana" font-size="55" fill="blue" >
        &lt;tspan x="250" y="150" rotate="-30,0,30">
          Hello, out there
        &lt;/tspan>
      &lt;/text>
      &lt;!-- Show outline of viewport using 'rect' element -->
      &lt;rect x="1" y="1" width="998" height="298"
      fill="none" stroke="blue" stroke-width="2">
    &lt;/svg></pre>
        <div class="figure"><img alt="Example tspan04 — simple rotation of characters in a tspan element"
                src="https://www.w3.org/TR/SVG2/images/text/tspan04.png">
            <p class="caption">Example tspan04</p>
        </div>
        <p class="view-as-svg"><a href="images/text/tspan04.svg">View this example as SVG (SVG-enabled browsers
                only)</a></p>
    </div>

    <p>
        <span class="example-ref">示例 tspan05</span> 指定了 <span class="attr-name">‘<a
                href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素上，并且在除了一个子
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素之外的所有子元素上旋转字形进行渲染。
        该示例展示了 <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性的传播。
    </p>

    <div class="example">
        <pre class="xml">﻿&lt;?xml version="1.0" standalone="no"?>
    &lt;svg width="100%" height="100%" viewBox="0 0 500 120"
      xmlns="http://www.w3.org/2000/svg" version="1.1">
      &lt;desc>
        Example tspan05 - propagation of rotation values to nested tspan elements.
      &lt;/desc>
      &lt;text id="parent" font-family="Arial, sans-serif" font-size="32" fill="red" x="40" y="40"
        rotate="5,15,25,35,45,55">
        Not
    
        &lt;tspan id="child1" rotate="-10,-20,-30,-40" fill="orange">
          all characters
    
          &lt;tspan id="child2" rotate="70,60,50,40,30,20,10" fill="yellow">
            in
    
            &lt;tspan id="child3">
              the
            &lt;/tspan>
          &lt;/tspan>
    
          &lt;tspan id="child4" fill="orange" x="40" y="90">
            text
          &lt;/tspan>
    
          have a
        &lt;/tspan>
    
        &lt;tspan id="child5" rotate="-10" fill="blue">
          specified
        &lt;/tspan>
    
        rotation
      &lt;/text>
    
      &lt;!-- Show outline of viewport using 'rect' element -->
      &lt;rect x="1" y="1" width="498" height="118" fill="none"
            stroke="blue" stroke-width="2">
    &lt;/svg></pre>
        <div class="figure"><img alt="Example tspan05 — propagation of rotation values to nested tspan elements"
                src="https://www.w3.org/TR/SVG2/images/text/tspan05.png">
            <p class="caption">Example tspan05</p>
        </div>
        <p class="view-as-svg"><a href="images/text/tspan05.svg">View this example as SVG (SVG-enabled browsers
                only)</a></p>
    </div>

    <p>
        红色文本内 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素的旋转：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将分别以 5、15、25 和 35 度旋转文本 <em>"Not "</em> 中的字符。
        </li>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将应用于文本 <em>"Not"</em> 之后的空格、"child1" 和 "child5"
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中的文本之间的空格，
            以及文本 <em>"rotation"</em> 之前的空格。
        </li>
        <li>
            当前指定的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值分别为 45 和 55。<span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值在处理子 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素中的后续字符时会递增。
        </li>
        <li>
            下一个立即的 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素为文本指定了旋转值，因此在处理每个字符时，当前
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将更改为列表中的下一个值（但不会使用），直到达到最后的 55 度值。
        </li>
        <li>
            最后一个 55 度的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将应用于文本 <em>"rotation"</em> 中的所有字符。
        </li>
    </ul>

    <p>
        橙色文本在 "child1" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素中的旋转：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将分别以 -10、-20、-30 和 -40 度旋转文本 <em>"all characters "</em> 中的前四个字符。
        </li>
        <li>
            最后一个 <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值 -40 成为当前的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 值，
            并应用于 "child1" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素中的所有后续字符，
            以及任何未指定 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值的子 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素。
        </li>
        <li>
            "child4" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素未指定任何
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 值，
            因此使用其祖先 ("child1" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素) 的当前
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 值。
            "child4" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中指定的文本
            <em>"text"</em> 中的所有字符都将旋转 -40 度。
        </li>
        <li>
            最后一个 -40 度的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将应用于文本 <em>"have a"</em> 中的所有字符。
        </li>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值应用于 "child2" 和 "child4" <span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素中的文本之间的空格，以及文本 <em>"have a"</em> 之前的空格。
        </li>
    </ul>

    <p>
        黄色文本在 "child2" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素中的旋转：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将分别以 70、60 和 50 度旋转 (黄色) 文本 <em>"in "</em> 中的字符。
        </li>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值应用于文本 <em>"in"</em> 之后的空格。
        </li>
        <li>
            指定的 <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值比字符多，因此额外的 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将应用于未指定任何 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值的 "child3" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素。
        </li>
        <li>
            "child3" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素中指定的文本 <em>"the"</em> 中的字符将分别旋转 40、30 和 20 度。
        </li>
    </ul>

    <p>蓝色文本在 "child5" <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中的旋转：
    </p>

    <ul>
        <li>
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值将文本 <em>"specified"</em> 中的所有字符旋转 -10 度。
        </li>
        <li>
            仅指定了一个 <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            值，因此它将应用于 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素中的所有字符。
        </li>
    </ul>

    <p>
        下图说明了旋转值如何传播到嵌套在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素中的
        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素：
    </p>

    <img alt="Image that shows propagation of rotation values"
        src="https://www.w3.org/TR/SVG2/images/text/tspan05-diagram.png" width="528" height="918">


    <h2 id="TextLayout" class="heading">11.3. 文本布局 – 介绍<a class="self-link" href="#TextLayout"></a></h2>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 需求：</th>
                <td>包括来自 SVG Tiny 1.2 的文本布局改进。</td>
            </tr>
            <tr>
                <th>决议：</th>
                <td><a href="https://www.w3.org/2012/02/02-svg-minutes.html#item10">SVG 2 将包括来自 SVG Tiny 1.2 的改进文本，
                        涵盖字符和字形、文本布局、文本选择、文本搜索。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>包括更清晰的文本布局描述；无功能性变化。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3236">ACTION-3236</a>)</td>
            </tr>
        </table>
    </div>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 需求：</th>
                <td>支持形状中的文本。</td>
            </tr>
            <tr>
                <th>决议：</th>
                <td><a href="https://www.w3.org/2011/11/17-svg-irc#T22-04-11">SVG 2 将要求自动文本换行与 CSS 兼容。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>用于流程图等中的文本。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Tav（无行动）</td>
            </tr>
        </table>
    </div>

    <p>
        本节简要概述了 SVG 文本布局。接下来的部分将更详细地介绍文本布局的不同方面。
    </p>

    <p>
        SVG 中的文本布局是一个多阶段的过程，它接受 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span>
        元素子树及其属性值作为输入，并生成一系列用于渲染的字形及其在每个
        <a href="text.html#TermTextContentElement">文本内容元素</a> 坐标系中的位置。
    </p>

    <p>
        首先，<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素及其后代根据
        CSS 布局在 <a href="text.html#TermContentArea">内容区域</a> 或
        <a href="text.html#TermWrappingArea">换行区域</a> 中布局，仿佛
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 是块元素，
        而 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>、
        <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 和
        <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span> 后代是行内元素。
        该布局考虑了本章描述的所有段落级别和字体相关的 CSS 属性。
    </p>

    <p>
        <a href="text.html#TermContentArea">内容区域</a> 可以通过设置
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性或
        <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性来明确声明，
        后者定义或引用 SVG <a href="shapes.html#TermShapeElement">形状</a>。如果未声明
        <a href="text.html#TermContentArea">内容区域</a>，则默认为无限宽度和高度的矩形。
    </p>

    <p>
        其次，<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 属性提供的任何定位
        都应用于从 CSS 布局过程中生成的字形位置。

        允许哪些变换的规则取决于是否明确声明了 <a href="text.html#TermContentArea">内容区域</a>。
        如果未明确声明，这些规则定义了 <em>预格式化</em> 文本的布局；
        如果声明了，则规则定义了 <em>自动换行</em> 文本的布局。
    </p>

    <p>
        第三，如果需要，则应用 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性的效果。
    </p>

    <p>
        最后，对任何 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
        元素的字形布局进行处理，将 <em>预格式化</em> 文本转换为 <em>路径上的文本</em>。
    </p>

    <p>
        不同类型的文本布局示例：
    </p>

    <dl>
        <dt>预格式化：</dt>
        <dd>
            适用于短字符串文本（例如标签）或需要精确放置字形的场景（例如手工调整字符间距的标题）。

            <div class="example">
                <p>多行预格式化文本的示例。</p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

     &lt;text x="20" y="45" style="font: 24px sans-serif;">
       Example of multi-line,
       &lt;tspan x="20" y="75">pre-formatted text.&lt;/tspan>
     &lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-preformatted.svg"
                        alt="显示两行预格式化文本的图像。">
                    <p class="caption">预格式化文本，其中使用了
                        <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
                        元素创建多行文本。
                    </p>
                </div>
            </div>
        </dd>

        <dt>自动换行文本：</dt>
        <dd>
            适用于需要自动换行的长文本字符串。
            <div class="example">
                <p>自动换行文本的示例。</p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="20" y="45" style="font: 24px sans-serif; inline-size: 250px;">
    Example of text auto-wrapped.&lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrapped.svg"
                        alt="显示自动换行文本在两行的图像。">
                    <p class="caption">自动换行文本。<a class="property" href="text.html#InlineSizeProperty">inline-size</a>
                        属性定义了无限高度的矩形内容区域（以浅蓝色显示）。</p>
                </div>
            </div>
        </dd>

        <dt>路径上的文本：</dt>
        <dd>
            用于沿指定路径的文本。
            <div class="example">
                <p>路径上的文本示例。</p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;path id="MyPath" stroke="lightblue" fill="none"
	d="M 50,50 C 100,0 200,100 250,50">

  &lt;text style="font: 24px sans-serif;">
    &lt;textPath href="#MyPath">Text on a path.&lt;/textPath>
  &lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-path.svg" alt="显示沿路径的文本的图像。">
                    <p class="caption">路径上的文本。<span class="element-name">‘<a
                                href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素引用了
                        <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
                        元素（以浅蓝色显示）。
                    </p>
                </div>
            </div>
        </dd>
    </dl>

    <p class="note">
        SVG 2 引入了通过指定 <a href="text.html#TermContentArea">内容区域</a> 自动换行文本的能力。
        SVG 换行文本的设计旨在使其尽可能与 CSS 中的文本换行兼容，以便支持 CSS 文本换行的渲染器可以轻松实现 SVG 文本换行
        （但不要求非 HTML 兼容的 SVG 渲染器实现 HTML）。SVG 与 CSS 文本换行之间有几个差异，最重要的是在 SVG 中，必须显式提供
        <a href="text.html#TermContentArea">内容区域</a>，而 SVG 没有自动有限（或半有限）
        <a href="text.html#TermContentArea">内容区域</a>（由 CSS 的盒模型提供）。
        另一个区别是 SVG 没有 &lt;p>&lt;/p> 和 &lt;br/> 元素来创建换行。相反，SVG 依赖
        <span class="prop-value">pre</span> 和 <span class="prop-value">pre-line</span> 值的
        <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>
        属性来提供换行。SVG 换行文本还允许内容创建工具为不支持换行文本的 SVG 1.1 渲染器提供自然的回退选项
        （通过在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        和 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素中使用 <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
        和 <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性，
        这些属性在自动换行文本中会被 SVG 2 渲染器忽略）。
    </p>

    <p class="note">
        SVG 的文本布局选项旨在涵盖大多数常规使用场景。如果需要更复杂的布局（项目符号列表、表格等），
        可以将文本以其他 XML 命名空间（如嵌入在
        <span class="element-name">‘<a href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a>’</span>
        元素中的 XHTML [<a href="refs.html#ref-html">HTML</a>]）进行渲染。
    </p>

    <h2 id="TextLayoutContentArea" class="heading">11.4. 文本布局 – 内容区域<a class="self-link"
            href="#TextLayoutContentArea"></a></h2>

    <p>
        <dfn>内容区域</dfn> 通过在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素中指定
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性或
        <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性来定义，后者定义或引用一个
        SVG <a href="shapes.html#TermShapeElement">形状</a>。如果未提供
        <a href="text.html#TermContentArea">内容区域</a>，则 <a href="text.html#TermContentArea">内容区域</a>
        默认为无限宽度和高度的矩形（请参阅
        <a href="text.html#TextLayoutPre">预格式化文本</a> 部分）。如果同时指定了
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性和 <a class="property"
            href="text.html#TextShapeInside">shape-inside</a>
        属性且其值不是 'none'，则使用 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性。
    </p>

    <p id="TextLayoutWrappingArea">
        换行文本在 <dfn>换行区域</dfn> 中布局。<a href="text.html#TermWrappingArea">换行区域</a> 通常与
        <a href="text.html#TermContentArea">内容区域</a> 相同。当使用
        <a href="text.html#TextShapeInside">shape-inside</a> 属性定义
        <a href="text.html#TermContentArea">内容区域</a> 时，由于存在
        <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 属性和/或
        <a class="property" href="text.html#TextShapePadding">shape-padding</a> 属性，<a
            href="text.html#TermWrappingArea">换行区域</a>
        可能会更小。<a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 属性（以及
        <a class="property" href="text.html#TextShapeMargin">shape-margin</a> 属性）定义了一个 <dfn>换行上下文</dfn>。
        <a href="text.html#TermWrappingArea">换行区域</a> 是通过将 <a href="text.html#TermContentArea">内容区域</a>
        按 <a class="property" href="text.html#TextShapePadding">shape-padding</a> 距离内嵌，然后减去
        <a href="text.html#TermWrappingContext">换行上下文</a> 得到的。
    </p>

    <p>
        一旦定义了 <a href="text.html#TermWrappingArea">换行区域</a>，文本就根据 CSS 的规则（遵守本节中的任何特殊规则）在
        <a href="text.html#TermWrappingArea">换行区域</a> 内布局。
    </p>

    <div class="note">
        <p>
            在 SVG 和 HTML 中构建等效的换行区域。换行区域内的文本在两种情况下呈现相同。
        </p>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-svg.svg"
                alt="通过使用水平间隔开的两个半圆创建一个沙漏形状的图像。文本在圆形内换行，左右两个半圆排除圆形的一部分。">
            <p class="caption">
                在 SVG 中定义 <a href="text.html#TermWrappingArea">换行区域</a>。

                <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素同时具有
                <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性和
                <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 属性。
                <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性引用了一个定义
                <a href="text.html#TermContentArea">内容区域</a> 的圆形（虚线紫色线）。
                <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 属性引用了两个半圆，定义了
                <a href="text.html#TermWrappingContext">换行上下文</a>（虚线绿色线），该上下文从
                <a href="text.html#TermContentArea">内容区域</a> 中减去，得到了
                <a href="text.html#TermWrappingArea">换行区域</a>（浅蓝色线）。
            </p>
        </div>
        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-html.svg"
                alt="通过使用水平间隔开的两个半圆创建一个沙漏形状的图像。文本在圆形内换行，左右两个半圆排除圆形的一部分。">
            <p class="caption">
                在 HTML 中定义 <a href="text.html#TermWrappingArea">换行区域</a>。

                一个 <q>wrapper</q> &lt;div> 包含两个 <q>float</q> &lt;div>。wrapper &lt;div> 定义了一个矩形区域（实线紫色线）。
                它的 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性定义了 &lt;div> 内的
                <a href="text.html#TermContentArea">内容区域</a>（虚线紫色线）。两个其他的 &lt;div> 定义了两个浮动块，
                一个在左侧（实线绿色线），另一个在右侧（实线粉色线）。这些浮动块的形状是矩形的。
                每个浮动块都有一个 <a class="property"
                    href="https://www.w3.org/TR/css-shapes/#shape-outside-property">shape-outside</a>
                属性，该属性定义了每个浮动块的 <a href="text.html#TermWrappingContext">换行上下文</a>（虚线绿色和粉色线）。
                组合的 <a href="text.html#TermWrappingContext">换行上下文</a> 从
                <a href="text.html#TermContentArea">内容区域</a> 中减去，以定义
                <a href="text.html#TermWrappingArea">换行区域</a>（浅蓝色线）。
            </p>
        </div>
    </div>

    <h3 id="InlineSize" class="heading">11.4.1. ‘<span class="property">inline-size</span>’ 属性<a class="self-link"
            href="#InlineSize"></a></h3>

    <p class="annotation">
        'extent' 于 <a href="https://www.w3.org/2015/02/12-svg-minutes.html#action17">2015年2月12日</a> 决议中添加。
        'extent' 替换了 'width' 和 'height' 属性，首次在 2013年6月27日决议中添加。
        根据 <a href="https://www.w3.org/2015/06/11-svg-minutes.html#item09">2015年6月11日Linkoping F2F</a> 决议，
        被 'inline-size' 展示属性替换。
    </p>

    <p>
        <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性允许将
        <a href="text.html#TermWrappingArea">换行区域</a> 设置为矩形形状。
        该属性的计算值设置矩形的宽度用于水平文本，设置矩形的高度用于垂直文本。
        另一个维度（水平文本的高度，垂直文本的宽度）是无限长度。
        值为零将禁用创建 <a href="text.html#TermWrappingArea">换行区域</a>。
    </p>

    <p>
        初始 <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 取自
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
        和 <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性，
        如果这些属性未在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素上指定，则取自第一个子 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素。

        对于从左到右的文本，初始 <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 位于矩形的左侧。
        对于从右到左的文本，它位于矩形的右侧。

        对于垂直文本，初始 <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 位于矩形的顶部。
    </p>

    <p>
        矩形（<a href="text.html#TermWrappingArea">换行区域</a>）根据
        <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性进行锚定，
        使用 <a href="text.html#TermWrappingArea">换行区域</a> 的边缘来确定起始、中间和结束位置。
    </p>

    <p class="note">
        使用 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性进行文本换行是对预格式化 SVG 文本的扩展，
        作者只需给出文本块的宽度或高度限制；因此，
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性以及
        <a class="property" href="text.html#DirectionProperty">direction</a> 和
        <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性用于定位第一行文本。
        如果需要完全对齐，则应使用 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性创建
        <a href="text.html#TermWrappingArea">换行区域</a>。
    </p>

    <table class="propdef def">
        <tr>
            <th>名称：</th>
            <td><dfn id="InlineSizeProperty" data-dfn-type="property" data-export="">inline-size</dfn></td>
        </tr>
        <tr>
            <th>值：</th>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a></td>
        </tr>
        <tr>
            <th>初始值：</th>
            <td>0</td>
        </tr>
        <tr>
            <th>适用于：</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素</td>
        </tr>
        <tr>
            <th>继承：</th>
            <td>否</td>
        </tr>
        <tr>
            <th>百分比：</th>
            <td>相对于当前 SVG 视口的宽度（用于水平文本）或高度（用于垂直文本）（请参阅
                <a href="coords.html#Units">单位</a>）
            </td>
        </tr>
        <tr>
            <th>媒体：</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值：</th>
            <td>绝对长度或百分比</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
            <td>是</td>
        </tr>
    </table>

    <div class="example">
        <p>使用 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 进行水平文本换行的示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="50" y="30" style="font: 20px sans-serif; inline-size: 200px">
    This text wraps at 200 pixels.
  &lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-horizontal.svg"
                alt="显示英文文本换行成两行的图像。">
            <p class="caption">
                水平文本换行。浅蓝色线表示 <a href="text.html#TermContentArea">内容区域</a> 的边界。
                请注意，内容区域的高度是无限的。红点表示初始
                <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。
            </p>
        </div>
    </div>

    <div class="example">
        <p>使用 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 进行从右到左水平文本换行的示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="250" y="30"
	style="font: 20px PakType Naqsh; inline-size: 200px; direction: rtl;">
    هذا النص يلتف في 200 بكسل.&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-horizontal-rl.svg"
                alt="显示阿拉伯文文本换行成两行的图像。">
            <p class="caption">
                从右到左文本的水平换行。浅蓝色线表示 <a href="text.html#TermContentArea">内容区域</a> 的边界。
                请注意，内容区域的高度是无限的。红点表示初始
                <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。
            </p>
        </div>
        <p class="annotation">某些浏览器可能无法正确呈现此 SVG 1.1 图形。Batik 和 Firefox 似乎呈现正确。已针对 Chrome 提交 Bug。</p>
    </div>

    <div class="example">
        <p>使用 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 进行垂直文本换行的示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100" height="300" viewBox="0 0 100 300">

  &lt;text x="62.5" y="25" inline-size="200"
	style="font: 25px IPAMincho; inline-size: 200px; writing-mode: vertical-rl;">
    テキストは１０文字後に折り返されます。&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-vertical.svg"
                alt="显示日文垂直文本换行成两列的图像。">
            <p class="caption">
                垂直文本换行。浅蓝色线表示 <a href="text.html#TermContentArea">内容区域</a> 的边界。
                请注意，内容区域的宽度是无限的。红点表示初始
                <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。
            </p>
        </div>
        <p class="annotation">此 SVG 1.1 图像在 Firefox 中无法正常工作，即使在夜间版本中也是如此。Firefox 不支持 'writing-mode' 展示属性。已针对 Firefox 提交
            Bug。</p>
    </div>

    <div class="example">
        <p>使用 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 进行水平文本换行，并居中对齐的示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="50" y="30" style="font: 20px sans-serif; inline-size: 200px; text-anchor: middle">
    This text wraps at 200 pixels.
  &lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-anchored.svg"
                alt="显示居中对齐的英文文本换行成两行的图像。">
            <p class="caption">
                水平文本换行。浅蓝色线表示 <a href="text.html#TermContentArea">内容区域</a> 的边界。
                文本居中对齐。红点表示初始
                <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。
            </p>
        </div>
    </div>

    <h3 id="TextShapeInside" class="heading">11.4.2. ‘<span class="property">shape-inside</span>’ 属性<a class="self-link"
            href="#TextShapeInside"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性允许将
        <a href="text.html#TermContentArea">内容区域</a> 设置为
        <a href="http://dev.w3.org/csswg/css-shapes/#basic-shape-functions">CSS 基本形状</a> 或 SVG
        <a href="shapes.html#TermShapeElement">形状</a>。
    </p>

    <p class="note">
        在 CSS/HTML 中，<a class="property" href="text.html#TextShapeInside">shape-inside</a> 应用于块级元素，
        绝对值和百分比值是相对于块级元素定义的。

        在 SVG 中，绝对值和百分比值是相对于当前
        <a href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">用户坐标系统</a> 和
        <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> 定义的。
    </p>

    <table class="propdef def">
        <tr>
            <th>名称：</th>
            <td><dfn id="ShapeInsideProperty" data-dfn-type="property" data-export="">shape-inside</dfn></td>
        </tr>
        <tr>
            <th>值：</th>
            <td>auto | [ &lt;basic-shape> | &lt;uri> ]+</td>
        </tr>
        <tr>
            <th>初始值：</th>
            <td>auto</td>
        </tr>
        <tr>
            <th>适用于：</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素</td>
        </tr>
        <tr>
            <th>继承：</th>
            <td>否</td>
        </tr>
        <tr>
            <th>百分比：</th>
            <td>相对于 <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> 定义
            </td>
        </tr>
        <tr>
            <th>媒体：</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值：</th>
            <td>计算后的长度用于 &lt;shape>，绝对 URI 用于 &lt;uri>，否则按指定处理</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
            <td>是，详见 <a href="https://www.w3.org/TR/css-shapes/#basic-shape-interpolation">基本形状插值</a></td>
        </tr>
    </table>

    <dl>
        <dt><span class="attr-value">auto</span></dt>
        <dd>
            对于 SVG 来说，'auto' 值表示内容区域应通过
            <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性或按预格式化文本定义。
        </dd>

        <dt><span class="attr-value">&lt;basic-shape></span></dt>
        <dd>
            形状基于 'circle()'、'ellipse()' 或 'polygon()' 的值计算得出。CSS 值 'inset()' 对于 SVG 是无效的。

            <div class="example">
                <p>
                    使用 CSS 基本形状进行水平文本换行的示例。
                </p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="300" viewBox="0 0 300 300">

  &lt;text style="font: 20px/25px sans-serif;
               text-align: center;
               shape-inside: circle(120px at 150px 150px);">
    Lorem ipsum dolor sit amet, consec-tetuer adipiscing elit...&lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-circle.png"
                        alt="显示文本包裹在圆形内的图像。">
                    <p class="caption">
                        文本包裹在 CSS 圆形形状内。浅蓝色圆形表示
                        <a href="text.html#TermContentArea">内容区域</a> 的边界。
                    </p>
                </div>
            </div>

        </dd>

        <dt><span class="attr-value">&lt;uri></span></dt>
        <dd>
            如果 &lt;uri> 引用了 SVG <a href="shapes.html#TermShapeElement">形状</a> 元素，则该元素定义形状。
            否则，如果 &lt;uri> 引用的是图像，形状基于指定图像的 alpha 通道并使用
            <a class="property" href="text.html#TextShapeImageThreshold">shape-image-threshold</a> 计算得出。
            如果 &lt;uri> 未引用 SVG 形状元素或图像，则效果与指定 'auto' 值时相同。

            <div class="example">
                <p>
                    使用引用 SVG <a href="shapes.html#TermShapeElement">形状</a> 进行水平文本换行的示例。
                </p>

                <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;defs>
    &lt;rect id="wrap" x="50" y="10" width="200" height="80">
  &lt;/defs>

  &lt;text style="font: 20px sans-serif; shape-inside: url(#wrap);">
    This text wraps in a rectangle.&lt;/text>

&lt;/svg>
</pre>

                <div class="figure">
                    <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-rectangle.svg"
                        alt="显示文本包裹在矩形内的图像。">
                    <p class="caption">
                        文本包裹在 SVG 矩形形状内。浅蓝色线表示
                        <a href="text.html#TermContentArea">内容区域</a> 的边界。
                    </p>
                </div>
            </div>
        </dd>
    </dl>

    <p>
        CSS 的 'outside-shape'、'shape-box' 和 'display' 值对于 SVG 是无效的。
    </p>

    <p>
        SVG 允许 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性包含形状列表。每个形状定义一个独立的
        <a href="text.html#TermContentArea">内容区域</a>。文本首先布局在第一个形状的内容区域内。
        如果文本溢出了第一个形状，则溢出文本会布局在下一个形状内，直到所有文本布局完成或没有更多形状可用为止。
    </p>

    <p class="note">
        该效果类似于 CSS 列布局，但列可以具有任意形状。
    </p>

    <p>
        建议提供一个 "overflow" 形状，以确保在某些情况下（例如用户增加字体大小时）所有文本的可访问性。
    </p>

    <p class="note">
        除非另有说明，<a href="http://dev.w3.org/csswg/css-shapes-2/#shape-inside-property">'shape-inside'</a> 的定义请参见 CSS
        Shapes Module Level 2。
        [<a href="refs.html#ref-css-shapes-2">css-shapes-2</a>]
    </p>

    <p class="annotation">
        'shape-inside' 在 CSS 排除和形状模块拆分为单独的排除和形状模块时被移除。
        在东京联合 SVG/CSS F2F 会议上，达成共识，将其重新出现在 CSS Shapes Module Level 2 中。
    </p>

    <h3 id="TextShapeSubtract" class="heading">11.4.3. ‘<span class="property">shape-subtract</span>’ 属性<a
            class="self-link" href="#TextShapeSubtract"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 属性允许从
        <a href="text.html#TermContentArea">内容区域</a> 中排除部分区域，
        从而影响 <a href="text.html#TermWrappingArea">换行区域</a>。
        被排除的区域是通过一个
        <a href="http://dev.w3.org/csswg/css-shapes/#basic-shape-functions">CSS 基本形状</a> 和/或 SVG
        <a href="shapes.html#TermShapeElement">形状</a> 列表定义的所有区域的组合。
    </p>

    <p class="annotation">
        在 2016 年悉尼 F2F 会议上决定，由于需要不同的行为，应使用 'shape-subtract' 而不是 'shape-outside'。
        （'shape-outside' 减少了排除区域的面积。）
    </p>

    <p class="note">
        绝对值和百分比值是相对于当前
        <a href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">用户坐标系统</a> 和
        <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> 定义的。
    </p>

    <table class="propdef def">
        <tr>
            <th>名称：</th>
            <td><dfn id="ShapesubtractProperty" data-dfn-type="property" data-export="">shape-subtract</dfn></td>
        </tr>
        <tr>
            <th>值：</th>
            <td>none | [ &lt;basic-shape>| &lt;uri> ]+</td>
        </tr>
        <tr>
            <th>初始值：</th>
            <td>none</td>
        </tr>
        <tr>
            <th>适用于：</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素</td>
        </tr>
        <tr>
            <th>继承：</th>
            <td>否</td>
        </tr>
        <tr>
            <th>百分比：</th>
            <td>相对于 <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> 定义
            </td>
        </tr>
        <tr>
            <th>媒体：</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值：</th>
            <td>计算后的长度用于任何 &lt;basic-shape>，绝对 URI 用于 &lt;uri>，否则按指定处理</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
            <td>是，详见 <a href="https://www.w3.org/TR/css-shapes/#basic-shape-interpolation">基本形状插值</a></td>
        </tr>
    </table>

    <dl>
        <dt><span class="attr-value">&lt;basic-shape></span></dt>
        <dd>
            形状基于 'circle()'、'ellipse()' 或 'polygon()' 的值计算得出。
        </dd>

        <dt><span class="attr-value">&lt;uri></span></dt>
        <dd>
            对于引用 SVG <a href="shapes.html#TermShapeElement">形状</a> 元素的 &lt;uri>，
            该元素定义了贡献的形状，并由其
            <a class="property" href="text.html#TextShapeMargin">shape-margin</a> 距离扩展。
            对于引用图像的 &lt;uri>，贡献的形状基于指定图像的 alpha 通道并使用
            <a class="property" href="text.html#TextShapeImageThreshold">shape-image-threshold</a> 计算得出。
            如果 &lt;uri> 未引用 SVG 形状元素或图像，则忽略该 &lt;uri>。
        </dd>
    </dl>

    <div class="example">
        <p>
            使用 <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 的示例。
        </p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="450" height="300" viewBox="0 0 450 300">

  &lt;rect id="rect1" x="25"  y="25"  width="225" height="175" fill="white" stroke="black">
  &lt;rect id="rect2" x="200" y="125" width="225" height="150" fill="white" stroke="black"
        style="shape-margin:25px;">

  &lt;text style="shape-inside:url(#rect1);
	       shape-subtract:url(#rect2);
	       shape-padding:25px;
           font-family:DejaVu Sans;
	       font-size:12px;
	       text-align:justified;
	       line-height:110%">Lorem ipsum ...&lt;/text>
  &lt;text style="shape-inside:url(#rect2);
	       shape-padding:25px;
               font-family:DejaVu Sans;
	       font-size:12px;
	       text-align:justified;
	       line-height:110%">Lorem ipsum ...&lt;/text>
&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-wrap-complex.png"
                alt="显示水平文本包裹在两个重叠矩形中的图像。">
            <p class="caption">
                使用 <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 以及
                <a class="property" href="text.html#TextShapeInside">shape-inside</a>、<a class="property"
                    href="text.html#TextShapePadding">shape-padding</a> 和
                <a class="property" href="text.html#TextShapeMargin">shape-margin</a> 在两个重叠矩形中进行水平文本换行。
                黑色矩形显示 <a href="text.html#TermContentArea">内容区域</a>。
                内部的蓝色线条显示 <a href="text.html#TermWrappingArea">换行区域</a>。
            </p>
        </div>
    </div>

    <h3 id="TextShapeImageThreshold" class="heading">11.4.4. ‘<span class="property">shape-image-threshold</span>’ 属性<a
            class="self-link" href="#TextShapeImageThreshold"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeImageThreshold">shape-image-threshold</a> 定义了用于从图像中提取形状的
        alpha 通道阈值。值为 0.5 意味着形状将包含所有不透明度超过 50% 的像素。
    </p>

    <p>
        对于 SVG，这个属性适用于 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素。
    </p>

    <p class="note">
        除非另有说明，<a href="https://www.w3.org/TR/css-shapes/#shape-image-threshold-property">'shape-image-threshold'</a>
        的定义请参见 CSS Shapes Module Level 1。
        [<a href="refs.html#ref-css-shapes-1">css-shapes-1</a>]
    </p>

    <h3 id="TextShapeMargin" class="heading">11.4.5. ‘<span class="property">shape-margin</span>’ 属性<a class="self-link"
            href="#TextShapeMargin"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapeMargin">shape-margin</a> 属性为使用
        <a class="property" href="text.html#TextShapeSubtract">shape-subtract</a> 引用的形状添加边距。
        它定义了一个新的形状，其中每个点都距离原始形状指定的距离。此属性仅接受正值。
    </p>

    <table class="propdef def">
        <tr>
            <th>名称：</th>
            <td><dfn id="ShapeMarginProperty" data-dfn-type="property" data-export="">shape-margin</dfn></td>
        </tr>
        <tr>
            <th>值：</th>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a></td>
        </tr>
        <tr>
            <th>初始值：</th>
            <td>0</td>
        </tr>
        <tr>
            <th>适用于：</th>
            <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素</td>
        </tr>
        <tr>
            <th>继承：</th>
            <td>否</td>
        </tr>
        <tr>
            <th>百分比：</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>媒体：</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值：</th>
            <td>绝对长度</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
            <td>是</td>
        </tr>
    </table>

    <p class="note">
        除非另有说明，<a href="https://www.w3.org/TR/css-shapes/#shape-margin-property">'shape-margin'</a> 的定义请参见 CSS Shapes
        Module Level 1。
        [<a href="refs.html#ref-css-shapes-1">css-shapes-1</a>]
    </p>

    <h3 id="TextShapePadding" class="heading">11.4.6. ‘<span class="property">shape-padding</span>’ 属性<a
            class="self-link" href="#TextShapePadding"></a></h3>

    <p>
        <a class="property" href="text.html#TextShapePadding">shape-padding</a> 属性用于在元素内部的包裹内容流中创建偏移。
        由 'wrap-padding' 属性产生的偏移是相对于元素的内容区域进行的。此属性仅接受正值。
    </p>

    <div class="example">
        <p>使用 <a class="property" href="text.html#TextShapePadding">shape-padding</a> 的示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="300" viewBox="0 0 300 300">

  &lt;circle id="circle" cx="150" cy="150" r="125" fill="none" stroke="black">
  &lt;text style="shape-inside: url(#circle);
	       shape-padding: 25px;
	       font: 18px DejaVu Sans;
	       text-align: justified;
	       line-height: 110%;">This is an
  example of wrapped text in SVG 2! There should
  be 25 pixel padding around the text. The text is
  justified on both sides. It looks good!&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-shape-padding.png"
                alt="显示带有填充的圆形内部水平文本包裹的图像。">
            <p class="caption">
                带有 <a class="property" href="text.html#TextShapePadding">shape-padding</a> 的圆形内部水平文本包裹。
                外部黑色圆形表示 <a href="text.html#TermContentArea">内容区域</a>。内部蓝色圆形表示
                <a href="text.html#TermWrappingArea">包裹区域</a>。
            </p>
        </div>
        <p class="annotation">此图像为 PNG。找出如何制作优质的 SVG。注意：Chrome 支持 'tspan' 上的 'textLength'，但 Firefox 不支持。</p>
    </div>

    <p class="note">
        除非另有说明，<a href="http://dev.w3.org/csswg/css-shapes-2/#shape-padding-property">'shape-padding'</a> 的定义请参见 CSS
        Shapes Module Level 2。
    </p>

    <h2 id="TextLayoutAlgorithm" class="heading">11.5. 文本布局 – 算法<a class="self-link" href="#TextLayoutAlgorithm"></a>
    </h2>

    <div class="ready-for-wider-review">

        <p>
            文本布局从将 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
            元素的内容（包括文本数据、
            样式信息以及一个或多个要填充的形状描述）传递给基于 CSS 的文本渲染器开始。
            <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素被视为块元素，
            其后代 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>、<span
                class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
            和 <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span> 元素被视为内联元素。
            CSS 渲染器返回一组 <a href="text.html#TermTypographicCharacterUnit">印刷字符单元</a> 及其布局文本的结果位置，
            如同文本是绝对定位一样。
        </p>
        <p class="note">
            一个 <a href="text.html#TermTypographicCharacterUnit">印刷字符</a> 可能包含多个 <a href="text.html#TermGlyph">字形</a>。
            这里假设 <a href="text.html#TermGlyph">字形</a> 在 <a href="text.html#TermTypographicCharacterUnit">印刷字符单元</a>
            内的相对位置是封装的，用户无法控制。
        </p>
        <p>
            一旦定义了 <a href="text.html#TermContentArea">内容区域</a>，以下算法用于确定给定 <span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span> 元素的
            <a href="text.html#TermTypographicCharacterUnit">印刷字符</a>及其位置：
        </p>

        <ul class="algorithm">
            <li>
                对于由 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性定义的
                <a href="text.html#TermContentArea">内容区域</a>中的文本，根据 CSS 规则在一个或多个区域中布局文本，如同在 CSS <a
                    href="text.html#TermWrappingArea">包裹区域</a>中布局文本。
                <p class="note">
                    SVG 允许 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性引用多个形状。应依次填充每个形状，
                    直到没有更多文本或没有更多形状。
                </p>
            </li>
            <li>
                对于由 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性定义的 <a
                    href="text.html#TermContentArea">内容区域</a>中的文本，
                在 CSS 内容框中布局文本，该框的 <a href="http://dev.w3.org/csswg/css-writing-modes/#inline-size">inline size</a> 设置为
                <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性的值，<a
                    href="http://dev.w3.org/csswg/css-writing-modes/#block-size">block size</a> 不受约束。
                <p class="note">
                    这意味着如果 <a class="property" href="text.html#WritingModeProperty">writing-mode</a> 为 <span
                        class="prop-value">horizontal-tb</span>，
                    文本的布局宽度将设置为 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 值，否则设置为盒子的高度。
                </p>
            </li>
            <li>
                对于所有其他文本（与 SVG 1.1 兼容的文本和类似 SVG 1.1 的多行文本），在宽度和高度不受约束的 CSS 内容框中布局文本。
            </li>
        </ul>

        <p>
            某些 CSS 属性对 SVG 文本布局没有或只有有限影响：
        </p>

        <ul>
            <li>
                对于 <a href="text.html#TermTextContentElement">文本内容元素</a>及其伪元素（如果有），以及在 <a
                    href="text.html#TermTextContentBlockElement">文本内容块元素</a>内的
                <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span>
                元素，以下属性的使用值必须是属性的初始值：
                ‘<span class="property">border-style</span>’、
                ‘<span class="property">float</span>’、
                ‘<span class="property">margin</span>’、
                ‘<span class="property">padding</span>’、
                ‘<span class="property">position</span>’ 和
                ‘<span class="property">text-align</span>’。
            </li>

            <li>
                如果正确父元素中的 <a class="property" href="render.html#VisibilityControl">display</a> 属性的计算值为
                <span class="prop-value">none</span> 以外的任何值，则其使用值必须为 <span class="prop-value">block</span>。
                <p class="note">
                    这确保 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                    元素被视为块元素。
                </p>
            </li>

            <li>
                如果正确父元素中的 <a class="property" href="render.html#VisibilityControl">display</a> 属性的计算值为
                <span class="prop-value">none</span> 以外的任何值，则 <span class="element-name">‘<a
                        href="text.html#TextElement"><span>tspan</span></a>’</span>、
                <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 和
                <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span> 元素将被视为内联元素。
            </li>

            <li>
                如果一个元素是 <a href="text.html#TermTextContentBlockElement">文本内容块元素</a>的后代，并且既不是 <a
                    href="struct.html#UnknownElement">未知元素</a>，
                也不是正确父元素中的 <a href="text.html#TermTextContentChildElement">文本内容子元素</a> 或
                <span class="element-name">‘<a href="linking.html#AElement"><span>a</span></a>’</span> 元素，
                则其 display 属性值必须为 <span class="prop-value">none</span>。
                <p class="note">
                    这确保了在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                    元素内的图形和元数据元素不会呈现。
                </p>
            </li>
        </ul>

        <p>
            根据如何定义 <a href="text.html#TermContentArea">内容区域</a>，各种 SVG 属性和属性可能会重新定位
            <a href="text.html#TermTypographicCharacterUnit">印刷字符</a>：
        </p>

        <ul>
            <li>
                对于由 <a class="property" href="text.html#TextShapeInside">shape-inside</a> 属性定义的 <a
                    href="text.html#TermContentArea">内容区域</a>的文本，
                <a href="text.html#TermTypographicCharacterUnit">印刷字符</a> 的渲染位置与 CSS 渲染器返回的位置一致。
            </li>
            <li>
                对于由 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性定义的 <a
                    href="text.html#TermContentArea">内容区域</a>的文本，
                每个 <a href="text.html#TermLineBox">行框</a> 根据 <a class="property"
                    href="text.html#TextAnchorProperty">text-anchor</a> 属性进行位移。
            </li>
            <li>
                对于所有其他文本（与 SVG 1.1 兼容的文本和类似 SVG 1.1 的多行文本），<a href="text.html#TermTypographicCharacterUnit">印刷字符</a>
                的位置将根据以下算法进行调整。
            </li>
        </ul>

        <p>
            以下 SVG 文本布局算法返回关于 DOM 中的每个字符的信息，该信息包含：
        </p>

        <ul>
            <li>
                一个全局索引号，指示字符相对于 <span class="element-name">‘<a
                        href="text.html#TextElement"><span>text</span></a>’</span> 元素开头的索引；
            </li>
            <li>
                一个 (x, y) 坐标对，给出其在 <span class="element-name">‘<a
                        href="text.html#TextElement"><span>text</span></a>’</span> 元素的坐标空间中的位置；
            </li>
            <li>
                一个角度值，表示其旋转角度；
            </li>
            <li>
                一个 "hidden" 标志，表示它是否由于超出 <span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span> 而隐藏；
            </li>
            <li>
                一个 "addressable" 标志，表示它是否是 <a href="text.html#TermAddressableCharacter">可寻址字符</a>，即可以通过文本定位属性和 SVG DOM
                文本方法进行定位的字符；
            </li>
            <li>
                一个 "middle" 标志，表示它是否是 <a href="text.html#TermTypographicCharacterUnit">印刷字符单元</a>的第二个或后续字符；
            </li>
            <li>
                一个 "anchored chunk" 标志，表示它是否启动了可以受文本锚定影响的连续字形序列。
            </li>
        </ul>

        <p class="note">
            SVG 属性 <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
                class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
            中给出的数组由 <a href="text.html#TermAddressableCharacter">可寻址字符</a>索引。
            但是，重新定位应用于 <a href="text.html#TermTypographicCharacterUnit">印刷字符</a>。如果 <a
                href="text.html#TermTypographicCharacterUnit">印刷字符</a>
            对应多个字符（例如连字），则仅使用与第一个字符对应的数组值来定位 <a href="text.html#TermTypographicCharacterUnit">印刷字符</a>。
            与其他字符对应的数组值将被跳过（对于 <span class="attr-name">‘<a
                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>），
            累积并应用于下一个 <a href="text.html#TermTypographicCharacterUnit">印刷字符</a>（对于
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>），
            或者如果它是数组中的最后一个值，则应用于后续的 <a href="text.html#TermTypographicCharacterUnit">印刷字符</a>（对于
            <span class="attr-name">‘<a
                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>）。这确保了，无论字体是否包含特定的连字，
            属性值都应用于相同的字符。
        </p>

        <p>
            SVG 特定文本布局算法如下：
        </p>

        <ol class="algorithm">
            <li>
                <b>设置</b>
                <ol>
                    <li>
                        让 <var>root</var> 为生成
                        <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 位置的结果，
                        对于
                        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                        元素及其子树进行布局，仿佛它是一个绝对定位的元素。
                        <p class="note">
                            除非 <a class="property"
                                href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 属性
                            导致换行，否则这将是单行文本。
                        </p>
                    </li>
                    <li>
                        让 <var>count</var> 为 DOM <em>字符</em>
                        在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                        元素的子树中的数量。
                    </li>
                    <li>
                        让 <var>result</var> 为一个长度为 <var>count</var> 的数组，
                        其条目包含上述每个字符的信息。每个条目初始化如下：
                        <ul>
                            <li>其全局索引号等于其在数组中的位置，</li>
                            <li>其 "x" 坐标设置为 "未指定"，</li>
                            <li>其 "y" 坐标设置为 "未指定"，</li>
                            <li>其 "rotate" 坐标设置为 "未指定"，</li>
                            <li>其 "hidden" 标志为假，</li>
                            <li>其 "addressable" 标志为真，</li>
                            <li>其 "middle" 标志为假，</li>
                            <li>其 "anchored chunk" 标志为假。</li>
                        </ul>
                        如果 <var>result</var> 为空，则返回 <var>result</var>。
                    </li>
                    <li>
                        让 <var>CSS_positions</var> 为一个长度为
                        <var>count</var> 的数组，其条目将填充对应的
                        <var>x</var> 和 <var>y</var> 位置
                        在 <var>root</var> 中的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>。
                        数组条目初始化为 (0, 0)。
                    </li>
                    <li>
                        让 "horizontal" 为一个标志，如果 <span class="element-name">‘<a
                                href="text.html#TextElement"><span>text</span></a>’</span>
                        的书写模式是水平，则为真，否则为假。
                    </li>
                </ol>
            </li>
            <li>
                <b>设置标志并分配初始位置</b>
                <p>
                    对于 <var>result</var> 中索引为 <var>i</var> 的每个数组元素：
                </p>
                <ol>
                    <li>
                        如果索引 <var>i</var> 处的字符为：
                        <ul>
                            <li>
                                <a href="render.html#TermNonRenderedElement">未渲染元素</a> 的文本内容的一部分
                            </li>
                            <li>
                                在布局过程中因成为 <a href="https://www.w3.org/TR/css-text-3/#white-space-phase-1">折叠的
                                    空白字符</a>、软连字符或双向控制字符而被丢弃；<i>或</i>
                            </li>
                            <li>
                                在布局过程中因成为 <a href="https://www.w3.org/TR/css-text-3/#line-break-transform">折叠的
                                    段落分隔符</a> 而被丢弃；<i>或</i>
                            </li>
                            <li>
                                从行的开始或结束 <a href="https://www.w3.org/TR/css-text-3/#white-space-phase-2">修剪</a>。
                            </li>
                        </ul>
                        <div class="note">
                            <p>
                                由于以下 <span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span> 元素中有可折叠的空白
                                （使用标准字体），因此 "B" 字形将被放置在 x=300。
                            </p>
                            <pre>&lt;text x="100 200 300">
	      A
	      B
	      &lt;/text></pre>
                            <p>
                                这是因为 "A" 前的空白，以及 "A" 和 "B" 之间的所有空白字符，已被折叠或修剪。
                            </p>
                        </div>
                    </li>
                    <li>
                        如果索引 <var>i</var> 处的字符是第二个或后续的对应于 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>，则将
                        <var>middle</var> 设置为真。
                    </li>
                    <li>
                        如果索引 <var>i</var> 处的字符对应于一行开头的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>，则将
                        <var>result</var>[<var>i</var>] 的 "anchored
                        chunk" 标志设置为真。
                        <p class="note">
                            这确保由于 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 移动的块不会跨越多行。
                        </p>
                    </li>
                    <li>
                        如果 <var>addressable</var> 为真且 <var>middle</var> 为假，则将
                        <var>CSS_positions</var>[<var>i</var>] 设置为对应的 <a
                            href="text.html#TermTypographicCharacterUnit">排版字符</a> 的位置，
                        由 CSS 渲染器确定。否则，如果 <var>i</var> > 0，则设置
                        <var>CSS_positions</var>[<var>i</var>] =
                        <var>CSS_positions</var>[<var>i</var> − 1]
                    </li>
                </ol>
            </li>
            <li>
                <b>解析字符定位</b>
                <p class="note">
                    位置调整（例如在 <span class="attr-name">‘<a
                            href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 属性中的值）
                    由节点指定，适用于该节点中的所有字符，包括
                    节点子孙中的字符。然而，在子孙节点中指定的调整会覆盖祖先节点的调整。此部分解析将应用于
                    哪些字符的调整。它还直接设置 <var>result</var> 的 <var>rotate</var> 坐标。
                </p>
                <ol>
                    <li>
                        设置：
                        <ol>
                            <li>
                                让 <var>resolve_x</var>、<var>resolve_y</var>、
                                <var>resolve_dx</var> 和 <var>resolve_dy</var> 为长度为
                                <var>count</var> 的数组，所有条目初始化为 "未指定"。
                            </li>
                            <li>
                                设置 "in_text_path" 标志为假。
                                <p class="note">
                                    此标志将允许 <span class="attr-name">‘<a
                                            href="text.html#TextElementYAttribute"><span>y</span></a>’</span> （<span
                                        class="attr-name">‘<a
                                            href="text.html#TextElementXAttribute"><span>x</span></a>’</span>）
                                    属性值在 <span class="element-name">‘<a
                                            href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素中的
                                    水平（垂直）文本被忽略。
                                </p>
                            </li>
                            <li>
                                使用 <span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span> 元素节点调用以下过程。
                            </li>
                        </ol>
                    </li>
                    <li>
                        程序： <b id="ResolveGlyphPositioning"><i>解析字符定位</i></b>：
                        <p>
                            一个递归程序，输入为 <var>node</var>，步骤如下：
                        </p>
                        <ol>
                            <li>
                                如果 <var>node</var> 是 <span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span> 或 <span
                                    class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
                                节点：
                                <ol>
                                    <li>
                                        让 <var>index</var> 等于节点中第一个字符的 "全局索引编号"。
                                    </li>
                                    <li>
                                        让 <var>x</var>、<var>y</var>、<var>dx</var>、<var>dy</var>
                                        和 <var>rotate</var> 为对应于 <var>node</var> 的属性值列表，或者如果对应的属性未指定或无效则为空列表。
                                    </li>
                                    <li>
                                        如果 "in_text_path" 标志为假：
                                        <ul>
                                            <li>
                                                让 <var>new_chunk_count</var>
                                                = max(<var>x</var> 的长度, <var>y</var> 的长度)。
                                            </li>
                                        </ul>
                                        否则：
                                        <ul>
                                            <li>
                                                如果 "horizontal" 标志为真：
                                                <ul>
                                                    <li>
                                                        让 <var>new_chunk_count</var> = <var>x</var> 的长度。
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                否则：
                                                <ul>
                                                    <li>
                                                        让 <var>new_chunk_count</var> = <var>y</var> 的长度。
                                                    </li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        让 <var>length</var> 为以 <var>node</var> 为根的子树中的 DOM 字符数。
                                    </li>
                                    <li>
                                        让 <var>i</var> = 0 和 <var>j</var> = 0。
                                        <p class="note">
                                            <var>i</var> 是节点中的 <a href="text.html#TermAddressableCharacter">可寻址字符</a>索引；
                                            <var>j</var> 是节点中的所有 <a href="text.html#TermCharacter">字符</a>索引。
                                        </p>
                                    </li>
                                    <li>
                                        当 <var>j</var> &lt; <var>length</var> 时，执行：
                                        <p class="note">
                                            此循环将 <span class="attr-name">‘<a
                                                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
                                            <span class="attr-name">‘<a
                                                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
                                            和 <span class="attr-name">‘<a
                                                    href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
                                            属性应用于 <var>node</var> 内的内容。
                                        </p>
                                        <ol>
                                            <li>
                                                如果 <var>result</var>[<var>index</var> +
                                                <var>j</var>] 的 "addressable" 标志为真，则：
                                                <ol>
                                                    <li>
                                                        如果 <var>i</var> &lt; <var>new_check_count</var>，则
                                                        将 <var>result</var>[<var>index</var> + <var>j</var>] 的 "anchored
                                                        chunk" 标志设为真。否则将标志设为假。
                                                        <p class="note">
                                                            将标志设为假确保 <span class="attr-name">‘<a
                                                                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                                                            和 <span class="attr-name">‘<a
                                                                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                                                            属性在 <span class="element-name">‘<a
                                                                    href="text.html#TextElement"><span>text</span></a>’</span>
                                                            元素中设置时不会在 <span class="element-name">‘<a
                                                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                                                            元素中创建不应存在的锚定块。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        如果 <var>i</var> &lt; <var>x</var> 的长度，
                                                        则将 <var>resolve_x</var>[<var>index</var>
                                                        + <var>j</var>] 设为 <var>x</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        如果 "in_text_path" 标志为真且 "horizontal"
                                                        标志为假，则取消设置
                                                        <var>resolve_x</var>[<var>index</var>]。
                                                        <p class="note">
                                                            <span class="attr-name">‘<a
                                                                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                                                            属性在路径上的垂直文本中被忽略。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        如果 <var>i</var> &lt; <var>y</var> 的长度，
                                                        则将 <var>resolve_y</var>[<var>index</var>
                                                        + <var>j</var>] 设为 <var>y</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        如果 "in_text_path" 标志为真且 "horizontal"
                                                        标志为真，则取消设置
                                                        <var>resolve_y</var>[<var>index</var>]。
                                                        <p class="note">
                                                            <span class="attr-name">‘<a
                                                                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                                                            属性在路径上的水平文本中被忽略。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        如果 <var>i</var> &lt; <var>dx</var> 的长度，
                                                        则将 <var>resolve_dx</var>[<var>index</var>
                                                        + <var>j</var>] 设为 <var>dy</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        如果 <var>i</var> &lt; <var>dy</var> 的长度，
                                                        则将 <var>resolve_dy</var>[<var>index</var>
                                                        + <var>j</var>] 设为 <var>dy</var>[<var>i</var>]。
                                                    </li>
                                                    <li>
                                                        如果 <var>i</var> &lt; <var>rotate</var> 的长度，
                                                        则将 <var>result</var>[<var>index</var>
                                                        + <var>j</var>] 的角度值设为 <var>rotate</var>[<var>i</var>]。
                                                        否则，如果 <var>rotate</var> 不为空，则
                                                        将 <var>result</var>[<var>index</var> + <var>j</var>]
                                                        设为 <var>result</var>[<var>index</var> + <var>j</var> − 1]。
                                                    </li>
                                                    <li>
                                                        设 <var>i</var> = <var>i</var> + 1。
                                                    </li>
                                                </ol>
                                            </li>
                                            <li>
                                                设 <var>j</var> = <var>j</var> + 1。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                如果 <var>node</var> 是一个 <span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span> 节点：
                                <ol>
                                    <li>
                                        让 <var>index</var> 等于节点中第一个字符的全局索引号（包括子节点）。
                                    </li>
                                    <li>
                                        将 <var>result</var>[<var>index</var>] 的“锚定块”标志设置为 true。
                                        <p class="note">
                                            <span class="element-name">‘<a
                                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                                            元素始终创建一个锚定块。
                                        </p>
                                    </li>
                                    <li>
                                        将 <var>in_text_path</var> 标志设置为 true。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                对于每个子节点 <var>child</var> 的 <var>node</var>：
                                <ol>
                                    <li>
                                        <a href="#ResolveGlyphPositioning">解析字形定位</a> <var>child</var>。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                如果 <var>node</var> 是一个 <span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span> 节点：
                                <ol>
                                    <li>
                                        将 “in_text_path” 标志设置为 false。
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>调整位置：dx, dy</b>
                <p class="note">
                    <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>
                    和 <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
                    调整在因 <span class="attr-name">‘<a
                            href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                    属性的调整之前应用，而
                    <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>，
                    <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 和
                    <span class="attr-name">‘<a
                            href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
                    调整在之后应用。
                </p>
                <ol>
                    <li>
                        让 <var>shift</var> 为因 <span class="attr-name">‘<a
                                href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span
                            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                        属性的累计 <var>x</var> 和 <var>y</var> 偏移，初始化为 (0,0)。
                    </li>
                    <li>
                        对于结果中索引为 <var>i</var> 的每个数组元素：
                        <ol>
                            <li>
                                如果 <var>resolve_x</var>[<var>i</var>] 未指定，则将其设置为 0。
                                如果 <var>resolve_y</var>[<var>i</var>] 未指定，则将其设置为 0。
                            </li>
                            <li>
                                让 <var>shift.x</var> = <var>shift.x</var> + <var>resolve_x</var>[<var>i</var>]
                                和 <var>shift.y</var> = <var>shift.y</var> + <var>resolve_y</var>[<var>i</var>]。
                            </li>
                            <li>
                                让 <var>result</var>[<var>i</var>].x = CSS_positions[<var>i</var>].x + shift.x
                                和 <var>result</var>[<var>i</var>].y = CSS_positions[<var>i</var>].y + shift.y。
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>应用 <span class="attr-name">‘<a
                            href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                    属性</b>
                <ol>
                    <li>
                        设置：
                        <ol>
                            <li>
                                定义 <dfn id="TermResolvedDescendantNode" data-dfn-type="dfn" data-export="">已解析的
                                    后代节点</dfn> 为具有有效的 <span class="attr-name">‘<a
                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                                属性的节点，其本身不是具有有效 <span class="attr-name">‘<a
                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                                属性的后代节点的后代节点。
                            </li>
                            <li>
                                调用以下过程，使用 <span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span> 元素节点。
                            </li>
                        </ol>
                    </li>
                    <li>
                        过程： <b id="ResolveTextLength"><i>解析文本长度</i></b>：
                        <p>
                            一个递归过程，输入为 <var>node</var>，其步骤如下：
                        </p>
                        <ol>
                            <li>
                                对于节点的每个子节点 <var>child</var>：
                                <ol>
                                    <li>
                                        <a href="#ResolveTextLength">解析文本长度</a> 子节点。
                                        <p class="note">
                                            子节点在父节点之前调整。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                如果 <var>node</var> 是一个 <span class="element-name">‘<a
                                        href="text.html#TextElement"><span>text</span></a>’</span> 或 <span
                                    class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
                                节点，并且该节点具有有效的 <span class="attr-name">‘<a
                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                                属性值：
                                <ol>
                                    <li>
                                        让 <var>a</var> = +∞ 和 <var>b</var> = −∞。
                                    </li>
                                    <li>
                                        让 <var>i</var> 和 <var>j</var> 为 <var>node</var> 中第一个字符和最后一个字符的全局索引。
                                    </li>
                                    <li>
                                        对于范围 [<var>i</var>, <var>j</var>] 中的每个索引 <var>k</var>，其中
                                        <var>result</var>[<var>k</var>] 的“可寻址”标志为 true：
                                        <p class="note">
                                            此循环找到节点中 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的最左（上）和
                                            最右（下）范围，并检查强制换行。
                                        </p>
                                        <ol>
                                            <li>
                                                如果字符在 <var>k</var> 处为换行符或回车符，则返回。没有因
                                                <span class="attr-name">‘<a
                                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                                                对具有强制换行的节点进行调整。
                                            </li>
                                            <li>
                                                让 <var>pos</var> = <var>result</var>[<var>k</var>] 中位置的 x 坐标，如果“水平”
                                                标志为 true，则为 y 坐标，否则。
                                            </li>
                                            <li>
                                                让 <var>advance</var> = 与字符 <var>k</var> 对应的 <a
                                                    href="text.html#TermTypographicCharacterUnit">排版
                                                    字符</a> 的进位。[注意：此进位对于 RTL 水平文本将为负。]
                                            </li>
                                            <li>
                                                设置 <var>a</var> =
                                                min(<var>a</var>, <var>pos</var>, <var>pos</var>
                                                + <var>advance</var>)。
                                            </li>
                                            <li>
                                                设置 <var>b</var> =
                                                max(<var>b</var>, <var>pos</var>, <var>pos</var>
                                                + <var>advance</var>)。
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        如果 <var>a</var> ≠ +∞ 则：
                                        <ol>
                                            <li>
                                                找到距离 <var>delta</var> = <span class="attr-name">‘<a
                                                        href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
                                                计算值 − (b − a)。
                                                <p class="note">
                                                    用户代理需要将节点中最后一个
                                                    <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 向
                                                    <var>delta</var> 的正 <var>x</var> 方向移动，如果“水平”标志为 true，并且
                                                    <a class="property" href="text.html#DirectionProperty">方向</a> 为
                                                    <span class="prop-value">lrt</span>；如果“水平”标志为 true 且
                                                    <a class="property" href="text.html#DirectionProperty">方向</a> 为
                                                    <span class="prop-value">rtl</span>，则向负 <var>x</var> 方向移动；否则向
                                                    正 <var>y</var> 方向移动。用户代理可以自由调整中间的
                                                    <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 以获得最佳
                                                    排版。下一步说明了一种在
                                                    <span class="attr-name">‘<a
                                                            href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                                                    属性值为
                                                    <span class="prop-value">spacing</span> 时调整
                                                    <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的方法。
                                                </p>
                                            </li>
                                            <li>
                                                找到 <var>n</var>，节点中
                                                <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的总数
                                                包括任何未解析的后代节点或在解析的后代节点内的节点。
                                            </li>
                                            <li>
                                                让 <var>n</var> = <var>n</var> + 已解析后代节点的数量 − 1。
                                                <p class="note">
                                                    每个已解析的后代节点在此上下文中视为一个单独的
                                                    <a href="text.html#TermTypographicCharacterUnit">排版字符</a>。
                                                </p>
                                            </li>
                                            <li>
                                                找到每个字符的调整 <var>δ</var>
                                                = <var>delta</var>/<var>n</var>。
                                            </li>
                                            <li>
                                                让 <var>shift</var> = 0。
                                            </li>
                                            <li>
                                                对于范围 [<var>i</var>,<var>j</var>] 中的每个索引 <var>k</var>：
                                                <ol>
                                                    <li>
                                                        如果“水平”标志为 true，则将 <var>shift</var> 加到
                                                        <var>result</var>[<var>k</var>] 中位置的 <var>x</var> 坐标，否则加到
                                                        <var>y</var> 坐标。
                                                    </li>
                                                    <li>
                                                        如果 <var>result</var>[<var>k</var>] 的“中间”标志不为 true 且
                                                        <var>k</var> 不是解析的后代节点中的字符（除了第一个字符），
                                                        则 <var>shift</var> = <var>shift</var> + <var>δ</var>。
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>调整位置：x, y</b>
                <p class="note">
                    此循环应用 <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
                    和 <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 值，
                    并确保 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 块不在
                    <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的中间开始。
                </p>
                <ol>
                    <li>
                        让 <var>shift</var> 为当前因
                        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和
                        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                        属性的调整，初始化为 (0,0)。
                    </li>
                    <li>
                        设置 <var>index</var> = 1。
                    </li>
                    <li>
                        当 <var>index</var> &lt; <var>count</var> 时：
                        <ol>
                            <li>
                                如果 <var>resolved_x</var>[<var>index</var>] 被设置，则让
                                <var>shift.x</var> =
                                <var>resolved_x</var>[<var>index</var>] −
                                <var>result.x</var>[<var>index</var>]。
                            </li>
                            <li>
                                如果 <var>resolved_y</var>[<var>index</var>] 被设置，则让
                                <var>shift.y</var> =
                                <var>resolved_y</var>[<var>index</var>] −
                                <var>result.y</var>[<var>index</var>]。
                            </li>
                            <li>
                                让 <var>result.x</var>[<var>index</var>] =
                                <var>result.x</var>[<var>index</var>] + shift.x
                                和 <var>result.y</var>[<var>index</var>] =
                                <var>result.y</var>[<var>index</var>] + shift.y。
                            </li>
                            <li>
                                如果 <var>result</var>[<var>index</var>] 的“中间”和“锚定块”标志
                                都为 true，则：
                                <ol>
                                    <li>
                                        将 <var>result</var>[<var>index</var>] 的“锚定块”标志
                                        设置为 false。
                                    </li>
                                    <li>
                                        如果 <var>index</var> + 1 &lt; <var>count</var>，则设置
                                        <var>result</var>[<var>index</var> + 1] 的“锚定块”标志为 true。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                将 <var>index</var> 设置为 <var>index</var> + 1。
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>应用锚定</b>
                <ol>
                    <li>
                        对于每个切片 <var>result</var>[<var>i</var>..<var>j</var>]
                        （包括 <var>i</var> 和 <var>j</var>），其中：
                        <ul>
                            <li>
                                <var>result</var>[<var>i</var>] 的“锚定块”标志为 true，
                            </li>
                            <li>
                                <var>result</var>[<var>k</var>] 的“锚定块”标志，其中 <var>i</var>
                                &lt; <var>k</var> ≤ <var>j</var> 为 false，
                            </li>
                            <li>
                                <var>j</var> = <var>count</var> − 1 或 <var>result</var>[<var>j</var> + 1] 的“锚定
                                块”标志为 true；
                            </li>
                        </ul>
                        执行：
                        <p class="note">
                            此循环遍历每个锚定块。
                        </p>
                        <ol>
                            <li>
                                让 <var>a</var> = +∞ 和 <var>b</var> = −∞。
                            </li>
                            <li>
                                对于范围内的每个索引 <var>k</var>
                                [<var>i</var>, <var>j</var>]，其中 <var>result</var>[<var>k</var>] 的“可寻址”标志
                                为 true：
                                <p class="note">
                                    此循环找到锚定块内的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的左（上）和
                                    右（下）最边缘。
                                </p>
                                <ol>
                                    <li>
                                        让 <var>pos</var> = <var>result</var>[<var>k</var>] 中的位置的 x 坐标，
                                        如果“水平”标志为 true，则为 y 坐标。
                                    </li>
                                    <li>
                                        让 <var>advance</var> = 与字符 <var>k</var> 对应的
                                        <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的进展。
                                        [注意：此进展对于 RTL 水平文本将为负。]
                                    </li>
                                    <li>
                                        设置 <var>a</var> =
                                        min(<var>a</var>, <var>pos</var>, <var>pos</var>
                                        + <var>advance</var>)。
                                    </li>
                                    <li>
                                        设置 <var>b</var> =
                                        max(<var>b</var>, <var>pos</var>, <var>pos</var>
                                        + <var>advance</var>)。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                如果 <var>a</var> ≠ +∞，则：
                                <p class="note">
                                    在这里我们执行文本锚定。
                                </p>
                                <ol>
                                    <li>
                                        让 <var>shift</var> 为 <var>result</var>[<var>i</var>] 的 x 坐标，
                                        如果“水平”标志为 true，则为 y 坐标。
                                    </li>
                                    <li>
                                        根据 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>
                                        和 <a class="property" href="text.html#DirectionProperty">direction</a> 的值
                                        调整 shift：
                                        <dl class="switch">
                                            <dt>(start, ltr) 或 (end, rtl)</dt>
                                            <dd>设置 <var>shift</var> = <var>shift</var> − <var>a</var>。</dd>
                                            <dt>(start, rtl) 或 (end, ltr)</dt>
                                            <dd>设置 <var>shift</var> = <var>shift</var> − <var>b</var>。</dd>
                                            <dt>(middle, ltr) 或 (middle, rtl)</dt>
                                            <dd>设置 <var>shift</var> = <var>shift</var> − (<var>a</var> + <var>b</var>)
                                                / 2。</dd>
                                        </dl>
                                    </li>
                                    <li>
                                        对于范围内的每个索引 <var>k</var> [<var>i</var>, <var>j</var>]：
                                        <ol>
                                            <li>
                                                将 <var>shift</var> 添加到 <var>result</var>[<var>k</var>] 中位置的 x 坐标，
                                                如果“水平”标志为 true，则添加到 y 坐标。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>路径上的位置</b>
                <ol>
                    <li>
                        设置 <var>index</var> = 0。
                    </li>
                    <li>
                        将“在路径内”标志设置为 false。
                    </li>
                    <li>
                        将“路径后”标志设置为 false。
                    </li>
                    <li>
                        让 <var>path_end</var> 为跟随 <span class="element-name">‘<a
                                href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素的字符的偏移量。设置
                        <var>path_end</var> 为 (0,0)。
                    </li>
                    <li>
                        当 <var>index</var> &lt; <var>count</var> 时：
                        <ol>
                            <li>
                                如果索引 <var>i</var> 处的字符在 <span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素内并
                                对应于 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>，则：
                                <ol>
                                    <li>
                                        将“在路径内”标志设置为 true。
                                    </li>
                                    <li>
                                        如果 <var>result</var>[<var>index</var>] 的“中间”标志为 false，则：
                                        <p class="note">
                                            在这里我们应用 <span class="element-name">‘<a
                                                    href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                                            定位。
                                        </p>
                                        <ol>
                                            <li>
                                                让 <var>path</var> 为与 <span class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                                                元素引用的 <a href="shapes.html#TermBasicShapeElement">基本形状</a> 元素的
                                                <a href="paths.html#TermEquivalentPath">等效路径</a>，如果引用无效，则为
                                                空路径。
                                            </li>
                                            <li>
                                                如果 <span class="attr-name">‘<a
                                                        href="text.html#TextPathElementSideAttribute"><span>side</span></a>’</span>
                                                属性的值为 <span class="attr-value">'right'</span>，则反转 <var>path</var>。
                                            </li>
                                            <li>
                                                让 <var>length</var> 为 <var>path</var> 的长度。
                                            </li>
                                            <li>
                                                让 <var>offset</var> 为
                                                <span class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                                                元素的 <span class="attr-name">‘<a
                                                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                                                属性的值，根据引用元素上的任何 <span class="attr-name">‘<a
                                                        href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>
                                                属性进行调整。
                                            </li>
                                            <li>
                                                让 <var>advance</var> = 与字符 <var>k</var> 对应的
                                                <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的前进值。 [注意：对于
                                                RTL 水平文本，这个前进值将为负。]
                                            </li>
                                            <li>
                                                让 (<var>x</var>, <var>y</var>) 和 <var>angle</var> 为
                                                <var>result</var>[<var>index</var>] 中的位置和角度。
                                            </li>
                                            <li>
                                                让 <var>mid</var> 为根据“水平”标志的值而定的坐标值：
                                                <dl class="switch">
                                                    <dt>true</dt>
                                                    <dd><var>mid</var> 为 <var>x</var> + <var>advance</var> / 2
                                                        + <var>offset</var></dd>
                                                    <dt>false</dt>
                                                    <dd><var>mid</var> 为 <var>y</var> + <var>advance</var> / 2
                                                        + <var>offset</var></dd>
                                                </dl>
                                                <p class="note">
                                                    用户代理可以根据 <span class="attr-name">‘<a
                                                            href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>
                                                    值为 <span class="attr-value">'auto'</span> 或
                                                    <span class="attr-name">‘<a
                                                            href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>
                                                    值为 <span class="attr-value">'stretch'</span> 进行任何必要的附加调整。
                                                </p>
                                            </li>
                                            <li>
                                                如果 <var>path</var> 不是 <a href="paths.html#TermOpenSubpath">封闭子路径</a> 并且
                                                <var>mid</var> &lt; 0 或 <var>mid</var> > <var>length</var>，则将
                                                <var>result</var>[<var>index</var>] 的“隐藏”标志设置为 true。
                                            </li>
                                            <li>
                                                如果 <var>path</var> 是 <a href="paths.html#TermOpenSubpath">封闭子路径</a>，则根据
                                                <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>
                                                和 <a class="property" href="text.html#DirectionProperty">direction</a>
                                                的值判断该字符的状态：
                                                <p class="note">
                                                    这实现了单个 <a href="paths.html#TermOpenSubpath">封闭子路径</a> 的特殊换行标准。
                                                </p>
                                                <dl class="switch">
                                                    <dt>(start, ltr) 或 (end, rtl)</dt>
                                                    <dd>
                                                        如果 <var>mid</var>−<var>offset</var> &lt; 0
                                                        或 <var>mid</var>−<var>offset</var> > <var>length</var>，
                                                        则将 <var>result</var>[<var>index</var>] 的“隐藏”标志设置为
                                                        true。
                                                    </dd>
                                                    <dt>(middle, ltr) 或 (middle, rtl)</dt>
                                                    <dd>
                                                        如果 <var>mid</var>−<var>offset</var> &lt; −<var>length</var>/2
                                                        或 <var>mid</var>−<var>offset</var> > <var>length</var>/2，
                                                        则将 <var>result</var>[<var>index</var>] 的“隐藏”标志设置为
                                                        true。
                                                    </dd>
                                                    <dt>(start, rtl) 或 (end, ltr)</dt>
                                                    <dd>
                                                        如果 <var>mid</var>−<var>offset</var> &lt; −<var>length</var>
                                                        或 <var>mid</var>−<var>offset</var> > 0，
                                                        则将 <var>result</var>[<var>index</var>] 的“隐藏”标志设置为
                                                        true。
                                                    </dd>
                                                </dl>
                                                <p>
                                                    设置 <var>mid</var> = <var>mid</var> mod <var>length</var>。
                                                </p>
                                            </li>
                                            <li>如果<var>hidden</var>标志为假：
                                                <ol>
                                                    <li>
                                                        设<var>point</var>为位置，<var>t</var>为沿<var>path</var>前进<var>mid</var>距离的切向单位向量。
                                                    </li>
                                                    <li>
                                                        如果“horizontal”标志为
                                                        <dl class="switch">
                                                            <dt>true</dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        设<var>n</var>为指向<var>t</var> + 90°方向的法向单位向量。
                                                                    </li>
                                                                    <li>
                                                                        设<var>o</var>为从字形垂直中心线到对齐点的水平距离。
                                                                    </li>
                                                                    <li>
                                                                        然后将<var>result</var>[<var>index</var>]中的位置设置为<var>point</var>
                                                                        - <var>o</var>×<var>t</var> +
                                                                        <var>y</var>×<var>n</var>。
                                                                    </li>
                                                                    <li>
                                                                        设<var>r</var>为从正x轴到切线的角度。
                                                                    </li>
                                                                    <li>
                                                                        将<var>result</var>[<var>index</var>]中的角度值设置为<var>angle</var>
                                                                        + <var>r</var>。
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                            <dt>false</dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        设<var>n</var>为指向<var>t</var> - 90°方向的法向单位向量。
                                                                    </li>
                                                                    <li>
                                                                        设<var>o</var>为从字形水平中心线到对齐点的垂直距离。
                                                                    </li>
                                                                    <li>
                                                                        然后将<var>result</var>[<var>index</var>]中的位置设置为<var>point</var>
                                                                        - <var>o</var>×<var>t</var> +
                                                                        <var>x</var>×<var>n</var>。
                                                                    </li>
                                                                    <li>
                                                                        设<var>r</var>为从正y轴到切线的角度。
                                                                    </li>
                                                                    <li>
                                                                        将<var>result</var>[<var>index</var>]中的角度值设置为<var>angle</var>
                                                                        + <var>r</var>。
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                        </dl>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        否则，<var>result</var>[<var>index</var>]的“middle”标志为真：
                                        <ol>
                                            <li>
                                                将<var>result</var>[<var>index</var>]的位置信息和角度值设置为<var>result</var>[<var>index</var>
                                                − 1]中的值。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                如果索引<var>i</var>处的字符不在
                                <span class="element-name">‘<a
                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>元素内并且
                                对应于<a href="text.html#TermTypographicCharacterUnit">排版字符</a>，则：
                                <p class="note">
                                    这为渲染任何在<span class="element-name">‘<a
                                            href="text.html#TextPathElement"><span>textPath</span></a>’</span>元素之后出现的字符
                                    设置起始点，直到路径的结束。
                                </p>
                                <ol>
                                    <li>如果“in path”标志为真：
                                        <ol>
                                            <li>
                                                将“in path”标志设置为假。
                                            </li>
                                            <li>
                                                将“after path”标志设置为真。
                                            </li>
                                            <li>
                                                将<var>path_end</var>设置为
                                                <span class="element-name">‘<a
                                                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                                                所引用路径的终点 - <var>result</var>[<var>index</var>]的位置。
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        如果“after path”为真。
                                        <ol>
                                            <li>
                                                如果<var>result</var>[<var>index</var>]的<var>anchored
                                                    chunk</var>为真，将“after path”标志设置为假。
                                            </li>
                                            <li>
                                                否则，
                                                设<var>result.x</var>[<var>index</var>] =
                                                <var>result.x</var>[<var>index</var>] + <var>path_end.x</var>
                                                并且<var>result.y</var>[<var>index</var>] =
                                                <var>result.y</var>[<var>index</var>] + <var>path_end.y</var>。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                设置<var>index</var> = <var>index</var> + 1。
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                <b>返回<var>result</var></b>
            </li>
        </ol>

    </div>

    <hr>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 需求：</th>
                <td>与CSS对齐以实现文本布局功能。</td>
            </tr>
            <tr>
                <th>解决方案：</th>
                <td><a href="https://www.w3.org/2011/07/29-svg-minutes.html#item08">SVG
                        2将使用CSS3定义的文本布局（空白、双向等），不特定于SVG。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>促进HTML和SVG中文本布局的共享规范和实现。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Cameron和Chris（<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3004">ACTION-3004</a>，
                    <a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3005">ACTION-3005</a>）
                </td>
            </tr>
        </table>
    </div>

    <h2 id="TextLayoutPre" class="heading">11.6. 预格式化文本<a class="self-link" href="#TextLayoutPre"></a></h2>

    <p class="note">
        此选项对应于基本的 SVG 1.1 文本布局。
    </p>

    <p>
        这是默认的文本布局方法，并在没有明确定义的<a
            href="text.html#TermContentArea">内容区域</a>时使用。它也作为布置<em>路径文本</em>的第一步（稍微修改了一些规则）。在此布局方法中，不进行自动换行或单词换行。通常，文本被呈现为在一个无限宽度和高度的矩形<a
            href="text.html#TermContentArea">内容区域</a>内的单行文本。可以通过预先计算换行并使用以下方法之一获得多行文本：
    </p>

    <ul>
        <li>
            使用一个<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>元素，并将<a
                class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>设置为<span
                class="prop-value">pre</span>或<span class="prop-value">pre-line</span>。行距由<a class="property"
                href="text.html#LineHeightProperty">line-height</a>设置。

            <p class="note">SVG 2 中的新功能。</p>
        </li>

        <li>
            使用一个<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>元素，其中包含一个或多个<span class="element-name">‘<a
                    href="text.html#TextElement"><span>tspan</span></a>’</span>子元素，并为属性<span class="attr-name">‘<a
                    href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span class="attr-name">‘<a
                    href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>和<span class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>设置适当的值，以设置新行字符的起始位置。
        </li>

        <li>
            使用多个<span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span>元素，每个元素代表一行文本。（不推荐使用，因为这可能会阻止跨多行文本的选择 ——
            请参阅<a href="text.html#TextSelection">文本选择和剪贴板操作</a>。）
        </li>
    </ul>

    <p class="note">
        以下属性不适用于<em>预格式化</em>文本：<a class="property"
            href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>，<a class="property"
            href="https://www.w3.org/TR/css-text-3/#text-align-last-property">text-align-last</a>，<a class="property"
            href="https://www.w3.org/TR/css-text-3/#line-break-property">line-break</a>，<a class="property"
            href="https://www.w3.org/TR/css-text-3/#word-break-property">word-break</a>，<a class="property"
            href="https://www.w3.org/TR/css-text-3/#hyphens-property">hyphens</a>，<a class="property"
            href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">word-wrap</a>，以及<a class="property"
            href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">overflow-wrap</a>。
    </p>

    <h3 id="TextLayoutPreMultiline" class="heading">11.6.1. 通过 'white-space' 实现多行文本<a class="self-link"
            href="#TextLayoutPreMultiline"></a></h3>

    <p>
        可以通过使用 <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 值 <span
            class="prop-value">pre</span> 或 <span class="prop-value">pre-line</span>
        来创建多行预格式化文本。在这些情况下，换行符或回车符会被保留为强制换行，从而创建一个新的<a href="text.html#TermLineBox">行框</a>。这些 <a
            href="text.html#TermLineBox">行框</a> 按照 CSS 的规则堆叠。
    </p>

    <h3 id="TextLayoutPreAdjustments" class="heading">11.6.2. 重新定位字形<a class="self-link"
            href="#TextLayoutPreAdjustments"></a></h3>

    <p>
        文本按照基本的 CSS 文本布局规则排布之后，可以使用 SVG 特定规则重新定位 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>。通过在 <span
            class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
        属性中提供绝对坐标，或通过强制换行来实现绝对重新定位。绝对重新定位可能会受到 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>
        属性的影响。相对重新定位可以通过在 <span class="attr-name">‘<a
                href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和 <span class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 属性中提供相对坐标来实现。通过在 <span
            class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性中提供值列表，可以对排版字符进行任意旋转。绝对重新定位（包括任何由于 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>
        属性的调整）在相对重新定位和旋转之前进行。
    </p>

    <h2 id="TextLayoutAuto" class="heading">11.7. 自动换行文本<a class="self-link" href="#TextLayoutAuto"></a></h2>

    <p>
        当在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素中指定 <a
            href="text.html#TermContentArea">内容区域</a> 时，文本会自动换行。<a href="text.html#TermContentArea">内容区域</a>
        定义了换行文本的最外层容器。可以还定义一个 <a href="text.html#TermWrappingContext">换行上下文</a>（排除区域的集合）。实际的 <a
            href="text.html#TermWrappingArea">换行区域</a> 是通过从 <a href="text.html#TermContentArea">内容区域</a> 中减去 <a
            href="text.html#TermWrappingContext">换行上下文</a> 来定义的。<a href="text.html#TermWrappingContext">换行上下文</a> 还可以通过
        <a class="property" href="text.html#TextShapePadding">shape-padding</a> 属性的值进行缩小。排除区域的有效面积可以通过 <a
            class="property" href="text.html#TextShapeMargin">shape-margin</a> 属性的值来放大。
    </p>

    <p>
        当 <a href="text.html#TermContentArea">内容区域</a> 由 <a class="property"
            href="text.html#InlineSizeProperty">inline-size</a> 属性定义时，第一渲染的 <a
            href="text.html#TermTypographicCharacterUnit">排版字符</a> 对应的 <span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性定义了初始的 <a
            href="text.html#TermCurrentTextPosition">当前文本位置</a>。当 <a href="text.html#TermContentArea">内容区域</a> 位于 <a
            href="shapes.html#TermShapeElement">形状</a> 内时，初始的 <a href="text.html#TermCurrentTextPosition">当前文本位置</a>
        是在布局形状内的第一行框后确定的。
    </p>

    <p>
        除了用于确定初始的 <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 之外，所有的 <span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 值在自动换行文本中的 <span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和 <span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素上都将被忽略。
    </p>

    <p class="note">
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性可以为 SVG1.1
        渲染器提供一种自然的回退机制用于换行文本。内容制作者可能希望通过将文本分解为带有 <span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性的 <span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span> 元素预先布局文本。然后，例如，如果使用了替代字体来渲染文本，SVG2 渲染器将忽略
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
        属性，并使用替代字体的字体度量重新布局文本。而 SVG1.1 渲染器将使用 <span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span> 属性渲染文本，这通常会生成可读文本，即使渲染效果与形状不匹配。

        本节中的许多文本换行示例依赖于此机制在未实现文本换行的浏览器中呈现文本。
    </p>

    <h3 id="TextLayoutAutoNotes" class="heading">11.7.1. 关于文本换行的说明<a class="self-link" href="#TextLayoutAutoNotes"></a>
    </h3>

    <p>
        以下示例展示了一些在形状内布置文本时遇到的问题。
    </p>

    <h4 id="TextLayoutAutoNotesStart" class="heading">11.7.1.1. 第一行定位<a class="self-link"
            href="#TextLayoutAutoNotesStart"></a></h4>

    <p>
        给定一个任意形状的<a href="text.html#TermWrappingArea">换行区域</a>，第一<a
            href="text.html#TermLineBox">行框</a>可能无法紧贴顶部（或对于垂直文本，紧贴侧面）。在这种情况下，第一<a
            href="text.html#TermLineBox">行框</a>会被移动直到它适合。
    </p>
    <p class="annotation">
        在 CSS 中，形状的边缘被视为一系列 1 像素 × 1 像素的浮动点。
    </p>
    <p class="note">
        未来的 CSS 规范可能会定义一个行网格，可以用于控制第一行文本的位置，以允许不同<a href="text.html#TermWrappingArea">换行区域</a>之间的文本对齐。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-firstline.svg"
            alt="图像显示了两行文本，第一行为'The'，下一行为'first line'。">
        <p class="caption">
            顶部的<a href="text.html#TermLineBox">行框</a>（小的浅蓝色矩形），由最小的可能文本块组成，被向下移动直到<a
                href="text.html#TermLineBox">行框</a>适合<a href="text.html#TermWrappingArea">换行区域</a>（浅蓝色路径）内。注意，<a
                href="text.html#TermLineBox">行框</a>包括<a class="property"
                href="text.html#LineHeightProperty">line-height</a>属性的效果，此处设置为 1.25。红色矩形紧紧包裹每个<a
                href="text.html#TermLineBox">行框</a>中的字形。
        </p>
    </div>

    <p class="annotation">
        这似乎与 SVG 1.2 草案不同，在草案中，换行区域的顶部作为行网格的起点。第一行通过行高向下移动直到适合形状内。
    </p>

    <h4 id="TextLayoutAutoNotesBrokenLines" class="heading">11.7.1.2. 断行<a class="self-link"
            href="#TextLayoutAutoNotesBrokenLines"></a></h4>

    <p>
        给定一个任意形状的<a href="text.html#TermWrappingArea">换行区域</a>，单行文本可能会被拆分为多个部分。在这种情况下，为每个部分创建一个<a
            href="text.html#TermLineBox">行框</a>。同一行文本中的所有<a
            href="text.html#TermLineBox">行框</a>的高度必须相同（确保所有部分具有相同的基线）。这个高度是通过查看该行文本中的所有字形来计算的。
    </p>
    <p class="annotation">
        这一默认行为是在 2016 年悉尼 CSS/SVG 联合工作组会议上达成的共识。
    </p>
    <p class="note">
        未来的 CSS 规范可能允许控制被拆分为不同部分的形状的哪些部分被填充（例如，仅填充最右侧的部分，仅填充最左侧的部分等）。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-layout-brokenline.svg"
            alt="显示文本布局在一个'V'形中的图像。">
        <p class="caption">
            顶部的行被拆分为两个<a href="text.html#TermLineBox">行框</a>（浅蓝色矩形），每个<a href="text.html#TermLineBox">行框</a>中的文本在框内居中（由于
            'text-align:center'）。
        </p>
    </div>

    <h2 id="TextLayoutPath" class="heading">11.8. 路径上的文本<a class="self-link" href="#TextLayoutPath"></a></h2>

    <p>
        SVG 可以将文本放置在由<span class="element-name">‘<a
                href="paths.html#PathElement"><span>path</span></a>’</span>元素或基本形状的路径等效项定义的路径上。这是通过将文本包含在具有 <span
            class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span> 属性的 <span
            class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素中实现的，该属性包含指向
        <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 元素或基本形状的 <a
            href="linking.html#TermURLReference">URL 参考</a>，或者通过为 <span class="attr-name">‘<a
                href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span> 属性直接指定路径数据的值来实现。
    </p>

    <p class="note">
        在基本形状上放置文本是 SVG 2 中的新功能。
    </p>

    <p class="annotation">
        在基本形状上放置文本是在<a href="https://www.w3.org/2015/02/12-svg-minutes.html#item05">2015 年悉尼会议</a>上解决的。
    </p>

    <p class="annotation">
        直接使用 'd' 属性指定路径是在 SVG 2 中添加的。'd' 属性在<a href="https://www.w3.org/2016/04/21-svg-minutes.html">2016
            年伦敦编辑会议</a>上被重命名为 'path'，同时 'd' 被提升为表现属性。
    </p>

    <p>
        路径上的文本概念上类似于一行经过转换以跟随路径的<a href="text.html#TextLayoutPre">预格式化文本</a>。除非有指示，否则所有适用于预格式化文本的属性也适用于路径上的文本。
    </p>

    <h3 id="TextPathElement" class="heading">11.8.1. <span class="element-name">‘textPath’</span> 元素<a class="self-link"
            href="#TextPathElement"></a></h3>

    <div class="element-summary">
        <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
                    id="elementdef-textPath">textPath</dfn>’</span></div>
        <dl>
            <dt>类别：</dt>
            <dd><a href="struct.html#TermGraphicsElement">图形元素</a>，<a
                    href="render.html#TermRenderableElement">可渲染元素</a>，<a
                    href="text.html#TermTextContentElement">文本内容元素</a>，<a
                    href="text.html#TermTextContentChildElement">文本内容子元素</a></dd>
            <dt>内容模型：</dt>
            <dd>任意数量的以下元素或字符数据，顺序不限：<ul class="no-bullets">
                    <li><a href="struct.html#TermDescriptiveElement">描述性元素</a><span class="expanding"> — <span
                                class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>，
                            <span class="element-name">‘<a
                                    href="struct.html#TitleElement"><span>title</span></a>’</span>，<span
                                class="element-name">‘<a
                                    href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span></li>
                    <li><a href="painting.html#TermPaintServerElement">绘画服务器元素</a><span class="expanding"> — <span
                                class="element-name">‘<a
                                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>，
                            <span class="element-name">‘<a
                                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>，
                            <span class="element-name">‘<a
                                    href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span></li>
                </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>，
                <span class="element-name"><a
                        href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a></span>，
                <span class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a></span>，
                <span class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>，
                <span class="element-name"><a
                        href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a></span>，
                <span class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>，
                <span class="element-name"><a
                        href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a></span>，
                <span class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>，
                <span class="element-name"><a href="text.html#TextElement"><span>tspan</span></a></span>
            </dd>
            <dt>属性：</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a href="struct.html#TermARIAAttribute">aria 属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-activedescendant"><span>aria-activedescendant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-atomic"><span>aria-atomic</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-autocomplete"><span>aria-autocomplete</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-busy"><span>aria-busy</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-checked"><span>aria-checked</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colcount"><span>aria-colcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colindex"><span>aria-colindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-colspan"><span>aria-colspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-controls"><span>aria-controls</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-current"><span>aria-current</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-describedby"><span>aria-describedby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-details"><span>aria-details</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-disabled"><span>aria-disabled</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-dropeffect"><span>aria-dropeffect</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-errormessage"><span>aria-errormessage</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-expanded"><span>aria-expanded</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-flowto"><span>aria-flowto</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-grabbed"><span>aria-grabbed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup"><span>aria-haspopup</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-hidden"><span>aria-hidden</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-invalid"><span>aria-invalid</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-keyshortcuts"><span>aria-keyshortcuts</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-label"><span>aria-label</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby"><span>aria-labelledby</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-level"><span>aria-level</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-live"><span>aria-live</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-modal"><span>aria-modal</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiline"><span>aria-multiline</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-multiselectable"><span>aria-multiselectable</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-orientation"><span>aria-orientation</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-owns"><span>aria-owns</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-placeholder"><span>aria-placeholder</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-posinset"><span>aria-posinset</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-pressed"><span>aria-pressed</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-readonly"><span>aria-readonly</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-relevant"><span>aria-relevant</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-required"><span>aria-required</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription"><span>aria-roledescription</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowcount"><span>aria-rowcount</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowindex"><span>aria-rowindex</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-rowspan"><span>aria-rowspan</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-selected"><span>aria-selected</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-setsize"><span>aria-setsize</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-sort"><span>aria-sort</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemax"><span>aria-valuemax</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuemin"><span>aria-valuemin</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuenow"><span>aria-valuenow</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="https://www.w3.org/TR/wai-aria-1.1/#aria-valuetext"><span>aria-valuetext</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="struct.html#RoleAttribute"><span>role</span></a>’</span></span></li>
                    <li><a href="struct.html#TermConditionalProcessingAttribute">条件处理属性</a><span class="expanding"> —
                            <span class="attr-name">‘<a
                                    href="struct.html#RequiredExtensionsAttribute"><span>requiredExtensions</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="struct.html#SystemLanguageAttribute"><span>systemLanguage</span></a>’</span></span>
                    </li>
                    <li><a href="struct.html#TermCoreAttribute">核心属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a href="struct.html#IDAttribute"><span>id</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>，
                            <span class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="styling.html#ClassAttribute"><span>class</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">全局事件属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>,
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span></li>
                    <li><a
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">文档元素事件属性</a><span
                            class="expanding"> — <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
                    <li><a href="interact.html#EventAttributes">图形事件属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusin</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="interact.html#EventAttributes"><span>onfocusout</span></a>’</span></span></li>
                    <li><a href="styling.html#TermPresentationAttribute">呈现属性</a><span class="expanding"> — </span></li>
                    <li><a href="linking.html#XLinkRefAttrs">弃用的 xlink 属性</a><span class="expanding"> — <span
                                class="attr-name">‘<a
                                    href="linking.html#XLinkHrefAttribute"><span>xlink:href</span></a>’</span>，
                            <span class="attr-name">‘<a
                                    href="linking.html#XLinkTitleAttribute"><span>xlink:title</span></a>’</span></span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                    </li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span></li>
                    <li><span class="attr-name">‘<a
                                href="text.html#TextPathElementSideAttribute"><span>side</span></a>’</span></li>
                </ul>
            </dd>
            <dt>DOM 接口：</dt>
            <dd>
                <ul class="no-bullets">
                    <li><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a></li>
                </ul>
            </dd>
        </dl>
    </div>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要求：</th>
                <td>提供文本路径拉伸方法的更精确解释。</td>
            </tr>
            <tr>
                <th>解决方案：</th>
                <td><a href="https://www.w3.org/2011/11/17-svg-irc#T22-23-10">我们将澄清 <span
                            class="attr-value">method="stretch"</span> 在 <span class="element-name">>'textPath'</span>
                        元素上。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>改善该功能的互操作性。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Cameron（无行动）</td>
            </tr>
        </table>
    </div>

    <p>
        <span class="attr-name">‘<a href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span> 属性和
        <span class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span> 属性
        指定了 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 渲染的路径。
    </p>
    <p>
        如果在 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
        元素上同时指定了这两个属性，
        则使用的路径必须遵循以下优先顺序：
    </p>
    <ol>
        <li><span class="attr-name">‘<a href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span> 属性
        </li>
        <li><span class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span> 属性
        </li>
        <li><span class="attr-name">‘<a href="linking.html#XLinkHrefAttribute"><span>xlink:href</span></a>’</span> 属性
        </li>
    </ol>
    <p>
        如果 <span class="attr-name">‘<a href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span>
        属性包含错误，
        则必须使用 <span class="attr-name">‘<a href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span>
        属性。
    </p>

    <h3 id="TextPathAttributes" class="heading">11.8.2. 属性<a class="self-link" href="#TextPathAttributes"></a>
    </h3>

    <dl class="attrdef-list-svg2">

        <dt id="TextPathElementStartOffsetAttribute"><span class="adef">startOffset</span></dt>
        <dd>
            <p>
                从路径起点的偏移量，用于初始文本位置，使用用户代理的
                <a href="paths.html#DistanceAlongAPath">沿路径的距离</a> 算法计算，
                在将路径转换为 <span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素的坐标系统后。
            </p>
            <p>
                如果给定的是除百分比以外的 <a href="https://www.w3.org/TR/css3-values/#lengths">&lt;length></a>，
                则
                <span class="attr-name">‘<a
                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                表示在当前用户坐标系统中沿路径测量的距离
                适用于 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                元素。
            </p>
            <p>如果给定的是百分比，则 <span class="attr-name">‘<a
                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                表示沿整个路径的百分比距离。因此，
                <span class="attr-value">startOffset="0%"</span> 表示路径的起点，
                <span class="attr-value">startOffset="100%"</span> 表示路径的终点。
            </p>

            <p class="note">
                允许负值和超过路径长度的值（例如 150%）。
            </p>
            <p class="annotation">
                将值限制在 0%-100% 范围内可防止轻松创建文本沿路径移动的效果。
            </p>

            <p>
                任何 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的中点不在路径上时将不会被渲染。
            </p>
            <div class="figure">
                <img alt="Three paths with various values of 'startOffset' showing clipping
		  when glyphs are outside path region." src="https://www.w3.org/TR/SVG2/images/text/text-path-startoffset.svg">
                <p class="caption">
                    不同值的 <span class="attr-name">‘<a
                            href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                    属性的渲染。从上到下：默认值，50%，-50%。
                </p>
                <p class="annotation">
                    底部路径应只在路径的左侧显示“path。” Chrome 和 Safari 都不处理 0% 到 100% 范围外的偏移量。
                    Chrome bug
                    https://bugs.chromium.org/p/chromium/issues/detail?id=476554
                </p>
            </div>

            <p>
                对于由单个 <a href="paths.html#TermOpenSubpath">封闭子路径</a> 组成的路径
                （包括基本形状的等效路径），<a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                将沿路径的一次完整环路渲染。文本根据
                <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性确定的方式对齐到路径上
                由 <span class="attr-name">‘<a
                        href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                属性设置的位置。对于
                <span class="prop-value">start</span>
                （<span class="prop-value">end</span>）值，文本将从行的起始（结束）渲染，直到再次到达路径上的初始位置。对于
                <span class="prop-value">middle</span>，文本从中点在两个方向渲染，直到路径上到达距离初始位置等距离的点。
            </p>

            <div class="figure">
                <img alt="Two circular path with different values of
		  'startOffset' showing that all glyphs are rendered."
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-startoffset2.svg">
                <p class="caption">
                    引用 <span class="element-name">‘<a href="shapes.html#CircleElement"><span>circle</span></a>’</span>
                    的路径上文本的渲染，
                    具有不同的 <span class="attr-name">‘<a
                            href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                    属性的值。左：0。右：75% 或 -25%。
                    红色圆圈标记路径的起始位置（经过圆的标准分解为路径后）。
                </p>
            </div>

            <div class="figure">
                <img alt="Three circular path with different values of
		  'text-anchor' showing how glyphs are rendered."
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-startoffset3.svg">
                <p class="caption">
                    引用 <span class="element-name">‘<a href="shapes.html#CircleElement"><span>circle</span></a>’</span>
                    的路径上文本的渲染，
                    具有不同值的 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>
                    属性。
                    左：'start'。
                    中间：'middle'。
                    右：'end'。
                    红色圆圈标记路径的起始位置（经过圆的标准分解为路径后）。
                    蓝色方块标记渲染起始位置的参考点（从路径起始位置偏移 <span class="attr-name">‘<a
                            href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>
                    值为 75%）。灰色箭头显示 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                    放置的方向，以及 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                    放置停止的点。如果 <a class="property" href="text.html#DirectionProperty">direction</a> 属性的值为
                    <span class="prop-value">rtl</span>，箭头将反转。
                </p>
            </div>

            <p class="annotation">
                为基本形状渲染所有字形是在<a href="https://www.w3.org/2015/02/12-svg-minutes.html#item05">悉尼
                    (2015)</a> 会议上达成一致（但在会议记录中缺失）。将包装限制为具有单个封闭子路径的路径和一次循环，由
                <a href="https://www.w3.org/2016/04/22-svg-minutes.html#item02">伦敦
                    (2016)</a> 编辑会议上达成的 'startOffset' 属性影响。
            </p>

            <dl class="attrdef-svg2">
                <dt>值</dt>
                <dd><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> |
                    <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a>
                </dd>
                <dt><a href="types.html#TermInitialValue">初始值</a></dt>
                <dd>0</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a></dt>
                <dd>是</dd>
            </dl>

        </dd>

        <dt id="TextPathElementMethodAttribute"><span class="adef">method</span></dt>
        <dd>
            <p>
                指示文本沿路径渲染的方法。
            </p>
            <p>
                值为 <span class="attr-value">align</span> 表示 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                应该通过简单的 2×3 矩阵变换进行渲染，以确保 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 不会被拉伸或扭曲。
                通常，会对每个要渲染的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 进行额外的旋转、缩放和平移变换。因此，使用 <span
                    class="attr-value">align</span> 时，如果字体的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                设计为连接的（例如，草书字体），文本在沿路径渲染时，连接可能不会正确对齐。
            </p>
            <p>
                值为 <span class="attr-value">stretch</span> 表示 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                的轮廓将被转换为路径，然后所有端点和控制点将被调整到沿路径的垂直向量上，从而拉伸并可能扭曲字形。通过这种方法，连接的 <a
                    href="text.html#TermTypographicCharacterUnit">排版字符</a>（例如，草书脚本中的字符）将保持其连接状态。（非垂直直路径段应以这样的方式转换为贝塞尔曲线，使得水平直路径与
                <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 渲染的路径之间具有（大约）恒定的偏移。）
            </p>

            <div class="figure">
                <img alt="英文和阿拉伯文文本在弧上的渲染。" src="https://www.w3.org/TR/SVG2/images/text/text-path-method.png">
                <p class="caption">
                    不同 <span class="attr-name">‘<a
                            href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span> 值的路径上文本渲染：
                    左：'align'。
                    右：'stretch'。
                </p>
            </div>

            <dl class="attrdef-svg2">
                <dt>值</dt>
                <dd>align | stretch</dd>
                <dt><a href="types.html#TermInitialValue">初始值</a></dt>
                <dd>align</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a></dt>
                <dd>是</dd>
            </dl>
        </dd>

        <dt id="TextPathElementSpacingAttribute"><span class="adef">spacing</span></dt>
        <dd>
            <p>
                指示用户代理如何确定要沿路径渲染的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 之间的间距。
            </p>
            <p>
                值为 <span class="attr-value">exact</span> 表示 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                应该完全按照 <a href="text.html#TextpathLayoutRules">路径上的文本布局规则</a> 渲染。
            </p>
            <p>
                值为 <span class="attr-value">auto</span> 表示用户代理应使用路径上的文本布局算法来调整 <a
                    href="text.html#TermTypographicCharacterUnit">排版字符</a> 之间的间距，以实现视觉上美观的效果。
            </p>

            <dl class="attrdef-svg2">
                <dt>值</dt>
                <dd>auto | exact</dd>
                <dt><a href="types.html#TermInitialValue">初始值</a></dt>
                <dd>exact</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a></dt>
                <dd>是</dd>
            </dl>
        </dd>

        <dt id="TextPathElementSideAttribute"><span class="adef">side</span></dt>
        <dd>
            <p>
                确定文本放置在路径的哪一侧（相对于路径方向）。指定值为 <span class="attr-value">right</span> 将有效地反转路径。
            </p>
            <div class="figure">
                <img alt="两个圆形路径，具有不同的'side'值，显示'left'的字形在圆外渲染，而'right'的字形在圆内渲染。"
                    src="https://www.w3.org/TR/SVG2/images/text/text-path-side.svg">
                <p class="caption">
                    在一个 <span class="element-name">‘<a href="shapes.html#CircleElement"><span>circle</span></a>’</span>
                    上路径渲染文本，具有不同的 <span class="attr-name">‘<a
                            href="text.html#TextPathElementSideAttribute"><span>side</span></a>’</span> 属性值。左：<span
                        class="attr-value">left</span>。右：<span class="attr-value">right</span>。
                </p>
            </div>

            <p class="note">
                在 SVG 2 中添加，以允许文本放置在 <a href="paths.html#TermOpenSubpath">封闭子路径</a> 和 <a
                    href="shapes.html#TermBasicShapeElement">基本形状</a>（例如矩形、圆形和椭圆形）内或外。
            </p>
            <p class="annotation">
                添加'side'是在<a href="https://www.w3.org/2015/02/12-svg-minutes.html#item05">悉尼（2015）</a>会议上决定的。
            </p>

            <dl class="attrdef-svg2">
                <dt>值</dt>
                <dd>left | right</dd>
                <dt><a href="types.html#TermInitialValue">初始值</a></dt>
                <dd>left</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a></dt>
                <dd>是</dd>
            </dl>

        </dd>

        <dt id="TextPathElementPathAttribute"><span class="adef">path</span></dt>
        <dd>
            <p>一个<a href="paths.html#PathDataBNF" class="syntax">路径数据</a>字符串，描述将要渲染的 <a
                    href="text.html#TermTypographicCharacterUnit">排版字符</a> 的路径。
                空字符串表示该元素没有路径数据。这意味着 <span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span> 中的文本不会渲染或
                对<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素的 <a
                    href="coords.html#TermBoundingBox">边界框</a> 产生影响。
                如果未指定该属性，则使用 <span class="attr-name">‘<a
                        href="text.html#TextPathElementHrefAttribute"><span>href</span></a>’</span> 指定的路径。
            </p>
            <dl class="attrdef-svg2">
                <dt>值</dt>
                <dd><a href="paths.html#PathDataBNF" class="syntax">路径数据</a></dd>
                <dt><a href="types.html#TermInitialValue">初始值</a></dt>
                <dd>(无)</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a></dt>
                <dd>是</dd>
            </dl>

        </dd>
        <dt id="TextPathElementHrefAttribute"><span class="adef">href</span></dt>
        <dd>
            <p>
                一个<a href="linking.html#URLReference">URL引用</a>，指向 <span class="element-name">‘<a
                        href="paths.html#PathElement"><span>path</span></a>’</span> 元素
                或 <a href="shapes.html#TermBasicShapeElement">基本形状</a> 元素，字形将在其上渲染，如果未提供 <span class="attr-name">‘<a
                        href="text.html#TextPathElementPathAttribute"><span>path</span></a>’</span> 属性。
                如果使用该属性，且&lt;url&gt;是无效引用（例如，没有这样的元素存在，或者引用的元素不是 <span class="element-name">‘<a
                        href="paths.html#PathElement"><span>path</span></a>’</span> 元素或<a
                    href="shapes.html#TermBasicShapeElement">基本形状</a>），则 <span class="element-name">‘<a
                        href="text.html#TextPathElement"><span>textPath</span></a>’</span>
                元素出错，其全部内容不应由用户代理渲染。
            </p>
            <p>
                请参阅 <a href="linking.html#linkRefAttrs">URL引用属性</a> 和 <a href="linking.html#XLinkRefAttrs">已弃用的 XLink
                    属性</a> 定义的常见处理。
            </p>

            <dl class="attrdef-svg2">
                <dt>值</dt>
                <dd>URL <a href="types.html#attribute-url" class="syntax">[URL]</a></dd>
                <dt><a href="types.html#TermInitialValue">初始值</a></dt>
                <dd>见上。</dd>
                <dt><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a></dt>
                <dd>是</dd>
            </dl>

        </dd>

    </dl>

    <p>
        引用的 <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
        元素或 <a href="shapes.html#TermBasicShapeElement">基本形状</a>
        元素中的路径数据坐标被假定在与当前 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素相同的坐标系统中，而不是在
        定义 <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 元素的坐标系统中。引用的 <span
            class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 元素或 <a
            href="shapes.html#TermBasicShapeElement">基本形状</a>
        元素上的 <a class="property" href="coords.html#TransformProperty">transform</a>
        属性表示相对于当前用户坐标系统的补充变换，包括对当前用户坐标系统的任何调整，这些调整可能由于当前 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span> 元素上的 <a class="property"
            href="coords.html#TransformProperty">transform</a> 属性而产生。例如，以下 SVG 内容片段：
    </p>

    <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;g <span style="font-weight:bold; color:red">transform="translate(25,25)"</span>>
    &lt;defs>
      &lt;path id="path1" <span style="font-weight:bold; color:green">transform="scale(2)"</span> path="M0,10 L40,20 80,10" fill="none" stroke="red">
    &lt;/defs>
  &lt;/g>
  &lt;text <span style="font-weight:bold; color:blue">transform="rotate(45)"</span>>
    &lt;textPath href="#path1">沿路径的文本&lt;/textPath>
  &lt;/text>
&lt;/svg>
    </pre>

    <p>
        应该与以下效果相同：
    </p>

    <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;g <span style="font-weight:bold; color:blue">transform="rotate(45)"</span>>
    &lt;defs>
      &lt;path id="path1" <span style="font-weight:bold; color:green">transform="scale(2)"</span> path="M0,10 L40,20 80,10" fill="none" stroke="red">
    &lt;/defs>
    &lt;text>
      &lt;textPath href="#path1">沿路径的文本&lt;/textPath>
    &lt;/text>
  &lt;/g>
&lt;/svg>
    </pre>

    <p>
        并等效于：
    </p>

    <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;text <span style="font-weight:bold; color:blue">transform="rotate(45)"</span>>
    &lt;textPath <span style="font-weight:bold; color:green">path="M0,20 L80,40 160,20"</span>
            >沿路径的文本&lt;/textPath>
  &lt;/text>
&lt;/svg>
    </pre>

    <p>
        注意，<code style="font-weight:bold; color:red">transform="translate(25,25)"</code> 对
        <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素没有影响，
        而
        <code style="font-weight:bold; color:blue">transform="rotate(45)"</code> 应用于
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 和将
        <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
        元素作为文本路径引用的形状。进一步注意，<code style="font-weight:bold; color: green">transform="scale(2)"</code>
        对路径进行缩放（等同于将每个坐标乘以 2 以进行简单的线性路径），但不缩放沿路径放置的文本。
    </p>

    <p id="ExampleToap01">
        <span class="example-ref">示例 toap01</span> 提供了一个简单的沿路径的文本示例：
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 200
             C 200 100 300   0 400 100
             C 500 200 600 300 700 200
             C 800 100 900 100 900 100">
  &lt;/defs>
  &lt;desc>示例 toap01 - 沿路径的简单文本&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red" >
  &lt;text font-family="Verdana" font-size="42.5" fill="blue" >
    &lt;textPath href="#MyPath">
      我们上升，然后下降，然后再次上升
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 使用 'rect' 元素显示视口的轮廓 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2">
&lt;/svg></pre>
        <div class="figure"><img alt="示例 toap01 — 沿路径的简单文本" src="https://www.w3.org/TR/SVG2/images/text/toap01.png">
            <p class="caption">示例 toap01</p>
        </div>
        <p class="view-as-svg"><a href="images/text/toap01.svg">在 SVG 中查看此示例（仅限支持 SVG 的浏览器）</a>
        </p>
    </div>

    <p id="ExampleToap02">
        <span class="example-ref">示例 toap02</span> 显示了如何在 <span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中
        包含 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
        元素，以调整样式属性并在渲染特定字形之前调整当前文本位置。单词“up”的第一次出现填充为红色。属性 <span class="attr-name">‘<a
                href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 用于将单词
        “up”从基线提升。
    </p>

    <p class="note">
        <span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和 <span
            class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 属性
        只能在 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        和 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
        元素上指定（但可能影响沿路径的文本中字形的渲染——
        请参阅 <a href="text.html#TextpathLayoutRules">沿路径的文本布局规则</a>）。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 200
             C 200 100 300   0 400 100
             C 500 200 600 300 700 200
             C 800 100 900 100 900 100">
  &lt;/defs>
  &lt;desc>示例 toap02 - tspan 在 textPath 中&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red" >
  &lt;text font-family="Verdana" font-size="42.5" fill="blue" >
    &lt;textPath href="#MyPath">
      我们向上走，
      &lt;tspan dy="-30" fill="red" >
        上
      &lt;/tspan>
      &lt;tspan dy="30">
        ，
      &lt;/tspan>
      然后我们向下走，再次向上
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 使用 'rect' 元素显示视口轮廓 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2">
&lt;/svg></pre>
        <div class="figure"><img alt="示例 toap02 — tspan 在 textPath 中"
                src="https://www.w3.org/TR/SVG2/images/text/toap02.png">
            <p class="caption">示例 toap02</p>
        </div>
        <p class="view-as-svg"><a href="images/text/toap02.svg">查看此示例为 SVG（仅限支持 SVG 的浏览器）</a>
        </p>
    </div>

    <p id="ExampleToap03">
        <span class="example-ref">示例 toap03</span> 演示了
        <span class="attr-name">‘<a
                href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span> 属性的使用
        在 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
        元素中以指定文本字符串的起始位置为路径上的特定位置。注意，掉落在路径末端之外的字形不会被渲染
        （参见 <a href="text.html#TextpathLayoutRules">路径上的文本布局规则</a>）。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 200
             C 200 100 300   0 400 100
             C 500 200 600 300 700 200
             C 800 100 900 100 900 100">
  &lt;/defs>
  &lt;desc>示例 toap03 - 带有 startOffset 属性的路径文本&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red" >
  &lt;text font-family="Verdana" font-size="42.5" fill="blue" >
    &lt;textPath href="#MyPath" startOffset="80%">
      我们向上走，然后向下走，再次向上
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 使用 'rect' 元素显示视口轮廓 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2">
&lt;/svg></pre>
        <div class="figure"><img alt="示例 toap03 — 带有 startOffset 属性的路径文本"
                src="https://www.w3.org/TR/SVG2/images/text/toap03.png">
            <p class="caption">示例 toap03</p>
        </div>
        <p class="view-as-svg"><a href="images/text/toap03.svg">查看此示例为 SVG（仅限支持 SVG 的浏览器）</a>
        </p>
    </div>

    <h3 id="TextpathLayoutRules" class="heading">11.8.3. 路径上的文本布局规则<a class="self-link" href="#TextpathLayoutRules"></a>
    </h3>

    <p>
        从概念上讲，路径上的文本将目标路径拉伸成水平或垂直的直线段。对于水平文本布局流，路径被拉伸成一个假设的水平线段，
        使路径的起点映射到线段的左侧。对于垂直文本布局流，路径被拉伸成一个假设的垂直线段，
        使路径的起点映射到线段的顶部。标准的
        <a href="text.html#TextLayoutAlgorithm">文本布局</a>规则应用于假设的直线段，
        然后结果映射回目标路径。垂直和双向
        <a href="text.html#TextLayoutAlgorithm">文本布局</a>规则同样适用于路径上的文本。
    </p>
    <p>
        每个字形在路径上的方向是单独确定的。
        对于水平文本布局流，给定字形的默认方向（“向上”方向）沿着从字形附着到路径的交点开始的向量，
        该向量指向相对于曲线在交点处角度逆时针90度的方向。
        对于垂直文本布局流，给定字形的默认方向沿着从字形附着到路径的交点开始的向量，
        该向量指向相对于曲线在交点处角度顺时针180度的方向。
    </p>

    <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/glyph-textpath.svg"
            alt="左边，水平文本 'A' 在路径上。右边，垂直文本 '字' 在路径上。">
        <p class="caption">
            沿路径的默认字形方向。
            左边，水平文本。右边：垂直文本。
        </p>
    </div>

    <p id="ExampleToap04">
        <span class="example-ref">示例 toap04</span> 将用于
        说明路径上文本的特定布局规则，
        这些规则补充了针对直线水平或垂直文本的基本
        <a href="text.html#TextLayoutAlgorithm">文本布局</a>规则。
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="3.6cm" viewBox="0 0 1000 300" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;path id="MyPath"
          d="M 100 125
             C 150 125 250 175 300 175
             C 350 175 450 125 500 125
             C 550 125 650 175 700 175
             C 750 175 850 125 900 125">
  &lt;/defs>
  &lt;desc>示例 toap04 - 路径上的文本布局规则&lt;/desc>

  &lt;use href="#MyPath" fill="none" stroke="red" >
  &lt;text font-family="Verdana" font-size="60" fill="blue" letter-spacing="2" >
    &lt;textPath href="#MyPath">
      选择羞耻或获得战争
    &lt;/textPath>
  &lt;/text>

  &lt;!-- 使用 'rect' 元素显示视口轮廓 -->
  &lt;rect x="1" y="1" width="998" height="298"
        fill="none" stroke="blue" stroke-width="2">
&lt;/svg></pre>
        <div class="figure"><img alt="示例 toap04 — 路径上的文本布局规则" src="https://www.w3.org/TR/SVG2/images/text/toap04.png">
            <p class="caption">示例 toap04</p>
        </div>
        <p class="view-as-svg"><a href="images/text/toap04.svg">查看此示例为 SVG（仅限支持 SVG 的浏览器）</a>
        </p>
    </div>

    <p>
        下图初步放大了 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素中的第一个字形。
    </p>

    <img alt="显示路径上的文本的图像" src="https://www.w3.org/TR/SVG2/images/text/toap05.png" width="288" height="91">

    <p>
        上方的小点显示了字形附着到路径的点。字形周围的框显示字形旋转，
        使其水平轴与曲线在字形附着到路径的点的切线平行。
        框还显示了字形的 <dfn id="CharWidth" data-dfn-type="dfn" data-export="">字符宽度</dfn>
        （即在使用水平文本布局绘制字形时，当前文本位置水平前进的量）。
    </p>

    <p>
        下一幅图片进一步放大以展示详细的布局规则。
    </p>

    <img alt="显示路径上文本的图像" src="https://www.w3.org/TR/SVG2/images/text/toap06.png" width="288" height="176">

    <p>
        对于路径上的从左到右的水平文本布局（即字形方向垂直于
        <a href="text.html#TermInlineBaseDirection">内联基准方向</a>时），布局规则如下：
    </p>

    <ul>
        <li>
            使用 <span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span> 和属性
            <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 确定第一个字形的
            <dfn id="StartPointOnPath" data-dfn-type="dfn" data-export="">路径上的起点</dfn>。对于 <span
                class="prop-value">text-anchor:start</span>，
            路径上的起点是路径上代表从路径起点沿路径计算出的
            <span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span> 距离的点，
            使用用户代理的 <a href="paths.html#DistanceAlongAPath">沿路径的距离</a> 算法计算。

            对于 <span class="prop-value">text-anchor:middle</span>，
            路径上的起点是路径上代表从路径起点计算出的
            [ <span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span> 减去
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
            元素中所有字形的总前进值的一半 ] 距离的点，
            使用用户代理的 <a href="paths.html#DistanceAlongAPath">沿路径的距离</a> 算法计算。

            对于 <span class="prop-value">text-anchor:end</span>，
            路径上的起点是路径上代表从路径起点计算出的
            [ <span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span> 减去
            <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
            元素中所有字形的总前进值 ] 的点。
            在渲染第一个字形之前，路径上的起点的水平分量将根据各种水平对齐文本属性和属性进行调整，
            例如 <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 属性值
            在 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中。（在上图中，
            路径上的起点是路径上的最左侧点。）
        </li>

        <li>
            确定字形的字符宽度（即在使用水平文本布局绘制字形时，
            当前文本位置水平前进的量）。 （在上图中，字符宽度是框侧面两个点之间的距离。）
        </li>

        <li>
            使用用户代理的
            <a href="paths.html#DistanceAlongAPath">沿路径的距离</a>算法，
            确定距离字形的路径起点 charwidth 距离的曲线上的点。此点是字形的
            <dfn id="EndPointOnPath" data-dfn-type="dfn" data-export="">路径上的终点</dfn>。
            （在上图中，字形的路径上的终点是路径上最右侧的点。）
        </li>

        <li>
            确定 <dfn id="MidPointOnPath" data-dfn-type="dfn" data-export="">路径上的中点</dfn>，
            即位于路径起点和终点之间“中途”的路径上的点（用户代理可以选择距离计算或参数计算）。
            （在上图中，路径上的中点显示为白点。）
        </li>

        <li>
            确定 <dfn id="GlyphMidline" data-dfn-type="dfn" data-export="">字形中线</dfn>，
            它是在字形坐标系中穿过字形 x 轴中点的垂直线。 （在上图中，字形中线显示为虚线。）
        </li>

        <li>
            将字形定位，使字形中线穿过路径上的中点，并垂直于通过路径起点和路径终点的线。
        </li>

        <li>
            根据属性
            <a class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a> 和任何指定的
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 属性值，
            将字形相对于路径上的中点垂直对齐。在上例中，<a class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a>
            属性未指定，因此将使用 <span class="prop-value">alignment-baseline:baseline</span> 的初始值。
            没有 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>
            元素；因此，字形的基线与路径上的中点对齐。
        </li>

        <li>
            对于每个后续字形，将新的路径上的起点设置为上一个字形的路径终点，
            但要进行适当的调整，考虑字体中的水平字距调整表和各种属性和属性的当前值，
            包括间距属性（例如 <a class="property" href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">字母间距</a>
            和 <a class="property" href="https://www.w3.org/TR/css-text-3/#word-spacing-property">单词间距</a>）和
            <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素
            其中提供了属性 <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 的值。
            所有调整均作为路径上的距离调整计算，使用用户代理的
            <a href="paths.html#DistanceAlongAPath">沿路径的距离</a>算法计算。
        </li>

        <li>
            中点不在路径上的字形不会被渲染。
        </li>

        <li>
            继续渲染字形，直到没有更多字形（或路径上没有更多空间）。
        </li>
    </ul>

    <p>
        可比较的规则适用于路径上的自上而下的垂直文本布局（即，当字形方向与
        <a href="text.html#TermInlineBaseDirection">内联基准方向</a>平行时，
        布局规则如下：
    </p>

    <ul>
        <li>
            使用与路径上的水平文本布局相同的方法确定路径上的起点，
            但在渲染第一个字形之前，路径上起点的水平分量会根据各种
            垂直对齐文本属性和属性进行调整，例如 <span class="attr-name">‘<a
                    href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 属性
            值在 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素中。
        </li>

        <li>
            确定字形的字符高度（即当使用垂直文本布局绘制字形时，
            当前文本位置垂直前进的量）。
        </li>

        <li>
            使用用户代理的 <a href="paths.html#DistanceAlongAPath">沿路径的距离</a>算法，
            确定距离字形路径起点字符高度距离的曲线上的点。此点是字形的路径终点。
        </li>

        <li>
            确定路径上的中点，即路径起点和终点之间的“中途”点（用户代理可以选择距离计算或参数计算）。
        </li>

        <li>
            确定字形中线，它是在字形坐标系中穿过字形 y 轴中点的水平线。
        </li>

        <li>
            将字形定位，使字形中线穿过路径上的中点，并垂直于通过路径起点和路径终点的线。
        </li>

        <li>
            根据属性 <a class="property" href="text.html#AlignmentBaselineProperty">alignment-baseline</a> 和任何指定的
            <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 属性值，
            将字形水平对齐（水平是相对于字形的坐标系而言）相对于路径上的中点。
        </li>

        <li>
            对于每个后续字形，将新的路径上的起点设置为上一个字形的路径终点，
            但要进行适当的调整，考虑字体中的垂直字距调整表和各种属性和属性的当前值，
            包括间距属性和 <span class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素
            其中提供了属性 <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 和
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 的值。
            所有调整均作为路径上的距离调整计算，使用用户代理的 <a href="paths.html#DistanceAlongAPath">沿路径的距离</a> 算法计算。
        </li>

        <li>
            字形的路径中点超出开放子路径任一端的不会被渲染。
        </li>

        <li>
            继续渲染字形，直到没有更多字形。
        </li>
    </ul>

    <p>
        在上述计算中，如果路径上的起点或终点超出路径的末端，
        则将路径延伸到其末端以外，并以一条与路径末端切线平行的直线延伸，
        以便仍然可以计算路径上的中点。
    </p>

    <p>
        当 <a href="text.html#TermInlineBaseDirection">内联基准方向</a> 为水平时，
        <span class="attr-name">‘x’</span> 属性代表路径上的新绝对偏移量，
        因此为路径上的起点提供明确的新值。
        <span class="attr-name">‘y’</span> 属性则被忽略。
    </p>

    <p>
        当 <a href="text.html#TermInlineBaseDirection">内联基准方向</a> 为垂直时，
        <span class="attr-name">‘y’</span> 属性代表路径上的新绝对偏移量，
        为路径上的起点提供明确的新值。<span class="attr-name">‘x’</span> 属性则被忽略。
    </p>

    <p>
        将所有字符定位在 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 中后，
        <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 设置为路径的终点，
        并在单一封闭路径的情况下调整 <span class="attr-name">‘<a
                href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span>。
    </p>

    <div class="figure">
        <img alt="路径上的文本显示了 &lt;textPath> 元素后文本的起始点。"
            src="https://www.w3.org/TR/SVG2/images/text/text-path-nonpath-text.svg">
        <p class="caption">
            没有显式定位信息的 <span class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
            元素后文本的起始点位于路径的终点（红点）。
        </p>
    </div>

    <p class="annotation">
        选择路径的末端作为起始点是因为它对作者来说更具可预测性（不依赖于字体等）。在
        <a href="https://www.w3.org/2016/04/22-svg-minutes.html#item08">伦敦（2016）</a>编辑会议上决定。
        另见 <a href="https://github.com/w3c/svgwg/issues/104">GitHub Issue 84</a>。
    </p>



    <h2 id="TextRenderingOrder" class="heading">11.9. 文本渲染顺序<a class="self-link" href="#TextRenderingOrder"></a></h2>

    <p>一个 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素被渲染为一个或多个块。
        每个块（由 <a href="#TextLayoutAlgorithm">文本布局算法</a> 生成）
        按文档顺序逐一渲染。每个渲染块由一个或多个字形组成，
        它们像单一路径一样被填充和描边。</p>

    <p>
        这意味着块中的所有字形都应该先被填充，
        然后一次性描边，或者根据 <a class="property" href="painting.html#PaintOrderProperty">paint-order</a> 属性的值反过来。
    </p>

    <p>就绘制而言，一个 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 有零个、一个或多个
        <a href="paths.html#TermEquivalentPath">等效路径</a>，每个块一个。每个等效路径由该块内每个字形的一个子路径组成。
    </p>

    <p class="note">由于 <a class="property" href="painting.html#FillRuleProperty">fill-rule</a> 属性不适用于 SVG 文本元素，
        因此 <a href="paths.html#TermEquivalentPath">等效路径</a> 内子路径的具体顺序无关紧要。</p>

    <p>每个子路径的起始位置和路径绕字形形状的方向没有定义。
        然而，对于给定的字体和字形，用户代理应该保持一致。
    </p>

    <p class="note">这意味着在文本上应用虚线描边时，不同实现中的虚线模式可能不会位于相同的位置。</p>


    <h2 id="TextProperties" class="heading">11.10. 属性和伪元素<a class="self-link" href="#TextProperties"></a></h2>

    <p>
        CSS 提供了许多用于文本样式的属性。通常，只有两组属性适用于 SVG：
        确定要渲染的字形的属性
        (<a class="property" href="https://www.w3.org/TR/css-fonts-3/#font-family-prop">font-family</a>,
        <a class="property" href="https://www.w3.org/TR/css-fonts-3/#font-style-prop">font-style</a> 等) 和
        应用于<em>段落</em>级别的属性 (<a class="property" href="text.html#DirectionProperty">direction</a>,
        <a class="property" href="text.html#WritingModeProperty">writing-mode</a>,
        <a class="property" href="text.html#LineHeightProperty">line-height</a>,
        <a class="property" href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a> 等)。
    </p>

    <p>
        必须支持的 CSS 属性列表可以在
        <a href="styling.html#RequiredProperties">样式</a>章节中找到。
    </p>

    <ul>
        <li>
            仅适用于预格式化文本和自动换行文本的属性，当
            <a href="text.html#TermWrappingArea">换行区域</a>由
            <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性定义时:
            <p>
                <a class="property" href="text.html#TextAnchorProperty">text-anchor</a>。
            </p>
        </li>
        <li>
            仅适用于自动换行文本的属性，除了那些换行区域由
            <a href="text.html#TermWrappingArea">换行区域</a>由
            <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性定义时:
            <p>
                <a class="property" href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>，
                <a class="property"
                    href="https://www.w3.org/TR/css-text-3/#text-align-last-property">text-align-last</a>，
                <a class="property" href="https://www.w3.org/TR/css-text-3/#text-justify-property">text-justify</a>。
            </p>
        </li>
        <li>
            仅适用于自动换行文本的属性:
            <p>
                <a class="property" href="https://www.w3.org/TR/css-text-3/#text-indent-property">text-indent</a>，
                <a class="property" href="https://www.w3.org/TR/css-text-3/#line-break-property">line-break</a>，
                <a class="property" href="https://www.w3.org/TR/css-text-3/#word-break-property">word-break</a>，
                <a class="property" href="https://www.w3.org/TR/css-text-3/#hyphens-property">hyphens</a>，
                <a class="property" href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">word-wrap</a>，
                <a class="property" href="https://www.w3.org/TR/css-text-3/#overflow-wrap-property">overflow-wrap</a>。
            </p>
        </li>
    </ul>

    <p>
        此外，必须支持 @font-face 规则用于字体选择，并且必须在 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span> 元素上支持
        ::first-line 和 ::first-letter 伪元素。在交互模式下，还必须支持 ::selection 伪元素。
    </p>

    <p>
        其他影响文本布局和渲染的 CSS 属性也可以被 SVG 用户代理支持；
        它们的效果应在整个 SVG 文本布局过程的 CSS 文本布局步骤中考虑。
    </p>

    <p class="note">
        例如，虽然 SVG 2 不要求支持 <a class="property"
            href="https://www.w3.org/TR/css-writing-modes-3/#text-combine-upright">text-combine-upright</a> 属性，
        但其在 SVG 上下文中的行为应该是显而易见的。
    </p>

    <p>
        一些 CSS 属性在 SVG 文本元素上不得有任何效果:
    </p>

    <ul>
        <li>
            边框属性（例如 <a class="property"
                href="https://www.w3.org/TR/CSS21/box.html#propdef-border-top-style">border-top-style</a>）。
            CSS 布局过程生成的框必须不以任何边框进行尺寸调整。所有
            <a class="property" href="https://www.w3.org/TR/CSS21/box.html#propdef-border-style">border-style</a>
            组件长手属性在 SVG 文本元素上的使用值为 <span class="prop-value">none</span>。
        </li>

        <li>
            除 <span class="prop-value">none</span> 和
            <span class="prop-value">inline</span> 之外的 display 属性值。与所有其他 SVG
            元素一样，在 SVG 文本元素上使用的任何 <a class="property" href="render.html#VisibilityControl">display</a> 值
            除了 <span class="prop-value">none</span> 之外，都被处理为 <span class="prop-value">inline</span>。
            因此，单个 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
            元素不可能拥有任何块级子元素。
        </li>

        <li>
            <a class="property" href="https://www.w3.org/TR/CSS21/visuren.html#propdef-float">float</a> 属性，其在 SVG
            文本元素上的使用值为 <span class="prop-value">none</span>。
        </li>

        <li>
            <a class="property" href="https://www.w3.org/TR/CSS21/visuren.html#propdef-position">position</a>
            属性，其在 SVG 文本元素上的使用值为 <span class="prop-value">static</span>。
        </li>

        <li>
            边距属性（例如 <a class="property"
                href="https://www.w3.org/TR/CSS21/box.html#propdef-margin-top">margin-top</a>），其在 SVG 文本元素上的使用值为 <span
                class="prop-value">0</span>。
        </li>

        <li>
            当文本是预格式化时，<a class="property" href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>
            属性，其在这些 SVG 文本元素上的使用值为 <span class="prop-value">start</span>。
        </li>

        <li>
            <a class="property" href="https://www.w3.org/TR/CSS21/generate.html#propdef-content">content</a>
            属性，其在 SVG 文本元素上的使用值为 <span class="prop-value">none</span>。
        </li>
    </ul>

    <p>
        此外，::before 和 ::after 生成内容的伪元素不得应用于 SVG 文本元素。
    </p>

    <p class="note">
        将来的规范可能会引入对 ::before 和 ::after 生成内容伪元素的支持；
        作者不应依赖于它们被忽略。
    </p>

    <h3 id="TextPropertiesSVG" class="heading">11.10.1. SVG属性<a class="self-link" href="#TextPropertiesSVG"></a></h3>

    <p>
        本节介绍了在本规范的其他部分未涉及且特定于SVG的属性。
    </p>

    <h4 id="TextAnchoringProperties" class="heading">11.10.1.1. 文本对齐，‘<span class="property">text-anchor</span>’ 属性<a
            class="self-link" href="#TextAnchoringProperties"></a></h4>

    <p>
        <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性用于对齐（开始对齐、居中对齐或结束对齐）
        <em>预格式化</em>文本或<em>自动换行文本</em>，其 <a href="text.html#TermWrappingArea">换行区域</a>
        是相对于给定点由 <a class="property" href="text.html#InlineSizeProperty">inline-size</a> 属性确定的。
        它不适用于其他类型的<em>自动换行文本</em>，可参考 <a class="property"
            href="https://www.w3.org/TR/css-text-3/#text-align-property">text-align</a>。 对于多行文本，
        每行的对齐方式独立进行。
    </p>

    <p>
        <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性应用于给定 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span> 元素中的每个独立的
        <a href="text.html#TermTextChunk">文本块</a>。每个文本块都有一个初始的<a href="text.html#TermCurrentTextPosition">当前文本位置</a>，
        该位置表示用户坐标系统中的点（根据上下文）由 <span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span class="attr-name">‘<a
                href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
        属性或其他因素决定。每个文本块的最后一个
        <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 是在放置文本块的最后一个字形之后的
        <a href="text.html#TermCurrentTextPosition">当前文本位置</a>。这些位置是在应用<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a> 属性之前确定的。
    </p>

    <table class="propdef def">
        <tr>
            <th>名称:</th>
            <td><dfn id="TextAnchorProperty" data-dfn-type="property" data-export="">text-anchor</dfn></td>
        </tr>
        <tr>
            <th>值:</th>
            <td>start | middle | end</td>
        </tr>
        <tr>
            <th>初始值:</th>
            <td>start</td>
        </tr>
        <tr>
            <th>适用于:</th>
            <td><a href="text.html#TermTextContentElement">文本内容元素</a></td>
        </tr>
        <tr>
            <th>是否继承:</th>
            <td>是</td>
        </tr>
        <tr>
            <th>百分比:</th>
            <td>不适用</td>
        </tr>
        <tr>
            <th>媒体:</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值:</th>
            <td>按指定</td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">是否可动画化</a>:</th>
            <td>是</td>
        </tr>
    </table>

    <p>
        各个值具有以下含义:
    </p>

    <dl>
        <dt><span class="attr-value">start</span></dt>
        <dd>
            渲染的字符对齐，使得渲染文本的起始位置位于初始当前文本位置。
            对于属性 <a class="property" href="text.html#DirectionProperty">direction</a> 值为
            <span class="prop-value">"ltr"</span> 的元素（适用于大多数欧洲语言），
            文本的左侧在初始文本位置渲染。对于属性
            <a class="property" href="text.html#DirectionProperty">direction</a> 值为
            <span class="prop-value">"rtl"</span> 的元素（适用于阿拉伯语和希伯来语），
            文本的右侧在初始文本位置渲染。对于垂直主文本方向的元素（常见于亚洲文本），
            文本的顶部在初始文本位置渲染。
        </dd>

        <dt><span class="attr-value">middle</span></dt>
        <dd>
            渲染的字符被移动，使得渲染文本的几何中点（在应用 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性之前从初始和最终
            <a href="text.html#TermCurrentTextPosition">当前文本位置</a> 确定）位于初始当前文本位置。
        </dd>

        <dt><span class="attr-value">end</span></dt>
        <dd>
            渲染的字符被移动，使得渲染文本的末端（在应用 <a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 属性之前的最终 <a
                href="text.html#TermCurrentTextPosition">当前文本位置</a>）位于初始当前文本位置。
            对于属性 <a class="property" href="text.html#DirectionProperty">direction</a> 值为
            <span class="prop-value">"ltr"</span> 的元素（适用于大多数欧洲语言），
            文本的右侧在初始文本位置渲染。对于属性
            <a class="property" href="text.html#DirectionProperty">direction</a> 值为
            <span class="prop-value">"rtl"</span> 的元素（适用于阿拉伯语和希伯来语），
            文本的左侧在初始文本位置渲染。对于垂直主文本方向的元素（常见于亚洲文本），
            文本的底部在初始文本位置渲染。
        </dd>
    </dl>

    <div class="example">
        <p>在多行文本上使用<a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 的示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="100" viewBox="0 0 300 100">

  &lt;text x="150" y="30" style="font: 20px sans-serif; white-space: pre-line;
                              text-anchor: middle;">
    This multi-line text is
    anchored to the middle.&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-anchor-middle.svg"
                alt="图片显示了通过 text-anchor 居中对齐的两行文本。">
            <p class="caption">
                保留的换行符创建了两个<a href="text.html#TermTextChunk">文本块</a>，每个文本块独立对齐。
            </p>
        </div>
    </div>

    <div class="example">
        <p>在多行文本上使用<a class="property" href="text.html#TextAnchorProperty">text-anchor</a> 的另一个示例。</p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="200" height="150" viewBox="0 0 200 150">
  &lt;path d="m 100,0 0,150" style="fill:none;stroke:#add8e6">
  &lt;text x="100 100 100" y="50 95 140"
	style="font-size: 42px; text-anchor: middle">I❤SVG&lt;/text>
&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-anchor-chunks.svg"
                alt="图片显示了分为'I', '❤', 'SVG'的三行文本。">
            <p class="caption">
                文本被分为三个<a href="text.html#TermTextChunk">文本块</a>（由于 <span class="attr-name">‘<a
                        href="text.html#TextElementXAttribute"><span>x</span></a>’</span> 和 <span class="attr-name">‘<a
                        href="text.html#TextElementYAttribute"><span>y</span></a>’</span>
                属性中的三个坐标）。每个<a href="text.html#TermTextChunk">文本块</a>独立对齐。
            </p>
        </div>
    </div>


    <h4 id="GlyphOrientationHorizontalProperty" class="heading">11.10.1.2. ‘<span
            class="property">glyph-orientation-horizontal</span>’ 属性<a class="self-link"
            href="#GlyphOrientationHorizontalProperty"></a></h4>

    <p class="note">
        此属性在SVG 2中已被移除。
    </p>

    <h4 id="GlyphOrientationVerticalProperty" class="heading">11.10.1.3. ‘<span
            class="property">glyph-orientation-vertical</span>’ 属性<a class="self-link"
            href="#GlyphOrientationVerticalProperty"></a></h4>

    <p>
        此属性仅适用于垂直文本。在SVG 2中已被废弃，并部分由CSS Writing Modes Level 3中的 <a class="property"
            href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a> 属性替代。
        以下SVG 1.1值仍必须通过将该属性作为 <a class="property"
            href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a> 的简写来支持：
    </p>
    <ul>
        <li>
            <span class="prop-value">'auto'</span> 映射为
            <span class="prop-value">'mixed'</span>;
        </li>
        <li>
            <span class="prop-value">'0deg'</span> 和
            <span class="prop-value">'0'</span> 映射为
            <span class="prop-value">'upright'</span>。
        </li>
        <li>
            <span class="prop-value">'90deg'</span> 和
            <span class="prop-value">'90'</span> 映射为
            <span class="prop-value">'sideways'</span>。
        </li>
    </ul>
    <p>
        任何其他值都必须视为无效。
    </p>


    <h4 id="KerningProperty" class="heading">11.10.1.4. ‘<span class="property">kerning</span>’ 属性<a class="self-link"
            href="#KerningProperty"></a></h4>

    <p class="note">
        ‘<span class="property">kerning</span>’ 属性在SVG 2中已被移除。
    </p>
    <p>
        SVG 1.1 使用 'kerning' 属性来确定是否应使用字体字距调整表来调整字形之间的间距。它还允许一个
        <span class="prop-value">&lt;length></span> 值，该值（如果给定）将添加到字形之间的间距中（作为
        <a class="property" href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>
        属性的补充）。此属性在SVG 2中被
        CSS 的 <a class="property" href="https://www.w3.org/TR/css-fonts-3/#font-kerning-prop">font-kerning</a>
        属性替代，后者仅控制是否启用/禁用字体字距调整表。
    </p>
    <p class="annotation">
        Chrome的UseCounter数据显示在2014年使用率为0.01%。参见GitHub问题80。
    </p>

    <h3 id="TextPropertiesAdaptions" class="heading">11.10.2. SVG适配<a class="self-link"
            href="#TextPropertiesAdaptions"></a></h3>

    <p>
        本节涵盖了其他规范中未涉及的CSS属性，并且这些属性要么针对SVG进行了特定的适配，要么与SVG 1.1有显著的改变。
    </p>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2要求：</th>
                <td>参考CSS3 Fonts。</td>
            </tr>
            <tr>
                <th>决议：</th>
                <td><a href="https://www.w3.org/2011/07/29-svg-minutes.html#item08">SVG 2将依赖于CSS3 Fonts。</a>
                </td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>与CSS 2.1和CSS3对Web字体功能保持一致，并提供对字体高级排版功能的访问。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3123">ACTION-3123</a>)</td>
            </tr>
        </table>
    </div>

    <h4 id="FontVariantProperty" class="heading">11.10.2.1. ‘<span class="property">font-variant</span>’ 属性<a
            class="self-link" href="#FontVariantProperty"></a></h4>

    <p>
        CSS字体模块3级改变了
        <a href="https://www.w3.org/TR/css-fonts-3/#propdef-font-variant">'font-variant'</a>
        属性的含义，该属性的功能已被重新定义（并大大扩展）为用于从单个字体中选择字体变体的简写。
    </p>
    <p class="note">
        SVG 2要求实现所有的<a class="property" href="text.html#FontVariantProperty">font-variant</a>子属性（例如<a class="property"
            href="https://www.w3.org/TR/css-fonts-3/#font-variant-ligatures-prop">font-variant-ligatures</a>）。
    </p>

    <h4 id="LineHeightProperty" class="heading">11.10.2.2. ‘<span class="property">line-height</span>’ 属性<a
            class="self-link" href="#LineHeightProperty"></a></h4>

    <p>
        SVG使用<a class="property"
            href="text.html#LineHeightProperty">line-height</a>属性来确定多行文本中添加的行间距（无论是水平还是垂直文本）。此属性不适用于路径文本。
    </p>
    <p class="note">
        除了此处提供的附加信息外，<a href="https://www.w3.org/TR/CSS21/visudet.html#line-height">规范定义</a>的<a class="property"
            href="text.html#LineHeightProperty">line-height</a>属性在CSS 2.1
        规范中给出
        （[<a href="refs.html#ref-css2">CSS2</a>]）。
    </p>

    <p class="annotation">
        <a href="https://www.w3.org/TR/css-inline-3/">CSS Inline Module 3级</a>可能会更新'line-height'的定义。
    </p>

    <h4 id="WritingModeProperty" class="heading">11.10.2.3. ‘<span class="property">writing-mode</span>’ 属性<a
            class="self-link" href="#WritingModeProperty"></a></h4>

    <p>
        此属性设置<a href="text.html#TermBlockFlowDirection">块流方向</a>，即文本行的堆叠方向。因此，它还决定了文本是水平还是垂直的方向。
    </p>
    <p>
        SVG 2参考<a href="https://www.w3.org/TR/css-writing-modes-3">CSS Writing Modes Level 3</a>中对
        <a href="https://www.w3.org/TR/css-writing-modes-3/#block-flow">'writing-mode'</a>属性的定义。该规范引入了新的属性值。
        SVG 1.1的属性值已废弃，但必须通过将指定值转换为计算值来支持，具体如下：
    </p>
    <ul>
        <li>
            <span class="prop-value">'lr'</span>，
            <span class="prop-value">'lr-tb'</span>，
            <span class="prop-value">'rl'</span>，和
            <span class="prop-value">'rl-tb'</span> 转换为
            <span class="prop-value">'horizontal-tb'</span>；
        </li>
        <li>
            <span class="prop-value">'tb'</span>，和
            <span class="prop-value">'tb-rl'</span> 转换为
            <span class="prop-value">'vertical-rl'</span>。
        </li>
    </ul>
    <p class="note">
        在SVG 1.0中，此属性还可以被解释为设置<a href="text.html#TermInlineBaseDirection">内联基方向</a>，这导致了关于它与<a class="property"
            href="text.html#DirectionProperty">direction</a>属性之间角色的混淆。SVG 1.1更具体地定义了<a class="property"
            href="text.html#DirectionProperty">direction</a>的作用
        （例如，<a class="property" href="text.html#DirectionProperty">direction</a>设置了<a class="property"
            href="text.html#TextAnchorProperty">text-anchor</a>属性的参考点），但仍存在解释空间。由于SVG 1.0和SVG 1.1都不允许多行文本，这增加了混乱。
    </p>
    <p class="note">
        除了这里提供的附加信息外，<a href="https://www.w3.org/TR/css-writing-modes-3/#block-flow">规范定义</a>的<a class="property"
            href="text.html#WritingModeProperty">writing-mode</a>属性在CSS Writing Modes 3中给出
        ([<a href="refs.html#ref-css-writing-modes-3">css-writing-modes-3</a>])。
    </p>

    <h4 id="DirectionProperty" class="heading">11.10.2.4. ‘<span class="property">direction</span>’ 属性<a
            class="self-link" href="#DirectionProperty"></a></h4>

    <p>
        此属性指定<span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>或<span
            class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span>元素的<a
            href="text.html#TermInlineBaseDirection">内联基方向</a>。
        它定义了文本行的<q>开始</q>和<q>结束</q>点，供<a class="property" href="text.html#TextAnchorProperty">text-anchor</a>和<a
            class="property" href="text.html#InlineSizeProperty">inline-size</a>属性使用。
        它还可能影响字符的定位方向，特别是当<a class="property"
            href="https://www.w3.org/TR/css-writing-modes-3/#unicode-bidi">unicode-bidi</a>属性的值为
        <span class="prop-value">embed</span>或<span class="prop-value">bidi-override</span>时。
    </p>
    <p>
        <a class="property" href="text.html#DirectionProperty">direction</a>属性仅适用于相对于<a
            href="text.html#TermInlineBaseDirection">内联基方向</a>垂直定向的字形，
        这包括通常的水平排列的拉丁或阿拉伯文本，以及相对于从上到下的<a href="text.html#TermInlineBaseDirection">内联基方向</a>顺时针旋转90度的拉丁或阿拉伯窄格字符。
    </p>
    <p class="issue" data-issue="54" id="issue54"><a class="self-link" href="#issue54"></a>
        审阅者，请特别注意确保这与CSS3书写模式一致。
    </p>

    <p class="note">
        除了这里提供的附加信息外，<a href="https://www.w3.org/TR/css-writing-modes-3/#direction">规范定义</a>的<a class="property"
            href="text.html#DirectionProperty">direction</a>属性在CSS Writing Modes Level 3
        ([<a href="refs.html#ref-css-writing-modes-3">css-writing-modes-3</a>])中给出。
    </p>

    <p>
        在许多情况下，Unicode双向算法
        ([<a href="refs.html#ref-unicode">UNICODE</a>])会自动产生期望的结果，作者在这种情况下不需要使用这些属性。
        对于其他情况，例如使用从右到左的语言时，可以将<a class="property" href="text.html#DirectionProperty">direction</a>属性添加到<a
            href="struct.html#TermOutermostSVGElement">最外层的svg元素</a>，
        并允许该方向继承到所有文本元素，如下例所示（可用作模板）：
    </p>

    <div class="example">
        <pre class="xml">&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100%" height="100%" viewBox="0 0 600 72"
     direction="rtl" xml:lang="fa">

  &lt;title direction="ltr" xml:lang="en">Right-to-left Text&lt;/title>
  &lt;desc direction="ltr" xml:lang="en">
    A simple example for using the 'direction' property in documents
    that predominantly use right-to-left languages.
  &lt;/desc>

  &lt;text x="300" y="50" text-anchor="middle" font-size="36">داستان SVG 1.1 SE طولا ني است.&lt;/text>

&lt;/svg></pre>
        <div class="figure"><img alt="示例" src="https://www.w3.org/TR/SVG2/images/text/rtl-text.png">
            <p class="caption">示例</p>
        </div>
        <p class="view-as-svg"><a href="images/text/rtl-text.svg">以SVG查看此示例（仅限支持SVG的浏览器）</a></p>
    </div>

    <p>
        下面是另一个示例，其中隐式的双向重排不足以满足需求：
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="100%" height="100%" viewBox="0 0 600 72"
     direction="rtl" xml:lang="he">

  &lt;title direction="ltr" xml:lang="en">Right-to-left Text&lt;/title>
  &lt;desc direction="ltr" xml:lang="en">
    An example for using the 'direction' and 'unicode-bidi' properties
    in documents that predominantly use right-to-left languages.
  &lt;/desc>

  &lt;text x="300" y="50" text-anchor="middle" font-size="36"> כתובת MAC:&amp;#x200F;
    &lt;tspan direction="ltr" unicode-bidi="embed">00-24-AF-2A-55-FC&lt;/tspan>
  &lt;/text>

&lt;/svg></pre>
        <div class="figure"><img alt="示例" src="https://www.w3.org/TR/SVG2/images/text/rtl-complex.png">
            <p class="caption">示例</p>
        </div>
        <p class="view-as-svg"><a href="images/text/rtl-complex.svg">以SVG查看此示例（仅限支持SVG的浏览器）</a></p>
    </div>


    <h4 id="DominantBaselineProperty" class="heading">11.10.2.5. ‘<span class="property">dominant-baseline</span>’ 属性<a
            class="self-link" href="#DominantBaselineProperty"></a></h4>

    <p class="note">
        此属性在CSS Line Layout Module 3规范中定义。参见
        <a href="https://www.w3.org/TR/css-inline-3/#propdef-dominant-baseline">‘dominant-baseline’</a>。
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]
    </p>

    <p>
        SVG 2对该属性的定义进行了修改，具体如下：
    </p>
    <ul>
        <li>不再支持 'reset-size' 值。任何<a class="property"
                href="https://www.w3.org/TR/css-fonts-3/#font-size-prop">font-size</a>的改变都会重置dominant-baseline表。</li>
        <li>不再支持 'use-script' 和 'no-change' 值。</li>
        <li>此属性现在是继承的。（行为基本未变。）</li>
    </ul>

    <p class="note">
        SVG 使用<a class="property" href="text.html#DominantBaselineProperty">dominant-baseline</a>属性的值来对齐字形，
        相对于<span class="attr-name">‘<a href="text.html#TextElementXAttribute"><span>x</span></a>’</span>和
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性。
        对于<a class="property" href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>
        值为<span class="prop-value">sideways</span>，<span class="prop-value">auto</span>值的<a class="property"
            href="text.html#DominantBaselineProperty">dominant-baseline</a>值为<span class="prop-value">alphabetic</span>；
        但为了向后兼容，字形应使用<span class="prop-value">central</span>值与<span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>
        和<span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>属性对齐。
    </p>

    <p class="issue" data-issue="56" id="issue56"><a class="self-link" href="#issue56"></a>
        我们对此旧行为的实际使用场景感兴趣，是否有人仍希望保留旧行为。
    </p>

    <h4 id="AlignmentBaselineProperty" class="heading">11.10.2.6. ‘<span class="property">alignment-baseline</span>’
        属性<a class="self-link" href="#AlignmentBaselineProperty"></a></h4>

    <p class="note">
        此属性在CSS Line Layout Module 3规范中定义。参见
        <a href="https://www.w3.org/TR/css-inline-3/#propdef-alignment-baseline">‘alignment-baseline’</a>。
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]
    </p>

    <p class="note">
        在新内容中应优先使用<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>属性的简写形式。
    </p>

    <p>
        SVG 2对该属性的定义也做了一些修改，特别是：移除了'auto'、'before-edge'和'after-edge'值。
        为了向后兼容，'text-before-edge' 应映射为 'text-top'，而 'text-after-edge' 应映射为 'text-bottom'。
        'text-before-edge' 和 'text-after-edge' 不应与<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>属性一起使用。
    </p>

    <h4 id="BaselineShiftProperty" class="heading">11.10.2.7. ‘<span class="property">baseline-shift</span>’ 属性<a
            class="self-link" href="#BaselineShiftProperty"></a></h4>

    <p class="note">
        此属性在CSS Line Layout Module 3规范中定义。参见
        <a href="https://www.w3.org/TR/css-inline-3/#propdef-baseline-shift">'baseline-shift'</a>。
        [<a href="refs.html#ref-css-inline-3">css-inline-3</a>]
    </p>

    <p class="note">
        在新内容中应优先使用<a class="property"
            href="https://drafts.csswg.org/css-inline/#transverse-alignment">vertical-align</a>属性的简写形式。
    </p>

    <p>
        SVG 1.1 中的初始值 'baseline' 已被 SVG 2 移除。用户代理<em>可以</em>将此值视为 '0' 来支持旧版 SVG 内容。
    </p>

    <p class="annotation">
        'baseline' 值被移除是因为'vertical-align'已被转换为 'alignment-baseline' 和 'baseline-shift' 的简写形式，
        且'baseline'也是'alignment-baseline'的一个值，与 '0' 的长度值重复。
    </p>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要求：</th>
                <td>与CSS对基线对齐功能的保持一致。</td>
            </tr>
            <tr>
                <th>解决方案：</th>
                <td><a href="https://www.w3.org/2012/01/13-svg-irc#T03-24-06">SVG 2将弃用‘<span
                            class="property">baseline-shift</span>’并使用‘<span
                            class="property">vertical-align</span>’代替。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>与CSS保持一致。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3281">ACTION-3281</a>)</td>
            </tr>
        </table>
    </div>

    <p class="annotation">
        <a href="https://www.w3.org/TR/css-inline-3/#propdef-baseline-shift">'baseline-shift'</a>
        对齐下标和上标很重要（Inkscape依赖此功能）。
        它仍在CSS Inline Layout Module Level 3中保留。
        <a href="https://www.w3.org/TR/css-inline-3/#propdef-vertical-align">'vertical-align'</a>
        是一个用于同时更改多个属性的简写，包括'baseline-shift'。
    </p>

    <h4 id="LetterSpacingProperty" class="heading">11.10.2.8. ‘<span class="property">letter-spacing</span>’ 属性<a
            class="self-link" href="#LetterSpacingProperty"></a></h4>

    <p>
        SVG 2 删除了<a class="property"
            href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>属性中的百分比值。
    </p>
    <p class="note">
        除了特别说明，参见CSS Text Level 3中对<a class="property"
            href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>的定义。([<a
            href="refs.html#ref-css-text-3">css-text-3</a>])。
    </p>
    <p class="annotation">
        基于SVG视口的百分比值被认为不太实用。这使'letter-spacing'的定义与CSS保持一致。
    </p>

    <h4 id="WordSpacingProperty" class="heading">11.10.2.9. ‘<span class="property">word-spacing</span>’ 属性<a
            class="self-link" href="#WordSpacingProperty"></a></h4>

    <p>
        SVG 2 改变了<a class="property"
            href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>属性中百分比值的含义。
        在 SVG 1.1 中，百分比定义了相对于<a href="coords.html#TermSVGViewport">SVG视口</a>大小的额外间距。
        在 SVG 2 中，遵循 CSS Text Level 3，百分比定义了相对于受影响字符宽度的额外间距。
    </p>
    <p class="note">
        除了特别说明，参见CSS Text Level 3中对<a class="property"
            href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>的定义。([<a
            href="refs.html#ref-css-text-3">css-text-3</a>])。
    </p>
    <p class="annotation">
        基于SVG视口的百分比值被认为不太实用。这使'word-spacing'的定义与CSS保持一致。
    </p>

    <h4 id="TextOverflowProperty" class="heading">11.10.2.10. ‘<span class="property">text-overflow</span>’ 属性<a
            class="self-link" href="#TextOverflowProperty"></a></h4>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要求：</th>
                <td>添加 <a class="property" href="text.html#TextOverflowProperty">text-overflow</a> 功能。</td>
            </tr>
            <tr>
                <th>解决方案：</th>
                <td><a href="https://www.w3.org/2011/03/03-svg-minutes.html#item04">我们将在 SVG 2 中添加 text-overflow。</a>
                </td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>与 CSS 保持一致，允许指示文本未全部显示。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Erik (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3003">ACTION-3003</a>)</td>
            </tr>
        </table>
    </div>

    <p class="note">
        SVG 2 新增功能。

        添加此功能是为了让用户代理能够以更有用的方式处理超出预定义换行区域的文本字符串。此功能使得SVG文本处理与HTML/CSS对齐。
    </p>

    <p class="note">
        参见 CSS3 UI 规范中关于<a href="https://www.w3.org/TR/2015/CR-css-ui-3-20150707/#text-overflow">'text-overflow'</a>的定义。
        [<a href="refs.html#ref-css-ui-3">css-ui-3</a>]
    </p>

    <p>
        SVG 使用<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>属性来控制当<a
            href="text.html#TermTextContentBlockElement">文本内容块元素</a>中的文本溢出<a href="text.html#TermLineBox">行框</a>时的渲染方式，
        例如，当<a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>属性的值为<span
            class="prop-value">nowrap</span>时。此属性不适用于预格式化文本或路径文本。
    </p>

    <p>
        在SVG中，<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>在有有效的<a
            href="text.html#TermWrappingArea">换行区域</a>时生效，
        无论<a class="property" href="render.html#OverflowAndClipProperties">overflow</a>属性的计算值在<a
            href="text.html#TermTextContentBlockElement">文本内容块元素</a>上如何。
    </p>

    <p>
        如果<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>属性的值为<span
            class="prop-value">ellipsis</span>，
        那么如果要呈现的文本溢出了<a href="text.html#TermWrappingArea">换行区域</a>，则呈现省略号，使其适合给定区域。为了渲染的目的，省略号将被视为替换了插入点的字符。
    </p>

    <p>
        如果<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>属性的值为<span
            class="prop-value">clip</span>，
        则任何超出<a href="text.html#TermWrappingArea">换行区域</a>的文本都将被剪裁。字符可能会部分呈现。
    </p>

    <p>
        对于<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>属性的任何其他值，都将被视为未指定。
    </p>

    <p>
        注意，<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>的效果是纯视觉的，省略号本身不会成为DOM的一部分。
        对于所有DOM方法，<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>的应用效果不会反映在DOM中，
        换行区域对文本的约束也不会在DOM中体现。
    </p>

    <div class="example">
        <p>
            以下示例展示了如何使用<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>。
            第一行显示了正常渲染的文本（由于<a class="property"
                href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>的值为
            <span class="prop-value">pre</span>，并且<a class="property"
                href="render.html#OverflowAndClipProperties">overflow</a>值为
            <span class="prop-value">visible</span>，因此文本溢出并显示出来）。

            中间行显示使用<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>值为
            <span class="prop-value">clip</span>的文本，

            底部行显示使用<a class="property" href="text.html#TextOverflowProperty">text-overflow</a>值为
            <span class="prop-value">ellipsis</span>的文本。
        </p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="300" height="150" viewBox="0 0 300 150">
  &lt;style>
    text { font: 25px sans-serif; white-space: pre; }
    path { fill: none; stroke: #add8e6; }
  &lt;/style>

  &lt;path d="m  50,0 0,150">
  &lt;path d="m 200,0 0,150">

  &lt;text x="50" y="35"  inline-size="100" style="overflow:visible">SVG is awesome&lt;/text>
  &lt;text x="50" y="85"  inline-size="100" style="text-overflow:clip">SVG is awesome&lt;/text>
  &lt;text x="50" y="135" inline-size="100" style="text-overflow:ellipsis">SVG is awesome&lt;/text>

&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-overflow-ref.svg"
                alt="显示 text-overflow 属性使用效果的图像。">
            <p class="caption">
                <a class="property" href="text.html#TextOverflowProperty">text-overflow</a> 属性用于文本元素，底部行应用了省略号。
            </p>
        </div>
    </div>

    <p class="annotation">有人认为此属性用处不大。如果它能与揭示隐藏文本的机制（例如在悬停省略号时显示工具提示）结合使用，可能会更有用。
        text-overflow 属性仅处理超出行尾的文本，而不处理超出换行区域末端的文本。
    </p>

    <h3 id="WhiteSpace" class="heading">11.10.3. 空白处理<a class="self-link" href="#WhiteSpace"></a></h3>

    <p class="note">
        SVG 2 新增。添加了 <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>
        属性，
        提供了一种更有用的方式来控制空白处理。使得SVG与HTML/CSS文本处理保持一致。
        <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>
        在新内容中已被弃用，但为了向后兼容而保留。
    </p>

    <h4 id="TextWhiteSpace" class="heading">11.10.3.1. SVG 2 首选的空白处理，‘<span class="property">white-space</span>’ 属性<a
            class="self-link" href="#TextWhiteSpace"></a></h4>

    <p>
        在SVG 2中，空白的渲染由<a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>属性控制。该属性指定了以下两点：
    </p>
    <ul>
        <li>是否以及如何折叠元素内部的空白</li>
        <li>是否允许在未强制的软换行处换行</li>
    </ul>

    <p class="note">
        各个值及其含义在<a href="https://www.w3.org/TR/css-text-3/#white-space-property">CSS Text Module Level 3</a>中定义。
        [<a href="refs.html#ref-css-text-3">css-text-3</a>]
    </p>

    <div class="example">
        <p>
            使用 <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a>
            属性值 <span class="prop-value">pre-line</span> 的示例。
        </p>

        <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg">
     width="200" height="200" viewBox="0 0 200 200">

     &lt;text x="150" y="30" style="font: 20px IPAMincho; writing-mode: vertical-rl;
	                         white-space: pre-line;">
       千利奴流乎和加
       餘多連曽津祢那
       良牟有為能於久
       耶万計不己衣天
       阿佐伎喩女美之
       恵比毛勢須&lt;/text>
&lt;/svg>
</pre>

        <div class="figure">
            <img class="bordered" src="https://www.w3.org/TR/SVG2/images/text/text-whitespace-vertical.svg"
                alt="展示每七个汉字后的传统换行的日文诗歌。">
            <p class="caption">
                多行垂直文本的换行示例。文本摘自日文诗歌<em>Iroha</em>，每行按照传统的换行方式分段。
            </p>
        </div>
    </div>


    <h4 id="LegacyXMLSpace" class="heading">11.10.3.2. 传统的空白处理，‘<span class="property">xml:space</span>’ 属性<a
            class="self-link" href="#LegacyXMLSpace"></a></h4>

    <p id="XMLSpaceAttribute">
        为了兼容性，SVG 2 还支持 XML 属性 <span class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>，用于指定
        在给定的 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素的字符数据内如何处理空白字符。
        新内容不应使用 <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>，而应使用
        <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 属性。
    </p>

    <p class="annotation">
        本节应简化，以限制对 xml:space 的讨论，并使用 <a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 属性在用户代理样式表中定义它。
        <a href="https://drafts.csswg.org/css-text-4/">CSS Text 4</a> 规范中的
        <span class="prop-value">preserve-spaces</span> 值意在匹配
        <span class="prop-value">xml:space=preserve</span> 的行为。
        (<a href="https://log.csswg.org/irc.w3.org/css/2015-02-08/#e519951">fantasai 同意</a> 为 <a class="property"
            href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 添加一个合适的值，以匹配 SVG 1.1 中的
        xml:space="preserve" 的奇怪行为。)
    </p>

    <p>
        请注意，任何 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素的子元素也可能
        有一个 <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>
        属性，该属性将应用于该
        子元素的文本内容。SVG 用户代理有与该属性相关的特殊处理规则，如下所述。这些行为是在 XML 解析
        [<a href="https://www.w3.org/TR/2008/REC-xml-20081126/">XML</a>] 和 DOM 构建之后发生的。
    </p>

    <p>
        <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>
        是可继承的属性，可以有以下两种值：
    </p>

    <dl>
        <dt><span class="attr-value">'default'</span></dt>
        <dd>
            （<span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>
            的初始/默认值。）当
            <span class="attr-value">xml:space="default"</span> 时，SVG 用户代理将使用原始字符数据内容的副本执行以下操作。首先，它将删除所有换行符。
            然后，它将所有制表符转换为空格符。接着，它会删除所有前导和尾随空格。最后，所有连续的空格字符将被合并为一个空格。
        </dd>

        <dt><span class="attr-value">'preserve'</span></dt>
        <dd>
            当 <span class="attr-value">xml:space="preserve"</span> 时，SVG 用户代理将使用原始字符数据内容的副本执行以下操作。
            它将所有换行符和制表符转换为空格符。然后，它会绘制所有空格字符，包括前导、尾随和多个连续的空格字符。因此，
            当使用 <span class="attr-value">xml:space="preserve"</span> 绘制时，字符串 <code>"a   b"</code>（“a”和“b”之间有三个空格）
            将产生比 <code>"a b"</code>（“a”和“b”之间有一个空格）更大的间隔。
        </dd>
    </dl>

    <p>
        以下示例说明了使用 <span class="attr-value">xml:space="default"</span> 时行缩进的重要性。以下片段展示了两对相似的
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素，两个
        <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素都使用了 <span
            class="attr-value">xml:space="default"</span>。
        对于这些示例，任何行末都没有额外的空格（即，换行发生在最后一个可见字符之后）。
    </p>

    <pre>
[01]  &lt;text xml:space='default'>
[02]    WS example
[03]    indented lines
[04]  &lt;/text>
[05]  &lt;text xml:space='preserve'>WS example indented lines&lt;/text>
[06]
[07]  &lt;text xml:space='default'>
[08]WS example
[09]non-indented lines
[10]  &lt;/text>
[11]  &lt;text xml:space='preserve'>WS examplenon-indented lines&lt;/text>
  </pre>

    <p>
        上面第一对 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素展示了
        缩进字符数据的效果。第一个 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素中的
        <span class="attr-value">xml:space="default"</span> 属性指示用户代理：
    </p>

    <ul>
        <li>将所有制表符（如果有的话）转换为空格字符，</li>
        <li>删除所有换行符（即删除行[01]、[02] 和 [03] 末尾的换行符），</li>
        <li>删除所有前导空格字符（即删除[02]行中 "WS example" 之前的空格字符），</li>
        <li>删除所有尾随空格字符（即删除[04]行中 "&lt;/text>" 之前的空格字符），</li>
        <li>合并所有中间的空格字符（即将[03]行中 "indented lines" 之前的空格字符合并为一个空格字符）。</li>
    </ul>

    <p>
        上面第二对 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素展示了
        非缩进字符数据的效果。第三个 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素中的
        <span class="attr-value">xml:space="default"</span> 属性指示用户代理：
    </p>

    <ul>
        <li>将所有制表符（如果有的话）转换为空格字符，</li>
        <li>删除所有换行符（即删除行[07]、[08] 和 [09] 末尾的换行符），</li>
        <li>删除所有前导空格字符（此示例中没有前导空格字符），</li>
        <li>删除所有尾随空格字符（即删除[10]行中 "&lt;/text>" 之前的空格字符），</li>
        <li>合并所有中间的空格字符为一个空格字符（此示例中没有中间空格字符）。</li>
    </ul>

    <p>
        请注意，XML 解析器需要将换行指示符的标准表示形式（例如，字面上的两个字符序列 "U+000D U+000A" 或独立的字面 U+000D 或 U+000A）转换为单个字符 U+000A，
        然后再将字符数据传递给应用程序。因此，SVG 中的每个换行符都将由单个字符 U+000A 表示，无论在原始资源中使用了何种换行符表示形式。
        （请参阅 <a href="https://www.w3.org/TR/2008/REC-xml-20081126/#sec-line-ends">XML 换行处理</a>。）
    </p>

    <p>
        SVG 语言或 SVG DOM 中基于字符位置号的任何特性，如 <span class="attr-name">‘<a
                href="text.html#TextElementXAttribute"><span>x</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementYAttribute"><span>y</span></a>’</span>、<span
            class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span>、
        <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span> 和 <span
            class="attr-name">‘<a href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span>
        属性，都是基于应用此处描述的空白处理规则后的位置。特别地，
        如果 <span class="attr-value">xml:space="default"</span>，通常情况下，空白字符会在处理过程中被删除。字符位置号在应用白空处理规则后索引到文本字符串中。
    </p>

    <p>
        请注意，空白字符对应的字形应仅显示为可见但空白的空间，即使字形本身是非空白的。
        请参阅 <a href="http://www.unicode.org/faq/unsup_char.html">不支持字符的显示</a> [<a
            href="refs.html#ref-unicode">UNICODE</a>]。
    </p>

    <p>
        <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span> 属性为：
    </p>
    <p>
            <span class="anim-target"><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：否。</span>
    </p>

    <h4 id="DuplicateWhiteSpace" class="heading">11.10.3.3. 重复的空白指令<a class="self-link" href="#DuplicateWhiteSpace"></a>
    </h4>

    <p>
        较旧的 SVG 1.1 内容会使用 <span class="attr-name">‘<a
                href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>。新的内容以及正在重新处理的较旧内容会使用
        <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 并移除任何现有的
        <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>。然而，
        用户代理可能会遇到在同一元素上同时使用这两种方法的内容。如果在任何元素上设置了
        <a class="property" href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 属性，那么
        <span class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span> 的值将被忽略。
    </p>


    <h2 id="TextDecorationProperties" class="heading">11.11. 文本装饰<a class="self-link"
            href="#TextDecorationProperties"></a></h2>

    <p>
        SVG 中的文本可以通过下划线、上划线和/或删除线进行 <em>装饰</em>。装饰的位置和样式分别由
        <a class="property" href="text.html#TextDecorationProperties">text-decoration-line</a> 和
        <a class="property" href="text.html#TextDecorationProperties">text-decoration-style</a> 属性决定，
        或通过 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a> 速记属性来指定，如
        <a href="https://www.w3.org/TR/css-text-decor-3/#line-decoration">线装饰</a>部分在
        <a href="https://www.w3.org/TR/css-text-decor-3/">CSS 文本装饰模块 3 级</a>
        [(<a href="refs.html#ref-css-text-decor-3">css-text-decor-3</a>)]
        规范中定义的那样。装饰的填充和描边由
        <a class="property" href="text.html#TextDecorationFillProperty">text-decoration-fill</a> 和
        <a class="property" href="text.html#TextDecorationStrokeProperty">text-decoration-stroke</a> 属性指定。
        如果通过 <a class="property" href="text.html#TextDecorationProperties">text-decoration-color</a> 属性或
        <a class="property" href="text.html#TextDecorationProperties">text-decoration</a> 速记属性指定了颜色值，
        并且没有指定 <a class="property" href="text.html#TextDecorationFillProperty">text-decoration-fill</a> 属性，
        则它将被解释为仿佛已通过该颜色值指定了 <a class="property" href="text.html#TextDecorationFillProperty">text-decoration-fill</a> 属性。
    </p>

    <p>
        如果没有明确指定文本装饰的填充或描边（通过 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a>、<a
            class="property" href="text.html#TextDecorationProperties">text-decoration-color</a>、
        <a class="property" href="text.html#TextDecorationFillProperty">text-decoration-fill</a> 或 <a class="property"
            href="text.html#TextDecorationStrokeProperty">text-decoration-stroke</a>），
        那么它们将由声明文本装饰的地方的填充和描边属性决定（见下方示例）。
    </p>

    <p class="note">
        <a class="property" href="text.html#TextDecorationProperties">text-decoration-line</a> 和
        <a class="property" href="text.html#TextDecorationProperties">text-decoration-style</a> 属性是 SVG 2 中的新属性。
        SVG 1.1/CSS 2.1 的 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a> 属性以向后兼容的方式
        转化为这些属性的速记。<a class="property" href="text.html#TextDecorationFillProperty">text-decoration-fill</a> 和
        <a class="property" href="text.html#TextDecorationStrokeProperty">text-decoration-stroke</a> 是 SVG 特有的属性，
        可能会添加到未来的 CSS 文本装饰规范中。
    </p>

    <p>
        文本和装饰的绘制顺序由
        <a href="https://www.w3.org/TR/css-text-decor-3/#painting-order">文本装饰的绘制顺序</a>部分在
        <a href="https://www.w3.org/TR/css-text-decor-3/">CSS 文本装饰模块 3 级</a>中定义。
        文本装饰本身的绘制顺序（填充/描边）由声明文本装饰的地方的
        <a class="property" href="painting.html#PaintOrderProperty">paint-order</a> 属性的值决定。
    </p>

    <p id="ExampleTextDecoration01">
        <span class="example-ref">示例 textdecoration01</span> 提供了 <a class="property"
            href="text.html#TextDecorationProperties">text-decoration</a> 的示例。
        第一行文本没有指定 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a> 的值，因此使用了初始值
        <span class="prop-value">text-decoration:none</span>。
        第二行显示了 <span class="prop-value">text-decoration:line-through</span>。
        第三行显示了 <span class="prop-value">text-decoration:underline</span>。
        第四行说明了装饰使用与声明 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a>
        的元素相同的填充和描边属性的规则。
        由于 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a> 是在 <span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素上声明的，
        所以 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素内的所有文本
        都将使用该元素的填充和描边属性（即蓝色填充，红色描边）绘制下划线，
        即使各个词语具有不同的填充和描边属性。
        然而，单词 "different" 明确指定了 <a class="property" href="text.html#TextDecorationProperties">text-decoration</a> 的值；
        因此，它的下划线使用了包围单词 "different" 的 <span class="element-name">‘<a
                href="text.html#TextElement"><span>tspan</span></a>’</span> 元素的填充和描边属性
        （即黄色填充，深绿色描边）：
    </p>

    <div class="example">
        <pre class="xml">&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="12cm" height="4cm" viewBox="0 0 1200 400"
     xmlns="http://www.w3.org/2000/svg" version="1.1">
  &lt;desc>Example textdecoration01 - behavior of 'text-decoration' property&lt;/desc>
  &lt;rect x="1" y="1" width="1198" height="398" fill="none" stroke="blue" stroke-width="2">
  &lt;g font-size="60" fill="blue" stroke="red" stroke-width="1" >
    &lt;text x="100" y="75">Normal text&lt;/text>
    &lt;text x="100" y="165" text-decoration="line-through" >Text with line-through&lt;/text>
    &lt;text x="100" y="255" text-decoration="underline" >Underlined text&lt;/text>
    &lt;text x="100" y="345" text-decoration="underline" >
      &lt;tspan>One &lt;/tspan>
      &lt;tspan fill="yellow" stroke="purple" >word &lt;/tspan>
      &lt;tspan fill="yellow" stroke="black" >has &lt;/tspan>
      &lt;tspan fill="yellow" stroke="darkgreen" text-decoration="underline" >different &lt;/tspan>
      &lt;tspan fill="yellow" stroke="blue" >underlining&lt;/tspan>
    &lt;/text>
  &lt;/g>
&lt;/svg></pre>
        <div class="figure"><img alt="Example textdecoration01 — behavior of 'text-decoration' property"
                src="https://www.w3.org/TR/SVG2/images/text/textdecoration01.png">
            <p class="caption">示例 textdecoration01</p>
        </div>
        <p class="view-as-svg"><a href="images/text/textdecoration01.svg">查看此示例为 SVG（仅限支持 SVG 的浏览器）</a></p>
    </div>

    <h3 id="TextDecorationFillStroke" class="heading">11.11.1. ‘<span class="property">text-decoration-fill</span>’ 与
        ‘<span class="property">text-decoration-stroke</span>’ 属性<a class="self-link"
            href="#TextDecorationFillStroke"></a></h3>

    <p class="annotation">
        CSS 工作组在 2014 年 TPAC CSS/SVG 联合会议上同意了 SVG 规范中的 'text-decoration-fill' 和 'text-decoration-stroke' 属性。
        他们在 2015 年悉尼的联合会议上再次支持使用这些属性。他们表示有意在扩展 CSS 文本装饰功能时，将这些属性与 'fill' 和 'stroke' 一同应用于文本。
    </p>

    <table class="propdef def">
        <tr>
            <th>名称:</th>
            <td><dfn id="TextDecorationFillProperty" data-dfn-type="property" data-export="">text-decoration-fill</dfn>
            </td>
        </tr>
        <tr>
            <th>值:</th>
            <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
        </tr>
        <tr>
            <th>初始值:</th>
            <td>详见文本。</td>
        </tr>
        <tr>
            <th>适用对象:</th>
            <td><a href="text.html#TermTextContentElement">文本内容元素</a></td>
        </tr>
        <tr>
            <th>是否继承:</th>
            <td>详见文本。</td>
        </tr>
        <tr>
            <th>百分比:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>媒体:</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值:</th>
            <td>按指定计算，但将 <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 值计算出来，并将
                <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> 值转换为绝对路径。
            </td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">是否可动画化</a>:</th>
            <td>是</td>
        </tr>
    </table>

    <table class="propdef def">
        <tr>
            <th>名称:</th>
            <td><dfn id="TextDecorationStrokeProperty" data-dfn-type="property"
                    data-export="">text-decoration-stroke</dfn></td>
        </tr>
        <tr>
            <th>值:</th>
            <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
        </tr>
        <tr>
            <th>初始值:</th>
            <td>详见文本。</td>
        </tr>
        <tr>
            <th>适用对象:</th>
            <td><a href="text.html#TermTextContentElement">文本内容元素</a></td>
        </tr>
        <tr>
            <th>是否继承:</th>
            <td>详见文本。</td>
        </tr>
        <tr>
            <th>百分比:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>媒体:</th>
            <td>视觉</td>
        </tr>
        <tr>
            <th>计算值:</th>
            <td>按指定计算，但将 <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 值计算出来，并将
                <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> 值转换为绝对路径。
            </td>
        </tr>
        <tr>
            <th><a href="https://svgwg.org/specs/animations/#Animatable">是否可动画化</a>:</th>
            <td>是</td>
        </tr>
    </table>

    <h2 id="TextSelection" class="heading">11.12. 文本选择与剪贴板操作<a class="self-link" href="#TextSelection"></a></h2>

    <p>
        在具备文本选择功能（例如，配备了鼠标等指针设备的系统）并支持系统剪贴板复制/粘贴操作的系统上，<a href="conform.html#ConformingSVGViewers">合规的 SVG 浏览器</a>需要支持：
    </p>

    <ul>
        <li>在 SVG 内容中选择文本字符串</li>
        <li>将选定的文本字符串复制到系统剪贴板</li>
    </ul>

    <p>
        文本选择操作在满足以下条件时开始：
    </p>

    <ul>
        <li>
            用户将指针设备放置在作为 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
            元素一部分呈现的字形上，开始执行 <em>选择</em> 操作（例如，按下系统标准的选择操作鼠标按钮），然后移动指针设备并继续执行 <em>选择</em> 操作（例如，继续按住选择操作的标准鼠标按钮）
        </li>

        <li>
            在指针设备点击的点上没有其他可见的图形元素绘制在字形上方
        </li>

        <li>
            没有为与给定字形相关的 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>、<span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 或 <span
                class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span>
            元素（或它们的祖先）分配<a href="linking.html#Links">链接</a>或<a href="interact.html">事件</a>。
        </li>
    </ul>

    <p>
        当文本选择操作进行时（例如，用户继续按住给定的鼠标按钮），与其他图形元素相关的所有事件将被忽略（即，文本选择操作是模态的），SVG 用户代理应动态指示哪些字符被选中，方法是应用
        <code>::selection</code> 伪类的样式。随着文本选择过程中指针的移动，文本选择操作的结束字形是在同一 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span> 元素中，字形单元最接近指针的字形。所有在 <span
            class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
        元素中位置位于选择开始和选择结束之间的字符都应被高亮显示，不论其在画布上的位置或是否有其他图形元素覆盖了选择结束点。
    </p>

    <p>
        一旦文本选择操作结束（例如，用户释放给定的鼠标按钮），所选文本将保持高亮，直到发生取消文本选择的事件，例如指针设备激活事件（例如，按下鼠标按钮）。
    </p>

    <p>
        在 <a href="#TextSelectionImplementationNotes">文本选择实现说明</a>中提供了确定文本选择操作期间应高亮显示哪些字符的详细规则。
    </p>

    <p>
        对于具有系统剪贴板的系统，SVG 用户代理需要提供用户界面以启动将当前选定文本复制到系统剪贴板的操作。将选定的文本字符串以纯文本格式发布到系统的适当剪贴板格式是足够的，但如果 SVG
        用户代理还发布包含给定文本字符串的各种字体属性的富文本替代内容，则更为理想。
    </p>

    <p>
        对于双向文本，用户代理必须支持按逻辑顺序进行文本选择，这将导致由于字符的双向重排序而产生不连续的字形高亮显示。用户代理可以提供另一种选择双向文本的能力，即按视觉渲染顺序（即，在应用双向文本布局算法之后），这将导致所选字符数据在逻辑上不连续。在这种情况下，如果用户请求将双向文本复制到剪贴板，则用户代理必须进行适当的调整，以仅复制视觉上选定的字符到剪贴板。
    </p>

    <p>
        SVG 作者和<a href="conform.html#TermSVGGenerator">SVG 生成器</a>应该按顺序排列其文本字符串，以便在 SVG 查看应用程序（如 Web
        浏览器）中实现正确的文本选择；换句话说，文本的 DOM 顺序应与文本的自然阅读顺序相匹配。
    </p>

    <h3 id="TextSelectionImplementationNotes" class="heading">11.12.1. 文本选择实现说明<a class="self-link"
            href="#TextSelectionImplementationNotes"></a></h3>

    <p>以下实现说明描述了在<a href="#TextSelection">文本选择</a>操作过程中决定选中哪些字符的算法。</p>

    <p>在文本选择操作进行时（例如，当用户点击并拖动鼠标以标识选择区域），用户代理会确定一个<em>开始选择位置</em>和一个<em>结束选择位置</em>，每个位置表示文本字符串中两个字符之间的位置。在确定了开始选择位置和结束选择位置后，用户代理选择适当的字符，最终的文本选择结果由以下两种情况之一组成：
    </p>

    <ul>
        <li>没有选择，或者</li>

        <li>一个<em>开始字符</em>、一个<em>结束字符</em>（可能是同一个字符），以及位于同一 <span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span> 元素中且其 DOM 中的位置逻辑上位于开始字符和结束字符之间的所有字符。</li>
    </ul>

    <p>在配有指针设备的系统上，为了确定<em>开始选择位置</em>，SVG
        用户代理基于事件触发时指针当前的位置（例如，鼠标按下事件），确定哪个字符之间的边界是最合适的目标（例如，距离最近的）。然后用户代理跟踪选择操作的完成过程（例如，鼠标拖动，最终伴随鼠标松开）。在选择操作结束时，用户代理确定哪个字符之间的边界是最合适的目标（例如，距离最近的），作为<em>结束选择位置</em>。
    </p>

    <p>如果由于双向性没有发生字符重排序，则选择包括从<em>开始选择位置</em>到<em>结束选择位置</em>之间的所有字符。例如，如果一个 <span class="element-name">‘<a
                href="text.html#TextElement"><span>text</span></a>’</span> 元素包含字符串“abcdef”，且开始选择位置和结束选择位置分别为 0 和
        3（假设“a”的左侧为位置 0），那么选择将包括“abc”。</p>

    <p>当用户代理实现双向文本的选择时，如果选择从（或结束于）在逻辑顺序上不连续的字符之间发生，则可能有多种潜在的字符组合可被视为选择的一部分。选择算法应选择最接近文本字符串的视觉呈现顺序的选项。</p>
    <p>当多个字符不可分割地映射到一个或多个字形集时，用户代理可以禁止在字形集的中间开始选择，或者尝试将字形集所占的区域分配给与该字形对应的字符。</p>

    <p>对于支持指针设备（例如鼠标）的系统，用户代理需要提供一种机制，即使当给定的文本有相关的事件处理程序或链接时，用户也可以选择文本，这可能由于事件处理优先级规则而阻止文本选择（参见 <a
            href="interact.html#PointerEvents">指针事件</a>）。一种实现选项是：对于支持指针设备（例如鼠标）的平台，用户代理可以为字符单元周围提供一个小的额外区域，该区域用于启动文本选择操作，但不会触发事件处理程序或链接。
    </p>

    <h2 id="DOMInterfaces" class="heading">11.13. DOM 接口<a class="self-link" href="#DOMInterfaces"></a></h2>

    <div class="annotation svg2-requirement">
        <table>
            <tr>
                <th>SVG 2 要求：</th>
                <td>拥有将 <span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span>
                    元素转换为轮廓路径数据的 DOM 方法。</td>
            </tr>
            <tr>
                <th>决议：</th>
                <td><a href="https://www.w3.org/2012/01/13-svg-irc#T05-07-07">我们将添加一个 DOM 方法，用于将 <span
                            class="element-name">‘text’</span> 元素转换为轮廓路径数据，可能将该功能移至 FXTF。</a></td>
            </tr>
            <tr>
                <th>目的：</th>
                <td>允许将文本作为路径进行操作。</td>
            </tr>
            <tr>
                <th>负责人：</th>
                <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3076">ACTION-3076</a>)</td>
            </tr>
            <tr>
                <th>状态：</th>
                <td><a href="https://github.com/w3c/svgwg/issues/221">未来愿望清单</a></td>
            </tr>
        </table>
    </div>

    <div class="ready-for-wider-review">
        <h3 id="InterfaceSVGTextContentElement" class="heading">11.13.1. 接口 SVGTextContentElement<a class="self-link"
                href="#InterfaceSVGTextContentElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a>
            接口由支持渲染子文本内容的元素实现。</p>

        <p>对于此接口上指代字符索引或字符数量的方法，这些引用应解释为 UTF-16 代码单元的索引或 UTF-16 代码单元的数量。这是为了与 DOM Level 2 Core 保持一致，其中 <a
                class="idlinterface" href="https://dom.spec.whatwg.org/#interface-characterdata">CharacterData</a>
            接口上的方法使用 UTF-16 代码单元作为字符数据中的索引和计数。因此，例如，如果 <span class="element-name">‘<a
                    href="text.html#TextElement"><span>text</span></a>’</span> 元素的文本内容是单个非 BMP 字符，如 U+10000，那么在该元素上调用 <a
                href="text.html#__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</a> 将返回 2，因为使用了两个
            UTF-16 代码单元（代理对）来表示该字符。</p>

        <pre class="idl">[Exposed=Window]
interface <b>SVGTextContentElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGGraphicsElement">SVGGraphicsElement</a> {

  // lengthAdjust Types
  const unsigned short <a href="text.html#__svg__SVGTextContentElement__LENGTHADJUST_UNKNOWN">LENGTHADJUST_UNKNOWN</a> = 0;
  const unsigned short <a href="text.html#__svg__SVGTextContentElement__LENGTHADJUST_SPACING">LENGTHADJUST_SPACING</a> = 1;
  const unsigned short <a href="text.html#__svg__SVGTextContentElement__LENGTHADJUST_SPACINGANDGLYPHS">LENGTHADJUST_SPACINGANDGLYPHS</a> = 2;

  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="text.html#__svg__SVGTextContentElement__textLength">textLength</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="text.html#__svg__SVGTextContentElement__lengthAdjust">lengthAdjust</a>;

  long <a href="text.html#__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</a>();
  float <a href="text.html#__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</a>();
  float <a href="text.html#__svg__SVGTextContentElement__getSubStringLength">getSubStringLength</a>(unsigned long charnum, unsigned long nchars);
  <a class="idlinterface" href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> <a href="text.html#__svg__SVGTextContentElement__getStartPositionOfChar">getStartPositionOfChar</a>(unsigned long charnum);
  <a class="idlinterface" href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> <a href="text.html#__svg__SVGTextContentElement__getEndPositionOfChar">getEndPositionOfChar</a>(unsigned long charnum);
  <a class="idlinterface" href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-domrect">DOMRect</a> <a href="text.html#__svg__SVGTextContentElement__getExtentOfChar">getExtentOfChar</a>(unsigned long charnum);
  float <a href="text.html#__svg__SVGTextContentElement__getRotationOfChar">getRotationOfChar</a>(unsigned long charnum);
  long <a href="text.html#__svg__SVGTextContentElement__getCharNumAtPosition">getCharNumAtPosition</a>(optional <a class="idlinterface" href="https://www.w3.org/TR/geometry-1/#dictdef-dompointinit">DOMPointInit</a> point);
  void <a href="text.html#__svg__SVGTextContentElement__selectSubString">selectSubString</a>(unsigned long charnum, unsigned long nchars);
};</pre>

        <p>在 <a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a>
            上定义的数字长度调整类型常量用于表示 <span class="attr-name">‘<a
                    href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span>
            属性可以取的关键字值。其含义如下：</p>

        <table class="vert">
            <tr>
                <th>常量</th>
                <th>含义</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextContentElement__LENGTHADJUST_SPACING">LENGTHADJUST_SPACING</b></td>
                <td><span class="attr-value">spacing</span> 关键字。</td>
            </tr>
            <tr>
                <td><b
                        id="__svg__SVGTextContentElement__LENGTHADJUST_SPACINGANDGLYPHS">LENGTHADJUST_SPACINGANDGLYPHS</b>
                </td>
                <td><span class="attr-value">spacingAndGlyphs</span> 关键字。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextContentElement__LENGTHADJUST_UNKNOWN">LENGTHADJUST_UNKNOWN</b></td>
                <td>其他值。</td>
            </tr>
        </table>

        <p><b id="__svg__SVGTextContentElement__textLength">textLength</b> IDL 属性 <a
                href="types.html#TermReflect">反映</a>了 <span class="attr-name">‘<a
                    href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> 内容属性。</p>

        <p class="note"> <span class="attr-name">‘<a
                    href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span>
            内容属性的初始值被定义为等于用户代理计算的元素长度。换句话说，当没有设置该内容属性时，IDL 属性会初始化为等于在同一元素上调用 <a
                href="text.html#__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</a>
            的返回值，结果以用户单位表示。</p>

        <p><b id="__svg__SVGTextContentElement__lengthAdjust">lengthAdjust</b> IDL 属性 <a
                href="types.html#TermReflect">反映</a>了 <span class="attr-name">‘<a
                    href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span> 内容属性。<span
                class="attr-name">‘<a
                    href="text.html#TextElementLengthAdjustAttribute"><span>lengthAdjust</span></a>’</span> 的数字类型值如上表所述。
        </p>

        <div class="ready-for-wider-review">
            <p><b id="__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</b> 方法返回当前元素内可渲染的所有 <a
                    href="text.html#TermAddressableCharacter">可寻址字符</a> 总数，无论这些字符是否会被实际渲染。当调用 getNumberOfChars()
                时，执行以下步骤：</p>

            <ol class="algorithm">
                <li>将 <var>node</var> 设置为调用此方法的元素或节点。</li>
                <li>如果 <var>node</var> 是 DOM 文本节点，返回 <var>node</var> 文本内容的长度，并根据其父元素的 <a class="property"
                        href="https://www.w3.org/TR/css-text-3/#white-space-property">white-space</a> 属性值进行空白字符规范化。</li>
                <li>如果 <var>node</var> 是 <a class="idlinterface"
                        href="https://dom.spec.whatwg.org/#interface-element">Element</a>：
                    <ul>
                        <li>如果该元素 <a href="render.html#Rendered-vs-NonRendered">未被渲染</a>（例如，<a class="property"
                                href="render.html#VisibilityControl">display</a> 属性的使用值为 <span
                                class="prop-value">none</span>），则返回 0；</li>
                        <li>否则，将 <var>count</var> 设置为 0，并对 <var>node</var> 的每个子元素：
                            <ul>
                                <li>递归调用此算法，并将返回值加到 <var>count</var> 中。</li>
                            </ul>
                            返回 <var>count</var>。
                        </li>
                    </ul>
                </li>
                <li>对于所有其他节点类型（例如 DOM 注释），返回 0。</li>
            </ol>
        </div>

        <p><b id="__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</b> 方法用于计算元素中文本的“长度”。当调用
            getComputedTextLength() 时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>将 <var>count</var> 设置为调用 <a href="#__svg__SVGTextContentElement__getNumberOfChars">getNumberOfChars</a>
                方法时返回的值。</li>
            <li>将 <var>length</var> 设置为调用 <a
                    href="#__svg__SVGTextContentElement__getSubStringLength">getSubStringLength</a> 方法，并传递 0 和
                <var>count</var> 作为参数时返回的值。
            </li>
            <li>返回 <var>length</var>。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getSubStringLength">getSubStringLength</b> 方法用于计算元素中子字符串的格式化文本前进距离。当调用
            getSubStringLength(<var>charnum</var>, <var>nchars</var>) 时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>为此元素 DOM 中的每个 <a href="text.html#TermAddressableCharacter">可寻址字符</a> 分配一个索引，第一个字符的索引为 0。</li>
            <li>如果 <var>charnum</var> 大于分配给字符的最高索引或 <var>nchars</var> 为负数，则 <a
                    href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li>将 <var>length</var> 设置为以用户单位表示的长度，初始值为 0。</li>
            <li>对于此元素 DOM 中索引满足 <var>charnum</var> ≤ index &lt; (<var>charnum</var> + <var>nchars</var>) 的每个 <a
                    href="text.html#TermAddressableCharacter">可寻址字符</a>：
                <ol>
                    <li>如果字符对应于 <a href="text.html#TermTypographicCharacterUnit">排版字符单元</a>，并且它是文档顺序中第一个对应于该 <a
                            href="text.html#TermTypographicCharacterUnit">排版字符单元</a> 的字符，则：
                        <ol>
                            <li>将该 <a href="text.html#TermTypographicCharacterUnit">排版字符单元</a> 的前进量添加到 <var>length</var>
                                中，并根据生效的任何字体字距调整。</li>
                            <li>如果 <a class="property"
                                    href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a>
                                或 <a class="property"
                                    href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a> 属性在该
                                <a href="text.html#TermTypographicCharacterUnit">排版字符单元</a> 之后贡献了空格，则将该空格添加到
                                <var>length</var> 中。
                            </li>
                        </ol>
                        <p class="note">这意味着，例如，如果有一个部分包含在子字符串中的连字，则 <a
                                href="text.html#TermTypographicCharacterUnit">排版字符单元</a> 的前进量及其后的 <a class="property"
                                href="https://www.w3.org/TR/css-text-3/#letter-spacing-property">letter-spacing</a> 或 <a
                                class="property"
                                href="https://www.w3.org/TR/css-text-3/#word-spacing-property">word-spacing</a>
                            空格将分配给第一个字符的文本长度。</p>
                    </li>
                </ol>
            </li>
            <li>返回 <var>length</var>。</li>
        </ol>
        <p class="note">
            以前的 SVG 版本要求该方法和 <a href="#__svg__SVGTextContentElement__getComputedTextLength">getComputedTextLength</a>
            还包括子元素上的 <span class="attr-name">‘<a href="text.html#TextElementDXAttribute"><span>dx</span></a>’</span> 或
            <span class="attr-name">‘<a href="text.html#TextElementDYAttribute"><span>dy</span></a>’</span>
            引起的行内方向上的位置调整，
            以使返回值等于用户代理计算的 <span class="attr-name">‘<a
                    href="text.html#TextElementTextLengthAttribute"><span>textLength</span></a>’</span> 值。
            然而，这一要求规格不清晰，实施不佳，且效益存疑，因此已简化以匹配实现。
        </p>

        <p class="annotation">
            对文本长度方法的更改在 <a
                href="https://lists.w3.org/Archives/Public/www-svg/2015Aug/att-0009/SVGWG-F2F-minutes-20150824.html#item04">2015年8月巴黎面对面会议</a>
            中得到解决。
        </p>

        <p>要 <dfn id="TermFindTypographicCharacterForCharacter" data-dfn-type="dfn" data-export="">查找字符的排版字符</dfn>，在元素
            <var>element</var> 的索引 <var>index</var> 处，执行以下步骤：
        </p>

        <ol class="algorithm">
            <li>为此元素 DOM 中的每个 <a href="text.html#TermAddressableCharacter">可寻址字符</a> 分配一个索引，第一个字符的索引为 0。</li>
            <li>将 <var>last</var> 设为分配给字符的最高索引。</li>
            <li>当 <var>charnum</var> &lt; <var>last</var> 且索引 <var>charnum</var> 处的字符不对应于 <a
                    href="text.html#TermTypographicCharacterUnit">排版字符</a> 时：
                <ol>
                    <li>将 <var>charnum</var> 增加 1。</li>
                </ol>
            </li>
            <li>如果 <var>charnum</var> 大于分配给字符的最高索引，则返回 null。</li>
            <li>否则，返回与 <var>charnum</var> 对应的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getStartPositionOfChar">getStartPositionOfChar</b> 方法用于在文本布局完成后获取 <a
                href="text.html#TermTypographicCharacterUnit">排版字符</a> 的起始位置。当调用
            getStartPositionOfChar(<var>charnum</var>) 时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>让 <var>cluster</var> 成为在当前元素中 <a href="#TermFindTypographicCharacterForCharacter">查找字符的排版字符</a> 的结果。
            </li>
            <li>如果 <var>cluster</var> 为 null，则 <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li>设 <var>p</var> 为与索引 <var>charnum</var> 处字符对应的 <a href="text.html#TermTypographicCharacterUnit">排版字符</a>
                的 <a href="text.html#TermAlignmentPoint">对齐点</a>，以当前元素的坐标系表示。</li>
            <li>返回一个新创建的、<a href="shapes.html#PointMode">独立的</a> <a class="idlinterface"
                    href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> 对象，表示点 <var>p</var>。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getEndPositionOfChar">getEndPositionOfChar</b> 方法用于在文本布局完成后获取 <a
                href="text.html#TermTypographicCharacterUnit">排版字符</a> 的结束位置。当调用
            getEndPositionOfChar(<var>charnum</var>) 时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>让 <var>cluster</var> 成为在当前元素中 <a href="#TermFindTypographicCharacterForCharacter">查找字符的排版字符</a> 的结果。
            </li>
            <li>如果 <var>cluster</var> 为 null，则 <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li>设 <var>p</var> 为 <var>cluster</var> 的 <a href="text.html#TermAlignmentPoint">对齐点</a>，以当前元素的坐标系表示。</li>
            <li>设 <var>direction</var> 为一个单位向量，表示 <var>cluster</var> 的前进方向。该方向考虑了使用的书写模式、字符的方向、<a class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">glyph-orientation-horizontal</a> 和 <a
                    class="property" href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>
                属性、应用于 <var>cluster</var> 的任何 <span class="attr-name">‘<a
                        href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 值，以及由于 <span
                    class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 应用的任何旋转。
            </li>
            <li>设 <var>advance</var> 为 <var>cluster</var> 的前进量。</li>
            <li>将 <var>p</var> 更新为 <var>p</var> + <var>advance</var> · <var>direction</var>。</li>
            <li>返回一个新创建的、<a href="shapes.html#PointMode">独立的</a> <a class="idlinterface"
                    href="https://www.w3.org/TR/geometry-1/#dom-dompoint">DOMPoint</a> 对象，表示点 <var>p</var>。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getExtentOfChar">getExtentOfChar</b> 方法用于计算与给定 <a
                href="text.html#TermTypographicCharacterUnit">排版字符</a> 对应的字形单元的紧密边界框。当调用
            getExtentOfChar(<var>charnum</var>) 时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>让 <var>cluster</var> 成为在当前元素中 <a href="#TermFindTypographicCharacterForCharacter">查找字符的排版字符</a> 的结果。
            </li>
            <li>如果 <var>cluster</var> 为 null，则 <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li>设 <var>quad</var> 为当前元素坐标系中可能旋转的矩形，即 <var>cluster</var> 的字形单元。</li>
            <li>设 <var>rect</var> 为在当前元素的坐标系中围绕 <var>quad</var> 的最紧密的边界框。</li>
            <li>返回一个新创建的 <a class="idlinterface"
                    href="https://www.w3.org/TR/2014/WD-geometry-1-20140522/#dom-domrect">DOMRect</a> 对象，表示矩形
                <var>rect</var>。
            </li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getRotationOfChar">getRotationOfChar</b> 方法用于获取 <a
                href="text.html#TermTypographicCharacterUnit">排版字符</a> 的旋转角度。当调用 getRotationOfChar(<var>charnum</var>)
            时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>让 <var>cluster</var> 成为在当前元素中 <a href="#TermFindTypographicCharacterForCharacter">查找字符的排版字符</a> 的结果。
            </li>
            <li>如果 <var>cluster</var> 为 null，则 <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a>。</li>
            <li>设 <var>direction</var> 为表示 <var>cluster</var> 前进方向的角度（单位为度）。此方向考虑了使用的书写模式、字符方向、<a class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">glyph-orientation-horizontal</a> 和 <a
                    class="property" href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>
                属性、应用于 <var>cluster</var> 的 <span class="attr-name">‘<a
                        href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 值，以及由于 <span
                    class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 旋转的效果。
            </li>
            <li>让 <var>direction</var> 为表示 <var>cluster</var> 前进方向的角度（以度为单位）。此方向考虑了所使用的书写模式、字符的方向、<a class="property"
                    href="https://www.w3.org/TR/css3-writing-modes/#text-orientation">text-orientation</a>、<a
                    class="property"
                    href="text.html#GlyphOrientationHorizontalProperty">glyph-orientation-horizontal</a> 和 <a
                    class="property" href="text.html#GlyphOrientationVerticalProperty">glyph-orientation-vertical</a>
                属性，应用于 <var>cluster</var> 的任何 <span class="attr-name">‘<a
                        href="text.html#TextElementRotateAttribute"><span>rotate</span></a>’</span> 值，以及由于 <span
                    class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 引发的任何旋转。
            </li>
            <li>返回 <var>direction</var>。</li>
        </ol>

        <p><b id="__svg__SVGTextContentElement__getCharNumAtPosition">getCharNumAtPosition</b>
            方法用于查找在坐标系中导致呈现文本字形的字符。由于字符与字形之间的关系不是一对一的，因此只返回相关的第一个 <a
                href="text.html#TermTypographicCharacterUnit">排版字符</a> 的字符。当调用 getCharNumAtPosition(<var>point</var>)
            时，执行以下步骤：</p>

        <ol class="algorithm">
            <li>为此元素内的每个字符分配一个索引，文档中的第一个字符的索引为 0。</li>
            <li>让 <var>last</var> 为分配给字符的最高索引。</li>
            <li>让 <var>charnum</var> 为 0。</li>
            <li>让 <var>result</var> 为 -1。</li>
            <li>当 <var>charnum</var> 小于 <var>last</var> 时：
                <ol>
                    <li>如果索引为 <var>charnum</var> 的字符对应于 <a
                            href="text.html#TermTypographicCharacterUnit">排版字符</a>，且它是文档顺序中第一个对应于该 <a
                            href="text.html#TermTypographicCharacterUnit">排版字符</a> 的字符，并且 <var>point</var> 位于此元素的坐标系中该
                        <a href="text.html#TermTypographicCharacterUnit">排版字符</a> 的字形单元内，则将 <var>result</var> 设置为
                        <var>charnum</var>。
                    </li>
                </ol>
            </li>
            <li>返回 <var>result</var>。</li>
        </ol>

    </div>

    <div class="ready-for-wider-review">
        <p><b id="__svg__SVGTextContentElement__selectSubString">selectSubString</b> 方法用于在元素内选择文本。当调用
            selectSubString(<var>charnum</var>, <var>nchars</var>) 时，执行以下步骤：</p>

        <p>选择该元素中的一个子字符串，从字符索引 <var>charnum</var> 开始，并向前扩展 <var>nchars</var> 个字符。调用此方法时必须执行以下步骤：</p>
        <ol>
            <li>设定 <var>node</var> 为此文本内容元素。</li>
            <li>设定 <var>count</var> 为此文本内容元素中的字符数量。</li>
            <li>设定 <var>end</var> = <var>charnum</var> + <var>nchars</var>。</li>
            <li>如果 <var>charnum</var> ≥ <var>count</var> 或 <var>end</var> ≥ <var>count</var>，则 <a
                    href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> <a
                    href="https://heycam.github.io/webidl/#indexsizeerror">IndexSizeError</a> 异常。</li>
            <li>从文档的 <a href="http://w3c.github.io/selection-api/#dfn-selection">选择</a>中移除所有 <a
                    href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range">range</a>。[<a
                    href="refs.html#ref-dom">DOM</a>][<a href="refs.html#ref-editing">EDITING</a>]</li>
            <li>将 <a href="http://w3c.github.io/selection-api/#dfn-selection">选择</a>的 <a
                    href="http://w3c.github.io/selection-api/">方向</a>设置为向前。</li>
            <li>将新的 <a href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range">range</a> 添加到 <a
                    href="http://w3c.github.io/selection-api/#dfn-selection">选择</a>中，其 <a
                    href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range-start">起点</a> 是 <var>node</var> 和
                <var>charnum</var> 组成的边界点元组，<a
                    href="https://www.w3.org/TR/2014/WD-dom-20140204/#concept-range-end">终点</a> 是 <var>node</var> 和
                <var>end</var> 组成的边界点元组。
            </li>
        </ol>
        <div class="note">
            <p>忽略参数检查和异常抛出，这等同于执行以下操作：</p>
            <pre>var selection = document.getSelection();
selection.removeAllRanges();
var range = new Range();
range.setStart(textContentElement, charnum);
range.setEnd(textContentElement, charnum + nchars);
selection.addRange(range);</pre>
        </div>
        <p>此方法已被弃用，因为它重复了 Selection API 的功能。</p>
    </div>


    <div class="ready-for-wider-review">
        <h3 id="InterfaceSVGTextPositioningElement" class="heading">11.13.2. 接口 SVGTextPositioningElement<a
                class="self-link" href="#InterfaceSVGTextPositioningElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPositioningElement">SVGTextPositioningElement</a>
            接口由支持定位单个文本字形属性的元素实现。它由 <a class="idlinterface" href="text.html#InterfaceSVGTextElement">SVGTextElement</a>
            和 <a class="idlinterface" href="text.html#InterfaceSVGTSpanElement">SVGTSpanElement</a> 继承。</p>

        <pre class="idl">[Exposed=Window]
    interface <b>SVGTextPositioningElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a> {
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__x">x</a>;
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__y">y</a>;
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__dx">dx</a>;
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLengthList">SVGAnimatedLengthList</a> <a href="text.html#__svg__SVGTextPositioningElement__dy">dy</a>;
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedNumberList">SVGAnimatedNumberList</a> <a href="text.html#__svg__SVGTextPositioningElement__rotate">rotate</a>;
    };</pre>

        <p><b id="__svg__SVGTextPositioningElement__x">x</b>、<b id="__svg__SVGTextPositioningElement__y">y</b>、<b
                id="__svg__SVGTextPositioningElement__dx">dx</b>、<b id="__svg__SVGTextPositioningElement__dy">dy</b> 和
            <b id="__svg__SVGTextPositioningElement__rotate">rotate</b> IDL 属性 <a
                href="types.html#TermReflect">反映</a>相应的内容属性。
        </p>

        <h3 id="InterfaceSVGTextElement" class="heading">11.13.3. 接口 SVGTextElement<a class="self-link"
                href="#InterfaceSVGTextElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextElement">SVGTextElement</a> 对象表示 DOM 中的 <span
                class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span> 元素。</p>

        <pre class="idl">[Exposed=Window]
    interface <b>SVGTextElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextPositioningElement">SVGTextPositioningElement</a> {
    };</pre>

        <h3 id="InterfaceSVGTSpanElement" class="heading">11.13.4. 接口 SVGTSpanElement<a class="self-link"
                href="#InterfaceSVGTSpanElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTSpanElement">SVGTSpanElement</a> 对象表示 DOM 中的 <span
                class="element-name">‘<a href="text.html#TextElement"><span>tspan</span></a>’</span> 元素。</p>

        <pre class="idl">[Exposed=Window]
    interface <b>SVGTSpanElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextPositioningElement">SVGTextPositioningElement</a> {
    };</pre>

        <h3 id="InterfaceSVGTextPathElement" class="heading">11.13.5. 接口 SVGTextPathElement<a class="self-link"
                href="#InterfaceSVGTextPathElement"></a></h3>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a> 对象表示 DOM 中的 <span
                class="element-name">‘<a href="text.html#TextPathElement"><span>textPath</span></a>’</span> 元素。</p>

        <pre
            class="idl">[Exposed=Window]
    interface <b>SVGTextPathElement</b> : <a class="idlinterface" href="text.html#InterfaceSVGTextContentElement">SVGTextContentElement</a> {
    
      // textPath 方法类型
      const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_UNKNOWN">TEXTPATH_METHODTYPE_UNKNOWN</a> = 0;
      const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_ALIGN">TEXTPATH_METHODTYPE_ALIGN</a> = 1;
      const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_STRETCH">TEXTPATH_METHODTYPE_STRETCH</a> = 2;
    
      // textPath 间距类型
      const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_UNKNOWN">TEXTPATH_SPACINGTYPE_UNKNOWN</a> = 0;
      const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_AUTO">TEXTPATH_SPACINGTYPE_AUTO</a> = 1;
      const unsigned short <a href="text.html#__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_EXACT">TEXTPATH_SPACINGTYPE_EXACT</a> = 2;
    
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="text.html#__svg__SVGTextPathElement__startOffset">startOffset</a>;
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="text.html#__svg__SVGTextPathElement__method">method</a>;
      [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="text.html#__svg__SVGTextPathElement__spacing">spacing</a>;
    };
    
    <a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a> 包含 <a class="idlinterface" href="types.html#InterfaceSVGURIReference">SVGURIReference</a>;</pre>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a> 定义的数值方法类型常量用于表示
            <span class="attr-name">‘<a href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>
            属性可以采用的关键字值。它们的含义如下：
        </p>

        <table class="vert">
            <tr>
                <th>常量</th>
                <th>含义</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_ALIGN">TEXTPATH_METHODTYPE_ALIGN</b></td>
                <td><span class="attr-value">align</span> 关键字。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_STRETCH">TEXTPATH_METHODTYPE_STRETCH</b></td>
                <td><span class="attr-value">stretch</span> 关键字。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_METHODTYPE_UNKNOWN">TEXTPATH_METHODTYPE_UNKNOWN</b></td>
                <td>其他值。</td>
            </tr>
        </table>

        <p><a class="idlinterface" href="text.html#InterfaceSVGTextPathElement">SVGTextPathElement</a> 定义的数值间距类型常量用于表示
            <span class="attr-name">‘<a
                    href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>
            属性可以采用的关键字值。它们的含义如下：
        </p>

        <table class="vert">
            <tr>
                <th>常量</th>
                <th>含义</th>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_AUTO">TEXTPATH_SPACINGTYPE_AUTO</b></td>
                <td><span class="attr-value">auto</span> 关键字。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_EXACT">TEXTPATH_SPACINGTYPE_EXACT</b></td>
                <td><span class="attr-value">exact</span> 关键字。</td>
            </tr>
            <tr>
                <td><b id="__svg__SVGTextPathElement__TEXTPATH_SPACINGTYPE_UNKNOWN">TEXTPATH_SPACINGTYPE_UNKNOWN</b>
                </td>
                <td>其他值。</td>
            </tr>
        </table>

        <p><b id="__svg__SVGTextPathElement__startOffset">startOffset</b> IDL 属性 <a href="types.html#TermReflect">反映</a>
            <span class="attr-name">‘<a
                    href="text.html#TextPathElementStartOffsetAttribute"><span>startOffset</span></a>’</span> 内容属性。
        </p>

        <p><b id="__svg__SVGTextPathElement__method">method</b> IDL 属性 <a href="types.html#TermReflect">反映</a> <span
                class="attr-name">‘<a href="text.html#TextPathElementMethodAttribute"><span>method</span></a>’</span>
            内容属性。<a href="types.html#TermNumericTypeValue">数值类型值</a> 如上文所述。</p>

        <p><b id="__svg__SVGTextPathElement__spacing">spacing</b> IDL 属性 <a href="types.html#TermReflect">反映</a> <span
                class="attr-name">‘<a href="text.html#TextPathElementSpacingAttribute"><span>spacing</span></a>’</span>
            内容属性。<a href="types.html#TermNumericTypeValue">数值类型值</a> 如上文所述。</p>
    </div>

    <script src="//www.w3.org/scripts/TR/2016/fixup.js"></script>
    <script src="/dropdown.js"></script>
    <script src="https://www.w3.org/TR/SVG2/style/expanders.js"></script>
</body>

</html>