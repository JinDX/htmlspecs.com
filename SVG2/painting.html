<!DOCTYPE html>

<!--
  Scalable Vector Graphics (SVG) 2
  Chapter 13: Painting: Filling, Stroking and Marker Symbols

  Note: This document is generated from ../master/painting.html.
  Run "make" from the root of the repository to regenerate it.
  -->

<html lang="zh-hans" xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8">
  <title>绘图：填充、描边和标记符号 — SVG 2</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Style sheets for local dev. Will be standardized in processing.
  Add attribute data-keep="" to any extra stylesheet link you do not want removed
  (or use <style>), and include it before here. -->


  <link rel="stylesheet" title="Default" href="https://www.w3.org/TR/SVG2/style/svg.css" type="text/css" media="screen">
  <link rel="alternate stylesheet" title="Only annotations for publication"
    href="https://www.w3.org/TR/SVG2/style/default_no_maturity.css" type="text/css" media="screen">
  <link rel="alternate stylesheet" title="No issues/annotations"
    href="https://www.w3.org/TR/SVG2/style/default_no_issues.css" type="text/css" media="screen">
  <link rel="stylesheet" href="//www.w3.org/StyleSheets/TR/2016/W3C-ED" type="text/css" media="screen">
  <script src="https://www.w3.org/TR/SVG2/style/link-fixup.js"></script>
  <script data-script-mathjax="" async=""
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG"></script>
</head>

<body class="chapter-painting">

  <h1>第13章：绘图：填充、描边和标记符号</h1>
  <nav id="toc">
    <div class="header top"><a href="Overview.html">概述</a> . <a href="embedded.html">上一页</a> . <a
        href="pservers.html">下一页</a> . <a href="eltindex.html">元素</a> . <a href="attindex.html">属性</a> .
      <a href="propidx.html">属性</a>
    </div>
    <h2 id="Contents" class="contents">目录</h2>
    <ol class="toc">
      <li>
        <ol class="toc">
          <li><a href="painting.html#Introduction"><span class="secno">13.1.</span> 引言</a>
            <ol class="toc">
              <li><a href="painting.html#Definitions"><span class="secno">13.1.1.</span> 定义</a></li>
            </ol>
          </li>
          <li><a href="painting.html#SpecifyingPaint"><span class="secno">13.2.</span> 指定绘画</a></li>
          <li><a href="painting.html#ColorProperty"><span class="secno">13.3.</span> ‘<span
                class="property">color</span>’ 属性的效果</a></li>
          <li><a href="painting.html#FillProperties"><span class="secno">13.4.</span> 填充属性</a>
            <ol class="toc">
              <li><a href="painting.html#SpecifyingFillPaint"><span class="secno">13.4.1.</span> 指定填充绘画：
                  ‘<span class="property">fill</span>’ 属性</a></li>
              <li><a href="painting.html#WindingRule"><span class="secno">13.4.2.</span> 绕行规则：‘<span
                    class="property">fill-rule</span>’ 属性</a></li>
              <li><a href="painting.html#FillOpacity"><span class="secno">13.4.3.</span> 填充绘画的不透明度：
                  ‘<span class="property">fill-opacity</span>’ 属性</a></li>
            </ol>
          </li>
          <li><a href="painting.html#StrokeProperties"><span class="secno">13.5.</span> 描边属性</a>
            <ol class="toc">
              <li><a href="painting.html#SpecifyingStrokePaint"><span class="secno">13.5.1.</span> 指定描边
                  绘画：‘<span class="property">stroke</span>’ 属性</a></li>
              <li><a href="painting.html#StrokeOpacity"><span class="secno">13.5.2.</span> 描边绘画的不透明度：
                  ‘<span class="property">stroke-opacity</span>’ 属性</a></li>
              <li><a href="painting.html#StrokeWidth"><span class="secno">13.5.3.</span> 描边宽度：‘<span
                    class="property">stroke-width</span>’ 属性</a></li>
              <li><a href="painting.html#LineCaps"><span class="secno">13.5.4.</span> 描边末端的绘制：‘<span
                    class="property">stroke-linecap</span>’ 属性</a></li>
              <li><a href="painting.html#LineJoin"><span class="secno">13.5.5.</span> 控制线段连接：‘<span
                    class="property">stroke-linejoin</span>’ 和 ‘<span class="property">stroke-miterlimit</span>’
                  属性</a></li>
              <li><a href="painting.html#StrokeDashing"><span class="secno">13.5.6.</span> 虚线描边：‘<span
                    class="property">stroke-dasharray</span>’ 和 ‘<span class="property">stroke-dashoffset</span>’
                  属性</a></li>
              <li><a href="painting.html#StrokeShape"><span class="secno">13.5.7.</span> 计算描边的形状</a></li>
              <li><a href="painting.html#CurvatureCalculation"><span class="secno">13.5.8.</span> 计算圆形
                  用于 ‘<span class="prop-value">arcs</span>’ 的 'stroke-linejoin'</a></li>
              <li><a href="painting.html#ArcsLinejoinFallback"><span class="secno">13.5.9.</span> 调整
                  用于 ‘<span class="prop-value">arcs</span>’ 的 'stroke-linejoin' 的圆形，当初始圆形不相交</a></li>
            </ol>
          </li>
          <li><a href="painting.html#PaintingVectorEffects"><span class="secno">13.6.</span> 矢量效果</a></li>
          <li><a href="painting.html#Markers"><span class="secno">13.7.</span> 标记</a>
            <ol class="toc">
              <li><a href="painting.html#MarkerElement"><span class="secno">13.7.1.</span> ‘marker’ 元素</a></li>
              <li><a href="painting.html#VertexMarkerProperties"><span class="secno">13.7.2.</span> 顶点标记：
                  ‘<span class="property">marker-start</span>’,
                  ‘<span class="property">marker-mid</span>’ 和 ‘<span class="property">marker-end</span>’
                  属性</a></li>
              <li><a href="painting.html#MarkerShorthand"><span class="secno">13.7.3.</span> 标记简写：‘<span
                    class="property">marker</span>’ 属性</a></li>
              <li><a href="painting.html#RenderingMarkers"><span class="secno">13.7.4.</span> 渲染标记</a></li>
            </ol>
          </li>
          <li><a href="painting.html#PaintOrder"><span class="secno">13.8.</span> 控制绘画操作顺序：
              ‘<span class="property">paint-order</span>’ 属性</a></li>
          <li><a href="painting.html#ColorInterpolation"><span class="secno">13.9.</span> 插值的颜色空间：
              ‘<span class="property">color-interpolation</span>’ 属性</a></li>
          <li><a href="painting.html#RenderingHints"><span class="secno">13.10.</span> 渲染提示</a>
            <ol class="toc">
              <li><a href="painting.html#ColorRendering"><span class="secno">13.10.1.</span> ‘<span
                    class="property">color-rendering</span>’ 属性</a></li>
              <li><a href="painting.html#ShapeRendering"><span class="secno">13.10.2.</span> ‘<span
                    class="property">shape-rendering</span>’ 属性</a></li>
              <li><a href="painting.html#TextRendering"><span class="secno">13.10.3.</span> ‘<span
                    class="property">text-rendering</span>’ 属性</a></li>
              <li><a href="painting.html#ImageRendering"><span class="secno">13.10.4.</span> ‘<span
                    class="property">image-rendering</span>’ 属性</a></li>
            </ol>
          </li>
          <li><a href="painting.html#WillChange"><span class="secno">13.11.</span> ‘<span
                class="property">will-change</span>’ 属性的效果</a></li>
          <li><a href="painting.html#DOMInterfaces"><span class="secno">13.12.</span> DOM 接口</a>
            <ol class="toc">
              <li><a href="painting.html#InterfaceSVGMarkerElement"><span class="secno">13.12.1.</span> 接口
                  SVGMarkerElement</a></li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </nav>

  <div class="ready-for-wider-review">
    <h2 id="Introduction" class="heading">13.1. 介绍<a class="self-link" href="#Introduction"></a></h2>

    <h3 id="Definitions" class="heading">13.1.1. 定义<a class="self-link" href="#Definitions"></a></h3>
    <dl class="definitions">

      <dt><dfn id="TermFill" data-dfn-type="dfn" data-export="">填充</dfn></dt>
      <dd>对<a href="painting.html#TermPaint">绘画</a>形状内部或文本字符串中字符字形内部的操作。</dd>

      <dt><dfn id="TermStroke" data-dfn-type="dfn" data-export="">描边</dfn></dt>
      <dd>对<a href="painting.html#TermPaint">绘画</a>形状轮廓或文本字符串中字符字形轮廓的操作。</dd>

    </dl>

    <p>定义形状的图形元素——<span class="element-name">‘<a href="paths.html#PathElement"><span>路径</span></a>’</span>元素、<a
        href="shapes.html#TermBasicShapeElement">基本形状</a>和<a
        href="text.html#TermTextContentElement">文本内容元素</a>——通过<strong>填充</strong>（绘画对象内部）和<strong>描边</strong>（沿对象轮廓绘画）进行渲染。填充和描边都是<strong>绘画</strong>操作。SVG
      2支持多种不同的填充和描边涂料，包括：</p>

    <ul>
      <li>单一颜色，</li>
      <li>渐变（线性或径向），</li>
      <li>图案（矢量或光栅，可能为平铺），</li>
      <li>使用 CSS 图像值语法指定的其他图像 [<a href="refs.html#ref-css-images-3">css-images-3</a>]。</li>
    </ul>

    <p>用于填充和描边元素的涂料通过<a class="property" href="painting.html#FillProperty">填充</a>和<a class="property"
        href="painting.html#StrokeProperty">描边</a>属性指定。以下部分描述了这些属性的不同值。</p>

    <p>其他属性，如<a class="property" href="painting.html#FillOpacityProperty">填充不透明度</a>和<a class="property"
        href="painting.html#StrokeWidthProperty">描边宽度</a>，也会影响填充和描边涂料应用于画布的方式。以下的<a href="#FillProperties">填充属性</a>和<a
        href="#StrokeProperties">描边属性</a>部分描述了这些属性。</p>

    <p>某些图形元素——<span class="element-name">‘<a href="paths.html#PathElement"><span>路径</span></a>’</span>元素和<a
        href="shapes.html#TermBasicShapeElement">基本形状</a>——也可以在其顶点或沿其描述的路径的其他位置绘制<strong>标记符号</strong>。以下的<a
        href="#Markers">标记</a>部分描述了如何定义和使用标记。</p>

    <p class="annotation">SVG 2在形状上增加了标记。解决于<a href="https://www.w3.org/2013/06/03-svg-minutes.html#item03">东京 F2F</a>。
    </p>

    <!--
<p>SVG uses the general notion of a <strong>paint server</strong>. Paint
servers are specified using a <a href="linking.html#URLReference">URL reference</a>
on a <a>'fill'</a> or <a>'stroke'</a> property.
<a href="pservers.html">Gradients and patterns</a> are just specific types of
paint servers.</p>
-->

    <h2 id="SpecifyingPaint" class="heading">13.2. 指定绘制<a class="self-link" href="#SpecifyingPaint"></a>
    </h2>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 要求：</th>
          <td>添加新绘制值以引用当前填充绘制、轮廓绘制等。</td>
        </tr>
        <tr>
          <th>解决方案：</th>
          <td><a href="https://www.w3.org/2011/07/29-svg-minutes.html#item02">我们将为 SVG 2 添加新的绘制值
              currentFillPaint、currentStrokePaint 等</a></td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>其中之一是提供一种简单的方法将标记颜色与轮廓颜色匹配。</td>
        </tr>
        <tr>
          <th>负责人：</th>
          <td>Chris (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3094">ACTION-3094</a>)</td>
        </tr>
      </table>
    </div>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 增加：</th>
          <td>允许在填充和轮廓中使用多个绘制。</td>
        </tr>
        <tr>
          <th>解决方案：</th>
          <td><a href="https://www.w3.org/2013/06/03-svg-minutes.html#item10">我们将在 SVG 2 中允许在填充和轮廓属性中使用多个绘制。</a></td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>用于创建交叉线、在实心填充上放置部分透明的图案等。</td>
        </tr>
        <tr>
          <th>负责人：</th>
          <td>Tav (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3500">ACTION-3500</a>)</td>
        </tr>
        <tr>
          <th>延迟：</th>
          <td>这已被取消，但将与
            <a href="https://drafts.fxtf.org/paint/">CSS 填充和轮廓第 3 级</a>同步添加
          </td>
        </tr>
      </table>
    </div>

    <p><a class="property" href="painting.html#FillProperty">填充</a> 和 <a class="property"
        href="painting.html#StrokeProperty">轮廓</a> 属性用于指定用于渲染形状和文本的内部及周围的
      <dfn id="TermPaint" data-dfn-type="dfn" data-export="">绘制</dfn>。绘制规范描述了一种将
      颜色值放置到画布上的方法，并由一个或多个绘制层组成。
      这四种绘制类型在这些绘制层中得到支持：
      <a href="https://www.w3.org/TR/css3-values/#colors">实色</a>、
      <a href="pservers.html#Gradients">渐变</a>和
      <a href="pservers.html#Patterns">图案</a>。
    </p>

    <p><a href="painting.html#SpecifyingPaint">&lt;paint></a> 值定义如下：</p>
    <p class="definition prod">
      <dfn id="DataTypePaint" data-dfn-type="type" data-export="">&lt;paint></dfn>
      = none
      | <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>
      | <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> [none | <a
        href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>]?
      | context-fill | context-stroke
    </p>

    <p>可能值如下：</p>
    <dl>
      <dt>none</dt>
      <dd>该层未应用任何绘制。</dd>

      <dt><a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> [none | <a
          href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a>]?</dt>
      <dd>指向一个 <dfn id="TermPaintServerElement" data-dfn-type="dfn" data-export="">绘制服务器元素</dfn> 的 URL 参考，
        这是一个定义 <a href="pservers.html">绘制服务器</a> 的元素：
        <span class="element-name">‘<a
            href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>、<span
          class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span> 和 <span
          class="element-name">‘<a href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>，
        可选地跟随一个后备值，用于在无法解析绘制服务器引用时使用。
      </dd>

      <dt><a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a></dt>
      <dd>实色绘制。</dd>

      <dt>context-fill</dt>
      <dd>使用来自 <a class="property" href="painting.html#FillProperty">填充</a> 的绘制值
        从 <a href="painting.html#TermContextElement">上下文元素</a>。</dd>

      <dt>context-stroke</dt>
      <dd>使用来自 <a class="property" href="painting.html#StrokeProperty">轮廓</a> 的绘制值
        从 <a href="painting.html#TermContextElement">上下文元素</a>。</dd>
    </dl>

    <p><a href="painting.html#SpecifyingPaint">&lt;paint></a> 允许绘制服务器引用，后面可选地跟随
      <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 或关键字 <span class="prop-value">none</span>。
      当给出这个可选值时，<a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 值或
      <span class="prop-value">none</span> 是一个后备值，用于在该层中的绘制服务器引用无效时使用
      （由于指向的元素不存在或不是有效的绘制服务器）。
    </p>

    <p class="note">注意，这与 CSS 背景语法略有不同，在该语法中，最终层的 <a class="property"
        href="https://drafts.csswg.org/css-backgrounds-3/#background">背景</a>
      值中指定的背景图像和颜色将会同时渲染。</p>

    <p>如果 <a href="painting.html#SpecifyingPaint">&lt;paint></a> 中的绘制服务器引用无效，并且没有给出后备值，则该层不渲染任何绘制。</p>

    <p class="annotation">这与 SVG 1.1 的行为不同，后者在绘制服务器引用无效且未指定后备颜色时会导致文档错误。</p>

    <div class="example">
      <pre>
&lt;rect width="100" height="100" fill="url(#MyHatch) powderblue">
  </pre>
      <div class="figure">
        <img alt="带有后备实色填充的示例" src="https://www.w3.org/TR/SVG2/images/painting/fallback_paint.svg">
        <p class="caption">左侧的矩形显示了如果定义了 MyHatch，则预期的填充。
          右侧的矩形显示了如果缺少 MyHatch，则预期的填充。</p>
      </div>
    </div>

    <p>对于任何 <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 值，必须支持在 <a
        href="https://www.w3.org/TR/css-color-3/#colorunits">CSS 颜色模块第 3 级</a>
      中定义的所有颜色语法，包括 <span class="prop-value">rgb()</span>、
      <span class="prop-value">rgba()</span>、
      <span class="prop-value">hsl()</span>、
      <span class="prop-value">hsla()</span>、
      <a href="https://www.w3.org/TR/css-color-3/#svg-color">扩展颜色关键字</a> 和
      <span class="prop-value">currentColor</span> 值。
    </p>

    <p id="context-paint">值 <span class="prop-value">context-fill</span> 和 <span
        class="prop-value">context-stroke</span> 是对被绘制元素的 <a class="property" href="painting.html#FillProperty">填充</a> 或
      <a class="property" href="painting.html#StrokeProperty">轮廓</a> 属性生成的绘制层的引用。被绘制元素的上下文元素定义如下：
    </p>

    <ul>
      <li>如果元素位于一个 <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
        中，并且由于通过 <a href="painting.html#TermMarkerProperties">标记属性</a> 被引用而作为该标记的一部分被渲染，则上下文元素为引用该 <span
          class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 的元素。</li>
      <li>如果元素位于一个通过 <span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span>
        元素实例化的子树中，则上下文元素为该 <span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span> 元素。
      </li>
      <li>否则，没有上下文元素。</li>
    </ul>

    <p>如果没有上下文元素并且使用了这些关键字，则不应用任何绘制。</p>

    <p>当上下文绘制层包含绘制服务器引用时，用于缩放绘制服务器元素和内容的坐标空间和边界框是 <a href="painting.html#TermContextElement">上下文元素</a>
      的坐标空间。换句话说，通过这些关键字引用的任何渐变和图案应该在主形状与标记之间，或者在一个 <a href="struct.html#TermUseElementShadowTree">使用元素阴影树</a>
      中的一个元素与另一个元素之间是连续的。</p>

    <p>如果 <a class="property" href="painting.html#FillProperty">填充</a> 或 <a class="property"
        href="painting.html#StrokeProperty">轮廓</a> 的引用值为 <span class="prop-value">context-fill</span> 和 <span
        class="prop-value">context-stroke</span>，则这些上下文引用是递归的。</p>

    <div class="example">
      <pre>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
  &lt;style>
    path {
      fill: none;
      stroke-width: 4px;
      marker: url(#diamond);
    }
  &lt;/style>
  &lt;path d="M 10,50 v -20 h 40 v -20" stroke="red">
  &lt;path d="M 30,70 v -20 h 40 v -20" stroke="green">
  &lt;path d="M 50,90 v -20 h 40 v -20" stroke="blue">
  &lt;marker id="diamond" markerWidth="12" markerHeight="12" refX="6" refY="6"
          markerUnits="userSpaceOnUse">
    &lt;circle cx="6" cy="6" r="3"
            fill="white" stroke="context-stroke" stroke-width="2">
  &lt;/marker>
&lt;/svg></pre>
      <div class="figure">
        <img alt="使用 marker 中的 context-stroke 关键字的示例"
          src="https://www.w3.org/TR/SVG2/images/painting/marker-context.svg11.svg" height="200">
        <p class="caption">该标记使用一个形状定义，其 <a class="property" href="painting.html#StrokeProperty">轮廓</a> 设置为 <span
            class="prop-value">context-stroke</span>。这导致标记采用使用该标记的每个 <span class="element-name">‘<a
              href="paths.html#PathElement"><span>path</span></a>’</span> 元素的颜色。
        </p>
      </div>
    </div>


    <h2 id="ColorProperty" class="heading">13.3. ‘<span class="property">color</span>’ 属性的效果<a class="self-link"
        href="#ColorProperty"></a></h2>

    <p class="note">有关 <a class="property" href="painting.html#ColorProperty">color</a> 的定义，请参见 CSS 颜色模块第 3 级规范。
      [<a href="refs.html#ref-css-color-3">css-color-3</a>]</p>

    <p><a class="property" href="painting.html#ColorProperty">color</a> 属性用于提供可能的间接值，
      <span class="prop-value">currentColor</span>，用于 <a class="property" href="painting.html#FillProperty">fill</a>，
      <a class="property" href="painting.html#StrokeProperty">stroke</a>、<a class="property"
        href="pservers.html#StopColorProperty">stop-color</a>、<a class="property"
        href="https://drafts.fxtf.org/filter-effects/#FloodColorProperty">flood-color</a> 和
      <a class="property" href="https://drafts.fxtf.org/filter-effects/#LightingColorProperty">lighting-color</a>
      属性。该属性对 SVG 元素没有其他影响。
    </p>

    <div class="example">
      <p>以下示例演示了如何使用来自 HTML 文档的继承值
        <a class="property" href="painting.html#ColorProperty">color</a> 属性来设置内联 SVG 片段中 SVG 文本的颜色。
      </p>

      <pre>
&lt;!DOCTYPE html>
&lt;style>
body { color: #468; font: 16px sans-serif }
svg { border: 1px solid #888; background-color: #eee }
&lt;/style>
&lt;p>请参见下方图示：&lt;/p>
&lt;svg width="200" height="100">
  &lt;g fill="currentColor">
    &lt;text x="70" y="55" text-anchor="end">START&lt;/text>
    &lt;text x="130" y="55">STOP&lt;/text>
    &lt;path d="M 85,45 h 25 v -5 l 10,10 -10,10 v -5 h -25 z">
  &lt;/g>
&lt;/svg>
</pre>

      <div class="figure">
        <div class="bordered"
          style="color: #468; font: 16px sans-serif; display: inline-block; text-align: left; padding: 32px 128px 32px 32px">
          <p style="margin-top: 0; margin-bottom: 1em">请参见下方图示：</p>
          <svg xmlns="http://www.w3.org/2000/svg" width="200" height="100"
            style="border: 1px solid #888; background-color: #eee">
            <g fill="currentColor">
              <text x="70" y="55" text-anchor="end">START</text>
              <text x="130" y="55">STOP</text>
              <path d="M 85,45 h 25 v -5 l 10,10 -10,10 v -5 h -25 z">
            </g>
          </svg>
        </div>
        <p class="caption">SVG 片段中的文本和箭头使用与继承的 <a class="property" href="painting.html#ColorProperty">color</a>
          属性相同的颜色填充。</p>
      </div>
    </div>

    <h2 id="FillProperties" class="heading">13.4. 填充属性<a class="self-link" href="#FillProperties"></a></h2>

    <h3 id="SpecifyingFillPaint" class="heading">13.4.1. 指定填充油漆：‘<span class="property">fill</span>’
      属性<a class="self-link" href="#SpecifyingFillPaint"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="FillProperty" data-dfn-type="property" data-export="">fill</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="painting.html#SpecifyingPaint">&lt;paint&gt;</a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>黑色</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>不适用</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定，但 <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color&gt;</a> 值计算
          并且 <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url&gt;</a> 值变为绝对值
        </td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#FillProperty">fill</a>
      属性用于填充给定图形元素的内部。要填充的区域包括形状轮廓内的任何区域。为了确定形状的内部，所有子路径都会被考虑，并且内部根据当前值的 <a class="property"
        href="painting.html#FillRuleProperty">fill-rule</a> 属性相关规则进行确定。形状的零宽几何轮廓包括在要填充的区域内。</p>

    <p>填充操作通过执行填充操作来填充 <a
        href="paths.html#TermClosedSubpath">开放子路径</a>，就像向路径中添加一个额外的“closepath”命令以连接子路径的最后一点和第一点。因此，填充操作适用于 <a
        href="paths.html#TermClosedSubpath">开放子路径</a> 内的 <span class="element-name">‘<a
          href="paths.html#PathElement"><span>path</span></a>’</span> 元素（即没有 closepath 命令的子路径）和 <span
        class="element-name">‘<a href="shapes.html#PolylineElement"><span>polyline</span></a>’</span> 元素。</p>

    <h3 id="WindingRule" class="heading">13.4.2. 轮廓规则：‘<span class="property">fill-rule</span>’
      属性<a class="self-link" href="#WindingRule"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="FillRuleProperty" data-dfn-type="property" data-export="">fill-rule</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>nonzero | evenodd</td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>nonzero</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>不适用</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#FillRuleProperty">fill-rule</a> 属性指示用于确定画布上哪些部分包含在形状内部的算法（或
      <em>轮廓规则</em>）。对于简单的、不相交的路径，"内部" 区域是直观清晰的；然而，对于更复杂的路径，例如自相交的路径或一个子路径包含另一个子路径的情况，"内部" 的解释并不那么明显。
    </p>

    <p><a class="property" href="painting.html#FillRuleProperty">fill-rule</a> 属性提供了两种确定形状内部的选项：</p>

    <dl>
      <dt><span class="prop-value">nonzero</span></dt>
      <dd>
        <p>此规则通过从该点向任意方向绘制一条光线到无穷远来确定画布上某点的
          "内部"。然后检查形状的哪个段与光线相交。从零开始计数，每当路径段从左到右穿过光线时加一，每当路径段从右到左穿过光线时减一。计数完成后，如果结果为零，则该点位于路径 <em>外部</em>；否则，位于
          <em>内部</em>。以下图示说明了 <span class="prop-value">nonzero</span> 规则：
        </p>

        <div class="figure">
          <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/fillrule-nonzero.svg"
            alt="Image showing nonzero fill rule">
          <p class="caption">非零填充规则对自交和封闭子路径的影响。</p>
        </div>
      </dd>

      <dt><span class="prop-value">evenodd</span></dt>
      <dd>
        <p>此规则通过从该点向任意方向绘制一条光线到无穷远并计算光线穿过给定形状的路径段的数量来确定画布上某点的 "内部"。如果这个数字是奇数，则该点在内部；如果是偶数，则该点在外部。以下图示说明了 <span
            class="prop-value">evenodd</span> 规则：</p>

        <div class="figure">
          <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/fillrule-evenodd.svg"
            alt="Image showing evenodd fill rule">
          <p class="caption">偶数填充规则对自交和封闭子路径的影响。</p>
        </div>
      </dd>
    </dl>

    <p class="note">上述描述没有说明如果路径段与光线重合或相切该如何处理。由于任何光线都可以使用，因此可以简单选择另一条没有此类问题交点的光线。</p>

    <h3 id="FillOpacity" class="heading">13.4.3. 填充绘画不透明度：‘<span class="property">fill-opacity</span>’
      属性<a class="self-link" href="#FillOpacity"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="FillOpacityProperty" data-dfn-type="property" data-export="">fill-opacity</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="https://www.w3.org/TR/css-color/#typedef-alpha-value">&lt;alpha-value></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>1</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>不适用</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>指定值转换为数字，限制在范围 [0,1] 内</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#FillOpacityProperty">fill-opacity</a> 指定用于绘制当前对象填充的不透明度。（参见 <a
        href="render.html#PaintingShapesAndText">绘制形状和文本</a>）。</p>

    <dl>
      <dt><span class="prop-value">&lt;number></span></dt>
      <dd>
        填充的不透明度。任何超出范围 0（完全透明）到 1（完全不透明）的值必须限制在此范围内。
      </dd>
      <dt><span class="prop-value">&lt;percentage></span></dt>
      <dd>
        填充的不透明度以 0 到 1 范围的百分比表示。
      </dd>
    </dl>

    <p class="note">另请参见 <a class="property" href="render.html#ObjectAndGroupOpacityProperties">不透明度</a>
      属性，它指定组的不透明度。</p>

    <h2 id="StrokeProperties" class="heading">13.5. 描边属性<a class="self-link" href="#StrokeProperties"></a>
    </h2>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 要求：</th>
          <td>支持非缩放描边。</td>
        </tr>
        <tr>
          <th>解决方案：</th>
          <td><a href="https://www.w3.org/2011/10/28-svg-irc#T17-46-34">SVG 2 将包括非缩放描边。</a><br>
            <a href="https://www.w3.org/2012/02/02-svg-minutes.html#item05">SVG 2 将拥有 ‘<span
                class="property">vector-effect</span>’ 属性。</a>
          </td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>支持在缩放页面时宽度不变的描边，例如地图中常见的描边。</td>
        </tr>
        <tr>
          <th>负责人：</th>
          <td>Chris 或 Erik（无行动）</td>
        </tr>
        <tr>
          <th>备注：</th>
          <td>请注意，这可能是更通用的非缩放特性的组成部分。</td>
        </tr>
      </table>
    </div>

    <p>在本节中，我们定义了一些属性，使作者能够控制描边的不同方面，包括其绘画、厚度、虚线的使用以及路径段的连接和端点。</p>

    <p>在所有情况下，所有受方向性影响的描边属性，例如与虚线模式有关的属性，必须以图形元素开始的同一点开始渲染描边操作。特别是，对于 <span class="element-name">‘<a
          href="paths.html#PathElement"><span>path</span></a>’</span>
      元素，路径的起点是初始 "moveto" 命令的第一个点。</p>

    <p>对于计算依赖于图形元素轮廓进度的描边属性，例如虚线模式，需要使用 SVG 用户代理的标准 <a href="paths.html#DistanceAlongAPath">沿路径的距离</a>
      算法进行距离计算。</p>

    <p>当使用复杂的绘画服务器（例如渐变或图案）进行描边时，描边操作必须与如果将当前图形元素及其相关描边属性定义的几何形状转换为等效的 <span class="element-name">‘<a
          href="paths.html#PathElement"><span>path</span></a>’</span> 元素并使用给定的绘画服务器填充时的结果相同。</p>

    <h3 id="SpecifyingStrokePaint" class="heading">13.5.1. 指定描边绘画：‘<span class="property">stroke</span>’
      属性<a class="self-link" href="#SpecifyingStrokePaint"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeProperty" data-dfn-type="property" data-export="">stroke</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="painting.html#SpecifyingPaint">&lt;paint></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>无</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定，但 <a href="https://www.w3.org/TR/css3-values/#colors">&lt;color></a> 值计算后，<a
            href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a> 值变为绝对值</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#StrokeProperty">stroke</a> 属性沿给定图形元素的轮廓进行绘制。</p>

    <p class="note">请注意，当描边 <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>
      元素时，任何仅由 <a href="paths.html#PathDataMovetoCommands">moveto</a> 组成的子路径但没有后续的线条绘制命令将不会被描边。任何其他类型的零长度子路径，例如
      <span class="attr-value">'M 10,10 L 10,10'</span>
      或 <span class="attr-value">'M 30,30 Z'</span>
      也不会被描边，如果 <a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a>
      属性的值为 <span class="prop-value">butt</span>。有关计算路径描边的详细信息，请参见下面的 <a href="painting.html#TermStrokeShape">描边形状</a>
      定义。
    </p>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 要求：</th>
          <td>包含指定描边位置的方法。</td>
        </tr>
        <tr>
          <th>解决方案：</th>
          <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-09-48">SVG 2 将包括指定描边位置的方法。</a></td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>允许描边位于路径内部或外部。</td>
        </tr>
        <tr>
          <th>负责人：</th>
          <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3162">ACTION-3162</a>)</td>
        </tr>
        <tr>
          <th>备注：</th>
          <td>请参见 <a href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Stroke_position">提案页面</a>。</td>
        </tr>
      </table>
    </div>

    <h3 id="StrokeOpacity" class="heading">13.5.2. 描边绘画的不透明度：‘<span class="property">stroke-opacity</span>’
      属性<a class="self-link" href="#StrokeOpacity"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeOpacityProperty" data-dfn-type="property" data-export="">stroke-opacity</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="https://www.w3.org/TR/css-color/#typedef-alpha-value">&lt;alpha-value></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>1</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>指定的值转换为数字，限制在 [0,1] 范围内</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#StrokeOpacityProperty">stroke-opacity</a> 属性指定用于描边当前对象的绘制操作的不透明度。（参见 <a
        href="render.html#PaintingShapesAndText">绘制形状和文本</a>。）与 <a class="property"
        href="painting.html#FillOpacityProperty">fill-opacity</a> 相同。</p>

    <dl>
      <dt><span class="prop-value">&lt;number></span></dt>
      <dd>
        描边的不透明度。任何超出 0（完全透明）到 1（完全不透明）范围的值必须限制在此范围内。
      </dd>
      <dt><span class="prop-value">&lt;percentage></span></dt>
      <dd>
        描边的不透明度以 0 到 1 的百分比表示。
      </dd>
    </dl>

    <p class="note">另请参见 <a class="property" href="render.html#ObjectAndGroupOpacityProperties">不透明度</a> 属性，该属性指定组的不透明度。
    </p>

    <h3 id="StrokeWidth" class="heading">13.5.3. 描边宽度：‘<span class="property">stroke-width</span>’
      属性<a class="self-link" href="#StrokeWidth"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeWidthProperty" data-dfn-type="property" data-export="">stroke-width</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>1</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>参照当前 SVG 视口的大小（见 <a href="coords.html#Units">单位</a>）</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>绝对长度或百分比</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p>该属性指定当前对象的描边宽度。零值将导致不绘制描边。负值是 <a href="types.html#TermInvalidValue">无效</a> 的。</p>

    <h3 id="LineCaps" class="heading">13.5.4. 描边末端的绘制帽形：‘<span class="property">stroke-linecap</span>’
      属性<a class="self-link" href="#LineCaps"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeLinecapProperty" data-dfn-type="property" data-export="">stroke-linecap</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>butt | round | square</td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>butt</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a> 属性指定在描边时使用的形状
      以及零长度子路径的绘制形状，无论它们是开放还是闭合的。可能的值有：
    </p>

    <dl>
      <dt><span class="prop-value">butt</span></dt>
      <dd>此值表示每个子路径的描边不超过其两个端点。因此，零长度子路径将没有任何描边。</dd>

      <dt><span class="prop-value">round</span></dt>
      <dd>
        <p>此值表示在每个子路径的末端，表示描边的形状将通过直径等于描边宽度的半圆扩展。如果子路径（无论是开放还是闭合）长度为零，那么最终效果是该子路径的描边仅由一个位于子路径点的完整圆构成。</p>
      </dd>

      <dt><span class="prop-value">square</span></dt>
      <dd>
        <p>
          此值表示在每个子路径的末端，表示描边的形状将通过与描边宽度相同的矩形扩展，其长度为描边宽度的一半。如果子路径（无论是开放还是闭合）长度为零，那么最终效果是该子路径的描边仅由一个边长等于描边宽度的正方形构成，正方形居于子路径的点，并且有两个边与该子路径点的有效切线平行。有关如何确定零长度子路径的切线的详细信息，请参见<a
            href="paths.html#PathElementImplementationNotes"><span class="element-name">‘path’</span>
            元素实施说明</a>。
        </p>
      </dd>
    </dl>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linecap.svg" alt="显示三条路径，每条路径具有不同的线帽。">
      <p class="caption">三种线帽的类型。</p>
    </div>

    <p>有关线帽形状的更精确描述，请参见下面的<a href="painting.html#TermCapShape">帽形</a>定义。</p>

    <h3 id="LineJoin" class="heading">13.5.5. 控制线连接：‘<span class="property">stroke-linejoin</span>’
      和‘<span class="property">stroke-miterlimit</span>’属性<a class="self-link" href="#LineJoin"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeLinejoinProperty" data-dfn-type="property" data-export="">stroke-linejoin</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>miter | miter-clip | round | bevel | arcs </td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>miter</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如所指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
      指定在描边时用于路径或基本形状角落的形状。有关更多详细信息，请参见<a href="paths.html#PathElementImplementationNotes">路径实现说明</a>。</p>

    <dl>
      <dt><span class="prop-value">miter</span></dt>
      <dd>该值指示使用尖锐的角来连接路径段。角是通过在路径段的切线处扩展描边的外缘，直到它们相交而形成的。如果超出了<a class="property"
          href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>，则线连接回落到<span
          class="prop-value">bevel</span>（见下文）。</dd>

      <dt><span class="prop-value">miter-clip</span></dt>
      <dd>该值与<span class="prop-value">miter</span>相同，但如果超出了<a class="property"
          href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>，则在距离路径段交点的描边宽度乘以一半的<a class="property"
          href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>值处裁剪斜角。</dd>

      <dt><span class="prop-value">round</span></dt>
      <dd>该值指示使用圆形角来连接路径段。角是以连接点为中心的圆形扇形。</dd>

      <dt><span class="prop-value">bevel</span></dt>
      <dd>该值指示使用斜面角来连接路径段。斜面形状是填充两个描边段之间区域的三角形。</dd>

      <dt><span class="prop-value">arcs</span></dt>
      <dd>该值指示使用弧角来连接路径段。弧形是通过在连接点处扩展描边的外缘，并以相同的曲率形成的弧线。</dd>
    </dl>

    <p class="note">
      <span class="prop-value">miter-clip</span> 和<span class="prop-value">arcs</span>值在SVG 2中是新的。
      <span class="prop-value">miter-clip</span>值为具有多个连接的路径提供了更一致的展示，以及在路径动画时的更好行为。
      <span class="prop-value">arcs</span>值在路径段在连接处是曲线时提供了更美观的连接。
    </p>

    <p class="annotation">
      添加 'arcs' 线连接是在<a href="https://www.w3.org/2012/09/19-svg-minutes.html#item08">Rigi Kaltbad小组会议</a>上解决的。
    </p>

    <p class="annotation">
      添加 'miter-clip' 线连接是在<a href="https://www.w3.org/2015/02/12-svg-minutes.html#item03">悉尼（2015）小组会议</a>上解决的。
    </p>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-four.svg"
        alt="显示四条路径，每条路径具有不同线连接的图像。">
      <p class="caption">四种类型的线连接。</p>
    </div>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeMiterlimitProperty" data-dfn-type="property" data-export="">stroke-miterlimit</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>4</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如所指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p>
      当两条线段在锐角相遇，并且为<a class="property" href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>指定了<span
        class="prop-value">miter</span>，
      <span class="prop-value">miter-clip</span>或<span class="prop-value">arcs</span>值时，连接可能会远远超过描边路径的线的厚度。
      <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>对线连接的范围施加了限制。
    </p>

    <dl>
      <dt><span class="prop-value">&lt;number></span></dt>
      <dd>
        <span class="prop-value">miter</span>、<span class="prop-value">miter-clip</span>或<span
          class="prop-value">arcs</span>线连接的范围限制，以描边宽度值的倍数表示。
        <a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>的负值必须视为<a
          href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#illegalvalues">非法值</a>。
      </dd>
    </dl>

    <p class="note">
      以前版本的SVG规范也指出0到1之间的值是错误的，但这在用户代理的CSS解析器中实现得不够好。
      实际上，任何斜接连接都将超出0到1之间的斜接限制。
    </p>

    <p>
      对于<span class="prop-value">miter</span>或<span class="prop-value">miter-clip</span>值，给定用户坐标系中段之间的角度<var>θ</var>，
      斜接长度的计算公式为：
    </p>

    <div role="math" aria-describedby="math-miter-length">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mrow>
          <mi>斜接长度</mi>
          <mo>=</mo>
          <mfrac>
            <mi style="font-family: sans-serif">‘描边宽度’</mi>
            <mrow>
              <mi>sin</mi>
              <mo>⁡</mo>
              <mfrac>
                <mi>θ</mi>
                <mn>2</mn>
              </mfrac>
            </mrow>
          </mfrac>
        </mrow>
      </math>
      <pre id="math-miter-length">斜接长度 = 描边宽度 / sin(theta / 2)</pre>
    </div>

    <div class="note">
      <p>
        历史上，斜接长度定义为相交路径段内部描边边缘到斜接顶端的距离。在实践中，仅对直线路径段遵循此定义。基于角度的斜接长度定义仅依赖于路径段在连接处的切线，从而提供一致的结果，而不受路径段曲率的影响。为了与此定义一致，<span
          class="prop-value">miter-clip</span>和<span class="prop-value">arcs</span>线连接的裁剪点位于两个路径段连接点处，距离为描边宽度乘以一半的<a
          class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>。
      </p>
      <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/miter-limit-def.svg"
          alt="显示描边斜接长度定义和不同形状路径段之间裁剪一致性的图像。">
        <p class="caption">
          左：斜接长度的历史定义。

          右：两条路径在路径段连接处具有相同的切线。斜接连接的行为（回落到斜面或裁剪位置）对两条路径是相同的。它不依赖于内部描边边缘相交的位置。
        </p>
      </div>
    </div>

    <p>
      如果斜接长度除以描边宽度超过<a class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>，则对于值：
    </p>
    <dl>
      <dt><span class="prop-value">miter</span></dt>
      <dd>
        连接将转换为斜面；
      </dd>
      <dt><span class="prop-value">miter-clip</span></dt>
      <dd>
        斜接通过一条垂直于夹角二分线的线裁剪，裁剪距离为斜接长度的一半，从两个路径段交点开始。
      </dd>
    </dl>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/miter-limit.svg"
        alt="显示当描边斜接限制被超过时的结果描边图像。">
      <p class="caption">
        当<a class="property"
          href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>被超过时，线连接的效果。橄榄绿色虚线显示描边斜接限制的位置，当<a
          class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>值为3时。灰色区域显示没有斜接限制时连接的样子。
      </p>
    </div>

    <p>
      对于<span
        class="prop-value">arcs</span>值，<em>斜接长度</em>是在连接的两段之间切线的角二分线上的圆弧上计算的，该圆弧经过连接的端点。如果需要，线连接将通过与此弧线垂直的线裁剪，裁剪距离为两个路径段交点的距离，等于<a
        class="property" href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a>值的一半乘以描边宽度。
    </p>

    <p class="annotation">
      'stroke-miterlimit' 对'arcs'线连接的影响是在<a
        href="https://www.w3.org/2015/02/12-svg-minutes.html#item12">悉尼（2015）小组会议</a>上解决的。
    </p>

    <p>
      有关线连接形状的更精确描述，请参见<a href="painting.html#TermLineJoinShape">线连接形状</a>的定义。
    </p>

    <h3 id="StrokeDashing" class="heading">13.5.6. 线段虚线：‘<span class="property">stroke-dasharray</span>’
      和
      ‘<span class="property">stroke-dashoffset</span>’ 属性<a class="self-link" href="#StrokeDashing"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeDasharrayProperty" data-dfn-type="property" data-export="">stroke-dasharray</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>none | <a href="painting.html#DataTypeDasharray">&lt;dasharray></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>none</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>参照当前SVG视口的大小（见 <a href="coords.html#Units">单位</a>）</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>绝对长度或百分比，或关键词指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是 (<a href="https://svgwg.org/specs/animations/#AdditionAttributes">非加法</a>)</td>
      </tr>
    </table>

    <p>其中：</p>

    <p class="definition prod"><dfn id="DataTypeDasharray" data-dfn-type="type" data-export="">&lt;dasharray></dfn> =
      [ <a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> | <a
        href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> ]#*</p>

    <p><a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a> 属性控制
      用于形成路径线条形状的虚线和间隙模式。</p>

    <dl>
      <dt><span class="prop-value">none</span></dt>
      <dd>表示不使用虚线。</dd>

      <dt><span class="prop-value">&lt;dasharray></span></dt>
      <dd>
        <p>指定要使用的虚线模式。<a href="painting.html#DataTypeDasharray">&lt;dasharray></a> 是
          一个以逗号和/或空格分隔的长度或百分比的列表。
          每个值指定沿路径的线条要绘制的长度（<em>虚线</em>）和不绘制的长度（<em>间隙</em>）。
          列表中的第一个值及其后每隔一个值指定虚线的长度，而每个其他值指定虚线之间的间隙长度。
          如果列表有奇数个值，则重复该列表以产生偶数个值。（因此，<span class="prop-value">stroke-dasharray: 5,3,2</span>
          的渲染行为等同于 <span class="prop-value">stroke-dasharray: 5,3,2,5,3,2</span>。）</p>

        <p>结果的偶数长度虚线模式在每个子路径上重复。
          虚线模式在每个子路径的起始处重置并重新开始。</p>

        <p>如果列表中的任何值为负，则<a href="painting.html#DataTypeDasharray">&lt;dasharray></a> 值
          是<a href="types.html#TermInvalidValue">无效</a>。如果列表中的所有值均为零，
          则线条将作为一条实线呈现，而没有任何虚线。
        </p>
      </dd>
    </dl>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/dashes.svg" alt="显示粗虚线的图像。">
      <p class="caption">一条虚线。虚线模式是 <span class="prop-value">20,10</span>。
        红线显示实际绘制的路径。</p>
    </div>

    <p><span class="attr-name">‘<a href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>
      属性在<span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 元素上
      影响<a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>：每个虚线和间隙长度
      相对于作者指定的路径长度进行解释
      <span class="attr-name">‘<a href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>。
    </p>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="StrokeDashoffsetProperty" data-dfn-type="property" data-export="">stroke-dashoffset</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>0</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>参照当前SVG视口的大小（见 <a href="coords.html#Units">单位</a>）</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>绝对长度或百分比</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a> 属性指定
      在路径开始处开始绘制虚线模式的距离。如果值为负，则效果与虚线偏移 <var>d</var> 相同：</p>

    <div role="math" aria-describedby="math-dashoffset">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mrow>
          <mi>d</mi>
          <mo>=</mo>
          <mi>s</mi>
          <mo>-</mo>
          <mfenced open="|" close="|">
            <mi style="font-family: sans-serif">‘stroke-dashoffset’</mi>
          </mfenced>
          <mo>mod</mo>
          <mi>s</mi>
        </mrow>
      </math>
      <pre id="math-dashoffset">d = s - (abs(stroke-dashoffset) mod s)</pre>
    </div>

    <p>其中 <var>s</var> 是虚线数组值的总和。</p>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/dashoffset.svg" alt="显示具有非零虚线偏移的粗虚线的图像。">
      <p class="caption">一条虚线，具有非零的虚线偏移。虚线模式是
        <span class="prop-value">20,10</span>，虚线偏移为
        <span class="prop-value">15</span>。红线显示实际绘制的路径。
      </p>
    </div>

    <p>与<a class="property" href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a> 类似，<a class="property"
        href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a> 是相对于作者在<span class="attr-name">‘<a
          href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> 元素上指定的路径长度进行解释的
      <span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span> 元素。
    </p>

    <div class="example">
      <p>下面的例子展示了如何使用一个与实际路径长度大相径庭的<span class="attr-name">‘<a
            href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> 来更轻松地控制笔画虚线。</p>

      <pre>&lt;svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     width="300" height="150">
  &lt;defs>
    &lt;path id="p" d="M -50,0 A 50,50 0 0 0 50,0 A 50,50 0 0 0 -50,0 z"
          pathLength="80">
    &lt;g id="chip" stroke-width="10">
      &lt;circle cy="5" r="55" fill="#000" fill-opacity="0.15" stroke="none">
      &lt;use xlink:href="#p">
      &lt;use xlink:href="#p" fill="none" stroke="#eee" stroke-width="10"
           stroke-dasharray="10 10" stroke-dashoffset="5">
      &lt;g fill="none" stroke-width="5" stroke-dasharray="0 20" stroke-linecap="round">
        &lt;use xlink:href="#p" stroke="#eee" stroke-dashoffset="10">
        &lt;use xlink:href="#p" stroke-dashoffset="0">
      &lt;/g>
      &lt;circle r="40" fill="#000" fill-opacity="0.15"
              stroke-width="2" stroke="white">
    &lt;/g>
  &lt;/defs>
  &lt;rect width="100%" height="100%" fill="#063">
  &lt;use xlink:href="#chip" x="140" y="75" fill="#00c" stroke="#00c">
  &lt;use xlink:href="#chip" x="160" y="85" fill="#000" stroke="#000">
  &lt;use xlink:href="#chip" x="170" y="65" fill="#c00" stroke="#c00">
&lt;/svg></pre>

      <div class="figure">
        <img src="https://www.w3.org/TR/SVG2/images/painting/dash-pathlength.svg"
          alt="三枚赌场筹码的图像，每个筹码都有一个使用笔画虚线产生的图案边框。">
        <p class="caption">四个宽白色虚线和每个筹码周围的八个小圆形虚线相对于作者指定的<span class="attr-name">‘<a
              href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span> 为<span
            class="attr-value">'80'</span>，使得所需的<a class="property"
            href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a> 和<a class="property"
            href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a> 值易于计算。
        </p>
      </div>
    </div>

    <p>请参见下面的<a href="painting.html#TermDashPositions">虚线位置</a>定义，以获取有关路径上虚线放置位置的更精确描述。</p>

  </div>

  <div class="ready-for-wider-review">
    <h3 id="StrokeShape" class="heading">13.5.7. 计算笔划的形状<a class="self-link" href="#StrokeShape"></a></h3>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 要求：</th>
          <td>更精确地指定笔划虚线。</td>
        </tr>
        <tr>
          <th>解决方案：</th>
          <td><a href="https://www.w3.org/2011/10/28-svg-irc#T18-14-14">SVG 2 应更精确地指定笔划虚线。</a></td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>定义基本形状和路径段上的虚线起点。</td>
        </tr>
        <tr>
          <th>所有者：</th>
          <td>Cameron（无行动）</td>
        </tr>
      </table>
    </div>

    <div class="ready-for-wider-review">
      <p><dfn id="TermStrokeShape" data-dfn-type="dfn" data-export="">笔划形状</dfn>是元素由<a class="property"
          href="painting.html#StrokeProperty">笔划</a>属性填充的形状。由于<span class="element-name">‘<a
            href="text.html#TextElement"><span>文本</span></a>’</span>元素可以分块呈现，每块都有自己的<a
          href="painting.html#TermStrokeShape">笔划形状</a>。以下算法描述了<span class="element-name">‘<a
            href="paths.html#PathElement"><span>路径</span></a>’</span>、<a
          href="shapes.html#TermBasicShapeElement">基本形状</a>或单个<span class="element-name">‘<a
            href="text.html#TextElement"><span>文本</span></a>’</span>块的理想笔划形状，考虑到上述笔划属性。描述的理想笔划形状定义了最佳情况实现，但实现可以在性能原因上有一定的偏差。
      </p>

      <div class="note">
        作者应注意，在某些情况下，例如在极紧的曲线处，笔划的形状可能在不同平台上有所不同。
        <div class="figure">
          <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/stroke-tight-corner-render-examples.png"
            alt="图像显示了如何在不同平台上笔划形状的差异。一个示例是本规范中算法描述的，而另一个则不同，整体看起来不太正确。它的不同之处在于，由于曲线末端与高曲率段的接近，描述笔划左右两侧的几何图形被扭曲。">
          <p class="caption">笔划形状在不同平台上的绘制示例。</p>
        </div>
        以上示例显示了以下两个SVG路径的可能渲染结果：
        <pre>&lt;svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg">
&lt;path d="M 1,3 C 8,2 8,6 7,6" stroke-width="4" fill="none" stroke="skyblue">
&lt;path d="M 1,3 C 8,2 8,6 7,6" stroke-width="0.075" fill="none" stroke="black">
&lt;/svg></pre>
      </div>
    </div> <!-- end of class="ready-for-wider-review" -->

    理想的笔划形状的确定如下：

    <ol class="algorithm">
      <li>让<var>shape</var>为空形状。</li>
      <li class="ready-for-wider-review">如果<a class="property" href="painting.html#StrokeWidthProperty">笔划宽度</a> > 0，则：
        <ol>
          <li>让<var>scale</var>成为虚线模式的缩放因子。如果我们正在计算<span class="element-name">‘<a
                href="text.html#TextElement"><span>文本</span></a>’</span>块的笔划形状，或如果元素上没有<span class="attr-name">‘<a
                href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>属性，则<var>scale</var>为1。否则，它的确定如下：
            <ol>
              <li>让<var>length</var>为用户代理计算的<span class="element-name">‘<a
                    href="paths.html#PathElement"><span>路径</span></a>’</span>或<a
                  href="paths.html#TermEquivalentPath">等效路径</a>的长度。</li>
              <li>让<var>authorlength</var>为<a href="shapes.html#TermShapeElement">形状</a>上<span class="attr-name">‘<a
                    href="paths.html#PathLengthAttribute"><span>pathLength</span></a>’</span>属性的值。</li>
              <li><var>scale</var>为<var>authorlength</var> / <var>length</var>。</li>
            </ol>
          </li>
          <li>让<var>path</var>为元素的<a href="paths.html#TermEquivalentPath">等效路径</a>（或单个<span class="element-name">‘<a
                href="text.html#TextElement"><span>文本</span></a>’</span>元素的块）。</li>
          <li>对于<var>path</var>的每个子路径：
            <ol>
              <li>让<var>positions</var>为子路径的<a href="painting.html#TermDashPositions">虚线位置</a>。</li>
              <li>对于<var>positions</var>中的每对&lt;<var>start</var>, <var>end</var>>：
                <ol>
                  <li>按<var>scale</var>缩放<var>start</var>和<var>end</var>。</li>

                  <li>
                    让<var>dash</var>成为包括子路径上<var>start</var>和<var>end</var>之间所有距离的形状，所有位于该距离的子路径上的点都在距该位置<var>stroke-width</var>范围内的垂直线上的点。
                  </li>

                  <li>将<var>dash</var>设为<var>dash</var>与子路径在位置<var>start</var>的起始<a
                      href="painting.html#TermCapShape">端部形状</a>的并集。</li>

                  <li>将<var>dash</var>设为<var>dash</var>与子路径在位置<var>end</var>的结束<a
                      href="painting.html#TermCapShape">端部形状</a>的并集。</li>

                  <li>
                    让<var>index</var>和<var>last</var>成为子路径中在距离<var>start</var>和<var>end</var>的路径段的索引。

                    <p class="note">选择<var>index</var>和<var>last</var>时是否包含任何零长度段并不重要。</p>
                  </li>

                  <li>当<var>index</var> &lt; <var>last</var>时：
                    <ol>
                      <li>将<var>dash</var>设为<var>dash</var>与子路径在段索引<var>index</var>的<a
                          href="painting.html#TermLineJoinShape">线连接形状</a>的并集。</li>

                      <li>将<var>index</var>加1。</li>
                    </ol>
                  </li>

                  <li>将<var>shape</var>设为<var>shape</var>与<var>stroke</var>的并集。</li>
                </ol>
              </li>
            </ol>
          </li>
        </ol>
      </li>
      <li>返回<var>shape</var>。</li>
    </ol>

    <p>给定<a href="paths.html#TermEquivalentPath">等效路径</a>的<span class="element-name">‘<a
          href="paths.html#PathElement"><span>路径</span></a>’</span>或<a
        href="shapes.html#TermBasicShapeElement">基本形状</a>的子路径的<dfn id="TermDashPositions" data-dfn-type="dfn"
        data-export="">虚线位置</dfn>是一系列成对的值，表示构成子路径笔划的每个虚线的起始和结束距离。其确定如下：</p>

    <ol class="algorithm">
      <li>让<var>pathlength</var>为子路径的长度。</li>

      <li>让<var>dashes</var>为元素上<a class="property"
          href="painting.html#StrokeDasharrayProperty">stroke-dasharray</a>属性的值，转换为用户单位，必要时重复以使其具有偶数个元素；如果属性的值为<span
          class="prop-value">none</span>，则列表仅包含一个值0。</li>

      <li>让<var>count</var>为<var>dashes</var>中的值的数量。</li>
      <li>让<var>sum</var>为<var>dashes</var>中值的总和。</li>

      <li>如果<var>sum</var> = 0，则返回序列&lt;0, <var>pathlength</var>>。</li>

      <li>让<var>positions</var>为空序列。</li>

      <li>让<var>offset</var>为元素上<a class="property"
          href="painting.html#StrokeDashoffsetProperty">stroke-dashoffset</a>属性的值。</li>

      <li>如果<var>offset</var>为负，则将<var>offset</var>设为<var>sum</var> − abs(<var>offset</var>)。</li>

      <li>将<var>offset</var>设为<var>offset</var> mod <var>sum</var>。</li>

      <li>让<var>index</var>为最小的整数，使得sum(<var>dashes<sub>i</sub></var>, 0 ≤ <var>i</var> ≤ <var>index</var>) ≥
        <var>offset</var>。
      </li>

      <li>让<var>dashlength</var>为min(sum(<var>dashes<sub>i</sub></var>, 0 ≤ <var>i</var> ≤ <var>index</var>) −
        <var>offset</var>, <var>pathlength</var>)。
      </li>

      <li>如果<var>index</var> mod 2 = 0，则将对<var>positions</var>追加对&lt;0, <var>dashlength</var>>。</li>

      <li>让<var>position</var>为<var>dashlength</var>。</li>

      <li>当<var>position</var>
        &lt; <var>pathlength</var>时：
        <ol>
          <li>将<var>index</var>设为（<var>index</var> + 1）mod <var>count</var>。</li>

          <li>让<var>dashlength</var>为min(<var>dashes</var><sub><var>index</var></sub>, <var>pathlength</var> −
            <var>position</var>)。
          </li>

          <li>如果<var>index</var> mod 2 = 0，则将对<var>positions</var>追加对&lt;<var>position</var>, <var>position</var> +
            <var>dashlength</var>>。
          </li>

          <li>将<var>position</var>设为<var>position</var> + <var>dashlength</var>。</li>
        </ol>
      </li>

      <li>返回<var>positions</var>。</li>
    </ol>

    <p>给定子路径上某一<var>位置</var>的起始和结束<dfn id="TermCapShape" data-dfn-type="dfn" data-export="">端点形状</dfn>的确定方法如下：</p>

    <ol class="algorithm">
      <li>如果<a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a>为<span
          class="prop-value">butt</span>，则返回一个空形状。</li>

      <li>否则，如果<a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a>为<span
          class="prop-value">round</span>，则：
        <ol>
          <li>如果这是一个起始端点，则返回一个直径为<a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>的半圆，其位置如下：
            <ul>
              <li class="ready-for-wider-review">半圆相对于的子路径是从距离<var>position</var>开始的子路径。</li>
              <li>其直边与子路径在距离<var>position</var>处的垂直线平行。</li>
              <li>其直边的中点位于沿子路径在距离<var>position</var>处的点。</li>
              <li>从弧的中点到直边中点的方向与子路径在距离<var>position</var>处的方向相同。</li>
            </ul>
          </li>
          <li>否则，这是一个结束端点。返回一个直径为<a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>的半圆，其位置如下：
            <ul>
              <li class="ready-for-wider-review">半圆相对于的子路径是到距离<var>position</var>结束的子路径。</li>
              <li>其直边与子路径在距离<var>position</var>处的垂直线平行。</li>
              <li>其直边的中点位于沿子路径在距离<var>position</var>处的点。</li>
              <li>从直边的中点到弧的中点的方向与子路径的方向相同。</li>
            </ul>
          </li>
        </ol>
      </li>

      <li>否则，<a class="property" href="painting.html#StrokeLinecapProperty">stroke-linecap</a>为<span
          class="prop-value">square</span>：
        <ol>
          <li>如果这是一个起始端点，则返回一个边长为<a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>和<a
              class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> / 2的矩形，其位置如下：
            <ul>
              <li>其长边<var>A</var>和<var>B</var>与子路径在距离<var>position</var>处的垂直线平行。</li>
              <li><var>A</var>的中点位于<var>start</var>。</li>
              <li>从<var>B</var>的中点到<var>A</var>的中点的方向与子路径在距离<var>position</var>处的方向相同。</li>
            </ul>
          </li>
          <li>否则，这是一个结束端点。返回一个边长为<a class="property" href="painting.html#StrokeWidthProperty">stroke-width</a>和<a
              class="property" href="painting.html#StrokeWidthProperty">stroke-width</a> / 2的矩形，其位置如下：
            <ul>
              <li>其长边<var>A</var>和<var>B</var>与子路径在距离<var>position</var>处的垂直线平行。</li>
              <li><var>A</var>的中点位于<var>end</var>。</li>
              <li>从<var>A</var>的中点到<var>B</var>的中点的方向与子路径在距离<var>position</var>处的方向相同。</li>
            </ul>
          </li>
        </ol>
      </li>
    </ol>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linecap-construction.svg"
        alt="展示如何构造三种类型线条端点的图像">
      <p class="caption">在具有单个非零长度子路径的路径上使用的三种不同<a class="property"
          href="painting.html#StrokeLinecapProperty">stroke-linecap</a>值。白线是路径本身，厚灰色区域是笔划。在顶部行中，绿色线条表示路径端点的切线的垂直线，粉色区域是端点形状。底行展示了没有突出垂直线和端点形状的笔划。
      </p>
    </div>

    <p>给定子路径的一段的<dfn id="TermLineJoinShape" data-dfn-type="dfn" data-export="">线连接形状</dfn>的确定如下：</p>

    <ol class="algorithm">
      <li>让<var>P</var>为段末端的点。</li>

      <li>如果段末端的单位切向量与后续段的单位切向量相等，则返回一个空形状。
        <p class="note">这意味着例如<span class="attr-value">'M 100,100 h 100 h 100'</span>不会在两个直线段之间产生线连接形状，但<span
            class="attr-value">'M 100,100 h 100 h -100'</span>会。</p>
      </li>

      <li>让<var>A</var>为与段末端切线平行的线。</li>
      <li>让<var>B</var>为与后续段切线平行的线。</li>

      <li>让<var>A<sub>left</sub></var>和<var>A<sub>right</sub></var>为与<var>A</var>平行的线，距离为<a class="property"
          href="painting.html#StrokeWidthProperty">线宽</a> / 2，分别位于相对于子路径方向的左侧和右侧。</li>

      <li>让<var>B<sub>left</sub></var>和<var>B<sub>right</sub></var>为与<var>B</var>平行的线，距离为<a class="property"
          href="painting.html#StrokeWidthProperty">线宽</a> / 2，分别位于相对于子路径方向的左侧和右侧。</li>

      <li>
        让<var>P</var><sub>1</sub>、<var>P</var><sub>2</sub>和<var>P</var><sub>3</sub>为如下所述的点：

        <ol>
          <li>
            如果<var>A</var>和<var>B</var>之间的较小角度位于这些线的右侧，考虑子路径的方向，则<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>为位于<var>A<sub>left</sub></var>和<var>B<sub>left</sub></var>上距离<var>P</var>最近的点，而<var>P</var><sub>3</sub>为<var>A<sub>left</sub></var>和<var>B<sub>left</sub></var>的交点。
          </li>

          <li>
            否则，<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>为位于<var>A<sub>right</sub></var>和<var>B<sub>right</sub></var>上距离<var>P</var>最近的点，而<var>P</var><sub>3</sub>为<var>A<sub>right</sub></var>和<var>B<sub>right</sub></var>的交点。
          </li>
        </ol>
      </li>

      <li>让<var>bevel</var>为由三点<var>P</var>、<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>形成的三角形。</li>

      <li>如果<a class="property" href="painting.html#StrokeLinejoinProperty">线连接样式</a>为<span
          class="prop-value">圆角</span>，则返回<var>bevel</var>和以<var>P</var>为中心、直径为<a class="property"
          href="painting.html#StrokeWidthProperty">线宽</a>的圆弧的并集，圆弧的两个端点为<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>。
      </li>

      <li>如果<a class="property" href="painting.html#StrokeLinejoinProperty">线连接样式</a>为<span
          class="prop-value">弧</span>，则找到在<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>处与边缘切的圆，且在这些点处的曲率与边缘相同（见下文）。如果两个曲率均为零，则转到<span
          class="prop-value">斜接剪裁</span>。如果任一曲率大于2/(线宽)，则回退到<span class="prop-value">圆角</span>。

        扩展使用这些圆（或在曲率为零的情况下的线）来延伸边缘。

        如果两个圆（或圆与线）不相交，则调整两个圆的半径，使它们相交（见下文）。

        线连接区域由连接<var>P</var>与<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>的线以及由圆（或弧与线）定义的弧段组成，弧段从离<var>P</var>最近的交点延伸至<var>P</var><sub>1</sub>和<var>P</var><sub>2</sub>。

        接下来计算<em>斜接限制</em>，如<a class="property"
          href="painting.html#StrokeMiterlimitProperty">斜接限制</a>部分所定义。剪裁任何超出斜接限制的线连接区域。返回结果区域。

        请注意，曲率在用户空间中计算，在应用任何变换之前。</li>

      <li>
        如果<a class="property" href="painting.html#StrokeLinejoinProperty">线连接样式</a>为<span
          class="prop-value">斜接</span>或<span
          class="prop-value">斜接剪裁</span>，则线连接区域为<var>bevel</var>与由三点<var>P</var><sub>1</sub>、<var>P</var><sub>2</sub>和<var>P</var><sub>3</sub>形成的三角形的并集。
      </li>

      <li>
        让<var>θ</var>为<var>A</var>与<var>B</var>之间的角度。如果1 / sin(<var>θ</var> / 2) ≤ <a class="property"
          href="painting.html#StrokeMiterlimitProperty">斜接限制</a>，则返回线连接区域。</li>

      <li>
        如果<a class="property" href="painting.html#StrokeLinejoinProperty">线连接样式</a>为<span
          class="prop-value">斜接剪裁</span>，则剪裁任何超出斜接限制的线连接区域并返回此区域。</li>

      <li>返回<var>bevel</var>。</li>
    </ol>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction.svg"
        alt="显示构造圆角线连接的线条和点的图像。">
      <p class="caption">圆角线连接形状的构造，显示为粉红色。白线为原始路径，包含两个汇聚到一点的段，灰色区域为笔画。</p>
    </div>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-arcs.svg"
        alt="显示构造弧线连接的线条和点的图像。">
      <p class="caption">弧线连接形状的构造，显示为粉红色。白线为原始路径，包含两个汇聚到一点的段，深灰色区域为笔画。虚线表示在连接处与段切的圆。橄榄绿色圆圈（与虚线圆圈同心）定义连接形状。</p>
    </div>

    <h3 id="CurvatureCalculation" class="heading">13.5.8. 计算<span class="prop-value">弧</span>的 'stroke-linejoin'<a
        class="self-link" href="#CurvatureCalculation"></a></h3>

    <p><span class="prop-value">弧</span> <a class="property"
        href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
      需要找到与路径段末端的外部笔划边缘相切且具有相同曲率的圆。要找到其中一个圆，首先计算路径段末端的曲率 <var>κ</var>（见下文）。接下来，找到与该曲率对应的圆的半径：<var>r</var> =
      1/<var>κ</var>。增加或减少半个笔划宽度以考虑笔划：<var>r<sub>c</sub></var> = <var>r</var> ± ½ 笔划宽度。圆心将位于路径末端法线方向上，距离外部笔划边缘
      <var>r<sub>c</sub></var> 的位置。
    </p>

    <p>对于直线：曲率为零。通过一条直线延伸外部笔划边缘。</p>

    <p>对于椭圆弧：</p>

    <div role="math" aria-describedby="math-curvature-of-ellipse">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mi>κ<!-- κ --></mi>
        <mo stretchy="false">(</mo>
        <mi>t</mi>
        <mo stretchy="false">)</mo>
        <mo>=</mo>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mrow class="MJX-TeXAtom-ORD">
              <msub>
                <mi>r</mi>
                <mi>x</mi>
              </msub>
              <msub>
                <mi>r</mi>
                <mi>y</mi>
              </msub>
            </mrow>
            <mrow class="MJX-TeXAtom-ORD">
              <mo stretchy="false">(</mo>
              <msubsup>
                <mi>r</mi>
                <mi>x</mi>
                <mn>2</mn>
              </msubsup>
              <msup>
                <mi>sin</mi>
                <mn>2</mn>
              </msup>
              <mo>⁡<!-- ⁡ --></mo>
              <mi>t</mi>
              <mo>+</mo>
              <msubsup>
                <mi>r</mi>
                <mi>y</mi>
                <mn>2</mn>
              </msubsup>
              <msup>
                <mi>cos</mi>
                <mn>2</mn>
              </msup>
              <mo>⁡<!-- ⁡ --></mo>
              <mi>t</mi>
              <msup>
                <mo stretchy="false">)</mo>
                <mrow class="MJX-TeXAtom-ORD">
                  <mn>3</mn>
                  <mrow class="MJX-TeXAtom-ORD">
                    <mo>/</mo>
                  </mrow>
                  <mn>2</mn>
                </mrow>
              </msup>
            </mrow>
          </mfrac>
        </mrow>
      </math>
      <pre
        id="math-curvature-of-ellipse">$$\kappa(t) = {{r_x r_y}\over{(r_x^2 \sin^2 t + r_y^2 \cos^2 t)^{3/2}}}$$</pre>
    </div>

    <p>其中：</p>

    <div role="math" aria-describedby="math-curvature-t">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mi>t</mi>
        <mo>=</mo>
        <mi>arctan</mi>
        <mo>⁡<!-- ⁡ --></mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mrow class="MJX-TeXAtom-ORD">
              <mfrac>
                <msub>
                  <mi>r</mi>
                  <mi>y</mi>
                </msub>
                <msub>
                  <mi>r</mi>
                  <mi>x</mi>
                </msub>
              </mfrac>
            </mrow>
            <mi>tan</mi>
            <mo>⁡<!-- ⁡ --></mo>
            <mi>θ<!-- θ --></mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </math>
      <pre id="math-curvature-t">$$t = \arctan \left( {r_y \over r_x} \tan \theta \right)$$</pre>
    </div>

    <p>在弧段的开始或结束处，参数 <var>θ</var> 可以通过使用 <a href="implnote.html#ArcImplementationNotes">椭圆弧实现说明</a>
      中的公式找到。（注意，一些渲染器在渲染之前将椭圆弧转换为三次 Bézier 曲线，因此这里的方程可能不需要。）</p>

    <p>对于二次 Bézier：</p>

    <div role="math" aria-describedby="math-quadratic-start">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mi>κ<!-- κ --></mi>
        <mo stretchy="false">(</mo>
        <mn>0</mn>
        <mo stretchy="false">)</mo>
        <mo>=</mo>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mn>1</mn>
            <mn>2</mn>
          </mfrac>
        </mrow>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mrow>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>0</mn>
              </msub>
              <mo stretchy="false">)</mo>
              <mo>×<!-- × --></mo>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo stretchy="false">)</mo>
            </mrow>
            <mrow>
              <mrow class="MJX-TeXAtom-ORD">
                <mo stretchy="false">|</mo>
              </mrow>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>0</mn>
              </msub>
              <msup>
                <mrow class="MJX-TeXAtom-ORD">
                  <mo stretchy="false">|</mo>
                </mrow>
                <mn>3</mn>
              </msup>
            </mrow>
          </mfrac>
        </mrow>
      </math>
      <pre
        id="math-quadratic-start">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
    </div>

    <div role="math" aria-describedby="math-quadratic-end">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mi>κ<!-- κ --></mi>
        <mo stretchy="false">(</mo>
        <mn>1</mn>
        <mo stretchy="false">)</mo>
        <mo>=</mo>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mn>1</mn>
            <mn>2</mn>
          </mfrac>
        </mrow>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mrow>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo stretchy="false">)</mo>
              <mo>×<!-- × --></mo>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>0</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo stretchy="false">)</mo>
            </mrow>
            <mrow>
              <mrow class="MJX-TeXAtom-ORD">
                <mo stretchy="false">|</mo>
              </mrow>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <msup>
                <mrow class="MJX-TeXAtom-ORD">
                  <mo stretchy="false">|</mo>
                </mrow>
                <mn>3</mn>
              </msup>
            </mrow>
          </mfrac>
        </mrow>
      </math>
      <pre id="math-quadratic-end">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
    </div>

    <p>其中 <var>κ(0)</var> 和 <var>κ(1)</var> 分别是路径段开始和结束处的带符号曲率，<var>P</var> 是定义二次 Bézier 的三个点。</p>

    <p>对于三次 Bézier：</p>

    <div role="math" aria-describedby="math-cubic-start">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mi>κ<!-- κ --></mi>
        <mo stretchy="false">(</mo>
        <mn>0</mn>
        <mo stretchy="false">)</mo>
        <mo>=</mo>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mn>2</mn>
            <mn>3</mn>
          </mfrac>
        </mrow>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mrow>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>0</mn>
              </msub>
              <mo stretchy="false">)</mo>
              <mo>×<!-- × --></mo>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo stretchy="false">)</mo>
            </mrow>
            <mrow>
              <mrow class="MJX-TeXAtom-ORD">
                <mo stretchy="false">|</mo>
              </mrow>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>0</mn>
              </msub>
              <msup>
                <mrow class="MJX-TeXAtom-ORD">
                  <mo stretchy="false">|</mo>
                </mrow>
                <mn>3</mn>
              </msup>
            </mrow>
          </mfrac>
        </mrow>
      </math>
      <pre id="math-cubic-start">$$\kappa(0) = {2\over3}{(P_1-P_0)\times((P_0-P_1)+(P_2-P_1))\over|P_1-P_0|^3}$$</pre>
    </div>

    <div role="math" aria-describedby="math-cubic-end">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mi>κ<!-- κ --></mi>
        <mo stretchy="false">(</mo>
        <mn>1</mn>
        <mo stretchy="false">)</mo>
        <mo>=</mo>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mn>2</mn>
            <mn>3</mn>
          </mfrac>
        </mrow>
        <mrow class="MJX-TeXAtom-ORD">
          <mfrac>
            <mrow>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>3</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <mo stretchy="false">)</mo>
              <mo>×<!-- × --></mo>
              <mo stretchy="false">(</mo>
              <msub>
                <mi>P</mi>
                <mn>1</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <mo stretchy="false">)</mo>
            </mrow>
            <mrow>
              <mrow class="MJX-TeXAtom-ORD">
                <mo stretchy="false">|</mo>
              </mrow>
              <msub>
                <mi>P</mi>
                <mn>3</mn>
              </msub>
              <mo>−<!-- − --></mo>
              <msub>
                <mi>P</mi>
                <mn>2</mn>
              </msub>
              <msup>
                <mrow class="MJX-TeXAtom-ORD">
                  <mo stretchy="false">|</mo>
                </mrow>
                <mn>3</mn>
              </msup>
            </mrow>
          </mfrac>
        </mrow>
      </math>
      <pre id="math-cubic-end">$$\kappa(1) = {2\over3}{(P_3-P_2)\times((P_1-P_2)+(P_3-P_2))\over|P_3-P_2|^3}$$</pre>
    </div>

    <p>其中 <var>κ(0)</var> 和 <var>κ(1)</var> 分别是路径段开始和结束处的带符号曲率，<var>P</var> 是定义三次 Bézier 的四个点。注意，如果
      <var>P<sub>0</sub></var> 和 <var>P<sub>1</sub></var>，或 <var>P<sub>2</sub></var> 和 <var>P<sub>3</sub></var>
      是退化的，则曲率将是无限的，应使用直线构建连接。
    </p>

    <h3 id="ArcsLinejoinFallback" class="heading">13.5.9. 调整 <span class="prop-value">弧</span> 的 'stroke-linejoin'
      圆形，当初始圆形不相交时<a class="self-link" href="#ArcsLinejoinFallback"></a></h3>

    <p class="annotation">
      回退行为在 <a href="https://www.w3.org/2016/02/03-svg-minutes.html#item02">2016 年悉尼 F2F</a> 上解决。它提供了回退与非回退状态之间的平滑过渡。
    </p>

    <p>
      当为 <span class="prop-value">弧</span> 的初始圆形 <a class="property"
        href="painting.html#StrokeLinejoinProperty">stroke-linejoin</a>
      计算的圆形不相交时，需要通过相同幅度调整两个半径（移动圆心以保持圆形与偏移路径相切），直到圆形恰好接触。需要考虑两种情况。第一种情况是一个圆包围另一个圆。在这种情况下，较大的圆减小尺寸，而较小的圆增大尺寸：
    </p>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-fallback.svg"
        alt="展示当原始偏移圆形不相交时计算的弧线连接的图像。">
      <p class="caption">
        构建的弧线连接形状，显示为粉色。白线是原始路径，深灰区域是笔画。虚线显示与连接段相切并具有段的曲率的圆。注意，圆形不相交。通过相同幅度调整原始圆的半径构造两个新圆，较大的圆变小，较小的圆变大，直到新圆刚好接触，如橄榄绿色圆所示。这些新圆定义了连接形状。
      </p>
    </div>

    <p>
      第二种情况是圆之间没有重叠。在这种情况下，两个圆的半径都增加相同的量：
    </p>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-fallback2.svg"
        alt="展示当原始偏移圆形不相交时计算的弧线连接的图像。">
      <p class="caption">
        构建的弧线连接形状，显示为粉色。白线是原始路径，深灰区域是笔画。虚线显示与连接段相切并具有段的曲率的圆。注意，它们不相交。通过增加原始圆的半径相同的量构造两个新圆，直到新圆刚好接触，如橄榄绿色圆所示。这些新圆定义了连接形状。
      </p>
    </div>

    <p>
      如果在这种情况下，连接处偏移路径的切线平行，则圆形无法调整以使其接触。连接应构造为一个矩形，宽度为笔画宽度，长度为笔画宽度乘以 <a class="property"
        href="painting.html#StrokeMiterlimitProperty">stroke-miterlimit</a> 的一半：
    </p>

    <div class="figure">
      <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/linejoin-construction-fallback3.svg"
        alt="展示当原始偏移圆形不相交时计算的弧线连接的图像。">
      <p class="caption">
        构建的弧线连接形状，显示为粉色。白线是原始路径，有两个段形成一个点，深灰区域是笔画。虚线显示与连接段相切并具有段的曲率的圆。注意，它们不相交。即使圆的半径增加到无穷大，圆也不会相交。连接则是一个矩形，长度由斜接限制决定（以垂直虚线表示）。
      </p>
    </div>

    <p class="note">
      实现回退算法有几种方法。第一种方法是通过对半径变化幅度的递归试错。第二种是通过利用 <em>接触圆条件</em> 的精确计算以及圆心必须保持在连接处路径段法线上的约束。这导致一个二次方程，其中一个解是所需的半径变化。
    </p>

  </div>

  <h2 id="PaintingVectorEffects" class="heading">13.6. 向量效果<a class="self-link" href="#PaintingVectorEffects"></a></h2>

  <p>本章解释与绘制相关的 <a class="property" href="coords.html#VectorEffectProperty">vector-effect</a>。有关 <a class="property"
      href="coords.html#VectorEffectProperty">vector-effect</a> 的视角，请参考 <a href="coords.html#VectorEffects">此处</a>。</p>

  <dl>
    <dt class="prop-value" id="non-scaling-stroke">non-scaling-stroke</dt>
    <dd>修改对象的描边方式。通常，描边涉及在当前 <a href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">用户坐标系</a>
      中计算形状路径的描边轮廓并用描边油漆（颜色或渐变）填充该轮廓。使用 non-scaling-stroke 向量效果时，描边轮廓应在“主机”坐标空间中计算，而不是在 <a
        href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">用户坐标系</a> 中。更准确地说：用户代理建立了一个主机坐标空间，在 SVG
      Tiny 1.2 中，它始终与“屏幕坐标空间”相同。描边轮廓的计算方法如下：首先，将形状的路径转换到主机坐标空间。描边轮廓在主机坐标空间中计算。然后，结果轮廓被转换回 <a
        href="https://drafts.csswg.org/css-transforms/#user-coordinate-system">用户坐标系</a>。（描边轮廓始终在当前用户坐标系中用描边油漆填充。）这种修改的结果是，描边宽度不依赖于元素的变换（包括非均匀缩放和剪切变换）和缩放级别。
    </dd>
  </dl>

  <div class="ready-for-wider-review">
    <h2 id="Markers" class="heading">13.7. 标记<a class="self-link" href="#Markers"></a></h2>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 要求：</th>
          <td>改善标记。</td>
        </tr>
        <tr>
          <th>决议：</th>
          <td><a href="https://www.w3.org/2011/10/27-svg-irc#T18-12-30">我们将改善 SVG 2 的标记。</a></td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>解决作者在 SVG 标记中遇到的常见问题。</td>
        </tr>
        <tr>
          <th>负责人：</th>
          <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3286">ACTION-3286</a>)</td>
        </tr>
      </table>
    </div>

    <p>标记是沿着任何 <a href="shapes.html#TermShapeElement">形状</a> 元素特定位置绘制的图形对象。</p>

    <p><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 和 <a class="property"
        href="painting.html#MarkerEndProperty">marker-end</a> 属性可用于在 <a href="shapes.html#TermShapeElement">形状</a>
      的第一个和最后一个顶点放置标记，而 <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a>
      属性可用于在所有其他顶点（除了第一个和最后一个）放置标记。<a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 和 <a
        class="property" href="painting.html#MarkerEndProperty">marker-end</a> 例如可以用来在路径上添加箭头。使用这些属性放置的标记称为 <dfn
        id="TermVertexMarker" data-dfn-type="dfn" data-export="">顶点标记</dfn>。</p>

    <p class="note">在 SVG 2 中，顶点标记是唯一可用的标记类型。其他规范将添加新类型的标记。</p>

    <p>标记的图形由 <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 元素定义。<a
        class="property" href="painting.html#MarkerStartProperty">marker-start</a>、<a class="property"
        href="painting.html#MarkerEndProperty">marker-end</a> 和 <a class="property"
        href="painting.html#MarkerMidProperty">marker-mid</a> 属性统称为 <dfn id="TermMarkerProperties" data-dfn-type="dfn"
        data-export="">标记属性</dfn>，引用 <span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span> 元素。</p>

    <p>标记可以被动画，并且与 <span class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span>
      元素一样，动画效果将在文档中标记的所有当前使用中显示。</p>

    <p>给定元素上的标记按以下顺序绘制，从底部到顶部：</p>

    <ul>
      <li>由 <a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 指定的任何标记</li>

      <li>按其在路径上的位置顺序的 <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a> 标记</li>

      <li>由 <a class="property" href="painting.html#MarkerEndProperty">marker-end</a> 指定的任何标记</li>
    </ul>


    <h3 id="MarkerElement" class="heading">13.7.1. <span class="element-name">‘marker’</span> 元素<a class="self-link"
        href="#MarkerElement"></a></h3>

    <div class="element-summary">
      <div class="element-summary-name"><span class="element-name">‘<dfn data-dfn-type="element" data-export=""
            id="elementdef-marker">marker</dfn>’</span></div>
      <dl>
        <dt>类别：</dt>
        <dd><a href="struct.html#TermContainerElement">容器元素</a>， <a
            href="render.html#TermNeverRenderedElement">从不渲染的元素</a></dd>
        <dt>内容模型：</dt>
        <dd>任何数量的以下元素，顺序不限：<ul class="no-bullets">
            <li><a href="https://svgwg.org/specs/animations/#TermAnimationElement">动画元素</a><span class="expanding"> —
                <span class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>， <span
                  class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#AnimateMotionElement"><span>animateMotion</span></a>’</span>，
                <span class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#AnimateTransformElement"><span>animateTransform</span></a>’</span>，
                <span class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#DiscardElement"><span>discard</span></a>’</span>， <span
                  class="element-name">‘<a
                    href="https://svgwg.org/specs/animations/#SetElement"><span>set</span></a>’</span></span></li>
            <li><a href="struct.html#TermDescriptiveElement">描述性元素</a><span class="expanding"> — <span
                  class="element-name">‘<a href="struct.html#DescElement"><span>desc</span></a>’</span>， <span
                  class="element-name">‘<a href="struct.html#TitleElement"><span>title</span></a>’</span>， <span
                  class="element-name">‘<a href="struct.html#MetadataElement"><span>metadata</span></a>’</span></span>
            </li>
            <li><a href="painting.html#TermPaintServerElement">绘画服务器元素</a><span class="expanding"> — <span
                  class="element-name">‘<a
                    href="pservers.html#LinearGradientElement"><span>linearGradient</span></a>’</span>， <span
                  class="element-name">‘<a
                    href="pservers.html#RadialGradientElement"><span>radialGradient</span></a>’</span>， <span
                  class="element-name">‘<a href="pservers.html#PatternElement"><span>pattern</span></a>’</span></span>
            </li>
            <li><a href="shapes.html#TermShapeElement">形状元素</a><span class="expanding"> — <span class="element-name">‘<a
                    href="shapes.html#CircleElement"><span>circle</span></a>’</span>， <span class="element-name">‘<a
                    href="shapes.html#EllipseElement"><span>ellipse</span></a>’</span>， <span class="element-name">‘<a
                    href="shapes.html#LineElement"><span>line</span></a>’</span>， <span class="element-name">‘<a
                    href="paths.html#PathElement"><span>path</span></a>’</span>， <span class="element-name">‘<a
                    href="shapes.html#PolygonElement"><span>polygon</span></a>’</span>， <span class="element-name">‘<a
                    href="shapes.html#PolylineElement"><span>polyline</span></a>’</span>， <span class="element-name">‘<a
                    href="shapes.html#RectElement"><span>rect</span></a>’</span></span></li>
            <li><a href="struct.html#TermStructuralElement">结构元素</a><span class="expanding"> — <span
                  class="element-name">‘<a href="struct.html#DefsElement"><span>defs</span></a>’</span>， <span
                  class="element-name">‘<a href="struct.html#GElement"><span>g</span></a>’</span>， <span
                  class="element-name">‘<a href="struct.html#SVGElement"><span>svg</span></a>’</span>， <span
                  class="element-name">‘<a href="struct.html#SymbolElement"><span>symbol</span></a>’</span>， <span
                  class="element-name">‘<a href="struct.html#UseElement"><span>use</span></a>’</span></span></li>
          </ul><span class="element-name"><a href="linking.html#AElement"><span>a</span></a></span>， <span
            class="element-name"><a href="embedded.html#HTMLElements"><span>audio</span></a></span>， <span
            class="element-name"><a href="embedded.html#HTMLElements"><span>canvas</span></a></span>， <span
            class="element-name"><a
              href="https://drafts.fxtf.org/css-masking-1/#ClipPathElement"><span>clipPath</span></a></span>， <span
            class="element-name"><a
              href="https://drafts.fxtf.org/filter-effects/#FilterElement"><span>filter</span></a></span>， <span
            class="element-name"><a href="embedded.html#ForeignObjectElement"><span>foreignObject</span></a></span>，
          <span class="element-name"><a href="embedded.html#HTMLElements"><span>iframe</span></a></span>， <span
            class="element-name"><a href="embedded.html#ImageElement"><span>image</span></a></span>， <span
            class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>， <span
            class="element-name"><a
              href="https://drafts.fxtf.org/css-masking-1/#MaskElement"><span>mask</span></a></span>， <span
            class="element-name"><a href="interact.html#ScriptElement"><span>script</span></a></span>， <span
            class="element-name"><a href="styling.html#StyleElement"><span>style</span></a></span>， <span
            class="element-name"><a href="struct.html#SwitchElement"><span>switch</span></a></span>， <span
            class="element-name"><a href="text.html#TextElement"><span>text</span></a></span>， <span
            class="element-name"><a href="embedded.html#HTMLElements"><span>video</span></a></span>， <span
            class="element-name"><a href="linking.html#ViewElement"><span>view</span></a></span>
        </dd>
        <dt>属性：</dt>
        <dd>
          <ul class="no-bullets">
            <li><a href="struct.html#TermCoreAttribute">核心属性</a><span class="expanding"> — <span class="attr-name">‘<a
                    href="struct.html#IDAttribute"><span>id</span></a>’</span>， <span class="attr-name">‘<a
                    href="struct.html#SVGElementTabindexAttribute"><span>tabindex</span></a>’</span>， <span
                  class="attr-name">‘<a href="struct.html#LangAttribute"><span>lang</span></a>’</span>， <span
                  class="attr-name">‘<a href="struct.html#XMLSpaceAttribute"><span>xml:space</span></a>’</span>， <span
                  class="attr-name">‘<a href="styling.html#ClassAttribute"><span>class</span></a>’</span>， <span
                  class="attr-name">‘<a href="styling.html#StyleAttribute"><span>style</span></a>’</span></span></li>
            <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">全局事件
                属性</a><span class="expanding"> — <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>oncancel</span></a>’</span>, <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>oncanplay</span></a>’</span>, <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>oncanplaythrough</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onchange</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onclick</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onclose</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>oncuechange</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondblclick</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondrag</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondragend</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondragenter</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondragexit</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondragleave</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondragover</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondragstart</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondrop</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ondurationchange</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onemptied</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onended</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onerror</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onfocus</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>oninput</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>oninvalid</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onkeydown</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onkeypress</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onkeyup</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onload</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onloadeddata</span></a>’</span>,
                <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>onloadedmetadata</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onloadstart</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmousedown</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmouseenter</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmouseleave</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmousemove</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmouseout</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmouseover</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmouseup</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onmousewheel</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onpause</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onplay</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onplaying</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onprogress</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onratechange</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>onreset</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onresize</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onscroll</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onseeked</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onseeking</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onselect</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onshow</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onstalled</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onsubmit</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onsuspend</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>ontimeupdate</span></a>’</span>,
                <span class="attr-name">‘<a href="interact.html#EventAttributes"><span>ontoggle</span></a>’</span>,
                <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>onvolumechange</span></a>’</span>, <span
                  class="attr-name">‘<a href="interact.html#EventAttributes"><span>onwaiting</span></a>’</span></span>
            </li>
            <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#documentandelementeventhandlers">文档
                元素事件属性</a><span class="expanding"> — <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>oncopy</span></a>’</span>， <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>oncut</span></a>’</span>， <span class="attr-name">‘<a
                    href="interact.html#EventAttributes"><span>onpaste</span></a>’</span></span></li>
            <li><a href="styling.html#TermPresentationAttribute">表现属性</a><span class="expanding"> —
              </span></li>
            <li><span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span></li>
            <li><span class="attr-name">‘<a
                  href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span></li>
            <li><span class="attr-name">‘<a
                  href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span></li>
            <li><span class="attr-name">‘<a
                  href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span></li>
            <li><span class="attr-name">‘<a
                  href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span></li>
            <li><span class="attr-name">‘<a
                  href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span></li>
            <li><span class="attr-name">‘<a
                  href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span></li>
            <li><span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span></li>
          </ul>
        </dd>
        <dt>DOM 接口：</dt>
        <dd>
          <ul class="no-bullets">
            <li><a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a></li>
          </ul>
        </dd>
      </dl>
    </div>

    <p>‘<span class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>’ 元素定义了用于在 <a
        href="shapes.html#TermShapeElement">形状</a> 上绘制标记的图形。</p>

    <p id="MarkerAttributes"><em>属性定义：</em></p>

    <dl class="attrdef-list">
      <dt>

        <table class="attrdef def">
          <tr>
            <th>名称</th>
            <th>值</th>
            <th>初始值</th>
            <th>可动画</th>
          </tr>
          <tr>
            <td><dfn id="MarkerUnitsAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                data-export="">markerUnits</dfn></td>
            <td>strokeWidth | userSpaceOnUse</td>
            <td>strokeWidth</td>
            <td>是</td>
          </tr>
        </table>

      </dt>
      <dd>

        <p>‘<span class="attr-name"><a href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a></span>’
          属性定义了属性 <span class="attr-name"><a
              href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a></span>、<span class="attr-name"><a
              href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a></span> 和 <span
            class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span> 内容的坐标系统。值的含义如下：
        </p>

        <dl>
          <dt><span class="attr-value">strokeWidth</span></dt>
          <dd><span class="attr-name"><a
                href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a></span>、<span class="attr-name"><a
                href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a></span> 和 <span
              class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>
            的内容在坐标系统中具有一个单位，等于引用该标记的元素的绘制笔划宽度的用户单位。</dd>

          <dt><span class="attr-value">userSpaceOnUse</span></dt>
          <dd><span class="attr-name"><a
                href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a></span>、<span class="attr-name"><a
                href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a></span> 和 <span
              class="element-name"><a href="painting.html#MarkerElement"><span>marker</span></a></span>
            的内容在引用该标记的元素的当前用户坐标系统中具有值。</dd>
        </dl>

      </dd>
      <dt>

        <p class="note">
          当 ‘<span class="attr-name"><a href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a></span>’
          的值为 <span class="attr-value">strokeWidth</span> 时，标记的大小相对于在 <a class="property"
            href="painting.html#StrokeWidthProperty">stroke-width</a> 上应用的任何变换后的宽度。这意味着，例如，具有值 <span
            class="attr-value">non-scaling-stroke</span> 的 <a class="property"
            href="coords.html#VectorEffectProperty">vector-effect</a> 属性将导致标记也不缩放。
        </p>

        <table class="attrdef def">
          <tr>
            <th>名称</th>
            <th>值</th>
            <th>初始值</th>
            <th>可动画</th>
          </tr>
          <tr>
            <td><dfn id="MarkerWidthAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                data-export="">markerWidth</dfn>、<dfn id="MarkerHeightAttribute" data-dfn-type="element-attr"
                data-dfn-for="marker" data-export="">markerHeight</dfn></td>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> | <a
                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
            <td>3</td>
            <td>是</td>
          </tr>
        </table>

      </dt>
      <dd>

        <p>‘<span class="attr-name"><a href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a></span>’ 和
          ‘<span class="attr-name"><a href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a></span>’
          属性表示 SVG 视口的大小，标记根据 <span class="attr-name"><a
              href="coords.html#ViewBoxAttribute"><span>viewBox</span></a></span> 和 <span class="attr-name"><a
              href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a></span>
          属性被适配。任何一个属性的值为零将导致标记不被渲染。任何一个属性的负值是错误的（见 <a href="conform.html#ErrorProcessing">错误处理</a>）。
        </p>

      </dd>
      <dt>

        <table class="attrdef def">
          <tr>
            <th>名称</th>
            <th>值</th>
            <th>初始值</th>
            <th>可动画</th>
          </tr>
          <tr>
            <td><dfn id="MarkerElementRefXAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                data-export="">refX</dfn></td>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> | <a
                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> | left | center | right</td>
            <td>0</td>
            <td>是</td>
          </tr>
          <tr>
            <td><dfn id="MarkerElementRefYAttribute" data-dfn-type="element-attr" data-dfn-for="marker"
                data-export="">refY</dfn></td>
            <td><a href="https://www.w3.org/TR/css-values/#typedef-length-percentage">&lt;length-percentage></a> | <a
                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> | top | center | bottom</td>
            <td>0</td>
            <td>是</td>
          </tr>
        </table>

      </dt>
      <dd>

        <p class="note">
          新增于 SVG 2: 几何关键字（与 <span class="element-name">‘<a
              href="struct.html#SymbolElement"><span>symbol</span></a>’</span> 的用法匹配）。
        </p>
        <p class="annotation">
          我们将为 refX/refY 在标记/符号上添加 top/center/bottom、left/center/right 关键字。解决于
          <a href="https://www.w3.org/2014/08/26-svg-minutes.html#item07">伦敦 F2F</a>。值受
          <a href="https://www.w3.org/TR/css3-background/#the-background-position">'background-position'</a> 启发。
        </p>

        <p>‘<span class="attr-name">‘<a href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span>
          和 <span class="attr-name">‘<a href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span>
          属性定义了标记的参考点，标记将被精确放置在 <a href="shapes.html#TermShapeElement">形状</a> 上。
          长度和数字必须被解释为在应用 <span class="attr-name">‘<a
              href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span> 和 <span class="attr-name">‘<a
              href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>
          属性后的标记内容的坐标系统中。
          百分比值必须被解释为在 <span class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>
          宽度的百分比对于 <span class="attr-name">‘<a
              href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span> 或者 <span
            class="attr-name">‘<a href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span> 的高度百分比。
        </p>
        <p>关键字值必须评估为以下百分比：</p>
        <table class="data compact">
          <caption>refX 和 refY 关键字到百分比的映射。</caption>
          <thead>
            <tr>
              <th>关键字</th>
              <th>百分比等价</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>left</td>
              <td>0%</td>
            </tr>
            <tr>
              <td>center</td>
              <td>50%</td>
            </tr>
            <tr>
              <td>right</td>
              <td>100%</td>
            </tr>
            <tr>
              <td>top</td>
              <td>0%</td>
            </tr>
            <tr>
              <td>bottom</td>
              <td>100%</td>
            </tr>
          </tbody>
        </table>

      </dd>
      <dt>

        <table class="attrdef def">
          <tr>
            <th>名称</th>
            <th>值</th>
            <th>初始值</th>
            <th>可动画</th>
          </tr>
          <tr>
            <td><dfn id="OrientAttribute" data-dfn-type="element-attr" data-dfn-for="marker" data-export="">orient</dfn>
            </td>
            <td>auto | auto-start-reverse | <a
                href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a> | <a
                href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
            <td>0</td>
            <td>是（非累加）</td>
          </tr>
        </table>

      </dt>
      <dd>

        <p>‘<span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span>
          属性指示标记在其位置上放置时如何旋转，位于 <a href="shapes.html#TermShapeElement">形状</a> 上。
          值的含义如下：</p>

        <dl>
          <dt><span class="attr-value">'auto'</span></dt>
          <dd>
            <p>标记的正 x 轴指向标记放置位置相对于路径的方向（见
              <a href="#RenderingMarkers">渲染标记</a>）。
            </p>
          </dd>
        </dl>

        <dl class="ready-for-wider-review">
          <dt><span class="attr-value">'auto-start-reverse'</span></dt>
          <dd>
            <p>如果通过 <a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 放置，则标记的
              方向与 <span class="attr-value">'auto'</span> 指定的方向相差 180°。对于
              所有其他标记，<span class="attr-value">'auto-start-reverse'</span> 的意思与 <span class="attr-value">'auto'</span>
              相同。
            </p>

            <p class="note">这允许定义一个单一的箭头标记，可以用于路径的起始和结束，即指向两个末端的外部。</p>
          </dd>
        </dl>

        <dl>
          <dt><span class="attr-value"><a
                href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a></span></dt>
          <dt><span class="attr-value"><a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></span></dt>
          <dd>
            <p>标记的方向是指定角度与 <a href="shapes.html#TermShapeElement">形状</a> 的正 x 轴和标记的正 x 轴之间的角度。
              <a href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> 值指定以度为单位的角度。
            </p>
            <p class="note">例如，如果给定值为 <span class="attr-value">'45'</span>，则标记的正 x 轴将在 <a
                href="shapes.html#TermShapeElement">形状</a> 的坐标系统中指向下方和右方。</p>
          </dd>
        </dl>

      </dd>

    </dl>



    <h3 id="VertexMarkerProperties" class="heading">13.7.2. 顶点标记：‘<span class="property">marker-start</span>’,
      ‘<span class="property">marker-mid</span>’ 和 ‘<span class="property">marker-end</span>’
      属性<a class="self-link" href="#VertexMarkerProperties"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="MarkerStartProperty" data-dfn-type="property" data-export="">marker-start</dfn>，
          <dfn id="MarkerMidProperty" data-dfn-type="property" data-export="">marker-mid</dfn>，
          <dfn id="MarkerEndProperty" data-dfn-type="property" data-export="">marker-end</dfn>
        </td>
      </tr>
      <tr>
        <th>值：</th>
        <td>none | <a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a></td>
      </tr>
      <tr>
        <th>初始：</th>
        <td>none</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>按指定值，但包含的<a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a>值（属于
          <a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a>）变为绝对值
        </td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p>其中：</p>

    <p class="definition prod"><dfn id="DataTypeMarkerRef" data-dfn-type="type" data-export="">&lt;marker-ref></dfn> =
      <a href="https://www.w3.org/TR/css3-values/#url-value">&lt;url></a>
    </p>

    <p><a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 和 <a class="property"
        href="painting.html#MarkerEndProperty">marker-end</a> 属性用于
      指定在给定的<a href="shapes.html#TermShapeElement">形状</a>的第一个和最后一个顶点
      处绘制的标记。<a class="property" href="painting.html#MarkerMidProperty">marker-mid</a>
      用于指定在所有其他顶点绘制的标记（即，除了第一个和最后一个顶点）。
      <a class="property" href="painting.html#MarkerStartProperty">marker-start</a>、<a class="property"
        href="painting.html#MarkerMidProperty">marker-mid</a> 和
      <a class="property" href="painting.html#MarkerEndProperty">marker-end</a> 的可能值为：
    </p>

    <dl>
      <dt><span class="prop-value">none</span></dt>
      <dd>表示在给定的顶点或顶点处不会绘制任何标记符号。</dd>

      <dt><span class="prop-value">&lt;marker-ref></span></dt>
      <dd>表示将绘制由<a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a>值引用的
        <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>
        元素在给定的顶点或顶点处。
        如果引用无效，则在给定的顶点或顶点处不会绘制任何标记。
      </dd>
    </dl>

    <p>对于所有<a href="shapes.html#TermShapeElement">形状</a>，计算标记位置时必须使用的路径是<a
        href="paths.html#TermEquivalentPath">等效路径</a>。</p>

    <div class="ready-for-wider-review">
      <p>对于所有<a href="shapes.html#TermShapeElement">形状</a>元素，除了<span class="element-name">‘<a
            href="shapes.html#PolylineElement"><span>polyline</span></a>’</span> 和 <span class="element-name">‘<a
            href="paths.html#PathElement"><span>path</span></a>’</span>，
        最后一个顶点与第一个
        顶点相同。在这种情况下，如果<a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 和 <a
          class="property" href="painting.html#MarkerEndProperty">marker-end</a>
        的值都不是<span class="prop-value">none</span>，那么将在该最终顶点上渲染两个标记。
        对于<span class="element-name">‘<a href="paths.html#PathElement"><span>path</span></a>’</span>元素，
        每个<a href="paths.html#TermOpenSubpath">封闭子路径</a>，最后一个顶点与第一个顶点相同。
        <a class="property" href="painting.html#MarkerStartProperty">marker-start</a>只能在
        <a href="paths.html#PathData">路径数据</a>的第一个顶点上渲染。<a class="property"
          href="painting.html#MarkerEndProperty">marker-end</a>必须仅在
        <a href="paths.html#PathData">路径数据</a>的最后一个顶点上渲染。
        <a class="property" href="painting.html#MarkerMidProperty">marker-mid</a>必须在<a
          href="paths.html#PathData">路径数据</a>的每个顶点上渲染，但不包括路径数据的第一个顶点和最后一个顶点。
      </p>
      <div class="example">
        <pre>&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 30">
  &lt;defs>
    &lt;marker id="m1" viewBox="0 0 10 10" refX="5" refY="5"
     markerWidth="8" markerHeight="8">
      &lt;circle cx="5" cy="5" r="5" fill="green">
    &lt;/marker>
    &lt;marker id="m2" viewBox="0 0 10 10" refX="5" refY="5"
     markerWidth="6.5" markerHeight="6.5">
      &lt;circle cx="5" cy="5" r="5" fill="skyblue" opacity="0.9">
    &lt;/marker>
    &lt;marker id="m3" viewBox="0 0 10 10" refX="5" refY="5"
     markerWidth="5" markerHeight="5">
      &lt;circle cx="5" cy="5" r="5" fill="maroon" opacity="0.85">
    &lt;/marker>    
  &lt;/defs>
  
  &lt;path d="M10,10 h10 v10 z m20,0 h10 v10 z m20,0 h10 v10 z"
  fill="none" stroke="black"
  marker-start="url(#m1)"  
  marker-mid="url(#m2)"
  marker-end="url(#m3)"  
  />
&lt;/svg></pre>

        <div class="figure">
          <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/marker-doubled.svg"
            alt="图像显示，对于封闭子路径，在每个子路径的起始点绘制了两个标记。">
          <p class="caption">对于包含<a href="paths.html#TermOpenSubpath">封闭子路径</a>的<a href="paths.html#PathData">路径数据</a>，
            在每个<a href="paths.html#TermOpenSubpath">封闭子路径</a>的第一个/最后一个顶点绘制两个标记。
            对于最左边的<a href="paths.html#TermOpenSubpath">封闭子路径</a>，在<a class="property"
              href="painting.html#MarkerMidProperty">marker-mid</a>上绘制了一个<a class="property"
              href="painting.html#MarkerStartProperty">marker-start</a>。对于中间的<a
              href="paths.html#TermOpenSubpath">封闭子路径</a>，
            在最后一个顶点上绘制了一个<a class="property" href="painting.html#MarkerEndProperty">marker-end</a>。</p>
        </div>
      </div>
    </div>

    <p class="note">注意，<a class="property" href="painting.html#MarkerStartProperty">marker-start</a> 和 <a
        class="property" href="painting.html#MarkerEndProperty">marker-end</a>
      指的是整个路径的第一个和最后一个顶点，而不是每个子路径。</p>

    <div class="ready-for-wider-review">
      <div class="example">
        <p>以下示例显示了一个三角形标记符号，用作<a href="painting.html#TermVertexMarker">顶点标记</a>，
          以在两个路径的末端形成箭头。
        </p>

        <pre>&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="275" height="200" viewBox="0 0 275 200">
  &lt;defs>
    &lt;marker id="Triangle" viewBox="0 0 10 10" refX="1" refY="5" 
            markerUnits="strokeWidth" markerWidth="4" markerHeight="3"
            orient="auto">
      &lt;path d="M 0 0 L 10 5 L 0 10 z" fill="context-stroke">
    &lt;/marker>
  &lt;/defs>

  &lt;g fill="none" stroke-width="10" marker-end="url(#Triangle)">
    &lt;path stroke="crimson" d="M 100,75 C 125,50 150,50 175,75">
    &lt;path stroke="olivedrab" d="M 175,125 C 150,150 125,150 100,125">
  &lt;/g>
&lt;/svg></pre>

        <div class="figure">
          <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/marker-rendering.svg"
            alt="图像显示自动定向的标记的使用。">
          <p class="caption">三角形位于路径的末端，并自动定向，以便指向正确的方向。
            使用<span class="prop-value">context-stroke</span>确保三角形的填充与每个<span class="element-name">‘<a
                href="paths.html#PathElement"><span>path</span></a>’</span>的描边匹配。</p>
        </div>
      </div>
    </div>

    <h3 id="MarkerShorthand" class="heading">13.7.3. 标记简写：‘<span class="property">marker</span>’
      属性<a class="self-link" href="#MarkerShorthand"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="MarkerProperty" data-dfn-type="property" data-export="">marker</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>none | <a href="painting.html#DataTypeMarkerRef">&lt;marker-ref></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>未定义于简写属性</td>
      </tr>
      <tr>
        <th>适用于：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>见各个属性</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#MarkerProperty">marker</a> 属性设置
      <a class="property" href="painting.html#MarkerStartProperty">marker-start</a>、<a class="property"
        href="painting.html#MarkerMidProperty">marker-mid</a> 和 <a class="property"
        href="painting.html#MarkerEndProperty">marker-end</a> 属性的值。<a class="property"
        href="painting.html#MarkerProperty">marker</a> 的值直接用于这三个对应的长属性。
    </p>


    <h3 id="RenderingMarkers" class="heading">13.7.4. 渲染标记<a class="self-link" href="#RenderingMarkers"></a></h3>

    <p>当自动定向标记时，由于将<span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span>
      指定为<span class="attr-value">'auto'</span>，将使用以下规则：</p>

    <ul>
      <li>如果顶点是<a href="paths.html#TermClosedSubpath">开放子路径</a>的开始或结束，则标记在<a
          href="paths.html#TermPathDirection">路径方向</a>中定向。</li>

      <li>否则，标记在<a href="paths.html#TermPathSegmentEndDirection">前一段末尾的方向</a>和<a
          href="paths.html#TermPathSegmentStartDirection">下一段起始的方向</a>之间的方向上定向。
      </li>
    </ul>

    <p>对于绘制的每个标记，建立一个临时新的用户坐标系，以便标记能够正确定位和大小，如下所示：</p>

    <ul>
      <li>临时新用户坐标系的轴根据<span class="attr-name">‘<a
            href="painting.html#OrientAttribute"><span>orient</span></a>’</span>属性在<span class="element-name">‘<a
            href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素上对齐。
      </li>

      <li>通过属性<span class="attr-name">‘<a
            href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>建立一个临时的新坐标系。如果<span
          class="attr-name">‘<a href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>等于
        <span class="attr-value">'strokeWidth'</span>，那么临时新的用户坐标系是当前用户坐标系按属性<a class="property"
          href="painting.html#StrokeWidthProperty">stroke-width</a>的当前值缩放的结果。如果<span class="attr-name">‘<a
            href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>等于
        <span class="attr-value">'userSpaceOnUse'</span>，则不应用额外的缩放变换。
      </li>

      <li>如果<span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素包含<span
          class="attr-name">‘<a
            href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>属性，则可能会发生额外的变换，以产生由于属性<span
          class="attr-name">‘<a href="coords.html#ViewBoxAttribute"><span>viewBox</span></a>’</span>和<span
          class="attr-name">‘<a
            href="coords.html#PreserveAspectRatioAttribute"><span>preserveAspectRatio</span></a>’</span>所需的结果。
      </li>

      <li>如果<span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素上的<a
          class="property"
          href="render.html#OverflowAndClipProperties">overflow</a>属性指示标记需要裁剪到其SVG视口，则在SVG视口的边界处建立一个隐式裁剪路径。</li>
    </ul>

    <p class="note">请注意，<a href="styling.html#UAStyleSheet">用户代理样式表</a>将<span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素的<a class="property"
        href="render.html#OverflowAndClipProperties">overflow</a>属性设置为<span
        class="prop-value">hidden</span>，这会导致默认情况下在标记的SVG视口边界创建一个矩形裁剪路径。
    </p>

    <p>属性不会从引用<span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span>的元素继承到标记的内容中。但是，通过在其定义中的元素上使用<span
        class="prop-value">context-stroke</span>值作为<a class="property" href="painting.html#FillProperty">fill</a>或<a
        class="property" href="painting.html#StrokeProperty">stroke</a>，可以设计出一个单一的标记与引用标记的元素样式相匹配。
    </p>

    <p>标记不能被交互。比如，点击或鼠标悬停等事件不会在鼠标点击或移动到渲染的标记上时分派到<span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span>或其子元素。
    </p>

    <p>标记不会直接渲染，必须通过<a href="painting.html#TermMarkerProperties">标记属性</a>之一进行引用才能被渲染。<span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素的<a class="property"
        href="render.html#VisibilityControl">display</a>值必须始终由<a href="styling.html#UAStyleSheet">用户代理样式表</a>设置为<span
        class="prop-value">none</span>，并且此声明必须优先于任何其他CSS规则或呈现属性。
      <!--
标记元素的<a>'display'</a>属性不适用；因此，即使<a>'display'</a>属性被设置为<span class="prop-value">none</span>以外的值，<a>'marker element'</a>元素也不会被直接渲染，并且
-->
      <span class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素即使在其或任何祖先的<a
        class="property" href="render.html#VisibilityControl">display</a>属性设置为<span
        class="prop-value">none</span>时仍可供引用。
    </p>

    <p>标记的渲染效果就好像引用的<span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素的内容在每个标记实例中都被深度克隆到一个单独的非暴露DOM树中。由于克隆的DOM树是非暴露的，SVG
      DOM不会显示标记的克隆实例。</p>

    <p>引用的<span class="element-name">‘<a
          href="painting.html#MarkerElement"><span>marker</span></a>’</span>元素的概念深度克隆到非暴露DOM树中还会复制由于<a
        href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html">CSS级联</a>（[<a
        href="refs.html#ref-css2">CSS2</a>],
      第6章）和引用元素及其内容上的属性继承而产生的任何属性值。CSS选择器可以应用于原始（即引用的）元素，因为它们是正式文档结构的一部分。CSS选择器不能应用于（概念上）克隆的DOM树，因为其内容不是正式文档结构的一部分。
    </p>

    <div class="example">
      <p>为了说明目的，我们将重复前面展示的标记示例：</p>

      <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="2in"
     viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;defs>
    &lt;marker id="Triangle"
      viewBox="0 0 10 10" refX="0" refY="5"
      markerUnits="strokeWidth"
      markerWidth="4" markerHeight="3"
      orient="auto">
      &lt;path d="M 0 0 L 10 5 L 0 10 z" />
    &lt;/marker>
  &lt;/defs>
  &lt;rect x="10" y="10" width="3980" height="1980"
       fill="none" stroke="blue" stroke-width="10" />
  &lt;desc>在路径的末尾放置一个箭头。
  &lt;/desc>
  &lt;path d="M 1000 750 L 2000 750 L 2500 1250"
        fill="none" stroke="black" stroke-width="100"
        marker-end="url(#Triangle)"  />
&lt;/svg>
</pre>

      <p>上述文件的渲染效果将与以下文件在视觉上完全相同：</p>

      <pre>
&lt;?xml version="1.0" standalone="no"?>
&lt;svg width="4in" height="2in"
     viewBox="0 0 4000 2000"
     xmlns="http://www.w3.org/2000/svg">
  &lt;desc>生成与标记示例文件相同效果的文件，但不使用标记。
  &lt;/desc>
  &lt;rect x="10" y="10" width="3980" height="1980"
       fill="none" stroke="blue" stroke-width="10" />
  &lt;!-- 路径的绘制与之前相同，但不使用标记属性 -->
  &lt;path d="M 1000 750 L 2000 750 L 2500 1250"
        fill="none" stroke="black" stroke-width="100"  />
  &lt;!-- 以下逻辑模拟在路径的最终顶点绘制标记。 -->
  &lt;!-- 首先，移动用户坐标系统的原点，使其与路径的终点对齐。 -->
  <strong>&lt;g transform="translate(2500,1250)" ></strong>
    &lt;!-- 因为标记指定了orient="auto"，路径的最终段
         朝向45度，因此将坐标系统旋转45度。 -->
    <strong>&lt;g transform="rotate(45)" ></strong>
      &lt;!-- 将坐标系统缩放以匹配由'markerUnits'属性指示的坐标系统，
           在此情况下的值为'strokeWidth'。因此，将坐标系统缩放为
           'stroke-width'属性的当前值，即100。 -->
      <strong>&lt;g transform="scale(100)" ></strong>
        &lt;!-- 通过
             (-refX*viewBoxToMarkerUnitsScaleX, -refY*viewBoxToMarkerUnitsScaleY)
             平移坐标系统，以便标记内的(refX,refY)与顶点对齐。
             在这种情况下，我们使用preserveAspectRatio的默认值
             ('xMidYMid meet')，这意味着寻找一个统一的缩放因子
             (即viewBoxToMarkerUnitsScaleX=viewBoxToMarkerUnitsScaleY)
             使得viewBox完全适合SVG视口（'meet'）并且
             居中对齐（'xMidYMid'）。在这种情况下，统一缩放因子
             为markerHeight/viewBoxHeight=3/10=.3。因此，平移为
             (-refX*.3,-refY*.3)=(0*.3,-5*.3)=(0,-1.5)。 -->
        <strong>&lt;g transform="translate(0,-1.5)" ></strong>
          &lt;!-- 因为用户代理样式表指示标记的'overflow'属性值为'hidden'，
               所以存在一个隐式裁剪路径。为此，在SVG视口的边界创建裁剪路径。
               请注意，在这种情况下，由于统一缩放因子、markerWidth/viewBoxWidth和
               markerHeight/viewBoxHeight的不同比例，以及'xMidYMid'对齐，
               SVG视口向左和右延伸了0.5个单位。 -->
          <strong>&lt;clipPath id="cp1" >
            &lt;rect x="-0.5" y="0" width="4" height="3" />
          &lt;/clipPath></strong>
          <strong>&lt;g clip-path="url(#cp1)" ></strong>
            &lt;!-- 将坐标系统缩放为统一缩放因子
                 markerHeight/viewBoxHeight=3/10=.3，以设置坐标
                 系统为viewBox单位。 -->
            <strong>&lt;g transform="scale(.3)" ></strong>
              &lt;!-- 此'g'元素承载来自原始'marker'元素属性的
                   级联和继承的所有属性值。在此示例中，既未在'marker'元素上
                   指定fill也未指定stroke，因此使用初始值
                   "black"和"none"。 -->
             <strong>&lt;g fill="black" stroke="none" ></strong>
                &lt;!-- 展开'marker'元素的内容。 -->
                <strong>&lt;path d="M 0 0 L 10 5 L 0 10 z" /></strong>
              <strong>&lt;/g></strong>
            <strong>&lt;/g></strong>
          <strong>&lt;/g></strong>
        <strong>&lt;/g></strong>
      <strong>&lt;/g></strong>
    <strong>&lt;/g></strong>
  <strong>&lt;/g></strong>
&lt;/svg>
</pre>
      <p class="view-as-svg"><a href="images/painting/marker-simulated.svg">将此示例视为SVG（仅支持SVG的浏览器）</a></p>
    </div>

  </div>



  <div class="ready-for-wider-review">
    <h2 id="PaintOrder" class="heading">13.8. 控制绘制操作顺序：‘<span class="property">paint-order</span>’ 属性<a
        class="self-link" href="#PaintOrder"></a></h2>

    <div class="annotation svg2-requirement">
      <table>
        <tr>
          <th>SVG 2 要求：</th>
          <td>支持控制填充、描边和形状上标记的绘制顺序。</td>
        </tr>
        <tr>
          <th>解决方案：</th>
          <td><a href="https://www.w3.org/2012/05/07-svg-minutes#item03">SVG 2 将采纳‘<span
                class="property">paint-order</span>’属性提案，尽管可能使用不同的名称。</a>
            属性名称现在已确定，请参阅<a href="https://www.w3.org/2013/11/15-svg-minutes.html#item12">2013年11月15日会议记录</a>。</td>
        </tr>
        <tr>
          <th>目的：</th>
          <td>解决常见需求，即在不需要复制元素的情况下，将描边绘制在填充下方。</td>
        </tr>
        <tr>
          <th>负责人：</th>
          <td>Cameron (<a href="https://www.w3.org/Graphics/SVG/WG/track/actions/3285">ACTION-3285</a>)</td>
        </tr>
      </table>
    </div>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="PaintOrderProperty" data-dfn-type="property" data-export="">paint-order</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>normal | [ fill || stroke || markers ]</td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>normal</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a> 和 <a href="text.html#TermTextContentElement">文本内容元素</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>不适用</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画化</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p class="note">SVG 2 新增。主要是为了允许在不需要复制<span class="element-name">‘<a
          href="text.html#TextElement"><span>text</span></a>’</span>元素的情况下，
      将文本的描边绘制在其填充下方。</p>

    <p><a class="property" href="painting.html#PaintOrderProperty">paint-order</a>属性控制绘制
      <a href="shapes.html#TermShapeElement">形状</a>和文本的三种绘制操作的顺序：
      填充、描边以及它们可能拥有的任何标记。
    </p>

    <p>当此属性的值为<span class="prop-value">normal</span>时，
      元素按照标准的绘制操作顺序绘制：
      首先绘制填充，然后是描边，最后是标记。</p>

    <p>当使用其他任何关键字时，绘制元素的操作顺序将按从左到右的顺序进行。如果省略
      任何三个关键字，则它们最后绘制，按照<span class="prop-value">paint-order: normal</span>时的顺序。</p>

    <p class="note">这意味着，例如，
      <span class="prop-value">paint-order: stroke</span>
      的渲染行为与
      <span class="prop-value">paint-order: stroke fill markers</span>相同。
    </p>

    <div class="example">
      <p>以下示例展示了如何使用<a class="property" href="painting.html#PaintOrderProperty">paint-order</a>
        属性以更美观的方式渲染描边文本。</p>

      <pre>
&lt;svg xmlns="http://www.w3.org/2000/svg"
     width="600" height="150" viewBox="0 0 600 150">

  &lt;style>
    text {
      font: 80px bold sans-serif; stroke-linejoin: round;
      text-anchor: middle; fill: peachpuff; stroke: crimson;
    }
  &lt;/style>

  &lt;text x="150" y="100" style="stroke-width: 6px;">pizazz&lt;/text>
  &lt;text x="450" y="100" style="stroke-width: 12px; paint-order: stroke;">pizazz&lt;/text>
&lt;/svg>
</pre>

      <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/paintorder.svg" alt="显示paint-order效果的图像。">
        <p class="caption">文本的描边绘制在填充下方。</p>
      </div>
    </div>
  </div>

  <div class="ready-for-wider-review">
    <h2 id="ColorInterpolation" class="heading">13.9. 插值的颜色空间：‘<span class="property">color-interpolation</span>’ 属性<a
        class="self-link" href="#ColorInterpolation"></a>
    </h2>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="ColorInterpolationProperty" data-dfn-type="property" data-export="">color-interpolation</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>auto | sRGB | linearRGB</td>
      </tr>
      <tr>
        <th>初始：</th>
        <td>sRGB</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="struct.html#TermContainerElement">容器元素</a>、<a href="struct.html#TermGraphicsElement">图形元素</a>、
          <a href="pservers.html#TermGradientElement">渐变元素</a>、<span class="element-name">‘<a
              href="struct.html#UseElement"><span>use</span></a>’</span> 和 <span class="element-name">‘<a
              href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>
        </td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>按指定的</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p>SVG 用户代理在处理 SVG 内容时会在多个点执行颜色插值和合成。<a class="property"
        href="painting.html#ColorInterpolationProperty">color-interpolation</a>
      属性控制以下图形操作所使用的颜色空间：</p>

    <ul>
      <li>在 <a href="pservers.html#Gradients">渐变</a> 停止之间插值，</li>

      <li>在执行带有 <span class="element-name">‘<a
            href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span> 的颜色动画时插值，</li>
      <li>以及 <a href="render.html#PaintersModel">将</a> <a href="struct.html#TermGraphicsElement">图形元素</a> 混合到当前背景中。
      </li>
    </ul>

    <p class="note">对于 <a href="https://www.w3.org/TR/filter-effects/">滤镜效果</a>，<a class="property"
        href="https://drafts.fxtf.org/filter-effects/#ColorInterpolationFiltersProperty">color-interpolation-filters</a>
      属性控制所使用的颜色空间。
      [<a href="refs.html#ref-filter-effects-1">filter-effects-1</a>]
    </p>
  </div>

  <div class="ready-for-wider-review">
    <p><a class="property" href="painting.html#ColorInterpolationProperty">color-interpolation</a> 属性在 sRGB 颜色空间或线性 RGB
      颜色空间（光能线性化）之间选择颜色操作。选择合适的颜色空间后，使用逐分量线性插值。<a class="property"
        href="painting.html#ColorInterpolationProperty">color-interpolation</a> 的值具有以下含义：</p>

    <dl>
      <dt><span class="prop-value">auto</span></dt>
      <dd>表示用户代理可以选择 <span class="prop-value">sRGB</span> 或
        <span class="prop-value">linearRGB</span> 颜色空间进行插值。此选项表示作者不要求在特定颜色空间中进行插值。
      </dd>

      <dt><span class="prop-value">sRGB</span></dt>
      <dd>表示插值发生在 sRGB 颜色空间中。</dd>

      <dt><span class="prop-value">linearRGB</span></dt>
      <dd>表示插值发生在下述线性化 RGB 颜色空间中。</dd>
    </dl>

    <p id="sRGBlinearRGBConversionFormulas">sRGB 颜色空间（即，非线性的 2.2 gamma 曲线）和线性化 RGB 颜色空间（即，颜色值以 sRGB 三刺激值表示，不带 gamma
      曲线）之间的转换公式可以在 <a href="https://webstore.iec.ch/publication/6168">sRGB 规范</a>
      [<a href="refs.html#ref-srgb">SRGB</a>] 中找到。
      为了说明，以下公式显示从 sRGB 转换为线性化 RGB，其中 <var>C<sub>srgb</sub></var> 是三个 sRGB 颜色分量之一，<var>C<sub>linear</sub></var> 是对应的线性化
      RGB 颜色分量，所有颜色值均在 0 到 1 之间：</p>

    <div role="math" aria-describedby="math-linearRGB">
      <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
        <mrow>
          <msub>
            <mi>C</mi>
            <mi>linear</mi>
          </msub>
          <mo>=</mo>
          <mo>{</mo>
          <mtable columnalign="left">
            <mtr>
              <mtd>
                <mfrac>
                  <msub>
                    <mi>C</mi>
                    <mi>srgb</mi>
                  </msub>
                  <mn>12.92</mn>
                </mfrac>
              </mtd>
              <mtd>
                <mtext>如果 </mtext>
                <msub>
                  <mi>C</mi>
                  <mi>srgb</mi>
                </msub>
                <mo>≤</mo>
                <mn>0.04045</mn>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msup>
                  <mfenced>
                    <mfrac>
                      <mrow>
                        <msub>
                          <mi>C</mi>
                          <mi>srgb</mi>
                        </msub>
                        <mo>+</mo>
                        <mn>0.055</mn>
                      </mrow>
                      <mn>1.055</mn>
                    </mfrac>
                  </mfenced>
                  <mn>2.4</mn>
                </msup>
              </mtd>
              <mtd>
                <mtext>if </mtext>
                <msub>
                  <mi>C</mi>
                  <mi>srgb</mi>
                </msub>
                <mo>></mo>
                <mn>0.04045</mn>
              </mtd>
            </mtr>
          </mtable>
        </mrow>
      </math>
      <pre id="math-linearRGB">
if C_srgb &lt;= 0.04045
  C_linear = C_srgb / 12.92
else if c_srgb > 0.04045
  C_linear = ((C_srgb + 0.055) / 1.055) ^ 2.4
</pre>
    </div>

    <p>如果用户代理支持，超出范围的颜色值也将使用上述公式进行转换。</p>

    <p>当子元素混合到背景中时，子元素的 <a class="property" href="painting.html#ColorInterpolationProperty">color-interpolation</a>
      属性的值决定了混合的类型，而不是父元素的 <a class="property" href="painting.html#ColorInterpolationProperty">color-interpolation</a>
      属性的值。
      对于使用 <span class="attr-name">‘href’</span> 属性引用另一个渐变的 <a href="pservers.html#Gradients">渐变</a>，该渐变使用由 <a
        class="property" href="painting.html#FillProperty">fill</a> 或 <a class="property"
        href="painting.html#StrokeProperty">stroke</a> 属性直接引用的渐变元素的 <a class="property"
        href="painting.html#ColorInterpolationProperty">color-interpolation</a> 属性值。当动画颜色时，颜色插值根据被动画元素的 <a
        class="property" href="painting.html#ColorInterpolationProperty">color-interpolation</a> 属性的值进行。
    </p>


    <h2 id="RenderingHints" class="heading">13.10. 渲染提示<a class="self-link" href="#RenderingHints"></a></h2>

    <h3 id="ColorRendering" class="heading">13.10.1. ‘<span class="property">color-rendering</span>’ 属性<a
        class="self-link" href="#ColorRendering"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="ColorRenderingProperty" data-dfn-type="property" data-export="">color-rendering</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>auto | optimizeSpeed | optimizeQuality</td>
      </tr>
      <tr>
        <th>初始：</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="struct.html#TermContainerElement">容器元素</a>，<a href="struct.html#TermGraphicsElement">图形元素</a>，
          <a href="pservers.html#TermGradientElement">渐变元素</a>，<span class="element-name">‘<a
              href="struct.html#UseElement"><span>use</span></a>’</span> 和 <span class="element-name">‘<a
              href="https://svgwg.org/specs/animations/#AnimateElement"><span>animate</span></a>’</span>
        </td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#ColorRenderingProperty">color-rendering</a> 属性为 SVG
      用户代理提供了关于如何优化其颜色插值和合成操作的提示。值的含义如下：</p>

    <dl>
      <dt><span class="prop-value">auto</span></dt>
      <dd>表示用户代理应做出适当的权衡，以平衡速度和质量，但质量应优先于速度。</dd>

      <dt><span class="prop-value">optimizeSpeed</span></dt>
      <dd>表示用户代理应强调渲染速度而不是质量。对于 RGB 显示设备，此选项有时会导致用户代理在设备 RGB 颜色空间中执行颜色插值和合成。</dd>

      <dt><span class="prop-value">optimizeQuality</span></dt>
      <dd>表示用户代理应强调质量而不是渲染速度。</dd>
    </dl>

    <p><a class="property" href="painting.html#ColorRenderingProperty">color-rendering</a> 优先于 <a class="property"
        href="https://drafts.fxtf.org/filter-effects/#ColorInterpolationFiltersProperty">color-interpolation-filters</a>。例如，假设
      <span class="prop-value">color-rendering: optimizeSpeed</span> 和
      <span class="prop-value">color-interpolation-filters: linearRGB</span>。
      在这种情况下，SVG 用户代理应以优化性能的方式执行颜色操作，这可能意味着牺牲由 <span class="prop-value">color-interpolation-filters: linearRGB</span>
      指定的颜色插值精度。
    </p>

    <h3 id="ShapeRendering" class="heading">13.10.2. ‘<span class="property">shape-rendering</span>’ 属性<a
        class="self-link" href="#ShapeRendering"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="ShapeRenderingProperty" data-dfn-type="property" data-export="">shape-rendering</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>auto | optimizeSpeed | crispEdges | geometricPrecision</td>
      </tr>
      <tr>
        <th>初始：</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><a href="shapes.html#TermShapeElement">形状</a></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#ShapeRenderingProperty">shape-rendering</a>
      属性为实现提供了关于在渲染矢量图形元素时应做出何种权衡的提示，例如 <span class="element-name">‘<a
          href="paths.html#PathElement"><span>path</span></a>’</span> 元素和 <a href="shapes.html">基本形状</a>，如圆形和矩形。值的含义如下：
    </p>

    <dl>
      <dt><span class="prop-value">auto</span></dt>
      <dd>表示用户代理应做出适当的权衡，以平衡速度、清晰边缘和几何精度，但应优先考虑几何精度而不是速度和清晰边缘。</dd>

      <dt><span class="prop-value">optimizeSpeed</span></dt>
      <dd>表示用户代理应强调渲染速度，而不是几何精度和清晰边缘。此选项有时会导致用户代理关闭形状抗锯齿。</dd>

      <dt><span class="prop-value">crispEdges</span></dt>
      <dd>
        表示用户代理应尝试强调艺术作品干净边缘之间的对比，而不是渲染速度和几何精度。为了实现清晰的边缘，用户代理可能会关闭所有线条和曲线的抗锯齿，或者可能仅对接近垂直或水平的直线关闭抗锯齿。此外，用户代理可能会调整线条位置和线宽，以使边缘与设备像素对齐。
      </dd>

      <dt><span class="prop-value">geometricPrecision</span></dt>
      <dd>表示用户代理应强调几何精度，而不是速度和清晰边缘。</dd>
    </dl>

    <h3 id="TextRendering" class="heading">13.10.3. ‘<span class="property">text-rendering</span>’ 属性<a
        class="self-link" href="#TextRendering"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="TextRenderingProperty" data-dfn-type="property" data-export="">text-rendering</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>auto | optimizeSpeed | optimizeLegibility | geometricPrecision</td>
      </tr>
      <tr>
        <th>初始：</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td><span class="element-name">‘<a href="text.html#TextElement"><span>text</span></a>’</span></td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p><a class="property" href="painting.html#TextRenderingProperty">text-rendering</a>
      属性为实现提供了关于在渲染文本时应做出何种权衡的提示。值的含义如下：</p>

    <dl>
      <dt><span class="prop-value">auto</span></dt>
      <dd>表示用户代理应做出适当的权衡，以平衡速度、可读性和几何精度，但应优先考虑可读性而不是速度和几何精度。</dd>

      <dt><span class="prop-value">optimizeSpeed</span></dt>
      <dd>表示用户代理应强调渲染速度，而不是可读性和几何精度。此选项有时会导致用户代理关闭文本抗锯齿。</dd>

      <dt><span class="prop-value">optimizeLegibility</span></dt>
      <dd>表示用户代理应强调可读性，而不是渲染速度和几何精度。用户代理通常会选择是否应用抗锯齿技术、内置字体提示或两者结合，以产生最具可读性的文本。</dd>

      <dt><span class="prop-value">geometricPrecision</span></dt>
      <dd>表示用户代理应强调几何精度，而不是可读性和渲染速度。此选项通常会导致用户代理暂停使用提示，以便字形轮廓以与路径数据相当的几何精度进行绘制。</dd>
    </dl>

    <h3 id="ImageRendering" class="heading">13.10.4. ‘<span class="property">image-rendering</span>’ 属性<a
        class="self-link" href="#ImageRendering"></a></h3>

    <table class="propdef def">
      <tr>
        <th>名称：</th>
        <td><dfn id="ImageRenderingProperty" data-dfn-type="property" data-export="">image-rendering</dfn></td>
      </tr>
      <tr>
        <th>值：</th>
        <td>auto | optimizeQuality | optimizeSpeed</td>
      </tr>
      <tr>
        <th>初始：</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>适用对象：</th>
        <td>图像</td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>是</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td>视觉</td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>如指定</td>
      </tr>
      <tr>
        <th><a href="https://svgwg.org/specs/animations/#Animatable">可动画</a>：</th>
        <td>是</td>
      </tr>
    </table>

    <p class="note">CSS 图像值和替代内容模块第 4 级可能在未来重新定义此属性。特别是，它应该允许在放大时选择平滑处理和保持像素化外观之间的选择。</p>

    <p><a class="property" href="painting.html#ImageRenderingProperty">image-rendering</a>
      属性为实现提供了关于在进行图像处理时如何进行速度与质量之间的权衡的提示。值的含义如下：</p>

    <dl>
      <dt><span class="prop-value">auto</span></dt>
      <dd>表示用户代理应做出适当的权衡，以平衡速度和质量，但质量应优先于速度。用户代理应使用至少与最近邻重采样一样好的重采样算法，但双线性重采样是强烈推荐的。对于 <a
          href="conform.html#ConformingSVGViewers">符合标准的高质量 SVG 查看器</a>，用户代理应使用至少与双线性重采样一样好的重采样算法。</dd>

      <dt><span class="prop-value">optimizeQuality</span></dt>
      <dd>表示用户代理应强调质量，而不是渲染速度。用户代理应使用至少与双线性重采样一样好的重采样算法。</dd>

      <dt><span class="prop-value">optimizeSpeed</span></dt>
      <dd>表示用户代理应强调渲染速度，而不是质量。用户代理应使用能够实现快速渲染的重采样算法，要求重采样算法至少与最近邻重采样一样好。如果可以通过更高质量的算法实现性能目标，则用户代理应使用更高质量的算法，而不是最近邻重采样。
      </dd>
    </dl>

    <p>在所有情况下，重采样必须在真实色彩（例如，24 位）颜色空间中进行，即使原始数据和/或目标设备是索引颜色。高质量的 SVG 查看器应使用线性色彩空间进行图像重采样。</p>


    <h2 id="WillChange" class="heading">13.11. ‘<span class="property">will-change</span>’属性的影响<a class="self-link"
        href="#WillChange"></a></h2>

    <p class="note">有关 <a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
      的定义，请参见 CSS Will Change 模块第 1 级规范。</p>

    <p><a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
      属性用于向用户代理提供即将对内容进行的更改类型的提示，从而使用户代理更好地进行渲染优化。</p>

    <p><a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a> 属性适用于所有 SVG <a
        href="struct.html#TermGraphicsElement">图形元素</a>，但由于 SVG 元素不支持滚动，因此 <span
        class="prop-value">scroll-position</span> 值对它们没有影响。</p>

    <div class="example">
      <p>以下示例演示了如何使用 <a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
        来预警用户代理某个元素的 <a class="property" href="coords.html#TransformProperty">transform</a> 属性将被更改，可能导致用户代理将该元素渲染到自己的
        GPU 层中，从而使脚本的 <a class="property" href="coords.html#TransformProperty">transform</a> 更改看起来更加平滑。</p>

      <pre>&lt;svg xmlns="http://www.w3.org/2000/svg">
  &lt;style>
    #background { fill: lemonchiffon; }
    #star {
      fill: cornflowerblue;
      stroke: navy; stroke-width: 5px; stroke-linejoin: round;
      paint-order: stroke fill;
      will-change: transform;
    }
    text { font: 24px sans-serif; user-select: none; }
  &lt;/style>
  &lt;g onmousemove="drag(evt.clientX, evt.clientY);"
     onmouseup="dragging = false;">
    &lt;rect id="background" width="100%" height="100%">
    &lt;text x="10" y="30">拖动星星！&lt;/text>
    &lt;path id="star" transform="translate(200,150)"
          d="M 0.00,-40.00 -11.76,-16.18 -38.04,-12.36 -19.02,6.18 -23.51,32.36
               0.00,20.00 23.51,32.36 19.02,6.18 38.04,-12.36 11.76,-16.18 z"
          onmousedown="dragging = true;">
  &lt;/g>
  &lt;script>
    var dragging = false;
    var star = document.getElementById("star");
    function drag(x, y) {
      if (dragging) {
        star.setAttribute("transform", "translate(" + x + "," + y + ")");
      }
    }
  &lt;/script>
&lt;/svg></pre>

      <div class="figure">
        <img class="bordered" src="https://www.w3.org/TR/SVG2/images/painting/will-change-image.svg" width="200"
          height="150" alt="一颗蓝色的星星，上方有文本“拖动星星！”。">
        <p class="caption">在支持 <a class="property"
            href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a> 的 SVG
          元素的用户代理中，星星可能被渲染到一个层中，以便在其被拖动时可以快速合成。
          <a href="images/painting/will-change.svg">查看交互式 SVG 文档。</a>
        </p>
      </div>
    </div>

    <p class="note"><a class="property" href="https://drafts.csswg.org/css-will-change/#will-change">will-change</a>
      属性替代了在 SVG Tiny 1.2 中定义的 ‘<span class="property">buffered-rendering</span>’ 属性。</p>
  </div>


  <div class="ready-for-wider-review">
    <h2 id="DOMInterfaces" class="heading">13.12. DOM 接口<a class="self-link" href="#DOMInterfaces"></a></h2>

    <h3 id="InterfaceSVGMarkerElement" class="heading">13.12.1. 接口 SVGMarkerElement<a class="self-link"
        href="#InterfaceSVGMarkerElement"></a></h3>

    <p>一个 <a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a> 对象代表 DOM 中的 <span
        class="element-name">‘<a href="painting.html#MarkerElement"><span>marker</span></a>’</span> 元素。</p>

    <pre
      class="idl">[Exposed=Window]
interface <b>SVGMarkerElement</b> : <a class="idlinterface" href="types.html#InterfaceSVGElement">SVGElement</a> {

  // 标记单位类型
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKERUNITS_UNKNOWN">SVG_MARKERUNITS_UNKNOWN</a> = 0;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKERUNITS_USERSPACEONUSE">SVG_MARKERUNITS_USERSPACEONUSE</a> = 1;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKERUNITS_STROKEWIDTH">SVG_MARKERUNITS_STROKEWIDTH</a> = 2;

  // 标记方向类型
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_UNKNOWN">SVG_MARKER_ORIENT_UNKNOWN</a> = 0;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_AUTO">SVG_MARKER_ORIENT_AUTO</a> = 1;
  const unsigned short <a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_ANGLE">SVG_MARKER_ORIENT_ANGLE</a> = 2;

  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__refX">refX</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__refY">refY</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="painting.html#__svg__SVGMarkerElement__markerUnits">markerUnits</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__markerWidth">markerWidth</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedLength">SVGAnimatedLength</a> <a href="painting.html#__svg__SVGMarkerElement__markerHeight">markerHeight</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedEnumeration">SVGAnimatedEnumeration</a> <a href="painting.html#__svg__SVGMarkerElement__orientType">orientType</a>;
  [SameObject] readonly attribute <a class="idlinterface" href="types.html#InterfaceSVGAnimatedAngle">SVGAnimatedAngle</a> <a href="painting.html#__svg__SVGMarkerElement__orientAngle">orientAngle</a>;
  attribute DOMString <a href="painting.html#__svg__SVGMarkerElement__orient">orient</a>;

  void <a href="painting.html#__svg__SVGMarkerElement__setOrientToAuto">setOrientToAuto</a>();
  void <a href="painting.html#__svg__SVGMarkerElement__setOrientToAngle">setOrientToAngle</a>(<a class="idlinterface" href="types.html#InterfaceSVGAngle">SVGAngle</a> angle);
};

<a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a> includes <a class="idlinterface" href="types.html#InterfaceSVGFitToViewBox">SVGFitToViewBox</a>;</pre>

    <p>在 <a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a> 上定义的数字标记单位类型常量用于表示
      <span class="attr-name">‘<a href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span>
      属性可以取的关键字值。其含义如下：
    </p>

    <table class="vert">
      <tr>
        <th>常量</th>
        <th>含义</th>
      </tr>
      <tr>
        <td><b id="__svg__SVGMarkerElement__SVG_MARKERUNITS_USERSPACEONUSE">SVG_MARKERUNITS_USERSPACEONUSE</b></td>
        <td><span class="attr-value">userSpaceOnUse</span> 关键字。</td>
      </tr>
      <tr>
        <td><b id="__svg__SVGMarkerElement__SVG_MARKERUNITS_STROKEWIDTH">SVG_MARKERUNITS_STROKEWIDTH</b></td>
        <td><span class="attr-value">strokeWidth</span> 关键字。</td>
      </tr>
      <tr>
        <td><b id="__svg__SVGMarkerElement__SVG_MARKERUNITS_UNKNOWN">SVG_MARKERUNITS_UNKNOWN</b></td>
        <td>其他某个值。</td>
      </tr>
    </table>

    <p>在 <a class="idlinterface" href="painting.html#InterfaceSVGMarkerElement">SVGMarkerElement</a> 上定义的数字标记方向类型常量用于表示
      <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性可以取的值类型。其含义如下：
    </p>

    <table class="vert">
      <tr>
        <th>常量</th>
        <th>含义</th>
      </tr>
      <tr>
        <td><b id="__svg__SVGMarkerElement__SVG_MARKER_ORIENT_AUTO">SVG_MARKER_ORIENT_AUTO</b></td>
        <td><span class="attr-value">auto</span> 关键字。</td>
      </tr>
      <tr>
        <td><b id="__svg__SVGMarkerElement__SVG_MARKER_ORIENT_ANGLE">SVG_MARKER_ORIENT_ANGLE</b></td>
        <td>表示方向角度的 <a href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a> 或 <a
            href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a> 值。</td>
      </tr>
      <tr>
        <td><b id="__svg__SVGMarkerElement__SVG_MARKER_ORIENT_UNKNOWN">SVG_MARKER_ORIENT_UNKNOWN</b></td>
        <td>其他某个值。</td>
      </tr>
    </table>

    <p><b id="__svg__SVGMarkerElement__markerUnits">markerUnits</b> IDL 属性 <a href="types.html#TermReflect">反映</a> <span
        class="attr-name">‘<a href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span> 内容属性。<a
        href="types.html#TermNumericTypeValue">数字类型值</a> 对于 <span class="attr-name">‘<a
          href="painting.html#MarkerUnitsAttribute"><span>markerUnits</span></a>’</span> 如上所述于数字标记单位类型常量表中。</p>

    <p><b id="__svg__SVGMarkerElement__orientType">orientType</b>、<b
        id="__svg__SVGMarkerElement__orientAngle">orientAngle</b> 和 <b id="__svg__SVGMarkerElement__orient">orient</b>
      IDL 属性都反映 <span class="attr-name">‘<a href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 内容属性。<a
        href="types.html#TermNumericTypeValue">数字类型值</a> 对于 <span class="attr-name">‘<a
          href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 如下：</p>

    <table class="vert">
      <tr>
        <th>值</th>
        <th>数字类型值</th>
      </tr>
      <tr>
        <td><span class="attr-value">auto</span></td>
        <td><a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_AUTO">SVG_MARKER_ORIENT_AUTO</a></td>
      </tr>
      <tr>
        <td><span class="attr-value">auto-start-reverse</span></td>
        <td><a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_UNKNOWN">SVG_MARKER_ORIENT_UNKNOWN</a>
        </td>
      </tr>
      <tr>
        <td><a href="https://www.w3.org/TR/2012/WD-css3-values-20120308/#angles">&lt;angle></a> | <a
            href="https://www.w3.org/TR/css3-values/#numbers">&lt;number></a></td>
        <td><a href="painting.html#__svg__SVGMarkerElement__SVG_MARKER_ORIENT_ANGLE">SVG_MARKER_ORIENT_ANGLE</a></td>
      </tr>
    </table>

    <p><b id="__svg__SVGMarkerElement__refX">refX</b>、<b id="__svg__SVGMarkerElement__refY">refY</b>、<b
        id="__svg__SVGMarkerElement__markerWidth">markerWidth</b> 和 <b
        id="__svg__SVGMarkerElement__markerHeight">markerHeight</b> IDL 属性反映 <span class="attr-name">‘<a
          href="painting.html#MarkerElementRefXAttribute"><span>refX</span></a>’</span>、<span class="attr-name">‘<a
          href="painting.html#MarkerElementRefYAttribute"><span>refY</span></a>’</span>、<span class="attr-name">‘<a
          href="painting.html#MarkerWidthAttribute"><span>markerWidth</span></a>’</span> 和 <span class="attr-name">‘<a
          href="painting.html#MarkerHeightAttribute"><span>markerHeight</span></a>’</span> 内容属性，分别。</p>

    <p><b id="__svg__SVGMarkerElement__setOrientToAuto">setOrientToAuto</b> 方法用于将 <span class="attr-name">‘<a
          href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性的值设置为 <span
        class="attr-value">'auto'</span>。当调用 setOrientToAuto() 时，<span class="attr-name">‘<a
          href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性简单地被设置为 <span
        class="attr-value">'auto'</span>。</p>

    <p><b id="__svg__SVGMarkerElement__setOrientToAngle">setOrientToAngle</b> 方法用于将 <span class="attr-name">‘<a
          href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性的值设置为特定的角度值。当调用
      setOrientToAngle(<var>angle</var>) 时，<span class="attr-name">‘<a
          href="painting.html#OrientAttribute"><span>orient</span></a>’</span> 属性使用 <var>angle</var> 作为值进行 <a
        href="types.html#TermReserialize">重新序列化</a>。</p>


  </div>

  <script src="//www.w3.org/scripts/TR/2016/fixup.js"></script>
  <script src="/dropdown.js"></script>
  <script src="https://www.w3.org/TR/SVG2/style/expanders.js"></script>
</body>

</html>