<!DOCTYPE html>
<html lang="zh-hans" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- <meta name="generator" content="ReSpec 35.5.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>媒体源扩展™</title>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>



    <link rel="stylesheet" href="https://www.w3.org/TR/media-source-2/mse.css">

    <meta name="color-scheme" content="light">
    <!-- <meta name="revision" content="3b3254f4709e3f55e83452b635a875e63795b405"> -->
    <link rel="canonical" href="https://www.w3.org/TR/media-source-2/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "shortName": "media-source-2",
  "prevRecURI": "https://www.w3.org/TR/2016/REC-media-source-20161117/",
  "editors": [
    {
      "name": "Jean-Yves Avenard",
      "mailto": "jya@apple.com",
      "company": "Apple Inc.",
      "companyURL": "https://www.apple.com/",
      "w3cid": "115886",
      "url": "mailto:jya@apple.com"
    },
    {
      "name": "Mark Watson",
      "company": "Netflix Inc.",
      "companyURL": "https://www.netflix.com/",
      "w3cid": "46379"
    }
  ],
  "formerEditors": [
    {
      "name": "Matthew Wolenetz",
      "retiredDate": "2024-02-01",
      "mailto": "matt.wolenetz@gmail.com",
      "company": "W3C Invited Expert",
      "url": "mailto:matt.wolenetz@gmail.com"
    },
    {
      "name": "Jerry Smith",
      "retiredDate": "2017-09-01",
      "company": "Microsoft Corporation",
      "companyURL": "https://www.microsoft.com/"
    },
    {
      "name": "Aaron Colwell",
      "retiredDate": "2015-04-01",
      "company": "Google Inc.",
      "companyURL": "https://www.google.com/"
    },
    {
      "name": "Adrian Bateman",
      "retiredDate": "2015-04-01",
      "company": "Microsoft Corporation",
      "companyURL": "https://www.microsoft.com/"
    }
  ],
  "mseDefGroupName": "media-source",
  "group": "media",
  "github": "w3c/media-source",
  "caniuse": "mediasource",
  "testsuiteURI": "https://wpt.live/media-source/",
  "wgPublicList": "public-media-wg",
  "preProcess": [
    null
  ],
  "postProcess": [
    null
  ],
  "gitRevision": "612d3f54b1d35bafa5604a46af3e2e2935134fd2",
  "publishDate": "2025-11-04",
  "previousMaturity": "WD",
  "previousPublishDate": "2025-10-31",
  "publishISODate": "2025-11-04T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 04 November 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body data-cite="WEBIDL html dom url fileapi infra" class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">媒体源扩展™</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a> <time class="dt-published"
                datetime="2025-11-04">2025年11月4日</time></p>
        <details open="">
            <summary>关于本文档的更多信息</summary>
            <dl>
                <dt>此版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-media-source-2-20251104/">https://www.w3.org/TR/2025/WD-media-source-2-20251104/</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/media-source-2/">https://www.w3.org/TR/media-source-2/</a>
                </dd>
                <dt>最新编辑草案：</dt>
                <dd><a href="https://w3c.github.io/media-source/">https://w3c.github.io/media-source/</a></dd>
                <dt>历史记录：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/media-source-2/">https://www.w3.org/standards/history/media-source-2/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/media-source/commits/">提交历史</a>
                </dd>




                <dt>最新推荐标准：</dt>
                <dd><a
                        href="https://www.w3.org/TR/2016/REC-media-source-20161117/">https://www.w3.org/TR/2016/REC-media-source-20161117/</a>
                </dd>
                <dt>编辑：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="115886">
                    <a class="ed_mailto u-email email p-name" href="mailto:jya@apple.com">Jean-Yves Avenard</a> (<a
                        class="p-org org h-org" href="https://www.apple.com/">Apple公司</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="46379">
                    <span class="p-name fn">Mark Watson</span> (<a class="p-org org h-org"
                        href="https://www.netflix.com/">Netflix公司</a>)
                </dd>
                <dt>
                    前编辑：
                </dt>
                <dd class="editor p-author h-card vcard">
                    <a class="ed_mailto u-email email p-name" href="mailto:matt.wolenetz@gmail.com">Matthew Wolenetz</a>
                    (<span class="p-org org h-org">W3C 特邀专家</span>) - 截止至 <time datetime="2024-02-01">2024年2月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Jerry Smith</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com/">微软公司</a>) - 截止至 <time datetime="2017-09-01">2017年9月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Aaron Colwell</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">谷歌公司</a>) - 截止至 <time datetime="2015-04-01">2015年4月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Adrian Bateman</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com/">微软公司</a>) - 截止至 <time datetime="2015-04-01">2015年4月1日</time>
                </dd>

                <dt>反馈：</dt>
                <dd>
                    <a href="https://github.com/w3c/media-source/">GitHub w3c/media-source</a>
                    (<a href="https://github.com/w3c/media-source/pulls/">拉取请求</a>,
                    <a href="https://github.com/w3c/media-source/issues/new/choose">新建议</a>,
                    <a href="https://github.com/w3c/media-source/issues/">开放议题</a>)
                </dd>
                <dd><a
                        href="mailto:public-media-wg@w3.org?subject=%5Bmedia-source-2%5D%20YOUR%20TOPIC%20HERE">public-media-wg@w3.org</a>
                    邮件主题行请使用 <kbd>[media-source-2] <em>… 消息主题 …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-media-wg">邮件存档</a>)</dd>


                <dt class="caniuse-title">浏览器支持：</dt>
                <dd class="caniuse-stats"><a href="https://caniuse.com/mediasource">caniuse.com</a></dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        本规范扩展了 <a data-link-type="interface" data-lt="HTMLMediaElement"
            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]，
        允许 JavaScript 生成用于播放的媒体流。JavaScript 生成流可满足多种使用场景，如自适应流媒体和直播时移等。
    </section>
    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p><em>本节描述本文档在发布时的状态。当前 <abbr title="World Wide Web Consortium">W3C</abbr>
                发布文档及本技术报告最新修订版可在
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> 标准与草案索引</a>中查阅。</em>
        </p>
        <p>
            除编辑性更新外，自 <abbr title="World Wide Web Consortium">W3C</abbr> 推荐标准
            <a href="https://www.w3.org/TR/2016/REC-media-source-20161117/">2016年11月</a>发布以来的实质性变化包括：
        </p>
        <ul>
            <li>增加了 <a data-link-type="idl" data-lt="changeType()" href="#dom-sourcebuffer-changetype"
                    class="internalDFN"
                    id="ref-for-dom-sourcebuffer-changetype-1"><code>changeType</code></a><code>()</code>
                方法，可在不同编解码器或字节流间切换
            </li>
            <li>可以在专用工作线程中创建和使用 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                    class="internalDFN" id="ref-for-dom-mediasource-1"><code>MediaSource</code></a> 对象
            </li>
            <li>移除了 <a data-link-type="method" data-lt="createObjectURL()"
                    href="https://www.w3.org/TR/FileAPI/#dfn-createObjectURL"><code>createObjectURL</code></a><code>()</code>
                对 <a data-link-type="interface" data-lt="URL"
                    href="https://url.spec.whatwg.org/#url"><code>URL</code></a> 对象的扩展，相关功能已集成至 File API [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-fileapi" title="File API">FILEAPI</a></cite>]
            </li>
            <li>新增了 <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource"
                    class="internalDFN" id="ref-for-dom-managedmediasource-1"><code>ManagedMediaSource</code></a>、<a
                    data-link-type="idl" data-lt="ManagedSourceBuffer" href="#dom-managedsourcebuffer"
                    class="internalDFN" id="ref-for-dom-managedsourcebuffer-1"><code>ManagedSourceBuffer</code></a> 和
                <a data-link-type="idl" data-lt="BufferedChangeEvent" href="#dom-bufferedchangeevent"
                    class="internalDFN" id="ref-for-dom-bufferedchangeevent-1"><code>BufferedChangeEvent</code></a>
                接口，支持节能流媒体和代理主动清理已缓冲媒体
            </li>
        </ul>
        <p>
            完整变更列表请参见 <a href="https://github.com/w3c/media-source/commits/main">提交历史</a>。
        </p>
        <p>
            工作组维护着<a href="https://github.com/w3c/media-source/issues">编辑尚未处理的所有问题报告列表</a>。
        </p>
        <p>
            实现者需注意本规范并不稳定。<strong>未参与相关讨论的实现者可能会发现规范发生不兼容变化。</strong>有兴趣在本规范进入候选推荐阶段前进行实现的厂商应关注
            <a href="https://github.com/w3c/media-source">GitHub 仓库</a>并参与讨论。
        </p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/media">媒体工作组</a>以
            <a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">推荐标准流程</a>发布为工作草案。
        </p>
        <p>作为工作草案发布，并不意味着 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p>
            本文档为草稿，可能随时被更新、替换或废止。除“进行中的工作”外，不适宜引用本文件。

        </p>
        <p>

            本文档由遵循
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                专利政策</a>
            的小组制作。


            <abbr title="World Wide Web Consortium">W3C</abbr> 维护着
            <a rel="disclosure" href="https://www.w3.org/groups/wg/media/ipr">本小组相关专利公开的公共列表</a>；
            该页面还包含专利披露说明。个人如获知某专利涉及
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">必要权利要求</a>
            ，须遵循
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第6节</a>进行披露。

        </p>
        <p>
            本文档适用
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">2025年8月18日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> 流程文件</a>。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    引言
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#goals"><bdi class="secno">1.1 </bdi>
                            目标
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#definitions"><bdi class="secno">2. </bdi>
                    定义
                </a></li>
            <li class="tocline"><a class="tocxref" href="#mediasource"><bdi class="secno">3. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="MediaSource"
                        data-dfn-for=""><code>MediaSource</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#handle-attribute"><bdi class="secno">3.1 </bdi>
                            <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="handle"
                                data-dfn-for="MediaSource" data-type="MediaSourceHandle" data-lt="handle"
                                data-local-lt="MediaSource.handle"><code>handle</code></span> 属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#sourcebuffers-attribute"><bdi class="secno">3.2 </bdi>
                            <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="sourceBuffers" data-dfn-for="MediaSource" data-type="SourceBufferList"
                                data-lt="sourceBuffers"
                                data-local-lt="MediaSource.sourceBuffers"><code>sourceBuffers</code></span> 属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#activesourcebuffers-attribute"><bdi class="secno">3.3
                            </bdi>
                            <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="activeSourceBuffers" data-dfn-for="MediaSource" data-type="SourceBufferList"
                                data-lt="activeSourceBuffers"
                                data-local-lt="MediaSource.activeSourceBuffers"><code>activeSourceBuffers</code></span>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#readystate-attribute"><bdi class="secno">3.4 </bdi>
                            <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="readyState"
                                data-dfn-for="MediaSource" data-type="ReadyState" data-lt="readyState"
                                data-local-lt="MediaSource.readyState"><code>readyState</code></span> 属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#duration-attribute"><bdi class="secno">3.5 </bdi>
                            <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="duration"
                                data-dfn-for="MediaSource" data-type="unrestricted double" data-lt="duration"
                                data-local-lt="MediaSource.duration"><code>duration</code></span> 属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#canconstructindedicatedworker-attribute"><bdi
                                class="secno">3.6 </bdi>
                            <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="canConstructInDedicatedWorker" data-dfn-for="MediaSource"
                                data-type="boolean" data-lt="canConstructInDedicatedWorker"
                                data-local-lt="MediaSource.canConstructInDedicatedWorker"><code>canConstructInDedicatedWorker</code></span>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#addsourcebuffer-method"><bdi class="secno">3.7 </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation"
                                data-title="addSourceBuffer()" data-dfn-for="MediaSource" data-type="SourceBuffer"
                                data-lt="addSourceBuffer()|addSourceBuffer(type)"
                                data-local-lt="MediaSource.addSourceBuffer|MediaSource.addSourceBuffer()|addSourceBuffer"><code>addSourceBuffer()</code></span>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#removesourcebuffer-method"><bdi class="secno">3.8
                            </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation"
                                data-title="removeSourceBuffer()" data-dfn-for="MediaSource" data-type="undefined"
                                data-lt="removeSourceBuffer()|removeSourceBuffer(sourceBuffer)"
                                data-local-lt="MediaSource.removeSourceBuffer|MediaSource.removeSourceBuffer()|removeSourceBuffer"><code>removeSourceBuffer()</code></span>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#endofstream-method"><bdi class="secno">3.9 </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation" data-title="endOfStream()"
                                data-dfn-for="MediaSource" data-type="undefined"
                                data-lt="endOfStream()|endOfStream(error)"
                                data-local-lt="MediaSource.endOfStream|MediaSource.endOfStream()|endOfStream"><code>endOfStream()</code></span>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#setliveseekablerange-method"><bdi class="secno">3.10
                            </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation"
                                data-title="setLiveSeekableRange()" data-dfn-for="MediaSource" data-type="undefined"
                                data-lt="setLiveSeekableRange()|setLiveSeekableRange(start, end)"
                                data-local-lt="MediaSource.setLiveSeekableRange|MediaSource.setLiveSeekableRange()|setLiveSeekableRange"><code>setLiveSeekableRange()</code></span>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#clearliveseekablerange-method"><bdi class="secno">3.11
                            </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation"
                                data-title="clearLiveSeekableRange()" data-dfn-for="MediaSource" data-type="undefined"
                                data-lt="clearLiveSeekableRange()"
                                data-local-lt="MediaSource.clearLiveSeekableRange|MediaSource.clearLiveSeekableRange()|clearLiveSeekableRange"><code>clearLiveSeekableRange()</code></span>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#istypesupported-method"><bdi class="secno">3.12 </bdi>
                            <span data-export="" data-dfn-type="method" data-idl="operation"
                                data-title="isTypeSupported()" data-dfn-for="MediaSource" data-type="boolean"
                                data-lt="isTypeSupported()|isTypeSupported(type)"
                                data-local-lt="MediaSource.isTypeSupported|MediaSource.isTypeSupported()|isTypeSupported"><code>isTypeSupported()</code></span>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediasource-events"><bdi class="secno">3.13 </bdi>
                            事件概览
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediasource-in-worker-communication-model"><bdi
                                class="secno">3.14 </bdi>
                            <span>跨上下文通信模型</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediasource-algorithms"><bdi class="secno">3.15 </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#mediasource-attach"><bdi class="secno">3.15.1
                                    </bdi>
                                    <span>绑定到媒体元素</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mediasource-detach"><bdi class="secno">3.15.2
                                    </bdi>
                                    <span>从媒体元素解绑</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mediasource-seeking"><bdi class="secno">3.15.3
                                    </bdi>
                                    <span>定位</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#buffer-monitoring"><bdi class="secno">3.15.4
                                    </bdi>
                                    <span>SourceBuffer 监控</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#active-source-buffer-changes"><bdi
                                        class="secno">3.15.5 </bdi>
                                    <span>选中/启用轨道状态变更</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#duration-change-algorithm"><bdi
                                        class="secno">3.15.6 </bdi>
                                    <span>时长变更</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#end-of-stream-algorithm"><bdi
                                        class="secno">3.15.7 </bdi>
                                    <span>流结束</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mirror-if-necessary-algorithm"><bdi
                                        class="secno">3.15.8 </bdi>
                                    <span>必要时镜像</span>
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediasourcehandle"><bdi class="secno">4. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="MediaSourceHandle"
                        data-dfn-for=""><code>MediaSourceHandle</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#transfer"><bdi class="secno">4.1 </bdi>
                            传输
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#sourcebuffer"><bdi class="secno">5. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="SourceBuffer"
                        data-dfn-for=""><code>SourceBuffer</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes"><bdi class="secno">5.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods"><bdi class="secno">5.2 </bdi>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#track-buffers"><bdi class="secno">5.3 </bdi>
                            轨道缓冲区
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#sourcebuffer-events"><bdi class="secno">5.4 </bdi>
                            事件概要
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#sourcebuffer-algorithms"><bdi class="secno">5.5 </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-segment-parser-loop"><bdi
                                        class="secno">5.5.1 </bdi>
                                    <span>分段解析循环</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-reset-parser-state"><bdi
                                        class="secno">5.5.2 </bdi>
                                    <span>重置解析器状态</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-append-error"><bdi
                                        class="secno">5.5.3 </bdi>
                                    <span data-export="">追加错误</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-prepare-append"><bdi
                                        class="secno">5.5.4 </bdi>
                                    <span>准备追加</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-buffer-append"><bdi
                                        class="secno">5.5.5 </bdi>
                                    <span>缓冲区追加</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-range-removal"><bdi
                                        class="secno">5.5.6 </bdi>
                                    <span>范围移除</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-init-segment-received"><bdi
                                        class="secno">5.5.7 </bdi>
                                    <span>接收到初始化分段</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-coded-frame-processing"><bdi
                                        class="secno">5.5.8 </bdi>
                                    <span data-export="">编码帧处理</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-coded-frame-removal"><bdi
                                        class="secno">5.5.9 </bdi>
                                    <span>编码帧移除</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-coded-frame-eviction"><bdi
                                        class="secno">5.5.10 </bdi>
                                    <span>编码帧清除</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#sourcebuffer-audio-splice-frame-algorithm"><bdi class="secno">5.5.11 </bdi>
                                    <span>音频拼接帧</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#sourcebuffer-audio-splice-rendering-algorithm"><bdi class="secno">5.5.12
                                    </bdi>
                                    <span>音频拼接渲染</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#sourcebuffer-text-splice-frame-algorithm"><bdi
                                        class="secno">5.5.13 </bdi>
                                    <span>文本拼接帧</span>
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#sourcebufferlist"><bdi class="secno">6. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="SourceBufferList"
                        data-dfn-for=""><code>SourceBufferList</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-0"><bdi class="secno">6.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-0"><bdi class="secno">6.2 </bdi>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#sourcebufferlist-events"><bdi class="secno">6.3 </bdi>
                            事件摘要
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#managedmediasource-interface"><bdi class="secno">7. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="ManagedMediaSource"
                        data-dfn-for=""><code>ManagedMediaSource</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-1"><bdi class="secno">7.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#event-summary"><bdi class="secno">7.2 </bdi>
                            事件摘要
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#algorithms"><bdi class="secno">7.3 </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#managedsourcebuffer-monitoring"><bdi
                                        class="secno">7.3.1 </bdi>
                                    <code>ManagedSourceBuffer</code> 监控
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#memory-cleanup"><bdi class="secno">7.3.2
                                    </bdi>
                                    <span data-dfn-for="ManagedMediaSource">内存清理</span>
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#bufferedchangeevent-interface"><bdi class="secno">8. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="BufferedChangeEvent"
                        data-dfn-for=""><code>BufferedChangeEvent</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-2"><bdi class="secno">8.1 </bdi>
                            属性
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#managedsourcebuffer-interface"><bdi class="secno">9. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="ManagedSourceBuffer"
                        data-dfn-for=""><code>ManagedSourceBuffer</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-3"><bdi class="secno">9.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#event-summary-0"><bdi class="secno">9.2 </bdi>
                            事件摘要
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#algorithms-0"><bdi class="secno">9.3 </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#buffered-change"><bdi class="secno">9.3.1
                                    </bdi>
                                    缓冲变更
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#memory-cleanup-0"><bdi class="secno">9.3.2
                                    </bdi>
                                    <span data-dfn-for="ManagedSourceBuffer">内存清理</span>
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#htmlmediaelement-extensions"><bdi class="secno">10. </bdi>
                    HTMLMediaElement 扩展
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-extensions-seekable"><bdi
                                class="secno">10.1 </bdi>
                            <span data-xref-type="_IDL_" data-link-type="interface" data-lt="HTMLMediaElement"
                                data-cite="html" data-cite-path="/media.html" data-cite-frag="htmlmediaelement"
                                class="formerLink"><code>HTMLMediaElement</code></span> 的 <span
                                data-link-type="attribute" data-xref-type="attribute|dict-member|const"
                                data-link-for="HTMLMediaElement" data-xref-for="HTMLMediaElement" data-cite="html"
                                data-cite-path="/media.html" data-cite-frag="dom-media-seekable"
                                class="formerLink"><code>seekable</code></span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-extensions-buffered"><bdi
                                class="secno">10.2 </bdi>
                            <span data-xref-type="_IDL_" data-link-type="interface" data-lt="HTMLMediaElement"
                                data-cite="html" data-cite-path="/media.html" data-cite-frag="htmlmediaelement"
                                class="formerLink"><code>HTMLMediaElement</code></span> 的 <span
                                data-link-type="attribute" data-xref-type="attribute|dict-member|const"
                                data-link-for="HTMLMediaElement" data-xref-for="HTMLMediaElement" data-cite="html"
                                data-cite-path="/media.html" data-cite-frag="dom-media-buffered"
                                class="formerLink"><code>buffered</code></span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-extensions-srcobject"><bdi
                                class="secno">10.3 </bdi>
                            <span data-xref-type="_IDL_" data-link-type="interface" data-lt="HTMLMediaElement"
                                data-cite="html" data-cite-path="/media.html" data-cite-frag="htmlmediaelement"
                                class="formerLink"><code>HTMLMediaElement</code></span> 的 <span
                                data-link-type="attribute" data-xref-type="attribute|dict-member|const"
                                data-link-for="HTMLMediaElement" data-xref-for="HTMLMediaElement" data-cite="html"
                                data-cite-path="/media.html" data-cite-frag="dom-media-srcobject"
                                class="formerLink"><code>srcObject</code></span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#audio-track-extensions"><bdi class="secno">11. </bdi>
                    <code>AudioTrack</code> 扩展
                </a></li>
            <li class="tocline"><a class="tocxref" href="#video-track-extensions"><bdi class="secno">12. </bdi>
                    <code>VideoTrack</code> 扩展
                </a></li>
            <li class="tocline"><a class="tocxref" href="#text-track-extensions"><bdi class="secno">13. </bdi>
                    <code>TextTrack</code> 扩展
                </a></li>
            <li class="tocline"><a class="tocxref" href="#byte-stream-formats"><bdi class="secno">14. </bdi>
                    <span data-export="">字节流格式</span>
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">15. </bdi>一致性</a></li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">16. </bdi>
                    示例
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#using-media-source-extensions"><bdi class="secno">16.1
                            </bdi>
                            使用 Media Source Extensions
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#using-a-managed-media-source"><bdi class="secno">16.2
                            </bdi>
                            使用 Managed Media Source
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">17. </bdi>
                    致谢
                </a></li>
            <li class="tocline"><a class="tocxref" href="#VideoPlaybackQuality"><bdi class="secno">A. </bdi>
                    VideoPlaybackQuality
                </a></li>
            <li class="tocline"><a class="tocxref" href="#issue-summary"><bdi class="secno">B. </bdi>问题摘要</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>参考</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
                            </bdi>规范性引用</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2
                            </bdi>非规范性引用</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction" class="informative">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                引言
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>本节为非规范内容。</em></p>

        <p>
            本规范允许 JavaScript 动态构建 &lt;audio&gt; 和 &lt;video&gt; 的媒体流。它定义了一个 MediaSource 对象，可作为 HTMLMediaElement
            的媒体数据源。MediaSource 对象包含一个或多个
            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                id="ref-for-dom-sourcebuffer-1"><code>SourceBuffer</code></a> 对象。应用可以把数据分段追加到 <a data-link-type="idl"
                data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                id="ref-for-dom-sourcebuffer-2"><code>SourceBuffer</code></a> 对象，并能根据系统性能等因素调整追加数据的质量。<a
                data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                id="ref-for-dom-sourcebuffer-3"><code>SourceBuffer</code></a>
            对象中的数据会作为音频、视频和文本轨道缓冲区进行管理，解码后播放。与这些扩展配套使用的字节流规范可在字节流格式注册表 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-mse-registry"
                    title="Media Source Extensions™ Byte Stream Format Registry">MSE-REGISTRY</a></cite>] 中查阅。
        </p>
        <figure id="fig-media-source-pipeline-model-diagram">
            <a href="https://w3c.github.io/media-source/pipeline_model_description.html#pipelinedesc">
                <picture><img src="https://www.w3.org/TR/media-source-2/pipeline_model.svg" alt="媒体源管道模型图"></picture>
            </a>
            <figcaption><a class="self-link" href="#fig-media-source-pipeline-model-diagram">图 <bdi
                        class="figno">1</bdi></a> <span class="fig-title">
                    媒体源管道模型图
                </span></figcaption>
        </figure>
        <section id="goals">
            <div class="header-wrapper">
                <h3 id="x1-1-goals"><bdi class="secno">1.1 </bdi>
                    目标
                </h3><a class="self-link" href="#goals" aria-label="Permalink for Section 1.1"></a>
            </div>

            <p>
                本规范设计时考虑了以下目标：
            </p>
            <ul>
                <li>允许 JavaScript 构建与媒体获取方式无关的媒体流。</li>
                <li>定义拼接和缓冲模型，便于实现自适应流媒体、广告插入、时移和视频编辑等场景。</li>
                <li>尽量减少 JavaScript 中对媒体解析的需求。</li>
                <li>最大化利用浏览器缓存。</li>
                <li>为字节流格式规范提供要求。</li>
                <li>不强制支持任何特定的媒体格式或编解码器。</li>
            </ul>
            <p>
                本规范定义了：
            </p>
            <ul>
                <li>用户代理的规范性行为，保障不同用户代理与 Web 应用在处理媒体数据时的互操作性。</li>
                <li>规范性要求，使其他规范可定义在本规范中使用的媒体格式。</li>
            </ul>
        </section>
    </section>
    <section id="definitions">
        <div class="header-wrapper">
            <h2 id="x2-definitions"><bdi class="secno">2. </bdi>
                定义
            </h2><a class="self-link" href="#definitions" aria-label="Permalink for Section 2."></a>
        </div>

        <dl>
            <dt>
                <dfn id="dfn-active-track-buffers" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">活动轨道缓冲区</dfn>
            </dt>
            <dd>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                        id="ref-for-track-buffer-1">轨道缓冲区</a>为 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-1">编码帧</a>提供数据，供
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-enabled"><code>enabled</code></a>
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-audiotracks"><code>audioTracks</code></a>、
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-selected"><code>selected</code></a>
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-videotracks"><code>videoTracks</code></a>，
                    以及
                    <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-showing">"showing"</a></code>
                    或
                    <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-hidden">"hidden"</a></code>
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-texttracks"><code>textTracks</code></a>使用。
                    这些轨道都关联于 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-4"><code>SourceBuffer</code></a> 对象，并在
                    <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-1"><code>activeSourceBuffers</code></a> 列表中。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-append-window" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">追加窗口</dfn>
            </dt>
            <dd>
                <p>
                    用于追加时过滤 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-2">编码帧</a>的 <a data-link-type="dfn|abstract-op"
                        href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-1">展示时间戳</a>范围。追加窗口表示一个连续的时间区间，拥有起始和结束时间。展示时间戳在该区间内的编码帧可追加到
                    <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-5"><code>SourceBuffer</code></a>，区间外的编码帧会被过滤。追加窗口的起止时间分别由
                    <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowstart" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-appendwindowstart-1"><code>appendWindowStart</code></a> 和
                    <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowend" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-appendwindowend-1"><code>appendWindowEnd</code></a> 属性控制。
                </p>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-plurals="coded frames" id="dfn-coded-frame" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">编码帧</dfn>
            </dt>
            <dd>
                <p>
                    一组包含 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-3">展示时间戳</a>、
                    <a data-link-type="dfn|abstract-op" href="#dfn-decode-timestamp" class="internalDFN"
                        id="ref-for-dfn-decode-timestamp-1">解码时间戳</a> 和 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame-duration" class="internalDFN"
                        id="ref-for-dfn-coded-frame-duration-1">编码帧时长</a>的媒体数据单元。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-coded-frame-duration" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">编码帧时长</dfn>
            </dt>
            <dd>
                <p>
                    指某个 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-3">编码帧</a>的时长。对于视频和文本，时长表示帧或文本应被显示的时间；对于音频，时长表示编码帧包含的所有采样的总和。例如，若音频帧包含441个采样，采样率为44100Hz，则帧时长为10毫秒。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-coded-frame-end-timestamp" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">编码帧结束时间戳</dfn>
            </dt>
            <dd>
                <p>
                    某个 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-4">编码帧</a>的 <a data-link-type="dfn|abstract-op"
                        href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-4">展示时间戳</a>加上其 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame-duration" class="internalDFN"
                        id="ref-for-dfn-coded-frame-duration-2">编码帧时长</a>，表示紧跟该编码帧之后的展示时间戳。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-coded-frame-group" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">编码帧组</dfn>
            </dt>
            <dd>
                <p>
                    一组相邻、解码时间戳单调递增且无间隙的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-5">编码帧</a>。由 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-1">编码帧处理</a>算法和 <a data-link-type="idl" data-lt="abort()"
                        href="#dom-sourcebuffer-abort" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-abort-1"><code>abort</code></a><code>()</code> 调用检测到的间断将触发新编码帧组的开始。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="decode timestamps" id="dfn-decode-timestamp" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">解码时间戳</dfn>
            </dt>
            <dd>
                <p>
                    解码时间戳指示帧需要被解码的最晚时间（假设该帧及其依赖帧均瞬时解码和渲染），等于最早依赖该帧的 <a data-link-type="dfn|abstract-op"
                        href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-6">展示时间戳</a>（按 <a data-link-type="dfn|abstract-op"
                        href="#presentation-order" class="internalDFN"
                        id="ref-for-presentation-order-1">展示顺序</a>）。如能按非展示顺序解码，字节流中必须存在或可推导解码时间戳，否则用户代理必须运行 <a
                        data-link-type="dfn|abstract-op" href="#dfn-append-error" class="internalDFN"
                        id="ref-for-dfn-append-error-1">追加错误</a>算法。若不能按非展示顺序解码且字节流无解码时间戳，则解码时间戳等于展示时间戳。
                </p>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-plurals="initialization segments"
                    id="dfn-initialization-segment" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">初始化分段</dfn>
            </dt>
            <dd>
                <p>
                    包含解码一组 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                        id="ref-for-dfn-media-segment-1">媒体分段</a>所需全部初始化信息的字节序列，包括编解码器初始化数据、复用分段的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                        id="ref-for-dfn-track-id-1">轨道ID</a>映射、时间戳偏移（如编辑列表）等。
                </p>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注</span></div>
                    <p class="">
                        字节流格式注册表中的 <a data-link-type="dfn|abstract-op" href="#byte-stream-format-specs"
                            class="internalDFN" id="ref-for-byte-stream-format-specs-1">字节流格式规范</a>包含格式相关示例。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-plurals="media segments" id="dfn-media-segment" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">媒体分段</dfn>
            </dt>
            <dd>
                <p>
                    包含某一 <a
                        href="https://html.spec.whatwg.org/multipage/media.html#media-timeline">媒体时间线</a>片段的分包及带时间戳的媒体数据的字节序列。媒体分段总是与最近追加的
                    <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment" class="internalDFN"
                        id="ref-for-dfn-initialization-segment-1">初始化分段</a>关联。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>注</span></div>
                    <p class="">
                        字节流格式注册表中的 <a data-link-type="dfn|abstract-op" href="#byte-stream-format-specs"
                            class="internalDFN" id="ref-for-byte-stream-format-specs-2">字节流格式规范</a>包含格式相关示例。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="mediasource-object-url" data-plurals="mediasource object urls" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">MediaSource 对象 URL</dfn>
            </dt>
            <dd>
                <p>
                    一个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-2"><code>MediaSource</code></a> 对象 URL 是通过 <a
                        data-link-type="method" data-lt="createObjectURL()"
                        href="https://www.w3.org/TR/FileAPI/#dfn-createObjectURL"><code>createObjectURL</code></a><code>()</code>
                    创建的唯一 <a data-link-type="dfn" href="https://www.w3.org/TR/FileAPI/#blob-url">blob URL</a>。它用于将 <a
                        data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-3"><code>MediaSource</code></a> 对象绑定到 HTMLMediaElement。
                </p>
                <p>
                    这些 URL 与 <a data-link-type="dfn" href="https://www.w3.org/TR/FileAPI/#blob-url">blob URLs</a>
                    相同，但其定义中凡涉及 <a data-link-type="interface" data-lt="File"
                        href="https://www.w3.org/TR/FileAPI/#dfn-file"><code>File</code></a> 和 <a
                        data-link-type="interface" data-lt="Blob"
                        href="https://www.w3.org/TR/FileAPI/#dfn-Blob"><code>Blob</code></a> 对象的内容，也适用于 <a
                        data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-4"><code>MediaSource</code></a> 对象。
                </p>
                <p>
                    MediaSource 对象 URL 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> 是调用 <a
                        data-link-type="method" data-lt="createObjectURL()"
                        href="https://www.w3.org/TR/FileAPI/#dfn-createObjectURL"><code>createObjectURL</code></a><code>()</code>
                    时 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">相关设置对象</a>的
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>注</span></div>
                    <p class="">
                        例如，MediaSource 对象 URL 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                        会影响媒体元素被
                        <a href="https://html.spec.whatwg.org/multipage/canvas.html#security-with-canvas-elements">canvas
                            消费</a>的方式。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="parent-media-source" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">父媒体源</dfn>
            </dt>
            <dd>
                <p>
                    某个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-6"><code>SourceBuffer</code></a> 对象的父媒体源是创建它的
                    <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-5"><code>MediaSource</code></a> 对象。
                </p>
            </dd>
            <dt>
                <dfn id="presentation-start-time" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">展示起始时间</dfn>
            </dt>
            <dd>
                <p>
                    展示起始时间是演示中最早的时间点，指定初始 <a
                        href="https://html.spec.whatwg.org/multipage/media.html#current-playback-position">播放位置</a>和 <a
                        href="https://html.spec.whatwg.org/multipage/media.html#earliest-possible-position">最早可能位置</a>。所有用本规范创建的演示的展示起始时间均为0。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>注意</span></div>
                    <p class="">
                        为了判断<a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                        是否包含了当前的播放位置，实现时
                        <em class="rfc2119">可以（MAY）</em>选择允许当前播放位置位于<a data-link-type="dfn|abstract-op"
                            href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-1">presentation start time</a>
                        处或之后，并且在第一个<a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                        之前，以便在该
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                        在 <a data-link-type="dfn|abstract-op" href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-2">presentation start time</a>
                        后的合理短时间内（如 1 秒）开始时，播放第一个<a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>。此容许是为了适应实际情况，即复用流中的各轨道通常不会都精确从<a
                            data-link-type="dfn|abstract-op" href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-3">presentation start time</a>开始。
                        实现<em class="rfc2119">必须（MUST）</em>报告实际缓存区间，无论是否做此容许。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="presentation-interval" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">展示区间</dfn>
            </dt>
            <dd>
                <p>
                    某个 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-6">编码帧</a>的展示区间是从其 <a data-link-type="dfn|abstract-op"
                        href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-8">展示时间戳</a>到 <a data-link-type="dfn|abstract-op"
                        href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-9">展示时间戳</a>加上 <a data-link-type="dfn|abstract-op"
                        data-lt="coded frame duration" href="#dfn-coded-frame-duration" class="internalDFN"
                        id="ref-for-dfn-coded-frame-duration-3">编码帧时长</a>的时间区间。例如，若编码帧展示时间戳为10秒，时长为100毫秒，则展示区间为[10-10.1)。注意区间起点为包含，终点为不包含。
                </p>
            </dd>
            <dt>
                <dfn id="presentation-order" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">展示顺序</dfn>
            </dt>
            <dd>
                <p>
                    编码帧在演示中被渲染的顺序。展示顺序通过按编码帧的 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                        class="internalDFN" id="ref-for-presentation-timestamp-10">展示时间戳</a>单调递增排序实现。
                </p>
            </dd>
            <dt>
                <dfn id="presentation-timestamp" data-export="" data-plurals="presentation timestamps" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">展示时间戳</dfn>
            </dt>
            <dd>
                <p>
                    演示中某一特定时间的引用。编码帧中的展示时间戳表示该帧应被渲染的时间。
                </p>
            </dd>
            <dt>
                <dfn id="random-access-point" data-export="" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">随机访问点</dfn>
            </dt>
            <dd>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                        id="ref-for-dfn-media-segment-2">媒体分段</a>中可在不依赖前序数据的情况下开始解码和连续播放的位置。视频通常为I帧位置，音频多数帧都可视为随机访问点。由于视频轨道随机访问点分布稀疏，复用流通常以这些点为流的随机访问点。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-sourcebuffer-byte-stream-format-specification" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">SourceBuffer 字节流格式规范</dfn>
            </dt>
            <dd>
                <p>
                    描述 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-7"><code>SourceBuffer</code></a> 实例可接受字节流格式的
                    <a data-link-type="dfn|abstract-op" href="#byte-stream-format-specs" class="internalDFN"
                        id="ref-for-byte-stream-format-specs-3">字节流格式规范</a>。<a data-link-type="dfn|abstract-op"
                        href="#byte-stream-format-specs" class="internalDFN"
                        id="ref-for-byte-stream-format-specs-4">字节流格式规范</a>最初由创建对象时 <a data-link-type="idl"
                        data-lt="addSourceBuffer()" href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                        id="ref-for-dom-mediasource-addsourcebuffer-1"><code>addSourceBuffer</code></a><code>()</code>
                    所传 <var data-type="DOMString">type</var> 决定，也可通过 <a data-link-type="idl" data-lt="changeType()"
                        href="#dom-sourcebuffer-changetype" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-changetype-2"><code>changeType</code></a><code>()</code> 方法更新。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-sourcebuffer-configuration" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn"><code>SourceBuffer</code> 配置</dfn>
            </dt>
            <dd>
                <p>
                    由单个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-6"><code>MediaSource</code></a> 实例拥有的、分布于一个或多个 <a
                        data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-9"><code>SourceBuffer</code></a> 的特定轨道集合。
                </p>
                <p>
                    实现必须至少支持1个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-7"><code>MediaSource</code></a> 对象，并具备如下配置：
                </p>
                <ul>
                    <li>一个 SourceBuffer，含1个音频轨道和/或1个视频轨道。</li>
                    <li>两个 SourceBuffer，一个用于处理单一音频轨道，另一个用于处理单一视频轨道。</li>
                </ul>
                <p>
                    MediaSource 对象须支持上述每种配置，但仅需同时支持一种。支持多种或更多配置属于实现质量问题。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="track descriptions" id="dfn-track-description" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">轨道描述</dfn>
            </dt>
            <dd>
                <p>
                    字节流格式相关结构，包含单轨道的 <a data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                        id="ref-for-dfn-track-id-2">轨道ID</a>、编解码器配置及其他元数据。单个初始化分段中的每个轨道描述均有唯一 <a
                        data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                        id="ref-for-dfn-track-id-3">轨道ID</a>。如轨道ID不唯一，用户代理必须运行 <a data-link-type="dfn|abstract-op"
                        href="#dfn-append-error" class="internalDFN" id="ref-for-dfn-append-error-2">追加错误</a>算法。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="track ids" id="dfn-track-id" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">轨道ID</dfn>
            </dt>
            <dd>
                <p>
                    轨道ID是字节流格式相关的标识符，用于标记字节流中属于某轨道的部分。轨道描述中的轨道ID标识媒体分段的哪些部分属于该轨道。
                </p>
            </dd>
        </dl>
    </section>
    <section id="mediasource" data-dfn-for="MediaSource">
        <div class="header-wrapper">
            <h2 id="x3-mediasource-interface"><bdi class="secno">3. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediasource" data-idl="interface"
                    data-title="MediaSource" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaSource</code></dfn> 接口
            </h2><a class="self-link" href="#mediasource" aria-label="Permalink for Section 3."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-8"><code>MediaSource</code></a> 接口表示用于
            <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的媒体数据源。它会记录此源的 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                id="ref-for-dom-mediasource-readystate-1"><code>readyState</code></a> 状态，以及可以用于向演示添加媒体数据的 <a
                href="#dom-sourcebuffer" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-sourcebuffer-10"><code>SourceBuffer</code></a> 对象列表。MediaSource 对象由 Web 应用创建，然后附加到
            HTMLMediaElement。应用通过 <a href="#dom-sourcebuffer" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-sourcebuffer-11"><code>SourceBuffer</code></a> 对象与 <a data-link-type="idl"
                href="#dom-mediasource-sourcebuffers" class="internalDFN"
                id="ref-for-dom-mediasource-sourcebuffers-1"><code>sourceBuffers</code></a> 向该源添加媒体数据。HTMLMediaElement
            在播放时会从 <a href="#dom-mediasource" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-mediasource-9"><code>MediaSource</code></a> 对象获取媒体数据。
        </p>
        <p>
            每个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-10"><code>MediaSource</code></a> 对象都拥有一个 <dfn data-dfn-for="MediaSource"
                data-idl="" data-noexport="" data-dfn-type="attribute" id="dfn-live-seekable-range" tabindex="0"
                aria-haspopup="dialog">[[live seekable
                range]]</dfn> 内部槽，用于存储一个 <a
                href="https://html.spec.whatwg.org/multipage/media.html#normalised-timeranges-object">标准化的 TimeRanges
                对象</a>。该对象在 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-11"><code>MediaSource</code></a> 创建时初始化为空的 <a data-link-type="interface"
                data-lt="TimeRanges"
                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a> 对象，通过 <a
                data-link-type="idl" data-lt="setLiveSeekableRange()" href="#dom-mediasource-setliveseekablerange"
                class="internalDFN"
                id="ref-for-dom-mediasource-setliveseekablerange-1"><code>setLiveSeekableRange</code></a><code>()</code>
            和
            <a data-link-type="idl" data-lt="clearLiveSeekableRange()" href="#dom-mediasource-clearliveseekablerange"
                class="internalDFN"
                id="ref-for-dom-mediasource-clearliveseekablerange-1"><code>clearLiveSeekableRange</code></a><code>()</code>
            维护，并在 <a href="#htmlmediaelement-extensions" data-matched-text="[[[#htmlmediaelement-extensions]]]"
                class="sec-ref"><bdi class="secno">10. </bdi>
                HTMLMediaElement 扩展</a>
            中用于修改 <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的
            <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seekable"><code>seekable</code></a>
            行为。
        </p>
        <p>
            每个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-12"><code>MediaSource</code></a> 对象都有一个 <dfn data-dfn-for="MediaSource"
                data-idl="" data-noexport="" data-dfn-type="attribute" id="dfn-has-ever-been-attached" tabindex="0"
                aria-haspopup="dialog">[[has ever been
                attached]]</dfn> 内部槽，用于存储一个 <a data-link-type="interface" data-lt="boolean"
                href="https://webidl.spec.whatwg.org/#idl-boolean"><code>boolean</code></a>。在
            <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-13"><code>MediaSource</code></a> 创建时初始化为 false，在扩展的
            <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>中（参见 <a
                data-link-type="dfn|abstract-op" href="#dfn-attaching-to-a-media-element" class="internalDFN"
                id="ref-for-dfn-attaching-to-a-media-element-1">绑定到媒体元素</a> 算法）被设置为 true。扩展的
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>会用此内部槽条件性地阻止通过
            <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                id="ref-for-dom-mediasourcehandle-1"><code>MediaSourceHandle</code></a>
            绑定到 <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的
            <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
            属性的 MediaSource 对象绑定。
        </p>
        <pre class="idl def" id="webidl-26865842"><span class="idlHeader"><a class="self-link" href="#webidl-26865842">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-readystate" data-title="ReadyState">enum <dfn data-export="" data-dfn-type="enum" id="dom-readystate" data-idl="enum" data-title="ReadyState" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>ReadyState</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-readystate-closed" id="ref-for-dom-readystate-closed-1"><code>closed</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-readystate-open" id="ref-for-dom-readystate-open-1"><code>open</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-readystate-ended" id="ref-for-dom-readystate-ended-1"><code>ended</code></a>"</span>,
};</span></code></pre>
        <dl data-dfn-for="ReadyState">
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-readystate-closed" data-idl="enum-value"
                    data-title="closed" data-dfn-for="ReadyState" tabindex="0"
                    aria-haspopup="dialog"><code>closed</code></dfn>
            </dt>
            <dd>
                表示该源当前未绑定到媒体元素。
            </dd>
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-readystate-open" data-idl="enum-value"
                    data-title="open" data-dfn-for="ReadyState" tabindex="0"
                    aria-haspopup="dialog"><code>open</code></dfn>
            </dt>
            <dd>
                该源已被媒体元素打开，可以向 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                    class="internalDFN" id="ref-for-dom-sourcebuffer-12"><code>SourceBuffer</code></a> 对象（在 <a
                    data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-15"><code>MediaSource</code></a> 的 <a data-link-type="idl"
                    href="#dom-mediasource-sourcebuffers" class="internalDFN"
                    id="ref-for-dom-mediasource-sourcebuffers-2"><code>sourceBuffers</code></a> 属性中）追加数据。
            </dd>
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-readystate-ended" data-idl="enum-value"
                    data-title="ended" data-dfn-for="ReadyState" tabindex="0"
                    aria-haspopup="dialog"><code>ended</code></dfn>
            </dt>
            <dd>
                该源仍绑定于媒体元素，但已调用 <a data-link-type="idl" data-lt="endOfStream()" href="#dom-mediasource-endofstream"
                    class="internalDFN"
                    id="ref-for-dom-mediasource-endofstream-1"><code>endOfStream</code></a><code>()</code>。
            </dd>
        </dl>
        <div class="issue" id="issue-container-number-276">
            <div role="heading" class="issue-title marker" id="h-issue" aria-level="3"><a
                    href="https://github.com/w3c/media-source/issues/276"><span class="issue-number">Issue
                        276</span></a><span class="issue-label">: MSE-in-Workers: 建议增加 "closing" readyState 以解释关闭过程中出现的新
                    `InvalidStateError` 异常 <a class="respec-gh-label"
                        href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                        style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                        aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
            <aside class="">
                <p>
                    建议新增 "<code>closing</code>" <a data-link-type="idl" href="#dom-mediasource-readystate"
                        class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-2"><code>ReadyState</code></a>，用于表示该源正在被并发地从媒体元素解绑。对于某些
                    <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-17"><code>MediaSource</code></a> 和 <a data-link-type="idl"
                        data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-13"><code>SourceBuffer</code></a> 在
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    的实现会很有帮助。
                </p>
            </aside>
        </div>
        <pre class="idl def" id="webidl-1031259774"><span class="idlHeader"><a class="self-link" href="#webidl-1031259774">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-endofstreamerror" data-title="EndOfStreamError">enum <dfn data-export="" data-dfn-type="enum" id="dom-endofstreamerror" data-idl="enum" data-title="EndOfStreamError" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>EndOfStreamError</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-endofstreamerror-network" id="ref-for-dom-endofstreamerror-network-1"><code>network</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-endofstreamerror-decode" id="ref-for-dom-endofstreamerror-decode-1"><code>decode</code></a>"</span>,
};</span></code></pre>
        <dl data-dfn-for="EndOfStreamError">
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-endofstreamerror-network" data-idl="enum-value"
                    data-title="network" data-dfn-for="EndOfStreamError" tabindex="0"
                    aria-haspopup="dialog"><code>network</code></dfn>
            </dt>
            <dd>
                <p>
                    终止播放并表示发生了网络错误。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>注</span></div>
                    <p class="">
                        JavaScript 应用 <em class="rfc2119">应当</em> 使用该状态码以网络错误终止播放。例如，获取媒体数据时发生网络错误。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-endofstreamerror-decode" data-idl="enum-value"
                    data-title="decode" data-dfn-for="EndOfStreamError" tabindex="0"
                    aria-haspopup="dialog"><code>decode</code></dfn>
            </dt>
            <dd>
                <p>
                    终止播放并表示发生了解码错误。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-4">
                    <div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>注</span></div>
                    <p class="">
                        JavaScript 应用 <em class="rfc2119">应当</em> 使用该状态码以解码错误终止播放。例如，处理带外媒体数据时发生解析错误。
                    </p>
                </div>
            </dd>
        </dl>
        <pre class="idl def" id="webidl-1502719514"><span class="idlHeader"><a class="self-link" href="#webidl-1502719514">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediasource" data-title="MediaSource">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediasource" id="ref-for-dom-mediasource-18"><code>MediaSource</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-mediasource-constructor" data-title="constructor" data-dfn-for="MediaSource">
    <dfn data-export="" data-dfn-type="constructor" id="dom-mediasource-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="MediaSource" data-lt="constructor()" data-local-lt="MediaSource.constructor|MediaSource.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>();</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-handle" data-title="handle" data-dfn-for="MediaSource">

    [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=DedicatedWorker</span>]
    readonly  attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediasourcehandle" class="internalDFN" id="ref-for-dom-mediasourcehandle-2"><code>MediaSourceHandle</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediasource-handle" id="ref-for-dom-mediasource-handle-1"><code>handle</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-sourcebuffers" data-title="sourceBuffers" data-dfn-for="MediaSource">
    readonly  attribute<span class="idlType"> <a data-link-type="idl" href="#dom-sourcebufferlist" class="internalDFN" id="ref-for-dom-sourcebufferlist-1"><code>SourceBufferList</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediasource-sourcebuffers" id="ref-for-dom-mediasource-sourcebuffers-3"><code>sourceBuffers</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-activesourcebuffers" data-title="activeSourceBuffers" data-dfn-for="MediaSource">
    readonly  attribute<span class="idlType"> <a data-link-type="idl" href="#dom-sourcebufferlist" class="internalDFN" id="ref-for-dom-sourcebufferlist-2"><code>SourceBufferList</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediasource-activesourcebuffers" id="ref-for-dom-mediasource-activesourcebuffers-2"><code>activeSourceBuffers</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-readystate" data-title="readyState" data-dfn-for="MediaSource">
    readonly  attribute<span class="idlType"> <a data-link-type="idl" href="#dom-readystate" class="internalDFN" id="ref-for-dom-readystate-1"><code>ReadyState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediasource-readystate" id="ref-for-dom-mediasource-readystate-3"><code>readyState</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-duration" data-title="duration" data-dfn-for="MediaSource">

    attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">unrestricted double</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediasource-duration" id="ref-for-dom-mediasource-duration-1"><code>duration</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-onsourceopen" data-title="onsourceopen" data-dfn-for="MediaSource">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-onsourceopen" data-idl="attribute" data-title="onsourceopen" data-dfn-for="MediaSource" data-type="EventHandler" data-lt="onsourceopen" data-local-lt="MediaSource.onsourceopen" class="idlName" tabindex="0" aria-haspopup="dialog"><code>onsourceopen</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-onsourceended" data-title="onsourceended" data-dfn-for="MediaSource">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-onsourceended" data-idl="attribute" data-title="onsourceended" data-dfn-for="MediaSource" data-type="EventHandler" data-lt="onsourceended" data-local-lt="MediaSource.onsourceended" class="idlName" tabindex="0" aria-haspopup="dialog"><code>onsourceended</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-onsourceclose" data-title="onsourceclose" data-dfn-for="MediaSource">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-onsourceclose" data-idl="attribute" data-title="onsourceclose" data-dfn-for="MediaSource" data-type="EventHandler" data-lt="onsourceclose" data-local-lt="MediaSource.onsourceclose" class="idlName" tabindex="0" aria-haspopup="dialog"><code>onsourceclose</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediasource-canconstructindedicatedworker" data-title="canConstructInDedicatedWorker" data-dfn-for="MediaSource">

    static readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediasource-canconstructindedicatedworker" id="ref-for-dom-mediasource-canconstructindedicatedworker-1"><code>canConstructInDedicatedWorker</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediasource-addsourcebuffer-type" data-title="addSourceBuffer" data-dfn-for="MediaSource"><span class="idlType">

    <a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-14"><code>SourceBuffer</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediasource-addsourcebuffer" id="ref-for-dom-mediasource-addsourcebuffer-2"><code>addSourceBuffer</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediasource-removesourcebuffer-sourcebuffer" data-title="removeSourceBuffer" data-dfn-for="MediaSource"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediasource-removesourcebuffer" id="ref-for-dom-mediasource-removesourcebuffer-1"><code>removeSourceBuffer</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-15"><code>SourceBuffer</code></a></span> <span class="idlParamName">sourceBuffer</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediasource-endofstream-error" data-title="endOfStream" data-dfn-for="MediaSource"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediasource-endofstream" id="ref-for-dom-mediasource-endofstream-2"><code>endOfStream</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-endofstreamerror" class="internalDFN" id="ref-for-dom-endofstreamerror-1"><code>EndOfStreamError</code></a></span> <span class="idlParamName">error</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediasource-setliveseekablerange-start-end" data-title="setLiveSeekableRange" data-dfn-for="MediaSource"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediasource-setliveseekablerange" id="ref-for-dom-mediasource-setliveseekablerange-2"><code>setLiveSeekableRange</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double">double</a></span> <span class="idlParamName">start</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double">double</a></span> <span class="idlParamName">end</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediasource-clearliveseekablerange" data-title="clearLiveSeekableRange" data-dfn-for="MediaSource"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediasource-clearliveseekablerange" id="ref-for-dom-mediasource-clearliveseekablerange-2"><code>clearLiveSeekableRange</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-mediasource-istypesupported-type" data-title="isTypeSupported" data-dfn-for="MediaSource">
    static<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediasource-istypesupported" id="ref-for-dom-mediasource-istypesupported-1"><code>isTypeSupported</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span>
};</span></code></pre>
        <section id="handle-attribute">
            <div class="header-wrapper">
                <h3 id="x3-1-handle-attribute"><bdi class="secno">3.1 </bdi>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-handle" data-idl="attribute"
                        data-title="handle" data-dfn-for="MediaSource" data-type="MediaSourceHandle" data-lt="handle"
                        data-local-lt="MediaSource.handle" tabindex="0" aria-haspopup="dialog"><code>handle</code></dfn>
                    属性
                </h3><a class="self-link" href="#handle-attribute" aria-label="Permalink for Section 3.1"></a>
            </div>
            <p>
                包含一个用于将专用 worker <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                    class="internalDFN" id="ref-for-dom-mediasource-19"><code>MediaSource</code></a> 对象通过 <a
                    data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                附加到
                <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的句柄。此句柄在本 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-20"><code>MediaSource</code></a> 对象多次访问时保持为同一个对象，但每个 <a
                    data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-21"><code>MediaSource</code></a> 对象各自独立。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-5">
                <div role="heading" class="note-title marker" id="h-note-5" aria-level="3"><span>注意</span></div>
                <p class="">
                    本规范未来可能允许在主 Window 上可见此属性。如果是这样，规范需要谨慎处理，以避免出现向后不兼容的变化，例如访问此属性时抛出异常等情况。
                </p>
            </div>
            <p>
                获取时，按以下步骤执行：
            </p>
            <ol>
                <li>如果本 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-23"><code>MediaSource</code></a> 对象的句柄尚未创建，则执行以下步骤：
                    <ol>
                        <li>令 <var data-type="MediaSourceHandle">created handle</var> 为新建 <a data-link-type="idl"
                                data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                                id="ref-for-dom-mediasourcehandle-3"><code>MediaSourceHandle</code></a> 对象及相关资源的结果，并与本
                            <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-24"><code>MediaSource</code></a> 内部关联。
                        </li>
                        <li>将属性值更新为 <var data-type="MediaSourceHandle">created handle</var>。
                        </li>
                    </ol>
                </li>
                <li>返回当前属性值的 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                        class="internalDFN" id="ref-for-dom-mediasourcehandle-4"><code>MediaSourceHandle</code></a> 对象。
                </li>
            </ol>
        </section>
        <section id="sourcebuffers-attribute">
            <div class="header-wrapper">
                <h3 id="x3-2-sourcebuffers-attribute"><bdi class="secno">3.2 </bdi>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-sourcebuffers"
                        data-idl="attribute" data-title="sourceBuffers" data-dfn-for="MediaSource"
                        data-type="SourceBufferList" data-lt="sourceBuffers" data-local-lt="MediaSource.sourceBuffers"
                        tabindex="0" aria-haspopup="dialog"><code>sourceBuffers</code></dfn> 属性
                </h3><a class="self-link" href="#sourcebuffers-attribute" aria-label="Permalink for Section 3.2"></a>
            </div>
            <p>
                包含与本 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                    id="ref-for-dom-sourcebuffer-16"><code>SourceBuffer</code></a> 关联的 <a data-link-type="idl"
                    data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-25"><code>MediaSource</code></a> 对象列表。当 <a data-link-type="idl"
                    data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-26"><code>MediaSource</code></a> 的 <a data-link-type="idl"
                    href="#dom-mediasource-readystate" class="internalDFN"
                    id="ref-for-dom-mediasource-readystate-4"><code>readyState</code></a> 等于 "<a data-link-type="idl"
                    href="#dom-readystate-closed" class="internalDFN"
                    id="ref-for-dom-readystate-closed-2"><code>closed</code></a>" 时，此列表为空。当 <a data-link-type="idl"
                    href="#dom-mediasource-readystate" class="internalDFN"
                    id="ref-for-dom-mediasource-readystate-5"><code>readyState</code></a> 状态变为 "<a data-link-type="idl"
                    href="#dom-readystate-open" class="internalDFN"
                    id="ref-for-dom-readystate-open-2"><code>open</code></a>" 时，可以使用 <a data-link-type="idl"
                    data-lt="addSourceBuffer()" href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                    id="ref-for-dom-mediasource-addsourcebuffer-3"><code>addSourceBuffer</code></a><code>()</code>
                向该列表添加 SourceBuffer 对象。
            </p>
        </section>
        <section id="activesourcebuffers-attribute">
            <div class="header-wrapper">
                <h3 id="x3-3-activesourcebuffers-attribute"><bdi class="secno">3.3 </bdi>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-activesourcebuffers"
                        data-idl="attribute" data-title="activeSourceBuffers" data-dfn-for="MediaSource"
                        data-type="SourceBufferList" data-lt="activeSourceBuffers"
                        data-local-lt="MediaSource.activeSourceBuffers" tabindex="0"
                        aria-haspopup="dialog"><code>activeSourceBuffers</code></dfn> 属性
                </h3><a class="self-link" href="#activesourcebuffers-attribute"
                    aria-label="Permalink for Section 3.3"></a>
            </div>
            <p>
                包含 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                    id="ref-for-dom-mediasource-sourcebuffers-4"><code>sourceBuffers</code></a> 的子集，这些缓冲区为
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-selected"><code>selected</code></a>
                视频轨道、
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-enabled"><code>enabled</code></a>
                音频轨道，以及
                <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-showing">"showing"</a></code>
                或
                <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-hidden">"hidden"</a></code>
                文本轨道提供数据。
            </p>
            <p>
                本列表中的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                    id="ref-for-dom-sourcebuffer-17"><code>SourceBuffer</code></a> 对象 <em class="rfc2119">必须</em> 与 <a
                    data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                    id="ref-for-dom-mediasource-sourcebuffers-5"><code>sourceBuffers</code></a> 属性中的顺序一致；例如，若仅
                sourceBuffers[0] 和 sourceBuffers[3] 在 <a data-link-type="idl"
                    href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                    id="ref-for-dom-mediasource-activesourcebuffers-3"><code>activeSourceBuffers</code></a> 中，则
                activeSourceBuffers[0] 必须等于 sourceBuffers[0]，activeSourceBuffers[1] 必须等于 sourceBuffers[3]。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-6">
                <div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>注意</span></div>
                <p class="">
                    <a href="#active-source-buffer-changes" data-matched-text="[[[#active-source-buffer-changes]]]"
                        class="sec-ref"><bdi class="secno">3.15.5 </bdi>
                        <span>选中/启用轨道状态变更</span></a> 一节描述了此属性的更新机制。
                </p>
            </div>
        </section>
        <section id="readystate-attribute">
            <div class="header-wrapper">
                <h3 id="x3-4-readystate-attribute"><bdi class="secno">3.4 </bdi>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-readystate" data-idl="attribute"
                        data-title="readyState" data-dfn-for="MediaSource" data-type="ReadyState" data-lt="readyState"
                        data-local-lt="MediaSource.readyState" tabindex="0"
                        aria-haspopup="dialog"><code>readyState</code></dfn> 属性
                </h3><a class="self-link" href="#readystate-attribute" aria-label="Permalink for Section 3.4"></a>
            </div>
            <p>
                表示 <a href="#dom-mediasource" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-mediasource-27"><code>MediaSource</code></a> 对象当前状态。创建 <a href="#dom-mediasource"
                    class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-mediasource-28"><code>MediaSource</code></a>
                时，<a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                    id="ref-for-dom-mediasource-readystate-6"><code>readyState</code></a> 必须被设置为 "<a
                    data-link-type="idl" href="#dom-readystate-closed" class="internalDFN"
                    id="ref-for-dom-readystate-closed-3"><code>closed</code></a>"。
            </p>
        </section>
        <section id="duration-attribute">
            <div class="header-wrapper">
                <h3 id="x3-5-duration-attribute"><bdi class="secno">3.5 </bdi>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-duration" data-idl="attribute"
                        data-title="duration" data-dfn-for="MediaSource" data-type="unrestricted double"
                        data-lt="duration" data-local-lt="MediaSource.duration" tabindex="0"
                        aria-haspopup="dialog"><code>duration</code></dfn> 属性
                </h3><a class="self-link" href="#duration-attribute" aria-label="Permalink for Section 3.5"></a>
            </div>
            <p>
                允许 Web 应用设置演示时长。创建 <a href="#dom-mediasource" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-mediasource-29"><code>MediaSource</code></a> 对象时，时长初始为 NaN。
            </p>
            <p>
                获取时，按以下步骤执行：
            </p>
            <ol>
                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-7"><code>readyState</code></a> 属性为 "<a
                        data-link-type="idl" href="#dom-readystate-closed" class="internalDFN"
                        id="ref-for-dom-readystate-closed-4"><code>closed</code></a>"，则返回 NaN 并终止步骤。
                </li>
                <li>返回当前属性值。
                </li>
            </ol>
            <p>
                设置时，按以下步骤执行：
            </p>
            <ol>
                <li>如设置值为负数或 NaN，则抛出 <a data-link-type="exception" data-lt="TypeError"
                        href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                    异常并终止步骤。
                </li>
                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-8"><code>readyState</code></a> 属性不是 "<a
                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                        id="ref-for-dom-readystate-open-3"><code>open</code></a>"，则抛出 <a data-link-type="exception"
                        data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止步骤。
                </li>
                <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-updating-1"><code>updating</code></a> 属性在任意 <a data-link-type="idl"
                        data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-18"><code>SourceBuffer</code></a>（在 <a data-link-type="idl"
                        href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-6"><code>sourceBuffers</code></a> 中）上为 true，则抛出 <a
                        data-link-type="exception" data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止步骤。
                </li>
                <li>使用赋值给该属性的值作为 <var data-type="unrestricted double">new duration</var>，运行 <a
                        data-link-type="dfn|abstract-op" href="#dfn-duration-change" class="internalDFN"
                        id="ref-for-dfn-duration-change-1">时长变更</a>算法。
                    <div class="note" role="note" id="issue-container-generatedID-7">
                        <div role="heading" class="note-title marker" id="h-note-7" aria-level="3"><span>注意</span>
                        </div>
                        <p class="">
                            <a data-link-type="dfn|abstract-op" href="#dfn-duration-change" class="internalDFN"
                                id="ref-for-dfn-duration-change-2">时长变更</a>算法会在当前已缓冲编码帧结束时间更大时自动上调 <var
                                data-type="unrestricted double">new duration</var>。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-8">
                        <div role="heading" class="note-title marker" id="h-note-8" aria-level="3"><span>注意</span>
                        </div>
                        <p class="">
                            <a data-link-type="idl" data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-appendbuffer-1"><code>appendBuffer</code></a><code>()</code>
                            和 <a data-link-type="idl" data-lt="endOfStream()" href="#dom-mediasource-endofstream"
                                class="internalDFN"
                                id="ref-for-dom-mediasource-endofstream-3"><code>endOfStream</code></a><code>()</code>
                            在某些情况下也会更新时长。
                        </p>
                    </div>
                </li>
            </ol>
        </section>
        <section id="canconstructindedicatedworker-attribute">
            <div class="header-wrapper">
                <h3 id="x3-6-canconstructindedicatedworker-attribute"><bdi class="secno">3.6 </bdi>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediasource-canconstructindedicatedworker"
                        data-idl="attribute" data-title="canConstructInDedicatedWorker" data-dfn-for="MediaSource"
                        data-type="boolean" data-lt="canConstructInDedicatedWorker"
                        data-local-lt="MediaSource.canConstructInDedicatedWorker" tabindex="0"
                        aria-haspopup="dialog"><code>canConstructInDedicatedWorker</code></dfn> 属性
                </h3><a class="self-link" href="#canconstructindedicatedworker-attribute"
                    aria-label="Permalink for Section 3.6"></a>
            </div>
            <p>
                返回 true。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-9">
                <div role="heading" class="note-title marker" id="h-note-9" aria-level="3"><span>注意</span></div>
                <p class="">
                    此属性用于在主线程和专用 worker 中检测是否支持在专用 worker 创建和使用 <a data-link-type="idl" data-lt="MediaSource"
                        href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-30"><code>MediaSource</code></a> 对象，减少需要高延迟检测 polyfill（如尝试在专用 worker
                    创建 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-31"><code>MediaSource</code></a> 对象，尤其在不支持该特性时）的需求。
                </p>
            </div>
        </section>
        <section id="addsourcebuffer-method">
            <div class="header-wrapper">
                <h3 id="x3-7-addsourcebuffer-method"><bdi class="secno">3.7 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediasource-addsourcebuffer" data-idl="operation"
                        data-title="addSourceBuffer()" data-dfn-for="MediaSource" data-type="SourceBuffer"
                        data-lt="addSourceBuffer()|addSourceBuffer(type)"
                        data-local-lt="MediaSource.addSourceBuffer|MediaSource.addSourceBuffer()|addSourceBuffer"
                        tabindex="0" aria-haspopup="dialog"><code>addSourceBuffer()</code></dfn> 方法
                </h3><a class="self-link" href="#addsourcebuffer-method" aria-label="Permalink for Section 3.7"></a>
            </div>
            <p>
                将新的 <a href="#dom-sourcebuffer" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-sourcebuffer-19"><code>SourceBuffer</code></a> 添加到 <a data-link-type="idl"
                    href="#dom-mediasource-sourcebuffers" class="internalDFN"
                    id="ref-for-dom-mediasource-sourcebuffers-7"><code>sourceBuffers</code></a>。
            </p>
            <ol class="algorithm">
                <li>如果 <var data-type="DOMString">type</var> 为空字符串，则抛出 <a data-link-type="exception" data-lt="TypeError"
                        href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                    异常并终止步骤。
                </li>
                <li>如果 <var data-type="DOMString">type</var> 包含不支持的 MIME 类型，或者包含与其他 <a data-link-type="idl"
                        data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-20"><code>SourceBuffer</code></a> 对象指定类型不兼容的 MIME 类型，则抛出 <a
                        data-link-type="exception" data-lt="NotSupportedError"
                        href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
                    异常并终止步骤。
                </li>
                <li>如果用户代理无法再处理更多 SourceBuffer 对象，或根据 <var data-type="DOMString">type</var> 创建 SourceBuffer 会导致不支持的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-sourcebuffer-configuration" class="internalDFN"
                        id="ref-for-dfn-sourcebuffer-configuration-1">SourceBuffer 配置</a>，
                    则抛出 <a data-link-type="interface" data-lt="QuotaExceededError"
                        href="https://webidl.spec.whatwg.org/#quotaexceedederror"><code>QuotaExceededError</code></a>
                    异常并终止步骤。
                    <div class="note" role="note" id="issue-container-generatedID-10">
                        <div role="heading" class="note-title marker" id="h-note-10" aria-level="3"><span>注意</span>
                        </div>
                        <p class="">
                            例如，用户代理 <em class="rfc2119">可以</em> 在媒体元素已达 <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>
                            readyState 时抛出 <a data-link-type="interface" data-lt="QuotaExceededError"
                                href="https://webidl.spec.whatwg.org/#quotaexceedederror"><code>QuotaExceededError</code></a>
                            异常。这种情况可能出现在用户代理的媒体引擎不支持在播放期间添加更多轨道时。
                        </p>
                    </div>
                </li>
                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-9"><code>readyState</code></a> 属性不处于 "<a
                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                        id="ref-for-dom-readystate-open-4"><code>open</code></a>" 状态，则抛出 <a data-link-type="exception"
                        data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止步骤。
                </li>
                <li>令 <var>buffer</var> 如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>
                    是 <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource"
                        class="internalDFN"
                        id="ref-for-dom-managedmediasource-2"><code>ManagedMediaSource</code></a>，则为新建 <a
                        data-link-type="idl" data-lt="ManagedSourceBuffer" href="#dom-managedsourcebuffer"
                        class="internalDFN" id="ref-for-dom-managedsourcebuffer-2"><code>ManagedSourceBuffer</code></a>
                    实例，否则为新建 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-21"><code>SourceBuffer</code></a> 实例，并关联各自的资源。
                </li>
                <li>将 <var>buffer</var> 的 <a data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                        href="#dfn-generate-timestamps-flag" class="internalDFN"
                        id="ref-for-dfn-generate-timestamps-flag-1"><code>[[generate timestamps flag]]</code></a> 设置为
                    <cite><a data-matched-text="[[[MSE-REGISTRY]]]"
                            href="https://www.w3.org/TR/mse-byte-stream-format-registry/">Media Source Extensions™
                            字节流格式注册表</a></cite>中与 <var data-type="DOMString">type</var> 关联的条目的“生成时间戳标志”值。
                </li>
                <li>如果 <var>buffer</var> 的 <a data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                        href="#dfn-generate-timestamps-flag" class="internalDFN"
                        id="ref-for-dfn-generate-timestamps-flag-2"><code>[[generate timestamps flag]]</code></a> 为
                    true，则将 <var>buffer</var> 的 <a data-link-type="idl" href="#dom-sourcebuffer-mode"
                        class="internalDFN" id="ref-for-dom-sourcebuffer-mode-1"><code>mode</code></a> 设为 "<a
                        data-link-type="idl" href="#dom-appendmode-sequence" class="internalDFN"
                        id="ref-for-dom-appendmode-sequence-1"><code>sequence</code></a>"；否则设为 "<a data-link-type="idl"
                        href="#dom-appendmode-segments" class="internalDFN"
                        id="ref-for-dom-appendmode-segments-1"><code>segments</code></a>"。
                </li>
                <li><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append">追加</a>
                    <var>buffer</var> 到 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
                    <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-9"><code>sourceBuffers</code></a>。
                </li>
                <li><a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>用于 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名称为 <a
                        data-link-type="idl" data-lt="addsourcebuffer" href="#dfn-addsourcebuffer" class="internalDFN"
                        id="ref-for-dfn-addsourcebuffer-1"><code>addsourcebuffer</code></a>，目标为 <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="idl"
                        href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-10"><code>sourceBuffers</code></a>。
                </li>
                <li>返回 <var>buffer</var>。
                </li>
            </ol>
        </section>
        <section id="removesourcebuffer-method">
            <div class="header-wrapper">
                <h3 id="x3-8-removesourcebuffer-method"><bdi class="secno">3.8 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediasource-removesourcebuffer"
                        data-idl="operation" data-title="removeSourceBuffer()" data-dfn-for="MediaSource"
                        data-type="undefined" data-lt="removeSourceBuffer()|removeSourceBuffer(sourceBuffer)"
                        data-local-lt="MediaSource.removeSourceBuffer|MediaSource.removeSourceBuffer()|removeSourceBuffer"
                        tabindex="0" aria-haspopup="dialog"><code>removeSourceBuffer()</code></dfn> 方法
                </h3><a class="self-link" href="#removesourcebuffer-method" aria-label="Permalink for Section 3.8"></a>
            </div>
            <p>
                从 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                    id="ref-for-dom-sourcebuffer-22"><code>SourceBuffer</code></a> 从 <a data-link-type="idl"
                    href="#dom-mediasource-sourcebuffers" class="internalDFN"
                    id="ref-for-dom-mediasource-sourcebuffers-11"><code>sourceBuffers</code></a> 移除一个 SourceBuffer。
            </p>
            <ol class="algorithm">
                <li>如果 <var data-type="SourceBuffer">sourceBuffer</var> 指定的对象不在 <a data-link-type="idl"
                        href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-12"><code>sourceBuffers</code></a> 中，则抛出 <a
                        data-link-type="exception" data-lt="NotFoundError"
                        href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> 异常，并终止后续步骤。
                </li>
                <li>如果 <var data-type="SourceBuffer">sourceBuffer</var>.<a data-link-type="idl"
                        href="#dom-sourcebuffer-updating" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-updating-2"><code>updating</code></a> 属性为 true，则执行以下步骤：
                    <ol>
                        <li>如正在运行，终止 <a data-link-type="dfn|abstract-op" href="#dfn-buffer-append" class="internalDFN"
                                id="ref-for-dfn-buffer-append-1">缓冲区追加</a>算法。
                        </li>
                        <li>将 <var data-type="SourceBuffer">sourceBuffer</var>.<a data-link-type="idl"
                                href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-3"><code>updating</code></a> 属性设为 false。
                        </li>
                        <li><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队任务</a>以 <a
                                data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a
                                data-link-type="idl" data-lt="abort" href="#dfn-abort" class="internalDFN"
                                id="ref-for-dfn-abort-1"><code>abort</code></a>，目标为 <var
                                data-type="SourceBuffer">sourceBuffer</var>。
                        </li>
                        <li><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队任务</a>以 <a
                                data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a
                                data-link-type="idl" data-lt="updateend" href="#dfn-updateend" class="internalDFN"
                                id="ref-for-dfn-updateend-1"><code>updateend</code></a>，目标为 <var
                                data-type="SourceBuffer">sourceBuffer</var>。
                        </li>
                    </ol>
                </li>
                <li>令 <var data-type="AudioTrackList">SourceBuffer audioTracks list</var> 等于 <var
                        data-type="SourceBuffer">sourceBuffer</var>.<a data-link-type="idl"
                        href="#dom-sourcebuffer-audiotracks" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-audiotracks-1"><code>audioTracks</code></a> 返回的 <a
                        data-link-type="interface" data-lt="AudioTrackList"
                        href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                    对象。
                </li>
                <li>如果 <var data-type="AudioTrackList">SourceBuffer audioTracks list</var> 不为空，执行以下步骤：
                    <ol>
                        <li>对 <var data-type="AudioTrackList">SourceBuffer audioTracks list</var> 中的每个 <a
                                data-link-type="interface" data-lt="AudioTrack"
                                href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                            对象，执行：
                            <ol>
                                <li>将 <a data-link-type="idl" href="#dom-audiotrack-sourcebuffer" class="internalDFN"
                                        id="ref-for-dom-audiotrack-sourcebuffer-1"><code>sourceBuffer</code></a> 属性设为
                                    null。
                                </li>
                                <li>从 <var data-type="AudioTrackList">SourceBuffer audioTracks list</var> 中移除该 <a
                                        data-link-type="interface" data-lt="AudioTrack"
                                        href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                    对象。
                                    <div class="note" role="note" id="issue-container-generatedID-11">
                                        <div role="heading" class="note-title marker" id="h-note-11" aria-level="3">
                                            <span>注意</span>
                                        </div>
                                        <p class="">
                                            此操作应触发 <a data-link-type="interface" data-lt="AudioTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                    title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以 <a
                                                data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a
                                                data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-removetrack">removetrack</a>，使用
                                            <a data-link-type="interface" data-lt="TrackEvent"
                                                href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，其
                                            <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                            属性初始化为该 <a data-link-type="interface" data-lt="AudioTrack"
                                                href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                            对象，目标为 <var data-type="AudioTrackList">SourceBuffer audioTracks
                                                list</var>。若移除步骤开始时 <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-enabled"><code>enabled</code></a>
                                            属性为 true，还应触发 <a data-link-type="interface" data-lt="AudioTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                    title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以触发事件名为 <a
                                                data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-change">change</a>，目标为
                                            <var data-type="AudioTrackList">SourceBuffer audioTracks list</var>。
                                        </p>
                                    </div>
                                </li>
                                <li>使用 <a data-link-type="dfn|abstract-op" href="#dfn-mirror-if-necessary"
                                        class="internalDFN" id="ref-for-dfn-mirror-if-necessary-1">必要时镜像</a>算法，在 <a
                                        data-link-type="interface" data-lt="Window"
                                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                    中移除该 <a data-link-type="interface" data-lt="AudioTrack"
                                        href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                    对象（或如 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                        class="internalDFN" id="ref-for-dom-mediasource-32"><code>MediaSource</code></a>
                                    对象是在 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                    构造，则移除其 Window 镜像）：
                                    <ol>
                                        <li>令 <var data-type="AudioTrackList">HTMLMediaElement audioTracks list</var> 等于
                                            HTMLMediaElement.<a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-audiotracks"><code>audioTracks</code></a>
                                            属性返回的 <a data-link-type="interface" data-lt="AudioTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                            对象。
                                        </li>
                                        <li>从 <var>HTMLMediaElement audioTracks list</var> 中移除该 <a
                                                data-link-type="interface" data-lt="AudioTrack"
                                                href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                            对象。
                                            <div class="note" role="note" id="issue-container-generatedID-12">
                                                <div role="heading" class="note-title marker" id="h-note-12"
                                                    aria-level="3"><span>注意</span></div>
                                                <p class="">
                                                    此操作应触发 <a data-link-type="interface" data-lt="AudioTrackList"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                            title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以 <a
                                                        data-link-type="dfn"
                                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为
                                                    <a data-link-type="event"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-removetrack">removetrack</a>，使用
                                                    <a data-link-type="interface" data-lt="TrackEvent"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，其
                                                    <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                    属性初始化为该 <a data-link-type="interface" data-lt="AudioTrack"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                                    对象，目标为 <var data-type="AudioTrackList">HTMLMediaElement audioTracks
                                                        list</var>。如果移除步骤开始时 <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-enabled"><code>enabled</code></a>
                                                    属性为 true，还应触发 <a data-link-type="interface" data-lt="AudioTrackList"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                            title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以触发事件名为 <a
                                                        data-link-type="event"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-change">change</a>，目标为
                                                    <var data-type="AudioTrackList">HTMLMediaElement audioTracks
                                                        list</var>。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>令 <var data-type="VideoTrackList">SourceBuffer videoTracks list</var> 等于 <var
                        data-type="SourceBuffer">sourceBuffer</var>.<a data-link-type="idl"
                        href="#dom-sourcebuffer-videotracks" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-videotracks-1"><code>videoTracks</code></a> 返回的 <a
                        data-link-type="interface" data-lt="VideoTrackList"
                        href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                    对象。
                </li>
                <li>如果 <var data-type="VideoTrackList">SourceBuffer videoTracks list</var> 不为空，执行以下步骤：
                    <ol>
                        <li>对 <var data-type="VideoTrackList">SourceBuffer videoTracks list</var> 中的每个 <a
                                data-link-type="interface" data-lt="VideoTrack"
                                href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                            对象，执行：
                            <ol>
                                <li>将 <a data-link-type="idl" href="#dom-videotrack-sourcebuffer" class="internalDFN"
                                        id="ref-for-dom-videotrack-sourcebuffer-1"><code>sourceBuffer</code></a> 属性设为
                                    null。
                                </li>
                                <li>从 <var data-type="VideoTrackList">SourceBuffer videoTracks list</var> 中移除该 <a
                                        data-link-type="interface" data-lt="VideoTrack"
                                        href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                    对象。
                                    <div class="note" role="note" id="issue-container-generatedID-13">
                                        <div role="heading" class="note-title marker" id="h-note-13" aria-level="3">
                                            <span>注意</span>
                                        </div>
                                        <p class="">
                                            此操作应触发 <a data-link-type="interface" data-lt="VideoTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                    title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以 <a
                                                data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a
                                                data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-removetrack">removetrack</a>，使用
                                            <a data-link-type="interface" data-lt="TrackEvent"
                                                href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，其
                                            <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                            属性初始化为该 <a data-link-type="interface" data-lt="VideoTrack"
                                                href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                            对象，目标为 <var data-type="VideoTrackList">SourceBuffer videoTracks
                                                list</var>。若移除步骤开始时 <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-selected"><code>selected</code></a>
                                            属性为 true，还应触发 <a data-link-type="interface" data-lt="VideoTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                    title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以触发事件名为 <a
                                                data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-change">change</a>，目标为
                                            <var data-type="VideoTrackList">SourceBuffer videoTracks list</var>。
                                        </p>
                                    </div>
                                </li>
                                <li>使用 <a data-link-type="dfn|abstract-op" href="#dfn-mirror-if-necessary"
                                        class="internalDFN" id="ref-for-dfn-mirror-if-necessary-2">必要时镜像</a>算法，在 <a
                                        data-link-type="interface" data-lt="Window"
                                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                    中移除该 <a data-link-type="interface" data-lt="VideoTrack"
                                        href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                    对象（或如 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                        class="internalDFN" id="ref-for-dom-mediasource-33"><code>MediaSource</code></a>
                                    对象是在 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                    构造，则移除其 Window 镜像）：
                                    <ol>
                                        <li>令 <var data-type="VideoTrackList">HTMLMediaElement videoTracks list</var> 等于
                                            HTMLMediaElement.<a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-videotracks"><code>videoTracks</code></a>
                                            属性返回的 <a data-link-type="interface" data-lt="VideoTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                            对象。
                                        </li>
                                        <li>从 <var>HTMLMediaElement videoTracks list</var> 中移除该 <a
                                                data-link-type="interface" data-lt="VideoTrack"
                                                href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                            对象。
                                            <div class="note" role="note" id="issue-container-generatedID-14">
                                                <div role="heading" class="note-title marker" id="h-note-14"
                                                    aria-level="3"><span>注意</span></div>
                                                <p class="">
                                                    此操作应触发 <a data-link-type="interface" data-lt="VideoTrackList"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                            title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以 <a
                                                        data-link-type="dfn"
                                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为
                                                    <a data-link-type="event"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-removetrack">removetrack</a>，使用
                                                    <a data-link-type="interface" data-lt="TrackEvent"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，其
                                                    <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                    属性初始化为该 <a data-link-type="interface" data-lt="VideoTrack"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                                    对象，目标为 <var data-type="VideoTrackList">HTMLMediaElement videoTracks
                                                        list</var>。若移除步骤开始时 <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-selected"><code>selected</code></a>
                                                    属性为 true，还应触发 <a data-link-type="interface" data-lt="VideoTrackList"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                            title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以触发事件名为 <a
                                                        data-link-type="event"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-change">change</a>，目标为
                                                    <var data-type="VideoTrackList">HTMLMediaElement videoTracks
                                                        list</var>。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>令 <var data-type="TextTrackList">SourceBuffer textTracks list</var> 等于 <var
                        data-type="SourceBuffer">sourceBuffer</var>.<a data-link-type="idl"
                        href="#dom-sourcebuffer-texttracks" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-texttracks-1"><code>textTracks</code></a> 返回的 <a
                        data-link-type="interface" data-lt="TextTrackList"
                        href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                    对象。
                </li>
                <li>如果 <var data-type="TextTrackList">SourceBuffer textTracks list</var> 不为空，执行以下步骤：
                    <ol>
                        <li>对 <var data-type="TextTrackList">SourceBuffer textTracks list</var> 中的每个 <a
                                data-link-type="interface" data-lt="TextTrack"
                                href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                            对象，执行：
                            <ol>
                                <li>将 <a data-link-type="idl" href="#dom-texttrack-sourcebuffer" class="internalDFN"
                                        id="ref-for-dom-texttrack-sourcebuffer-1"><code>sourceBuffer</code></a> 属性设为
                                    null。
                                </li>
                                <li>从 <var data-type="TextTrackList">SourceBuffer textTracks list</var> 中移除该 <a
                                        data-link-type="interface" data-lt="TextTrack"
                                        href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                    对象。
                                    <div class="note" role="note" id="issue-container-generatedID-15">
                                        <div role="heading" class="note-title marker" id="h-note-15" aria-level="3">
                                            <span>注意</span>
                                        </div>
                                        <p class="">
                                            此操作应触发 <a data-link-type="interface" data-lt="TextTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                    title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以 <a
                                                data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a
                                                data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-removetrack">removetrack</a>，使用
                                            <a data-link-type="interface" data-lt="TrackEvent"
                                                href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，其
                                            <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                            属性初始化为该 <a data-link-type="interface" data-lt="TextTrack"
                                                href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                            对象，目标为 <var data-type="TextTrackList">SourceBuffer textTracks
                                                list</var>。若移除步骤开始时 <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-mode"><code>mode</code></a>
                                            属性为
                                            <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-showing">"showing"</a></code>
                                            或
                                            <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-hidden">"hidden"</a></code>，还应触发
                                            <a data-link-type="interface" data-lt="TextTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                    title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以触发事件名为 <a
                                                data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-change">change</a>，目标为
                                            <var>SourceBuffer textTracks list</var>。
                                        </p>
                                    </div>
                                </li>
                                <li>使用 <a data-link-type="dfn|abstract-op" href="#dfn-mirror-if-necessary"
                                        class="internalDFN" id="ref-for-dfn-mirror-if-necessary-3">必要时镜像</a>算法，在 <a
                                        data-link-type="interface" data-lt="Window"
                                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                    中移除该 <a data-link-type="interface" data-lt="TextTrack"
                                        href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                    对象（或如 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                        class="internalDFN" id="ref-for-dom-mediasource-34"><code>MediaSource</code></a>
                                    对象是在 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                    构造，则移除其 Window 镜像）：
                                    <ol>
                                        <li>令 <var data-type="TextTrackList">HTMLMediaElement textTracks list</var> 等于
                                            HTMLMediaElement.<a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-texttracks"><code>textTracks</code></a>
                                            属性返回的 <a data-link-type="interface" data-lt="TextTrackList"
                                                href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                            对象。
                                        </li>
                                        <li>从 <var>HTMLMediaElement textTracks list</var> 中移除该 <a
                                                data-link-type="interface" data-lt="TextTrack"
                                                href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                            对象。
                                            <div class="note" role="note" id="issue-container-generatedID-16">
                                                <div role="heading" class="note-title marker" id="h-note-16"
                                                    aria-level="3"><span>注意</span></div>
                                                <p class="">
                                                    此操作应触发 <a data-link-type="interface" data-lt="TextTrackList"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                            title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以 <a
                                                        data-link-type="dfn"
                                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为
                                                    <a data-link-type="event"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-removetrack">removetrack</a>，使用
                                                    <a data-link-type="interface" data-lt="TrackEvent"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，其
                                                    <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                    属性初始化为该 <a data-link-type="interface" data-lt="TextTrack"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                                    对象，目标为 <var data-type="TextTrackList">HTMLMediaElement textTracks
                                                        list</var>。如果移除步骤开始时 <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-mode"><code>mode</code></a>
                                                    属性为
                                                    <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-showing">"showing"</a></code>
                                                    或
                                                    <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-hidden">"hidden"</a></code>，还应触发
                                                    <a data-link-type="interface" data-lt="TextTrackList"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                            title="HTML Standard">HTML</a></cite>] 的逻辑，排队任务以触发事件名为 <a
                                                        data-link-type="event"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-change">change</a>，目标为
                                                    <var data-type="TextTrackList">HTMLMediaElement textTracks
                                                        list</var>。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>如果 <var data-type="SourceBuffer">sourceBuffer</var> 在 <a data-link-type="idl"
                        href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-4"><code>activeSourceBuffers</code></a> 中，则将
                    <var data-type="SourceBuffer">sourceBuffer</var> 从 <a data-link-type="idl"
                        href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-5"><code>activeSourceBuffers</code></a>
                    中移除，并排队任务以 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a data-link-type="idl"
                        data-lt="removesourcebuffer" href="#dfn-removesourcebuffer" class="internalDFN"
                        id="ref-for-dfn-removesourcebuffer-1"><code>removesourcebuffer</code></a>，目标为 <a
                        href="#dom-sourcebufferlist" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-sourcebufferlist-3"><code>SourceBufferList</code></a>（由 <a data-link-type="idl"
                        href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-6"><code>activeSourceBuffers</code></a> 返回）。
                </li>
                <li>将 <var data-type="SourceBuffer">sourceBuffer</var> 从 <a data-link-type="idl"
                        href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-13"><code>sourceBuffers</code></a> 中移除，并排队任务以 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为 <a
                        data-link-type="idl" data-lt="removesourcebuffer" href="#dfn-removesourcebuffer"
                        class="internalDFN"
                        id="ref-for-dfn-removesourcebuffer-2"><code>removesourcebuffer</code></a>，目标为 <a
                        href="#dom-sourcebufferlist" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-sourcebufferlist-4"><code>SourceBufferList</code></a>（由 <a data-link-type="idl"
                        href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-14"><code>sourceBuffers</code></a> 返回）。
                </li>
                <li>销毁 <var data-type="SourceBuffer">sourceBuffer</var> 的全部资源。
                </li>
            </ol>
        </section>
        <section id="endofstream-method">
            <div class="header-wrapper">
                <h3 id="x3-9-endofstream-method"><bdi class="secno">3.9 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediasource-endofstream" data-idl="operation"
                        data-title="endOfStream()" data-dfn-for="MediaSource" data-type="undefined"
                        data-lt="endOfStream()|endOfStream(error)"
                        data-local-lt="MediaSource.endOfStream|MediaSource.endOfStream()|endOfStream" tabindex="0"
                        aria-haspopup="dialog"><code>endOfStream()</code></dfn> 方法
                </h3><a class="self-link" href="#endofstream-method" aria-label="Permalink for Section 3.9"></a>
            </div>
            <p>
                标志流结束。
            </p>
            <ol class="algorithm">
                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-10"><code>readyState</code></a> 属性不是 "<a
                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                        id="ref-for-dom-readystate-open-5"><code>open</code></a>" 状态，则抛出 <a data-link-type="exception"
                        data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止这些步骤。
                </li>
                <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-updating-4"><code>updating</code></a> 属性在任意 <a data-link-type="idl"
                        data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-23"><code>SourceBuffer</code></a>（在 <a data-link-type="idl"
                        href="#dom-mediasource-sourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-sourcebuffers-15"><code>sourceBuffers</code></a> 中）上为 true，则抛出 <a
                        data-link-type="exception" data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止这些步骤。
                </li>
                <li>以参数 error 调用 <a data-link-type="dfn|abstract-op" href="#dfn-end-of-stream" class="internalDFN"
                        id="ref-for-dfn-end-of-stream-1">流结束</a>算法。
                </li>
            </ol>
        </section>
        <section id="setliveseekablerange-method">
            <div class="header-wrapper">
                <h3 id="x3-10-setliveseekablerange-method"><bdi class="secno">3.10 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediasource-setliveseekablerange"
                        data-idl="operation" data-title="setLiveSeekableRange()" data-dfn-for="MediaSource"
                        data-type="undefined" data-lt="setLiveSeekableRange()|setLiveSeekableRange(start, end)"
                        data-local-lt="MediaSource.setLiveSeekableRange|MediaSource.setLiveSeekableRange()|setLiveSeekableRange"
                        tabindex="0" aria-haspopup="dialog"><code>setLiveSeekableRange()</code></dfn> 方法
                </h3><a class="self-link" href="#setliveseekablerange-method"
                    aria-label="Permalink for Section 3.10"></a>
            </div>
            <p>
                更新 <a data-link-type="attribute" data-lt="[[live seekable range]]" href="#dfn-live-seekable-range"
                    class="internalDFN"
                    id="ref-for-dfn-live-seekable-range-1"><code>[[live seekable range]]</code></a>，该属性用于
                <a href="#htmlmediaelement-extensions" data-matched-text="[[[#htmlmediaelement-extensions]]]"
                    class="sec-ref"><bdi class="secno">10. </bdi>
                    HTMLMediaElement 扩展</a>，以修改 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seekable"><code>seekable</code></a>
                行为。
            </p>

            <p>调用该方法时，用户代理必须执行以下步骤：</p>
            <ol class="method-algorithm">
                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-11"><code>readyState</code></a> 属性不是 "<a
                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                        id="ref-for-dom-readystate-open-6"><code>open</code></a>"，则抛出 <a data-link-type="exception"
                        data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止这些步骤。
                </li>
                <li>如果 <var data-type="double">start</var> 为负数或大于 <var data-type="double">end</var>，则抛出 <a
                        data-link-type="exception" data-lt="TypeError"
                        href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                    异常并终止这些步骤。
                </li>
                <li>将 <a data-link-type="attribute" data-lt="[[live seekable range]]" href="#dfn-live-seekable-range"
                        class="internalDFN"
                        id="ref-for-dfn-live-seekable-range-2"><code>[[live seekable range]]</code></a> 设为包含一个范围（起始为
                    <var data-type="double">start</var>，结束为 <var data-type="double">end</var>）的新的 <a
                        href="https://html.spec.whatwg.org/multipage/media.html#normalised-timeranges-object">标准化
                        TimeRanges 对象</a>。
                </li>
            </ol>
        </section>
        <section id="clearliveseekablerange-method">
            <div class="header-wrapper">
                <h3 id="x3-11-clearliveseekablerange-method"><bdi class="secno">3.11 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediasource-clearliveseekablerange"
                        data-idl="operation" data-title="clearLiveSeekableRange()" data-dfn-for="MediaSource"
                        data-type="undefined" data-lt="clearLiveSeekableRange()"
                        data-local-lt="MediaSource.clearLiveSeekableRange|MediaSource.clearLiveSeekableRange()|clearLiveSeekableRange"
                        tabindex="0" aria-haspopup="dialog"><code>clearLiveSeekableRange()</code></dfn> 方法
                </h3><a class="self-link" href="#clearliveseekablerange-method"
                    aria-label="Permalink for Section 3.11"></a>
            </div>
            <p>
                更新 <a data-link-type="attribute" data-lt="[[live seekable range]]" href="#dfn-live-seekable-range"
                    class="internalDFN"
                    id="ref-for-dfn-live-seekable-range-3"><code>[[live seekable range]]</code></a>，该属性用于
                <a href="#htmlmediaelement-extensions" data-matched-text="[[[#htmlmediaelement-extensions]]]"
                    class="sec-ref"><bdi class="secno">10. </bdi>
                    HTMLMediaElement 扩展</a>，以修改 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seekable"><code>seekable</code></a>
                行为。
            </p>

            <p>调用该方法时，用户代理必须执行以下步骤：</p>
            <ol class="method-algorithm">
                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                        id="ref-for-dom-mediasource-readystate-12"><code>readyState</code></a> 属性不是 "<a
                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                        id="ref-for-dom-readystate-open-7"><code>open</code></a>"，则抛出 <a data-link-type="exception"
                        data-lt="InvalidStateError"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                    异常并终止这些步骤。
                </li>
                <li>如果 <a data-link-type="attribute" data-lt="[[live seekable range]]" href="#dfn-live-seekable-range"
                        class="internalDFN"
                        id="ref-for-dfn-live-seekable-range-4"><code>[[live seekable range]]</code></a> 包含范围，则将
                    <a data-link-type="attribute" data-lt="[[live seekable range]]" href="#dfn-live-seekable-range"
                        class="internalDFN"
                        id="ref-for-dfn-live-seekable-range-5"><code>[[live seekable range]]</code></a> 设为新的空 <a
                        data-link-type="interface" data-lt="TimeRanges"
                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                    对象。
                </li>
            </ol>
        </section>
        <section id="istypesupported-method">
            <div class="header-wrapper">
                <h3 id="x3-12-istypesupported-method"><bdi class="secno">3.12 </bdi>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediasource-istypesupported" data-idl="operation"
                        data-title="isTypeSupported()" data-dfn-for="MediaSource" data-type="boolean"
                        data-lt="isTypeSupported()|isTypeSupported(type)"
                        data-local-lt="MediaSource.isTypeSupported|MediaSource.isTypeSupported()|isTypeSupported"
                        tabindex="0" aria-haspopup="dialog"><code>isTypeSupported()</code></dfn> 方法
                </h3><a class="self-link" href="#istypesupported-method" aria-label="Permalink for Section 3.12"></a>
            </div>
            <p>
                检查 <a href="#dom-mediasource" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-mediasource-35"><code>MediaSource</code></a> 能否为指定 MIME 类型创建 <a
                    href="#dom-sourcebuffer" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-sourcebuffer-24"><code>SourceBuffer</code></a> 对象。
            </p>

            <div class="note" role="note" id="issue-container-generatedID-17">
                <div role="heading" class="note-title marker" id="h-note-17" aria-level="3"><span>注意</span></div>
                <p class="">
                    若该方法返回 true，仅表示 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-36"><code>MediaSource</code></a>
                    实现能够为指定 MIME 类型创建 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                        class="internalDFN" id="ref-for-dom-sourcebuffer-25"><code>SourceBuffer</code></a> 对象。
                    若资源不足，<a data-link-type="idl" data-lt="addSourceBuffer()" href="#dom-mediasource-addsourcebuffer"
                        class="internalDFN"
                        id="ref-for-dom-mediasource-addsourcebuffer-4"><code>addSourceBuffer</code></a><code>()</code>
                    调用仍<em class="rfc2119">应当</em>失败。
                </p>
            </div>
            <div class="note" role="note" id="issue-container-generatedID-18">
                <div role="heading" class="note-title marker" id="h-note-18" aria-level="3"><span>注意</span></div>
                <p class="">
                    此方法返回 true 意味着 <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    的
                    <a data-link-type="method" data-lt="canPlayType()"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-navigator-canplaytype"><code>canPlayType</code></a><code>()</code>
                    通常会返回 "maybe" 或 "probably"，因为 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-37"><code>MediaSource</code></a> 不应该支持
                    HTMLMediaElement 明确无法播放的类型。
                </p>
            </div>
            <p>调用该方法时，用户代理必须执行以下步骤：</p>
            <ol class="method-algorithm">
                <li>如果 <var data-type="DOMString">type</var> 为空字符串，则返回 false。
                </li>
                <li>如果 <var data-type="DOMString">type</var> 不是有效的 MIME 类型字符串，则返回 false。
                </li>
                <li>如果 <var data-type="DOMString">type</var> 包含未被 MediaSource 支持的媒体类型或子类型，则返回 false。
                </li>
                <li>如果 <var data-type="DOMString">type</var> 包含未被 MediaSource 支持的编解码器，则返回 false。
                </li>
                <li>如果 MediaSource 不支持指定的媒体类型、子类型和编解码器的组合，则返回 false。
                </li>
                <li>返回 true。
                </li>
            </ol>
        </section>
        <section id="mediasource-events">
            <div class="header-wrapper">
                <h3 id="x3-13-event-summary"><bdi class="secno">3.13 </bdi>
                    事件概览
                </h3><a class="self-link" href="#mediasource-events" aria-label="Permalink for Section 3.13"></a>
            </div>

            <table class="data">
                <thead>
                    <tr>
                        <th>
                            事件名称
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            触发条件
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-sourceopen" tabindex="0"
                                aria-haspopup="dialog" data-export="">sourceopen</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-38"><code>MediaSource</code></a> 的 <a data-link-type="idl"
                                href="#dom-mediasource-readystate" class="internalDFN"
                                id="ref-for-dom-mediasource-readystate-13"><code>readyState</code></a> 状态从
                            "<a data-link-type="idl" href="#dom-readystate-closed" class="internalDFN"
                                id="ref-for-dom-readystate-closed-5"><code>closed</code></a>"
                            变为 "<a data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                id="ref-for-dom-readystate-open-8"><code>open</code></a>" 或从 "<a data-link-type="idl"
                                href="#dom-readystate-ended" class="internalDFN"
                                id="ref-for-dom-readystate-ended-2"><code>ended</code></a>" 变为 "<a data-link-type="idl"
                                href="#dom-readystate-open" class="internalDFN"
                                id="ref-for-dom-readystate-open-9"><code>open</code></a>" 时触发。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-sourceended" tabindex="0"
                                aria-haspopup="dialog" data-export="">sourceended</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-39"><code>MediaSource</code></a> 的 <a data-link-type="idl"
                                href="#dom-mediasource-readystate" class="internalDFN"
                                id="ref-for-dom-mediasource-readystate-14"><code>readyState</code></a> 状态从
                            "<a data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                id="ref-for-dom-readystate-open-10"><code>open</code></a>"
                            变为 "<a data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                id="ref-for-dom-readystate-ended-3"><code>ended</code></a>" 时触发。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-sourceclose" tabindex="0"
                                aria-haspopup="dialog" data-export="">sourceclose</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-40"><code>MediaSource</code></a> 的 <a data-link-type="idl"
                                href="#dom-mediasource-readystate" class="internalDFN"
                                id="ref-for-dom-mediasource-readystate-15"><code>readyState</code></a> 状态从
                            "<a data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                id="ref-for-dom-readystate-open-11"><code>open</code></a>"
                            变为 "<a data-link-type="idl" href="#dom-readystate-closed" class="internalDFN"
                                id="ref-for-dom-readystate-closed-6"><code>closed</code></a>" 或 "<a data-link-type="idl"
                                href="#dom-readystate-ended" class="internalDFN"
                                id="ref-for-dom-readystate-ended-4"><code>ended</code></a>" 变为 "<a data-link-type="idl"
                                href="#dom-readystate-closed" class="internalDFN"
                                id="ref-for-dom-readystate-closed-7"><code>closed</code></a>" 时触发。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="mediasource-in-worker-communication-model">
            <div class="header-wrapper">
                <h3 id="x3-14-cross-context-communication-model"><bdi class="secno">3.14 </bdi>
                    <dfn id="dfn-cross-context-communication-model" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">跨上下文通信模型</dfn>
                </h3><a class="self-link" href="#mediasource-in-worker-communication-model"
                    aria-label="Permalink for Section 3.14"></a>
            </div>

            <p>
                当 <a data-link-type="interface" data-lt="Window"
                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                上的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                被绑定到 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                上的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-41"><code>MediaSource</code></a> 时，每个上下文都有依赖于另一方信息的算法。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-19">
                <div role="heading" class="note-title marker" id="h-note-19" aria-level="4"><span>注意</span></div>
                <p class="">
                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    仅暴露于 <a data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    上下文，而本规范定义的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-42"><code>MediaSource</code></a> 及相关对象则同时暴露于 <a
                        data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    和
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    上下文。这允许应用在任一类型上下文中构建 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-43"><code>MediaSource</code></a> 对象，并通过 <a
                        data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                        id="ref-for-mediasource-object-url-1">MediaSource 对象 URL</a> 或 <a data-link-type="idl"
                        data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                        id="ref-for-dom-mediasourcehandle-5"><code>MediaSourceHandle</code></a>（见 <a
                        data-link-type="dfn|abstract-op" href="#dfn-attaching-to-a-media-element" class="internalDFN"
                        id="ref-for-dfn-attaching-to-a-media-element-2">绑定到媒体元素</a>算法）将其绑定到 <a
                        data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    对象（Window 上下文）。<a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-44"><code>MediaSource</code></a> 对象不是 <a
                        data-link-type="extended-attribute" data-lt="Transferable"
                        href="https://html.spec.whatwg.org/multipage/structured-data.html#transferable"><code>Transferable</code></a>；它只在创建时的上下文可见。
                </p>
            </div>
            <p>
                本节其余部分描述了将 Window 媒体元素绑定到 DedicatedWorkerGlobalScope 的 <a data-link-type="idl" data-lt="MediaSource"
                    href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-45"><code>MediaSource</code></a> 时用于约束信息延迟的模型。该模型描述了通过消息传递通信，但实现也<em
                    class="rfc2119">可以</em>采用更快的方式（如共享内存与锁）。Window 上下文的 MediaSource 绑定则同步获取信息，无需跨上下文通信。
            </p>
            <p>
                在 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                构造的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-47"><code>MediaSource</code></a> 拥有 <dfn data-dfn-for="MediaSource"
                    data-idl="" data-noexport="" data-dfn-type="attribute" id="dfn-port-to-main" tabindex="0"
                    aria-haspopup="dialog">[[port to main]]</dfn> 内部槽，用于存储在绑定期间建立、解绑期间清空的 <a data-link-type="interface"
                    data-lt="MessagePort"
                    href="https://html.spec.whatwg.org/multipage/web-messaging.html#messageport"><code>MessagePort</code></a>。Window
                上下文的 <a data-link-type="attribute" data-lt="[[port to main]]" href="#dfn-port-to-main"
                    class="internalDFN" id="ref-for-dfn-port-to-main-1"><code>[[port to main]]</code></a> 始终为 null。
            </p>
            <p>
                被本规范扩展并绑定到 DedicatedWorkerGlobalScope 的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                同样有 <dfn data-dfn-for="HTMLMediaElement" data-idl="" data-noexport="" data-dfn-type="attribute"
                    id="dfn-port-to-worker" tabindex="0" aria-haspopup="dialog">[[port to worker]]</dfn> 内部槽（存储 <a
                    data-link-type="interface" data-lt="MessagePort"
                    href="https://html.spec.whatwg.org/multipage/web-messaging.html#messageport"><code>MessagePort</code></a>），以及
                <dfn data-dfn-for="HTMLMediaElement" data-idl="" data-noexport="" data-dfn-type="attribute"
                    id="dfn-channel-with-worker" tabindex="0" aria-haspopup="dialog">[[channel with worker]]</dfn>
                内部槽（存储 <a data-link-type="interface" data-lt="MessageChannel"
                    href="https://html.spec.whatwg.org/multipage/web-messaging.html#messagechannel"><code>MessageChannel</code></a>），两者在绑定期间建立、解绑期间清空。只有绑定到
                DedicatedWorkerGlobalScope 的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                    class="internalDFN" id="ref-for-dom-mediasource-49"><code>MediaSource</code></a> 时 <a
                    data-link-type="attribute" data-lt="[[port to worker]]" href="#dfn-port-to-worker"
                    class="internalDFN" id="ref-for-dfn-port-to-worker-1"><code>[[port to worker]]</code></a> 和 <a
                    data-link-type="attribute" data-lt="[[channel with worker]]" href="#dfn-channel-with-worker"
                    class="internalDFN" id="ref-for-dfn-channel-with-worker-1"><code>[[channel with worker]]</code></a>
                不为 null。
            </p>
            <p>
                本规范中的算法若需在 Window 上下文的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                与附加到 DedicatedWorkerGlobalScope 的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                    class="internalDFN" id="ref-for-dom-mediasource-50"><code>MediaSource</code></a>
                间通信，将隐式使用这些内部端口向对应方发送消息，消息的隐式处理程序根据算法描述运行步骤。
            </p>
        </section>
        <section id="mediasource-algorithms">
            <div class="header-wrapper">
                <h3 id="x3-15-algorithms"><bdi class="secno">3.15 </bdi>
                    算法
                </h3><a class="self-link" href="#mediasource-algorithms" aria-label="Permalink for Section 3.15"></a>
            </div>

            <section id="mediasource-attach">
                <div class="header-wrapper">
                    <h4 id="x3-15-1-attaching-to-a-media-element"><bdi class="secno">3.15.1 </bdi>
                        <dfn id="dfn-attaching-to-a-media-element" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">绑定到媒体元素</dfn>
                    </h4><a class="self-link" href="#mediasource-attach" aria-label="Permalink for Section 3.15.1"></a>
                </div>

                <p>
                    将 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-51"><code>MediaSource</code></a> 附加到媒体元素有不同方式，取决于该 <a
                        data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-52"><code>MediaSource</code></a> 对象是在哪构造的：在 <a
                        data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    中，还是在 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    中：
                </p>
                <ul>
                    <li>
                        <p>
                            将构造于 <a data-link-type="interface" data-lt="Window"
                                href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                            的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-53"><code>MediaSource</code></a> 进行附加，可以通过把该 <a
                                data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                                id="ref-for-mediasource-object-url-2">MediaSource 对象 URL</a> 赋值给媒体元素的 <a
                                data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-src"><code>src</code></a>
                            属性，或赋值给媒体元素内部某个 &lt;source&gt; 的 src 属性来完成。通过将一个 MediaSource 对象传给 <a data-link-type="method"
                                data-lt="createObjectURL()"
                                href="https://www.w3.org/TR/FileAPI/#dfn-createObjectURL"><code>createObjectURL</code></a><code>()</code>
                            可创建 <a data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                                id="ref-for-mediasource-object-url-3">MediaSource 对象 URL</a>。
                        </p>
                        <p>
                            尽管实现 <em class="rfc2119">可以</em> 在 <a data-link-type="interface"
                                data-lt="DedicatedWorkerGlobalScope"
                                href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                            中为在该 worker 内构造的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                class="internalDFN" id="ref-for-dom-mediasource-55"><code>MediaSource</code></a> 允许创建 <a
                                data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                                id="ref-for-mediasource-object-url-4">MediaSource 对象 URL</a>，但尝试使用该 <a
                                data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                                id="ref-for-mediasource-object-url-5">MediaSource 对象 URL</a> 通过 <a
                                data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-src"><code>src</code></a>
                            属性或媒体元素内某个 &lt;source&gt; 的 src 属性来附加到媒体元素，<em class="rfc2119">必须</em> 在该媒体元素的 <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>（如下扩展）中失败。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-20">
                            <div role="heading" class="note-title marker" id="h-note-20" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                将对象 URL 附加机制扩展到 worker 的 MediaSource 对象 URL 会进一步传播这种不如使用 srcObject
                                的习惯用法，并会不必要地增加用户代理的互操作风险和实现复杂度。
                            </p>
                        </div>
                    </li>
                    <li>将构造于
                        <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                        的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-56"><code>MediaSource</code></a> 进行附加，只能通过使用其 <a
                            data-link-type="idl" href="#dom-mediasource-handle" class="internalDFN"
                            id="ref-for-dom-mediasource-handle-2"><code>handle</code></a> 获取句柄，将该 <a
                            data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                            class="internalDFN" id="ref-for-dom-mediasourcehandle-6"><code>MediaSourceHandle</code></a>
                        传递到 <a data-link-type="interface" data-lt="Window"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                        上下文，并赋值给媒体元素的 <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                        属性来完成。为与 <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的资源加载与获取算法保持一致，这里所指的底层 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                        <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-57"><code>MediaSource</code></a> 即其处提到的 MediaSource 对象，而 <a
                            data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                            class="internalDFN" id="ref-for-dom-mediasourcehandle-7"><code>MediaSourceHandle</code></a>
                        对象即媒体提供者对象。
                    </li>
                </ul>
                <p>
                    如果 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                    的调用中，媒体提供者对象是一个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-58"><code>MediaSource</code></a> 对象、一个 <a
                        data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                        class="internalDFN" id="ref-for-dom-mediasourcehandle-8"><code>MediaSourceHandle</code></a>
                    对象，或其对象为 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-59"><code>MediaSource</code></a> 的 URL 记录，则令模式为本地（local），跳过 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                    的第一步（否则可能将模式设为远程），并继续执行该 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-21">
                    <div role="heading" class="note-title marker" id="h-note-21" aria-level="5"><span>注意</span></div>
                    <p class="">
                        预期 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                        的第一步最终会与“当 URL 记录的对象是媒体提供者对象时选择本地模式”的行为一致。其意图是：如果 <a data-link-type="interface"
                            data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-src"><code>src</code></a>
                        属性或选中的子
                        <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element">source</a></code>
                        的
                        <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-source-src">src</a></code>
                        属性在最近一次变更时是与某个 <a data-link-type="dfn|abstract-op" href="#mediasource-object-url"
                            class="internalDFN" id="ref-for-mediasource-object-url-6">MediaSource 对象 URL</a> 匹配的
                        <code>blob:</code> URL，那么该 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                            class="internalDFN" id="ref-for-dom-mediasource-60"><code>MediaSource</code></a> 对象会在 <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                        的本地模式逻辑中被用作媒体提供者对象和当前媒体资源。这也意味着当 MediaSource 对象被附加时，包含对 preload 属性考量的远程模式逻辑会被跳过。即便未来在 [<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-html"
                                title="HTML Standard">HTML</a></cite>] 中做出上述改变，在当前媒体资源是 <a data-link-type="idl"
                            data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-61"><code>MediaSource</code></a> 对象时，仍需要在本地模式逻辑开头执行下列步骤。
                    </p>
                </div>
                <p>
                    在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                    “否则（模式为本地）”部分的开头，执行以下附加步骤。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-22">
                    <div role="heading" class="note-title marker" id="h-note-22" aria-level="5"><span>注意</span></div>
                    <p class="">
                        相对于触发媒体元素资源选择算法的动作，这些步骤是异步的。<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                        会在调用资源选择算法的任务被允许继续并达到稳定状态后运行。实现可以延迟“<i>否则</i>”子句中的步骤，直到 MediaSource 对象已准备好使用。
                    </p>
                </div>
                <ol>
                    <li>如果 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                        的调用中，媒体提供者对象是一个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                            class="internalDFN" id="ref-for-dom-mediasource-62"><code>MediaSource</code></a> 对象、一个 <a
                            data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                            class="internalDFN" id="ref-for-dom-mediasourcehandle-9"><code>MediaSourceHandle</code></a>
                        对象，或其对象为 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                            class="internalDFN" id="ref-for-dom-mediasource-63"><code>MediaSource</code></a> 的 URL 记录，则：
                        <dl class="switch">
                            <dt>
                                如果媒体提供者对象是一个 URL 记录，其对象为构造于 <a data-link-type="interface"
                                    data-lt="DedicatedWorkerGlobalScope"
                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN"
                                    id="ref-for-dom-mediasource-64"><code>MediaSource</code></a>（例如尝试使用来自
                                <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN" id="ref-for-dom-mediasource-65"><code>MediaSource</code></a> 的
                                <a data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                                    id="ref-for-mediasource-object-url-7">MediaSource 对象 URL</a> 时）
                            </dt>
                            <dd>
                                运行 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                的 <a
                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>
                                中
                                <span>“<i>如果由于网络错误无法获取任何媒体数据，导致用户代理放弃获取资源</i>”</span> 的步骤。
                                <div class="note" role="note" id="issue-container-generatedID-23">
                                    <div role="heading" class="note-title marker" id="h-note-23" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <div class="">
                                        这会阻止使用 <a data-link-type="dfn|abstract-op" href="#mediasource-object-url"
                                            class="internalDFN" id="ref-for-mediasource-object-url-8">MediaSource 对象
                                            URL</a> 来进行 DedicatedWorker 的 MediaSource 附加。将 <a data-link-type="idl"
                                            data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                            id="ref-for-dom-mediasource-66"><code>MediaSource</code></a> 的 <a
                                            data-link-type="idl" href="#dom-mediasource-handle" class="internalDFN"
                                            id="ref-for-dom-mediasource-handle-3"><code>handle</code></a> 从
                                        DedicatedWorker 传到 Window 上下文，并赋给媒体元素的 <a data-link-type="attribute"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                                        属性，是附加此类 MediaSource 的唯一方式。
                                    </div>
                                </div>
                            </dd>
                            <dt>
                                如果媒体提供者对象是一个 <a data-link-type="idl" data-lt="MediaSourceHandle"
                                    href="#dom-mediasourcehandle" class="internalDFN"
                                    id="ref-for-dom-mediasourcehandle-10"><code>MediaSourceHandle</code></a>，其
                                <a data-link-type="attribute" data-lt="[[Detached]]" href="#dfn-detached"
                                    class="internalDFN" id="ref-for-dfn-detached-1"><code>[[Detached]]</code></a>
                                内部槽为 true
                            </dt>
                            <dd>
                                运行 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                的 <a
                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>
                                中
                                <span>“<i>如果由于网络错误无法获取任何媒体数据，导致用户代理放弃获取资源</i>”</span> 的步骤。
                            </dd>
                            <dt>
                                如果媒体提供者对象是一个 <a data-link-type="idl" data-lt="MediaSourceHandle"
                                    href="#dom-mediasourcehandle" class="internalDFN"
                                    id="ref-for-dom-mediasourcehandle-11"><code>MediaSourceHandle</code></a>，且其底层
                                <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN" id="ref-for-dom-mediasource-67"><code>MediaSource</code></a> 的
                                <a data-link-type="attribute" data-lt="[[has ever been attached]]"
                                    href="#dfn-has-ever-been-attached" class="internalDFN"
                                    id="ref-for-dfn-has-ever-been-attached-1"><code>[[has ever been attached]]</code></a>
                                内部槽为 true
                            </dt>
                            <dd>
                                运行 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                的 <a
                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>
                                中
                                <span>“<i>如果由于网络错误无法获取任何媒体数据，导致用户代理放弃获取资源</i>”</span> 的步骤。
                                <div class="note" role="note" id="issue-container-generatedID-24">
                                    <div role="heading" class="note-title marker" id="h-note-24" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <div class="">
                                        这可防止通过 <a data-link-type="idl" data-lt="MediaSourceHandle"
                                            href="#dom-mediasourcehandle" class="internalDFN"
                                            id="ref-for-dom-mediasourcehandle-12"><code>MediaSourceHandle</code></a>
                                        对同一底层 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-68"><code>MediaSource</code></a> 进行多次加载，即便该 <a
                                            data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-69"><code>MediaSource</code></a> 是在
                                        <a data-link-type="interface" data-lt="Window"
                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                        中构造并且此前曾通过 <a data-link-type="dfn|abstract-op" href="#mediasource-object-url"
                                            class="internalDFN" id="ref-for-mediasource-object-url-9">MediaSource 对象
                                            URL</a> 加载。这并不妨碍随后对某个
                                        <a data-link-type="interface" data-lt="Window"
                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                        中的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-70"><code>MediaSource</code></a> 使用 <a
                                            data-link-type="dfn|abstract-op" href="#mediasource-object-url"
                                            class="internalDFN" id="ref-for-mediasource-object-url-10">MediaSource 对象
                                            URL</a> 并成功。
                                    </div>
                                </div>
                            </dd>
                            <dt>
                                如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                    id="ref-for-dom-mediasource-readystate-16"><code>readyState</code></a> 不是
                                "<a data-link-type="idl" href="#dom-readystate-closed" class="internalDFN"
                                    id="ref-for-dom-readystate-closed-8"><code>closed</code></a>"
                            </dt>
                            <dd>
                                运行 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                的 <a
                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>
                                中
                                <span>“<i>如果由于网络错误无法获取任何媒体数据，导致用户代理放弃获取资源</i>”</span> 的步骤。
                            </dd>
                            <dt>
                                否则
                            </dt>
                            <dd>
                                <ol>
                                    <li>将 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-71"><code>MediaSource</code></a> 的 <a
                                            data-link-type="attribute" data-lt="[[has ever been attached]]"
                                            href="#dfn-has-ever-been-attached" class="internalDFN"
                                            id="ref-for-dfn-has-ever-been-attached-2"><code>[[has ever been attached]]</code></a>
                                        内部槽设为 true。
                                    </li>
                                    <li>将媒体元素的 <a
                                            href="https://html.spec.whatwg.org/multipage/media.html#delaying-the-load-event-flag">delaying-the-load-event-flag</a>
                                        设为 false。
                                    </li>
                                    <li>
                                        <dl class="switch">
                                            <dt>
                                                如果该 <a data-link-type="idl" data-lt="MediaSource"
                                                    href="#dom-mediasource" class="internalDFN"
                                                    id="ref-for-dom-mediasource-72"><code>MediaSource</code></a> 构造于
                                                <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>，
                                                则建立 worker 附加通信并打开该 <a data-link-type="idl" data-lt="MediaSource"
                                                    href="#dom-mediasource" class="internalDFN"
                                                    id="ref-for-dom-mediasource-73"><code>MediaSource</code></a>：
                                            </dt>
                                            <dd>
                                                <ol>
                                                    <li>将 <a data-link-type="attribute"
                                                            data-lt="[[channel with worker]]"
                                                            href="#dfn-channel-with-worker" class="internalDFN"
                                                            id="ref-for-dfn-channel-with-worker-2"><code>[[channel with worker]]</code></a>
                                                        设为一个新的
                                                        <a data-link-type="interface" data-lt="MessageChannel"
                                                            href="https://html.spec.whatwg.org/multipage/web-messaging.html#messagechannel"><code>MessageChannel</code></a>。
                                                    </li>
                                                    <li>将 <a data-link-type="attribute" data-lt="[[port to worker]]"
                                                            href="#dfn-port-to-worker" class="internalDFN"
                                                            id="ref-for-dfn-port-to-worker-2"><code>[[port to worker]]</code></a>
                                                        设为 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/web-messaging.html#dom-messagechannel-port1"><code>port1</code></a>，
                                                        来自 <a data-link-type="attribute"
                                                            data-lt="[[channel with worker]]"
                                                            href="#dfn-channel-with-worker" class="internalDFN"
                                                            id="ref-for-dfn-channel-with-worker-3"><code>[[channel with worker]]</code></a>
                                                        的值。
                                                    </li>
                                                    <li>对 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/web-messaging.html#dom-messagechannel-port2"><code>port2</code></a>
                                                        执行 <a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializewithtransfer">StructuredSerializeWithTransfer</a>，
                                                        将其同时作为值与 <var>transferList</var> 的唯一成员，结果记为 <var
                                                            data-type="MessagePort">serialized
                                                            port2</var>。
                                                    </li>
                                                    <li><a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">在队列中添加一个任务</a>
                                                        到该 <a data-link-type="idl" data-lt="MediaSource"
                                                            href="#dom-mediasource" class="internalDFN"
                                                            id="ref-for-dom-mediasource-74"><code>MediaSource</code></a>
                                                        的
                                                        <a data-link-type="interface"
                                                            data-lt="DedicatedWorkerGlobalScope"
                                                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>，使其将会
                                                        <ol>
                                                            <li>使用 <var>serialized
                                                                    port2</var> 和 <a data-link-type="interface"
                                                                    data-lt="DedicatedWorkerGlobalScope"
                                                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                                                的
                                                                <a data-link-type="dfn"
                                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object's-realm">realm</a>
                                                                执行 <a data-link-type="dfn"
                                                                    href="https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserializewithtransfer">StructuredDeserializeWithTransfer</a>，
                                                                并将 <a data-link-type="attribute"
                                                                    data-lt="[[port to main]]" href="#dfn-port-to-main"
                                                                    class="internalDFN"
                                                                    id="ref-for-dfn-port-to-main-2"><code>[[port to main]]</code></a>
                                                                设为传输的 <a data-link-type="attribute"
                                                                    href="https://html.spec.whatwg.org/multipage/web-messaging.html#dom-messagechannel-port2"><code>port2</code></a>
                                                                值的反序列化克隆，来自 <a data-link-type="attribute"
                                                                    data-lt="[[channel with worker]]"
                                                                    href="#dfn-channel-with-worker" class="internalDFN"
                                                                    id="ref-for-dfn-channel-with-worker-5"><code>[[channel with worker]]</code></a>。
                                                            </li>
                                                            <li>将 <a data-link-type="idl"
                                                                    href="#dom-mediasource-readystate"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediasource-readystate-17"><code>readyState</code></a>
                                                                属性设为
                                                                "<a data-link-type="idl" href="#dom-readystate-open"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-readystate-open-12"><code>open</code></a>"。
                                                            </li>
                                                            <li><a data-link-type="dfn"
                                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                                <a data-link-type="dfn"
                                                                    href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为
                                                                <a data-link-type="idl" data-lt="sourceopen"
                                                                    href="#dfn-sourceopen" class="internalDFN"
                                                                    id="ref-for-dfn-sourceopen-1"><code>sourceopen</code></a>，
                                                                目标为
                                                                <a data-link-type="idl" data-lt="MediaSource"
                                                                    href="#dom-mediasource" class="internalDFN"
                                                                    id="ref-for-dom-mediasource-75"><code>MediaSource</code></a>。
                                                            </li>
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </dd>
                                            <dt>
                                                否则，该 <a data-link-type="idl" data-lt="MediaSource"
                                                    href="#dom-mediasource" class="internalDFN"
                                                    id="ref-for-dom-mediasource-76"><code>MediaSource</code></a> 构造于 <a
                                                    data-link-type="interface" data-lt="Window"
                                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>：
                                            </dt>
                                            <dd>
                                                <ol>
                                                    <li>将 <a data-link-type="attribute"
                                                            data-lt="[[channel with worker]]"
                                                            href="#dfn-channel-with-worker" class="internalDFN"
                                                            id="ref-for-dfn-channel-with-worker-6"><code>[[channel with worker]]</code></a>
                                                        设为 null。
                                                    </li>
                                                    <li>将 <a data-link-type="attribute" data-lt="[[port to worker]]"
                                                            href="#dfn-port-to-worker" class="internalDFN"
                                                            id="ref-for-dfn-port-to-worker-3"><code>[[port to worker]]</code></a>
                                                        设为 null。
                                                    </li>
                                                    <li>将 <a data-link-type="attribute" data-lt="[[port to main]]"
                                                            href="#dfn-port-to-main" class="internalDFN"
                                                            id="ref-for-dfn-port-to-main-3"><code>[[port to main]]</code></a>
                                                        设为 null。
                                                    </li>
                                                    <li>将 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediasource-readystate-18"><code>readyState</code></a>
                                                        属性设为
                                                        "<a data-link-type="idl" href="#dom-readystate-open"
                                                            class="internalDFN"
                                                            id="ref-for-dom-readystate-open-13"><code>open</code></a>"。
                                                    </li>
                                                    <li><a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，事件名为
                                                        <a data-link-type="idl" data-lt="sourceopen"
                                                            href="#dfn-sourceopen" class="internalDFN"
                                                            id="ref-for-dfn-sourceopen-2"><code>sourceopen</code></a>，
                                                        目标为
                                                        <a data-link-type="idl" data-lt="MediaSource"
                                                            href="#dom-mediasource" class="internalDFN"
                                                            id="ref-for-dom-mediasource-77"><code>MediaSource</code></a>。
                                                    </li>
                                                </ol>
                                            </dd>
                                        </dl>
                                    </li>
                                    <li>继续运行 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                        的剩余
                                        <span>“<i>否则（模式为本地）</i>”</span> 步骤，并遵循以下要求：
                                        <ol>
                                            <li><a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                                或 <a
                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>
                                                中提到的“下载”“接收的字节数”或“每当当前媒体资源有新数据可用”之类表述，均指通过 <a data-link-type="idl"
                                                    data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-appendbuffer-2"><code>appendBuffer</code></a><code>()</code>
                                                传入的数据。
                                            </li>
                                            <li><a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                                                和
                                                <a
                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>
                                                中与 HTTP 相关的内容不适用，因为当 <a data-link-type="idl" data-lt="MediaSource"
                                                    href="#dom-mediasource" class="internalDFN"
                                                    id="ref-for-dom-mediasource-78"><code>MediaSource</code></a>
                                                已附加时，HTMLMediaElement 不会通过 HTTP 获取媒体数据。
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </dd>
                        </dl>
                    </li>
                </ol>
                <div class="note" role="note" id="issue-container-generatedID-25">
                    <div role="heading" class="note-title marker" id="h-note-25" aria-level="5"><span>注意</span></div>
                    <p class="">
                        已附加的 MediaSource 不会使用 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                        中的远程模式步骤，因此媒体元素不会触发 “suspend” 事件。尽管本规范的未来版本可能会从附加了 MediaSource 的媒体元素中移除 “progress” 与 “stalled”
                        事件，但遵循本版本规范的用户代理仍可能触发这两个事件，因为这些对 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                        的引用在本规范实现稳定之后才发生了变更。
                    </p>
                </div>
            </section>
            <section id="mediasource-detach">
                <div class="header-wrapper">
                    <h4 id="x3-15-2-detaching-from-a-media-element"><bdi class="secno">3.15.2 </bdi>
                        <dfn id="dfn-detaching-from-a-media-element" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn" class="respec-offending-element"
                            title="Found definition for &quot;Detaching from a media element&quot;, but nothing links to it. This is usually a spec bug!">从媒体元素解绑</dfn>
                    </h4><a class="self-link" href="#mediasource-detach" aria-label="Permalink for Section 3.15.2"></a>
                </div>

                <p>
                    在媒体元素将要切换到
                    <a data-link-type="const"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-network_empty"><code>NETWORK_EMPTY</code></a>
                    并<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                    <a data-link-type="event"
                        href="https://html.spec.whatwg.org/multipage/media.html#event-media-emptied">emptied</a>
                    到媒体元素的任何情况下，运行以下步骤。这些步骤<em class="rfc2119">应当</em>在切换之前立即运行。
                </p>
                <ol>
                    <li>
                        <dl class="switch">
                            <dt>
                                如果 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN" id="ref-for-dom-mediasource-79"><code>MediaSource</code></a>
                                构造于
                                <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>：
                            </dt>
                            <dd>
                                <ol>
                                    <li>通过向
                                        <a data-link-type="attribute" data-lt="[[port to worker]]"
                                            href="#dfn-port-to-worker" class="internalDFN"
                                            id="ref-for-dfn-port-to-worker-4"><code>[[port to worker]]</code></a>
                                        发送内部 <code>detach</code> 消息，通知
                                        <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-80"><code>MediaSource</code></a>。
                                    </li>
                                    <li>将 <a data-link-type="attribute" data-lt="[[port to worker]]"
                                            href="#dfn-port-to-worker" class="internalDFN"
                                            id="ref-for-dfn-port-to-worker-5"><code>[[port to worker]]</code></a>
                                        设为 null。
                                    </li>
                                    <li>将 <a data-link-type="attribute" data-lt="[[channel with worker]]"
                                            href="#dfn-channel-with-worker" class="internalDFN"
                                            id="ref-for-dfn-channel-with-worker-7"><code>[[channel with worker]]</code></a>
                                        设为 null。
                                    </li>
                                    <li>该 <code>detach</code> 通知的隐式消息处理程序在
                                        <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                        中的
                                        <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-81"><code>MediaSource</code></a>
                                        上运行余下的步骤。
                                    </li>
                                </ol>
                            </dd>
                            <dt>
                                否则，<a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN" id="ref-for-dom-mediasource-82"><code>MediaSource</code></a>
                                构造于
                                <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>：
                            </dt>
                            <dd>
                                在该 <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                的
                                <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN" id="ref-for-dom-mediasource-83"><code>MediaSource</code></a>
                                上继续余下的步骤。
                            </dd>
                        </dl>
                    </li>
                    <li>将 <a data-link-type="attribute" data-lt="[[port to main]]" href="#dfn-port-to-main"
                            class="internalDFN" id="ref-for-dfn-port-to-main-4"><code>[[port to main]]</code></a>
                        设为 null。
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                            id="ref-for-dom-mediasource-readystate-19"><code>readyState</code></a> 属性设为
                        "<a data-link-type="idl" href="#dom-readystate-closed" class="internalDFN"
                            id="ref-for-dom-readystate-closed-9"><code>closed</code></a>"。
                    </li>
                    <li>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 是
                        <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource"
                            class="internalDFN"
                            id="ref-for-dom-managedmediasource-3"><code>ManagedMediaSource</code></a>，
                        则将 <a data-link-type="idl" href="#dom-managedmediasource-streaming" class="internalDFN"
                            id="ref-for-dom-managedmediasource-streaming-1"><code>streaming</code></a>
                        属性设为 <code>false</code>。
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                            id="ref-for-dom-mediasource-duration-2"><code>duration</code></a> 更新为 NaN。
                    </li>
                    <li>从 <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-activesourcebuffers-7"><code>activeSourceBuffers</code></a>
                        中移除所有
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-27"><code>SourceBuffer</code></a>
                        对象。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                        <a data-link-type="idl" data-lt="removesourcebuffer" href="#dfn-removesourcebuffer"
                            class="internalDFN"
                            id="ref-for-dfn-removesourcebuffer-3"><code>removesourcebuffer</code></a> 到
                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-activesourcebuffers-8"><code>activeSourceBuffers</code></a>。
                    </li>
                    <li>从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-sourcebuffers-16"><code>sourceBuffers</code></a>
                        中移除所有
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-28"><code>SourceBuffer</code></a>
                        对象。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                        <a data-link-type="idl" data-lt="removesourcebuffer" href="#dfn-removesourcebuffer"
                            class="internalDFN"
                            id="ref-for-dfn-removesourcebuffer-4"><code>removesourcebuffer</code></a> 到
                        <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-sourcebuffers-17"><code>sourceBuffers</code></a>。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                        <a data-link-type="idl" data-lt="sourceclose" href="#dfn-sourceclose" class="internalDFN"
                            id="ref-for-dfn-sourceclose-1"><code>sourceclose</code></a>
                        到 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-84"><code>MediaSource</code></a>。
                    </li>
                </ol>
                <div class="note" role="note" id="issue-container-generatedID-26">
                    <div role="heading" class="note-title marker" id="h-note-26" aria-level="5"><span>注意</span></div>
                    <p class="">
                        展望未来，当已附加的（如果有）<a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                            class="internalDFN" id="ref-for-dom-mediasource-85"><code>MediaSource</code></a>
                        必须从媒体元素解绑时，预期外部调用并运行此算法。除了或替代媒体元素切换到
                        <a data-link-type="const"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-network_empty"><code>NETWORK_EMPTY</code></a>
                        的情形外，它<em class="rfc2119">可以</em>在 HTMLMediaElement
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                title="HTML Standard">HTML</a></cite>]
                        的 load() 操作以及
                        <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>
                        失败时被调用。资源获取算法失败是指中止资源获取算法或资源选择算法的那些情况，但“最终步骤”（Final step）
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                title="HTML Standard">HTML</a></cite>]
                        不视为触发解绑的失败。
                    </p>
                </div>
            </section>
            <section id="mediasource-seeking">
                <div class="header-wrapper">
                    <h4 id="x3-15-3-seeking"><bdi class="secno">3.15.3 </bdi>
                        <dfn id="dfn-seeking" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"
                            class="respec-offending-element"
                            title="Found definition for &quot;Seeking&quot;, but nothing links to it. This is usually a spec bug!">定位</dfn>
                    </h4><a class="self-link" href="#mediasource-seeking" aria-label="Permalink for Section 3.15.3"></a>
                </div>

                <p>
                    作为
                    <a href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seek">seek 算法</a>
                    中“<i>等待用户代理确定新播放位置的媒体数据是否可用；若可用，等待其已解码足够数据以播放该位置</i>”
                    步骤的一部分，运行以下步骤：
                </p>
                <ol>
                    <li>
                        <div class="note" role="note" id="issue-container-generatedID-27">
                            <div role="heading" class="note-title marker" id="h-note-27" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                媒体元素会在
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-29"><code>SourceBuffer</code></a>
                                对象（位于
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-9"><code>activeSourceBuffers</code></a>
                                中）中查找包含
                                <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                                    id="ref-for-dfn-media-segment-4">媒体分段</a>
                                的 <var data-type="double">new playback position</var>。在当前
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                                属性值中的任何
                                <a data-link-type="interface" data-lt="TimeRanges"
                                    href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                范围内的位置，都已为该位置缓冲了所有必要的媒体分段。
                            </p>
                        </div>
                        <dl class="switch">
                            <dt>
                                如果 <var>new playback position</var> 不在
                                <a data-link-type="interface" data-lt="TimeRanges"
                                    href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                中（来自
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>）
                            </dt>
                            <dd>
                                <ol>
                                    <li>如果
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-2"><code>readyState</code></a>
                                        属性大于
                                        <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>，
                                        则将其
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-3"><code>readyState</code></a>
                                        设为
                                        <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                                        <div class="note" role="note" id="issue-container-generatedID-28">
                                            <div role="heading" class="note-title marker" id="h-note-28" aria-level="5">
                                                <span>注意</span>
                                            </div>
                                            <p class="">
                                                按照
                                                <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                        title="HTML Standard">HTML</a></cite>] 的逻辑，
                                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                                的
                                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                                    id="ref-for-dom-readystate-4"><code>readyState</code></a>
                                                变化可能触发该元素上的事件。
                                            </p>
                                        </div>
                                    </li>
                                    <li>媒体元素等待一次
                                        <a data-link-type="idl" data-lt="appendBuffer()"
                                            href="#dom-sourcebuffer-appendbuffer" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-appendbuffer-3"><code>appendBuffer</code></a><code>()</code>
                                        调用，使
                                        <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing"
                                            class="internalDFN" id="ref-for-dfn-coded-frame-processing-2">编码帧处理</a>
                                        算法将
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-5"><code>readyState</code></a>
                                        设为大于
                                        <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>
                                        的值。
                                        <div class="note" role="note" id="issue-container-generatedID-29">
                                            <div role="heading" class="note-title marker" id="h-note-29" aria-level="5">
                                                <span>注意</span>
                                            </div>
                                            <p class="">
                                                Web 应用可以使用
                                                <a data-link-type="idl" href="#dom-sourcebuffer-buffered"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-buffered-1"><code>buffered</code></a>
                                                以及
                                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                                的
                                                <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                                                来判定媒体元素恢复播放所需的数据。
                                            </p>
                                        </div>
                                    </li>
                                </ol>
                            </dd>
                            <dt>
                                否则
                            </dt>
                            <dd>
                                继续
                                <div class="note" role="note" id="issue-container-generatedID-30">
                                    <div role="heading" class="note-title marker" id="h-note-30" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        如果 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-readystate-20"><code>readyState</code></a>
                                        属性为 "<a data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                            id="ref-for-dom-readystate-ended-5"><code>ended</code></a>"，
                                        且 <var>new playback position</var> 位于当前
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="attribute"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                                        所含的某个
                                        <a data-link-type="interface" data-lt="TimeRanges"
                                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                        中，那么即使一个或多个当前选中或启用的轨道缓冲区的最大范围结束时间戳小于 <var>new playback position</var>，
                                        也必须在此继续完成 seek 操作。该情况应仅因
                                        <a data-link-type="idl" href="#dom-sourcebuffer-buffered" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-buffered-2"><code>buffered</code></a>
                                        在 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                            id="ref-for-dom-mediasource-readystate-21"><code>readyState</code></a>
                                        为 "<a data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                            id="ref-for-dom-readystate-ended-6"><code>ended</code></a>" 时的逻辑而出现。
                                    </p>
                                </div>
                            </dd>
                        </dl>
                    </li>
                    <li>媒体元素重置所有解码器，并使用相应
                        <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment" class="internalDFN"
                            id="ref-for-dfn-initialization-segment-4">初始化分段</a>
                        的数据对每个解码器进行初始化。
                    </li>
                    <li>媒体元素从
                        <a data-link-type="dfn|abstract-op" href="#dfn-active-track-buffers" class="internalDFN"
                            id="ref-for-dfn-active-track-buffers-1">活动轨道缓冲区</a>
                        向解码器馈送
                        <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                            id="ref-for-dfn-coded-frame-10">编码帧</a>，
                        起始于位于 <var>new playback position</var> 之前最近的
                        <a data-link-type="dfn|abstract-op" href="#random-access-point" class="internalDFN"
                            id="ref-for-random-access-point-1">随机访问点</a>。
                    </li>
                    <li>在“<i>等待稳定状态</i>”步骤恢复
                        <a href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seek">seek 算法</a>。
                    </li>
                </ol>
            </section>
            <section id="buffer-monitoring">
                <div class="header-wrapper">
                    <h4 id="x3-15-4-sourcebuffer-monitoring"><bdi class="secno">3.15.4 </bdi>
                        <dfn id="dfn-sourcebuffer-monitoring" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">SourceBuffer 监控</dfn>
                    </h4><a class="self-link" href="#buffer-monitoring" aria-label="Permalink for Section 3.15.4"></a>
                </div>

                <p>
                    在播放过程中会定期运行以下步骤，以确保
                    <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-30"><code>SourceBuffer</code></a>
                    对象（位于
                    <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-10"><code>activeSourceBuffers</code></a>
                    中）具有
                    <a data-link-type="dfn|abstract-op" href="#enough-data" class="internalDFN"
                        id="ref-for-enough-data-1">足够数据以确保不间断播放</a>。
                    对 <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-11"><code>activeSourceBuffers</code></a>
                    的更改也会触发这些步骤，因为它们影响触发状态转换的条件。
                </p>
                <p>
                    具有
                    <dfn id="enough-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">足够数据以确保不间断播放</dfn>
                    是实现相关的条件，用户代理判定其当前拥有足够数据，可在有意义的一段时间内不发生停顿地播放。该条件被持续评估，以确定何时将媒体元素在
                    <a data-link-type="const"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></a>
                    就绪状态之间进行转换。这些转换指示用户代理何时认为已缓冲足够数据，或分别需要更多数据。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-31">
                    <div role="heading" class="note-title marker" id="h-note-31" aria-level="5"><span>注意</span></div>
                    <p class="">
                        实现<em class="rfc2119">可以</em>选择使用已缓冲字节数、已缓冲时间、追加速率或任何其他认为合适的度量来判断何时拥有足够数据。所用度量<em
                            class="rfc2119">可以</em>
                        在播放期间变化，因此 Web 应用<em class="rfc2119">应当</em>仅依赖
                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                            id="ref-for-dom-readystate-6"><code>readyState</code></a>
                        的值来判定是否需要更多数据。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-32">
                    <div role="heading" class="note-title marker" id="h-note-32" aria-level="5"><span>注意</span></div>
                    <p class="">
                        当媒体元素需要更多数据时，用户代理<em class="rfc2119">应当</em>及时将其从
                        <a data-link-type="const"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></a>
                        切换到
                        <a data-link-type="const"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>，
                        以便 Web 应用能够在不造成播放中断的情况下响应。例如，当当前播放位置距离已缓冲数据的末尾还有 500ms 时进行切换，
                        可为应用留出约 500ms 的时间追加更多数据，以避免播放停顿。
                    </p>
                </div>
                <dl class="switch">
                    <dt>
                        如果
                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                            id="ref-for-dom-readystate-7"><code>readyState</code></a>
                        属性等于
                        <a data-link-type="const"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>：
                    </dt>
                    <dd>
                        <ol>
                            <li>终止这些步骤。
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果
                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                        不包含覆盖当前播放位置的
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>：
                    </dt>
                    <dd>
                        <ol>
                            <li>将
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-8"><code>readyState</code></a>
                                属性设为
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                                <div class="note" role="note" id="issue-container-generatedID-33">
                                    <div role="heading" class="note-title marker" id="h-note-33" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        按照
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 的逻辑，
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-9"><code>readyState</code></a>
                                        变化可能触发该元素上的事件。
                                    </p>
                                </div>
                            </li>
                            <li>终止这些步骤。
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果
                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                        包含覆盖当前播放位置的
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                        且具有
                        <a data-link-type="dfn|abstract-op" href="#enough-data" class="internalDFN"
                            id="ref-for-enough-data-2">足够数据以确保不间断播放</a>：
                    </dt>
                    <dd>
                        <ol>
                            <li>将
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-10"><code>readyState</code></a>
                                属性设为
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></a>。
                                <div class="note" role="note" id="issue-container-generatedID-34">
                                    <div role="heading" class="note-title marker" id="h-note-34" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        按照
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 的逻辑，
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-11"><code>readyState</code></a>
                                        变化可能触发该元素上的事件。
                                    </p>
                                </div>
                            </li>
                            <li>如果此前因切换到
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                                而暂停播放，则此时可能恢复播放。
                            </li>
                            <li>终止这些步骤。
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果
                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                        包含覆盖当前播放位置并向后延伸一段时间的
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>，
                        则运行以下步骤：
                    </dt>
                    <dd>
                        <ol>
                            <li>将
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-12"><code>readyState</code></a>
                                属性设为
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>。
                                <div class="note" role="note" id="issue-container-generatedID-35">
                                    <div role="heading" class="note-title marker" id="h-note-35" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        按照
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 的逻辑，
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-13"><code>readyState</code></a>
                                        变化可能触发该元素上的事件。
                                    </p>
                                </div>
                            </li>
                            <li>如果此前因切换到
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                                而暂停播放，则此时可能恢复播放。
                            </li>
                            <li>终止这些步骤。
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果
                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                        的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                        包含的
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                        正好在当前播放位置结束，且在当前位置之后没有覆盖的范围：
                    </dt>
                    <dd>
                        <ol>
                            <li>将
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-14"><code>readyState</code></a>
                                属性设为
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>。
                                <div class="note" role="note" id="issue-container-generatedID-36">
                                    <div role="heading" class="note-title marker" id="h-note-36" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        按照
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 的逻辑，
                                        <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-15"><code>readyState</code></a>
                                        变化可能触发该元素上的事件。
                                    </p>
                                </div>
                            </li>
                            <li>此时播放被暂停，因为媒体元素没有足够数据推进
                                <a href="https://html.spec.whatwg.org/multipage/media.html#media-timeline">媒体时间线</a>。
                            </li>
                            <li>终止这些步骤。
                            </li>
                        </ol>
                    </dd>
                </dl>
            </section>
            <section id="active-source-buffer-changes">
                <div class="header-wrapper">
                    <h4 id="x3-15-5-changes-to-selected-enabled-track-state"><bdi class="secno">3.15.5 </bdi>
                        <dfn id="dfn-changes-to-selected-enabled-track-state" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn" class="respec-offending-element"
                            title="Found definition for &quot;Changes to selected/enabled track state&quot;, but nothing links to it. This is usually a spec bug!">选中/启用轨道状态变更</dfn>
                    </h4><a class="self-link" href="#active-source-buffer-changes"
                        aria-label="Permalink for Section 3.15.5"></a>
                </div>

                <p>
                    在播放过程中，如果
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-selected"><code>selected</code></a>
                    视频轨道、
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-enabled"><code>enabled</code></a>
                    音频轨道或某个文本轨道的
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-mode"><code>mode</code></a>
                    发生变化，则需要更新
                    <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                        id="ref-for-dom-mediasource-activesourcebuffers-12"><code>activeSourceBuffers</code></a>。
                    当发生一个或多个这样的变化时，需要遵循以下步骤。此外，当
                    <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-86"><code>MediaSource</code></a>
                    构造于
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>，
                    则每当之前由内部 <code>create track mirror</code> 消息的隐式处理程序创建的轨道之
                    <a data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    镜像发生变化时，也<em class="rfc2119">必须</em>通过向
                    <a data-link-type="attribute" data-lt="[[port to worker]]" href="#dfn-port-to-worker"
                        class="internalDFN" id="ref-for-dfn-port-to-worker-6"><code>[[port to worker]]</code></a>
                    发送内部 <code>update track state</code> 消息，将该变化应用到对应的
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    轨道上，其隐式处理程序执行该变更并运行以下步骤。同样地，发生在
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    轨道上的每个变化，也<em class="rfc2119">必须</em>通过向
                    <a data-link-type="attribute" data-lt="[[port to main]]" href="#dfn-port-to-main"
                        class="internalDFN" id="ref-for-dfn-port-to-main-5"><code>[[port to main]]</code></a>
                    发送内部 <code>update track state</code> 消息，将该变化应用到对应的
                    <a data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    轨道镜像上，其隐式处理程序对镜像进行变更。
                </p>
                <dl class="switch">
                    <dt>
                        如果选中的视频轨道发生改变，则运行以下步骤：
                    </dt>
                    <dd>
                        <ol>
                            <li>如果与先前选中的视频轨道关联的
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-31"><code>SourceBuffer</code></a>
                                未与任何其他启用的轨道关联，则运行以下步骤：
                                <ol>
                                    <li>从
                                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-activesourcebuffers-13"><code>activeSourceBuffers</code></a>
                                        中移除该
                                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-32"><code>SourceBuffer</code></a>。
                                    </li>
                                    <li><a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                        以 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                        <a data-link-type="idl" data-lt="removesourcebuffer"
                                            href="#dfn-removesourcebuffer" class="internalDFN"
                                            id="ref-for-dfn-removesourcebuffer-5"><code>removesourcebuffer</code></a>
                                        到
                                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-activesourcebuffers-14"><code>activeSourceBuffers</code></a>
                                    </li>
                                </ol>
                            </li>
                            <li>如果与新选中的视频轨道关联的
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-33"><code>SourceBuffer</code></a>
                                尚未位于
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-15"><code>activeSourceBuffers</code></a>
                                中，则运行以下步骤：
                                <ol>
                                    <li>将该
                                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-34"><code>SourceBuffer</code></a>
                                        添加到
                                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-activesourcebuffers-16"><code>activeSourceBuffers</code></a>。
                                    </li>
                                    <li><a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                        以 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                        <a data-link-type="idl" data-lt="addsourcebuffer" href="#dfn-addsourcebuffer"
                                            class="internalDFN"
                                            id="ref-for-dfn-addsourcebuffer-2"><code>addsourcebuffer</code></a>
                                        到
                                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-activesourcebuffers-17"><code>activeSourceBuffers</code></a>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果某音频轨道变为禁用，且与该轨道关联的
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-35"><code>SourceBuffer</code></a>
                        未与任何其他启用或选中的轨道关联，则运行以下步骤：
                    </dt>
                    <dd>
                        <ol>
                            <li>从
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-18"><code>activeSourceBuffers</code></a>
                                中移除与该音频轨道关联的
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-36"><code>SourceBuffer</code></a>。
                            </li>
                            <li><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                以 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                <a data-link-type="idl" data-lt="removesourcebuffer" href="#dfn-removesourcebuffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-removesourcebuffer-6"><code>removesourcebuffer</code></a>
                                到
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-19"><code>activeSourceBuffers</code></a>
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果某音频轨道变为启用，且与该轨道关联的
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-37"><code>SourceBuffer</code></a>
                        尚未位于
                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-activesourcebuffers-20"><code>activeSourceBuffers</code></a>
                        中，则运行以下步骤：
                    </dt>
                    <dd>
                        <ol>
                            <li>将与该音频轨道关联的
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-38"><code>SourceBuffer</code></a>
                                添加到
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-21"><code>activeSourceBuffers</code></a>
                            </li>
                            <li><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                以 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                <a data-link-type="idl" data-lt="addsourcebuffer" href="#dfn-addsourcebuffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-addsourcebuffer-3"><code>addsourcebuffer</code></a>
                                到
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-22"><code>activeSourceBuffers</code></a>
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果某文本轨道的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-mode"><code>mode</code></a>
                        变为
                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-disabled">"disabled"</a></code>，
                        且与该轨道关联的
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-39"><code>SourceBuffer</code></a>
                        未与任何其他启用或选中的轨道关联，则运行以下步骤：
                    </dt>
                    <dd>
                        <ol>
                            <li>从
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-23"><code>activeSourceBuffers</code></a>
                                中移除与该文本轨道关联的
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-40"><code>SourceBuffer</code></a>
                            </li>
                            <li><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                以 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                <a data-link-type="idl" data-lt="removesourcebuffer" href="#dfn-removesourcebuffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-removesourcebuffer-7"><code>removesourcebuffer</code></a>
                                到
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-24"><code>activeSourceBuffers</code></a>
                            </li>
                        </ol>
                    </dd>
                    <dt>
                        如果某文本轨道的
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-mode"><code>mode</code></a>
                        变为
                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-showing">"showing"</a></code>
                        或
                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-hidden">"hidden"</a></code>，
                        且与该轨道关联的
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-41"><code>SourceBuffer</code></a>
                        尚未位于
                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-activesourcebuffers-25"><code>activeSourceBuffers</code></a>
                        中，则运行以下步骤：
                    </dt>
                    <dd>
                        <ol>
                            <li>将与该文本轨道关联的
                                <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-42"><code>SourceBuffer</code></a>
                                添加到
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-26"><code>activeSourceBuffers</code></a>
                            </li>
                            <li><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                以 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                <a data-link-type="idl" data-lt="addsourcebuffer" href="#dfn-addsourcebuffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-addsourcebuffer-4"><code>addsourcebuffer</code></a>
                                到
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-27"><code>activeSourceBuffers</code></a>
                            </li>
                        </ol>
                    </dd>
                </dl>
            </section>
            <section id="duration-change-algorithm">
                <div class="header-wrapper">
                    <h4 id="x3-15-6-duration-change"><bdi class="secno">3.15.6 </bdi>
                        <dfn id="dfn-duration-change" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">时长变更</dfn>
                    </h4><a class="self-link" href="#duration-change-algorithm"
                        aria-label="Permalink for Section 3.15.6"></a>
                </div>

                <p>
                    当 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                        id="ref-for-dom-mediasource-duration-3"><code>duration</code></a> 需要变更为 <var
                        data-type="unrestricted double">new duration</var> 时，按照以下步骤操作。
                </p>
                <ol>
                    <li>如果当前 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                            id="ref-for-dom-mediasource-duration-4"><code>duration</code></a> 的值等于 <var>new
                            duration</var>，则直接返回。
                    </li>
                    <li>如果 <var>new duration</var> 小于所有 <a data-link-type="idl" data-lt="SourceBuffer"
                            href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-43"><code>SourceBuffer</code></a>（在 <a data-link-type="idl"
                            href="#dom-mediasource-sourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-sourcebuffers-18"><code>sourceBuffers</code></a> 中）缓冲的所有 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                            id="ref-for-dfn-coded-frame-11">编码帧</a>的最大 <a data-link-type="dfn|abstract-op"
                            href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-11">展示时间戳</a>，则抛出 <a data-link-type="exception"
                            data-lt="InvalidStateError"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                        异常并终止这些步骤。
                        <div class="note" role="note" id="issue-container-generatedID-37">
                            <div role="heading" class="note-title marker" id="h-note-37" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                不允许缩短时长导致当前已缓冲的媒体被截断。如需截断，应先用 <a data-link-type="idl" data-lt="remove()"
                                    href="#dom-sourcebuffer-remove" class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-remove-1"><code>remove</code></a><code>()</code>
                                减少缓冲范围，再更新 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                                    id="ref-for-dom-mediasource-duration-5"><code>duration</code></a>。
                            </p>
                        </div>
                    </li>
                    <li>令 <var data-type="unrestricted double">highest end time</var> 为所有 <a data-link-type="idl"
                            data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-44"><code>SourceBuffer</code></a>（在 <a data-link-type="idl"
                            href="#dom-mediasource-sourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-sourcebuffers-19"><code>sourceBuffers</code></a> 中）内所有 <a
                            data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                            id="ref-for-track-buffer-2">轨道缓冲区</a>的 <a data-link-type="dfn|abstract-op"
                            href="#track-buffer-ranges" class="internalDFN"
                            id="ref-for-track-buffer-ranges-1">缓冲区范围</a>最大结束时间。
                    </li>
                    <li>如果 <var>new duration</var> 小于 <var data-type="unrestricted double">highest end time</var>，则
                        <div class="note" role="note" id="issue-container-generatedID-38">
                            <div role="heading" class="note-title marker" id="h-note-38" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                该情况可能由于 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-removal"
                                    class="internalDFN"
                                    id="ref-for-dfn-coded-frame-removal-1">编码帧移除</a>算法会保留移除区间起始之前的编码帧而出现。
                            </p>
                        </div>
                        <ol>
                            <li>将 <var>new duration</var> 更新为 <var data-type="unrestricted double">highest end
                                    time</var>。
                            </li>
                        </ol>
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                            id="ref-for-dom-mediasource-duration-6"><code>duration</code></a> 更新为 <var>new
                            duration</var>。
                    </li>
                    <li>使用 <a data-link-type="dfn|abstract-op" href="#dfn-mirror-if-necessary" class="internalDFN"
                            id="ref-for-dfn-mirror-if-necessary-4">必要时镜像</a>算法，在 <a data-link-type="interface"
                            data-lt="Window"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                        上运行以下步骤以更新媒体元素的时长：
                        <ol>
                            <li>将媒体元素的 <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-duration"><code>duration</code></a>
                                更新为 <var>new duration</var>。
                            </li>
                            <li>运行 <a
                                    href="https://html.spec.whatwg.org/multipage/media.html#durationChange">HTMLMediaElement
                                    时长变更算法</a>。
                            </li>
                        </ol>
                    </li>
                </ol>
            </section>
            <section id="end-of-stream-algorithm">
                <div class="header-wrapper">
                    <h4 id="x3-15-7-end-of-stream"><bdi class="secno">3.15.7 </bdi>
                        <dfn id="dfn-end-of-stream" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">流结束</dfn>
                    </h4><a class="self-link" href="#end-of-stream-algorithm"
                        aria-label="Permalink for Section 3.15.7"></a>
                </div>

                <p>
                    当应用通过 <a data-link-type="idl" data-lt="endOfStream()" href="#dom-mediasource-endofstream"
                        class="internalDFN"
                        id="ref-for-dom-mediasource-endofstream-4"><code>endOfStream</code></a><code>()</code>
                    调用或某算法需要信号解码错误时会调用此算法。
                    此算法接收一个 <var data-type="EndOfStreamError">error</var> 参数，指示是否需要发出错误信号。
                </p>
                <ol>
                    <li>将 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                            id="ref-for-dom-mediasource-readystate-22"><code>readyState</code></a> 属性值设置为
                        "<a data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                            id="ref-for-dom-readystate-ended-7"><code>ended</code></a>"。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                        <a data-link-type="idl" data-lt="sourceended" href="#dfn-sourceended" class="internalDFN"
                            id="ref-for-dfn-sourceended-1"><code>sourceended</code></a>
                        到 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-87"><code>MediaSource</code></a>。
                    </li>
                    <li>
                        <dl class="switch">
                            <dt>
                                如果 <var data-type="EndOfStreamError">error</var> 未设置
                            </dt>
                            <dd>
                                <ol>
                                    <li>以所有 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-45"><code>SourceBuffer</code></a>（在 <a
                                            data-link-type="idl" href="#dom-mediasource-sourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-sourcebuffers-20"><code>sourceBuffers</code></a>
                                        中）内所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-3">轨道缓冲区</a>的 <a
                                            data-link-type="dfn|abstract-op" href="#track-buffer-ranges"
                                            class="internalDFN" id="ref-for-track-buffer-ranges-2">缓冲区范围</a>最大结束时间为 <var
                                            data-type="unrestricted double">new duration</var>，运行 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-duration-change"
                                            class="internalDFN" id="ref-for-dfn-duration-change-3">时长变更</a>算法。
                                        <div class="note" role="note" id="issue-container-generatedID-39">
                                            <div role="heading" class="note-title marker" id="h-note-39" aria-level="5">
                                                <span>注意</span>
                                            </div>
                                            <p class="">
                                                这样可使时长正确反映追加的媒体分段的结束。例如，若时长显式设置为10秒，实际只追加了0~5秒的媒体分段后调用了 endOfStream()，
                                                那么时长会被更新为5秒。
                                            </p>
                                        </div>
                                    </li>
                                    <li>通知媒体元素其已拥有全部媒体数据。
                                    </li>
                                </ol>
                            </dd>
                            <dt>
                                如果 <var data-type="EndOfStreamError">error</var> 设为 "<a data-link-type="idl"
                                    href="#dom-endofstreamerror-network" class="internalDFN"
                                    id="ref-for-dom-endofstreamerror-network-2"><code>network</code></a>"
                            </dt>
                            <dd>
                                使用 <a data-link-type="dfn|abstract-op" href="#dfn-mirror-if-necessary"
                                    class="internalDFN" id="ref-for-dfn-mirror-if-necessary-5">必要时镜像</a>算法，在 <a
                                    data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                上运行以下步骤：
                                <dl class="switch">
                                    <dt>
                                        如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的 <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-16"><code>readyState</code></a>
                                        属性等于 <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>
                                    </dt>
                                    <dd>
                                        运行 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>的
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>中
                                        <span>“<i>如果由于网络错误无法获取任何媒体数据，导致用户代理放弃获取资源</i>”</span> 的步骤。
                                    </dd>
                                    <dt>
                                        如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的 <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-17"><code>readyState</code></a>
                                        属性大于 <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>
                                    </dt>
                                    <dd>
                                        运行 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>的
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>中
                                        “<i>如果连接在接收到部分媒体数据后中断，导致用户代理放弃获取资源</i>”的步骤。
                                    </dd>
                                </dl>
                            </dd>
                            <dt>
                                如果 <var data-type="EndOfStreamError">error</var> 设为 "<a data-link-type="idl"
                                    href="#dom-endofstreamerror-decode" class="internalDFN"
                                    id="ref-for-dom-endofstreamerror-decode-2"><code>decode</code></a>"
                            </dt>
                            <dd>
                                使用 <a data-link-type="dfn|abstract-op" href="#dfn-mirror-if-necessary"
                                    class="internalDFN" id="ref-for-dfn-mirror-if-necessary-6">必要时镜像</a>算法，在 <a
                                    data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                上运行以下步骤：
                                <dl class="switch">
                                    <dt>
                                        如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的 <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-18"><code>readyState</code></a>
                                        属性等于 <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>
                                    </dt>
                                    <dd>
                                        运行 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>的
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>中
                                        “<i>如果媒体数据可被获取但经检查后发现格式不支持，或完全无法渲染</i>”的步骤。
                                    </dd>
                                    <dt>
                                        如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的 <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-19"><code>readyState</code></a>
                                        属性大于 <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>
                                    </dt>
                                    <dd>
                                        运行 <a
                                            href="https://html.spec.whatwg.org/multipage/media.html#fatal-decode-error">媒体数据损坏</a>步骤，参考
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>的
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/media.html#media-data-processing-steps-list">媒体数据处理步骤列表</a>。
                                    </dd>
                                </dl>
                            </dd>
                        </dl>
                    </li>
                </ol>
            </section>
            <section id="mirror-if-necessary-algorithm">
                <div class="header-wrapper">
                    <h4 id="x3-15-8-mirror-if-necessary"><bdi class="secno">3.15.8 </bdi>
                        <dfn id="dfn-mirror-if-necessary" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">必要时镜像</dfn>
                    </h4><a class="self-link" href="#mirror-if-necessary-algorithm"
                        aria-label="Permalink for Section 3.15.8"></a>
                </div>

                <p>
                    此算法用于在 <a data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    上运行步骤，无论 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-88"><code>MediaSource</code></a> 是在同一个 <a data-link-type="interface"
                        data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    还是在 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    上绑定，通常用于更新绑定的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    的状态。此算法接收一个 <var>steps</var> 参数，列出要在 <a data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    上执行的步骤。
                </p>
                <dl class="switch">
                    <dt>
                        如果 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-89"><code>MediaSource</code></a> 构造于 <a
                            data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>：
                    </dt>
                    <dd>
                        向 <a data-link-type="attribute" data-lt="[[port to main]]" href="#dfn-port-to-main"
                            class="internalDFN" id="ref-for-dfn-port-to-main-6"><code>[[port to main]]</code></a> 发送内部
                        <code>mirror on window</code> 消息，其 <a data-link-type="interface" data-lt="Window"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                        上的隐式处理程序将运行 <var>steps</var>。直接将控制权返回给调用者，无需等待该处理程序收到消息。
                        <div class="note" role="note" id="issue-container-generatedID-40">
                            <div role="heading" class="note-title marker" id="h-note-40" aria-level="5">
                                <span>注意</span>
                            </div>
                            <div class="">
                                镜像消息机制的目的是确保：
                                <ol>
                                    <li><var>steps</var> 会作为其自己的任务在 <a data-link-type="interface" data-lt="Window"
                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                        上异步运行，而不是在其他 <a data-link-type="interface" data-lt="Window"
                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                        任务执行过程中间插入；
                                    </li>
                                    <li><var>steps</var> 的执行不会阻塞在 <a data-link-type="interface"
                                            data-lt="DedicatedWorkerGlobalScope"
                                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                        上该算法的同步运行与返回。
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </dd>
                    <dt>
                        否则：
                    </dt>
                    <dd>
                        直接运行 <var>steps</var>。
                    </dd>
                </dl>
            </section>
        </section>
    </section>
    <section id="mediasourcehandle">
        <div class="header-wrapper">
            <h2 id="x4-mediasourcehandle-interface"><bdi class="secno">4. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediasourcehandle" data-idl="interface"
                    data-title="MediaSourceHandle" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaSourceHandle</code></dfn> 接口
            </h2><a class="self-link" href="#mediasourcehandle" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                id="ref-for-dom-mediasourcehandle-13"><code>MediaSourceHandle</code></a> 接口表示 <a data-link-type="idl"
                data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-90"><code>MediaSource</code></a> 对象的代理，
            用于将 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
            上的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-91"><code>MediaSource</code></a> 通过 <a data-link-type="interface"
                data-lt="Window"
                href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
            上的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            使用 <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
            进行绑定，具体见 <a data-link-type="dfn|abstract-op" href="#dfn-attaching-to-a-media-element" class="internalDFN"
                id="ref-for-dfn-attaching-to-a-media-element-3">绑定到媒体元素</a> 算法。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-41">
            <div role="heading" class="note-title marker" id="h-note-41" aria-level="3"><span>注意</span></div>
            <p class="">
                为了能够跨上下文将 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-92"><code>MediaSource</code></a> 绑定到媒体元素，必须使用该独立对象，因为 <a
                    data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                    id="ref-for-dom-mediasource-93"><code>MediaSource</code></a> 本身不可传递（transferable），因其是事件目标。
            </p>
        </div>
        <p>
            每个 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                id="ref-for-dom-mediasourcehandle-14"><code>MediaSourceHandle</code></a> 对象有一个 <dfn
                data-dfn-for="MediaSourceHandle" data-idl="" data-noexport="" data-dfn-type="attribute"
                id="dfn-has-ever-been-assigned-as-srcobject" tabindex="0" aria-haspopup="dialog">[[has ever
                been assigned as srcobject]]</dfn> 内部槽，存储一个 <a data-link-type="interface" data-lt="boolean"
                href="https://webidl.spec.whatwg.org/#idl-boolean"><code>boolean</code></a>。该槽在 <a data-link-type="idl"
                data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                id="ref-for-dom-mediasourcehandle-15"><code>MediaSourceHandle</code></a> 对象创建时初始化为 false，在
            扩展的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的 <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
            setter（见 <a href="#htmlmediaelement-extensions" data-matched-text="[[[#htmlmediaelement-extensions]]]"
                class="sec-ref"><bdi class="secno">10. </bdi>
                HTMLMediaElement 扩展</a>）中设置为 true，
            若为 true，则会阻止该 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                class="internalDFN" id="ref-for-dom-mediasourcehandle-16"><code>MediaSourceHandle</code></a> 的成功传递，具体见
            <a href="#transfer" data-matched-text="[[[#transfer]]]" class="sec-ref"><bdi class="secno">4.1 </bdi>
                传递</a>。
        </p>
        <p>
            <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                id="ref-for-dom-mediasourcehandle-17"><code>MediaSourceHandle</code></a> 对象是 <a
                data-link-type="extended-attribute" data-lt="Transferable"
                href="https://html.spec.whatwg.org/multipage/structured-data.html#transferable"><code>Transferable</code></a>，
            每个对象有一个 <dfn data-dfn-for="MediaSourceHandle" data-idl="" data-noexport="" data-dfn-type="attribute"
                id="dfn-detached" tabindex="0" aria-haspopup="dialog">[[Detached]]</dfn> 内部槽，用于保证该实例在被传递后不可再次传递。
        </p>
        <pre class="idl def"
            id="webidl-1737388085"><span class="idlHeader"><a class="self-link" href="#webidl-1737388085">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediasourcehandle" data-title="MediaSourceHandle">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#transferable">Transferable</a></span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediasourcehandle" id="ref-for-dom-mediasourcehandle-18"><code>MediaSourceHandle</code></a> {};</span></code></pre>
        <section id="transfer">
            <div class="header-wrapper">
                <h3 id="x4-1-transfer"><bdi class="secno">4.1 </bdi>
                    传递
                </h3><a class="self-link" href="#transfer" aria-label="Permalink for Section 4.1"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                    id="ref-for-dom-mediasourcehandle-19"><code>MediaSourceHandle</code></a> 的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/structured-data.html#transfer-steps">传递步骤</a>
                和 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/structured-data.html#transfer-receiving-steps">传递接收步骤</a>
                要求实现维护一个隐式内部槽，引用底层 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                    class="internalDFN" id="ref-for-dom-mediasource-94"><code>MediaSource</code></a>，
                以支持通过 <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                进行 <a data-link-type="dfn|abstract-op" href="#dfn-attaching-to-a-media-element" class="internalDFN"
                    id="ref-for-dfn-attaching-to-a-media-element-4">绑定到媒体元素</a>，以及随之建立绑定的 <a
                    data-link-type="dfn|abstract-op" href="#dfn-cross-context-communication-model" class="internalDFN"
                    id="ref-for-dfn-cross-context-communication-model-1">跨上下文通信模型</a>。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-42">
                <div role="heading" class="note-title marker" id="h-note-42" aria-level="4"><span>注意</span></div>
                <p class="">
                    实现者应注意，<a data-link-type="extended-attribute" data-lt="Transferable"
                        href="https://html.spec.whatwg.org/multipage/structured-data.html#transferable">Transferable</a>
                    所暗示的“move”语义并不总是真实的。例如，postMessage 的扩展或内部广播实现可能导致被传递的 <a data-link-type="idl"
                        data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                        id="ref-for-dom-mediasourcehandle-20"><code>MediaSourceHandle</code></a> 有多个接收方。
                    因此，实现建议：只有当底层 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                        class="internalDFN" id="ref-for-dom-mediasource-95"><code>MediaSource</code></a>
                    的任一句柄在媒体元素资源选择算法的异步部分被使用时，才确定哪个潜在克隆仍然有效。
                    这类似于通过 <a data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                        id="ref-for-mediasource-object-url-11">MediaSource 对象 URL</a> 进行绑定的现有行为，
                    该 URL 可被轻易克隆，但所有克隆最多只允许一次绑定启动。
                </p>
            </div>
            <p>
                实现<em class="rfc2119">必须</em>保证底层 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                    class="internalDFN" id="ref-for-dom-mediasource-96"><code>MediaSource</code></a> 对象只能通过 <a
                    data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                进行一次绑定（加载），不论 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                    class="internalDFN" id="ref-for-dom-mediasourcehandle-22"><code>MediaSourceHandle</code></a> 是否因 <a
                    data-link-type="extended-attribute" data-lt="Transferable"
                    href="https://html.spec.whatwg.org/multipage/structured-data.html#transferable">Transferable</a>
                的不同实现而被克隆。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-43">
                <div role="heading" class="note-title marker" id="h-note-43" aria-level="4"><span>注意</span></div>
                <p class="">
                    参考 <a data-link-type="dfn|abstract-op" href="#dfn-attaching-to-a-media-element" class="internalDFN"
                        id="ref-for-dfn-attaching-to-a-media-element-5">绑定到媒体元素</a>，了解媒体元素资源选择算法的异步部分如何强制执行此要求。
                </p>
            </div>
            <p>
                <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                    id="ref-for-dom-mediasourcehandle-24"><code>MediaSourceHandle</code></a> 仅暴露在 <a
                    data-link-type="interface" data-lt="Window"
                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                和 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                上下文，且不能在不同 <a data-link-type="dfn"
                    href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#sec-agent-clusters">agent
                    cluster</a>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript"
                        title="ECMAScript Language Specification">ECMASCRIPT</a></cite>] 间成功传递。<a data-link-type="idl"
                    data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                    id="ref-for-dom-mediasourcehandle-25"><code>MediaSourceHandle</code></a> 对象只能在同一个 <a
                    data-link-type="dfn"
                    href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#sec-agent-clusters">agent
                    cluster</a> 内传递成功。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-44">
                <div role="heading" class="note-title marker" id="h-note-44" aria-level="4"><span>注意</span></div>
                <p class="">
                    例如，将 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                        class="internalDFN" id="ref-for-dom-mediasourcehandle-26"><code>MediaSourceHandle</code></a> 对象从
                    <a data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    或 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    传递到 SharedWorker 或 ServiceWorker 都不会成功。开发者应了解该限制与 <a data-link-type="dfn|abstract-op"
                        href="#mediasource-object-url" class="internalDFN"
                        id="ref-for-mediasource-object-url-12">MediaSource 对象 URL</a> 的不同，后者是可通过多种方式传递的 <a
                        data-link-type="interface" data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>。即便如此，通过 <a
                        data-link-type="dfn|abstract-op" href="#mediasource-object-url" class="internalDFN"
                        id="ref-for-mediasource-object-url-13">MediaSource 对象 URL</a> 进行 <a
                        data-link-type="dfn|abstract-op" href="#dfn-attaching-to-a-media-element" class="internalDFN"
                        id="ref-for-dfn-attaching-to-a-media-element-6">绑定到媒体元素</a> 也只能用于构造于 <a
                        data-link-type="interface" data-lt="Window"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                    上下文的 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-97"><code>MediaSource</code></a>。另见 Web 应用 API 的 <a
                        data-link-type="dfn"
                        href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#agent">agent</a>
                    和 <a data-link-type="dfn"
                        href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#sec-agent-clusters">agent
                        cluster</a> 形式化，[<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] 中相关概念如 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dedicated-worker-agent">dedicated
                        worker agents</a>。
                </p>
            </div>
            <p>
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/structured-data.html#transfer-steps">传递步骤</a>
                对于 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                    id="ref-for-dom-mediasourcehandle-27"><code>MediaSourceHandle</code></a> 对象
                <em class="rfc2119">必须</em>包括以下步骤：
            </p>
            <ol>
                <li>如果 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                        class="internalDFN" id="ref-for-dom-mediasourcehandle-28"><code>MediaSourceHandle</code></a> 的
                    <a data-link-type="attribute" data-lt="[[has ever been assigned as srcobject]]"
                        href="#dfn-has-ever-been-assigned-as-srcobject" class="internalDFN"
                        id="ref-for-dfn-has-ever-been-assigned-as-srcobject-1"><code>[[has ever been assigned as srcobject]]</code></a>
                    内部槽为 true，则 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/structured-data.html#transfer-steps">传递步骤</a>必须抛出
                    <a data-link-type="exception" data-lt="DataCloneError"
                        href="https://webidl.spec.whatwg.org/#datacloneerror"><code>DataCloneError</code></a> 异常并失败。
                </li>
            </ol>
        </section>
    </section>
    <section id="sourcebuffer">
        <div class="header-wrapper">
            <h2 id="x5-sourcebuffer-interface"><bdi class="secno">5. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-sourcebuffer" data-idl="interface"
                    data-title="SourceBuffer" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>SourceBuffer</code></dfn> 接口
            </h2><a class="self-link" href="#sourcebuffer" aria-label="Permalink for Section 5."></a>
        </div>

        <pre class="idl def" id="webidl-955395090"><span class="idlHeader"><a class="self-link" href="#webidl-955395090">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-appendmode" data-title="AppendMode">enum <dfn data-export="" data-dfn-type="enum" id="dom-appendmode" data-idl="enum" data-title="AppendMode" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>AppendMode</code></dfn> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-appendmode-segments" id="ref-for-dom-appendmode-segments-2"><code>segments</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-appendmode-sequence" id="ref-for-dom-appendmode-sequence-2"><code>sequence</code></a>"</span>,
};</span></code></pre>
        <dl data-dfn-for="AppendMode">
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-appendmode-segments" data-idl="enum-value"
                    data-title="segments" data-dfn-for="AppendMode" tabindex="0"
                    aria-haspopup="dialog"><code>segments</code></dfn>
            </dt>
            <dd>
                媒体分段中的时间戳决定了<a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                    id="ref-for-dfn-coded-frame-12">编码帧</a>
                在演示中的位置。媒体分段可以以任意顺序追加。
            </dd>
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-appendmode-sequence" data-idl="enum-value"
                    data-title="sequence" data-dfn-for="AppendMode" tabindex="0"
                    aria-haspopup="dialog"><code>sequence</code></dfn>
            </dt>
            <dd>
                媒体分段将被视为时间上相邻，和分段中的时间戳无关。新媒体分段中的编码帧会紧接在前一个媒体分段的编码帧之后。若需要使新媒体分段和前一个分段相邻，会更新 <a data-link-type="idl"
                    href="#dom-sourcebuffer-timestampoffset" class="internalDFN"
                    id="ref-for-dom-sourcebuffer-timestampoffset-1"><code>timestampOffset</code></a> 属性。设置 "<a
                    data-link-type="idl" href="#dom-appendmode-sequence" class="internalDFN"
                    id="ref-for-dom-appendmode-sequence-3"><code>sequence</code></a>" 模式下的 <a data-link-type="idl"
                    href="#dom-sourcebuffer-timestampoffset" class="internalDFN"
                    id="ref-for-dom-sourcebuffer-timestampoffset-2"><code>timestampOffset</code></a>
                属性，可以让媒体分段放到时间线上的指定位置，而无需了解分段内时间戳。
            </dd>
        </dl>
        <pre class="idl def" id="webidl-544711679"><span class="idlHeader"><a class="self-link" href="#webidl-544711679">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-sourcebuffer" data-title="SourceBuffer">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-sourcebuffer" id="ref-for-dom-sourcebuffer-46"><code>SourceBuffer</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-mode" data-title="mode" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="idl" href="#dom-appendmode" class="internalDFN" id="ref-for-dom-appendmode-1"><code>AppendMode</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-mode" id="ref-for-dom-sourcebuffer-mode-3"><code>mode</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-updating" data-title="updating" data-dfn-for="SourceBuffer">
  readonly  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-updating" id="ref-for-dom-sourcebuffer-updating-5"><code>updating</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-buffered" data-title="buffered" data-dfn-for="SourceBuffer">
  readonly  attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#timeranges">TimeRanges</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-buffered" id="ref-for-dom-sourcebuffer-buffered-3"><code>buffered</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-timestampoffset" data-title="timestampOffset" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double">double</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-timestampoffset" id="ref-for-dom-sourcebuffer-timestampoffset-3"><code>timestampOffset</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-audiotracks" data-title="audioTracks" data-dfn-for="SourceBuffer">
  readonly  attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist">AudioTrackList</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-audiotracks" id="ref-for-dom-sourcebuffer-audiotracks-2"><code>audioTracks</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-videotracks" data-title="videoTracks" data-dfn-for="SourceBuffer">
  readonly  attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#videotracklist">VideoTrackList</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-videotracks" id="ref-for-dom-sourcebuffer-videotracks-2"><code>videoTracks</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-texttracks" data-title="textTracks" data-dfn-for="SourceBuffer">
  readonly  attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#texttracklist">TextTrackList</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-texttracks" id="ref-for-dom-sourcebuffer-texttracks-2"><code>textTracks</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-appendwindowstart" data-title="appendWindowStart" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double">double</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-appendwindowstart" id="ref-for-dom-sourcebuffer-appendwindowstart-2"><code>appendWindowStart</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-appendwindowend" data-title="appendWindowEnd" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">unrestricted double</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-appendwindowend" id="ref-for-dom-sourcebuffer-appendwindowend-2"><code>appendWindowEnd</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-onupdatestart" data-title="onupdatestart" data-dfn-for="SourceBuffer">

  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-onupdatestart" id="ref-for-dom-sourcebuffer-onupdatestart-1"><code>onupdatestart</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-onupdate" data-title="onupdate" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-onupdate" id="ref-for-dom-sourcebuffer-onupdate-1"><code>onupdate</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-onupdateend" data-title="onupdateend" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-onupdateend" id="ref-for-dom-sourcebuffer-onupdateend-1"><code>onupdateend</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-onerror" data-title="onerror" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-onerror" id="ref-for-dom-sourcebuffer-onerror-1"><code>onerror</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebuffer-onabort" data-title="onabort" data-dfn-for="SourceBuffer">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebuffer-onabort" id="ref-for-dom-sourcebuffer-onabort-1"><code>onabort</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-sourcebuffer-appendbuffer-data" data-title="appendBuffer" data-dfn-for="SourceBuffer"><span class="idlType">

  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-sourcebuffer-appendbuffer" id="ref-for-dom-sourcebuffer-appendbuffer-4"><code>appendBuffer</code></a>(<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">data</span>);</span><span data-idl="" class="idlMethod" id="idl-def-sourcebuffer-abort" data-title="abort" data-dfn-for="SourceBuffer"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-sourcebuffer-abort" id="ref-for-dom-sourcebuffer-abort-2"><code>abort</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-sourcebuffer-changetype-type" data-title="changeType" data-dfn-for="SourceBuffer"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-sourcebuffer-changetype" id="ref-for-dom-sourcebuffer-changetype-3"><code>changeType</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span><span data-idl="" class="idlMethod" id="idl-def-sourcebuffer-remove-start-end" data-title="remove" data-dfn-for="SourceBuffer"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-sourcebuffer-remove" id="ref-for-dom-sourcebuffer-remove-2"><code>remove</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double">double</a></span> <span class="idlParamName">start</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">unrestricted double</a></span> <span class="idlParamName">end</span>);</span>
};</span></code></pre>
        <div class="issue" id="issue-container-number-280">
            <div role="heading" class="issue-title marker" id="h-issue-0" aria-level="3"><a
                    href="https://github.com/w3c/media-source/issues/280"><span class="issue-number">Issue
                        280</span></a><span class="issue-label">: MSE-in-Workers: {Audio,Video,Text}Track{,List} IDL in
                    HTML 需要补充 DedicatedWorker 的 Exposed <a class="respec-gh-label"
                        href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                        style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                        aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
            <div class="">
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
                <a data-link-type="interface" data-lt="AudioTrackList"
                    href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>,
                <a data-link-type="interface" data-lt="VideoTrackList"
                    href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                和 <a data-link-type="interface" data-lt="TextTrackList"
                    href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                需要支持 Window+DedicatedWorker 暴露。
            </div>
        </div>
        <section id="attributes">
            <div class="header-wrapper">
                <h3 id="x5-1-attributes"><bdi class="secno">5.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes" aria-label="Permalink for Section 5.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="SourceBuffer">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-mode" data-idl="attribute"
                        data-title="mode" data-dfn-for="SourceBuffer" data-type="AppendMode" data-lt="mode"
                        data-local-lt="SourceBuffer.mode" tabindex="0" aria-haspopup="dialog"><code>mode</code></dfn> 类型
                    <a href="#dom-appendmode" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-appendmode-2"><code>AppendMode</code></a>
                </dt>
                <dd>
                    <p>
                        控制如何处理一系列 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                            id="ref-for-dfn-media-segment-5">媒体分段</a>。该属性在对象创建后由 <a data-link-type="idl"
                            data-lt="addSourceBuffer()" href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                            id="ref-for-dom-mediasource-addsourcebuffer-5"><code>addSourceBuffer</code></a><code>()</code>
                        初始化，
                        可通过 <a data-link-type="idl" data-lt="changeType()" href="#dom-sourcebuffer-changetype"
                            class="internalDFN"
                            id="ref-for-dom-sourcebuffer-changetype-4"><code>changeType</code></a><code>()</code>
                        或直接设置此属性进行更新。
                    </p>
                    <p>
                        读取时，返回初始值或最后一次成功设置的值。
                    </p>
                    <p>
                        设置时，执行如下步骤：
                    </p>
                    <ol>
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-21"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-6"><code>updating</code></a> 属性为 true，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>令 <var data-type="AppendMode">new mode</var> 为分配的新值。
                        </li>
                        <li>如果 <a data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                                href="#dfn-generate-timestamps-flag" class="internalDFN"
                                id="ref-for-dfn-generate-timestamps-flag-3"><code>[[generate timestamps flag]]</code></a>
                            为 true 且 <var data-type="AppendMode">new mode</var>
                            为 "<a data-link-type="idl" href="#dom-appendmode-segments" class="internalDFN"
                                id="ref-for-dom-appendmode-segments-3"><code>segments</code></a>"，则抛出 <a
                                data-link-type="exception" data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>
                            <p>
                                如果父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                    id="ref-for-dom-mediasource-readystate-23"><code>readyState</code></a> 属性为 "<a
                                    data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                    id="ref-for-dom-readystate-ended-8"><code>ended</code></a>"，则执行：
                            </p>
                            <ol>
                                <li>将父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                        class="internalDFN"
                                        id="ref-for-dom-mediasource-readystate-24"><code>readyState</code></a> 属性设为 "<a
                                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                        id="ref-for-dom-readystate-open-14"><code>open</code></a>"
                                </li>
                                <li><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                    <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                        data-link-type="idl" data-lt="sourceopen" href="#dfn-sourceopen"
                                        class="internalDFN" id="ref-for-dfn-sourceopen-3"><code>sourceopen</code></a>
                                    到父媒体源。
                                </li>
                            </ol>
                        </li>
                        <li>如果 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                class="internalDFN" id="ref-for-dfn-append-state-1"><code>[[append state]]</code></a>
                            为 <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-media-segment"
                                class="internalDFN"
                                id="ref-for-sourcebuffer-parsing-media-segment-1">PARSING_MEDIA_SEGMENT</a>，则抛出 <a
                                data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            并终止这些步骤。
                        </li>
                        <li>如果 <var data-type="AppendMode">new mode</var> 为 "<a data-link-type="idl"
                                href="#dom-appendmode-sequence" class="internalDFN"
                                id="ref-for-dom-appendmode-sequence-4"><code>sequence</code></a>"，则将 <a
                                data-link-type="attribute" data-lt="[[group start timestamp]]"
                                href="#dfn-group-start-timestamp" class="internalDFN"
                                id="ref-for-dfn-group-start-timestamp-1"><code>[[group start timestamp]]</code></a> 设为
                            <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                                href="#dfn-group-end-timestamp" class="internalDFN"
                                id="ref-for-dfn-group-end-timestamp-1"><code>[[group end timestamp]]</code></a>。
                        </li>
                        <li>将该属性更新为 <var data-type="AppendMode">new mode</var>。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-updating" data-idl="attribute"
                        data-title="updating" data-dfn-for="SourceBuffer" data-type="boolean" data-lt="updating"
                        data-local-lt="SourceBuffer.updating" tabindex="0"
                        aria-haspopup="dialog"><code>updating</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="boolean" href="https://webidl.spec.whatwg.org/#idl-boolean"><code>boolean</code></a>,
                    只读
                </dt>
                <dd>
                    <p>
                        指示 <a data-link-type="idl" data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                            class="internalDFN"
                            id="ref-for-dom-sourcebuffer-appendbuffer-5"><code>appendBuffer</code></a><code>()</code> 或
                        <a data-link-type="idl" data-lt="remove()" href="#dom-sourcebuffer-remove" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-remove-3"><code>remove</code></a><code>()</code>
                        操作的异步处理是否仍在进行。该属性在对象创建时初始为 false。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-buffered" data-idl="attribute"
                        data-title="buffered" data-dfn-for="SourceBuffer" data-type="TimeRanges" data-lt="buffered"
                        data-local-lt="SourceBuffer.buffered" tabindex="0"
                        aria-haspopup="dialog"><code>buffered</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="TimeRanges"
                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>,
                    只读
                </dt>
                <dd>
                    <p>
                        指示本 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-47"><code>SourceBuffer</code></a> 已缓冲了哪些 <a
                            data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>。创建时初始值为空
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                        对象。
                    </p>
                    <p>
                        读取该属性时，需执行以下步骤<em class="rfc2119">必须</em>：
                    </p>
                    <ol>
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-22"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>令 <var data-type="double">highest end time</var> 为本对象管理的所有 <a
                                data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                id="ref-for-track-buffer-4">轨道缓冲区</a>的 <a data-link-type="dfn|abstract-op"
                                href="#track-buffer-ranges" class="internalDFN"
                                id="ref-for-track-buffer-ranges-3">缓冲区范围</a>的最大结束时间。
                        </li>
                        <li>令 <var data-type="normalized TimeRanges">intersection ranges</var> 为一个 <a
                                data-link-type="interface" data-lt="TimeRanges"
                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                            对象，内容为从 0 到 <var data-type="double">highest end time</var> 的单个区间。
                        </li>
                        <li>对本对象管理的每个音频和视频 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                id="ref-for-track-buffer-5">轨道缓冲区</a>，运行以下步骤：
                            <div class="note" role="note" id="issue-container-generatedID-45">
                                <div role="heading" class="note-title marker" id="h-note-45" aria-level="4">
                                    <span>注意</span>
                                </div>
                                <p class="">
                                    文本 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                        id="ref-for-track-buffer-6">轨道缓冲区</a>参与计算 <var data-type="double">highest end
                                        time</var>，
                                    但本处缓冲区范围计算不包含文本轨道。文本轨道不一定连续，也不应因其不连续导致其他媒体轨道在同一区间连续时播放停顿。
                                </p>
                            </div>
                            <ol>
                                <li>令 <var data-type="normalized TimeRanges">track ranges</var> 为当前 <a
                                        data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                        id="ref-for-track-buffer-7">轨道缓冲区</a>的 <a data-link-type="dfn|abstract-op"
                                        href="#track-buffer-ranges" class="internalDFN"
                                        id="ref-for-track-buffer-ranges-4">缓冲区范围</a>。
                                </li>
                                <li>如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                        id="ref-for-dom-mediasource-readystate-25"><code>readyState</code></a> 为 "<a
                                        data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                        id="ref-for-dom-readystate-ended-9"><code>ended</code></a>"，则将 <var
                                        data-type="normalized TimeRanges">track ranges</var> 最后一个区间的结束时间设为 <var
                                        data-type="double">highest end time</var>。
                                </li>
                                <li>令 <var data-type="normalized TimeRanges">new intersection ranges</var> 为 <var
                                        data-type="normalized TimeRanges">intersection ranges</var> 与 <var
                                        data-type="normalized TimeRanges">track ranges</var> 的交集。
                                </li>
                                <li>用 <var>new intersection ranges</var> 替换 <var
                                        data-type="normalized TimeRanges">intersection ranges</var> 中的区间。
                                </li>
                            </ol>
                        </li>
                        <li>如果 <var data-type="normalized TimeRanges">intersection ranges</var>
                            不包含与当前属性值完全一致的区间信息，则更新属性值为 <var data-type="normalized TimeRanges">intersection ranges</var>。
                        </li>
                        <li>返回当前属性值。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-timestampoffset"
                        data-idl="attribute" data-title="timestampOffset" data-dfn-for="SourceBuffer" data-type="double"
                        data-lt="timestampOffset" data-local-lt="SourceBuffer.timestampOffset" tabindex="0"
                        aria-haspopup="dialog"><code>timestampOffset</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="double" href="https://webidl.spec.whatwg.org/#idl-double"><code>double</code></a>
                </dt>
                <dd>
                    <p>
                        控制追加到本 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                            class="internalDFN" id="ref-for-dom-sourcebuffer-50"><code>SourceBuffer</code></a> 的后续 <a
                            data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                            id="ref-for-dfn-media-segment-6">媒体分段</a> 内时间戳应用的偏移量。初始值为 0，表示不应用偏移。
                    </p>
                    <p>
                        读取时，返回初始值或最后一次成功设置的值。
                    </p>
                    <p>
                        设置时，执行如下步骤：
                    </p>
                    <ol>
                        <li>令 <var data-type="double">new timestamp offset</var> 为分配的新值。
                        </li>
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-23"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-7"><code>updating</code></a> 属性为 true，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>
                            <p>
                                如果父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                    id="ref-for-dom-mediasource-readystate-26"><code>readyState</code></a> 属性为 "<a
                                    data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                    id="ref-for-dom-readystate-ended-10"><code>ended</code></a>"，则执行：
                            </p>
                            <ol>
                                <li>将父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                        class="internalDFN"
                                        id="ref-for-dom-mediasource-readystate-27"><code>readyState</code></a> 属性设为 "<a
                                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                        id="ref-for-dom-readystate-open-15"><code>open</code></a>"
                                </li>
                                <li><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                    <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                        data-link-type="idl" data-lt="sourceopen" href="#dfn-sourceopen"
                                        class="internalDFN" id="ref-for-dfn-sourceopen-4"><code>sourceopen</code></a>
                                    到父媒体源。
                                </li>
                            </ol>
                        </li>
                        <li>如果 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                class="internalDFN" id="ref-for-dfn-append-state-2"><code>[[append state]]</code></a>
                            为 <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-media-segment"
                                class="internalDFN"
                                id="ref-for-sourcebuffer-parsing-media-segment-2">PARSING_MEDIA_SEGMENT</a>，则抛出 <a
                                data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-mode-4"><code>mode</code></a> 属性为 "<a data-link-type="idl"
                                href="#dom-appendmode-sequence" class="internalDFN"
                                id="ref-for-dom-appendmode-sequence-5"><code>sequence</code></a>"，则将 <a
                                data-link-type="attribute" data-lt="[[group start timestamp]]"
                                href="#dfn-group-start-timestamp" class="internalDFN"
                                id="ref-for-dfn-group-start-timestamp-2"><code>[[group start timestamp]]</code></a> 设为
                            <var data-type="double">new timestamp offset</var>。
                        </li>
                        <li>将该属性更新为 <var data-type="double">new timestamp offset</var>。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-plurals="audiotrack" data-export="" data-dfn-type="attribute"
                        id="dom-sourcebuffer-audiotracks" data-idl="attribute" data-title="audioTracks"
                        data-dfn-for="SourceBuffer" data-type="AudioTrackList" data-lt="audioTracks"
                        data-local-lt="SourceBuffer.audioTracks" tabindex="0"
                        aria-haspopup="dialog"><code>audioTracks</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="AudioTrackList"
                        href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>,
                    只读
                </dt>
                <dd>
                    由本对象创建的 <a data-link-type="interface" data-lt="AudioTrack"
                        href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                    对象列表。
                </dd>
                <dt>
                    <dfn data-plurals="videotrack" data-export="" data-dfn-type="attribute"
                        id="dom-sourcebuffer-videotracks" data-idl="attribute" data-title="videoTracks"
                        data-dfn-for="SourceBuffer" data-type="VideoTrackList" data-lt="videoTracks"
                        data-local-lt="SourceBuffer.videoTracks" tabindex="0"
                        aria-haspopup="dialog"><code>videoTracks</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="VideoTrackList"
                        href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>,
                    只读
                </dt>
                <dd>
                    由本对象创建的 <a data-link-type="interface" data-lt="VideoTrack"
                        href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                    对象列表。
                </dd>
                <dt>
                    <dfn data-plurals="texttrack" data-export="" data-dfn-type="attribute"
                        id="dom-sourcebuffer-texttracks" data-idl="attribute" data-title="textTracks"
                        data-dfn-for="SourceBuffer" data-type="TextTrackList" data-lt="textTracks"
                        data-local-lt="SourceBuffer.textTracks" tabindex="0"
                        aria-haspopup="dialog"><code>textTracks</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="TextTrackList"
                        href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>,
                    只读
                </dt>
                <dd>
                    由本对象创建的 <a data-link-type="interface" data-lt="TextTrack"
                        href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                    对象列表。
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-appendwindowstart"
                        data-idl="attribute" data-title="appendWindowStart" data-dfn-for="SourceBuffer"
                        data-type="double" data-lt="appendWindowStart" data-local-lt="SourceBuffer.appendWindowStart"
                        tabindex="0" aria-haspopup="dialog"><code>appendWindowStart</code></dfn> 类型 <a
                        data-link-type="interface" data-lt="double"
                        href="https://webidl.spec.whatwg.org/#idl-double"><code>double</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-12">展示时间戳</a>，用于表示 <a data-link-type="dfn|abstract-op"
                            href="#dfn-append-window" class="internalDFN" id="ref-for-dfn-append-window-1">追加窗口</a>
                        的起始。该属性初始设为 <a data-link-type="dfn|abstract-op" href="#presentation-start-time"
                            class="internalDFN" id="ref-for-presentation-start-time-4">展示起始时间</a>。
                    </p>
                    <p>
                        获取时，返回初始值或最后一次成功设置的值。
                    </p>
                    <p>
                        设置时，执行如下步骤：
                    </p>
                    <ol>
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-24"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-8"><code>updating</code></a> 属性为 true，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果新值小于 0 或大于等于 <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowend"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-appendwindowend-3"><code>appendWindowEnd</code></a>，则抛出 <a
                                data-link-type="exception" data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>将该属性更新为新值。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-appendwindowend"
                        data-idl="attribute" data-title="appendWindowEnd" data-dfn-for="SourceBuffer"
                        data-type="unrestricted double" data-lt="appendWindowEnd"
                        data-local-lt="SourceBuffer.appendWindowEnd" tabindex="0"
                        aria-haspopup="dialog"><code>appendWindowEnd</code></dfn> 类型 <a data-link-type="interface"
                        data-lt="unrestricted double"
                        href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><code>unrestricted double</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-13">展示时间戳</a>，表示 <a data-link-type="dfn|abstract-op"
                            href="#dfn-append-window" class="internalDFN" id="ref-for-dfn-append-window-2">追加窗口</a>
                        的结束。该属性初始设为正无穷大。
                    </p>
                    <p>
                        获取时，返回初始值或最后一次成功设置的值。
                    </p>
                    <p>
                        设置时，执行如下步骤：
                    </p>
                    <ol>
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-25"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-9"><code>updating</code></a> 属性为 true，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果新值为 NaN，则抛出 <a data-link-type="exception" data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            并终止这些步骤。
                        </li>
                        <li>如果新值小于等于 <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowstart"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-appendwindowstart-3"><code>appendWindowStart</code></a>，则抛出
                            <a data-link-type="exception" data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>将该属性更新为新值。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-onupdatestart"
                        data-idl="attribute" data-title="onupdatestart" data-dfn-for="SourceBuffer"
                        data-type="EventHandler" data-lt="onupdatestart" data-local-lt="SourceBuffer.onupdatestart"
                        tabindex="0" aria-haspopup="dialog"><code>onupdatestart</code></dfn> 类型 <a
                        data-link-type="typedef" data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="updatestart" href="#dfn-updatestart" class="internalDFN"
                            id="ref-for-dfn-updatestart-1"><code>updatestart</code></a> 事件的事件处理器。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-onupdate" data-idl="attribute"
                        data-title="onupdate" data-dfn-for="SourceBuffer" data-type="EventHandler" data-lt="onupdate"
                        data-local-lt="SourceBuffer.onupdate" tabindex="0"
                        aria-haspopup="dialog"><code>onupdate</code></dfn> 类型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="update" href="#dfn-update" class="internalDFN"
                            id="ref-for-dfn-update-1"><code>update</code></a> 事件的事件处理器。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-onupdateend" data-idl="attribute"
                        data-title="onupdateend" data-dfn-for="SourceBuffer" data-type="EventHandler"
                        data-lt="onupdateend" data-local-lt="SourceBuffer.onupdateend" tabindex="0"
                        aria-haspopup="dialog"><code>onupdateend</code></dfn> 类型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="updateend" href="#dfn-updateend" class="internalDFN"
                            id="ref-for-dfn-updateend-2"><code>updateend</code></a> 事件的事件处理器。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-onerror" data-idl="attribute"
                        data-title="onerror" data-dfn-for="SourceBuffer" data-type="EventHandler" data-lt="onerror"
                        data-local-lt="SourceBuffer.onerror" tabindex="0"
                        aria-haspopup="dialog"><code>onerror</code></dfn> 类型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="error" href="#dfn-error" class="internalDFN"
                            id="ref-for-dfn-error-1"><code>error</code></a> 事件的事件处理器。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebuffer-onabort" data-idl="attribute"
                        data-title="onabort" data-dfn-for="SourceBuffer" data-type="EventHandler" data-lt="onabort"
                        data-local-lt="SourceBuffer.onabort" tabindex="0"
                        aria-haspopup="dialog"><code>onabort</code></dfn> 类型 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        <a data-link-type="idl" data-lt="abort" href="#dfn-abort" class="internalDFN"
                            id="ref-for-dfn-abort-2"><code>abort</code></a> 事件的事件处理器。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="methods">
            <div class="header-wrapper">
                <h3 id="x5-2-methods"><bdi class="secno">5.2 </bdi>
                    方法
                </h3><a class="self-link" href="#methods" aria-label="Permalink for Section 5.2"></a>
            </div>

            <dl class="methods" data-dfn-for="SourceBuffer">
                <dt>
                    <dfn id="dom-sourcebuffer-appendbuffer" data-export="" data-dfn-type="method" data-idl="operation"
                        data-title="appendBuffer" data-dfn-for="SourceBuffer" data-type="undefined"
                        data-lt="appendBuffer()|appendBuffer(data)"
                        data-local-lt="SourceBuffer.appendBuffer|SourceBuffer.appendBuffer()|appendBuffer" tabindex="0"
                        aria-haspopup="dialog"><code>appendBuffer</code></dfn>
                </dt>
                <dd>
                    <p>
                        将
                        <code><a href="https://www.w3.org/TR/WebIDL-1/#common-BufferSource" class="idlType">BufferSource</a></code>[<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-webidl"
                                title="Web IDL Standard">WEBIDL</a></cite>]中的分段数据追加到
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-51"><code>SourceBuffer</code></a>。
                    </p>

                    <p>调用此方法时，用户代理必须运行以下步骤：</p>
                    <ol class="method-algorithm">
                        <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-prepare-append" class="internalDFN"
                                id="ref-for-dfn-prepare-append-1">准备追加</a>算法。
                        </li>
                        <li>将 <var data-type="BufferSource">data</var> 添加到 <a data-link-type="attribute"
                                data-lt="[[input buffer]]" href="#dfn-input-buffer" class="internalDFN"
                                id="ref-for-dfn-input-buffer-1"><code>[[input buffer]]</code></a> 的末尾。
                        </li>
                        <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-10"><code>updating</code></a> 属性设为 true。
                        </li>
                        <li><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                data-link-type="idl" data-lt="updatestart" href="#dfn-updatestart" class="internalDFN"
                                id="ref-for-dfn-updatestart-2"><code>updatestart</code></a> 到本 <a data-link-type="idl"
                                data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-52"><code>SourceBuffer</code></a> 对象。
                        </li>
                        <li>异步运行 <a data-link-type="dfn|abstract-op" href="#dfn-buffer-append" class="internalDFN"
                                id="ref-for-dfn-buffer-append-2">缓冲区追加</a>算法。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-sourcebuffer-abort" data-idl="operation"
                        data-title="abort" data-dfn-for="SourceBuffer" data-type="undefined" data-lt="abort()"
                        data-local-lt="SourceBuffer.abort|SourceBuffer.abort()|abort" tabindex="0"
                        aria-haspopup="dialog"><code>abort</code></dfn>
                </dt>
                <dd>
                    <p>
                        中止当前分段并重置分段解析器。
                    </p>

                    <p>调用此方法时，用户代理必须运行以下步骤：</p>
                    <ol class="method-algorithm">
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-26"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                id="ref-for-dom-mediasource-readystate-28"><code>readyState</code></a> 属性不是 "<a
                                data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                id="ref-for-dom-readystate-open-16"><code>open</code></a>"，则抛出 <a
                                data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="dfn|abstract-op" href="#dfn-range-removal" class="internalDFN"
                                id="ref-for-dfn-range-removal-1">区间移除</a>算法正在运行，则抛出 <a data-link-type="exception"
                                data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-11"><code>updating</code></a> 属性为 true，则运行以下步骤：
                            <ol>
                                <li>若正在运行 <a data-link-type="dfn|abstract-op" href="#dfn-buffer-append"
                                        class="internalDFN" id="ref-for-dfn-buffer-append-3">缓冲区追加</a>算法，则中止该算法。
                                </li>
                                <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-updating-12"><code>updating</code></a> 属性设为 false。
                                </li>
                                <li><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                    <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                        data-link-type="idl" data-lt="abort" href="#dfn-abort" class="internalDFN"
                                        id="ref-for-dfn-abort-3"><code>abort</code></a> 到本 <a data-link-type="idl"
                                        data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-53"><code>SourceBuffer</code></a> 对象。
                                </li>
                                <li><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                    <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                        data-link-type="idl" data-lt="updateend" href="#dfn-updateend"
                                        class="internalDFN" id="ref-for-dfn-updateend-3"><code>updateend</code></a> 到本
                                    <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                        class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-54"><code>SourceBuffer</code></a> 对象。
                                </li>
                            </ol>
                        </li>
                        <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-reset-parser-state" class="internalDFN"
                                id="ref-for-dfn-reset-parser-state-1">重置解析器状态</a>算法。
                        </li>
                        <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowstart" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-appendwindowstart-4"><code>appendWindowStart</code></a> 设为
                            <a data-link-type="dfn|abstract-op" href="#presentation-start-time" class="internalDFN"
                                id="ref-for-presentation-start-time-5">展示开始时间</a>。
                        </li>
                        <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowend" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-appendwindowend-4"><code>appendWindowEnd</code></a> 设为正无穷。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-sourcebuffer-changetype" data-idl="operation"
                        data-title="changeType" data-dfn-for="SourceBuffer" data-type="undefined"
                        data-lt="changeType()|changeType(type)"
                        data-local-lt="SourceBuffer.changeType|SourceBuffer.changeType()|changeType" tabindex="0"
                        aria-haspopup="dialog"><code>changeType</code></dfn>
                </dt>
                <dd>
                    <p>
                        更改该对象关联的 MIME 类型。后续的 <a data-link-type="idl" data-lt="appendBuffer()"
                            href="#dom-sourcebuffer-appendbuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-appendbuffer-6"><code>appendBuffer</code></a><code>()</code>
                        调用会要求新追加的字节与新类型一致。
                    </p>

                    <p>调用此方法时，用户代理必须运行以下步骤：</p>
                    <ol class="method-algorithm">
                        <li>如果 <var data-type="DOMString">type</var> 为空字符串，则抛出 <a data-link-type="exception"
                                data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-27"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-13"><code>updating</code></a> 属性为 true，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <var data-type="DOMString">type</var> 包含不支持的 MIME 类型，或与 <a data-link-type="idl"
                                data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-55"><code>SourceBuffer</code></a>（在父媒体源的 <a
                                data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-28"><code>sourceBuffers</code></a>
                            属性中）当前或先前指定的类型不兼容，则抛出 <a data-link-type="exception" data-lt="NotSupportedError"
                                href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>
                            <p>
                                如果父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                    id="ref-for-dom-mediasource-readystate-29"><code>readyState</code></a> 属性为 "<a
                                    data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                    id="ref-for-dom-readystate-ended-11"><code>ended</code></a>"，则执行：
                            </p>
                            <ol>
                                <li>将父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                        class="internalDFN"
                                        id="ref-for-dom-mediasource-readystate-30"><code>readyState</code></a> 属性设为 "<a
                                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                        id="ref-for-dom-readystate-open-17"><code>open</code></a>"。
                                </li>
                                <li><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                    <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                        data-link-type="idl" data-lt="sourceopen" href="#dfn-sourceopen"
                                        class="internalDFN" id="ref-for-dfn-sourceopen-5"><code>sourceopen</code></a>
                                    到父媒体源。
                                </li>
                            </ol>
                        </li>
                        <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-reset-parser-state" class="internalDFN"
                                id="ref-for-dfn-reset-parser-state-2">重置解析器状态</a>算法。
                        </li>
                        <li>根据字节流格式注册表 [<cite><a class="bibref" data-link-type="biblio" href="#bib-mse-registry"
                                    title="Media Source Extensions™ Byte Stream Format Registry">MSE-REGISTRY</a></cite>]
                            中 <var data-type="DOMString">type</var> 对应条目的 "Generate Timestamps Flag" 列，为本 <a
                                data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-56"><code>SourceBuffer</code></a> 对象更新 <a
                                data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                                href="#dfn-generate-timestamps-flag" class="internalDFN"
                                id="ref-for-dfn-generate-timestamps-flag-4"><code>[[generate timestamps flag]]</code></a>
                            的值。
                        </li>
                        <li>
                            <dl class="switch">
                                <dt>
                                    如果 <a data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                                        href="#dfn-generate-timestamps-flag" class="internalDFN"
                                        id="ref-for-dfn-generate-timestamps-flag-5"><code>[[generate timestamps flag]]</code></a>
                                    为 true：
                                </dt>
                                <dd>
                                    将本 <a data-link-type="idl" href="#dom-sourcebuffer-mode" class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-mode-5"><code>mode</code></a> 属性设为 "<a
                                        data-link-type="idl" href="#dom-appendmode-sequence" class="internalDFN"
                                        id="ref-for-dom-appendmode-sequence-6"><code>sequence</code></a>"，并运行属性被设置时的相关步骤。
                                </dd>
                                <dt>
                                    否则：
                                </dt>
                                <dd>
                                    保持本 <a data-link-type="idl" href="#dom-sourcebuffer-mode" class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-mode-6"><code>mode</code></a> 属性原值，不运行相关设置步骤。
                                </dd>
                            </dl>
                        </li>
                        <li>将本 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN" id="ref-for-dom-sourcebuffer-59"><code>SourceBuffer</code></a> 对象上的
                            <a data-link-type="attribute"
                                data-lt="[[pending initialization segment for changeType flag]]"
                                href="#dfn-pending-initialization-segment-for-changetype-flag" class="internalDFN"
                                id="ref-for-dfn-pending-initialization-segment-for-changetype-flag-1"><code>[[pending initialization segment for changeType flag]]</code></a>
                            设为 true。
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-sourcebuffer-remove" data-idl="operation"
                        data-title="remove" data-dfn-for="SourceBuffer" data-type="undefined"
                        data-lt="remove()|remove(start, end)"
                        data-local-lt="SourceBuffer.remove|SourceBuffer.remove()|remove" tabindex="0"
                        aria-haspopup="dialog"><code>remove</code></dfn>
                </dt>
                <dd>
                    <p>
                        移除指定时间范围内的媒体。移除区间的 <var>start</var>（秒），从 <a data-link-type="dfn|abstract-op"
                            href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-6">展示开始时间</a>起算，<var>end</var>（秒）同样从 <a
                            data-link-type="dfn|abstract-op" href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-7">展示开始时间</a>起算。
                    </p>

                    <p>调用此方法时，用户代理必须运行以下步骤：</p>
                    <ol class="method-algorithm">
                        <li>如果该对象已从 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-sourcebuffers-29"><code>sourceBuffers</code></a>（父媒体源）中移除，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-14"><code>updating</code></a> 属性为 true，则抛出
                            <a data-link-type="exception" data-lt="InvalidStateError"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                                id="ref-for-dom-mediasource-duration-7"><code>duration</code></a> 等于 NaN，则抛出 <a
                                data-link-type="exception" data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <var data-type="double">start</var> 为负数或大于 <a data-link-type="idl"
                                href="#dom-mediasource-duration" class="internalDFN"
                                id="ref-for-dom-mediasource-duration-8"><code>duration</code></a>，则抛出 <a
                                data-link-type="exception" data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>如果 <var data-type="unrestricted double">end</var> 小于等于 <var data-type="double">start</var> 或
                            <var data-type="unrestricted double">end</var> 为 NaN，则抛出 <a data-link-type="exception"
                                data-lt="TypeError"
                                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>
                            异常并终止这些步骤。
                        </li>
                        <li>
                            <p>
                                如果父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                    id="ref-for-dom-mediasource-readystate-31"><code>readyState</code></a> 属性为 "<a
                                    data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                    id="ref-for-dom-readystate-ended-12"><code>ended</code></a>"，则执行：
                            </p>
                            <ol>
                                <li>将父媒体源的 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                        class="internalDFN"
                                        id="ref-for-dom-mediasource-readystate-32"><code>readyState</code></a> 属性设为 "<a
                                        data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                        id="ref-for-dom-readystate-open-18"><code>open</code></a>"
                                </li>
                                <li><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                    <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a> <a
                                        data-link-type="idl" data-lt="sourceopen" href="#dfn-sourceopen"
                                        class="internalDFN" id="ref-for-dfn-sourceopen-6"><code>sourceopen</code></a>
                                    到父媒体源。
                                </li>
                            </ol>
                        </li>
                        <li>以 <var data-type="double">start</var> 和 <var data-type="unrestricted double">end</var>
                            作为移除区间的起止，运行 <a data-link-type="dfn|abstract-op" href="#dfn-range-removal"
                                class="internalDFN" id="ref-for-dfn-range-removal-2">区间移除</a>算法。
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="track-buffers">
            <div class="header-wrapper">
                <h3 id="x5-3-track-buffers"><bdi class="secno">5.3 </bdi>
                    轨道缓冲区
                </h3><a class="self-link" href="#track-buffers" aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                <dfn id="track-buffer" data-plurals="track buffers" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">轨道缓冲区</dfn> 用于存储单个轨道的 <a data-link-type="dfn|abstract-op"
                    href="#dfn-track-description" class="internalDFN" id="ref-for-dfn-track-description-2">轨道描述</a> 和 <a
                    data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                    id="ref-for-dfn-coded-frame-13">编码帧</a>。轨道缓冲区会在 <a data-link-type="dfn|abstract-op"
                    href="#dfn-initialization-segment" class="internalDFN"
                    id="ref-for-dfn-initialization-segment-5">初始化分段</a>和 <a data-link-type="dfn|abstract-op"
                    href="#dfn-media-segment" class="internalDFN" id="ref-for-dfn-media-segment-7">媒体分段</a>追加到 <a
                    data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                    id="ref-for-dom-sourcebuffer-60"><code>SourceBuffer</code></a> 时更新。
            </p>
            <p>
                每个 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                    id="ref-for-track-buffer-8">轨道缓冲区</a>有一个 <dfn id="last-decode-timestamp" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">上次解码时间戳</dfn>
                变量，用于存储当前 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-group" class="internalDFN"
                    id="ref-for-dfn-coded-frame-group-1">编码帧组</a>中最后一个追加的 <a data-link-type="dfn|abstract-op"
                    href="#dfn-coded-frame" class="internalDFN"
                    id="ref-for-dfn-coded-frame-14">编码帧</a>的解码时间戳。该变量初始为未设置，表示还没有追加任何编码帧。
            </p>
            <p>
                每个 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                    id="ref-for-track-buffer-9">轨道缓冲区</a>有一个 <dfn id="last-frame-duration" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">最后帧时长</dfn>
                变量，用于存储当前 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-group" class="internalDFN"
                    id="ref-for-dfn-coded-frame-group-2">编码帧组</a>中最后一个追加的 <a data-link-type="dfn|abstract-op"
                    href="#dfn-coded-frame-duration" class="internalDFN"
                    id="ref-for-dfn-coded-frame-duration-5">编码帧时长</a>。该变量初始为未设置，表示还没有追加任何编码帧。
            </p>
            <p>
                每个 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                    id="ref-for-track-buffer-10">轨道缓冲区</a>有一个 <dfn id="highest-end-timestamp" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">最大结束时间戳</dfn>
                变量，用于存储当前 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-group" class="internalDFN"
                    id="ref-for-dfn-coded-frame-group-3">编码帧组</a>中追加到该轨道缓冲区的所有 <a data-link-type="dfn|abstract-op"
                    href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-18">编码帧</a>的最大 <a
                    data-link-type="dfn|abstract-op" href="#dfn-coded-frame-end-timestamp" class="internalDFN"
                    id="ref-for-dfn-coded-frame-end-timestamp-1">编码帧结束时间戳</a>。初始为未设置，表示还没有追加任何编码帧。
            </p>
            <p>
                每个 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                    id="ref-for-track-buffer-11">轨道缓冲区</a>有一个 <dfn id="need-RAP-flag" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">需要随机访问点标志</dfn>
                变量，用于标记轨道缓冲区是否在等待一个 <a data-link-type="dfn|abstract-op" href="#random-access-point" class="internalDFN"
                    id="ref-for-random-access-point-2">随机访问点</a> <a data-link-type="dfn|abstract-op"
                    href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-20">编码帧</a>。该变量初始为 true，表示需要
                <a data-link-type="dfn|abstract-op" href="#random-access-point" class="internalDFN"
                    id="ref-for-random-access-point-3">随机访问点</a> <a data-link-type="dfn|abstract-op"
                    href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-21">编码帧</a>后才能向该 <a
                    data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                    id="ref-for-track-buffer-12">轨道缓冲区</a>添加内容。
            </p>
            <p>
                每个 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                    id="ref-for-track-buffer-13">轨道缓冲区</a>有一个 <dfn id="track-buffer-ranges" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">轨道缓冲区范围</dfn>
                变量，表示当前存储在该轨道缓冲区中的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                    id="ref-for-dfn-coded-frame-22">编码帧</a>所占用的展示时间区间。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-46">
                <div role="heading" class="note-title marker" id="h-note-46" aria-level="4"><span>注意</span></div>
                <p class="">
                    对于轨道缓冲区范围，这些展示时间区间基于 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                        class="internalDFN" id="ref-for-presentation-timestamp-14">展示时间戳</a>、帧时长，以及多轨道缓冲区复用的 <a
                        data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-61"><code>SourceBuffer</code></a> 中各编码帧组可能的起始时间。
                </p>
            </div>
            <p>
                从规范角度看，这些信息视为存储在
                <a href="https://html.spec.whatwg.org/multipage/media.html#normalised-timeranges-object">标准化 TimeRanges
                    对象</a>中。交集 <a data-link-type="dfn|abstract-op" href="#track-buffer-ranges" class="internalDFN"
                    id="ref-for-track-buffer-ranges-5">轨道缓冲区范围</a>用于报告 <a data-link-type="interface"
                    data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的 <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>，
                并<em class="rfc2119">必须</em>支持在每个 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的 <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                区间内不间断播放。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-47">
                <div role="heading" class="note-title marker" id="h-note-47" aria-level="4"><span>注意</span></div>
                <p class="">
                    这些编码帧组起始时间与 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing"
                        class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-3">编码帧处理</a>算法中提到的略有不同，实际为所有轨道缓冲区在不连续后最早的 <a
                        data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                        id="ref-for-presentation-timestamp-15">展示时间戳</a>。不连续可在 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-4">编码帧处理</a>算法内出现，也可由 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame-removal" class="internalDFN"
                        id="ref-for-dfn-coded-frame-removal-2">编码帧移除</a>算法导致，无论 <a data-link-type="idl"
                        href="#dom-sourcebuffer-mode" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-mode-7"><code>mode</code></a>
                    为何。轨道缓冲区范围判定不连续的阈值由实现决定。例如，为减少意外播放停顿，实现<em class="rfc2119">可以</em>通过合并小于本轨道缓冲区已缓冲最大帧时长两倍的相邻区间，以近似 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-5">编码帧处理</a>算法的不连续检测逻辑。实现<em class="rfc2119">还可以</em>在复用的
                    <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-62"><code>SourceBuffer</code></a>
                    中跨轨道缓冲区使用编码帧组起始时间作为区间起点，以进一步减少意外播放停顿。
                </p>
            </div>
        </section>
        <section id="sourcebuffer-events">
            <div class="header-wrapper">
                <h3 id="x5-4-event-summary"><bdi class="secno">5.4 </bdi>
                    事件概要
                </h3><a class="self-link" href="#sourcebuffer-events" aria-label="Permalink for Section 5.4"></a>
            </div>

            <table class="data">
                <thead>
                    <tr>
                        <th>
                            事件名
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            何时派发...
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-updatestart" tabindex="0"
                                aria-haspopup="dialog" data-export="">updatestart</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-63"><code>SourceBuffer</code></a> 的 <a data-link-type="idl"
                                href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-15"><code>updating</code></a> 属性从 false 变为 true 时。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-update" tabindex="0" aria-haspopup="dialog"
                                data-export="">update</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-64"><code>SourceBuffer</code></a> 的追加或移除操作成功完成。
                            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-65"><code>SourceBuffer</code></a> 的
                            <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-16"><code>updating</code></a> 属性从 true 变为 false。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-updateend" tabindex="0"
                                aria-haspopup="dialog" data-export="">updateend</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-66"><code>SourceBuffer</code></a> 的追加或移除操作结束。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-error" tabindex="0" aria-haspopup="dialog"
                                data-export="">error</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            在向 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN" id="ref-for-dom-sourcebuffer-67"><code>SourceBuffer</code></a>
                            追加数据时发生错误。
                            <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-17"><code>updating</code></a> 属性从 true 变为 false。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-abort" tabindex="0" aria-haspopup="dialog"
                                data-export="">abort</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-68"><code>SourceBuffer</code></a>
                            的追加操作被 <a data-link-type="idl" data-lt="abort()" href="#dom-sourcebuffer-abort"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-abort-3"><code>abort</code></a><code>()</code> 调用中止。
                            <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-updating-18"><code>updating</code></a> 属性从 true 变为 false。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="sourcebuffer-algorithms">
            <div class="header-wrapper">
                <h3 id="x5-5-algorithms"><bdi class="secno">5.5 </bdi>
                    算法
                </h3><a class="self-link" href="#sourcebuffer-algorithms" aria-label="Permalink for Section 5.5"></a>
            </div>

            <section id="sourcebuffer-segment-parser-loop">
                <div class="header-wrapper">
                    <h4 id="x5-5-1-segment-parser-loop"><bdi class="secno">5.5.1 </bdi>
                        <dfn id="dfn-segment-parser-loop" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">分段解析循环</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-segment-parser-loop"
                        aria-label="Permalink for Section 5.5.1"></a>
                </div>

                <p>
                    每个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-69"><code>SourceBuffer</code></a> 对象有一个 <dfn
                        data-dfn-for="SourceBuffer" data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-append-state" tabindex="0" aria-haspopup="dialog">[[append
                        state]]</dfn> 内部槽，用于记录高层分段解析状态。初始值为 <a data-link-type="dfn|abstract-op"
                        href="#sourcebuffer-waiting-for-segment" class="internalDFN"
                        id="ref-for-sourcebuffer-waiting-for-segment-1">WAITING_FOR_SEGMENT</a>，追加数据时可转为以下状态。
                </p>
                <table class="data">
                    <thead>
                        <tr>
                            <th>
                                追加状态名称
                            </th>
                            <th>
                                描述
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <dfn id="sourcebuffer-waiting-for-segment" tabindex="0" aria-haspopup="dialog"
                                    data-dfn-type="dfn">WAITING_FOR_SEGMENT</dfn>
                            </td>
                            <td>
                                等待追加 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-6">初始化分段</a> 或 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                                    id="ref-for-dfn-media-segment-8">媒体分段</a> 的开始。
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <dfn id="sourcebuffer-parsing-init-segment" tabindex="0" aria-haspopup="dialog"
                                    data-dfn-type="dfn">PARSING_INIT_SEGMENT</dfn>
                            </td>
                            <td>
                                当前正在解析 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-7">初始化分段</a>。
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <dfn id="sourcebuffer-parsing-media-segment" tabindex="0" aria-haspopup="dialog"
                                    data-dfn-type="dfn">PARSING_MEDIA_SEGMENT</dfn>
                            </td>
                            <td>
                                当前正在解析 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                                    id="ref-for-dfn-media-segment-9">媒体分段</a>。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    每个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-70"><code>SourceBuffer</code></a> 对象有一个 <dfn
                        data-dfn-for="SourceBuffer" data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-input-buffer" tabindex="0" aria-haspopup="dialog">[[input
                        buffer]]</dfn> 内部槽，是个字节缓冲区，保存 <a data-link-type="idl" data-lt="appendBuffer()"
                        href="#dom-sourcebuffer-appendbuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-appendbuffer-7"><code>appendBuffer</code></a><code>()</code>
                    调用之间未解析的字节。创建对象时该缓冲区为空。
                </p>
                <p>
                    每个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-72"><code>SourceBuffer</code></a> 对象有一个 <dfn
                        data-dfn-for="SourceBuffer" data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-buffer-full-flag" tabindex="0" aria-haspopup="dialog">[[buffer full
                        flag]]</dfn> 内部槽，用于记录 <a data-link-type="idl" data-lt="appendBuffer()"
                        href="#dom-sourcebuffer-appendbuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-appendbuffer-8"><code>appendBuffer</code></a><code>()</code>
                    是否允许接受更多字节。对象创建时设为 false，追加和移除数据时会更新。
                </p>
                <p>
                    每个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-74"><code>SourceBuffer</code></a> 对象有一个 <dfn
                        data-dfn-for="SourceBuffer" data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-group-start-timestamp" tabindex="0" aria-haspopup="dialog">[[group start
                        timestamp]]</dfn> 内部槽，用于记录 "<a data-link-type="idl" href="#dom-appendmode-sequence"
                        class="internalDFN" id="ref-for-dom-appendmode-sequence-7"><code>sequence</code></a>" 模式下新 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame-group" class="internalDFN"
                        id="ref-for-dfn-coded-frame-group-4">编码帧组</a>的起始时间戳。对象创建时未设置，<a data-link-type="idl"
                        href="#dom-sourcebuffer-mode" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-mode-8"><code>mode</code></a> 属性为 "<a data-link-type="idl"
                        href="#dom-appendmode-sequence" class="internalDFN"
                        id="ref-for-dom-appendmode-sequence-8"><code>sequence</code></a>" 且 <a data-link-type="idl"
                        href="#dom-sourcebuffer-timestampoffset" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-timestampoffset-5"><code>timestampOffset</code></a> 属性被设置，或运行 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-6">编码帧处理</a>算法时会更新。
                </p>
                <p>
                    每个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-75"><code>SourceBuffer</code></a> 对象有一个 <dfn
                        data-dfn-for="SourceBuffer" data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-group-end-timestamp" tabindex="0" aria-haspopup="dialog">[[group end
                        timestamp]]</dfn> 内部槽，存储当前 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-group"
                        class="internalDFN" id="ref-for-dfn-coded-frame-group-5">编码帧组</a>所有 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-23">编码帧</a>的最大 <a data-link-type="dfn|abstract-op"
                        href="#dfn-coded-frame-end-timestamp" class="internalDFN"
                        id="ref-for-dfn-coded-frame-end-timestamp-2">编码帧结束时间戳</a>。创建对象时设为 0，运行 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-7">编码帧处理</a>算法时更新。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-48">
                    <div role="heading" class="note-title marker" id="h-note-48" aria-level="5"><span>注意</span></div>
                    <p class="">
                        <a data-link-type="attribute" data-lt="[[group end timestamp]]" href="#dfn-group-end-timestamp"
                            class="internalDFN"
                            id="ref-for-dfn-group-end-timestamp-2"><code>[[group end timestamp]]</code></a> 记录的是 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame-end-timestamp" class="internalDFN"
                            id="ref-for-dfn-coded-frame-end-timestamp-3">编码帧结束时间戳</a> 在一个 <a data-link-type="idl"
                            data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-76"><code>SourceBuffer</code></a> 的所有 <a
                            data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                            id="ref-for-track-buffer-16">轨道缓冲区</a>中的最大值。因此，在追加多轨道复用且时间戳未对齐分段时，需谨慎设置 <a
                            data-link-type="idl" href="#dom-sourcebuffer-mode" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-mode-9"><code>mode</code></a> 属性。
                    </p>
                </div>
                <p>
                    每个 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-77"><code>SourceBuffer</code></a> 对象有一个 <dfn
                        data-dfn-for="SourceBuffer" data-export="" data-idl="" data-dfn-type="attribute"
                        id="dfn-generate-timestamps-flag" tabindex="0" aria-haspopup="dialog">[[generate timestamps
                        flag]]</dfn> 内部槽，是个布尔值，用于记录传给 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame"
                        class="internalDFN" id="ref-for-dfn-coded-frame-24">编码帧</a>
                    处理算法的编码帧是否需要生成时间戳。该标志由 <a data-link-type="idl" data-lt="addSourceBuffer()"
                        href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                        id="ref-for-dom-mediasource-addsourcebuffer-6"><code>addSourceBuffer</code></a><code>()</code>
                    创建对象时设置，<a data-link-type="idl" data-lt="changeType()" href="#dom-sourcebuffer-changetype"
                        class="internalDFN"
                        id="ref-for-dom-sourcebuffer-changetype-5"><code>changeType</code></a><code>()</code> 可更新。
                </p>
                <p>
                    当调用分段解析循环算法时，运行以下步骤：
                </p>
                <ol>
                    <li>
                        <i>循环顶部：</i> 如果 <a data-link-type="attribute" data-lt="[[input buffer]]"
                            href="#dfn-input-buffer" class="internalDFN"
                            id="ref-for-dfn-input-buffer-2"><code>[[input buffer]]</code></a> 为空，则跳转到下方 <i>需要更多数据</i>
                        步骤。
                    </li>
                    <li>如果 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                            class="internalDFN" id="ref-for-dfn-input-buffer-3"><code>[[input buffer]]</code></a>
                        包含违反 <a data-link-type="dfn|abstract-op"
                            href="#dfn-sourcebuffer-byte-stream-format-specification" class="internalDFN"
                            id="ref-for-dfn-sourcebuffer-byte-stream-format-specification-1">SourceBuffer 字节流格式规范</a>
                        的字节，则运行 <a data-link-type="dfn|abstract-op" href="#dfn-append-error" class="internalDFN"
                            id="ref-for-dfn-append-error-3">追加错误</a>
                        算法并终止本算法。
                    </li>
                    <li>从 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                            class="internalDFN" id="ref-for-dfn-input-buffer-4"><code>[[input buffer]]</code></a>
                        的起始位置移除字节流格式规范要求<em class="rfc2119">必须</em>忽略的字节。
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                class="internalDFN" id="ref-for-dfn-append-state-3"><code>[[append state]]</code></a>
                            为 <a data-link-type="dfn|abstract-op" href="#sourcebuffer-waiting-for-segment"
                                class="internalDFN"
                                id="ref-for-sourcebuffer-waiting-for-segment-2">WAITING_FOR_SEGMENT</a>，则运行以下步骤：
                        </p>
                        <ol>
                            <li>如果 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-5"><code>[[input buffer]]</code></a> 的起始位置表示初始化分段开始，
                                则将 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                    class="internalDFN"
                                    id="ref-for-dfn-append-state-4"><code>[[append state]]</code></a> 设为
                                <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-init-segment"
                                    class="internalDFN"
                                    id="ref-for-sourcebuffer-parsing-init-segment-1">PARSING_INIT_SEGMENT</a>。
                            </li>
                            <li>如果 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-6"><code>[[input buffer]]</code></a> 的起始位置表示媒体分段开始，
                                则将 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                    class="internalDFN"
                                    id="ref-for-dfn-append-state-5"><code>[[append state]]</code></a> 设为
                                <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-media-segment"
                                    class="internalDFN"
                                    id="ref-for-sourcebuffer-parsing-media-segment-3">PARSING_MEDIA_SEGMENT</a>。
                            </li>
                            <li>跳转到上方<i>循环顶部</i>步骤。
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                class="internalDFN" id="ref-for-dfn-append-state-6"><code>[[append state]]</code></a>
                            为 <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-init-segment"
                                class="internalDFN"
                                id="ref-for-sourcebuffer-parsing-init-segment-2">PARSING_INIT_SEGMENT</a>，则运行以下步骤：
                        </p>
                        <ol>
                            <li>如果 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-7"><code>[[input buffer]]</code></a> 尚未包含完整的 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN"
                                    id="ref-for-dfn-initialization-segment-9">初始化分段</a>，则跳转到下方<i>需要更多数据</i>步骤。
                            </li>
                            <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment-received"
                                    class="internalDFN"
                                    id="ref-for-dfn-initialization-segment-received-1">初始化分段接收</a>算法。
                            </li>
                            <li>从 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-8"><code>[[input buffer]]</code></a> 起始移除 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-10">初始化分段</a>字节。
                            </li>
                            <li>将 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                    class="internalDFN"
                                    id="ref-for-dfn-append-state-7"><code>[[append state]]</code></a> 设为 <a
                                    data-link-type="dfn|abstract-op" href="#sourcebuffer-waiting-for-segment"
                                    class="internalDFN"
                                    id="ref-for-sourcebuffer-waiting-for-segment-3">WAITING_FOR_SEGMENT</a>。
                            </li>
                            <li>跳转到上方<i>循环顶部</i>步骤。
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                class="internalDFN" id="ref-for-dfn-append-state-8"><code>[[append state]]</code></a>
                            为 <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-media-segment"
                                class="internalDFN"
                                id="ref-for-sourcebuffer-parsing-media-segment-4">PARSING_MEDIA_SEGMENT</a>，则运行以下步骤：
                        </p>
                        <ol>
                            <li>如果 <a data-link-type="attribute"
                                    data-lt="[[first initialization segment received flag]]"
                                    href="#dfn-first-initialization-segment-received-flag" class="internalDFN"
                                    id="ref-for-dfn-first-initialization-segment-received-flag-1"><code>[[first initialization segment received flag]]</code></a>
                                为 false 或 <a data-link-type="attribute"
                                    data-lt="[[pending initialization segment for changeType flag]]"
                                    href="#dfn-pending-initialization-segment-for-changetype-flag" class="internalDFN"
                                    id="ref-for-dfn-pending-initialization-segment-for-changetype-flag-2"><code>[[pending initialization segment for changeType flag]]</code></a>
                                为 true，则运行 <a data-link-type="dfn|abstract-op" href="#dfn-append-error"
                                    class="internalDFN" id="ref-for-dfn-append-error-4">追加错误</a>算法并终止本算法。
                            </li>
                            <li>如果 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-9"><code>[[input buffer]]</code></a> 包含一个或多个完整 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-25">编码帧</a>，则运行 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-coded-frame-processing" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-processing-9">编码帧处理</a>算法。
                                <div class="note" role="note" id="issue-container-generatedID-49">
                                    <div role="heading" class="note-title marker" id="h-note-49" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        编码帧处理算法运行频率由实现决定。其<em class="rfc2119">可以</em>在输入缓冲区包含完整媒体分段时调用，也<em
                                            class="rfc2119">可以</em>在完整编码帧加入输入缓冲区时多次调用。
                                    </p>
                                </div>
                            </li>
                            <li>如果本 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-79"><code>SourceBuffer</code></a>
                                已满且无法接受更多媒体数据，则将 <a data-link-type="attribute" data-lt="[[buffer full flag]]"
                                    href="#dfn-buffer-full-flag" class="internalDFN"
                                    id="ref-for-dfn-buffer-full-flag-1"><code>[[buffer full flag]]</code></a> 设为 true。
                            </li>
                            <li>如果 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-10"><code>[[input buffer]]</code></a> 尚未包含完整的 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                                    id="ref-for-dfn-media-segment-11">媒体分段</a>，则跳转到下方<i>需要更多数据</i>步骤。
                            </li>
                            <li>从 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                                    class="internalDFN"
                                    id="ref-for-dfn-input-buffer-11"><code>[[input buffer]]</code></a> 起始移除 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                                    id="ref-for-dfn-media-segment-12">媒体分段</a>字节。
                            </li>
                            <li>将 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                                    class="internalDFN"
                                    id="ref-for-dfn-append-state-9"><code>[[append state]]</code></a> 设为 <a
                                    data-link-type="dfn|abstract-op" href="#sourcebuffer-waiting-for-segment"
                                    class="internalDFN"
                                    id="ref-for-sourcebuffer-waiting-for-segment-4">WAITING_FOR_SEGMENT</a>。
                            </li>
                            <li>跳转到上方<i>循环顶部</i>步骤。
                            </li>
                        </ol>
                    </li>
                    <li>
                        <i>需要更多数据：</i>将控制权返回给调用算法。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-reset-parser-state">
                <div class="header-wrapper">
                    <h4 id="x5-5-2-reset-parser-state"><bdi class="secno">5.5.2 </bdi>
                        <dfn id="dfn-reset-parser-state" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">重置解析器状态</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-reset-parser-state"
                        aria-label="Permalink for Section 5.5.2"></a>
                </div>

                <p>
                    当需要重置解析器状态时，执行以下步骤：
                </p>
                <ol>
                    <li>如果 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                            class="internalDFN" id="ref-for-dfn-append-state-10"><code>[[append state]]</code></a>
                        等于 <a data-link-type="dfn|abstract-op" href="#sourcebuffer-parsing-media-segment"
                            class="internalDFN"
                            id="ref-for-sourcebuffer-parsing-media-segment-5">PARSING_MEDIA_SEGMENT</a> 并且
                        <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                            class="internalDFN" id="ref-for-dfn-input-buffer-12"><code>[[input buffer]]</code></a>
                        包含一些完整的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                            id="ref-for-dfn-coded-frame-26">编码帧</a>，则运行
                        <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                            id="ref-for-dfn-coded-frame-processing-10">编码帧处理</a>算法，直到所有这些完整的
                        <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                            id="ref-for-dfn-coded-frame-27">编码帧</a>
                        都被处理完毕。
                    </li>
                    <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                            id="ref-for-track-buffer-17">轨道缓冲区</a>上的 <a data-link-type="dfn|abstract-op"
                            href="#last-decode-timestamp" class="internalDFN"
                            id="ref-for-last-decode-timestamp-1">最后解码时间戳</a>。
                    </li>
                    <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                            id="ref-for-track-buffer-18">轨道缓冲区</a>上的 <a data-link-type="dfn|abstract-op"
                            href="#last-frame-duration" class="internalDFN"
                            id="ref-for-last-frame-duration-1">最后帧持续时间</a>。
                    </li>
                    <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                            id="ref-for-track-buffer-19">轨道缓冲区</a>上的 <a data-link-type="dfn|abstract-op"
                            href="#highest-end-timestamp" class="internalDFN"
                            id="ref-for-highest-end-timestamp-1">最高结束时间戳</a>。
                    </li>
                    <li>将所有 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                            id="ref-for-track-buffer-20">轨道缓冲区</a>上的 <a data-link-type="dfn|abstract-op"
                            href="#need-RAP-flag" class="internalDFN" id="ref-for-need-RAP-flag-1">需要随机访问点标志</a> 设置为
                        true。
                    </li>
                    <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-mode-10"><code>mode</code></a> 属性等于 "<a data-link-type="idl"
                            href="#dom-appendmode-sequence" class="internalDFN"
                            id="ref-for-dom-appendmode-sequence-9"><code>sequence</code></a>"，则将
                        <a data-link-type="attribute" data-lt="[[group start timestamp]]"
                            href="#dfn-group-start-timestamp" class="internalDFN"
                            id="ref-for-dfn-group-start-timestamp-3"><code>[[group start timestamp]]</code></a> 设置为
                        <a data-link-type="attribute" data-lt="[[group end timestamp]]" href="#dfn-group-end-timestamp"
                            class="internalDFN"
                            id="ref-for-dfn-group-end-timestamp-3"><code>[[group end timestamp]]</code></a>
                    </li>
                    <li>移除 <a data-link-type="attribute" data-lt="[[input buffer]]" href="#dfn-input-buffer"
                            class="internalDFN" id="ref-for-dfn-input-buffer-13"><code>[[input buffer]]</code></a>
                        中的所有字节。
                    </li>
                    <li>将 <a data-link-type="attribute" data-lt="[[append state]]" href="#dfn-append-state"
                            class="internalDFN" id="ref-for-dfn-append-state-11"><code>[[append state]]</code></a> 设置为
                        <a data-link-type="dfn|abstract-op" href="#sourcebuffer-waiting-for-segment" class="internalDFN"
                            id="ref-for-sourcebuffer-waiting-for-segment-5">WAITING_FOR_SEGMENT</a>。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-append-error">
                <div class="header-wrapper">
                    <h4 id="x5-5-3-append-error"><bdi class="secno">5.5.3 </bdi>
                        <dfn data-export="" id="dfn-append-error" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">追加错误</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-append-error"
                        aria-label="Permalink for Section 5.5.3"></a>
                </div>

                <p>
                    当追加过程中发生错误时调用此算法。
                </p>
                <ol>
                    <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-reset-parser-state" class="internalDFN"
                            id="ref-for-dfn-reset-parser-state-3">重置解析器状态</a> 算法。
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-updating-19"><code>updating</code></a> 属性设为 false。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，
                        事件名为 <a data-link-type="idl" data-lt="error" href="#dfn-error" class="internalDFN"
                            id="ref-for-dfn-error-2"><code>error</code></a>，在此
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-80"><code>SourceBuffer</code></a> 对象上。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，
                        事件名为 <a data-link-type="idl" data-lt="updateend" href="#dfn-updateend" class="internalDFN"
                            id="ref-for-dfn-updateend-4"><code>updateend</code></a>，在此
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-81"><code>SourceBuffer</code></a> 对象上。
                    </li>
                    <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-end-of-stream" class="internalDFN"
                            id="ref-for-dfn-end-of-stream-2">end of stream</a> 算法，并将 <var
                            data-type="EndOfStreamError">error</var> 参数设为
                        "<a data-link-type="idl" href="#dom-endofstreamerror-decode" class="internalDFN"
                            id="ref-for-dom-endofstreamerror-decode-3"><code>decode</code></a>"。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-prepare-append">
                <div class="header-wrapper">
                    <h4 id="x5-5-4-prepare-append"><bdi class="secno">5.5.4 </bdi>
                        <dfn id="dfn-prepare-append" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">准备追加</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-prepare-append"
                        aria-label="Permalink for Section 5.5.4"></a>
                </div>

                <p>
                    当追加操作开始时，运行以下步骤以验证并准备 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                        class="internalDFN" id="ref-for-dom-sourcebuffer-82"><code>SourceBuffer</code></a>。
                </p>
                <ol>
                    <li>如果 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-83"><code>SourceBuffer</code></a> 已从 <a data-link-type="idl"
                            href="#dom-mediasource-sourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-sourcebuffers-30"><code>sourceBuffers</code></a>
                        属性移除（属于 <a data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                            id="ref-for-parent-media-source-23">父媒体源</a>），则抛出
                        <a data-link-type="exception" data-lt="InvalidStateError"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                        异常并中止这些步骤。
                    </li>
                    <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-updating-20"><code>updating</code></a> 属性为 true，
                        则抛出
                        <a data-link-type="exception" data-lt="InvalidStateError"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                        异常并中止这些步骤。
                    </li>
                    <li>让 <var data-type="boolean">recent element error</var> 按如下方式确定：
                        <dl class="switch">
                            <dt>
                                如果 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                    class="internalDFN" id="ref-for-dom-mediasource-98"><code>MediaSource</code></a> 在
                                <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中构造
                            </dt>
                            <dd>
                                如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dfn-error" class="internalDFN"
                                    id="ref-for-dfn-error-3"><code>error</code></a> 属性不为 null，则 <var
                                    data-type="boolean">recent element error</var> 为 true。若属性为 null，则
                                <var data-type="boolean">recent element error</var> 为 false。
                            </dd>
                            <dt>
                                否则
                            </dt>
                            <dd>
                                <var data-type="boolean">recent element error</var> 的值为 <a data-link-type="interface"
                                    data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                情况下的步骤结果，但需在 <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                上
                                的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的 <a data-link-type="idl" href="#dfn-error" class="internalDFN"
                                    id="ref-for-dfn-error-4"><code>error</code></a> 属性发生变化时，并通过 <a
                                    data-link-type="attribute" data-lt="[[port to worker]]" href="#dfn-port-to-worker"
                                    class="internalDFN"
                                    id="ref-for-dfn-port-to-worker-7"><code>[[port to worker]]</code></a>
                                隐式消息通知。如果尚未收到该消息，则 <var data-type="boolean">recent element error</var> 为 false。
                            </dd>
                        </dl>
                    </li>
                    <li>如果 <var data-type="boolean">recent element error</var> 为 true，则抛出 <a data-link-type="exception"
                            data-lt="InvalidStateError"
                            href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                        异常并中止这些步骤。
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                id="ref-for-dom-mediasource-readystate-33"><code>readyState</code></a> 属性的
                            <a data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                                id="ref-for-parent-media-source-24">父媒体源</a> 处于
                            "<a data-link-type="idl" href="#dom-readystate-ended" class="internalDFN"
                                id="ref-for-dom-readystate-ended-13"><code>ended</code></a>" 状态，则运行以下步骤：
                        </p>
                        <ol>
                            <li>将 <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                    id="ref-for-dom-mediasource-readystate-34"><code>readyState</code></a> 属性的
                                <a data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                                    id="ref-for-parent-media-source-25">父媒体源</a> 设置为
                                "<a data-link-type="idl" href="#dom-readystate-open" class="internalDFN"
                                    id="ref-for-dom-readystate-open-19"><code>open</code></a>"
                            </li>
                            <li><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                以 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为 <a
                                    data-link-type="idl" data-lt="sourceopen" href="#dfn-sourceopen" class="internalDFN"
                                    id="ref-for-dfn-sourceopen-7"><code>sourceopen</code></a>，触发于 <a
                                    data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                                    id="ref-for-parent-media-source-26">父媒体源</a>。
                            </li>
                        </ol>
                    </li>
                    <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-eviction" class="internalDFN"
                            id="ref-for-dfn-coded-frame-eviction-1">编码帧清除</a>算法。
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="attribute" data-lt="[[buffer full flag]]" href="#dfn-buffer-full-flag"
                                class="internalDFN"
                                id="ref-for-dfn-buffer-full-flag-2"><code>[[buffer full flag]]</code></a> 等于 true，
                            则抛出
                            <a data-link-type="interface" data-lt="QuotaExceededError"
                                href="https://webidl.spec.whatwg.org/#quotaexceedederror"><code>QuotaExceededError</code></a>
                            异常并中止这些步骤。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-50">
                            <div role="heading" class="note-title marker" id="h-note-50" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                这是实现无法清除足够数据以容纳追加内容或追加内容过大的信号。Web 应用<em class="rfc2119">应当</em>使用
                                <a data-link-type="idl" data-lt="remove()" href="#dom-sourcebuffer-remove"
                                    class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-remove-4"><code>remove</code></a><code>()</code>
                                显式释放空间和/或减少追加数据量。
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-buffer-append">
                <div class="header-wrapper">
                    <h4 id="x5-5-5-buffer-append"><bdi class="secno">5.5.5 </bdi>
                        <dfn id="dfn-buffer-append" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">缓冲区追加</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-buffer-append"
                        aria-label="Permalink for Section 5.5.5"></a>
                </div>

                <p>
                    当调用 <a data-link-type="idl" data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                        class="internalDFN"
                        id="ref-for-dom-sourcebuffer-appendbuffer-9"><code>appendBuffer</code></a><code>()</code>
                    时，执行以下步骤处理追加的数据。
                </p>
                <ol>
                    <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-segment-parser-loop" class="internalDFN"
                            id="ref-for-dfn-segment-parser-loop-1">分段解析循环</a> 算法。
                    </li>
                    <li>如果上一步中的 <a data-link-type="dfn|abstract-op" href="#dfn-segment-parser-loop" class="internalDFN"
                            id="ref-for-dfn-segment-parser-loop-2">分段解析循环</a> 算法被中止，则中止本算法。
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-updating-21"><code>updating</code></a> 属性设置为 false。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发</a>名为 <a
                            data-link-type="idl" data-lt="update" href="#dfn-update" class="internalDFN"
                            id="ref-for-dfn-update-2"><code>update</code></a> 的事件，在此 <a data-link-type="idl"
                            data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-84"><code>SourceBuffer</code></a> 对象上。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发</a>名为 <a
                            data-link-type="idl" data-lt="updateend" href="#dfn-updateend" class="internalDFN"
                            id="ref-for-dfn-updateend-5"><code>updateend</code></a> 的事件，在此 <a data-link-type="idl"
                            data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-85"><code>SourceBuffer</code></a> 对象上。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-range-removal">
                <div class="header-wrapper">
                    <h4 id="x5-5-6-range-removal"><bdi class="secno">5.5.6 </bdi>
                        <dfn id="dfn-range-removal" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">范围移除</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-range-removal"
                        aria-label="Permalink for Section 5.5.6"></a>
                </div>

                <p>
                    当调用者需要发起一个 JavaScript 可见的范围移除操作（该操作会阻塞其它 SourceBuffer 更新）时，按照以下步骤进行：
                </p>
                <ol>
                    <li>令 <var data-type="double">start</var> 等于移除范围的起始 <a data-link-type="dfn|abstract-op"
                            href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-16">展示时间戳</a>，单位为从 <a data-link-type="dfn|abstract-op"
                            href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-8">展示起始时间</a> 开始计的秒数。
                    </li>
                    <li>令 <var data-type="unrestricted double">end</var> 等于移除范围的结束 <a data-link-type="dfn|abstract-op"
                            href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-17">展示时间戳</a>，单位为从 <a data-link-type="dfn|abstract-op"
                            href="#presentation-start-time" class="internalDFN"
                            id="ref-for-presentation-start-time-9">展示起始时间</a> 开始计的秒数。
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-updating-22"><code>updating</code></a> 属性设为 true。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发</a>名为 <a
                            data-link-type="idl" data-lt="updatestart" href="#dfn-updatestart" class="internalDFN"
                            id="ref-for-dfn-updatestart-3"><code>updatestart</code></a> 的事件，在此
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-86"><code>SourceBuffer</code></a> 对象上。
                    </li>
                    <li>将控制权返回给调用方，并异步执行剩下的步骤。
                    </li>
                    <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-removal" class="internalDFN"
                            id="ref-for-dfn-coded-frame-removal-3">编码帧移除</a>算法，<var data-type="double">start</var> 和
                        <var data-type="unrestricted double">end</var> 分别作为移除范围的起止。
                    </li>
                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-updating" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-updating-23"><code>updating</code></a> 属性设为 false。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发</a>名为 <a
                            data-link-type="idl" data-lt="update" href="#dfn-update" class="internalDFN"
                            id="ref-for-dfn-update-3"><code>update</code></a> 的事件，在此
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-87"><code>SourceBuffer</code></a> 对象上。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发</a>名为 <a
                            data-link-type="idl" data-lt="updateend" href="#dfn-updateend" class="internalDFN"
                            id="ref-for-dfn-updateend-6"><code>updateend</code></a> 的事件，在此
                        <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-88"><code>SourceBuffer</code></a> 对象上。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-init-segment-received">
                <div class="header-wrapper">
                    <h4 id="x5-5-7-initialization-segment-received"><bdi class="secno">5.5.7 </bdi>
                        <dfn id="dfn-initialization-segment-received" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">接收到初始化分段</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-init-segment-received"
                        aria-label="Permalink for Section 5.5.7"></a>
                </div>

                <p>
                    当 <a data-link-type="dfn|abstract-op" href="#dfn-segment-parser-loop" class="internalDFN"
                        id="ref-for-dfn-segment-parser-loop-3">分段解析循环</a> 成功解析出一个完整的 <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-segment" class="internalDFN"
                        id="ref-for-dfn-initialization-segment-11">初始化分段</a> 时，运行以下步骤：
                </p>
                <p>
                    每个 SourceBuffer 对象都有一个用于跟踪是否已经由该算法追加并接收到首个 <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-segment" class="internalDFN"
                        id="ref-for-dfn-initialization-segment-12">初始化分段</a> 的内部插槽 <dfn data-dfn-for="SourceBuffer"
                        data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-first-initialization-segment-received-flag" tabindex="0" aria-haspopup="dialog">[[first
                        initialization
                        segment received flag]]</dfn>。该标志在创建 SourceBuffer 时被设为 false，并由下述算法进行更新。
                </p>
                <p>
                    每个 SourceBuffer 对象都有一个用于跟踪自最近一次 <a data-link-type="idl" data-lt="changeType()"
                        href="#dom-sourcebuffer-changetype" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-changetype-6"><code>changeType</code></a><code>()</code> 起是否需要 <a
                        data-link-type="dfn|abstract-op" href="#dfn-initialization-segment" class="internalDFN"
                        id="ref-for-dfn-initialization-segment-13">初始化分段</a> 的内部插槽 <dfn data-dfn-for="SourceBuffer"
                        data-idl="" data-noexport="" data-dfn-type="attribute"
                        id="dfn-pending-initialization-segment-for-changetype-flag" tabindex="0"
                        aria-haspopup="dialog">[[pending
                        initialization segment for changeType flag]]</dfn>。该标志在创建 SourceBuffer 时设为 false，由 <a
                        data-link-type="idl" data-lt="changeType()" href="#dom-sourcebuffer-changetype"
                        class="internalDFN"
                        id="ref-for-dom-sourcebuffer-changetype-7"><code>changeType</code></a><code>()</code> 设为
                    true，并由下述算法重置为 false。
                </p>
                <ol>
                    <li>如果当前 <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                            id="ref-for-dom-mediasource-duration-9"><code>duration</code></a> 属性值为 NaN，则进行更新：
                        <dl class="switch">
                            <dt>
                                如果初始化分段包含一个时长：
                            </dt>
                            <dd>
                                运行 <a data-link-type="dfn|abstract-op" href="#dfn-duration-change" class="internalDFN"
                                    id="ref-for-dfn-duration-change-4">时长变更</a> 算法，并将 <var
                                    data-type="unrestricted double">new duration</var>
                                设为初始化分段中的该时长。
                            </dd>
                            <dt>
                                否则：
                            </dt>
                            <dd>
                                运行 <a data-link-type="dfn|abstract-op" href="#dfn-duration-change" class="internalDFN"
                                    id="ref-for-dfn-duration-change-5">时长变更</a> 算法，并将 <var
                                    data-type="unrestricted double">new duration</var> 设为正无穷大。
                            </dd>
                        </dl>
                    </li>
                    <li>如果该 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment" class="internalDFN"
                            id="ref-for-dfn-initialization-segment-14">初始化分段</a> 不包含音频、视频或文本轨，则运行
                        <a data-link-type="dfn|abstract-op" href="#dfn-append-error" class="internalDFN"
                            id="ref-for-dfn-append-error-5">追加错误</a> 算法并中止这些步骤。
                    </li>
                    <li>如果 <a data-link-type="attribute" data-lt="[[first initialization segment received flag]]"
                            href="#dfn-first-initialization-segment-received-flag" class="internalDFN"
                            id="ref-for-dfn-first-initialization-segment-received-flag-2"><code>[[first initialization segment received flag]]</code></a>
                        为 true，
                        则运行以下步骤：
                        <ol>
                            <li>验证下列属性。如有任一检查失败，则运行 <a data-link-type="dfn|abstract-op" href="#dfn-append-error"
                                    class="internalDFN" id="ref-for-dfn-append-error-6">追加错误</a> 算法并中止这些步骤。
                                <ul>
                                    <li>音频、视频与文本轨的数量与首个 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-initialization-segment" class="internalDFN"
                                            id="ref-for-dfn-initialization-segment-15">初始化分段</a> 中的一致。
                                    </li>
                                    <li>如果单一类型存在多条轨（例如 2 条音轨），则这些轨的 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-track-id" class="internalDFN" id="ref-for-dfn-track-id-5">Track
                                            ID</a> 与首个 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-initialization-segment" class="internalDFN"
                                            id="ref-for-dfn-initialization-segment-16">初始化分段</a> 中的一致。
                                    </li>
                                    <li>每条轨的编解码器均受用户代理支持。
                                        <div class="note" role="note" id="issue-container-generatedID-51">
                                            <div role="heading" class="note-title marker" id="h-note-51" aria-level="5">
                                                <span>注意</span>
                                            </div>
                                            <p class="">
                                                如果某些编解码器未在最近一次成功的 <a data-link-type="idl" data-lt="changeType()"
                                                    href="#dom-sourcebuffer-changetype" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-changetype-8"><code>changeType</code></a><code>()</code>
                                                调用中传入的 <var data-type="DOMString">type</var> 参数（a），或者（b）若此对象尚未进行过成功的
                                                <a data-link-type="idl" data-lt="changeType()"
                                                    href="#dom-sourcebuffer-changetype" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-changetype-9"><code>changeType</code></a><code>()</code>，
                                                则为创建该 <a data-link-type="idl" data-lt="SourceBuffer"
                                                    href="#dom-sourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-89"><code>SourceBuffer</code></a> 对象的
                                                <a data-link-type="idl" data-lt="addSourceBuffer()"
                                                    href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-mediasource-addsourcebuffer-7"><code>addSourceBuffer</code></a><code>()</code>
                                                中被指定，
                                                用户代理 <em class="rfc2119">MAY</em> 将本应受支持的编解码器视为此处“不受支持”。例如，如果最近一次成功的
                                                <a data-link-type="idl" data-lt="changeType()"
                                                    href="#dom-sourcebuffer-changetype" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-changetype-10"><code>changeType</code></a><code>()</code>
                                                使用了 <code>'video/webm'</code> 或
                                                <code>'video/webm; codecs="vp8"'</code>，而初始化分段中出现了包含 vp9
                                                的视频轨，则即便上述另外两项检查通过，用户代理也
                                                <em class="rfc2119">MAY</em>
                                                利用此步骤触发解码错误。鼓励实现仅在该编解码器确实不受支持或另外两项检查失败时触发错误。鼓励 Web 作者使用带有精确编解码器参数的
                                                <a data-link-type="idl" data-lt="changeType()"
                                                    href="#dom-sourcebuffer-changetype" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-changetype-11"><code>changeType</code></a><code>()</code>、
                                                <a data-link-type="idl" data-lt="addSourceBuffer()"
                                                    href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-mediasource-addsourcebuffer-8"><code>addSourceBuffer</code></a><code>()</code>
                                                和 <a data-link-type="idl" data-lt="isTypeSupported()"
                                                    href="#dom-mediasource-istypesupported" class="internalDFN"
                                                    id="ref-for-dom-mediasource-istypesupported-2"><code>isTypeSupported</code></a><code>()</code>
                                                更主动地检测用户代理支持情况。当 <a data-link-type="idl" data-lt="SourceBuffer"
                                                    href="#dom-sourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-91"><code>SourceBuffer</code></a>
                                                对象的字节流格式发生变化时，必须调用
                                                <a data-link-type="idl" data-lt="changeType()"
                                                    href="#dom-sourcebuffer-changetype" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-changetype-12"><code>changeType</code></a><code>()</code>。
                                            </p>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li>将该 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-17">初始化分段</a> 中相应的 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-track-description" class="internalDFN"
                                    id="ref-for-dfn-track-description-3">轨道描述</a> 添加到各个 <a
                                    data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                    id="ref-for-track-buffer-21">轨道缓冲区</a>。
                            </li>
                            <li>将所有轨道缓冲区上的 <a data-link-type="dfn|abstract-op" href="#need-RAP-flag" class="internalDFN"
                                    id="ref-for-need-RAP-flag-2">need random access point flag</a> 设为 true。
                            </li>
                        </ol>
                    </li>
                    <li>令 <var data-type="boolean">active track flag</var> 等于 false。
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="attribute" data-lt="[[first initialization segment received flag]]"
                                href="#dfn-first-initialization-segment-received-flag" class="internalDFN"
                                id="ref-for-dfn-first-initialization-segment-received-flag-3"><code>[[first initialization segment received flag]]</code></a>
                            为 false，
                            则运行以下步骤：
                        </p>
                        <ol>
                            <li>如果该 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-18">初始化分段</a>
                                包含用户代理不支持的编解码器的轨，则运行 <a data-link-type="dfn|abstract-op" href="#dfn-append-error"
                                    class="internalDFN" id="ref-for-dfn-append-error-7">追加错误</a> 算法并中止这些步骤。
                                <div class="note" role="note" id="issue-container-generatedID-52">
                                    <div role="heading" class="note-title marker" id="h-note-52" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        如果某些编解码器未在最近一次成功的 <a data-link-type="idl" data-lt="changeType()"
                                            href="#dom-sourcebuffer-changetype" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-changetype-13"><code>changeType</code></a><code>()</code>
                                        （a）调用传入的 <var data-type="DOMString">type</var> 参数中指定，或者（b）若此对象尚未发生成功的
                                        <a data-link-type="idl" data-lt="changeType()"
                                            href="#dom-sourcebuffer-changetype" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-changetype-14"><code>changeType</code></a><code>()</code>，则为创建该对象的
                                        <a data-link-type="idl" data-lt="addSourceBuffer()"
                                            href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                                            id="ref-for-dom-mediasource-addsourcebuffer-9"><code>addSourceBuffer</code></a><code>()</code>
                                        中指定，
                                        用户代理 <em class="rfc2119">MAY</em> 将本应受支持的编解码器视为“不受支持”，从而触发解码错误。例如，
                                        <code>MediaSource.isTypeSupported('video/webm;codecs="vp8,vorbis"')</code>
                                        可能返回 true，但如果 <a data-link-type="idl" data-lt="addSourceBuffer()"
                                            href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                                            id="ref-for-dom-mediasource-addsourcebuffer-10"><code>addSourceBuffer</code></a><code>()</code>
                                        被调用时使用了
                                        <code>'video/webm;codecs="vp8"'</code>，而初始化分段中出现了 Vorbis 轨，则用户代理 <em
                                            class="rfc2119">MAY</em> 使用此步骤触发解码错误。
                                        鼓励实现仅在编解码器确实不受支持时触发错误。鼓励 Web 作者使用带有精确编解码器参数的
                                        <a data-link-type="idl" data-lt="changeType()"
                                            href="#dom-sourcebuffer-changetype" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-changetype-15"><code>changeType</code></a><code>()</code>、
                                        <a data-link-type="idl" data-lt="addSourceBuffer()"
                                            href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                                            id="ref-for-dom-mediasource-addsourcebuffer-11"><code>addSourceBuffer</code></a><code>()</code>
                                        和
                                        <a data-link-type="idl" data-lt="isTypeSupported()"
                                            href="#dom-mediasource-istypesupported" class="internalDFN"
                                            id="ref-for-dom-mediasource-istypesupported-3"><code>isTypeSupported</code></a><code>()</code>
                                        更主动地检测用户代理支持情况。当 <a data-link-type="idl" data-lt="changeType()"
                                            href="#dom-sourcebuffer-changetype" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-changetype-16"><code>changeType</code></a><code>()</code>
                                        为 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-94"><code>SourceBuffer</code></a>
                                        对象更改字节流格式时是必需的。
                                    </p>
                                </div>
                            </li>
                            <li>
                                <p>
                                    对于该 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                        class="internalDFN" id="ref-for-dfn-initialization-segment-20">初始化分段</a>
                                    中的每条音轨，运行以下步骤：
                                </p>
                                <ol>
                                    <li>令 <var>audio byte stream track ID</var> 为当前待处理音轨的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                                            id="ref-for-dfn-track-id-6">Track ID</a>。
                                    </li>
                                    <li>令 <var data-type="DOMString">audio language</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-21">初始化分段</a>
                                        中指定的 BCP 47 语言标记；若无语言信息，则为一个空字符串。
                                    </li>
                                    <li>如果 <var data-type="DOMString">audio language</var> 等于 BCP 47 的 'und' 值，则将 <var
                                            data-type="DOMString">audio language</var> 设为空字符串。
                                    </li>
                                    <li>令 <var data-type="DOMString">audio label</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-22">初始化分段</a>
                                        中指定的标签；若无标签信息，则为空字符串。
                                    </li>
                                    <li>令 <var data-type="DOMString sequence">audio kinds</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-23">初始化分段</a>
                                        中指定的一组 kind 字符串；若未提供 kind 信息，则为仅包含一个空字符串的序列。
                                    </li>
                                    <li>对于 <var data-type="DOMString sequence">audio kinds</var> 中的每个值，运行以下步骤：
                                        <ol>
                                            <li>令 <var data-type="DOMString">current audio kind</var> 等于本次循环中来自 <var
                                                    data-type="DOMString sequence">audio kinds</var> 的该值。
                                            </li>
                                            <li>令 <var data-type="AudioTrack">new audio track</var> 为一个新的 <a
                                                    data-link-type="interface" data-lt="AudioTrack"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                                对象。
                                            </li>
                                            <li>生成一个唯一 ID，并将其赋值给 <var data-type="AudioTrack">new audio track</var> 的 <a
                                                    data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-id"><code>id</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">audio language</var> 赋值给 <var>new
                                                    audio track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-language"><code>language</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">audio label</var> 赋值给 <var>new audio
                                                    track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-label"><code>label</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">current audio kind</var> 赋值给 <var>new
                                                    audio track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-kind"><code>kind</code></a>
                                                属性。
                                            </li>
                                            <li>
                                                <p>
                                                    如果该 <a data-link-type="idl" data-lt="SourceBuffer"
                                                        href="#dom-sourcebuffer" class="internalDFN"
                                                        id="ref-for-dom-sourcebuffer-95"><code>SourceBuffer</code></a>
                                                    对象的 <a data-link-type="idl" href="#dom-sourcebuffer-audiotracks"
                                                        class="internalDFN"
                                                        id="ref-for-dom-sourcebuffer-audiotracks-3"><code>audioTracks</code></a>
                                                    的 <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotracklist-length"><code>length</code></a>
                                                    等于 0，则运行以下步骤：
                                                </p>
                                                <ol>
                                                    <li>将 <var data-type="AudioTrack">new audio track</var> 的 <a
                                                            data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-audiotrack-enabled"><code>enabled</code></a>
                                                        属性设为 true。
                                                    </li>
                                                    <li>将 <var data-type="boolean">active track flag</var> 设为 true。
                                                    </li>
                                                </ol>
                                            </li>
                                            <li>将 <var data-type="AudioTrack">new audio track</var> 添加到该 <a
                                                    data-link-type="idl" href="#dom-sourcebuffer-audiotracks"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-audiotracks-4"><code>audioTracks</code></a>
                                                属性中，
                                                位于此 <a data-link-type="idl" data-lt="SourceBuffer"
                                                    href="#dom-sourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-96"><code>SourceBuffer</code></a>
                                                对象上。
                                                <div class="note" role="note" id="issue-container-generatedID-53">
                                                    <div role="heading" class="note-title marker" id="h-note-53"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        这应当触发 <a data-link-type="interface" data-lt="AudioTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                                        [<cite><a class="bibref" data-link-type="biblio"
                                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                                        逻辑，<a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                                                        <a data-link-type="event"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-addtrack">addtrack</a>，
                                                        并使用 <a data-link-type="interface" data-lt="TrackEvent"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，
                                                        其 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                        属性初始化为
                                                        <var data-type="AudioTrack">new audio track</var>，触发于由该 <a
                                                            data-link-type="idl" href="#dom-sourcebuffer-audiotracks"
                                                            class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-audiotracks-5"><code>audioTracks</code></a>
                                                        属性引用的 <a data-link-type="interface" data-lt="AudioTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                                        对象上，此对象位于该 <a data-link-type="idl" data-lt="SourceBuffer"
                                                            href="#dom-sourcebuffer" class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-97"><code>SourceBuffer</code></a>
                                                        上。
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <dl class="switch">
                                                    <dt>
                                                        如果 <a data-link-type="dfn|abstract-op"
                                                            href="#parent-media-source" class="internalDFN"
                                                            id="ref-for-parent-media-source-27">父媒体源</a> 是在
                                                        <a data-link-type="interface"
                                                            data-lt="DedicatedWorkerGlobalScope"
                                                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                                        中构造的：
                                                    </dt>
                                                    <dd>
                                                        向 <a data-link-type="attribute" data-lt="[[port to main]]"
                                                            href="#dfn-port-to-main" class="internalDFN"
                                                            id="ref-for-dfn-port-to-main-7"><code>[[port to main]]</code></a>
                                                        发送一条内部 <code>create track mirror</code> 消息，
                                                        其在 <a data-link-type="interface" data-lt="Window"
                                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                                        中的隐式处理器运行以下步骤：
                                                        <ol>
                                                            <li>令 <var data-type="AudioTrack">mirrored audio
                                                                    track</var> 为一个新的 <a data-link-type="interface"
                                                                    data-lt="AudioTrack"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                                                                对象。
                                                            </li>
                                                            <li>将与 <var data-type="AudioTrack">new
                                                                    audio track</var> 确定的相同属性值赋予 <var
                                                                    data-type="AudioTrack">mirrored audio track</var>。
                                                            </li>
                                                            <li>将 <var data-type="AudioTrack">mirrored audio
                                                                    track</var> 添加到 HTMLMediaElement 的 <a
                                                                    data-link-type="attribute"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-audiotracks"><code>audioTracks</code></a>
                                                                属性中。
                                                            </li>
                                                        </ol>
                                                    </dd>
                                                    <dt>
                                                        否则：
                                                    </dt>
                                                    <dd>
                                                        将 <var data-type="AudioTrack">new audio track</var> 添加到
                                                        HTMLMediaElement 的 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-audiotracks"><code>audioTracks</code></a>
                                                        属性中。
                                                    </dd>
                                                </dl>
                                                <div class="note" role="note" id="issue-container-generatedID-54">
                                                    <div role="heading" class="note-title marker" id="h-note-54"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        这应当触发 <a data-link-type="interface" data-lt="AudioTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                                        [<cite><a class="bibref" data-link-type="biblio"
                                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                                        逻辑，<a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                                                        <a data-link-type="event"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-addtrack">addtrack</a>，
                                                        并使用 <a data-link-type="interface" data-lt="TrackEvent"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，
                                                        其 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                        属性初始化为
                                                        <var data-type="AudioTrack">mirrored audio track</var> 或 <var
                                                            data-type="AudioTrack">new audio track</var>，触发于由
                                                        HTMLMediaElement 的
                                                        <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-audiotracks"><code>audioTracks</code></a>
                                                        属性引用的 <a data-link-type="interface" data-lt="AudioTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#audiotracklist"><code>AudioTrackList</code></a>
                                                        对象上。
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>创建一个新的 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-22">轨道缓冲区</a>，用于为该轨存储 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-28">编码帧</a>。
                                    </li>
                                    <li>将该轨的 <a data-link-type="dfn|abstract-op" href="#dfn-track-description"
                                            class="internalDFN" id="ref-for-dfn-track-description-4">轨道描述</a> 添加到该 <a
                                            data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                            id="ref-for-track-buffer-23">轨道缓冲区</a> 中。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    对于该 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                        class="internalDFN" id="ref-for-dfn-initialization-segment-24">初始化分段</a>
                                    中的每条视频轨，运行以下步骤：
                                </p>
                                <ol>
                                    <li>令 <var>video byte stream track ID</var> 为当前待处理视频轨的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                                            id="ref-for-dfn-track-id-7">Track ID</a>。
                                    </li>
                                    <li>令 <var data-type="DOMString">video language</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-25">初始化分段</a>
                                        中指定的 BCP 47 语言标记；若无语言信息，则为空字符串。
                                    </li>
                                    <li>如果 <var data-type="DOMString">video language</var> 等于 BCP 47 的 'und' 值，则将 <var
                                            data-type="DOMString">video language</var> 设为空字符串。
                                    </li>
                                    <li>令 <var data-type="DOMString">video label</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-26">初始化分段</a>
                                        中指定的标签；若无标签信息，则为空字符串。
                                    </li>
                                    <li>令 <var data-type="DOMString sequence">video kinds</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-27">初始化分段</a>
                                        中指定的一组 kind 字符串；若未提供 kind 信息，则为仅包含一个空字符串的序列。
                                    </li>
                                    <li>对于 <var data-type="DOMString sequence">video kinds</var> 中的每个值，运行以下步骤：
                                        <ol>
                                            <li>令 <var data-type="DOMString">current video kind</var> 等于本次循环中来自 <var
                                                    data-type="DOMString sequence">video kinds</var> 的该值。
                                            </li>
                                            <li>令 <var data-type="VideoTrack">new video track</var> 为一个新的 <a
                                                    data-link-type="interface" data-lt="VideoTrack"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                                对象。
                                            </li>
                                            <li>生成一个唯一 ID，并将其赋值给 <var data-type="VideoTrack">new video track</var> 的 <a
                                                    data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-id"><code>id</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">video language</var> 赋值给 <var>new
                                                    video track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-language"><code>language</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">video label</var> 赋值给 <var>new video
                                                    track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-label"><code>label</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">current video kind</var> 赋值给 <var>new
                                                    video track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-kind"><code>kind</code></a>
                                                属性。
                                            </li>
                                            <li>
                                                <p>
                                                    如果该 <a data-link-type="idl" data-lt="SourceBuffer"
                                                        href="#dom-sourcebuffer" class="internalDFN"
                                                        id="ref-for-dom-sourcebuffer-98"><code>SourceBuffer</code></a>
                                                    对象的 <a data-link-type="idl" href="#dom-sourcebuffer-videotracks"
                                                        class="internalDFN"
                                                        id="ref-for-dom-sourcebuffer-videotracks-3"><code>videoTracks</code></a>
                                                    的 <a data-link-type="attribute"
                                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-videotracklist-length"><code>length</code></a>
                                                    等于 0，则运行以下步骤：
                                                </p>
                                                <ol>
                                                    <li>将 <var data-type="VideoTrack">new video track</var> 的 <a
                                                            data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-videotrack-selected"><code>selected</code></a>
                                                        属性设为 true。
                                                    </li>
                                                    <li>将 <var data-type="boolean">active track flag</var> 设为 true。
                                                    </li>
                                                </ol>
                                            </li>
                                            <li>将 <var data-type="VideoTrack">new video track</var> 添加到该 <a
                                                    data-link-type="idl" href="#dom-sourcebuffer-videotracks"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-videotracks-4"><code>videoTracks</code></a>
                                                属性中，
                                                位于此 <a data-link-type="idl" data-lt="SourceBuffer"
                                                    href="#dom-sourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-99"><code>SourceBuffer</code></a>
                                                对象上。
                                                <div class="note" role="note" id="issue-container-generatedID-55">
                                                    <div role="heading" class="note-title marker" id="h-note-55"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        这应当触发 <a data-link-type="interface" data-lt="VideoTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                                        [<cite><a class="bibref" data-link-type="biblio"
                                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                                        逻辑，<a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                                                        <a data-link-type="event"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-addtrack">addtrack</a>，
                                                        并使用 <a data-link-type="interface" data-lt="TrackEvent"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，
                                                        其 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                        属性初始化为
                                                        <var data-type="VideoTrack">new video track</var>，触发于由该 <a
                                                            data-link-type="idl" href="#dom-sourcebuffer-videotracks"
                                                            class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-videotracks-5"><code>videoTracks</code></a>
                                                        属性引用的 <a data-link-type="interface" data-lt="VideoTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                                        对象上，此对象位于该 <a data-link-type="idl" data-lt="SourceBuffer"
                                                            href="#dom-sourcebuffer" class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-100"><code>SourceBuffer</code></a>
                                                        上。
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <dl class="switch">
                                                    <dt>
                                                        如果 <a data-link-type="dfn|abstract-op"
                                                            href="#parent-media-source" class="internalDFN"
                                                            id="ref-for-parent-media-source-28">父媒体源</a> 是在
                                                        <a data-link-type="interface"
                                                            data-lt="DedicatedWorkerGlobalScope"
                                                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                                        中构造的：
                                                    </dt>
                                                    <dd>
                                                        向 <a data-link-type="attribute" data-lt="[[port to main]]"
                                                            href="#dfn-port-to-main" class="internalDFN"
                                                            id="ref-for-dfn-port-to-main-8"><code>[[port to main]]</code></a>
                                                        发送一条内部 <code>create track mirror</code> 消息，
                                                        其在 <a data-link-type="interface" data-lt="Window"
                                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                                        中的隐式处理器运行以下步骤：
                                                        <ol>
                                                            <li>令 <var data-type="VideoTrack">mirrored video
                                                                    track</var> 为一个新的 <a data-link-type="interface"
                                                                    data-lt="VideoTrack"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                                                                对象。
                                                            </li>
                                                            <li>将与 <var data-type="VideoTrack">new
                                                                    video track</var> 确定的相同属性值赋予 <var
                                                                    data-type="VideoTrack">mirrored video track</var>。
                                                            </li>
                                                            <li>将 <var data-type="VideoTrack">mirrored video
                                                                    track</var> 添加到 HTMLMediaElement 的 <a
                                                                    data-link-type="attribute"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-videotracks"><code>videoTracks</code></a>
                                                                属性中。
                                                            </li>
                                                        </ol>
                                                    </dd>
                                                    <dt>
                                                        否则：
                                                    </dt>
                                                    <dd>
                                                        将 <var data-type="VideoTrack">new video track</var> 添加到
                                                        HTMLMediaElement 的 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-videotracks"><code>videoTracks</code></a>
                                                        属性中。
                                                    </dd>
                                                </dl>
                                                <div class="note" role="note" id="issue-container-generatedID-56">
                                                    <div role="heading" class="note-title marker" id="h-note-56"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        这应当触发 <a data-link-type="interface" data-lt="VideoTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                                        [<cite><a class="bibref" data-link-type="biblio"
                                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                                        逻辑，<a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                                                        <a data-link-type="event"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-addtrack">addtrack</a>，
                                                        并使用 <a data-link-type="interface" data-lt="TrackEvent"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，
                                                        其 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                        属性初始化为
                                                        <var data-type="VideoTrack">mirrored video track</var> 或 <var
                                                            data-type="VideoTrack">new video track</var>，触发于由
                                                        HTMLMediaElement 的
                                                        <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-videotracks"><code>videoTracks</code></a>
                                                        属性引用的 <a data-link-type="interface" data-lt="VideoTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#videotracklist"><code>VideoTrackList</code></a>
                                                        对象上。
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>创建一个新的 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-24">轨道缓冲区</a>，用于为该轨存储 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-29">编码帧</a>。
                                    </li>
                                    <li>将该轨的 <a data-link-type="dfn|abstract-op" href="#dfn-track-description"
                                            class="internalDFN" id="ref-for-dfn-track-description-5">轨道描述</a> 添加到该 <a
                                            data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                            id="ref-for-track-buffer-25">轨道缓冲区</a> 中。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    对于该 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                        class="internalDFN" id="ref-for-dfn-initialization-segment-28">初始化分段</a>
                                    中的每条文本轨，运行以下步骤：
                                </p>
                                <ol>
                                    <li>令 <var>text byte stream track ID</var> 为当前待处理文本轨的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                                            id="ref-for-dfn-track-id-8">Track ID</a>。
                                    </li>
                                    <li>令 <var data-type="DOMString">text language</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-29">初始化分段</a>
                                        中指定的 BCP 47 语言标记；若无语言信息，则为空字符串。
                                    </li>
                                    <li>如果 <var data-type="DOMString">text language</var> 等于 BCP 47 的 'und' 值，则将 <var
                                            data-type="DOMString">text language</var> 设为空字符串。
                                    </li>
                                    <li>令 <var data-type="DOMString">text label</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-30">初始化分段</a>
                                        中指定的标签；若无标签信息，则为空字符串。
                                    </li>
                                    <li>令 <var data-type="DOMString sequence">text kinds</var> 为该轨在 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                            class="internalDFN" id="ref-for-dfn-initialization-segment-31">初始化分段</a>
                                        中指定的一组 kind 字符串；若未提供 kind 信息，则为仅包含一个空字符串的序列。
                                    </li>
                                    <li>对于 <var data-type="DOMString sequence">text kinds</var> 中的每个值，运行以下步骤：
                                        <ol>
                                            <li>令 <var data-type="DOMString">current text kind</var> 等于本次循环中来自 <var
                                                    data-type="DOMString sequence">text kinds</var> 的该值。
                                            </li>
                                            <li>令 <var data-type="TextTrack">new text track</var> 为一个新的 <a
                                                    data-link-type="interface" data-lt="TextTrack"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                                对象。
                                            </li>
                                            <li>生成一个唯一 ID，并将其赋值给 <var data-type="TextTrack">new text track</var> 的 <a
                                                    data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-id"><code>id</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">text language</var> 赋值给 <var>new
                                                    text track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-language"><code>language</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">text label</var> 赋值给 <var>new text
                                                    track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-label"><code>label</code></a>
                                                属性。
                                            </li>
                                            <li>将 <var data-type="DOMString">current text kind</var> 赋值给 <var>new
                                                    text track</var> 的 <a data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-kind"><code>kind</code></a>
                                                属性。
                                            </li>
                                            <li>使用来自该 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-initialization-segment" class="internalDFN"
                                                    id="ref-for-dfn-initialization-segment-32">初始化分段</a> 的适当信息填充 <var
                                                    data-type="TextTrack">new text
                                                    track</var> 上的其余属性。
                                            </li>
                                            <li>如果 <var data-type="TextTrack">new text track</var> 的 <a
                                                    data-link-type="attribute"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-mode"><code>mode</code></a>
                                                属性等于
                                                <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-showing">"showing"</a></code>
                                                或
                                                <code><a href="https://html.spec.whatwg.org/multipage/media.html#dom-texttrack-hidden">"hidden"</a></code>，
                                                则将 <var data-type="boolean">active track flag</var> 设为 true。
                                            </li>
                                            <li>将 <var data-type="TextTrack">new text track</var> 添加到该 <a
                                                    data-link-type="idl" href="#dom-sourcebuffer-texttracks"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-texttracks-3"><code>textTracks</code></a>
                                                属性中，
                                                位于此 <a data-link-type="idl" data-lt="SourceBuffer"
                                                    href="#dom-sourcebuffer" class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-101"><code>SourceBuffer</code></a>
                                                对象上。
                                                <div class="note" role="note" id="issue-container-generatedID-57">
                                                    <div role="heading" class="note-title marker" id="h-note-57"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        这应当触发 <a data-link-type="interface" data-lt="TextTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                                        [<cite><a class="bibref" data-link-type="biblio"
                                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                                        逻辑，<a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                                                        <a data-link-type="event"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-addtrack">addtrack</a>，
                                                        并使用 <a data-link-type="interface" data-lt="TrackEvent"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，
                                                        其 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                        属性初始化为
                                                        <var data-type="TextTrack">new text track</var>，触发于由该 <a
                                                            data-link-type="idl" href="#dom-sourcebuffer-texttracks"
                                                            class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-texttracks-4"><code>textTracks</code></a>
                                                        属性引用的 <a data-link-type="interface" data-lt="TextTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                                        对象上，此对象位于该 <a data-link-type="idl" data-lt="SourceBuffer"
                                                            href="#dom-sourcebuffer" class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-102"><code>SourceBuffer</code></a>
                                                        上。
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <dl class="switch">
                                                    <dt>
                                                        如果 <a data-link-type="dfn|abstract-op"
                                                            href="#parent-media-source" class="internalDFN"
                                                            id="ref-for-parent-media-source-29">父媒体源</a> 是在
                                                        <a data-link-type="interface"
                                                            data-lt="DedicatedWorkerGlobalScope"
                                                            href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                                        中构造的：
                                                    </dt>
                                                    <dd>
                                                        向 <a data-link-type="attribute" data-lt="[[port to main]]"
                                                            href="#dfn-port-to-main" class="internalDFN"
                                                            id="ref-for-dfn-port-to-main-9"><code>[[port to main]]</code></a>
                                                        发送一条内部 <code>create track mirror</code> 消息，
                                                        其在 <a data-link-type="interface" data-lt="Window"
                                                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                                        中的隐式处理器运行以下步骤：
                                                        <ol>
                                                            <li>令 <var data-type="TextTrack">mirrored text track</var>
                                                                为一个新的 <a data-link-type="interface" data-lt="TextTrack"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                                                                对象。
                                                            </li>
                                                            <li>将与 <var data-type="TextTrack">new text
                                                                    track</var> 确定的相同属性值赋予 <var
                                                                    data-type="TextTrack">mirrored text track</var>。
                                                            </li>
                                                            <li>将 <var data-type="TextTrack">mirrored text track</var>
                                                                添加到 HTMLMediaElement 的 <a data-link-type="attribute"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-texttracks"><code>textTracks</code></a>
                                                                属性中。
                                                            </li>
                                                        </ol>
                                                    </dd>
                                                    <dt>
                                                        否则：
                                                    </dt>
                                                    <dd>
                                                        将 <var data-type="TextTrack">new text track</var> 添加到
                                                        HTMLMediaElement 的 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-texttracks"><code>textTracks</code></a>
                                                        属性中。
                                                    </dd>
                                                </dl>
                                                <div class="note" role="note" id="issue-container-generatedID-58">
                                                    <div role="heading" class="note-title marker" id="h-note-58"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        这应当触发 <a data-link-type="interface" data-lt="TextTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                                        [<cite><a class="bibref" data-link-type="biblio"
                                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                                        逻辑，<a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                                        <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                                                        <a data-link-type="event"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-addtrack">addtrack</a>，
                                                        并使用 <a data-link-type="interface" data-lt="TrackEvent"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#trackevent"><code>TrackEvent</code></a>，
                                                        其 <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-trackevent-track"><code>track</code></a>
                                                        属性初始化为
                                                        <var data-type="TextTrack">mirrored text track</var> 或 <var
                                                            data-type="TextTrack">new text track</var>，触发于由
                                                        HTMLMediaElement 的
                                                        <a data-link-type="attribute"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-texttracks"><code>textTracks</code></a>
                                                        属性引用的 <a data-link-type="interface" data-lt="TextTrackList"
                                                            href="https://html.spec.whatwg.org/multipage/media.html#texttracklist"><code>TextTrackList</code></a>
                                                        对象上。
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>创建一个新的 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-26">轨道缓冲区</a>，用于为该轨存储 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-30">编码帧</a>。
                                    </li>
                                    <li>将该轨的 <a data-link-type="dfn|abstract-op" href="#dfn-track-description"
                                            class="internalDFN" id="ref-for-dfn-track-description-6">轨道描述</a> 添加到该 <a
                                            data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                            id="ref-for-track-buffer-27">轨道缓冲区</a> 中。
                                    </li>
                                </ol>
                            </li>
                            <li>如果 <var data-type="boolean">active track flag</var> 等于 true，则运行以下步骤：
                                <ol>
                                    <li>将该 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-103"><code>SourceBuffer</code></a> 添加到 <a
                                            data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-activesourcebuffers-28"><code>activeSourceBuffers</code></a>。
                                    </li>
                                    <li><a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                        以 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，
                                        事件名为 <a data-link-type="idl" data-lt="addsourcebuffer"
                                            href="#dfn-addsourcebuffer" class="internalDFN"
                                            id="ref-for-dfn-addsourcebuffer-5"><code>addsourcebuffer</code></a>，触发于
                                        <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                            class="internalDFN"
                                            id="ref-for-dom-mediasource-activesourcebuffers-29"><code>activeSourceBuffers</code></a>
                                    </li>
                                </ol>
                            </li>
                            <li>将 <a data-link-type="attribute" data-lt="[[first initialization segment received flag]]"
                                    href="#dfn-first-initialization-segment-received-flag" class="internalDFN"
                                    id="ref-for-dfn-first-initialization-segment-received-flag-4"><code>[[first initialization segment received flag]]</code></a>
                                设为 true。
                            </li>
                        </ol>
                    </li>
                    <li>将 <a data-link-type="attribute" data-lt="[[pending initialization segment for changeType flag]]"
                            href="#dfn-pending-initialization-segment-for-changetype-flag" class="internalDFN"
                            id="ref-for-dfn-pending-initialization-segment-for-changetype-flag-3"><code>[[pending initialization segment for changeType flag]]</code></a>
                        设为
                        false。
                    </li>
                    <li>如果 <var data-type="boolean">active track flag</var> 等于 true，则运行以下步骤：
                    </li>
                    <li>使用 <a data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                            id="ref-for-parent-media-source-30">父媒体源</a> 的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-mirror-if-necessary" class="internalDFN"
                            id="ref-for-dfn-mirror-if-necessary-7">必要时镜像</a> 算法在 <a data-link-type="interface"
                            data-lt="Window"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                        中运行以下步骤：
                        <ol>
                            <li>如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-20"><code>readyState</code></a> 属性
                                大于 <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>，
                                则将
                                <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-21"><code>readyState</code></a> 属性设为
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                                <div class="note" role="note" id="issue-container-generatedID-59">
                                    <div role="heading" class="note-title marker" id="h-note-59" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        根据
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 逻辑，<a data-link-type="interface"
                                            data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-22"><code>readyState</code></a> 变化可能会在
                                        HTMLMediaElement 上触发事件。
                                    </p>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li>如果 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                            id="ref-for-dom-mediasource-sourcebuffers-31"><code>sourceBuffers</code></a> 中的每个对象（属于 <a
                            data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                            id="ref-for-parent-media-source-31">父媒体源</a>）
                        的 <a data-link-type="attribute" data-lt="[[first initialization segment received flag]]"
                            href="#dfn-first-initialization-segment-received-flag" class="internalDFN"
                            id="ref-for-dfn-first-initialization-segment-received-flag-5"><code>[[first initialization segment received flag]]</code></a>
                        都为 true，则使用
                        <a data-link-type="dfn|abstract-op" href="#parent-media-source" class="internalDFN"
                            id="ref-for-parent-media-source-32">父媒体源</a> 的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-mirror-if-necessary" class="internalDFN"
                            id="ref-for-dfn-mirror-if-necessary-8">必要时镜像</a> 算法在
                        <a data-link-type="interface" data-lt="Window"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                        中运行以下步骤：
                        <ol>
                            <li>如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-23"><code>readyState</code></a> 属性为
                                <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>，
                                则将 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-24"><code>readyState</code></a> 属性设为 <a
                                    data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                                <div class="note" role="note" id="issue-container-generatedID-60">
                                    <div role="heading" class="note-title marker" id="h-note-60" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        根据
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 逻辑，<a data-link-type="interface"
                                            data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-25"><code>readyState</code></a> 变化可能会在
                                        HTMLMediaElement 上触发事件。若发生从 <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_nothing"><code>HAVE_NOTHING</code></a>
                                        转变为
                                        <a data-link-type="const"
                                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>，
                                        则应当触发 HTMLMediaElement 逻辑，<a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>以
                                        <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，
                                        事件名为
                                        <a data-link-type="event"
                                            href="https://html.spec.whatwg.org/multipage/media.html#event-media-loadedmetadata">loadedmetadata</a>，
                                        触发于该媒体元素上。
                                    </p>
                                </div>
                            </li>
                        </ol>
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-coded-frame-processing">
                <div class="header-wrapper">
                    <h4 id="x5-5-8-coded-frame-processing"><bdi class="secno">5.5.8 </bdi>
                        <dfn data-export="" id="dfn-coded-frame-processing" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">编码帧处理</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-coded-frame-processing"
                        aria-label="Permalink for Section 5.5.8"></a>
                </div>

                <p>
                    当 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-31">编码帧</a> 已被 <a data-link-type="dfn|abstract-op"
                        href="#dfn-segment-parser-loop" class="internalDFN"
                        id="ref-for-dfn-segment-parser-loop-4">分段解析循环</a> 完整解析后，执行以下步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            对 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                id="ref-for-dfn-coded-frame-32">编码帧</a> 在该 <a data-link-type="dfn|abstract-op"
                                href="#dfn-media-segment" class="internalDFN" id="ref-for-dfn-media-segment-13">媒体分段</a>
                            中的每一个，执行以下步骤：
                        </p>
                        <ol>
                            <li>
                                <i>循环顶部：</i>
                                <dl class="switch">
                                    <dt>
                                        如果 <a data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                                            href="#dfn-generate-timestamps-flag" class="internalDFN"
                                            id="ref-for-dfn-generate-timestamps-flag-6"><code>[[generate timestamps flag]]</code></a>
                                        等于 true：
                                    </dt>
                                    <dd>
                                        <ol>
                                            <li>令 <var data-type="double">presentation timestamp</var> 等于 0。
                                            </li>
                                            <li>令 <var data-type="double">decode timestamp</var> 等于 0。
                                            </li>
                                        </ol>
                                    </dd>
                                    <dt>
                                        否则：
                                    </dt>
                                    <dd>
                                        <ol>
                                            <li>令 <var data-type="double">presentation timestamp</var> 为该编码帧的 <a
                                                    data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                                    class="internalDFN" id="ref-for-presentation-timestamp-18">展示时间戳</a>
                                                的双精度浮点表示（单位为秒）。
                                                <div class="note" role="note" id="issue-container-generatedID-61">
                                                    <div role="heading" class="note-title marker" id="h-note-61"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        对于定时文本帧，可能需要特殊处理来确定展示与解码时间戳，因为这些信息可能在底层格式中未显式存在，或依赖于帧的顺序。一些元数据文本轨（如
                                                        MPEG2-TS PSI 数据）可能只有隐含时间戳。这些情况的格式特定规则
                                                        <em class="rfc2119">应当</em> 位于 <a
                                                            data-link-type="dfn|abstract-op"
                                                            href="#byte-stream-format-specs" class="internalDFN"
                                                            id="ref-for-byte-stream-format-specs-6">字节流格式规范</a>
                                                        或单独的扩展规范中。
                                                    </p>
                                                </div>
                                            </li>
                                            <li>令 <var data-type="double">decode timestamp</var>
                                                为该编码帧解码时间戳的双精度浮点表示（单位为秒）。
                                                <div class="note" role="note" id="issue-container-generatedID-62">
                                                    <div role="heading" class="note-title marker" id="h-note-62"
                                                        aria-level="5"><span>注意</span></div>
                                                    <p class="">
                                                        实现不必在内部使用双精度浮点来存储时间戳。这种表示在此使用，是因为 HTML
                                                        规范中的时间戳即为这种表示。此处意在在不增加不必要复杂度的情况下阐明行为，而无需处理在底层字节流格式使用的时间戳表示中，添加
                                                        timestampOffset 可能导致时间戳回绕的问题。实现可使用任意内部时间戳表示，但添加 timestampOffset
                                                        <em class="rfc2119">应当</em> 表现得与使用双精度浮点表示时相似。
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>
                                    </dd>
                                </dl>
                            </li>
                            <li>令 <var data-type="double">frame duration</var> 为该<a data-link-type="dfn|abstract-op"
                                    data-lt="coded frame duration" href="#dfn-coded-frame-duration" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-duration-6">编码帧时长</a>的双精度浮点表示（单位为秒）。
                            </li>
                            <li>如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode" class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-mode-11"><code>mode</code></a> 等于 "<a
                                    data-link-type="idl" href="#dom-appendmode-sequence" class="internalDFN"
                                    id="ref-for-dom-appendmode-sequence-10"><code>sequence</code></a>" 且
                                <a data-link-type="attribute" data-lt="[[group start timestamp]]"
                                    href="#dfn-group-start-timestamp" class="internalDFN"
                                    id="ref-for-dfn-group-start-timestamp-4"><code>[[group start timestamp]]</code></a>
                                已设置，则执行以下步骤：
                                <ol>
                                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-timestampoffset"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-timestampoffset-6"><code>timestampOffset</code></a>
                                        设为 <a data-link-type="attribute" data-lt="[[group start timestamp]]"
                                            href="#dfn-group-start-timestamp" class="internalDFN"
                                            id="ref-for-dfn-group-start-timestamp-5"><code>[[group start timestamp]]</code></a>
                                        减去 <var data-type="double">presentation timestamp</var>。
                                    </li>
                                    <li>将 <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                                            href="#dfn-group-end-timestamp" class="internalDFN"
                                            id="ref-for-dfn-group-end-timestamp-4"><code>[[group end timestamp]]</code></a>
                                        设为
                                        <a data-link-type="attribute" data-lt="[[group start timestamp]]"
                                            href="#dfn-group-start-timestamp" class="internalDFN"
                                            id="ref-for-dfn-group-start-timestamp-6"><code>[[group start timestamp]]</code></a>。
                                    </li>
                                    <li>将所有 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                            id="ref-for-track-buffer-28">轨道缓冲区</a> 上的 <a
                                            data-link-type="dfn|abstract-op" href="#need-RAP-flag" class="internalDFN"
                                            id="ref-for-need-RAP-flag-3">需要随机访问点标志</a> 设为 true。
                                    </li>
                                    <li>取消设置 <a data-link-type="attribute" data-lt="[[group start timestamp]]"
                                            href="#dfn-group-start-timestamp" class="internalDFN"
                                            id="ref-for-dfn-group-start-timestamp-7"><code>[[group start timestamp]]</code></a>。
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    如果 <a data-link-type="idl" href="#dom-sourcebuffer-timestampoffset"
                                        class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-timestampoffset-7"><code>timestampOffset</code></a>
                                    不为 0，则执行以下步骤：
                                </p>
                                <ol>
                                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-timestampoffset"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-timestampoffset-8"><code>timestampOffset</code></a>
                                        加到 <var data-type="double">presentation timestamp</var> 上。
                                    </li>
                                    <li>将 <a data-link-type="idl" href="#dom-sourcebuffer-timestampoffset"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-timestampoffset-9"><code>timestampOffset</code></a>
                                        加到 <var data-type="double">decode timestamp</var> 上。
                                    </li>
                                </ol>
                            </li>
                            <li>令 <var>track buffer</var> 等于将把该编码帧添加到的 <a data-link-type="dfn|abstract-op"
                                    href="#track-buffer" class="internalDFN" id="ref-for-track-buffer-29">轨道缓冲区</a>。
                            </li>
                            <li>
                                <dl class="switch">
                                    <dt>
                                        如果 <a data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                            class="internalDFN" id="ref-for-last-decode-timestamp-2">最后解码时间戳</a>（属于
                                        <var>track buffer</var>）已设置，且 <var data-type="double">decode timestamp</var>
                                        小于 <a data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                            class="internalDFN" id="ref-for-last-decode-timestamp-3">最后解码时间戳</a>：
                                    </dt>
                                    <dd>
                                        或
                                    </dd>
                                    <dt>
                                        如果 <a data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                            class="internalDFN" id="ref-for-last-decode-timestamp-4">最后解码时间戳</a>（属于
                                        <var>track buffer</var>）已设置，且
                                        <var data-type="double">decode timestamp</var> 与 <a
                                            data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                            class="internalDFN" id="ref-for-last-decode-timestamp-5">最后解码时间戳</a> 的差值大于
                                        <a data-link-type="dfn|abstract-op" href="#last-frame-duration"
                                            class="internalDFN" id="ref-for-last-frame-duration-2">最后帧持续时间</a> 的 2 倍：
                                    </dt>
                                    <dd>
                                        <ol>
                                            <li>
                                                <dl class="switch">
                                                    <dt>
                                                        如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode"
                                                            class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-mode-12"><code>mode</code></a>
                                                        等于 "<a data-link-type="idl" href="#dom-appendmode-segments"
                                                            class="internalDFN"
                                                            id="ref-for-dom-appendmode-segments-4"><code>segments</code></a>"：
                                                    </dt>
                                                    <dd>
                                                        将 <a data-link-type="attribute"
                                                            data-lt="[[group end timestamp]]"
                                                            href="#dfn-group-end-timestamp" class="internalDFN"
                                                            id="ref-for-dfn-group-end-timestamp-5"><code>[[group end timestamp]]</code></a>
                                                        设为 <var>presentation
                                                            timestamp</var>。
                                                    </dd>
                                                    <dt>
                                                        如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode"
                                                            class="internalDFN"
                                                            id="ref-for-dom-sourcebuffer-mode-13"><code>mode</code></a>
                                                        等于 "<a data-link-type="idl" href="#dom-appendmode-sequence"
                                                            class="internalDFN"
                                                            id="ref-for-dom-appendmode-sequence-11"><code>sequence</code></a>"：
                                                    </dt>
                                                    <dd>
                                                        将 <a data-link-type="attribute"
                                                            data-lt="[[group start timestamp]]"
                                                            href="#dfn-group-start-timestamp" class="internalDFN"
                                                            id="ref-for-dfn-group-start-timestamp-8"><code>[[group start timestamp]]</code></a>
                                                        设为
                                                        <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                                                            href="#dfn-group-end-timestamp" class="internalDFN"
                                                            id="ref-for-dfn-group-end-timestamp-6"><code>[[group end timestamp]]</code></a>。
                                                    </dd>
                                                </dl>
                                            </li>
                                            <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                                    class="internalDFN" id="ref-for-track-buffer-30">轨道缓冲区</a> 上的 <a
                                                    data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                                    class="internalDFN"
                                                    id="ref-for-last-decode-timestamp-6">最后解码时间戳</a>。
                                            </li>
                                            <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                                    class="internalDFN" id="ref-for-track-buffer-31">轨道缓冲区</a> 上的 <a
                                                    data-link-type="dfn|abstract-op" href="#last-frame-duration"
                                                    class="internalDFN" id="ref-for-last-frame-duration-3">最后帧持续时间</a>。
                                            </li>
                                            <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                                    class="internalDFN" id="ref-for-track-buffer-32">轨道缓冲区</a> 上的 <a
                                                    data-link-type="dfn|abstract-op" href="#highest-end-timestamp"
                                                    class="internalDFN"
                                                    id="ref-for-highest-end-timestamp-2">最高结束时间戳</a>。
                                            </li>
                                            <li>将所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                                    class="internalDFN" id="ref-for-track-buffer-33">轨道缓冲区</a> 上的 <a
                                                    data-link-type="dfn|abstract-op" href="#need-RAP-flag"
                                                    class="internalDFN" id="ref-for-need-RAP-flag-4">需要随机访问点标志</a> 设为
                                                true。
                                            </li>
                                            <li>跳转至上方的 <i>循环顶部</i> 步骤，重新开始处理当前 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-coded-frame" class="internalDFN"
                                                    id="ref-for-dfn-coded-frame-33">编码帧</a>。
                                            </li>
                                        </ol>
                                    </dd>
                                    <dt>
                                        否则：
                                    </dt>
                                    <dd>
                                        继续。
                                    </dd>
                                </dl>
                            </li>
                            <li>令 <var data-type="double">frame end timestamp</var> 等于 <var
                                    data-type="double">presentation timestamp</var> 与
                                <var data-type="double">frame duration</var> 之和。
                            </li>
                            <li>如果 <var data-type="double">presentation timestamp</var> 小于 <a data-link-type="idl"
                                    href="#dom-sourcebuffer-appendwindowstart" class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-appendwindowstart-5"><code>appendWindowStart</code></a>，
                                则将 <a data-link-type="dfn|abstract-op" href="#need-RAP-flag" class="internalDFN"
                                    id="ref-for-need-RAP-flag-5">需要随机访问点标志</a>
                                设为 true，丢弃该编码帧，并跳转到循环顶部开始处理下一帧编码帧。
                                <div class="note" role="note" id="issue-container-generatedID-63">
                                    <div role="heading" class="note-title marker" id="h-note-63" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        一些实现 <em class="rfc2119">可以</em> 选择收集这些 <var data-type="double">presentation
                                            timestamp</var> 小于 <a data-link-type="idl"
                                            href="#dom-sourcebuffer-appendwindowstart" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-appendwindowstart-6"><code>appendWindowStart</code></a>
                                        的编码帧，并用它们在第一个 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                            class="internalDFN" id="ref-for-presentation-timestamp-19">展示时间戳</a> 大于等于 <a
                                            data-link-type="idl" href="#dom-sourcebuffer-appendwindowstart"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-appendwindowstart-7"><code>appendWindowStart</code></a>
                                        的编码帧处生成拼接，即使该帧并非 <a data-link-type="dfn|abstract-op" href="#random-access-point"
                                            class="internalDFN"
                                            id="ref-for-random-access-point-4">随机访问点</a>。支持此能力需要多个解码器或快于实时的解码，因此目前不作为规范性要求。
                                    </p>
                                </div>
                            </li>
                            <li>如果 <var data-type="double">frame end timestamp</var> 大于 <a data-link-type="idl"
                                    href="#dom-sourcebuffer-appendwindowend" class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-appendwindowend-5"><code>appendWindowEnd</code></a>，
                                则
                                将 <a data-link-type="dfn|abstract-op" href="#need-RAP-flag" class="internalDFN"
                                    id="ref-for-need-RAP-flag-6">需要随机访问点标志</a> 设为 true，丢弃该编码帧，并跳转到循环顶部开始处理下一帧编码帧。
                                <div class="note" role="note" id="issue-container-generatedID-64">
                                    <div role="heading" class="note-title marker" id="h-note-64" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        一些实现 <em class="rfc2119">可以</em> 选择收集 <var>presentation
                                            timestamp</var> 小于 <a data-link-type="idl"
                                            href="#dom-sourcebuffer-appendwindowend" class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-appendwindowend-6"><code>appendWindowEnd</code></a>
                                        且 <var data-type="double">frame end timestamp</var>
                                        大于 <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowend"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-appendwindowend-7"><code>appendWindowEnd</code></a>
                                        的编码帧，并利用它们在收集时位于追加窗口内的编码帧部分与稍后处理、仅部分重叠这些已收集编码帧末端的帧的起始部分之间生成跨越拼接。支持此能力需要多个解码器或快于实时的解码，因此目前不作为规范性要求。结合收集跨越
                                        <a data-link-type="idl" href="#dom-sourcebuffer-appendwindowstart"
                                            class="internalDFN"
                                            id="ref-for-dom-sourcebuffer-appendwindowstart-8"><code>appendWindowStart</code></a>
                                        的编码帧，实现因此 <em class="rfc2119">可以</em> 支持无缝音频拼接。
                                    </p>
                                </div>
                            </li>
                            <li>如果 <var>track
                                    buffer</var> 上的 <a data-link-type="dfn|abstract-op" href="#need-RAP-flag"
                                    class="internalDFN" id="ref-for-need-RAP-flag-7">需要随机访问点标志</a> 等于 true，则执行以下步骤：
                                <ol>
                                    <li>如果该编码帧不是一个 <a data-link-type="dfn|abstract-op" href="#random-access-point"
                                            class="internalDFN"
                                            id="ref-for-random-access-point-5">随机访问点</a>，则丢弃该编码帧，并跳转到循环顶部开始处理下一帧编码帧。
                                    </li>
                                    <li>将 <var>track buffer</var> 上的 <a data-link-type="dfn|abstract-op"
                                            href="#need-RAP-flag" class="internalDFN"
                                            id="ref-for-need-RAP-flag-8">需要随机访问点标志</a> 设为 false。
                                    </li>
                                </ol>
                            </li>
                            <li>令 <var>spliced audio frame</var> 为一个未设值的变量，用于保存音频拼接信息。
                            </li>
                            <li>令 <var>spliced timed text frame</var> 为一个未设值的变量，用于保存定时文本拼接信息。
                            </li>
                            <li>如果 <a data-link-type="dfn|abstract-op" href="#last-decode-timestamp" class="internalDFN"
                                    id="ref-for-last-decode-timestamp-7">最后解码时间戳</a>（属于 <var>track
                                    buffer</var>）未设置，且 <var>presentation
                                    timestamp</var> 落在 <a data-link-type="dfn|abstract-op" href="#presentation-interval"
                                    class="internalDFN" id="ref-for-presentation-interval-1">展示区间</a> 内（此区间属于 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-34">编码帧</a>）
                                且该编码帧位于 <var>track buffer</var> 中，则执行以下步骤：
                                <ol>
                                    <li>令 <var>overlapped frame</var> 为 <var>track buffer</var> 中满足上述条件的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-35">编码帧</a>。
                                    </li>
                                    <li>
                                        <dl class="switch">
                                            <dt>
                                                如果 <var>track buffer</var> 包含音频 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-coded-frame" class="internalDFN"
                                                    id="ref-for-dfn-coded-frame-36">编码帧</a>：
                                            </dt>
                                            <dd>
                                                运行 <a data-link-type="dfn|abstract-op" href="#dfn-audio-splice-frame"
                                                    class="internalDFN" id="ref-for-dfn-audio-splice-frame-1">音频拼接帧</a>
                                                算法，若返回了拼接帧，则将其赋给 <var>spliced audio frame</var>。
                                            </dd>
                                            <dt>
                                                如果 <var>track buffer</var> 包含视频 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-coded-frame" class="internalDFN"
                                                    id="ref-for-dfn-coded-frame-37">编码帧</a>：
                                            </dt>
                                            <dd>
                                                <ol>
                                                    <li>令 <var data-type="double">remove window timestamp</var> 等于
                                                        <var>overlapped frame</var> 的
                                                        <a data-link-type="dfn|abstract-op"
                                                            href="#presentation-timestamp" class="internalDFN"
                                                            id="ref-for-presentation-timestamp-20">展示时间戳</a> 加 1 微秒。
                                                    </li>
                                                    <li>如果 <var data-type="double">presentation timestamp</var>
                                                        小于 <var>remove window
                                                            timestamp</var>，则从 <var>track buffer</var> 移除
                                                        <var>overlapped frame</var>。
                                                        <div class="note" role="note"
                                                            id="issue-container-generatedID-65">
                                                            <div role="heading" class="note-title marker" id="h-note-65"
                                                                aria-level="5"><span>注意</span></div>
                                                            <p class="">
                                                                这是为了补偿在双精度浮点与有理数之间往返转换时可能出现的帧时间戳计算的微小误差。该容差允许在新帧的起始时间与已存在帧的起始时间相差不超过
                                                                1 微秒时，用新帧替换已存在帧。稍早于已存在帧到来的帧将由下方的移除步骤处理。
                                                            </p>
                                                        </div>
                                                    </li>
                                                </ol>
                                            </dd>
                                            <dt>
                                                如果 <var>track buffer</var> 包含定时文本 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-coded-frame" class="internalDFN"
                                                    id="ref-for-dfn-coded-frame-38">编码帧</a>：
                                            </dt>
                                            <dd>
                                                运行 <a data-link-type="dfn|abstract-op" href="#dfn-text-splice-frame"
                                                    class="internalDFN" id="ref-for-dfn-text-splice-frame-1">文本拼接帧</a>
                                                算法，若返回了拼接帧，则将其赋给 <var>spliced timed text frame</var>。
                                            </dd>
                                        </dl>
                                    </li>
                                </ol>
                            </li>
                            <li>移除 <var>track buffer</var> 中已有的编码帧：
                                <dl class="switch">
                                    <dt>
                                        如果 <a data-link-type="dfn|abstract-op" href="#highest-end-timestamp"
                                            class="internalDFN" id="ref-for-highest-end-timestamp-3">最高结束时间戳</a>（属于
                                        <var>track buffer</var>）未设置：
                                    </dt>
                                    <dd>
                                        从 <var>track buffer</var> 中移除所有 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-39">编码帧</a>，这些帧的 <a
                                            data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                            class="internalDFN" id="ref-for-presentation-timestamp-21">展示时间戳</a> 大于等于
                                        <var data-type="double">presentation timestamp</var> 且小于
                                        <var data-type="double">frame end timestamp</var>。
                                    </dd>
                                    <dt>
                                        如果 <a data-link-type="dfn|abstract-op" href="#highest-end-timestamp"
                                            class="internalDFN" id="ref-for-highest-end-timestamp-4">最高结束时间戳</a>（属于
                                        <var>track buffer</var>）已设置且小于等于
                                        <var data-type="double">presentation timestamp</var>：
                                    </dt>
                                    <dd>
                                        从 <var>track buffer</var> 中移除所有 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-40">编码帧</a>，这些帧的 <a
                                            data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                            class="internalDFN" id="ref-for-presentation-timestamp-22">展示时间戳</a> 大于等于 <a
                                            data-link-type="dfn|abstract-op" href="#highest-end-timestamp"
                                            class="internalDFN" id="ref-for-highest-end-timestamp-5">最高结束时间戳</a> 且小于
                                        <var data-type="double">frame end timestamp</var>。
                                    </dd>
                                </dl>
                            </li>
                            <li>通过移除在前两个步骤中被移除的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame"
                                    class="internalDFN" id="ref-for-dfn-coded-frame-41">编码帧</a> 的所有可能解码依赖来清理依赖关系：从
                                <var>track buffer</var> 中移除位于上述已移除帧与这些帧之后的下一个
                                <a data-link-type="dfn|abstract-op" href="#random-access-point" class="internalDFN"
                                    id="ref-for-random-access-point-6">随机访问点</a>
                                之间的所有 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-42">编码帧</a>。
                                <div class="note" role="note" id="issue-container-generatedID-66">
                                    <div role="heading" class="note-title marker" id="h-note-66" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        一直移除到下一个 <a data-link-type="dfn|abstract-op" href="#random-access-point"
                                            class="internalDFN" id="ref-for-random-access-point-7">随机访问点</a>
                                        是对解码依赖的保守估计，因为这假设在被移除帧与下一个随机访问点之间的所有帧都依赖于已被移除的那些帧。
                                    </p>
                                </div>
                            </li>
                            <li>
                                <dl class="switch">
                                    <dt>
                                        如果 <var>spliced audio frame</var> 已设置：
                                    </dt>
                                    <dd>
                                        将 <var>spliced audio frame</var> 添加到 <var>track buffer</var>。
                                    </dd>
                                    <dt>
                                        如果 <var>spliced timed text frame</var> 已设置：
                                    </dt>
                                    <dd>
                                        将 <var>spliced timed text frame</var> 添加到 <var>track buffer</var>。
                                    </dd>
                                    <dt>
                                        否则：
                                    </dt>
                                    <dd>
                                        将具有 <var data-type="double">presentation timestamp</var>、<var>decode
                                            timestamp</var> 和 <var data-type="double">frame duration</var> 的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                            id="ref-for-dfn-coded-frame-44">编码帧</a> 添加到
                                        <var>track buffer</var>。
                                    </dd>
                                </dl>
                            </li>
                            <li>将 <var>track buffer</var> 的 <a data-link-type="dfn|abstract-op"
                                    href="#last-decode-timestamp" class="internalDFN"
                                    id="ref-for-last-decode-timestamp-8">最后解码时间戳</a>
                                设为 <var data-type="double">decode timestamp</var>。
                            </li>
                            <li>将 <var>track
                                    buffer</var> 的 <a data-link-type="dfn|abstract-op" href="#last-frame-duration"
                                    class="internalDFN" id="ref-for-last-frame-duration-4">最后帧持续时间</a>
                                设为 <var data-type="double">frame duration</var>。
                            </li>
                            <li>如果 <a data-link-type="dfn|abstract-op" href="#highest-end-timestamp" class="internalDFN"
                                    id="ref-for-highest-end-timestamp-6">最高结束时间戳</a>（属于 <var>track
                                    buffer</var>）未设置，或 <var>frame end
                                    timestamp</var> 大于 <a data-link-type="dfn|abstract-op" href="#highest-end-timestamp"
                                    class="internalDFN" id="ref-for-highest-end-timestamp-7">最高结束时间戳</a>，则将 <a
                                    data-link-type="dfn|abstract-op" href="#highest-end-timestamp" class="internalDFN"
                                    id="ref-for-highest-end-timestamp-8">最高结束时间戳</a>（属于 <var>track
                                    buffer</var>）设为 <var data-type="double">frame end timestamp</var>。
                                <div class="note" role="note" id="issue-container-generatedID-67">
                                    <div role="heading" class="note-title marker" id="h-note-67" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        需要“大于”检查，因为编码帧之间的双向预测可能导致 <var data-type="double">presentation timestamp</var>
                                        不是单调递增的，即使解码时间戳是单调递增的。
                                    </p>
                                </div>
                            </li>
                            <li>如果 <var data-type="double">frame end timestamp</var> 大于 <a data-link-type="attribute"
                                    data-lt="[[group end timestamp]]" href="#dfn-group-end-timestamp"
                                    class="internalDFN"
                                    id="ref-for-dfn-group-end-timestamp-7"><code>[[group end timestamp]]</code></a>，
                                则将 <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                                    href="#dfn-group-end-timestamp" class="internalDFN"
                                    id="ref-for-dfn-group-end-timestamp-8"><code>[[group end timestamp]]</code></a>
                                设为 <var>frame
                                    end timestamp</var>。
                            </li>
                            <li>如果 <a data-link-type="attribute" data-lt="[[generate timestamps flag]]"
                                    href="#dfn-generate-timestamps-flag" class="internalDFN"
                                    id="ref-for-dfn-generate-timestamps-flag-7"><code>[[generate timestamps flag]]</code></a>
                                等于 true，则将
                                <a data-link-type="idl" href="#dom-sourcebuffer-timestampoffset" class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-timestampoffset-10"><code>timestampOffset</code></a>
                                设为 <var data-type="double">frame end timestamp</var>。
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                id="ref-for-dom-readystate-26"><code>readyState</code></a> 属性为
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>
                            且新的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                id="ref-for-dfn-coded-frame-45">编码帧</a> 使
                            <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                            在当前播放位置拥有一个 <a data-link-type="interface" data-lt="TimeRanges"
                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>，
                            则将 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                id="ref-for-dom-readystate-27"><code>readyState</code></a> 属性设为
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-68">
                            <div role="heading" class="note-title marker" id="h-note-68" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                根据
                                <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                        title="HTML Standard">HTML</a></cite>] 逻辑，<a data-link-type="interface"
                                    data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-28"><code>readyState</code></a> 变化可能在该元素上触发事件。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                id="ref-for-dom-readystate-29"><code>readyState</code></a> 属性为
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                            且新的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                id="ref-for-dfn-coded-frame-46">编码帧</a> 使
                            <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                            拥有一个 <a data-link-type="interface" data-lt="TimeRanges"
                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>，
                            该 TimeRanges 覆盖当前播放位置并延伸至当前播放位置之后一段时间，则将 <a data-link-type="interface"
                                data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                id="ref-for-dom-readystate-30"><code>readyState</code></a>
                            属性设为 <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-69">
                            <div role="heading" class="note-title marker" id="h-note-69" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                根据
                                <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                        title="HTML Standard">HTML</a></cite>] 逻辑，<a data-link-type="interface"
                                    data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-31"><code>readyState</code></a> 变化可能在该元素上触发事件。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            如果 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                id="ref-for-dom-readystate-32"><code>readyState</code></a> 属性为
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>
                            且新的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                id="ref-for-dfn-coded-frame-47">编码帧</a> 使
                            <a data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                            拥有一个 <a data-link-type="interface" data-lt="TimeRanges"
                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>，
                            该 TimeRanges 覆盖当前播放位置并具有<a data-link-type="dfn|abstract-op" href="#enough-data"
                                class="internalDFN" id="ref-for-enough-data-3">足够数据以确保不间断播放</a>，则将 <a
                                data-link-type="interface" data-lt="HTMLMediaElement"
                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                            的
                            <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                id="ref-for-dom-readystate-33"><code>readyState</code></a>
                            属性设为 <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-70">
                            <div role="heading" class="note-title marker" id="h-note-70" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                根据
                                <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                        title="HTML Standard">HTML</a></cite>] 逻辑，<a data-link-type="interface"
                                    data-lt="HTMLMediaElement"
                                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                的
                                <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                    id="ref-for-dom-readystate-34"><code>readyState</code></a> 变化可能在该元素上触发事件。
                            </p>
                        </div>
                    </li>
                    <li>如果该 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                            id="ref-for-dfn-media-segment-14">媒体分段</a> 包含超出当前 <a data-link-type="idl"
                            href="#dom-mediasource-duration" class="internalDFN"
                            id="ref-for-dom-mediasource-duration-10"><code>duration</code></a> 的数据，
                        则运行 <a data-link-type="dfn|abstract-op" href="#dfn-duration-change" class="internalDFN"
                            id="ref-for-dfn-duration-change-6">时长变更</a> 算法，并将 <var data-type="unrestricted double">new
                            duration</var> 设为当前时长与 <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                            href="#dfn-group-end-timestamp" class="internalDFN"
                            id="ref-for-dfn-group-end-timestamp-9"><code>[[group end timestamp]]</code></a> 的最大值。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-coded-frame-removal">
                <div class="header-wrapper">
                    <h4 id="x5-5-9-coded-frame-removal"><bdi class="secno">5.5.9 </bdi>
                        <dfn id="dfn-coded-frame-removal" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">编码帧移除</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-coded-frame-removal"
                        aria-label="Permalink for Section 5.5.9"></a>
                </div>

                <p>
                    当需要从 SourceBuffer 移除特定时间范围的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame"
                        class="internalDFN" id="ref-for-dfn-coded-frame-48">编码帧</a> 时，请按照以下步骤操作：
                </p>
                <ol>
                    <li>令 <var data-type="double">start</var> 为移除范围的起始 <a data-link-type="dfn|abstract-op"
                            href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-23">展示时间戳</a>。
                    </li>
                    <li>令 <var data-type="unrestricted double">end</var> 为移除范围的结束 <a data-link-type="dfn|abstract-op"
                            href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-24">展示时间戳</a>。
                    </li>
                    <li>
                        <p>
                            对该 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN" id="ref-for-dom-sourcebuffer-104"><code>SourceBuffer</code></a> 中的每个
                            <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                id="ref-for-track-buffer-34">轨道缓冲区</a>，运行以下步骤：
                        </p>
                        <ol>
                            <li>令 <var data-type="unrestricted double">remove end timestamp</var> 为当前 <a
                                    data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                                    id="ref-for-dom-mediasource-duration-11"><code>duration</code></a> 的值。
                            </li>
                            <li>
                                <p>
                                    如果此 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                        id="ref-for-track-buffer-35">轨道缓冲区</a> 有一个大于等于 <var
                                        data-type="unrestricted double">end</var> 的 <a data-link-type="dfn|abstract-op"
                                        href="#random-access-point" class="internalDFN"
                                        id="ref-for-random-access-point-8">随机访问点</a>时间戳，则将 <var
                                        data-type="unrestricted double">remove end timestamp</var>
                                    更新为该随机访问点时间戳。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-71">
                                    <div role="heading" class="note-title marker" id="h-note-71" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        不同轨道的随机访问点时间戳可能不同，因为同一轨道内编码帧的依赖关系通常不同于另一轨道内的依赖关系。
                                    </p>
                                </div>
                            </li>
                            <li>从该 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                    id="ref-for-track-buffer-36">轨道缓冲区</a> 中移除所有起始时间戳大于等于 <var
                                    data-type="double">start</var> 且小于 <var>remove end timestamp</var> 的媒体数据。
                                <ol>
                                    <li>
                                        <p>
                                            对每个被移除的帧，如果该帧的 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-decode-timestamp" class="internalDFN"
                                                id="ref-for-dfn-decode-timestamp-3">解码时间戳</a> 等于该帧轨道的 <a
                                                data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                                class="internalDFN"
                                                id="ref-for-last-decode-timestamp-9">最后解码时间戳</a>，则运行以下步骤：
                                        </p>
                                        <dl class="switch">
                                            <dt>
                                                如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-mode-14"><code>mode</code></a> 等于
                                                "<a data-link-type="idl" href="#dom-appendmode-segments"
                                                    class="internalDFN"
                                                    id="ref-for-dom-appendmode-segments-5"><code>segments</code></a>"：
                                            </dt>
                                            <dd>
                                                将 <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                                                    href="#dfn-group-end-timestamp" class="internalDFN"
                                                    id="ref-for-dfn-group-end-timestamp-10"><code>[[group end timestamp]]</code></a>
                                                设置为 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                                    class="internalDFN"
                                                    id="ref-for-presentation-timestamp-25">展示时间戳</a>。
                                            </dd>
                                            <dt>
                                                如果 <a data-link-type="idl" href="#dom-sourcebuffer-mode"
                                                    class="internalDFN"
                                                    id="ref-for-dom-sourcebuffer-mode-15"><code>mode</code></a> 等于
                                                "<a data-link-type="idl" href="#dom-appendmode-sequence"
                                                    class="internalDFN"
                                                    id="ref-for-dom-appendmode-sequence-12"><code>sequence</code></a>"：
                                            </dt>
                                            <dd>
                                                将 <a data-link-type="attribute" data-lt="[[group start timestamp]]"
                                                    href="#dfn-group-start-timestamp" class="internalDFN"
                                                    id="ref-for-dfn-group-start-timestamp-9"><code>[[group start timestamp]]</code></a>
                                                设置为
                                                <a data-link-type="attribute" data-lt="[[group end timestamp]]"
                                                    href="#dfn-group-end-timestamp" class="internalDFN"
                                                    id="ref-for-dfn-group-end-timestamp-11"><code>[[group end timestamp]]</code></a>
                                                的值。
                                            </dd>
                                        </dl>
                                    </li>
                                    <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-37">轨道缓冲区</a> 上的 <a
                                            data-link-type="dfn|abstract-op" href="#last-decode-timestamp"
                                            class="internalDFN" id="ref-for-last-decode-timestamp-10">最后解码时间戳</a>。
                                    </li>
                                    <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-38">轨道缓冲区</a> 上的 <a
                                            data-link-type="dfn|abstract-op" href="#last-frame-duration"
                                            class="internalDFN" id="ref-for-last-frame-duration-5">最后帧持续时间</a>。
                                    </li>
                                    <li>取消所有 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                                            class="internalDFN" id="ref-for-track-buffer-39">轨道缓冲区</a> 上的 <a
                                            data-link-type="dfn|abstract-op" href="#highest-end-timestamp"
                                            class="internalDFN" id="ref-for-highest-end-timestamp-9">最高结束时间戳</a>。
                                    </li>
                                    <li>将所有 <a data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                            id="ref-for-track-buffer-40">轨道缓冲区</a> 上的 <a
                                            data-link-type="dfn|abstract-op" href="#need-RAP-flag" class="internalDFN"
                                            id="ref-for-need-RAP-flag-9">需要随机访问点标志</a> 设置为 true。
                                    </li>
                                </ol>
                            </li>
                            <li>通过移除在上一步中被移除的 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame"
                                    class="internalDFN" id="ref-for-dfn-coded-frame-50">编码帧</a> 的所有可能解码依赖来清理依赖关系：从该 <a
                                    data-link-type="dfn|abstract-op" href="#track-buffer" class="internalDFN"
                                    id="ref-for-track-buffer-41">轨道缓冲区</a> 中移除位于上述已移除帧与其后的下一个 <a
                                    data-link-type="dfn|abstract-op" href="#random-access-point" class="internalDFN"
                                    id="ref-for-random-access-point-9">随机访问点</a> 之间的所有 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-51">编码帧</a>。
                                <div class="note" role="note" id="issue-container-generatedID-72">
                                    <div role="heading" class="note-title marker" id="h-note-72" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        一直移除到下一个 <a data-link-type="dfn|abstract-op" href="#random-access-point"
                                            class="internalDFN"
                                            id="ref-for-random-access-point-10">随机访问点</a>，是对解码依赖的保守估计，因为这假设在被移除帧与下一个随机访问点之间的所有帧都依赖于已被移除的那些帧。
                                    </p>
                                </div>
                            </li>
                            <li>
                                <p>
                                    如果此对象在 <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                        class="internalDFN"
                                        id="ref-for-dom-mediasource-activesourcebuffers-30"><code>activeSourceBuffers</code></a>
                                    中，
                                    当前播放位置大于等于 <var data-type="double">start</var> 且小于 <var
                                        data-type="unrestricted double">remove end timestamp</var>，
                                    并且 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                    的
                                    <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                        id="ref-for-dom-readystate-35"><code>readyState</code></a> 大于
                                    <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>，
                                    则将 <a data-link-type="interface" data-lt="HTMLMediaElement"
                                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                    的
                                    <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                        id="ref-for-dom-readystate-36"><code>readyState</code></a> 属性设为 <a
                                        data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>，
                                    并暂停播放。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-73">
                                    <div role="heading" class="note-title marker" id="h-note-73" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        根据
                                        <code><a href="https://html.spec.whatwg.org/multipage/media.html#ready-states">HTMLMediaElement ready states</a></code>
                                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>] 逻辑，<a data-link-type="interface"
                                            data-lt="HTMLMediaElement"
                                            href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                        的
                                        <a data-link-type="idl" href="#dom-readystate" class="internalDFN"
                                            id="ref-for-dom-readystate-37"><code>readyState</code></a> 变化可能会在该元素上触发事件。
                                    </p>
                                </div>
                                <div class="note" role="note" id="issue-container-generatedID-74">
                                    <div role="heading" class="note-title marker" id="h-note-74" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        此状态变化发生是因为当前播放位置的媒体数据被移除了。只有在为<a
                                            href="https://html.spec.whatwg.org/multipage/media.html#current-playback-position">当前播放位置</a>追加了媒体数据，或发生了
                                        <a href="#active-source-buffer-changes"
                                            data-matched-text="[[[#active-source-buffer-changes]]]" class="sec-ref"><bdi
                                                class="secno">3.15.5 </bdi>
                                            <span>选中/启用轨道状态变化</span></a>，播放才能继续。
                                    </p>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li>如果 <a data-link-type="attribute" data-lt="[[buffer full flag]]" href="#dfn-buffer-full-flag"
                            class="internalDFN"
                            id="ref-for-dfn-buffer-full-flag-3"><code>[[buffer full flag]]</code></a> 等于 true
                        且此对象已准备好接受更多字节，
                        则将 <a data-link-type="attribute" data-lt="[[buffer full flag]]" href="#dfn-buffer-full-flag"
                            class="internalDFN"
                            id="ref-for-dfn-buffer-full-flag-4"><code>[[buffer full flag]]</code></a> 设为 false。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-coded-frame-eviction">
                <div class="header-wrapper">
                    <h4 id="x5-5-10-coded-frame-eviction"><bdi class="secno">5.5.10 </bdi>
                        <dfn id="dfn-coded-frame-eviction" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">编码帧清除</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-coded-frame-eviction"
                        aria-label="Permalink for Section 5.5.10"></a>
                </div>

                <p>
                    当向此 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-105"><code>SourceBuffer</code></a> 追加新数据时，运行此算法以释放空间。
                </p>
                <ol>
                    <li>令 <var data-type="BufferSource">new data</var> 为即将追加到此 SourceBuffer 的数据。
                        <div class="issue" id="issue-container-number-289">
                            <div role="heading" class="issue-title marker" id="h-issue-1" aria-level="5"><a
                                    href="https://github.com/w3c/media-source/issues/289"><span
                                        class="issue-number">Issue 289</span></a><span class="issue-label">:
                                    编辑？编码帧清除算法需要注意“缓冲区满标志”可能会根据 |new data| 立即更新</span></div>
                            <div class="">
                                <p>
                                    需要在此处认识到，实现 <em class="rfc2119">可以</em> 决定在预测处理 <a data-link-type="attribute"
                                        data-lt="[[input buffer]]" href="#dfn-input-buffer" class="internalDFN"
                                        id="ref-for-dfn-input-buffer-14"><code>[[input buffer]]</code></a> 中现有字节和 <var
                                        data-type="BufferSource">new data</var> 后
                                    会超出 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                        class="internalDFN"
                                        id="ref-for-dom-sourcebuffer-106"><code>SourceBuffer</code></a> 容量时，立即将 <a
                                        data-link-type="attribute" data-lt="[[buffer full flag]]"
                                        href="#dfn-buffer-full-flag" class="internalDFN"
                                        id="ref-for-dfn-buffer-full-flag-5"><code>[[buffer full flag]]</code></a> 设为
                                    true。
                                    此步骤使实现能更主动地在接收可能导致溢出的 <var data-type="BufferSource">new data</var>
                                    之前进行推回。例如，实际上至少已有一个实现采用此方法。
                                </p>
                            </div>
                        </div>
                    </li>
                    <li>如果 <a data-link-type="attribute" data-lt="[[buffer full flag]]" href="#dfn-buffer-full-flag"
                            class="internalDFN"
                            id="ref-for-dfn-buffer-full-flag-6"><code>[[buffer full flag]]</code></a> 等于 false，则中止这些步骤。
                    </li>
                    <li>令 <var data-type="normalized TimeRanges">removal ranges</var> 为可以从展示中清除以为 <var
                            data-type="BufferSource">new data</var> 腾出空间的展示时间范围列表。
                        <div class="note" role="note" id="issue-container-generatedID-75">
                            <div role="heading" class="note-title marker" id="h-note-75" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                实现 <em class="rfc2119">可以</em> 采用不同方法选择 <var data-type="normalized TimeRanges">removal
                                    ranges</var>，
                                因此 Web 应用 <em class="rfc2119">不应</em> 依赖特定行为。Web 应用可使用 <a data-link-type="idl"
                                    href="#dom-sourcebuffer-buffered" class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-buffered-4"><code>buffered</code></a> 属性观察缓冲数据是否已被清除。
                            </p>
                        </div>
                    </li>
                    <li>对 <var data-type="normalized TimeRanges">removal ranges</var> 中的每个范围，运行 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame-removal" class="internalDFN"
                            id="ref-for-dfn-coded-frame-removal-4">编码帧移除</a>算法，
                        其中 <var data-type="double">start</var> 和 <var data-type="unrestricted double">end</var>
                        分别为移除范围的起止时间戳。
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-audio-splice-frame-algorithm">
                <div class="header-wrapper">
                    <h4 id="x5-5-11-audio-splice-frame"><bdi class="secno">5.5.11 </bdi>
                        <dfn id="dfn-audio-splice-frame" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">音频拼接帧</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-audio-splice-frame-algorithm"
                        aria-label="Permalink for Section 5.5.11"></a>
                </div>

                <p>
                    当 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-11">编码帧处理</a>算法需要为两个重叠的音频 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-53">编码帧</a> 生成拼接帧时，按照以下步骤操作：
                </p>
                <ol>
                    <li>令 <var>track buffer</var> 为将包含拼接的 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                            class="internalDFN" id="ref-for-track-buffer-42">轨道缓冲区</a>。
                    </li>
                    <li>令 <var>new coded frame</var> 为即将被添加到 <var>track buffer</var> 的新 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                            id="ref-for-dfn-coded-frame-54">编码帧</a>，它触发了拼接需求。
                    </li>
                    <li>令 <var data-type="double">presentation timestamp</var> 为 <var>new coded frame</var> 的 <a
                            data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-26">展示时间戳</a>。
                    </li>
                    <li>令 <var data-type="double">decode timestamp</var> 为 <var>new coded frame</var> 的解码时间戳。
                    </li>
                    <li>令 <var data-type="double">frame duration</var> 为 <var>new coded frame</var> 的 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame-duration" class="internalDFN"
                            id="ref-for-dfn-coded-frame-duration-7">编码帧时长</a>。
                    </li>
                    <li>令 <var>overlapped frame</var> 为 <var>track buffer</var> 中展示区间包含 <var
                            data-type="double">presentation timestamp</var> 的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-55">编码帧</a>。
                    </li>
                    <li>将 <var data-type="double">presentation timestamp</var> 和 <var data-type="double">decode
                            timestamp</var> 更新为基于 <var>overlapped frame</var>
                        音频采样率最近的音频采样时间戳。如果时间戳距离两个采样时间戳等距，则用较大的时间戳（例如，
                        <code>floor(x * sample_rate + 0.5) / sample_rate</code>）。
                        <div class="note" role="note" id="issue-container-generatedID-76">
                            <div role="heading" class="note-title marker" id="h-note-76" aria-level="5">
                                <span>注意</span>
                            </div>
                            <div class="">
                                <p>
                                    例如，给定如下值：
                                </p>
                                <ul>
                                    <li><var>overlapped frame</var> 的 <a data-link-type="dfn|abstract-op"
                                            href="#presentation-timestamp" class="internalDFN"
                                            id="ref-for-presentation-timestamp-27">展示时间戳</a> 等于 10。
                                    </li>
                                    <li><var>overlapped frame</var> 的采样率为 8000 Hz
                                    </li>
                                    <li><var data-type="double">presentation timestamp</var> 等于 10.01255
                                    </li>
                                    <li><var data-type="double">decode timestamp</var> 等于 10.01255
                                    </li>
                                </ul>
                                <p>
                                    <var data-type="double">presentation timestamp</var> 和 <var
                                        data-type="double">decode timestamp</var> 被更新为 10.0125，因为 10.01255 更接近于 10 +
                                    100/8000 (10.0125)，而不是 10 + 101/8000 (10.012625)
                                </p>
                            </div>
                        </div>
                    </li>
                    <li>如果用户代理不支持淡入淡出，则运行以下步骤：
                        <ol>
                            <li>从 <var>track buffer</var> 移除 <var>overlapped frame</var>。
                            </li>
                            <li>向 <var>track buffer</var> 添加一个静音帧，属性如下：
                                <ul>
                                    <li><a data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                            class="internalDFN" id="ref-for-presentation-timestamp-28">展示时间戳</a> 设为
                                        <var>overlapped frame</var> 的 <a data-link-type="dfn|abstract-op"
                                            href="#presentation-timestamp" class="internalDFN"
                                            id="ref-for-presentation-timestamp-29">展示时间戳</a>。
                                    </li>
                                    <li><a data-link-type="dfn|abstract-op" href="#dfn-decode-timestamp"
                                            class="internalDFN" id="ref-for-dfn-decode-timestamp-4">解码时间戳</a> 设为
                                        <var>overlapped frame</var> 的 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-decode-timestamp" class="internalDFN"
                                            id="ref-for-dfn-decode-timestamp-5">解码时间戳</a>。
                                    </li>
                                    <li><a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-duration"
                                            class="internalDFN" id="ref-for-dfn-coded-frame-duration-8">编码帧时长</a> 设为
                                        <var>presentation
                                            timestamp</var> 与 <var>overlapped frame</var> 的 <a
                                            data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                                            class="internalDFN" id="ref-for-presentation-timestamp-30">展示时间戳</a> 的差值。
                                    </li>
                                </ul>
                                <div class="note" role="note" id="issue-container-generatedID-77">
                                    <div role="heading" class="note-title marker" id="h-note-77" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        一些实现 <em class="rfc2119">可以</em> 对插入静音帧两侧的编码帧应用淡入淡出处理，使过渡不那么突兀。
                                    </p>
                                </div>
                            </li>
                            <li>无需返回拼接帧，直接返回给调用方。
                                <div class="note" role="note" id="issue-container-generatedID-78">
                                    <div role="heading" class="note-title marker" id="h-note-78" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        这样可使 <var>new coded frame</var> 能被添加到 <var>track buffer</var>，仿佛 <var>overlapped
                                            frame</var> 起初就不在 <var>track buffer</var> 中一样。
                                    </p>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li>令 <var data-type="double">frame end timestamp</var> 为 <var data-type="double">presentation
                            timestamp</var> 与 <var data-type="double">frame duration</var> 之和。
                    </li>
                    <li>令 <var data-type="double">splice end timestamp</var> 为 <var data-type="double">presentation
                            timestamp</var> 与拼接时长（5 毫秒）之和。
                    </li>
                    <li>令 <var>fade out coded frames</var> 为 <var>overlapped frame</var> 以及 <var>track buffer</var> 中所有
                        <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-31">展示时间戳</a> 大于 <var data-type="double">presentation
                            timestamp</var> 且小于 <var data-type="double">splice end timestamp</var> 的其他帧。
                    </li>
                    <li>从 <var>track buffer</var> 中移除 <var>fade out coded frames</var> 中的所有帧。
                    </li>
                    <li>返回一个拼接帧，属性如下：
                        <ul>
                            <li><a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                                    id="ref-for-presentation-timestamp-32">展示时间戳</a> 设为 <var>overlapped frame</var> 的 <a
                                    data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                                    id="ref-for-presentation-timestamp-33">展示时间戳</a>。
                            </li>
                            <li><a data-link-type="dfn|abstract-op" href="#dfn-decode-timestamp" class="internalDFN"
                                    id="ref-for-dfn-decode-timestamp-6">解码时间戳</a> 设为 <var>overlapped frame</var> 的 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-decode-timestamp" class="internalDFN"
                                    id="ref-for-dfn-decode-timestamp-7">解码时间戳</a>。
                            </li>
                            <li><a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-duration" class="internalDFN"
                                    id="ref-for-dfn-coded-frame-duration-9">编码帧时长</a> 设为 <var data-type="double">frame
                                    end timestamp</var>
                                与 <var>overlapped frame</var> 的 <a data-link-type="dfn|abstract-op"
                                    href="#presentation-timestamp" class="internalDFN"
                                    id="ref-for-presentation-timestamp-34">展示时间戳</a> 的差值。
                            </li>
                            <li>淡出编码帧为 <var>fade out coded frames</var>。
                            </li>
                            <li>淡入编码帧为 <var>new coded frame</var>。
                                <div class="note" role="note" id="issue-container-generatedID-79">
                                    <div role="heading" class="note-title marker" id="h-note-79" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        如果 <var>new coded frame</var> 的时长小于 5 毫秒，则在 <var>new coded frame</var>
                                        之后追加的编码帧将被用于正确渲染拼接。
                                    </p>
                                </div>
                            </li>
                            <li>拼接时间戳为 <var data-type="double">presentation timestamp</var>。
                            </li>
                        </ul>
                        <div class="note" role="note" id="issue-container-generatedID-80">
                            <div role="heading" class="note-title marker" id="h-note-80" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                有关该拼接帧如何被渲染的详细信息，参见 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-audio-splice-rendering" class="internalDFN"
                                    id="ref-for-dfn-audio-splice-rendering-1">音频拼接渲染</a> 算法。
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section id="sourcebuffer-audio-splice-rendering-algorithm">
                <div class="header-wrapper">
                    <h4 id="x5-5-12-audio-splice-rendering"><bdi class="secno">5.5.12 </bdi>
                        <dfn id="dfn-audio-splice-rendering" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">音频拼接渲染</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-audio-splice-rendering-algorithm"
                        aria-label="Permalink for Section 5.5.12"></a>
                </div>

                <p>
                    当由 <a data-link-type="dfn|abstract-op" href="#dfn-audio-splice-frame" class="internalDFN"
                        id="ref-for-dfn-audio-splice-frame-2">音频拼接帧</a>算法生成的拼接帧需要由媒体元素进行渲染时，运行以下步骤：
                </p>
                <ol>
                    <li>令 <var>fade out coded frames</var> 为拼接过程中被淡出的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-56">编码帧</a>。
                    </li>
                    <li>令 <var>fade in coded frames</var> 为拼接过程中被淡入的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-57">编码帧</a>。
                    </li>
                    <li>令 <var data-type="double">presentation timestamp</var> 为 <var>fade out coded frames</var>
                        中第一个编码帧的 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-35">展示时间戳</a>。
                    </li>
                    <li>令 <var data-type="double">end timestamp</var> 为 <var>fade in coded frames</var> 中最后一个帧的 <a
                            data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-36">展示时间戳</a> 加上该帧的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-coded-frame-duration" class="internalDFN"
                            id="ref-for-dfn-coded-frame-duration-10">编码帧时长</a>。
                    </li>
                    <li>令 <var data-type="double">splice timestamp</var> 为拼接开始的 <a data-link-type="dfn|abstract-op"
                            href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-37">展示时间戳</a>，即 <var>fade in coded frames</var>
                        的第一个帧的展示时间戳。
                    </li>
                    <li>令 <var data-type="double">splice end timestamp</var> 等于 <var data-type="double">splice
                            timestamp</var> 加五毫秒。
                    </li>
                    <li>令 <var>fade out samples</var> 为解码 <var>fade out coded frames</var> 后生成的音频采样。
                    </li>
                    <li>裁剪 <var>fade out samples</var>，使其只包含 <var>presentation timestamp</var> 到 <var
                            data-type="double">splice end timestamp</var> 之间的采样。
                    </li>
                    <li>令 <var>fade in samples</var> 为解码 <var>fade in coded frames</var> 后生成的音频采样。
                    </li>
                    <li>如果 <var>fade out samples</var> 和 <var>fade in samples</var> 没有共同的采样率和声道布局，则将其转换为统一的采样率和声道布局。
                    </li>
                    <li>令 <var>output samples</var> 为用于存放输出采样的缓冲区。
                    </li>
                    <li>对 <var>fade out samples</var> 中 <var data-type="double">splice timestamp</var> 到 <var
                            data-type="double">splice end timestamp</var> 的采样应用线性增益淡出，起始增益为 1，结束增益为 0。
                    </li>
                    <li>对 <var>fade in samples</var> 中 <var data-type="double">splice timestamp</var> 到 <var
                            data-type="double">splice end timestamp</var> 的采样应用线性增益淡入，起始增益为 0，结束增益为 1。
                    </li>
                    <li>将 <var>fade out samples</var> 中 <var data-type="double">presentation timestamp</var> 到 <var
                            data-type="double">splice timestamp</var> 之间的采样复制到 <var>output samples</var>。
                    </li>
                    <li>对 <var data-type="double">splice timestamp</var> 到 <var data-type="double">splice end
                            timestamp</var> 之间的每个采样，计算 <var>fade out samples</var> 与 <var>fade in samples</var>
                        的相应采样之和，并存储到 <var>output samples</var>。
                    </li>
                    <li>将 <var>fade in samples</var> 中 <var data-type="double">splice end timestamp</var> 到 <var
                            data-type="double">end timestamp</var> 之间的采样复制到 <var>output samples</var>。
                    </li>
                    <li>渲染 <var>output samples</var>。
                    </li>
                </ol>
                <div class="note" role="note" id="issue-container-generatedID-81">
                    <div role="heading" class="note-title marker" id="h-note-81" aria-level="5"><span>注意</span></div>
                    <div class="">
                        <p>
                            以下是该算法的图示。
                        </p><img src="https://www.w3.org/TR/media-source-2/audio_splice.png" alt="音频拼接示意图">
                    </div>
                </div>
            </section>
            <section id="sourcebuffer-text-splice-frame-algorithm">
                <div class="header-wrapper">
                    <h4 id="x5-5-13-text-splice-frame"><bdi class="secno">5.5.13 </bdi>
                        <dfn id="dfn-text-splice-frame" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">文本拼接帧</dfn>
                    </h4><a class="self-link" href="#sourcebuffer-text-splice-frame-algorithm"
                        aria-label="Permalink for Section 5.5.13"></a>
                </div>

                <p>
                    当 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-12">编码帧处理</a>算法需要为两个重叠的定时文本 <a
                        data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                        id="ref-for-dfn-coded-frame-58">编码帧</a> 生成拼接帧时，运行以下步骤：
                </p>
                <ol>
                    <li>令 <var>track buffer</var> 为将包含拼接的 <a data-link-type="dfn|abstract-op" href="#track-buffer"
                            class="internalDFN" id="ref-for-track-buffer-43">轨道缓冲区</a>。
                    </li>
                    <li>令 <var>new coded frame</var> 为即将被添加到 <var>track buffer</var> 的新 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame" class="internalDFN"
                            id="ref-for-dfn-coded-frame-59">编码帧</a>，它触发了拼接需求。
                    </li>
                    <li>令 <var data-type="double">presentation timestamp</var> 为 <var>new coded frame</var> 的 <a
                            data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-39">展示时间戳</a>。
                    </li>
                    <li>令 <var data-type="double">decode timestamp</var> 为 <var>new coded frame</var> 的解码时间戳。
                    </li>
                    <li>令 <var data-type="double">frame duration</var> 为 <var>new coded frame</var> 的 <a
                            data-link-type="dfn|abstract-op" href="#dfn-coded-frame-duration" class="internalDFN"
                            id="ref-for-dfn-coded-frame-duration-11">编码帧时长</a>。
                    </li>
                    <li>令 <var data-type="double">frame end timestamp</var> 为 <var data-type="double">presentation
                            timestamp</var> 与 <var data-type="double">frame duration</var> 之和。
                    </li>
                    <li>令 <var>first overlapped frame</var> 为 <var>track buffer</var> 中展示区间包含 <var
                            data-type="double">presentation timestamp</var> 的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-coded-frame" class="internalDFN" id="ref-for-dfn-coded-frame-60">编码帧</a>。
                    </li>
                    <li>令 <var data-type="double">overlapped presentation timestamp</var> 为 <var>first overlapped
                            frame</var> 的 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp"
                            class="internalDFN" id="ref-for-presentation-timestamp-40">展示时间戳</a>。
                    </li>
                    <li>令 <var>overlapped frames</var> 为 <var>first overlapped frame</var> 以及 <var>track buffer</var>
                        中所有 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-41">展示时间戳</a> 大于 <var data-type="double">presentation
                            timestamp</var> 且小于 <var data-type="double">frame end timestamp</var> 的其他帧。
                    </li>
                    <li>从 <var>track buffer</var> 中移除 <var>overlapped frames</var> 中的所有帧。
                    </li>
                    <li>将 <var>first overlapped frame</var> 的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-coded-frame-duration" class="internalDFN"
                            id="ref-for-dfn-coded-frame-duration-12">编码帧时长</a> 更新为 <var data-type="double">presentation
                            timestamp</var> 减去 <var data-type="double">overlapped presentation timestamp</var> 的值。
                    </li>
                    <li>将 <var>first overlapped frame</var> 添加到 <var>track buffer</var>。
                    </li>
                    <li>无需返回拼接帧，直接返回给调用方。
                        <div class="note" role="note" id="issue-container-generatedID-82">
                            <div role="heading" class="note-title marker" id="h-note-82" aria-level="5">
                                <span>注意</span>
                            </div>
                            <p class="">
                                这样可使 <var>new coded frame</var> 能被添加到 <var>track buffer</var>，仿佛它起初就没有与 <var>track
                                    buffer</var> 中的任何帧重叠。
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
        </section>
    </section>
    <section id="sourcebufferlist">
        <div class="header-wrapper">
            <h2 id="x6-sourcebufferlist-interface"><bdi class="secno">6. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-sourcebufferlist" data-idl="interface"
                    data-title="SourceBufferList" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>SourceBufferList</code></dfn> 接口
            </h2><a class="self-link" href="#sourcebufferlist" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="SourceBufferList" href="#dom-sourcebufferlist" class="internalDFN"
                id="ref-for-dom-sourcebufferlist-5"><code>SourceBufferList</code></a> 是用于 <a href="#dom-sourcebuffer"
                class="internalDFN" data-link-type="idl" id="ref-for-dom-sourcebuffer-107"><code>SourceBuffer</code></a>
            对象的简单容器对象。它提供只读的数组访问方式，并在列表被修改时触发事件。
        </p>
        <pre class="idl def" id="webidl-2108728413"><span class="idlHeader"><a class="self-link" href="#webidl-2108728413">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-sourcebufferlist" data-title="SourceBufferList">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-sourcebufferlist" id="ref-for-dom-sourcebufferlist-6"><code>SourceBufferList</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-sourcebufferlist-length" data-title="length" data-dfn-for="SourceBufferList">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebufferlist-length" id="ref-for-dom-sourcebufferlist-length-1"><code>length</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebufferlist-onaddsourcebuffer" data-title="onaddsourcebuffer" data-dfn-for="SourceBufferList">

  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebufferlist-onaddsourcebuffer" id="ref-for-dom-sourcebufferlist-onaddsourcebuffer-1"><code>onaddsourcebuffer</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-sourcebufferlist-onremovesourcebuffer" data-title="onremovesourcebuffer" data-dfn-for="SourceBufferList">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-sourcebufferlist-onremovesourcebuffer" id="ref-for-dom-sourcebufferlist-onremovesourcebuffer-1"><code>onremovesourcebuffer</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-sourcebufferlist-anonymous-getter-index" data-title="getter" data-dfn-for="SourceBufferList">

  <dfn data-export="" data-dfn-type="method" id="dom-sourcebufferlist-getter" data-idl="operation" data-title="getter" data-dfn-for="SourceBufferList" data-type="SourceBuffer" data-lt="getter()|getter(index)" data-local-lt="SourceBufferList.getter|SourceBufferList.getter()|getter" tabindex="0" aria-haspopup="dialog"><code>getter</code></dfn><span class="idlType"> <a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-108"><code>SourceBuffer</code></a></span> (<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">index</span>);</span>
};</span></code></pre>
        <section id="attributes-0">
            <div class="header-wrapper">
                <h3 id="x6-1-attributes"><bdi class="secno">6.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-0" aria-label="Permalink for Section 6.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="SourceBufferList">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebufferlist-length" data-idl="attribute"
                        data-title="length" data-dfn-for="SourceBufferList" data-type="unsigned long" data-lt="length"
                        data-local-lt="SourceBufferList.length" tabindex="0"
                        aria-haspopup="dialog"><code>length</code></dfn> 类型为 <a data-link-type="interface"
                        data-lt="unsigned long"
                        href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><code>unsigned long</code></a>,
                    只读
                </dt>
                <dd>
                    <p>
                        表示列表中 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                            class="internalDFN" id="ref-for-dom-sourcebuffer-109"><code>SourceBuffer</code></a> 对象的数量。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebufferlist-onaddsourcebuffer"
                        data-idl="attribute" data-title="onaddsourcebuffer" data-dfn-for="SourceBufferList"
                        data-type="EventHandler" data-lt="onaddsourcebuffer"
                        data-local-lt="SourceBufferList.onaddsourcebuffer" tabindex="0"
                        aria-haspopup="dialog"><code>onaddsourcebuffer</code></dfn> 类型为 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        处理 <a data-link-type="idl" data-lt="addsourcebuffer" href="#dfn-addsourcebuffer"
                            class="internalDFN" id="ref-for-dfn-addsourcebuffer-6"><code>addsourcebuffer</code></a>
                        事件的事件处理器。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-sourcebufferlist-onremovesourcebuffer"
                        data-idl="attribute" data-title="onremovesourcebuffer" data-dfn-for="SourceBufferList"
                        data-type="EventHandler" data-lt="onremovesourcebuffer"
                        data-local-lt="SourceBufferList.onremovesourcebuffer" tabindex="0"
                        aria-haspopup="dialog"><code>onremovesourcebuffer</code></dfn> 类型为 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        处理 <a data-link-type="idl" data-lt="removesourcebuffer" href="#dfn-removesourcebuffer"
                            class="internalDFN"
                            id="ref-for-dfn-removesourcebuffer-8"><code>removesourcebuffer</code></a> 事件的事件处理器。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="methods-0">
            <div class="header-wrapper">
                <h3 id="x6-2-methods"><bdi class="secno">6.2 </bdi>
                    方法
                </h3><a class="self-link" href="#methods-0" aria-label="Permalink for Section 6.2"></a>
            </div>

            <dl class="methods" data-dfn-for="SourceBufferList">
                <dt>
                    <dfn data-lt-nodefault="" data-lt="sourcebufferlist-getter" id="dfn-sourcebufferlist-getter"
                        tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn" class="respec-offending-element"
                        title="Found definition for &quot;getter&quot;, but nothing links to it. This is usually a spec bug!">getter</dfn>
                </dt>
                <dd>
                    <p>
                        允许通过数组操作符（即 []）访问列表中的 SourceBuffer 对象。
                    </p>

                    <p>调用此方法时，用户代理必须运行以下步骤：</p>
                    <ol class="method-algorithm">
                        <li>如果 <var data-type="unsigned long">index</var> 大于等于 <a data-link-type="idl"
                                href="#dom-sourcebufferlist-length" class="internalDFN"
                                id="ref-for-dom-sourcebufferlist-length-2"><code>length</code></a> 属性，则返回 undefined
                            并中止这些步骤。
                        </li>
                        <li>返回列表中第 <var data-type="unsigned long">index</var> 个 <a data-link-type="idl"
                                data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-110"><code>SourceBuffer</code></a> 对象。
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="sourcebufferlist-events">
            <div class="header-wrapper">
                <h3 id="x6-3-event-summary"><bdi class="secno">6.3 </bdi>
                    事件摘要
                </h3><a class="self-link" href="#sourcebufferlist-events" aria-label="Permalink for Section 6.3"></a>
            </div>

            <table class="data">
                <thead>
                    <tr>
                        <th>
                            事件名
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            何时分发...
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-addsourcebuffer" tabindex="0"
                                aria-haspopup="dialog" data-export="">addsourcebuffer</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            当 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN" id="ref-for-dom-sourcebuffer-111"><code>SourceBuffer</code></a>
                            被添加到列表时。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-removesourcebuffer" tabindex="0"
                                aria-haspopup="dialog" data-export="">removesourcebuffer</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            当 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN" id="ref-for-dom-sourcebuffer-112"><code>SourceBuffer</code></a>
                            被从列表中移除时。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </section>
    <section data-cite="WEBIDL mimesniff" data-dfn-for="ManagedMediaSource" id="managedmediasource-interface">
        <div class="header-wrapper">
            <h2 id="x7-managedmediasource-interface"><bdi class="secno">7. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-managedmediasource" data-idl="interface"
                    data-title="ManagedMediaSource" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>ManagedMediaSource</code></dfn> 接口
            </h2><a class="self-link" href="#managedmediasource-interface" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource" class="internalDFN"
                id="ref-for-dom-managedmediasource-4"><code>ManagedMediaSource</code></a> 是一个主动管理其内存内容的 <a
                data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-99"><code>MediaSource</code></a>。与 <a data-link-type="idl"
                data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-100"><code>MediaSource</code></a> 不同，<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#user-agent">用户代理</a>可以通过 <a data-link-type="dfn|abstract-op"
                href="#dfn-memory-cleanup" class="internalDFN" id="ref-for-dfn-memory-cleanup-1">内存清理</a>算法，因任何原因从其 <a
                data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                id="ref-for-dom-mediasource-sourcebuffers-32"><code>sourceBuffers</code></a>
            （由 <a data-link-type="idl" data-lt="ManagedSourceBuffer" href="#dom-managedsourcebuffer" class="internalDFN"
                id="ref-for-dom-managedsourcebuffer-3"><code>ManagedSourceBuffer</code></a> 填充）清除内容。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-83">
            <div role="heading" class="note-title marker" id="h-note-83" aria-level="3"><span>注意</span><span
                    class="issue-label">: 清除原因</span></div>
            <aside class="">
                <p>
                    用户代理可能清除内容的原因取决于实现，可以包括但不限于内存和/或硬件限制、环境条件变化等。开发者不应对用户代理何时、如何、为何清除内容做任何假定。开发者需要编写脚本时假定内容会被持续且随机地清除，以避免视频播放卡顿（即代码要有防御性并监听
                    <a data-link-type="idl" data-lt="bufferedchange" href="#dfn-bufferedchange" class="internalDFN"
                        id="ref-for-dfn-bufferedchange-1"><code>bufferedchange</code></a>
                    事件！）。
                </p>
            </aside>
        </div>
        <pre class="idl def" id="webidl-1619111096"><span class="idlHeader"><a class="self-link" href="#webidl-1619111096">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-managedmediasource" data-title="ManagedMediaSource">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-managedmediasource" id="ref-for-dom-managedmediasource-5"><code>ManagedMediaSource</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="#dom-mediasource" class="internalDFN" id="ref-for-dom-mediasource-101"><code>MediaSource</code></a></span> {<span data-idl="" class="idlConstructor" id="idl-def-managedmediasource-constructor" data-title="constructor" data-dfn-for="ManagedMediaSource">
  <dfn data-export="" data-dfn-type="constructor" id="dom-managedmediasource-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="ManagedMediaSource" data-lt="constructor()" data-local-lt="ManagedMediaSource.constructor|ManagedMediaSource.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>();</span><span data-idl="" class="idlAttribute" id="idl-def-managedmediasource-streaming" data-title="streaming" data-dfn-for="ManagedMediaSource">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-managedmediasource-streaming" id="ref-for-dom-managedmediasource-streaming-2"><code>streaming</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-managedmediasource-onstartstreaming" data-title="onstartstreaming" data-dfn-for="ManagedMediaSource">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-managedmediasource-onstartstreaming" data-idl="attribute" data-title="onstartstreaming" data-dfn-for="ManagedMediaSource" data-type="EventHandler" data-lt="onstartstreaming" data-local-lt="ManagedMediaSource.onstartstreaming" class="idlName" tabindex="0" aria-haspopup="dialog"><code>onstartstreaming</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-managedmediasource-onendstreaming" data-title="onendstreaming" data-dfn-for="ManagedMediaSource">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-managedmediasource-onendstreaming" data-idl="attribute" data-title="onendstreaming" data-dfn-for="ManagedMediaSource" data-type="EventHandler" data-lt="onendstreaming" data-local-lt="ManagedMediaSource.onendstreaming" class="idlName" tabindex="0" aria-haspopup="dialog"><code>onendstreaming</code></dfn>;</span>
};</span></code></pre>
        <section id="attributes-1">
            <div class="header-wrapper">
                <h3 id="x7-1-attributes"><bdi class="secno">7.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-1" aria-label="Permalink for Section 7.1"></a>
            </div>
            <dl class="attributes" data-dfn-for="ManagedMediaSource">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-managedmediasource-streaming"
                        data-idl="attribute" data-title="streaming" data-dfn-for="ManagedMediaSource"
                        data-type="boolean" data-lt="streaming" data-local-lt="ManagedMediaSource.streaming"
                        tabindex="0" aria-haspopup="dialog"><code>streaming</code></dfn>
                </dt>
                <dd>
                    <p>
                        获取时：
                    </p>
                    <ol>
                        <li>返回该属性的当前值。
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="event-summary">
            <div class="header-wrapper">
                <h3 id="x7-2-event-summary"><bdi class="secno">7.2 </bdi>
                    事件摘要
                </h3><a class="self-link" href="#event-summary" aria-label="Permalink for Section 7.2"></a>
            </div>
            <table class="old-table">
                <thead>
                    <tr>
                        <th>
                            事件名
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            何时分发...
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-startstreaming" tabindex="0"
                                aria-haspopup="dialog" data-export="">startstreaming</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            当 <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource"
                                class="internalDFN"
                                id="ref-for-dom-managedmediasource-6"><code>ManagedMediaSource</code></a> 的 <a
                                data-link-type="idl" href="#dom-managedmediasource-streaming" class="internalDFN"
                                id="ref-for-dom-managedmediasource-streaming-3"><code>streaming</code></a> 属性从
                            <code>false</code> 变为 <code>true</code> 时。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-endstreaming" tabindex="0"
                                aria-haspopup="dialog" data-export="">endstreaming</dfn>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            当 <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource"
                                class="internalDFN"
                                id="ref-for-dom-managedmediasource-7"><code>ManagedMediaSource</code></a> 的 <a
                                data-link-type="idl" href="#dom-managedmediasource-streaming" class="internalDFN"
                                id="ref-for-dom-managedmediasource-streaming-4"><code>streaming</code></a> 属性从
                            <code>true</code> 变为 <code>false</code> 时。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="algorithms">
            <div class="header-wrapper">
                <h3 id="x7-3-algorithms"><bdi class="secno">7.3 </bdi>
                    算法
                </h3><a class="self-link" href="#algorithms" aria-label="Permalink for Section 7.3"></a>
            </div>
            <section id="managedsourcebuffer-monitoring">
                <div class="header-wrapper">
                    <h4 id="x7-3-1-managedsourcebuffer-monitoring"><bdi class="secno">7.3.1 </bdi>
                        <code>ManagedSourceBuffer</code> 监控
                    </h4><a class="self-link" href="#managedsourcebuffer-monitoring"
                        aria-label="Permalink for Section 7.3.1"></a>
                </div>
                <p>
                    以下步骤会周期性运行，每当 <a data-link-type="dfn|abstract-op" href="#dfn-sourcebuffer-monitoring"
                        class="internalDFN" id="ref-for-dfn-sourcebuffer-monitoring-1">SourceBuffer 监控</a>算法被调度执行时。
                </p>
                <p>
                    拥有 <dfn id="dfn-enough-managed-data-to-ensure-uninterrupted-playback" tabindex="0"
                        aria-haspopup="dialog"
                        data-dfn-type="dfn">足够的受管数据以确保不间断播放</dfn>，是一个由实现定义的条件，用户代理判断当前拥有足够数据以在展示过程中避免长时间卡顿。该条件会被持续评估，以决定何时切换
                    <a data-link-type="idl" href="#dom-managedmediasource-streaming" class="internalDFN"
                        id="ref-for-dom-managedmediasource-streaming-5"><code>streaming</code></a>
                    的值。这些切换表示用户代理认为数据缓冲充足或仍需更多数据。
                </p>
                <p>
                    <dfn id="dfn-able-to-retrieve-and-buffer-data-in-an-efficient-way" tabindex="0"
                        aria-haspopup="dialog"
                        data-dfn-type="dfn">能以高效方式检索和缓冲数据</dfn>，是一个由实现定义的条件，用户代理判断其能以节能的方式抓取新数据，同时实现所需内存使用。
                </p>
                <ol class="algorithm">
                    <li>运行 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                            id="ref-for-dom-mediasource-102"><code>MediaSource</code></a> 的 <a
                            data-link-type="dfn|abstract-op" href="#dfn-sourcebuffer-monitoring" class="internalDFN"
                            id="ref-for-dfn-sourcebuffer-monitoring-2">SourceBuffer 监控</a>算法。
                    </li>
                    <li>令 <var>can play uninterrupted and efficiently</var> 为一个标志，当下列条件同时满足时为 true：
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                        属性包含一个 <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>，覆盖当前播放位置且拥有
                        <a data-link-type="dfn|abstract-op"
                            href="#dfn-enough-managed-data-to-ensure-uninterrupted-playback" class="internalDFN"
                            id="ref-for-dfn-enough-managed-data-to-ensure-uninterrupted-playback-1">足够的受管数据以确保不间断播放</a>，并且
                        <a data-link-type="dfn|abstract-op"
                            href="#dfn-able-to-retrieve-and-buffer-data-in-an-efficient-way" class="internalDFN"
                            id="ref-for-dfn-able-to-retrieve-and-buffer-data-in-an-efficient-way-1">能以高效方式检索和缓冲数据</a>
                        <dl class="switch">
                            <dt>
                                如果 <var>can play uninterrupted and efficiently</var> 不等于 <a data-link-type="idl"
                                    href="#dom-managedmediasource-streaming" class="internalDFN"
                                    id="ref-for-dom-managedmediasource-streaming-6"><code>streaming</code></a>，<a
                                    data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-an-element-task">在媒体元素上排队一个元素任务</a>，其运行以下步骤：
                            </dt>
                            <dd>
                                <ol>
                                    <li>将 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
                                        <a data-link-type="idl" href="#dom-managedmediasource-streaming"
                                            class="internalDFN"
                                            id="ref-for-dom-managedmediasource-streaming-7"><code>streaming</code></a>
                                        属性设为 <var>can play
                                            uninterrupted and efficiently</var>。
                                    </li>
                                    <li>如果 <var>can play uninterrupted and efficiently</var> 为 false，<a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                        名为 <a data-link-type="idl" data-lt="startstreaming" href="#dfn-startstreaming"
                                            class="internalDFN"
                                            id="ref-for-dfn-startstreaming-1"><code>startstreaming</code></a>，于 <a
                                            data-link-type="idl" data-lt="ManagedMediaSource"
                                            href="#dom-managedmediasource" class="internalDFN"
                                            id="ref-for-dom-managedmediasource-8"><code>ManagedMediaSource</code></a>
                                        处触发。
                                    </li>
                                    <li>否则，<a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>
                                        名为 <a data-link-type="idl" data-lt="endstreaming" href="#dfn-endstreaming"
                                            class="internalDFN"
                                            id="ref-for-dfn-endstreaming-1"><code>endstreaming</code></a>，于 <a
                                            data-link-type="idl" data-lt="ManagedMediaSource"
                                            href="#dom-managedmediasource" class="internalDFN"
                                            id="ref-for-dom-managedmediasource-9"><code>ManagedMediaSource</code></a>
                                        处触发。
                                    </li>
                                </ol>
                            </dd>
                        </dl>
                    </li>
                </ol>
            </section>
            <section id="memory-cleanup">
                <div class="header-wrapper">
                    <h4 id="x7-3-2-memory-cleanup"><bdi class="secno">7.3.2 </bdi>
                        <dfn data-dfn-for="ManagedMediaSource" id="dfn-memory-cleanup" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">内存清理</dfn>
                    </h4><a class="self-link" href="#memory-cleanup" aria-label="Permalink for Section 7.3.2"></a>
                </div>
                <ol>
                    <li>
                        <dl class="switch">
                            <dt>
                                对 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                                    data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-sourcebuffers-33"><code>sourceBuffers</code></a> 中的每个
                                <var data-type="ManagedSourceBuffer">buffer</var>：
                            </dt>
                            <dd>
                                <ol>
                                    <li>运行 <var data-type="ManagedSourceBuffer">buffer</var> 的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-memory-cleanup-0"
                                            class="internalDFN" id="ref-for-dfn-memory-cleanup-0-1">内存清理</a>算法。
                                    </li>
                                </ol>
                            </dd>
                        </dl>
                    </li>
                </ol>
            </section>
        </section>
    </section>
    <section data-dfn-for="BufferedChangeEvent" id="bufferedchangeevent-interface">
        <div class="header-wrapper">
            <h2 id="x8-bufferedchangeevent-interface"><bdi class="secno">8. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-bufferedchangeevent" data-idl="interface"
                    data-title="BufferedChangeEvent" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>BufferedChangeEvent</code></dfn> 接口
            </h2><a class="self-link" href="#bufferedchangeevent-interface" aria-label="Permalink for Section 8."></a>
        </div>

        <pre class="idl def" id="webidl-2057880103"><span class="idlHeader"><a class="self-link" href="#webidl-2057880103">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-bufferedchangeevent" data-title="BufferedChangeEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-bufferedchangeevent" id="ref-for-dom-bufferedchangeevent-2"><code>BufferedChangeEvent</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-bufferedchangeevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="BufferedChangeEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-bufferedchangeevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="BufferedChangeEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="BufferedChangeEvent.constructor|BufferedChangeEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-bufferedchangeeventinit" class="internalDFN" id="ref-for-dom-bufferedchangeeventinit-1"><code>BufferedChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-bufferedchangeevent-addedranges" data-title="addedRanges" data-dfn-for="BufferedChangeEvent">

  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#timeranges">TimeRanges</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-bufferedchangeevent-addedranges" id="ref-for-dom-bufferedchangeevent-addedranges-1"><code>addedRanges</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-bufferedchangeevent-removedranges" data-title="removedRanges" data-dfn-for="BufferedChangeEvent">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#timeranges">TimeRanges</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-bufferedchangeevent-removedranges" id="ref-for-dom-bufferedchangeevent-removedranges-1"><code>removedRanges</code></a>;</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-bufferedchangeeventinit" data-title="BufferedChangeEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-bufferedchangeeventinit" data-idl="dictionary" data-title="BufferedChangeEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>BufferedChangeEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-bufferedchangeeventinit-addedranges" data-title="addedRanges" data-dfn-for="BufferedChangeEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#timeranges">TimeRanges</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-bufferedchangeeventinit-addedranges" data-idl="field" data-title="addedRanges" data-dfn-for="BufferedChangeEventInit" data-type="TimeRanges" class="idlName" tabindex="0" aria-haspopup="dialog"><code>addedRanges</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-bufferedchangeeventinit-removedranges" data-title="removedRanges" data-dfn-for="BufferedChangeEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#timeranges">TimeRanges</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-bufferedchangeeventinit-removedranges" data-idl="field" data-title="removedRanges" data-dfn-for="BufferedChangeEventInit" data-type="TimeRanges" class="idlName" tabindex="0" aria-haspopup="dialog"><code>removedRanges</code></dfn>;</span>
};</span></code></pre>
        <section id="attributes-2">
            <div class="header-wrapper">
                <h3 id="x8-1-attributes"><bdi class="secno">8.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-2" aria-label="Permalink for Section 8.1"></a>
            </div>
            <dl>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-bufferedchangeevent-addedranges"
                        data-idl="attribute" data-title="addedRanges" data-dfn-for="BufferedChangeEvent"
                        data-type="TimeRanges" data-lt="addedRanges" data-local-lt="BufferedChangeEvent.addedRanges"
                        tabindex="0" aria-haspopup="dialog"><code>addedRanges</code></dfn>
                </dt>
                <dd>
                    在上一次 <a data-link-type="idl" data-lt="updatestart" href="#dfn-updatestart" class="internalDFN"
                        id="ref-for-dfn-updatestart-4"><code>updatestart</code></a> 与 <a data-link-type="idl"
                        data-lt="updateend" href="#dfn-updateend" class="internalDFN"
                        id="ref-for-dfn-updateend-7"><code>updateend</code></a> 事件之间新增的时间范围（这通常发生在上一次运行
                    <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-processing" class="internalDFN"
                        id="ref-for-dfn-coded-frame-processing-13">编码帧处理</a> 算法期间）。
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-bufferedchangeevent-removedranges"
                        data-idl="attribute" data-title="removedRanges" data-dfn-for="BufferedChangeEvent"
                        data-type="TimeRanges" data-lt="removedRanges" data-local-lt="BufferedChangeEvent.removedRanges"
                        tabindex="0" aria-haspopup="dialog"><code>removedRanges</code></dfn>
                </dt>
                <dd>
                    在上一次 <code>updatestart</code> 与 <code>updateend</code> 事件之间被移除的时间范围（这通常发生在上一次运行
                    <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-removal" class="internalDFN"
                        id="ref-for-dfn-coded-frame-removal-5">编码帧移除</a>
                    或 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-eviction" class="internalDFN"
                        id="ref-for-dfn-coded-frame-eviction-2">编码帧清除</a> 算法期间，或当用户代理因
                    <a data-link-type="dfn|abstract-op" href="#dfn-memory-cleanup-0" class="internalDFN"
                        id="ref-for-dfn-memory-cleanup-0-2">内存清理</a> 而驱逐内容时）。
                </dd>
            </dl>
        </section>
    </section>
    <section id="managedsourcebuffer-interface">
        <div class="header-wrapper">
            <h2 id="x9-managedsourcebuffer-interface"><bdi class="secno">9. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-managedsourcebuffer" data-idl="interface"
                    data-title="ManagedSourceBuffer" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>ManagedSourceBuffer</code></dfn> 接口
            </h2><a class="self-link" href="#managedsourcebuffer-interface" aria-label="Permalink for Section 9."></a>
        </div>

        <pre class="idl def" id="webidl-1682162223"><span class="idlHeader"><a class="self-link" href="#webidl-1682162223">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-managedsourcebuffer" data-title="ManagedSourceBuffer">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-managedsourcebuffer" id="ref-for-dom-managedsourcebuffer-4"><code>ManagedSourceBuffer</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-113"><code>SourceBuffer</code></a></span> {<span data-idl="" class="idlAttribute" id="idl-def-managedsourcebuffer-onbufferedchange" data-title="onbufferedchange" data-dfn-for="ManagedSourceBuffer">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-managedsourcebuffer-onbufferedchange" id="ref-for-dom-managedsourcebuffer-onbufferedchange-1"><code>onbufferedchange</code></a>;</span>
};</span></code></pre>
        <section id="attributes-3">
            <div class="header-wrapper">
                <h3 id="x9-1-attributes"><bdi class="secno">9.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-3" aria-label="Permalink for Section 9.1"></a>
            </div>
            <dl class="attributes" data-dfn-for="ManagedSourceBuffer">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-managedsourcebuffer-onbufferedchange"
                        data-idl="attribute" data-title="onbufferedchange" data-dfn-for="ManagedSourceBuffer"
                        data-type="EventHandler" data-lt="onbufferedchange"
                        data-local-lt="ManagedSourceBuffer.onbufferedchange" tabindex="0"
                        aria-haspopup="dialog"><code>onbufferedchange</code></dfn>
                </dt>
                <dd>
                    <p>
                        一个 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">事件处理程序
                            IDL 属性</a>，
                        其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">事件处理程序事件类型</a>
                        为
                        <a data-link-type="idl" data-lt="bufferedchange" href="#dfn-bufferedchange" class="internalDFN"
                            id="ref-for-dfn-bufferedchange-2"><code>bufferedchange</code></a>。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="event-summary-0">
            <div class="header-wrapper">
                <h3 id="x9-2-event-summary"><bdi class="secno">9.2 </bdi>
                    事件摘要
                </h3><a class="self-link" href="#event-summary-0" aria-label="Permalink for Section 9.2"></a>
            </div>
            <table class="old-table">
                <thead>
                    <tr>
                        <th>
                            事件名
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            何时分发…
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn class="event" data-dfn-type="event" id="dfn-bufferedchange" tabindex="0"
                                aria-haspopup="dialog" data-export="">bufferedchange</dfn>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="BufferedChangeEvent" href="#dom-bufferedchangeevent"
                                class="internalDFN"
                                id="ref-for-dom-bufferedchangeevent-3"><code>BufferedChangeEvent</code></a>
                        </td>
                        <td>
                            在调用 <a data-link-type="idl" data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-appendbuffer-10"><code>appendBuffer</code></a><code>()</code>、
                            <a data-link-type="idl" data-lt="remove()" href="#dom-sourcebuffer-remove"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-remove-5"><code>remove</code></a><code>()</code>、
                            <a data-link-type="idl" data-lt="endOfStream()" href="#dom-mediasource-endofstream"
                                class="internalDFN"
                                id="ref-for-dom-mediasource-endofstream-5"><code>endOfStream</code></a><code>()</code>
                            之后，或由于用户代理运行 <a data-link-type="dfn|abstract-op" href="#dfn-memory-cleanup-0"
                                class="internalDFN" id="ref-for-dfn-memory-cleanup-0-3">内存清理</a> 算法而导致
                            <a data-link-type="idl" data-lt="ManagedSourceBuffer" href="#dom-managedsourcebuffer"
                                class="internalDFN"
                                id="ref-for-dom-managedsourcebuffer-5"><code>ManagedSourceBuffer</code></a>
                            的缓冲范围发生变化时分发。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="algorithms-0">
            <div class="header-wrapper">
                <h3 id="x9-3-algorithms"><bdi class="secno">9.3 </bdi>
                    算法
                </h3><a class="self-link" href="#algorithms-0" aria-label="Permalink for Section 9.3"></a>
            </div>
            <section id="buffered-change">
                <div class="header-wrapper">
                    <h4 id="x9-3-1-buffered-change"><bdi class="secno">9.3.1 </bdi>
                        缓冲变更
                    </h4><a class="self-link" href="#buffered-change" aria-label="Permalink for Section 9.3.1"></a>
                </div>
                <p>
                    当对 <a data-link-type="idl" data-lt="ManagedSourceBuffer" href="#dom-managedsourcebuffer"
                        class="internalDFN" id="ref-for-dom-managedsourcebuffer-6"><code>ManagedSourceBuffer</code></a>
                    <var data-type="ManagedSourceBuffer">buffer</var> 的所有会导致该 <var
                        data-type="ManagedSourceBuffer">buffer</var> 的
                    <a data-link-type="idl" href="#dom-sourcebuffer-buffered" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-buffered-5"><code>buffered</code></a> 发生变化的操作完成后，运行以下步骤。即，一旦
                    <a data-link-type="idl" data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                        class="internalDFN"
                        id="ref-for-dom-sourcebuffer-appendbuffer-11"><code>appendBuffer</code></a><code>()</code>、
                    <a data-link-type="idl" data-lt="remove()" href="#dom-sourcebuffer-remove" class="internalDFN"
                        id="ref-for-dom-sourcebuffer-remove-6"><code>remove</code></a><code>()</code> 或
                    <a data-link-type="dfn|abstract-op" href="#dfn-memory-cleanup-0" class="internalDFN"
                        id="ref-for-dfn-memory-cleanup-0-4">内存清理</a> 算法完成时。
                </p>
                <ol>
                    <li>令 <var data-type="normalized TimeRanges">previous buffered ranges</var> 等于变更发生之前
                        <a data-link-type="idl" href="#dom-sourcebuffer-buffered" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-buffered-6"><code>buffered</code></a> 属性的值。
                    </li>
                    <li>令 <var data-type="normalized TimeRanges">new buffered ranges</var> 等于新的
                        <a data-link-type="idl" href="#dom-sourcebuffer-buffered" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-buffered-7"><code>buffered</code></a>
                        <a data-link-type="interface" data-lt="TimeRanges"
                            href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>。
                    </li>
                    <li>令 <var data-type="normalized TimeRanges">added</var> 等于用
                        <var data-type="normalized TimeRanges">new buffered ranges</var> 减去
                        <var data-type="normalized TimeRanges">previous buffered ranges</var> 的结果。
                    </li>
                    <li>令 <var data-type="normalized TimeRanges">removed</var> 等于用
                        <var data-type="normalized TimeRanges">previous buffered ranges</var> 减去
                        <var data-type="normalized TimeRanges">new buffered ranges</var> 的结果。
                    </li>
                    <li>令 <var>eventInitDict</var> 为一个新的
                        <a data-link-type="idl" data-lt="BufferedChangeEventInit" href="#dom-bufferedchangeeventinit"
                            class="internalDFN"
                            id="ref-for-dom-bufferedchangeeventinit-2"><code>BufferedChangeEventInit</code></a>
                        字典，并用 <var data-type="normalized TimeRanges">added</var> 初始化其
                        <a data-link-type="idl" href="#dom-bufferedchangeeventinit-addedranges" class="internalDFN"
                            id="ref-for-dom-bufferedchangeeventinit-addedranges-1"><code>addedRanges</code></a>，用
                        <var data-type="normalized TimeRanges">removed</var> 初始化其
                        <a data-link-type="idl" href="#dom-bufferedchangeeventinit-removedranges" class="internalDFN"
                            id="ref-for-dom-bufferedchangeeventinit-removedranges-1"><code>removedRanges</code></a>。
                    </li>
                    <li><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>，
                        以 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件</a>，事件名为
                        <a data-link-type="idl" data-lt="bufferedchange" href="#dfn-bufferedchange" class="internalDFN"
                            id="ref-for-dfn-bufferedchange-3"><code>bufferedchange</code></a>，
                        在 <var data-type="ManagedSourceBuffer">buffer</var> 上使用
                        <a data-link-type="idl" data-lt="BufferedChangeEvent" href="#dom-bufferedchangeevent"
                            class="internalDFN"
                            id="ref-for-dom-bufferedchangeevent-4"><code>BufferedChangeEvent</code></a> 接口，
                        并用 <var>eventInitDict</var> 初始化。
                    </li>
                </ol>
            </section>
            <section id="memory-cleanup-0">
                <div class="header-wrapper">
                    <h4 id="x9-3-2-memory-cleanup"><bdi class="secno">9.3.2 </bdi>
                        <dfn data-dfn-for="ManagedSourceBuffer" id="dfn-memory-cleanup-0" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">内存清理</dfn>
                    </h4><a class="self-link" href="#memory-cleanup-0" aria-label="Permalink for Section 9.3.2"></a>
                </div>
                <ol>
                    <li>
                        <dl class="switch">
                            <dt>
                                如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 不在其
                                <a data-link-type="idl" data-lt="ManagedMediaSource" href="#dom-managedmediasource"
                                    class="internalDFN"
                                    id="ref-for-dom-managedmediasource-10"><code>ManagedMediaSource</code></a> 父对象的
                                <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-activesourcebuffers-31"><code>activeSourceBuffers</code></a>
                                中：
                            </dt>
                            <dd>
                                <ol>
                                    <li>运行 <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-removal"
                                            class="internalDFN" id="ref-for-dfn-coded-frame-removal-6">编码帧移除</a> 算法，
                                        将 start 设为 0，end 设为正无穷大，然后中止这些步骤。
                                    </li>
                                </ol>
                            </dd>
                        </dl>
                    </li>
                    <li>令 <var data-type="normalized TimeRanges">removal ranges</var> 为一组可从展示中被驱逐的展示时间范围，
                        以确保从
                        <a data-link-type="attribute"
                            href="https://html.spec.whatwg.org/multipage/media.html#dom-media-currenttime"><code>currentTime</code></a>
                        起直到能够再次获取该展示内容期间的连续播放。
                        <div class="note" role="note" id="issue-container-generatedID-84">
                            <div role="heading" class="note-title marker" id="h-note-84" aria-level="3">
                                <span>注意</span>
                            </div>
                            <p class="">
                                不同实现可以采用不同策略选择 <var data-type="normalized TimeRanges">removal ranges</var>，
                                因此 Web 应用不应依赖特定行为。Web 应用应监听
                                <a data-link-type="idl" data-lt="bufferedchange" href="#dfn-bufferedchange"
                                    class="internalDFN"
                                    id="ref-for-dfn-bufferedchange-4"><code>bufferedchange</code></a> 事件以观察缓冲数据的部分是否被驱逐。
                            </p>
                        </div>
                    </li>
                    <li>对于 <var data-type="normalized TimeRanges">removal ranges</var> 中的每个范围，运行
                        <a data-link-type="dfn|abstract-op" href="#dfn-coded-frame-removal" class="internalDFN"
                            id="ref-for-dfn-coded-frame-removal-7">编码帧移除</a> 算法，其中
                        <var data-type="double">start</var> 与 <var data-type="unrestricted double">end</var>
                        分别等于该移除范围的起始与结束时间戳。
                    </li>
                </ol>
            </section>
        </section>
    </section>
    <section id="htmlmediaelement-extensions">
        <div class="header-wrapper">
            <h2 id="x10-htmlmediaelement-extensions"><bdi class="secno">10. </bdi>
                HTMLMediaElement 扩展
            </h2><a class="self-link" href="#htmlmediaelement-extensions" aria-label="Permalink for Section 10."></a>
        </div>

        <p>
            本节规定当一个 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                id="ref-for-dom-mediasource-103"><code>MediaSource</code></a> 附加到元素时，现有
            <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的
            <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seekable"><code>seekable</code></a>
            与
            <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的
            <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
            属性 <em class="rfc2119">必须</em> 返回的内容，以及当其
            <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
            属性被设为 <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                id="ref-for-dom-mediasourcehandle-29"><code>MediaSourceHandle</code></a> 对象时，
            现有 <a data-link-type="interface" data-lt="HTMLMediaElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
            的
            <a data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
            属性 <em class="rfc2119">必须</em> 执行的操作。
        </p>
        <section id="htmlmediaelement-extensions-seekable">
            <div class="header-wrapper">
                <h3 id="x10-1-htmlmediaelement-s-seekable"><bdi class="secno">10.1 </bdi>
                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    的
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seekable"><code>seekable</code></a>
                </h3><a class="self-link" href="#htmlmediaelement-extensions-seekable"
                    aria-label="Permalink for Section 10.1"></a>
            </div>

            <p>
                <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seekable"><code>seekable</code></a>
                属性返回一个新的静态
                <a href="https://html.spec.whatwg.org/multipage/media.html#normalised-timeranges-object">规范化 TimeRanges
                    对象</a>，按以下步骤创建：
            </p>
            <ol>
                <li>如果该 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-104"><code>MediaSource</code></a> 是在一个已终止或正在关闭的
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    中构造的，则返回一个空的 <a data-link-type="interface" data-lt="TimeRanges"
                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                    对象并中止这些步骤。
                    <div class="note" role="note" id="issue-container-generatedID-85">
                        <div role="heading" class="note-title marker" id="h-note-85" aria-level="4"><span>注意</span>
                        </div>
                        <p class="">
                            此情况旨在处理如下实现：当某个在 DedicatedWorkerGlobalScope 中构造的 MediaSource 因
                            <a data-link-type="method" data-lt="terminate()"
                                href="https://html.spec.whatwg.org/multipage/workers.html#dom-worker-terminate"><code>terminate</code></a><code>()</code>
                            或用户代理执行
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/workers.html#terminate-a-worker">终止
                                worker</a>
                            而结束时，实现可能不再保留任何关于该 MediaSource 的已缓冲或可寻址媒体的历史信息；例如，这也可能是
                            <a data-link-type="method" data-lt="close()"
                                href="https://html.spec.whatwg.org/multipage/workers.html#dom-dedicatedworkerglobalscope-close"><code>close</code></a><code>()</code>
                            执行的最终结果。
                        </p>
                    </div>
                    <div class="issue" id="issue-container-number-277">
                        <div role="heading" class="issue-title marker" id="h-issue-2" aria-level="4"><a
                                href="https://github.com/w3c/media-source/issues/277"><span class="issue-number">Issue
                                    277</span></a><span class="issue-label">: MSE-in-Workers：在 MediaSource 的 worker
                                终止时，是否（最终）应让附加的元素进入错误状态/媒体元素应如何处理？<a class="respec-gh-label"
                                    href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                                    style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                                    aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
                        <div class="">
                            <p>
                                当所附加的 worker MediaSource 的上下文被销毁时，是否应当发生某种（最终的）媒体元素错误状态转换？Chromium 的实验性 worker MSE
                                实现会保持元素的 readyState、networkState 和 error 与销毁前一致，但 seekable 与 buffered 属性会各自返回一个空的
                                TimeRange。
                            </p>
                        </div>
                    </div>
                </li>
                <li>令 <var data-type="unrestricted double">recent duration</var> 与
                    <var data-type="normalized
          TimeRanges">recent live seekable range</var> 分别为
                    <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                        id="ref-for-dom-mediasource-duration-12"><code>duration</code></a> 与
                    <a data-link-type="attribute" data-lt="[[live seekable range]]" href="#dfn-live-seekable-range"
                        class="internalDFN"
                        id="ref-for-dfn-live-seekable-range-6"><code>[[live seekable range]]</code></a> 的最新值，按如下方式确定：
                    <dl class="switch">
                        <dt>
                            若该 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-105"><code>MediaSource</code></a> 在
                            <a data-link-type="interface" data-lt="Window"
                                href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                            中构造
                        </dt>
                        <dd>
                            将 <var data-type="unrestricted double">recent duration</var> 设为
                            <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                                id="ref-for-dom-mediasource-duration-13"><code>duration</code></a>，并将 <var>recent live
                                seekable
                                range</var> 设为
                            <a data-link-type="attribute" data-lt="[[live seekable range]]"
                                href="#dfn-live-seekable-range" class="internalDFN"
                                id="ref-for-dfn-live-seekable-range-7"><code>[[live seekable range]]</code></a>。
                        </dd>
                        <dt>
                            否则：
                        </dt>
                        <dd>
                            将 <var data-type="unrestricted double">recent duration</var> 与
                            <var data-type="normalized
          TimeRanges">recent live seekable range</var> 分别设为最近的取值，
                            这些取值由该 <a data-link-type="idl" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-106"><code>MediaSource</code></a> 在每次
                            <a data-link-type="idl" href="#dom-mediasource-duration" class="internalDFN"
                                id="ref-for-dom-mediasource-duration-15"><code>duration</code></a> 或
                            <a data-link-type="attribute" data-lt="[[live seekable range]]"
                                href="#dfn-live-seekable-range" class="internalDFN"
                                id="ref-for-dfn-live-seekable-range-9"><code>[[live seekable range]]</code></a> 变化时，
                            通过向其 <a data-link-type="attribute" data-lt="[[port to main]]" href="#dfn-port-to-main"
                                class="internalDFN" id="ref-for-dfn-port-to-main-10"><code>[[port to main]]</code></a>
                            发送的隐式消息更新。
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl class="switch">
                        <dt>
                            若 <var data-type="unrestricted double">recent duration</var> 等于 NaN：
                        </dt>
                        <dd>
                            返回一个空的
                            <a data-link-type="interface" data-lt="TimeRanges"
                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                            对象。
                        </dd>
                        <dt>
                            若 <var data-type="unrestricted double">recent duration</var> 等于正无穷大：
                        </dt>
                        <dd>
                            <ol>
                                <li>如果 <var data-type="normalized
          TimeRanges">recent live seekable range</var> 非空：
                                    <ol>
                                        <li>令 <var data-type="normalized TimeRanges">union ranges</var> 为
                                            <var>recent live seekable range</var> 与
                                            <a data-link-type="interface" data-lt="HTMLMediaElement"
                                                href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                            的
                                            <a data-link-type="attribute"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                                            属性的并集。
                                        </li>
                                        <li>返回一个单一范围，其起始时间等于
                                            <var data-type="normalized TimeRanges">union ranges</var> 中最早的起始时间，
                                            结束时间等于 <var>union ranges</var> 中最高的结束时间，并中止这些步骤。
                                        </li>
                                    </ol>
                                </li>
                                <li>如果
                                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                    的
                                    <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                                    属性返回一个空的
                                    <a data-link-type="interface" data-lt="TimeRanges"
                                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                    对象，
                                    则返回一个空的 <a data-link-type="interface" data-lt="TimeRanges"
                                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                    对象并中止这些步骤。
                                </li>
                                <li>返回一个单一范围，其起始时间为 0，结束时间等于
                                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                                    的
                                    <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                                    所报告的最高结束时间。
                                </li>
                            </ol>
                        </dd>
                        <dt>
                            否则：
                        </dt>
                        <dd>
                            返回一个单一范围，其起始时间为 0，结束时间等于 <var>recent duration</var>。
                        </dd>
                    </dl>
                </li>
            </ol>
        </section>
        <section id="htmlmediaelement-extensions-buffered">
            <div class="header-wrapper">
                <h3 id="x10-2-htmlmediaelement-s-buffered"><bdi class="secno">10.2 </bdi>
                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    的
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                </h3><a class="self-link" href="#htmlmediaelement-extensions-buffered"
                    aria-label="Permalink for Section 10.2"></a>
            </div>

            <p id="dom-htmlmediaelement.buffered">
                <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-buffered"><code>buffered</code></a>
                属性返回一个静态的
                <a href="https://html.spec.whatwg.org/multipage/media.html#normalised-timeranges-object">规范化 TimeRanges
                    对象</a>，按以下步骤计算。
            </p>
            <ol>
                <li>如果该 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                        id="ref-for-dom-mediasource-107"><code>MediaSource</code></a> 是在一个已终止或正在关闭的
                    <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                        href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                    中构造的，则返回一个空的 <a data-link-type="interface" data-lt="TimeRanges"
                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                    对象并中止这些步骤。
                    <div class="note" role="note" id="issue-container-generatedID-86">
                        <div role="heading" class="note-title marker" id="h-note-86" aria-level="4"><span>注意</span>
                        </div>
                        <p class="">
                            此情况旨在处理如下实现：当一个在 DedicatedWorkerGlobalScope 中构造的 MediaSource 因
                            <a data-link-type="method" data-lt="terminate()"
                                href="https://html.spec.whatwg.org/multipage/workers.html#dom-worker-terminate"><code>terminate</code></a><code>()</code>
                            或用户代理执行
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/workers.html#terminate-a-worker">终止
                                worker</a>
                            而结束时，实现可能不再保留任何关于该 MediaSource 的已缓冲或可寻址媒体的历史信息；例如，这也可能是
                            <a data-link-type="method" data-lt="close()"
                                href="https://html.spec.whatwg.org/multipage/workers.html#dom-dedicatedworkerglobalscope-close"><code>close</code></a><code>()</code>
                            执行的最终结果。
                        </p>
                    </div>
                    <div class="issue" id="issue-container-number-277-0">
                        <div role="heading" class="issue-title marker" id="h-issue-3" aria-level="4"><a
                                href="https://github.com/w3c/media-source/issues/277"><span class="issue-number">Issue
                                    277</span></a><span class="issue-label">: MSE-in-Workers：在 MediaSource 的 worker
                                终止时，是否（最终）应让附加的元素进入错误状态/媒体元素应如何处理？<a class="respec-gh-label"
                                    href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                                    style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                                    aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
                        <div class="">
                            <p>
                                当所附加的 worker MediaSource 的上下文被销毁时，是否应当发生某种（最终的）媒体元素错误状态转换？Chromium 的实验性 worker MSE
                                实现会保持元素的 readyState、networkState 和 error 与销毁前一致，但 seekable 与 buffered 属性会各自返回一个空的
                                TimeRange。
                            </p>
                        </div>
                    </div>
                </li>
                <li>按如下方式确定 <var data-type="normalized TimeRanges">recent intersection ranges</var>：
                    <dl class="switch">
                        <dt>
                            若该 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource" class="internalDFN"
                                id="ref-for-dom-mediasource-108"><code>MediaSource</code></a> 在
                            <a data-link-type="interface" data-lt="Window"
                                href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                            中构造
                        </dt>
                        <dd>
                            <ol>
                                <li>令 <var data-type="normalized TimeRanges">recent intersection ranges</var> 为一个空的
                                    <a data-link-type="interface" data-lt="TimeRanges"
                                        href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                    对象。
                                </li>
                                <li>若 <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                        class="internalDFN"
                                        id="ref-for-dom-mediasource-activesourcebuffers-32"><code>activeSourceBuffers</code></a>.length
                                    不为 0，则运行以下步骤：
                                    <ol>
                                        <li>令 <var data-type="sequence of normalized TimeRanges">active ranges</var> 为对
                                            <a data-link-type="idl" href="#dom-sourcebuffer-buffered"
                                                class="internalDFN"
                                                id="ref-for-dom-sourcebuffer-buffered-8"><code>buffered</code></a>
                                            的返回结果，针对 <a data-link-type="idl" data-lt="SourceBuffer"
                                                href="#dom-sourcebuffer" class="internalDFN"
                                                id="ref-for-dom-sourcebuffer-114"><code>SourceBuffer</code></a> 的每个对象，
                                            这些对象位于
                                            <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                                class="internalDFN"
                                                id="ref-for-dom-mediasource-activesourcebuffers-33"><code>activeSourceBuffers</code></a>
                                            中。
                                        </li>
                                        <li>令 <var data-type="unrestricted double">highest end time</var> 为
                                            <var data-type="sequence of normalized TimeRanges">active ranges</var>
                                            中最大的范围结束时间。
                                        </li>
                                        <li>令 <var data-type="normalized TimeRanges">recent intersection ranges</var>
                                            为一个
                                            <a data-link-type="interface" data-lt="TimeRanges"
                                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>
                                            对象，
                                            其包含从 0 到 <var data-type="unrestricted double">highest end time</var> 的单一范围。
                                        </li>
                                        <li>对于 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                                class="internalDFN"
                                                id="ref-for-dom-sourcebuffer-115"><code>SourceBuffer</code></a>
                                            中的每个对象（位于
                                            <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers"
                                                class="internalDFN"
                                                id="ref-for-dom-mediasource-activesourcebuffers-34"><code>activeSourceBuffers</code></a>
                                            中），运行以下步骤：
                                            <ol>
                                                <li>令 <var data-type="normalized TimeRanges">source ranges</var> 等于当前
                                                    <a data-link-type="idl" href="#dom-sourcebuffer-buffered"
                                                        class="internalDFN"
                                                        id="ref-for-dom-sourcebuffer-buffered-9"><code>buffered</code></a>
                                                    属性返回的范围集合。
                                                </li>
                                                <li>若 <a data-link-type="idl" href="#dom-mediasource-readystate"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediasource-readystate-35"><code>readyState</code></a>
                                                    为 "<a data-link-type="idl" href="#dom-readystate-ended"
                                                        class="internalDFN"
                                                        id="ref-for-dom-readystate-ended-14"><code>ended</code></a>"，
                                                    则将 <var data-type="normalized TimeRanges">source ranges</var>
                                                    中最后一个范围的结束时间设为
                                                    <var data-type="unrestricted double">highest end time</var>。
                                                </li>
                                                <li>令 <var data-type="normalized TimeRanges">new intersection
                                                        ranges</var> 为
                                                    <var data-type="normalized TimeRanges">recent intersection
                                                        ranges</var> 与
                                                    <var>source ranges</var> 的交集。
                                                </li>
                                                <li>用 <var>new intersection ranges</var> 替换
                                                    <var data-type="normalized TimeRanges">recent intersection
                                                        ranges</var> 中的范围。
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </dd>
                        <dt>
                            否则：
                        </dt>
                        <dd>
                            令 <var data-type="normalized TimeRanges">recent intersection ranges</var> 为在
                            <a data-link-type="interface" data-lt="Window"
                                href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                            情况下步骤所得的
                            <a data-link-type="interface" data-lt="TimeRanges"
                                href="https://html.spec.whatwg.org/multipage/media.html#timeranges"><code>TimeRanges</code></a>，
                            但使用位于其
                            <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                            中的该 <a data-link-type="idl" data-lt="MediaSource" href="#dom-mediasource"
                                class="internalDFN" id="ref-for-dom-mediasource-109"><code>MediaSource</code></a> 及其
                            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-117"><code>SourceBuffer</code></a> 对象，
                            并在每次更新
                            <a data-link-type="idl" href="#dom-mediasource-activesourcebuffers" class="internalDFN"
                                id="ref-for-dom-mediasource-activesourcebuffers-35"><code>activeSourceBuffers</code></a>、
                            <a data-link-type="idl" href="#dom-mediasource-readystate" class="internalDFN"
                                id="ref-for-dom-mediasource-readystate-36"><code>readyState</code></a> 或任何会改变各
                            <a data-link-type="idl" href="#dom-sourcebuffer-buffered" class="internalDFN"
                                id="ref-for-dom-sourcebuffer-buffered-10"><code>buffered</code></a> 属性取值的缓冲状态时，
                            通过 <a data-link-type="attribute" data-lt="[[port to main]]" href="#dfn-port-to-main"
                                class="internalDFN" id="ref-for-dfn-port-to-main-11"><code>[[port to main]]</code></a>
                            的隐式消息进行通信。
                            <div class="note" role="note" id="issue-container-generatedID-87">
                                <div role="heading" class="note-title marker" id="h-note-87" aria-level="4">
                                    <span>注意</span>
                                </div>
                                <p class="">
                                    如此频繁地重新计算并通信
                                    <var data-type="normalized TimeRanges">recent intersection ranges</var> 会带来额外开销，
                                    这也是允许实现使用其他机制（如共享内存与锁）按需查询该信息的原因之一，
                                    详见 <a data-link-type="dfn|abstract-op" href="#dfn-cross-context-communication-model"
                                        class="internalDFN"
                                        id="ref-for-dfn-cross-context-communication-model-2">跨上下文通信模型</a>。
                                </p>
                            </div>
                        </dd>
                    </dl>
                </li>
                <li>如果本算法尚未设置该属性的当前值，或 <var>recent intersection ranges</var> 不包含与该属性当前值完全相同的范围信息，
                    则将该属性的当前值更新为 <var>recent intersection ranges</var>。
                </li>
                <li>返回该属性的当前值。
                </li>
            </ol>
        </section>
        <section id="htmlmediaelement-extensions-srcobject">
            <div class="header-wrapper">
                <h3 id="x10-3-htmlmediaelement-s-srcobject"><bdi class="secno">10.3 </bdi>
                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    的
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                </h3><a class="self-link" href="#htmlmediaelement-extensions-srcobject"
                    aria-label="Permalink for Section 10.3"></a>
            </div>

            <p>
                如果某个 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                属性被赋值为一个
                <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                    id="ref-for-dom-mediasourcehandle-30"><code>MediaSourceHandle</code></a>，则在调用元素的加载算法之前，
                作为扩展的 <a data-link-type="interface" data-lt="HTMLMediaElement"
                    href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                的 <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-srcobject"><code>srcObject</code></a>
                setter 的同步步骤的一部分，将该
                <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle" class="internalDFN"
                    id="ref-for-dom-mediasourcehandle-31"><code>MediaSourceHandle</code></a> 的
                <a data-link-type="attribute" data-lt="[[has ever been assigned as srcobject]]"
                    href="#dfn-has-ever-been-assigned-as-srcobject" class="internalDFN"
                    id="ref-for-dfn-has-ever-been-assigned-as-srcobject-2"><code>[[has ever been assigned as srcobject]]</code></a>
                设为 true。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-88">
                <div role="heading" class="note-title marker" id="h-note-88" aria-level="4"><span>注意</span></div>
                <p class="">
                    这可防止再次传输该
                    <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                        class="internalDFN" id="ref-for-dom-mediasourcehandle-32"><code>MediaSourceHandle</code></a> 对象，
                    并在尝试时提供明确的同步异常。
                </p>
            </div>
            <div class="issue" id="issue-container-generatedID-89">
                <div role="heading" class="issue-title marker" id="h-issue-4" aria-level="4"><span>Issue</span></div>
                <p class="">
                    需要将
                    <a data-link-type="idl" data-lt="MediaSourceHandle" href="#dom-mediasourcehandle"
                        class="internalDFN" id="ref-for-dom-mediasourcehandle-33"><code>MediaSourceHandle</code></a>
                    添加到
                    <a data-link-type="interface" data-lt="HTMLMediaElement"
                        href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
                    的
                    MediaProvider IDL typedef 及其与媒体提供者对象相关的文本中。
                </p>
            </div>
        </section>
    </section>
    <section id="audio-track-extensions">
        <div class="header-wrapper">
            <h2 id="x11-audiotrack-extensions"><bdi class="secno">11. </bdi>
                <code>AudioTrack</code> 扩展
            </h2><a class="self-link" href="#audio-track-extensions" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            本节对 [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            中 <a data-link-type="interface" data-lt="AudioTrack"
                href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a> 的定义进行扩展。
        </p>
        <div>
            <pre class="idl def" id="webidl-935490083"><span class="idlHeader"><a class="self-link" href="#webidl-935490083">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-audiotrack-partial-1" data-title="AudioTrack">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="AudioTrack" class="idlID" data-dfn-for="AudioTrack" href="https://html.spec.whatwg.org/multipage/media.html#audiotrack">AudioTrack</a> {<span data-idl="" class="idlAttribute" id="idl-def-audiotrack-sourcebuffer" data-title="sourceBuffer" data-dfn-for="AudioTrack">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-118"><code>SourceBuffer</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-audiotrack-sourcebuffer" id="ref-for-dom-audiotrack-sourcebuffer-2"><code>sourceBuffer</code></a>;</span>
};</span></code></pre>
            <div class="issue" id="issue-container-number-280-0">
                <div role="heading" class="issue-title marker" id="h-issue-5" aria-level="3"><a
                        href="https://github.com/w3c/media-source/issues/280"><span class="issue-number">Issue
                            280</span></a><span class="issue-label">: MSE-in-Workers: {Audio,Video,Text}Track{,List} 在
                        HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker <a class="respec-gh-label"
                            href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                            style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                            aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
                <div class="">
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] 中的 <a data-link-type="interface" data-lt="AudioTrack"
                        href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>
                    需要同时对 Window 与 DedicatedWorker 暴露。
                </div>
            </div>
            <section>
                <div class="header-wrapper">
                    <h3 id="attributes-4">
                        属性
                    </h3><a class="self-link" href="#attributes-4" aria-label="Permalink for this Section"></a>
                </div>
                <dl class="attributes" data-dfn-for="AudioTrack">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-audiotrack-sourcebuffer"
                            data-idl="attribute" data-title="sourceBuffer" data-dfn-for="AudioTrack"
                            data-type="SourceBuffer" data-lt="sourceBuffer" data-local-lt="AudioTrack.sourceBuffer"
                            tabindex="0" aria-haspopup="dialog"><code>sourceBuffer</code></dfn>，类型为 <span
                            class="idlAttrType"><a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-119"><code>SourceBuffer</code></a></span>，
                        只读，且可为空
                    </dt>
                    <dd>
                        <p>
                            获取时，运行以下步骤：
                        </p>
                        <dl class="switch">
                            <dt>
                                如果此轨道是由与该轨道处于同一
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a>
                                中创建的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-120"><code>SourceBuffer</code></a>
                                所创建，且该 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-121"><code>SourceBuffer</code></a>
                                尚未从其 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-sourcebuffers-34"><code>sourceBuffers</code></a>
                                属性（属于其 <a data-link-type="dfn|abstract-op" href="#parent-media-source"
                                    class="internalDFN" id="ref-for-parent-media-source-33">父媒体源</a>）中被移除：
                            </dt>
                            <dd>
                                返回创建此轨道的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-122"><code>SourceBuffer</code></a>。
                            </dd>
                            <dt>
                                否则：
                            </dt>
                            <dd>
                                返回 null。
                            </dd>
                        </dl>
                        <div class="note" role="note" id="issue-container-generatedID-90">
                            <div role="heading" class="note-title marker" id="h-note-89" aria-level="4">
                                <span>注意</span>
                            </div>
                            <div class="">
                                例如，若某个 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-123"><code>SourceBuffer</code></a>
                                通知其在 <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中的内部 <code>create track mirror</code> 处理器创建了此轨道，则该轨道在
                                <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中的副本对本属性将返回 null。
                            </div>
                        </div>
                    </dd>
                </dl>
            </section>
        </div>
    </section>
    <section id="video-track-extensions">
        <div class="header-wrapper">
            <h2 id="x12-videotrack-extensions"><bdi class="secno">12. </bdi>
                <code>VideoTrack</code> 扩展
            </h2><a class="self-link" href="#video-track-extensions" aria-label="Permalink for Section 12."></a>
        </div>

        <p>
            本节对 [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            中 <a data-link-type="interface" data-lt="VideoTrack"
                href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
            的定义进行扩展。
        </p>
        <div>
            <pre class="idl def" id="webidl-251527976"><span class="idlHeader"><a class="self-link" href="#webidl-251527976">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-videotrack-partial-1" data-title="VideoTrack">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="VideoTrack" class="idlID" data-dfn-for="VideoTrack" href="https://html.spec.whatwg.org/multipage/media.html#videotrack">VideoTrack</a> {<span data-idl="" class="idlAttribute" id="idl-def-videotrack-sourcebuffer" data-title="sourceBuffer" data-dfn-for="VideoTrack">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-124"><code>SourceBuffer</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-videotrack-sourcebuffer" id="ref-for-dom-videotrack-sourcebuffer-2"><code>sourceBuffer</code></a>;</span>
};</span></code></pre>
            <div class="issue" id="issue-container-number-280-1">
                <div role="heading" class="issue-title marker" id="h-issue-6" aria-level="3"><a
                        href="https://github.com/w3c/media-source/issues/280"><span class="issue-number">Issue
                            280</span></a><span class="issue-label">: MSE-in-Workers: {Audio,Video,Text}Track{,List} 在
                        HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker <a class="respec-gh-label"
                            href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                            style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                            aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
                <div class="">
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] 中的 <a data-link-type="interface" data-lt="VideoTrack"
                        href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a>
                    需要同时对 Window 与 DedicatedWorker 暴露。
                </div>
            </div>
            <section>
                <div class="header-wrapper">
                    <h3 id="attributes-5">
                        属性
                    </h3><a class="self-link" href="#attributes-5" aria-label="Permalink for this Section"></a>
                </div>
                <dl class="attributes" data-dfn-for="VideoTrack">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-videotrack-sourcebuffer"
                            data-idl="attribute" data-title="sourceBuffer" data-dfn-for="VideoTrack"
                            data-type="SourceBuffer" data-lt="sourceBuffer" data-local-lt="VideoTrack.sourceBuffer"
                            tabindex="0" aria-haspopup="dialog"><code>sourceBuffer</code></dfn>，类型为 <span
                            class="idlAttrType"><a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-125"><code>SourceBuffer</code></a></span>，
                        只读，且可为空
                    </dt>
                    <dd>
                        <p>
                            获取时，运行以下步骤：
                        </p>
                        <dl class="switch">
                            <dt>
                                如果此轨道是由与该轨道处于同一
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a>
                                中创建的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-126"><code>SourceBuffer</code></a>
                                所创建，且该 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-127"><code>SourceBuffer</code></a>
                                尚未从其 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-sourcebuffers-35"><code>sourceBuffers</code></a>
                                属性（属于其 <a data-link-type="dfn|abstract-op" href="#parent-media-source"
                                    class="internalDFN" id="ref-for-parent-media-source-34">父媒体源</a>）中被移除：
                            </dt>
                            <dd>
                                返回创建此轨道的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-128"><code>SourceBuffer</code></a>。
                            </dd>
                            <dt>
                                否则：
                            </dt>
                            <dd>
                                返回 null。
                            </dd>
                        </dl>
                        <div class="note" role="note" id="issue-container-generatedID-91">
                            <div role="heading" class="note-title marker" id="h-note-90" aria-level="4">
                                <span>注意</span>
                            </div>
                            <div class="">
                                例如，若某个 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-129"><code>SourceBuffer</code></a>
                                通知其在 <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中的内部 <code>create track mirror</code> 处理器创建了此轨道，则该轨道在
                                <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中的副本对本属性将返回 null。
                            </div>
                        </div>
                    </dd>
                </dl>
            </section>
        </div>
    </section>
    <section id="text-track-extensions">
        <div class="header-wrapper">
            <h2 id="x13-texttrack-extensions"><bdi class="secno">13. </bdi>
                <code>TextTrack</code> 扩展
            </h2><a class="self-link" href="#text-track-extensions" aria-label="Permalink for Section 13."></a>
        </div>

        <p>
            本节对 [<cite><a class="bibref" data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            中 <a data-link-type="interface" data-lt="TextTrack"
                href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
            的定义进行扩展。
        </p>
        <div>
            <pre class="idl def" id="webidl-959897060"><span class="idlHeader"><a class="self-link" href="#webidl-959897060">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-texttrack-partial-1" data-title="TextTrack">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,DedicatedWorker)</span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="TextTrack" class="idlID" data-dfn-for="TextTrack" href="https://html.spec.whatwg.org/multipage/media.html#texttrack">TextTrack</a> {<span data-idl="" class="idlAttribute" id="idl-def-texttrack-sourcebuffer" data-title="sourceBuffer" data-dfn-for="TextTrack">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-sourcebuffer" class="internalDFN" id="ref-for-dom-sourcebuffer-130"><code>SourceBuffer</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-texttrack-sourcebuffer" id="ref-for-dom-texttrack-sourcebuffer-2"><code>sourceBuffer</code></a>;</span>
};</span></code></pre>
            <div class="issue" id="issue-container-number-280-2">
                <div role="heading" class="issue-title marker" id="h-issue-7" aria-level="3"><a
                        href="https://github.com/w3c/media-source/issues/280"><span class="issue-number">Issue
                            280</span></a><span class="issue-label">: MSE-in-Workers: {Audio,Video,Text}Track{,List} 在
                        HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker <a class="respec-gh-label"
                            href="https://github.com/w3c/media-source/issues/?q=is%3Aissue+is%3Aopen+label%3A%22mse-in-workers%22"
                            style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);"
                            aria-label="GitHub label: mse-in-workers">mse-in-workers</a></span></div>
                <div class="">
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] 中的 <a data-link-type="interface" data-lt="TextTrack"
                        href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                    需要同时对 Window 与 DedicatedWorker 暴露。
                </div>
            </div>
            <section>
                <div class="header-wrapper">
                    <h3 id="attributes-6">
                        属性
                    </h3><a class="self-link" href="#attributes-6" aria-label="Permalink for this Section"></a>
                </div>
                <dl class="attributes" data-dfn-for="TextTrack">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-texttrack-sourcebuffer"
                            data-idl="attribute" data-title="sourceBuffer" data-dfn-for="TextTrack"
                            data-type="SourceBuffer" data-lt="sourceBuffer" data-local-lt="TextTrack.sourceBuffer"
                            tabindex="0" aria-haspopup="dialog"><code>sourceBuffer</code></dfn>，类型为 <span
                            class="idlAttrType"><a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                class="internalDFN"
                                id="ref-for-dom-sourcebuffer-131"><code>SourceBuffer</code></a></span>，
                        只读，且可为空
                    </dt>
                    <dd>
                        <p>
                            获取时，运行以下步骤：
                        </p>
                        <dl class="switch">
                            <dt>
                                如果此轨道是由与该轨道处于同一
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a>
                                中创建的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-132"><code>SourceBuffer</code></a>
                                所创建，且该 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-133"><code>SourceBuffer</code></a>
                                尚未从其 <a data-link-type="idl" href="#dom-mediasource-sourcebuffers" class="internalDFN"
                                    id="ref-for-dom-mediasource-sourcebuffers-36"><code>sourceBuffers</code></a>
                                属性（属于其 <a data-link-type="dfn|abstract-op" href="#parent-media-source"
                                    class="internalDFN" id="ref-for-parent-media-source-35">父媒体源</a>）中被移除：
                            </dt>
                            <dd>
                                返回创建此轨道的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-134"><code>SourceBuffer</code></a>。
                            </dd>
                            <dt>
                                否则：
                            </dt>
                            <dd>
                                返回 null。
                            </dd>
                        </dl>
                        <div class="note" role="note" id="issue-container-generatedID-92">
                            <div role="heading" class="note-title marker" id="h-note-91" aria-level="4">
                                <span>注意</span>
                            </div>
                            <div class="">
                                例如，若某个 <a data-link-type="interface" data-lt="DedicatedWorkerGlobalScope"
                                    href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope"><code>DedicatedWorkerGlobalScope</code></a>
                                的 <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer"
                                    class="internalDFN" id="ref-for-dom-sourcebuffer-135"><code>SourceBuffer</code></a>
                                通知其在 <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中的内部 <code>create track mirror</code> 处理器创建了此轨道，则该轨道在
                                <a data-link-type="interface" data-lt="Window"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>
                                中的副本对本属性将返回 null。
                            </div>
                        </div>
                    </dd>
                </dl>
            </section>
        </div>
    </section>
    <section id="byte-stream-formats">
        <div class="header-wrapper">
            <h2 id="x14-byte-stream-formats"><bdi class="secno">14. </bdi>
                <dfn data-export="" id="dfn-byte-stream-formats" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">字节流格式</dfn>
            </h2><a class="self-link" href="#byte-stream-formats" aria-label="Permalink for Section 14."></a>
        </div>

        <p>
            通过 <a data-link-type="idl" data-lt="appendBuffer()" href="#dom-sourcebuffer-appendbuffer"
                class="internalDFN"
                id="ref-for-dom-sourcebuffer-appendbuffer-12"><code>appendBuffer</code></a><code>()</code> 提供给 <a
                data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                id="ref-for-dom-sourcebuffer-136"><code>SourceBuffer</code></a> 的字节构成一个
            逻辑字节流。此类字节流的格式与语义由 <dfn id="byte-stream-format-specs" data-plurals="byte stream format specification"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">字节流格式规范</dfn> 定义。字节流格式
            注册表 [<cite><a class="bibref" data-link-type="biblio" href="#bib-mse-registry"
                    title="Media Source Extensions™ Byte Stream Format Registry">MSE-REGISTRY</a></cite>] 提供了可传递给
            <a data-link-type="idl" data-lt="addSourceBuffer()" href="#dom-mediasource-addsourcebuffer"
                class="internalDFN"
                id="ref-for-dom-mediasource-addsourcebuffer-12"><code>addSourceBuffer</code></a><code>()</code>、<a
                data-link-type="idl" data-lt="isTypeSupported()" href="#dom-mediasource-istypesupported"
                class="internalDFN"
                id="ref-for-dom-mediasource-istypesupported-4"><code>isTypeSupported</code></a><code>()</code> 或
            <a data-link-type="idl" data-lt="changeType()" href="#dom-sourcebuffer-changetype" class="internalDFN"
                id="ref-for-dom-sourcebuffer-changetype-17"><code>changeType</code></a><code>()</code> 的 MIME 类型与
            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                id="ref-for-dom-sourcebuffer-137"><code>SourceBuffer</code></a> 在解析新追加数据时所期望的字节流格式之间的映射。
            鼓励各实现为其支持的字节流格式注册映射，以促进互操作性。字节流格式注册表
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-mse-registry"
                    title="Media Source Extensions™ Byte Stream Format Registry">MSE-REGISTRY</a></cite>] 是这些
            映射的权威来源。若某实现宣称支持注册表中列出的某个 MIME 类型，则其
            <a data-link-type="idl" data-lt="SourceBuffer" href="#dom-sourcebuffer" class="internalDFN"
                id="ref-for-dom-sourcebuffer-138"><code>SourceBuffer</code></a> 实现 <em class="rfc2119">必须</em> 遵循注册项中所列的
            <a data-link-type="dfn|abstract-op" href="#byte-stream-format-specs" class="internalDFN"
                id="ref-for-byte-stream-format-specs-7">字节流格式规范</a>。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-93">
            <div role="heading" class="note-title marker" id="h-note-92" aria-level="3"><span>注意</span></div>
            <p class="">
                注册表中的字节流格式规范并不意在定义新的存储格式。它们仅概述了本规范实现所接受的
                既有存储格式结构的子集。
            </p>
        </div>
        <div class="note" role="note" id="issue-container-generatedID-94">
            <div role="heading" class="note-title marker" id="h-note-93" aria-level="3"><span>注意</span></div>
            <p class="">
                字节流格式的解析与校验由 <a data-link-type="dfn|abstract-op" href="#dfn-segment-parser-loop" class="internalDFN"
                    id="ref-for-dfn-segment-parser-loop-5">分段解析循环</a>
                算法实现。
            </p>
        </div>
        <p>
            本节为所有字节流格式规范提供通用要求：
        </p>
        <ul>
            <li>字节流格式规范 <em class="rfc2119">必须</em> 定义 <a data-link-type="dfn|abstract-op"
                    href="#dfn-initialization-segment" class="internalDFN"
                    id="ref-for-dfn-initialization-segment-33">初始化分段</a> 与 <a data-link-type="dfn|abstract-op"
                    href="#dfn-media-segment" class="internalDFN" id="ref-for-dfn-media-segment-15">媒体分段</a>。
            </li>
            <li>字节流格式 <em class="rfc2119">应当</em> 提供从 <a data-link-type="dfn|abstract-op"
                    href="#dfn-initialization-segment" class="internalDFN"
                    id="ref-for-dfn-initialization-segment-34">初始化分段</a> 数据中
                引用 <a data-link-type="interface" data-lt="AudioTrack"
                    href="https://html.spec.whatwg.org/multipage/media.html#audiotrack"><code>AudioTrack</code></a>、
                <a data-link-type="interface" data-lt="VideoTrack"
                    href="https://html.spec.whatwg.org/multipage/media.html#videotrack"><code>VideoTrack</code></a> 与
                <a data-link-type="interface" data-lt="TextTrack"
                    href="https://html.spec.whatwg.org/multipage/media.html#texttrack"><code>TextTrack</code></a>
                属性值的映射参考。
                <div class="note" role="note" id="issue-container-generatedID-95">
                    <div role="heading" class="note-title marker" id="h-note-94" aria-level="3"><span>注意</span></div>
                    <p class="">
                        若某字节流格式涵盖的格式与带内轨道规范
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-inbandtracks"
                                title="Sourcing In-band Media Resource Tracks from Media Containers into HTML">INBANDTRACKS</a></cite>]
                        所覆盖的某种格式相似，则其 <em class="rfc2119">应当</em> 力求使用相同的属性映射，以便
                        使用与不使用 Media Source Extensions 的播放能提供相同的轨道信息。
                    </p>
                </div>
            </li>
            <li><em class="rfc2119">必须</em> 仅通过检查字节流本身即可识别分段边界与分段类型（初始化或媒体）。
            </li>
            <li>当满足以下任一条件时，用户代理 <em class="rfc2119">必须</em> 运行 <a data-link-type="dfn|abstract-op"
                    href="#dfn-append-error" class="internalDFN" id="ref-for-dfn-append-error-8">追加错误</a>
                算法：
                <ol>
                    <li>
                        <p>
                            轨道的数量与类型不一致。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-96">
                            <div role="heading" class="note-title marker" id="h-note-95" aria-level="3">
                                <span>注意</span>
                            </div>
                            <p class="">
                                例如，若首个 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-35">初始化分段</a> 包含 2 条音轨与 1
                                条视频轨，
                                则其后字节流中的所有 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-36">初始化分段</a>
                                <em class="rfc2119">必须</em> 描述 2 条音轨与 1 条视频轨。
                            </p>
                        </div>
                    </li>
                    <li><a data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                            id="ref-for-dfn-track-id-9">Track ID</a> 在多个同类型轨道（例如 2 条音轨）的
                        不同 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment" class="internalDFN"
                            id="ref-for-dfn-initialization-segment-37">初始化分段</a> 间不一致。
                    </li>
                    <li>
                        <p>
                            不受支持的编解码器变更出现在不同的 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment"
                                class="internalDFN" id="ref-for-dfn-initialization-segment-38">初始化分段</a> 之间。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-97">
                            <div role="heading" class="note-title marker" id="h-note-96" aria-level="3">
                                <span>注意</span>
                            </div>
                            <p class="">
                                参见 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment-received"
                                    class="internalDFN" id="ref-for-dfn-initialization-segment-received-2">接收到初始化分段</a>
                                算法、
                                <a data-link-type="idl" data-lt="addSourceBuffer()"
                                    href="#dom-mediasource-addsourcebuffer" class="internalDFN"
                                    id="ref-for-dom-mediasource-addsourcebuffer-13"><code>addSourceBuffer</code></a><code>()</code>
                                与 <a data-link-type="idl" data-lt="changeType()" href="#dom-sourcebuffer-changetype"
                                    class="internalDFN"
                                    id="ref-for-dom-sourcebuffer-changetype-18"><code>changeType</code></a><code>()</code>
                                以了解编解码器变更的细节与示例。
                            </p>
                        </div>
                    </li>
                </ol>
            </li>
            <li>用户代理 <em class="rfc2119">必须</em> 支持以下内容：
                <ol>
                    <li><a data-link-type="dfn|abstract-op" href="#dfn-track-id" class="internalDFN"
                            id="ref-for-dfn-track-id-10">Track ID</a> 在不同 <a data-link-type="dfn|abstract-op"
                            href="#dfn-initialization-segment" class="internalDFN"
                            id="ref-for-dfn-initialization-segment-39">初始化分段</a> 间发生变化，前提是每种类型仅有一条轨道。
                    </li>
                    <li>
                        <p>
                            视频帧尺寸变化。用户代理 <em class="rfc2119">必须</em> 支持无缝播放。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-98">
                            <div role="heading" class="note-title marker" id="h-note-97" aria-level="3">
                                <span>注意</span>
                            </div>
                            <p class="">
                                如果网页未通过 CSS 或 HTML（width/height）限制元素大小，这将导致 &lt;video&gt; 的显示区域尺寸发生变化。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            音频声道数变化。用户代理 <em class="rfc2119">可以</em> 无缝支持，并可能触发下混。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-99">
                            <div role="heading" class="note-title marker" id="h-note-98" aria-level="3">
                                <span>注意</span>
                            </div>
                            <p class="">
                                这是实现质量问题，因为更改声道数可能需要重新初始化音频设备、重采样器与声道混合器，往往会被听到。
                            </p>
                        </div>
                    </li>
                </ol>
            </li>
            <li>以下规则适用于字节流中的所有 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                    id="ref-for-dfn-media-segment-16">媒体分段</a>。用户代理
                <em class="rfc2119">必须</em>：
                <ol>
                    <li>将所有时间戳映射到同一 <a
                            href="https://html.spec.whatwg.org/multipage/media.html#media-timeline">媒体时间线</a>。
                    </li>
                    <li>支持时间戳间隙小于音频帧大小的 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment"
                            class="internalDFN" id="ref-for-dfn-media-segment-17">媒体分段</a> 的无缝播放。用户代理 <em
                            class="rfc2119">不得</em> 在
                        <a data-link-type="idl" href="#dom-sourcebuffer-buffered" class="internalDFN"
                            id="ref-for-dom-sourcebuffer-buffered-11"><code>buffered</code></a> 属性中反映这些间隙。
                        <div class="note" role="note" id="issue-container-generatedID-100">
                            <div role="heading" class="note-title marker" id="h-note-99" aria-level="3">
                                <span>注意</span>
                            </div>
                            <p class="">
                                旨在简化在音频流之间切换的情形，此时不同编码的帧边界并不总是对齐（例如 Vorbis）。
                            </p>
                        </div>
                    </li>
                </ol>
            </li>
            <li>当某个 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-segment" class="internalDFN"
                    id="ref-for-dfn-initialization-segment-40">初始化分段</a> 与任何一段连续的
                <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                    id="ref-for-dfn-media-segment-18">媒体分段</a> 的任意组合满足如下条件时，用户代理 <em class="rfc2119">必须</em> 运行
                <a data-link-type="dfn|abstract-op" href="#dfn-append-error" class="internalDFN"
                    id="ref-for-dfn-append-error-9">追加错误</a> 算法：
                <ol>
                    <li>无法识别 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                            id="ref-for-dfn-media-segment-19">媒体分段</a> 中所有轨道的数量与类型（音频、视频、文本等）。
                    </li>
                    <li>未提供解码每条轨道所需的解码能力（即编解码器及其参数）。
                    </li>
                    <li>对于所有加密轨道，未提供解密内容所需的加密参数（加密密钥本身除外）。
                    </li>
                    <li>未提供用于解码与呈现该连续 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                            id="ref-for-dfn-media-segment-20">媒体分段</a>
                        中最早的 <a data-link-type="dfn|abstract-op" href="#random-access-point" class="internalDFN"
                            id="ref-for-random-access-point-11">随机访问点</a>
                        以及后续（按呈现时间顺序）样本所需的全部信息。具体包括：
                        <ul>
                            <li>用于确定视频的 <a
                                    href="https://html.spec.whatwg.org/multipage/media.html#concept-video-intrinsic-width">固有宽度与高度</a>
                                的信息（具体而言，需要图片或像素纵横比与编码分辨率）。
                            </li>
                            <li>将视频解码器输出转换为可显示格式所需的信息
                            </li>
                        </ul>
                    </li>
                    <li>未提供计算该连续 <a data-link-type="dfn|abstract-op" href="#dfn-media-segment" class="internalDFN"
                            id="ref-for-dfn-media-segment-21">媒体分段</a>
                        中每个样本的全局 <a data-link-type="dfn|abstract-op" href="#presentation-timestamp" class="internalDFN"
                            id="ref-for-presentation-timestamp-42">呈现时间戳</a> 所需的信息。
                    </li>
                </ol>
                <p>
                    例如，若 I1 与 M1、M2、M3 关联，则上述要求 <em class="rfc2119">必须</em> 对所有组合成立，
                    如 I1+M1、I1+M2、I1+M1+M2、I1+M2+M3 等。
                </p>
            </li>
        </ul>
        <p>
            字节流规范 <em class="rfc2119">必须</em> 至少定义保证上述要求成立的约束。为简化实现等目的，<em class="rfc2119">可以</em> 定义额外约束。
        </p>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x15-conformance"><bdi class="secno">15. </bdi>一致性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 15."></a>
        </div>
        <p>除标记为非规范性的章节外，本规范中的所有编写指南、图示、示例与注记均为非规范性内容。除此之外的内容均为规范性内容。</p>
        <p>
            本文中的关键词 <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST
                NOT</em>、<em class="rfc2119">SHOULD</em> 与 <em class="rfc2119">SHOULD NOT</em> 按照
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] 与 [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            的描述进行解释，且仅当这些词以大写形式出现时（如本段所示）方适用。
        </p>
    </section>
    <section id="examples">
        <div class="header-wrapper">
            <h2 id="x16-examples"><bdi class="secno">16. </bdi>
                示例
            </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 16."></a>
        </div>

        <section id="using-media-source-extensions">
            <div class="header-wrapper">
                <h3 id="x16-1-using-media-source-extensions"><bdi class="secno">16.1 </bdi>
                    使用 Media Source Extensions
                </h3><a class="self-link" href="#using-media-source-extensions"
                    aria-label="Permalink for Section 16.1"></a>
            </div>
            <div class="example" id="example-1">
                <div class="marker">
                    <a class="self-link" href="#example-1">示例<bdi> 1</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"v"</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
<span class="hljs-keyword">const</span> mediaSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaSource</span>();
mediaSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"sourceopen"</span>, onSourceOpen);
video.<span class="hljs-property">src</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(mediaSource);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onSourceOpen</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-keyword">const</span> mediaSource = e.<span class="hljs-property">target</span>;

  <span class="hljs-keyword">if</span> (mediaSource.<span class="hljs-property">sourceBuffers</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> sourceBuffer = mediaSource.<span class="hljs-title function_">addSourceBuffer</span>(
    <span class="hljs-string">'video/webm; codecs="vorbis,vp8"'</span>,
  );

  video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"seeking"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">onSeeking</span>(mediaSource, e.<span class="hljs-property">target</span>));
  video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"progress"</span>, <span class="hljs-function">() =&gt;</span>
    <span class="hljs-title function_">appendNextMediaSegment</span>(mediaSource),
  );

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> initSegment = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getInitializationSegment</span>();

    <span class="hljs-keyword">if</span> (initSegment == <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// 获取初始化分段出错。使用错误结束流。</span>
      mediaSource.<span class="hljs-title function_">endOfStream</span>(<span class="hljs-string">"network"</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 追加初始化分段。</span>
    sourceBuffer.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"updateend"</span>, <span class="hljs-keyword">function</span> <span class="hljs-title function_">firstAppendHandler</span>(<span class="hljs-params"></span>) {
      sourceBuffer.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"updateend"</span>, firstAppendHandler);

      <span class="hljs-comment">// 追加一些初始媒体数据。</span>
      <span class="hljs-title function_">appendNextMediaSegment</span>(mediaSource);
    });

    sourceBuffer.<span class="hljs-title function_">appendBuffer</span>(initSegment);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// 处理在获取初始化分段期间可能发生的错误。</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"获取初始化分段出错："</span>, error);
    mediaSource.<span class="hljs-title function_">endOfStream</span>(<span class="hljs-string">"network"</span>);
  }
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">appendNextMediaSegment</span>(<span class="hljs-params">mediaSource</span>) {
  <span class="hljs-keyword">if</span> (
    mediaSource.<span class="hljs-property">readyState</span> === <span class="hljs-string">"closed"</span> ||
    mediaSource.<span class="hljs-property">sourceBuffers</span>[<span class="hljs-number">0</span>].<span class="hljs-property">updating</span>
  )
    <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 若流数据已用尽，则结束流。</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">haveMoreMediaSegments</span>()) {
    mediaSource.<span class="hljs-title function_">endOfStream</span>();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> mediaSegment = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getNextMediaSegment</span>();

    <span class="hljs-comment">// <span class="hljs-doctag">注意:</span> 若 mediaSource.readyState == "ended"，此 appendBuffer() 调用将</span>
    <span class="hljs-comment">// 使其状态转为 "open"。Web 应用应准备处理多个 "sourceopen" 事件。</span>
    mediaSource.<span class="hljs-property">sourceBuffers</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">appendBuffer</span>(mediaSegment);
  }
  <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// 处理在获取媒体分段期间可能发生的错误。</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"获取媒体分段出错："</span>, error);
    mediaSource.<span class="hljs-title function_">endOfStream</span>(<span class="hljs-string">"network"</span>);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onSeeking</span>(<span class="hljs-params">mediaSource, video</span>) {
  <span class="hljs-keyword">if</span> (mediaSource.<span class="hljs-property">readyState</span> === <span class="hljs-string">"open"</span>) {
    <span class="hljs-comment">// 中止当前分段追加。</span>
    mediaSource.<span class="hljs-property">sourceBuffers</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">abort</span>();
  }

  <span class="hljs-comment">// 通知媒体分段加载逻辑从新的播放位置开始抓取数据。</span>
  <span class="hljs-title function_">seekToMediaSegmentAt</span>(video.<span class="hljs-property">currentTime</span>);

  <span class="hljs-comment">// 从新的播放位置追加一个媒体分段。</span>
  <span class="hljs-title function_">appendNextMediaSegment</span>(mediaSource);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">onProgress</span>(<span class="hljs-params">mediaSource, e</span>) {
  <span class="hljs-title function_">appendNextMediaSegment</span>(mediaSource);
}

<span class="hljs-comment">// 获取初始化分段的异步函数示例</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getInitializationSegment</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 在此实现获取初始化分段的逻辑</span>
  <span class="hljs-comment">// 这里只是占位函数</span>
}

<span class="hljs-comment">// 检查是否还有更多媒体分段的示例函数</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">haveMoreMediaSegments</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 在此实现是否仍有更多媒体分段的判断逻辑</span>
  <span class="hljs-comment">// 这里只是占位函数</span>
}

<span class="hljs-comment">// 获取下一个媒体分段的示例函数</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getNextMediaSegment</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 在此实现获取下一个媒体分段的逻辑</span>
  <span class="hljs-comment">// 这里只是占位函数</span>
}

<span class="hljs-comment">// 跳转到特定媒体分段的示例函数</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">seekToMediaSegmentAt</span>(<span class="hljs-params">currentTime</span>) {
  <span class="hljs-comment">// 在此实现跳转逻辑</span>
  <span class="hljs-comment">// 这里只是占位函数</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="using-a-managed-media-source">
            <div class="header-wrapper">
                <h3 id="x16-2-using-a-managed-media-source"><bdi class="secno">16.2 </bdi>
                    使用受管媒体源（Managed Media Source）
                </h3><a class="self-link" href="#using-a-managed-media-source"
                    aria-label="Permalink for Section 16.2"></a>
            </div>
            <div class="example" id="example-2">
                <div class="marker">
                    <a class="self-link" href="#example-2">示例<bdi> 2</bdi></a>
                </div>
                <pre
                    aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setUpVideoStream</span>(<span class="hljs-params"></span>) {
  <span class="hljs-comment">// 指定的视频格式与编解码器</span>
  <span class="hljs-keyword">const</span> mediaType = <span class="hljs-string">'video/mp4; codecs="mp4a.40.2,avc1.4d4015"'</span>;

  <span class="hljs-comment">// 检查该视频格式/编解码器是否受支持。</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">ManagedMediaSource</span>?.<span class="hljs-title function_">isTypeSupported</span>(mediaType)) {
    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// 不受支持，采取其他方案。</span>
  }

  <span class="hljs-comment">// 设置视频与其受管源。</span>
  <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"video"</span>);
  <span class="hljs-keyword">const</span> source = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ManagedMediaSource</span>();

  video.<span class="hljs-property">controls</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    video.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(source);
    source.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"sourceopen"</span>, resolve, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(video);
  });

  <span class="hljs-keyword">const</span> sourceBuffer = source.<span class="hljs-title function_">addSourceBuffer</span>(mediaType);

  <span class="hljs-comment">// 设置事件处理程序</span>
  sourceBuffer.<span class="hljs-property">onbufferedchange</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"触发 onbufferedchange 事件。"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`新增范围: <span class="hljs-subst">${timeRangesToString(e.addedRanges)}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`移除范围: <span class="hljs-subst">${timeRangesToString(e.removedRanges)}</span>`</span>);
  };

  source.<span class="hljs-property">onstartstreaming</span> = <span class="hljs-title function_">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"./videos/bipbop.mp4"</span>);
    <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">arrayBuffer</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      sourceBuffer.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"updateend"</span>, resolve, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
      sourceBuffer.<span class="hljs-title function_">appendBuffer</span>(buffer);
    });
  };

  source.<span class="hljs-property">onendstreaming</span> = <span class="hljs-title function_">async</span> () =&gt; {
    <span class="hljs-comment">// 在此停止抓取新分段</span>
  };
}

<span class="hljs-comment">// 辅助函数...</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">timeRangesToString</span>(<span class="hljs-params">timeRanges</span>) {
  <span class="hljs-keyword">const</span> ranges = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; timeRanges.<span class="hljs-property">length</span>; i++) {
    ranges.<span class="hljs-title function_">push</span>([timeRanges.<span class="hljs-title function_">start</span>(i), timeRanges.<span class="hljs-title function_">end</span>(i)]);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">"["</span> + ranges.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[start, end]</span>) =&gt;</span> <span class="hljs-string">`[<span class="hljs-subst">${start}</span>, <span class="hljs-subst">${end}</span>)`</span> ) + <span class="hljs-string">"]"</span>;     
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">"setUpVideoStream()"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>
            </div>
        </section>
    </section>
    <section id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="x17-acknowledgments"><bdi class="secno">17. </bdi>
                致谢
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Section 17."></a>
        </div>

        <p>
            编辑们感谢 Alex Giladi、Bob Lund、Chris Needham、Chris Poole、Chris
            Wilson、Cyril Concolato、Dale Curtis、David Dorwin、David Singer、Duncan Rowden、François
            Daoust、Frank Galligan、Glenn Adams、Jer Noble、Joe Steele、John Simmons、Kagami Sascha
            Rosylight、Kevin Streeter、Marcos Cáceres、Mark Vickers、Matt Ward、Matthew Gregan、
            Michael(tm) Smith、Michael Thornburgh、Mounir Lamouri、Paul Adenot、Philip Jägenstedt、
            Philippe Le Hegaret、Pierre Lemieux、Ralph Giles、Steven Robertson 与 Tatsuya Igarashi
            对本规范所作的贡献。
        </p>
    </section>
    <section id="VideoPlaybackQuality" class="appendix informative">
        <div class="header-wrapper">
            <h2 id="a-videoplaybackquality"><bdi class="secno">A. </bdi>
                VideoPlaybackQuality
            </h2><a class="self-link" href="#VideoPlaybackQuality" aria-label="Permalink for Appendix A."></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            在本规范先前修订版中描述的视频播放质量指标（例如
            <a href="https://www.w3.org/TR/2016/CR-media-source-20160705/">候选推荐标准</a> 的第 5 与第 10 节）
            现已作为 [<cite><a class="bibref" data-link-type="biblio" href="#bib-media-playback-quality"
                    title="Media Playback Quality">MEDIA-PLAYBACK-QUALITY</a></cite>] 的一部分进行制定。某些实现可能已支持较早草案中的
            <code>VideoPlaybackQuality</code> 对象及
            <a data-link-type="interface" data-lt="HTMLVideoElement"
                href="https://html.spec.whatwg.org/multipage/media.html#htmlvideoelement"><code>HTMLVideoElement</code></a>
            扩展方法 <a data-link-type="method" data-lt="getVideoPlaybackQuality()"
                href="https://w3c.github.io/media-playback-quality/#dom-htmlvideoelement-getvideoplaybackquality"><code>getVideoPlaybackQuality</code></a><code>()</code>，
            这些均见于之前的修订版中。
        </p>
    </section>
    <section class="appendix" id="issue-summary">
        <div class="header-wrapper">
            <h2 id="b-issue-summary"><bdi class="secno">B. </bdi>问题摘要</h2><a class="self-link" href="#issue-summary"
                aria-label="Permalink for Appendix B."></a>
        </div>

        <ul>
            <li><a href="#issue-container-number-276">Issue 276</a><span style="text-transform: none">: MSE-in-Workers：
                    考虑添加 “closing” readyState 来解释关闭进行中时新的 `InvalidStateError` 异常</span></li>
            <li><a href="#issue-container-number-280">Issue 280</a><span style="text-transform: none">: MSE-in-Workers：
                    {Audio,Video,Text}Track{,List} 在 HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker</span></li>
            <li><a href="#issue-container-number-289">Issue 289</a><span style="text-transform: none">: 编辑性？编码帧
                    清除算法需要说明 “buffer full flag” 可能会基于 |new data| 立即更新</span></li>
            <li><a href="#issue-container-number-277">Issue 277</a><span style="text-transform: none">: MSE-in-Workers：
                    当 MediaSource 的 worker 终止时，考虑（最终）让附加元素转为错误状态/媒体元素应如何处理？</span></li>
            <li><a href="#issue-container-number-277-0">Issue 277</a><span style="text-transform: none">:
                    MSE-in-Workers：当 MediaSource 的 worker 终止时，考虑（最终）让附加元素转为错误状态/媒体元素应如何处理？</span></li>
            <li><a href="#issue-container-generatedID-89">Issue</a></li>
            <li><a href="#issue-container-number-280-0">Issue 280</a><span style="text-transform: none">:
                    MSE-in-Workers：{Audio,Video,Text}Track{,List} 在 HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker</span>
            </li>
            <li><a href="#issue-container-number-280-1">Issue 280</a><span style="text-transform: none">:
                    MSE-in-Workers：{Audio,Video,Text}Track{,List} 在 HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker</span>
            </li>
            <li><a href="#issue-container-number-280-2">Issue 280</a><span style="text-transform: none">:
                    MSE-in-Workers：{Audio,Video,Text}Track{,List} 在 HTML 中的 IDL 需要在 Exposed 中增加 DedicatedWorker</span>
            </li>
        </ul>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-references"><bdi class="secno">C. </bdi>参考</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>规范性引用</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix C.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>。Anne van Kesteren。WHATWG。
                    现行标准（Living Standard）。URL：<a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-ecmascript">[ECMASCRIPT]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>。
                    Ecma International。URL：<a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-fileapi">[FILEAPI]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/FileAPI/"><cite>File API</cite></a>。Marijn Kruisselbrink。W3C。2024 年
                    12 月 4 日。W3C 工作草案。URL：<a href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>。Anne van Kesteren；
                    Domenic Denicola；Dominic Farolino；Ian Hickson；Philip Jägenstedt；Simon Pieters。WHATWG。现行标准（Living
                    Standard）。URL：<a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>。Anne van Kesteren；Domenic
                    Denicola。WHATWG。现行标准（Living Standard）。URL：<a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mse-registry">[MSE-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/mse-byte-stream-format-registry/"><cite>Media Source Extensions™ Byte
                            Stream Format Registry</cite></a>。Matthew Wolenetz；Jerry Smith；Aaron Colwell。W3C。URL：
                    <a
                        href="https://www.w3.org/TR/mse-byte-stream-format-registry/">https://www.w3.org/TR/mse-byte-stream-format-registry/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>。S. Bradner。IETF。1997 年 3 月。最佳当前实践。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>。B. Leiba。IETF。2017 年 5 月。最佳当前实践。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>。Edgar Chen；Timothy Gu。
                    WHATWG。现行标准（Living Standard）。URL：<a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>非规范性引用</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix C.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-inbandtracks">[INBANDTRACKS]</dt>
                <dd>
                    <a href="https://dev.w3.org/html5/html-sourcing-inband-tracks/"><cite>Sourcing In-band Media
                            Resource Tracks from Media Containers into HTML</cite></a>。Silvia Pfeiffer；Bob Lund。W3C。
                    2015 年 4 月 26 日。非正式草案。URL：<a
                        href="https://dev.w3.org/html5/html-sourcing-inband-tracks/">https://dev.w3.org/html5/html-sourcing-inband-tracks/</a>
                </dd>
                <dt id="bib-media-playback-quality">[MEDIA-PLAYBACK-QUALITY]</dt>
                <dd>
                    <a href="https://w3c.github.io/media-playback-quality/"><cite>Media Playback Quality</cite></a>。
                    Mounir Lamouri；Chris Cunningham。W3C。编辑草案。URL：<a
                        href="https://w3c.github.io/media-playback-quality/">https://w3c.github.io/media-playback-quality/</a>
                </dd>
                <dt id="bib-url">[url]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>。Anne van Kesteren。WHATWG。
                    现行标准（Living Standard）。URL：<a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-active-track-buffers"
        aria-label="Links in this document to definition: Active Track Buffers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-active-track-buffers"
                aria-label="Permalink for definition: Active Track Buffers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-active-track-buffers-1" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-append-window"
        aria-label="Links in this document to definition: Append Window">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-append-window"
                aria-label="Permalink for definition: Append Window. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-append-window-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dfn-append-window-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame"
        aria-label="Links in this document to definition: Coded Frame">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame"
                aria-label="Permalink for definition: Coded Frame. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-coded-frame-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-coded-frame-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-coded-frame-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-coded-frame-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-coded-frame-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-coded-frame-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-coded-frame-8" title="Reference 8">(8)</a> <a href="#ref-for-dfn-coded-frame-9"
                    title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-10" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-11" title="§ 3.15.6 Duration change">§ 3.15.6 Duration change</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-12" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-13" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-dfn-coded-frame-14" title="Reference 2">(2)</a> <a href="#ref-for-dfn-coded-frame-15"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-coded-frame-16" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-coded-frame-17" title="Reference 5">(5)</a> <a href="#ref-for-dfn-coded-frame-18"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-coded-frame-19" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-coded-frame-20" title="Reference 8">(8)</a> <a href="#ref-for-dfn-coded-frame-21"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-coded-frame-22" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-23" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dfn-coded-frame-24" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-25" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-26" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser State</a>
                <a href="#ref-for-dfn-coded-frame-27" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-28" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-coded-frame-29"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-coded-frame-30" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-31" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-dfn-coded-frame-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-33" title="Reference 3">(3)</a> <a href="#ref-for-dfn-coded-frame-34"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-coded-frame-35" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-coded-frame-36" title="Reference 6">(6)</a> <a href="#ref-for-dfn-coded-frame-37"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-coded-frame-38" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-coded-frame-39" title="Reference 9">(9)</a> <a href="#ref-for-dfn-coded-frame-40"
                    title="Reference 10">(10)</a> <a href="#ref-for-dfn-coded-frame-41" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-coded-frame-42" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-coded-frame-43" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-coded-frame-44" title="Reference 14">(14)</a> <a
                    href="#ref-for-dfn-coded-frame-45" title="Reference 15">(15)</a> <a
                    href="#ref-for-dfn-coded-frame-46" title="Reference 16">(16)</a> <a
                    href="#ref-for-dfn-coded-frame-47" title="Reference 17">(17)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-48" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-dfn-coded-frame-49" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-50" title="Reference 3">(3)</a> <a href="#ref-for-dfn-coded-frame-51"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-coded-frame-52" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-53" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio Splice
                    Frame</a> <a href="#ref-for-dfn-coded-frame-54" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-55" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-56" title="§ 5.5.12 Audio Splice Rendering">§ 5.5.12 Audio Splice
                    Rendering</a> <a href="#ref-for-dfn-coded-frame-57" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-58" title="§ 5.5.13 Text Splice Frame">§ 5.5.13 Text Splice Frame</a>
                <a href="#ref-for-dfn-coded-frame-59" title="Reference 2">(2)</a> <a href="#ref-for-dfn-coded-frame-60"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame-duration"
        aria-label="Links in this document to definition: Coded Frame Duration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame-duration"
                aria-label="Permalink for definition: Coded Frame Duration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-duration-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-coded-frame-duration-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-duration-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-coded-frame-duration-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-duration-5" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-duration-6" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-duration-7" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio Splice
                    Frame</a> <a href="#ref-for-dfn-coded-frame-duration-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-duration-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-duration-10" title="§ 5.5.12 Audio Splice Rendering">§ 5.5.12 Audio
                    Splice Rendering</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-duration-11" title="§ 5.5.13 Text Splice Frame">§ 5.5.13 Text Splice
                    Frame</a> <a href="#ref-for-dfn-coded-frame-duration-12" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame-end-timestamp"
        aria-label="Links in this document to definition: Coded Frame End Timestamp">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame-end-timestamp"
                aria-label="Permalink for definition: Coded Frame End Timestamp. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-end-timestamp-1" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-end-timestamp-2" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment
                    Parser Loop</a> <a href="#ref-for-dfn-coded-frame-end-timestamp-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame-group"
        aria-label="Links in this document to definition: Coded Frame Group">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame-group"
                aria-label="Permalink for definition: Coded Frame Group. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-group-1" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-dfn-coded-frame-group-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-group-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-group-4" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dfn-coded-frame-group-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-decode-timestamp"
        aria-label="Links in this document to definition: Decode Timestamp">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-decode-timestamp"
                aria-label="Permalink for definition: Decode Timestamp. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-decode-timestamp-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-decode-timestamp-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decode-timestamp-3" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decode-timestamp-4" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio Splice
                    Frame</a> <a href="#ref-for-dfn-decode-timestamp-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-decode-timestamp-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-decode-timestamp-7" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initialization-segment"
        aria-label="Links in this document to definition: Initialization Segment">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-segment"
                aria-label="Permalink for definition: Initialization Segment. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-segment-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-initialization-segment-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-segment-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-segment-4" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-segment-5" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-segment-6" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment
                    Parser Loop</a> <a href="#ref-for-dfn-initialization-segment-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-segment-8" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-initialization-segment-9" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-initialization-segment-10" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-segment-11" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-initialization-segment-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-initialization-segment-13"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-initialization-segment-14"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-initialization-segment-15"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-initialization-segment-16"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-initialization-segment-17"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-initialization-segment-18"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-initialization-segment-19"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-initialization-segment-20"
                    title="Reference 10">(10)</a> <a href="#ref-for-dfn-initialization-segment-21"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-initialization-segment-22"
                    title="Reference 12">(12)</a> <a href="#ref-for-dfn-initialization-segment-23"
                    title="Reference 13">(13)</a> <a href="#ref-for-dfn-initialization-segment-24"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-initialization-segment-25"
                    title="Reference 15">(15)</a> <a href="#ref-for-dfn-initialization-segment-26"
                    title="Reference 16">(16)</a> <a href="#ref-for-dfn-initialization-segment-27"
                    title="Reference 17">(17)</a> <a href="#ref-for-dfn-initialization-segment-28"
                    title="Reference 18">(18)</a> <a href="#ref-for-dfn-initialization-segment-29"
                    title="Reference 19">(19)</a> <a href="#ref-for-dfn-initialization-segment-30"
                    title="Reference 20">(20)</a> <a href="#ref-for-dfn-initialization-segment-31"
                    title="Reference 21">(21)</a> <a href="#ref-for-dfn-initialization-segment-32"
                    title="Reference 22">(22)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-segment-33" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a> <a href="#ref-for-dfn-initialization-segment-34" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-segment-35" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-initialization-segment-36" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-initialization-segment-37" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-initialization-segment-38" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-initialization-segment-39" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-initialization-segment-40" title="Reference 8">(8)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-segment"
        aria-label="Links in this document to definition: Media Segment">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-media-segment"
                aria-label="Permalink for definition: Media Segment. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-media-segment-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-media-segment-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-media-segment-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-segment-4" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-segment-5" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dfn-media-segment-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-segment-7" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-segment-8" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dfn-media-segment-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-media-segment-10" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-media-segment-11" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-media-segment-12" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-segment-13" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-dfn-media-segment-14" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-media-segment-15" title="§ 14. Byte Stream Formats">§ 14. Byte Stream Formats</a>
                <a href="#ref-for-dfn-media-segment-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-media-segment-17" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-media-segment-18" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-media-segment-19" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-media-segment-20" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-media-segment-21" title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-mediasource-object-url"
        aria-label="Links in this document to definition: MediaSource object URL">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#mediasource-object-url"
                aria-label="Permalink for definition: MediaSource object URL. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-mediasource-object-url-1" title="§ 3.14 Cross-context communication model">§ 3.14
                    Cross-context communication model</a>
            </li>
            <li>
                <a href="#ref-for-mediasource-object-url-2" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-mediasource-object-url-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-mediasource-object-url-4" title="Reference 3">(3)</a>
                <a href="#ref-for-mediasource-object-url-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-mediasource-object-url-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-mediasource-object-url-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-mediasource-object-url-8" title="Reference 7">(7)</a> <a
                    href="#ref-for-mediasource-object-url-9" title="Reference 8">(8)</a> <a
                    href="#ref-for-mediasource-object-url-10" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-mediasource-object-url-11" title="§ 4.1 Transfer">§ 4.1 Transfer</a> <a
                    href="#ref-for-mediasource-object-url-12" title="Reference 2">(2)</a> <a
                    href="#ref-for-mediasource-object-url-13" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-parent-media-source"
        aria-label="Links in this document to definition: Parent Media Source">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#parent-media-source"
                aria-label="Permalink for definition: Parent Media Source. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-parent-media-source-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-parent-media-source-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-parent-media-source-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-parent-media-source-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-parent-media-source-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-parent-media-source-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-parent-media-source-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-parent-media-source-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-parent-media-source-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-parent-media-source-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-parent-media-source-11" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-parent-media-source-12" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-parent-media-source-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-parent-media-source-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-parent-media-source-15" title="Reference 4">(4)</a> <a
                    href="#ref-for-parent-media-source-16" title="Reference 5">(5)</a> <a
                    href="#ref-for-parent-media-source-17" title="Reference 6">(6)</a> <a
                    href="#ref-for-parent-media-source-18" title="Reference 7">(7)</a> <a
                    href="#ref-for-parent-media-source-19" title="Reference 8">(8)</a> <a
                    href="#ref-for-parent-media-source-20" title="Reference 9">(9)</a> <a
                    href="#ref-for-parent-media-source-21" title="Reference 10">(10)</a> <a
                    href="#ref-for-parent-media-source-22" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-parent-media-source-23" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a> <a
                    href="#ref-for-parent-media-source-24" title="Reference 2">(2)</a> <a
                    href="#ref-for-parent-media-source-25" title="Reference 3">(3)</a> <a
                    href="#ref-for-parent-media-source-26" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-parent-media-source-27" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-parent-media-source-28"
                    title="Reference 2">(2)</a> <a href="#ref-for-parent-media-source-29" title="Reference 3">(3)</a> <a
                    href="#ref-for-parent-media-source-30" title="Reference 4">(4)</a> <a
                    href="#ref-for-parent-media-source-31" title="Reference 5">(5)</a> <a
                    href="#ref-for-parent-media-source-32" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-parent-media-source-33" title="§ Attributes">§ Attributes</a> <a
                    href="#ref-for-parent-media-source-34" title="Reference 2">(2)</a> <a
                    href="#ref-for-parent-media-source-35" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-presentation-start-time"
        aria-label="Links in this document to definition: Presentation Start Time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#presentation-start-time"
                aria-label="Permalink for definition: Presentation Start Time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-presentation-start-time-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-presentation-start-time-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-start-time-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-start-time-4" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-presentation-start-time-5" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-presentation-start-time-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-start-time-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-start-time-8" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a> <a
                    href="#ref-for-presentation-start-time-9" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-presentation-interval"
        aria-label="Links in this document to definition: Presentation Interval">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#presentation-interval"
                aria-label="Permalink for definition: Presentation Interval. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-presentation-interval-1" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
            <li>
                <a href="#ref-for-presentation-interval-2" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio Splice
                    Frame</a>
            </li>
            <li>
                <a href="#ref-for-presentation-interval-3" title="§ 5.5.13 Text Splice Frame">§ 5.5.13 Text Splice
                    Frame</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-presentation-order"
        aria-label="Links in this document to definition: Presentation Order">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#presentation-order"
                aria-label="Permalink for definition: Presentation Order. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-presentation-order-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-presentation-order-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-order-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-presentation-timestamp"
        aria-label="Links in this document to definition: Presentation Timestamp">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#presentation-timestamp"
                aria-label="Permalink for definition: Presentation Timestamp. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-presentation-timestamp-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-presentation-timestamp-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-timestamp-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-presentation-timestamp-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-presentation-timestamp-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-presentation-timestamp-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-presentation-timestamp-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-presentation-timestamp-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-presentation-timestamp-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-presentation-timestamp-10" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-11" title="§ 3.15.6 Duration change">§ 3.15.6 Duration
                    change</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-12" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-presentation-timestamp-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-14" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-presentation-timestamp-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-16" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a> <a
                    href="#ref-for-presentation-timestamp-17" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-18" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-presentation-timestamp-19" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-timestamp-20" title="Reference 3">(3)</a> <a
                    href="#ref-for-presentation-timestamp-21" title="Reference 4">(4)</a> <a
                    href="#ref-for-presentation-timestamp-22" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-23" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-presentation-timestamp-24" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-timestamp-25" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-26" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio Splice
                    Frame</a> <a href="#ref-for-presentation-timestamp-27" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-timestamp-28" title="Reference 3">(3)</a> <a
                    href="#ref-for-presentation-timestamp-29" title="Reference 4">(4)</a> <a
                    href="#ref-for-presentation-timestamp-30" title="Reference 5">(5)</a> <a
                    href="#ref-for-presentation-timestamp-31" title="Reference 6">(6)</a> <a
                    href="#ref-for-presentation-timestamp-32" title="Reference 7">(7)</a> <a
                    href="#ref-for-presentation-timestamp-33" title="Reference 8">(8)</a> <a
                    href="#ref-for-presentation-timestamp-34" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-35" title="§ 5.5.12 Audio Splice Rendering">§ 5.5.12 Audio
                    Splice Rendering</a> <a href="#ref-for-presentation-timestamp-36" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-timestamp-37" title="Reference 3">(3)</a> <a
                    href="#ref-for-presentation-timestamp-38" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-39" title="§ 5.5.13 Text Splice Frame">§ 5.5.13 Text Splice
                    Frame</a> <a href="#ref-for-presentation-timestamp-40" title="Reference 2">(2)</a> <a
                    href="#ref-for-presentation-timestamp-41" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-presentation-timestamp-42" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-random-access-point"
        aria-label="Links in this document to definition: Random Access Point">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#random-access-point"
                aria-label="Permalink for definition: Random Access Point. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-random-access-point-1" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-random-access-point-2" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-random-access-point-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-random-access-point-4" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-random-access-point-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-random-access-point-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-random-access-point-7" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-random-access-point-8" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-random-access-point-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-random-access-point-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-random-access-point-11" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-sourcebuffer-byte-stream-format-specification"
        aria-label="Links in this document to definition: SourceBuffer byte stream format specification">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourcebuffer-byte-stream-format-specification"
                aria-label="Permalink for definition: SourceBuffer byte stream format specification. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sourcebuffer-byte-stream-format-specification-1"
                    title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser Loop</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sourcebuffer-configuration"
        aria-label="Links in this document to definition: SourceBuffer configuration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourcebuffer-configuration"
                aria-label="Permalink for definition: SourceBuffer configuration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sourcebuffer-configuration-1" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-track-description"
        aria-label="Links in this document to definition: Track Description">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-track-description"
                aria-label="Permalink for definition: Track Description. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-track-description-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-track-description-2" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-track-description-3" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-track-description-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-track-description-5" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-track-description-6" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-track-id"
        aria-label="Links in this document to definition: Track ID">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-track-id"
                aria-label="Permalink for definition: Track ID. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-track-id-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-track-id-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-track-id-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-track-id-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-track-id-5" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7 Initialization
                    Segment Received</a> <a href="#ref-for-dfn-track-id-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-track-id-7" title="Reference 3">(3)</a> <a href="#ref-for-dfn-track-id-8"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-track-id-9" title="§ 14. Byte Stream Formats">§ 14. Byte Stream Formats</a> <a
                    href="#ref-for-dfn-track-id-10" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource"
        aria-label="Links in this document to definition: MediaSource">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource"
                aria-label="Permalink for definition: MediaSource. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-1" title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-2" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediasource-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-4"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-6" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediasource-7"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-8" title="§ 3. MediaSource interface">§ 3. MediaSource interface</a>
                <a href="#ref-for-dom-mediasource-9" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-10"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-11" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-12" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediasource-13"
                    title="Reference 6">(6)</a> <a href="#ref-for-dom-mediasource-14" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-mediasource-15" title="Reference 8">(8)</a> <a href="#ref-for-dom-mediasource-16"
                    title="Reference 9">(9)</a> <a href="#ref-for-dom-mediasource-17" title="Reference 10">(10)</a> <a
                    href="#ref-for-dom-mediasource-18" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-19" title="§ 3.1 handle attribute">§ 3.1 handle attribute</a> <a
                    href="#ref-for-dom-mediasource-20" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-21"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-22" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-23" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediasource-24"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-25" title="§ 3.2 sourceBuffers attribute">§ 3.2 sourceBuffers
                    attribute</a> <a href="#ref-for-dom-mediasource-26" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-27" title="§ 3.4 readyState attribute">§ 3.4 readyState attribute</a>
                <a href="#ref-for-dom-mediasource-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-29" title="§ 3.5 duration attribute">§ 3.5 duration attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-30" title="§ 3.6 canConstructInDedicatedWorker attribute">§ 3.6
                    canConstructInDedicatedWorker attribute</a> <a href="#ref-for-dom-mediasource-31"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-32" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dom-mediasource-33" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-34" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-35" title="§ 3.12 isTypeSupported() method">§ 3.12 isTypeSupported()
                    method</a> <a href="#ref-for-dom-mediasource-36" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-37" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-38" title="§ 3.13 Event Summary">§ 3.13 Event Summary</a> <a
                    href="#ref-for-dom-mediasource-39" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-40"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-41" title="§ 3.14 Cross-context communication model">§ 3.14
                    Cross-context communication model</a> <a href="#ref-for-dom-mediasource-42"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-43" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-44" title="Reference 4">(4)</a> <a href="#ref-for-dom-mediasource-45"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-mediasource-46" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediasource-47" title="Reference 7">(7)</a> <a href="#ref-for-dom-mediasource-48"
                    title="Reference 8">(8)</a> <a href="#ref-for-dom-mediasource-49" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-mediasource-50" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-51" title="§ 3.15.1 Attaching to a media element">§ 3.15.1 Attaching
                    to a media element</a> <a href="#ref-for-dom-mediasource-52" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-53" title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-54"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediasource-55" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediasource-56" title="Reference 6">(6)</a> <a href="#ref-for-dom-mediasource-57"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-mediasource-58" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-mediasource-59" title="Reference 9">(9)</a> <a href="#ref-for-dom-mediasource-60"
                    title="Reference 10">(10)</a> <a href="#ref-for-dom-mediasource-61" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-mediasource-62" title="Reference 12">(12)</a> <a
                    href="#ref-for-dom-mediasource-63" title="Reference 13">(13)</a> <a
                    href="#ref-for-dom-mediasource-64" title="Reference 14">(14)</a> <a
                    href="#ref-for-dom-mediasource-65" title="Reference 15">(15)</a> <a
                    href="#ref-for-dom-mediasource-66" title="Reference 16">(16)</a> <a
                    href="#ref-for-dom-mediasource-67" title="Reference 17">(17)</a> <a
                    href="#ref-for-dom-mediasource-68" title="Reference 18">(18)</a> <a
                    href="#ref-for-dom-mediasource-69" title="Reference 19">(19)</a> <a
                    href="#ref-for-dom-mediasource-70" title="Reference 20">(20)</a> <a
                    href="#ref-for-dom-mediasource-71" title="Reference 21">(21)</a> <a
                    href="#ref-for-dom-mediasource-72" title="Reference 22">(22)</a> <a
                    href="#ref-for-dom-mediasource-73" title="Reference 23">(23)</a> <a
                    href="#ref-for-dom-mediasource-74" title="Reference 24">(24)</a> <a
                    href="#ref-for-dom-mediasource-75" title="Reference 25">(25)</a> <a
                    href="#ref-for-dom-mediasource-76" title="Reference 26">(26)</a> <a
                    href="#ref-for-dom-mediasource-77" title="Reference 27">(27)</a> <a
                    href="#ref-for-dom-mediasource-78" title="Reference 28">(28)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-79" title="§ 3.15.2 Detaching from a media element">§ 3.15.2 Detaching
                    from a media element</a> <a href="#ref-for-dom-mediasource-80" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-81" title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-82"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediasource-83" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediasource-84" title="Reference 6">(6)</a> <a href="#ref-for-dom-mediasource-85"
                    title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-86" title="§ 3.15.5 Changes to selected/enabled track state">§ 3.15.5
                    Changes to selected/enabled track state</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-87" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-88" title="§ 3.15.8 Mirror if necessary">§ 3.15.8 Mirror if
                    necessary</a> <a href="#ref-for-dom-mediasource-89" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-90" title="§ 4. MediaSourceHandle interface">§ 4. MediaSourceHandle
                    interface</a> <a href="#ref-for-dom-mediasource-91" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-92" title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-93"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-94" title="§ 4.1 Transfer">§ 4.1 Transfer</a> <a
                    href="#ref-for-dom-mediasource-95" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-96"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-97" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-98" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-99" title="§ 7. ManagedMediaSource interface">§ 7. ManagedMediaSource
                    interface</a> <a href="#ref-for-dom-mediasource-100" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-101" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-102" title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1
                    ManagedSourceBuffer Monitoring</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-103" title="§ 10. HTMLMediaElement Extensions">§ 10. HTMLMediaElement
                    Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-104" title="§ 10.1 HTMLMediaElement's seekable">§ 10.1
                    HTMLMediaElement's seekable</a> <a href="#ref-for-dom-mediasource-105" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-mediasource-106" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-107" title="§ 10.2 HTMLMediaElement's buffered">§ 10.2
                    HTMLMediaElement's buffered</a> <a href="#ref-for-dom-mediasource-108" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-mediasource-109" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-live-seekable-range"
        aria-label="Links in this document to definition: [[live seekable range]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-live-seekable-range"
                aria-label="Permalink for definition: [[live seekable range]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-live-seekable-range-1" title="§ 3.10 setLiveSeekableRange() method">§ 3.10
                    setLiveSeekableRange() method</a> <a href="#ref-for-dfn-live-seekable-range-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-live-seekable-range-3" title="§ 3.11 clearLiveSeekableRange() method">§ 3.11
                    clearLiveSeekableRange() method</a> <a href="#ref-for-dfn-live-seekable-range-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-live-seekable-range-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-live-seekable-range-6" title="§ 10.1 HTMLMediaElement's seekable">§ 10.1
                    HTMLMediaElement's seekable</a> <a href="#ref-for-dfn-live-seekable-range-7"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-live-seekable-range-8" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-live-seekable-range-9" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-has-ever-been-attached"
        aria-label="Links in this document to definition: [[has ever been attached]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-has-ever-been-attached"
                aria-label="Permalink for definition: [[has ever been attached]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-has-ever-been-attached-1" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-dfn-has-ever-been-attached-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-readystate"
        aria-label="Links in this document to definition: ReadyState">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-readystate"
                aria-label="Permalink for definition: ReadyState. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-readystate-1" title="§ 3. MediaSource interface">§ 3. MediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-2" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a> <a
                    href="#ref-for-dom-readystate-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-readystate-4"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-readystate-5" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-6" title="§ 3.15.4 SourceBuffer Monitoring">§ 3.15.4 SourceBuffer
                    Monitoring</a> <a href="#ref-for-dom-readystate-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-8" title="Reference 3">(3)</a> <a href="#ref-for-dom-readystate-9"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-readystate-10" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-readystate-11" title="Reference 6">(6)</a> <a href="#ref-for-dom-readystate-12"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-readystate-13" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-readystate-14" title="Reference 9">(9)</a> <a href="#ref-for-dom-readystate-15"
                    title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-16" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a> <a
                    href="#ref-for-dom-readystate-17" title="Reference 2">(2)</a> <a href="#ref-for-dom-readystate-18"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-readystate-19" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-20" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dom-readystate-21" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-readystate-22" title="Reference 3">(3)</a> <a href="#ref-for-dom-readystate-23"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-readystate-24" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-readystate-25" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-26" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-dom-readystate-27" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-28" title="Reference 3">(3)</a> <a href="#ref-for-dom-readystate-29"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-readystate-30" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-readystate-31" title="Reference 6">(6)</a> <a href="#ref-for-dom-readystate-32"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-readystate-33" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-readystate-34" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-35" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame Removal</a>
                <a href="#ref-for-dom-readystate-36" title="Reference 2">(2)</a> <a href="#ref-for-dom-readystate-37"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-readystate-closed"
        aria-label="Links in this document to definition: closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-readystate-closed"
                aria-label="Permalink for definition: closed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-26865842">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-readystate-closed-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-closed-2" title="§ 3.2 sourceBuffers attribute">§ 3.2 sourceBuffers
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-closed-3" title="§ 3.4 readyState attribute">§ 3.4 readyState
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-closed-4" title="§ 3.5 duration attribute">§ 3.5 duration attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-closed-5" title="§ 3.13 Event Summary">§ 3.13 Event Summary</a> <a
                    href="#ref-for-dom-readystate-closed-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-closed-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-closed-8" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-closed-9" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-readystate-open"
        aria-label="Links in this document to definition: open">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-readystate-open"
                aria-label="Permalink for definition: open. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-26865842">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-readystate-open-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-2" title="§ 3.2 sourceBuffers attribute">§ 3.2 sourceBuffers
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-3" title="§ 3.5 duration attribute">§ 3.5 duration attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-4" title="§ 3.7 addSourceBuffer() method">§ 3.7 addSourceBuffer()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-5" title="§ 3.9 endOfStream() method">§ 3.9 endOfStream()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-6" title="§ 3.10 setLiveSeekableRange() method">§ 3.10
                    setLiveSeekableRange() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-7" title="§ 3.11 clearLiveSeekableRange() method">§ 3.11
                    clearLiveSeekableRange() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-8" title="§ 3.13 Event Summary">§ 3.13 Event Summary</a> <a
                    href="#ref-for-dom-readystate-open-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-open-10" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-readystate-open-11" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-12" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-dom-readystate-open-13"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-14" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-readystate-open-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-16" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-readystate-open-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-open-18" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-open-19" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-readystate-ended"
        aria-label="Links in this document to definition: ended">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-readystate-ended"
                aria-label="Permalink for definition: ended. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-26865842">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-readystate-ended-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-2" title="§ 3.13 Event Summary">§ 3.13 Event Summary</a> <a
                    href="#ref-for-dom-readystate-ended-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-ended-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-5" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a> <a
                    href="#ref-for-dom-readystate-ended-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-7" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-8" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-readystate-ended-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-readystate-ended-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-11" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-readystate-ended-12" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-13" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-readystate-ended-14" title="§ 10.2 HTMLMediaElement's buffered">§ 10.2
                    HTMLMediaElement's buffered</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-endofstreamerror"
        aria-label="Links in this document to definition: EndOfStreamError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-endofstreamerror"
                aria-label="Permalink for definition: EndOfStreamError. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-endofstreamerror-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-endofstreamerror-network"
        aria-label="Links in this document to definition: network">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-endofstreamerror-network"
                aria-label="Permalink for definition: network. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1031259774">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-endofstreamerror-network-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-endofstreamerror-network-2" title="§ 3.15.7 End of stream">§ 3.15.7 End of
                    stream</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-endofstreamerror-decode"
        aria-label="Links in this document to definition: decode">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-endofstreamerror-decode"
                aria-label="Permalink for definition: decode. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1031259774">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-endofstreamerror-decode-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-endofstreamerror-decode-2" title="§ 3.15.7 End of stream">§ 3.15.7 End of
                    stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-endofstreamerror-decode-3" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-onsourceopen"
        aria-label="Links in this document to definition: onsourceopen">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-onsourceopen"
                aria-label="Permalink for definition: onsourceopen. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-onsourceended"
        aria-label="Links in this document to definition: onsourceended">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-onsourceended"
                aria-label="Permalink for definition: onsourceended. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-onsourceclose"
        aria-label="Links in this document to definition: onsourceclose">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-onsourceclose"
                aria-label="Permalink for definition: onsourceclose. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-handle"
        aria-label="Links in this document to definition: handle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-handle"
                aria-label="Permalink for definition: handle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-handle-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-handle-2" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-dom-mediasource-handle-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-sourcebuffers"
        aria-label="Links in this document to definition: sourceBuffers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-sourcebuffers"
                aria-label="Permalink for definition: sourceBuffers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a> <a href="#ref-for-dom-mediasource-sourcebuffers-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-4" title="§ 3.3 activeSourceBuffers attribute">§ 3.3
                    activeSourceBuffers attribute</a> <a href="#ref-for-dom-mediasource-sourcebuffers-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-6" title="§ 3.5 duration attribute">§ 3.5 duration
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-7" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a> <a href="#ref-for-dom-mediasource-sourcebuffers-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-sourcebuffers-9"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-sourcebuffers-10"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-11" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dom-mediasource-sourcebuffers-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-sourcebuffers-13"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-sourcebuffers-14"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-15" title="§ 3.9 endOfStream() method">§ 3.9
                    endOfStream() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-16" title="§ 3.15.2 Detaching from a media element">§
                    3.15.2 Detaching from a media element</a> <a href="#ref-for-dom-mediasource-sourcebuffers-17"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-18" title="§ 3.15.6 Duration change">§ 3.15.6 Duration
                    change</a> <a href="#ref-for-dom-mediasource-sourcebuffers-19" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-20" title="§ 3.15.7 End of stream">§ 3.15.7 End of
                    stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-21" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-22" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-23" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-24" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-25" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-26" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-27" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-28" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-29" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-30" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare
                    Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-31" title="§ 5.5.7 Initialization Segment Received">§
                    5.5.7 Initialization Segment Received</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-32" title="§ 7. ManagedMediaSource interface">§ 7.
                    ManagedMediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-33" title="§ 7.3.2 Memory Cleanup">§ 7.3.2 Memory
                    Cleanup</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-sourcebuffers-34" title="§ Attributes">§ Attributes</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-35" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-sourcebuffers-36" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediasource-activesourcebuffers"
        aria-label="Links in this document to definition: activeSourceBuffers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-activesourcebuffers"
                aria-label="Permalink for definition: activeSourceBuffers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-2" title="§ 3. MediaSource interface">§ 3.
                    MediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-3" title="§ 3.3 activeSourceBuffers attribute">§
                    3.3 activeSourceBuffers attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-4" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-6"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-7"
                    title="§ 3.15.2 Detaching from a media element">§ 3.15.2 Detaching from a media element</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-9" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-10" title="§ 3.15.4 SourceBuffer Monitoring">§
                    3.15.4 SourceBuffer Monitoring</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-11"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-12"
                    title="§ 3.15.5 Changes to selected/enabled track state">§ 3.15.5 Changes to selected/enabled track
                    state</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-15" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-16" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-17" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-18" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-19" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-20" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-21" title="Reference 10">(10)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-22" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-23" title="Reference 12">(12)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-24" title="Reference 13">(13)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-25" title="Reference 14">(14)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-26" title="Reference 15">(15)</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-27" title="Reference 16">(16)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-28"
                    title="§ 5.5.7 Initialization Segment Received">§ 5.5.7 Initialization Segment Received</a> <a
                    href="#ref-for-dom-mediasource-activesourcebuffers-29" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-30" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9
                    Coded Frame Removal</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-31" title="§ 9.3.2 Memory cleanup">§ 9.3.2 Memory
                    cleanup</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-activesourcebuffers-32" title="§ 10.2 HTMLMediaElement's buffered">§
                    10.2 HTMLMediaElement's buffered</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-33"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-34"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-35"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediasource-activesourcebuffers-36"
                    title="Reference 5">(5)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-readystate"
        aria-label="Links in this document to definition: readyState">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-readystate"
                aria-label="Permalink for definition: readyState. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a> <a href="#ref-for-dom-mediasource-readystate-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-readystate-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-4" title="§ 3.2 sourceBuffers attribute">§ 3.2
                    sourceBuffers attribute</a> <a href="#ref-for-dom-mediasource-readystate-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-6" title="§ 3.4 readyState attribute">§ 3.4 readyState
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-7" title="§ 3.5 duration attribute">§ 3.5 duration
                    attribute</a> <a href="#ref-for-dom-mediasource-readystate-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-9" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-10" title="§ 3.9 endOfStream() method">§ 3.9 endOfStream()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-11" title="§ 3.10 setLiveSeekableRange() method">§ 3.10
                    setLiveSeekableRange() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-12" title="§ 3.11 clearLiveSeekableRange() method">§ 3.11
                    clearLiveSeekableRange() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-13" title="§ 3.13 Event Summary">§ 3.13 Event Summary</a>
                <a href="#ref-for-dom-mediasource-readystate-14" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-readystate-15" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-16" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-dom-mediasource-readystate-17"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-readystate-18"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-19" title="§ 3.15.2 Detaching from a media element">§
                    3.15.2 Detaching from a media element</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-20" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a> <a
                    href="#ref-for-dom-mediasource-readystate-21" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-22" title="§ 3.15.7 End of stream">§ 3.15.7 End of
                    stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-23" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-mediasource-readystate-24" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-readystate-25" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-readystate-26" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-readystate-27" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-28" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-mediasource-readystate-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-readystate-30" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-readystate-31" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasource-readystate-32" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-33" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare
                    Append</a> <a href="#ref-for-dom-mediasource-readystate-34" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-readystate-35" title="§ 10.2 HTMLMediaElement's buffered">§ 10.2
                    HTMLMediaElement's buffered</a> <a href="#ref-for-dom-mediasource-readystate-36"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-duration"
        aria-label="Links in this document to definition: duration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-duration"
                aria-label="Permalink for definition: duration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-duration-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-2" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-3" title="§ 3.15.6 Duration change">§ 3.15.6 Duration
                    change</a> <a href="#ref-for-dom-mediasource-duration-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasource-duration-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasource-duration-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-7" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-mediasource-duration-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-9" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-10" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded
                    Frame Processing</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-11" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-duration-12" title="§ 10.1 HTMLMediaElement's seekable">§ 10.1
                    HTMLMediaElement's seekable</a> <a href="#ref-for-dom-mediasource-duration-13"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-duration-14"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-duration-15"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediasource-canconstructindedicatedworker"
        aria-label="Links in this document to definition: canConstructInDedicatedWorker">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-canconstructindedicatedworker"
                aria-label="Permalink for definition: canConstructInDedicatedWorker. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-canconstructindedicatedworker-1" title="§ 3. MediaSource interface">§
                    3. MediaSource interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-addsourcebuffer"
        aria-label="Links in this document to definition: addSourceBuffer()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-addsourcebuffer"
                aria-label="Permalink for definition: addSourceBuffer(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-2" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-3" title="§ 3.2 sourceBuffers attribute">§ 3.2
                    sourceBuffers attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-4" title="§ 3.12 isTypeSupported() method">§ 3.12
                    isTypeSupported() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-5" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-6" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment
                    Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-7" title="§ 5.5.7 Initialization Segment Received">§
                    5.5.7 Initialization Segment Received</a> <a href="#ref-for-dom-mediasource-addsourcebuffer-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasource-addsourcebuffer-9"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediasource-addsourcebuffer-10"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediasource-addsourcebuffer-11"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-addsourcebuffer-12" title="§ 14. Byte Stream Formats">§ 14. Byte
                    Stream Formats</a> <a href="#ref-for-dom-mediasource-addsourcebuffer-13" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediasource-removesourcebuffer"
        aria-label="Links in this document to definition: removeSourceBuffer()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-removesourcebuffer"
                aria-label="Permalink for definition: removeSourceBuffer(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-removesourcebuffer-1" title="§ 3. MediaSource interface">§ 3.
                    MediaSource interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-endofstream"
        aria-label="Links in this document to definition: endOfStream()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-endofstream"
                aria-label="Permalink for definition: endOfStream(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-endofstream-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a> <a href="#ref-for-dom-mediasource-endofstream-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-endofstream-3" title="§ 3.5 duration attribute">§ 3.5 duration
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-endofstream-4" title="§ 3.15.7 End of stream">§ 3.15.7 End of
                    stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-endofstream-5" title="§ 9.2 Event Summary">§ 9.2 Event Summary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediasource-setliveseekablerange"
        aria-label="Links in this document to definition: setLiveSeekableRange()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-setliveseekablerange"
                aria-label="Permalink for definition: setLiveSeekableRange(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-setliveseekablerange-1" title="§ 3. MediaSource interface">§ 3.
                    MediaSource interface</a> <a href="#ref-for-dom-mediasource-setliveseekablerange-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediasource-clearliveseekablerange"
        aria-label="Links in this document to definition: clearLiveSeekableRange()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-clearliveseekablerange"
                aria-label="Permalink for definition: clearLiveSeekableRange(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-clearliveseekablerange-1" title="§ 3. MediaSource interface">§ 3.
                    MediaSource interface</a> <a href="#ref-for-dom-mediasource-clearliveseekablerange-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasource-istypesupported"
        aria-label="Links in this document to definition: isTypeSupported()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasource-istypesupported"
                aria-label="Permalink for definition: isTypeSupported(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1502719514">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasource-istypesupported-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-istypesupported-2" title="§ 5.5.7 Initialization Segment Received">§
                    5.5.7 Initialization Segment Received</a> <a href="#ref-for-dom-mediasource-istypesupported-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasource-istypesupported-4" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sourceopen"
        aria-label="Links in this document to definition: sourceopen">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourceopen"
                aria-label="Permalink for definition: sourceopen. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sourceopen-1" title="§ 3.15.1 Attaching to a media element">§ 3.15.1 Attaching to
                    a media element</a> <a href="#ref-for-dfn-sourceopen-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sourceopen-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dfn-sourceopen-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sourceopen-5" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dfn-sourceopen-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sourceopen-7" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sourceended"
        aria-label="Links in this document to definition: sourceended">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourceended"
                aria-label="Permalink for definition: sourceended. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sourceended-1" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sourceclose"
        aria-label="Links in this document to definition: sourceclose">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourceclose"
                aria-label="Permalink for definition: sourceclose. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sourceclose-1" title="§ 3.15.2 Detaching from a media element">§ 3.15.2 Detaching
                    from a media element</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-cross-context-communication-model"
        aria-label="Links in this document to definition: Cross-context communication model">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cross-context-communication-model"
                aria-label="Permalink for definition: Cross-context communication model. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-cross-context-communication-model-1" title="§ 4.1 Transfer">§ 4.1 Transfer</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cross-context-communication-model-2" title="§ 10.2 HTMLMediaElement's buffered">§
                    10.2 HTMLMediaElement's buffered</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-port-to-main"
        aria-label="Links in this document to definition: [[port to main]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-port-to-main"
                aria-label="Permalink for definition: [[port to main]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-port-to-main-1" title="§ 3.14 Cross-context communication model">§ 3.14
                    Cross-context communication model</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-2" title="§ 3.15.1 Attaching to a media element">§ 3.15.1 Attaching
                    to a media element</a> <a href="#ref-for-dfn-port-to-main-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-4" title="§ 3.15.2 Detaching from a media element">§ 3.15.2 Detaching
                    from a media element</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-5" title="§ 3.15.5 Changes to selected/enabled track state">§ 3.15.5
                    Changes to selected/enabled track state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-6" title="§ 3.15.8 Mirror if necessary">§ 3.15.8 Mirror if
                    necessary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-7" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-port-to-main-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-port-to-main-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-10" title="§ 10.1 HTMLMediaElement's seekable">§ 10.1
                    HTMLMediaElement's seekable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-main-11" title="§ 10.2 HTMLMediaElement's buffered">§ 10.2
                    HTMLMediaElement's buffered</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-port-to-worker"
        aria-label="Links in this document to definition: [[port to worker]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-port-to-worker"
                aria-label="Permalink for definition: [[port to worker]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-port-to-worker-1" title="§ 3.14 Cross-context communication model">§ 3.14
                    Cross-context communication model</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-worker-2" title="§ 3.15.1 Attaching to a media element">§ 3.15.1 Attaching
                    to a media element</a> <a href="#ref-for-dfn-port-to-worker-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-worker-4" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a> <a href="#ref-for-dfn-port-to-worker-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-worker-6" title="§ 3.15.5 Changes to selected/enabled track state">§
                    3.15.5 Changes to selected/enabled track state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-port-to-worker-7" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-channel-with-worker"
        aria-label="Links in this document to definition: [[channel with worker]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-channel-with-worker"
                aria-label="Permalink for definition: [[channel with worker]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-channel-with-worker-1" title="§ 3.14 Cross-context communication model">§ 3.14
                    Cross-context communication model</a>
            </li>
            <li>
                <a href="#ref-for-dfn-channel-with-worker-2" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-dfn-channel-with-worker-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-channel-with-worker-4" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-channel-with-worker-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-channel-with-worker-6" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-channel-with-worker-7" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-attaching-to-a-media-element"
        aria-label="Links in this document to definition: Attaching to a media element">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-attaching-to-a-media-element"
                aria-label="Permalink for definition: Attaching to a media element. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-attaching-to-a-media-element-1" title="§ 3. MediaSource interface">§ 3.
                    MediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attaching-to-a-media-element-2" title="§ 3.14 Cross-context communication model">§
                    3.14 Cross-context communication model</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attaching-to-a-media-element-3" title="§ 4. MediaSourceHandle interface">§ 4.
                    MediaSourceHandle interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attaching-to-a-media-element-4" title="§ 4.1 Transfer">§ 4.1 Transfer</a> <a
                    href="#ref-for-dfn-attaching-to-a-media-element-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-attaching-to-a-media-element-6" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-detaching-from-a-media-element"
        aria-label="Links in this document to definition: Detaching from a media element">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-detaching-from-a-media-element"
                aria-label="Permalink for definition: Detaching from a media element. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-seeking"
        aria-label="Links in this document to definition: Seeking">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-seeking"
                aria-label="Permalink for definition: Seeking. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sourcebuffer-monitoring"
        aria-label="Links in this document to definition: SourceBuffer Monitoring">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourcebuffer-monitoring"
                aria-label="Permalink for definition: SourceBuffer Monitoring. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sourcebuffer-monitoring-1" title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1
                    ManagedSourceBuffer Monitoring</a> <a href="#ref-for-dfn-sourcebuffer-monitoring-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-enough-data"
        aria-label="Links in this document to definition: enough data to ensure uninterrupted playback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#enough-data"
                aria-label="Permalink for definition: enough data to ensure uninterrupted playback. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-enough-data-1" title="§ 3.15.4 SourceBuffer Monitoring">§ 3.15.4 SourceBuffer
                    Monitoring</a> <a href="#ref-for-enough-data-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-enough-data-3" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-changes-to-selected-enabled-track-state"
        aria-label="Links in this document to definition: Changes to selected/enabled track state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-changes-to-selected-enabled-track-state"
                aria-label="Permalink for definition: Changes to selected/enabled track state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-duration-change"
        aria-label="Links in this document to definition: Duration change">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-duration-change"
                aria-label="Permalink for definition: Duration change. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-duration-change-1" title="§ 3.5 duration attribute">§ 3.5 duration attribute</a>
                <a href="#ref-for-dfn-duration-change-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-duration-change-3" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
            <li>
                <a href="#ref-for-dfn-duration-change-4" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-duration-change-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-duration-change-6" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-end-of-stream"
        aria-label="Links in this document to definition: End of stream">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-end-of-stream"
                aria-label="Permalink for definition: End of stream. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-end-of-stream-1" title="§ 3.9 endOfStream() method">§ 3.9 endOfStream() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-end-of-stream-2" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mirror-if-necessary"
        aria-label="Links in this document to definition: Mirror if necessary">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-mirror-if-necessary"
                aria-label="Permalink for definition: Mirror if necessary. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-mirror-if-necessary-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dfn-mirror-if-necessary-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-mirror-if-necessary-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-mirror-if-necessary-4" title="§ 3.15.6 Duration change">§ 3.15.6 Duration
                    change</a>
            </li>
            <li>
                <a href="#ref-for-dfn-mirror-if-necessary-5" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
                <a href="#ref-for-dfn-mirror-if-necessary-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-mirror-if-necessary-7" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-mirror-if-necessary-8"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediasourcehandle"
        aria-label="Links in this document to definition: MediaSourceHandle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediasourcehandle"
                aria-label="Permalink for definition: MediaSourceHandle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1737388085">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a> <a href="#ref-for-dom-mediasourcehandle-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-3" title="§ 3.1 handle attribute">§ 3.1 handle attribute</a> <a
                    href="#ref-for-dom-mediasourcehandle-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-5" title="§ 3.14 Cross-context communication model">§ 3.14
                    Cross-context communication model</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-6" title="§ 3.15.1 Attaching to a media element">§ 3.15.1
                    Attaching to a media element</a> <a href="#ref-for-dom-mediasourcehandle-7"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasourcehandle-8" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediasourcehandle-9" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasourcehandle-10" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediasourcehandle-11" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediasourcehandle-12" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-13" title="§ 4. MediaSourceHandle interface">§ 4.
                    MediaSourceHandle interface</a> <a href="#ref-for-dom-mediasourcehandle-14"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasourcehandle-15" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediasourcehandle-16" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasourcehandle-17" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediasourcehandle-18" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-19" title="§ 4.1 Transfer">§ 4.1 Transfer</a> <a
                    href="#ref-for-dom-mediasourcehandle-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediasourcehandle-21" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediasourcehandle-22" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediasourcehandle-23" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediasourcehandle-24" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediasourcehandle-25" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-mediasourcehandle-26" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-mediasourcehandle-27" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-mediasourcehandle-28" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-29" title="§ 10. HTMLMediaElement Extensions">§ 10.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediasourcehandle-30" title="§ 10.3 HTMLMediaElement's srcObject">§ 10.3
                    HTMLMediaElement's srcObject</a> <a href="#ref-for-dom-mediasourcehandle-31"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediasourcehandle-32" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediasourcehandle-33" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-has-ever-been-assigned-as-srcobject"
        aria-label="Links in this document to definition: [[has ever been assigned as srcobject]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-has-ever-been-assigned-as-srcobject"
                aria-label="Permalink for definition: [[has ever been assigned as srcobject]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-has-ever-been-assigned-as-srcobject-1" title="§ 4.1 Transfer">§ 4.1 Transfer</a>
            </li>
            <li>
                <a href="#ref-for-dfn-has-ever-been-assigned-as-srcobject-2"
                    title="§ 10.3 HTMLMediaElement's srcObject">§ 10.3 HTMLMediaElement's srcObject</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-detached"
        aria-label="Links in this document to definition: [[Detached]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-detached"
                aria-label="Permalink for definition: [[Detached]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-detached-1" title="§ 3.15.1 Attaching to a media element">§ 3.15.1 Attaching to a
                    media element</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer"
        aria-label="Links in this document to definition: SourceBuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer"
                aria-label="Permalink for definition: SourceBuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-1" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dom-sourcebuffer-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-4" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-sourcebuffer-5" title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-sourcebuffer-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-8" title="Reference 5">(5)</a> <a href="#ref-for-dom-sourcebuffer-9"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-10" title="§ 3. MediaSource interface">§ 3. MediaSource interface</a>
                <a href="#ref-for-dom-sourcebuffer-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-12" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-13" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-14" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-15" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-16" title="§ 3.2 sourceBuffers attribute">§ 3.2 sourceBuffers
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-17" title="§ 3.3 activeSourceBuffers attribute">§ 3.3
                    activeSourceBuffers attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-18" title="§ 3.5 duration attribute">§ 3.5 duration attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-19" title="§ 3.7 addSourceBuffer() method">§ 3.7 addSourceBuffer()
                    method</a> <a href="#ref-for-dom-sourcebuffer-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-21" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-22" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-23" title="§ 3.9 endOfStream() method">§ 3.9 endOfStream() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-24" title="§ 3.12 isTypeSupported() method">§ 3.12 isTypeSupported()
                    method</a> <a href="#ref-for-dom-sourcebuffer-25" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-26" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-27" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a> <a href="#ref-for-dom-sourcebuffer-28"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-29" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-30" title="§ 3.15.4 SourceBuffer Monitoring">§ 3.15.4 SourceBuffer
                    Monitoring</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-31" title="§ 3.15.5 Changes to selected/enabled track state">§ 3.15.5
                    Changes to selected/enabled track state</a> <a href="#ref-for-dom-sourcebuffer-32"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-33" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-34" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-35" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-36" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-sourcebuffer-37" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-sourcebuffer-38" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-sourcebuffer-39" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-sourcebuffer-40" title="Reference 10">(10)</a> <a
                    href="#ref-for-dom-sourcebuffer-41" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-sourcebuffer-42" title="Reference 12">(12)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-43" title="§ 3.15.6 Duration change">§ 3.15.6 Duration change</a> <a
                    href="#ref-for-dom-sourcebuffer-44" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-45" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-46" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-47" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-sourcebuffer-48" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-49" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-50" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-51" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-sourcebuffer-52" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-53" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-54" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-55" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-56" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-sourcebuffer-57" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-sourcebuffer-58" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-sourcebuffer-59" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-60" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-dom-sourcebuffer-61" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-62" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-63" title="§ 5.4 Event Summary">§ 5.4 Event Summary</a> <a
                    href="#ref-for-dom-sourcebuffer-64" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-65" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-66" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-67" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-68" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-69" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dom-sourcebuffer-70" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-71" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-72" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-73" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-74" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-sourcebuffer-75" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-sourcebuffer-76" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-sourcebuffer-77" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-sourcebuffer-78" title="Reference 10">(10)</a> <a
                    href="#ref-for-dom-sourcebuffer-79" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-80" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a> <a
                    href="#ref-for-dom-sourcebuffer-81" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-82" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a> <a
                    href="#ref-for-dom-sourcebuffer-83" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-84" title="§ 5.5.5 Buffer Append">§ 5.5.5 Buffer Append</a> <a
                    href="#ref-for-dom-sourcebuffer-85" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-86" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a> <a
                    href="#ref-for-dom-sourcebuffer-87" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-88" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-89" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dom-sourcebuffer-90"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-91" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-92" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-93" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-94" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-sourcebuffer-95" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-sourcebuffer-96" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-sourcebuffer-97" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-sourcebuffer-98" title="Reference 10">(10)</a> <a
                    href="#ref-for-dom-sourcebuffer-99" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-sourcebuffer-100" title="Reference 12">(12)</a> <a
                    href="#ref-for-dom-sourcebuffer-101" title="Reference 13">(13)</a> <a
                    href="#ref-for-dom-sourcebuffer-102" title="Reference 14">(14)</a> <a
                    href="#ref-for-dom-sourcebuffer-103" title="Reference 15">(15)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-104" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-105" title="§ 5.5.10 Coded Frame Eviction">§ 5.5.10 Coded Frame
                    Eviction</a> <a href="#ref-for-dom-sourcebuffer-106" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-107" title="§ 6. SourceBufferList interface">§ 6. SourceBufferList
                    interface</a> <a href="#ref-for-dom-sourcebuffer-108" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-109" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-110" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-111" title="§ 6.3 Event Summary">§ 6.3 Event Summary</a> <a
                    href="#ref-for-dom-sourcebuffer-112" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-113" title="§ 9. ManagedSourceBuffer interface">§ 9.
                    ManagedSourceBuffer interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-114" title="§ 10.2 HTMLMediaElement's buffered">§ 10.2
                    HTMLMediaElement's buffered</a> <a href="#ref-for-dom-sourcebuffer-115" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-sourcebuffer-116" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-117" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-118" title="§ 11. AudioTrack extensions">§ 11. AudioTrack
                    extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-119" title="§ Attributes">§ Attributes</a> <a
                    href="#ref-for-dom-sourcebuffer-120" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-121" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-122" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-123" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-sourcebuffer-125" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-sourcebuffer-126" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-sourcebuffer-127" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-sourcebuffer-128" title="Reference 9">(9)</a> <a
                    href="#ref-for-dom-sourcebuffer-129" title="Reference 10">(10)</a> <a
                    href="#ref-for-dom-sourcebuffer-131" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-sourcebuffer-132" title="Reference 12">(12)</a> <a
                    href="#ref-for-dom-sourcebuffer-133" title="Reference 13">(13)</a> <a
                    href="#ref-for-dom-sourcebuffer-134" title="Reference 14">(14)</a> <a
                    href="#ref-for-dom-sourcebuffer-135" title="Reference 15">(15)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-124" title="§ 12. VideoTrack extensions">§ 12. VideoTrack
                    extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-130" title="§ 13. TextTrack extensions">§ 13. TextTrack
                    extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-136" title="§ 14. Byte Stream Formats">§ 14. Byte Stream Formats</a>
                <a href="#ref-for-dom-sourcebuffer-137" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-138" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-appendmode"
        aria-label="Links in this document to definition: AppendMode">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-appendmode"
                aria-label="Permalink for definition: AppendMode. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-appendmode-1" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-2" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-appendmode-segments"
        aria-label="Links in this document to definition: segments">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-appendmode-segments"
                aria-label="Permalink for definition: segments. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-955395090">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-appendmode-segments-1" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-segments-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-segments-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-segments-4" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-segments-5" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-appendmode-sequence"
        aria-label="Links in this document to definition: sequence">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-appendmode-sequence"
                aria-label="Permalink for definition: sequence. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-955395090">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-1" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a> <a href="#ref-for-dom-appendmode-sequence-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-4" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-appendmode-sequence-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-6" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-7" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dom-appendmode-sequence-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-9" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-10" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-dom-appendmode-sequence-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-appendmode-sequence-12" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-mode"
        aria-label="Links in this document to definition: mode">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-mode"
                aria-label="Permalink for definition: mode. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-1" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a> <a href="#ref-for-dom-sourcebuffer-mode-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-3" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-4" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-5" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-sourcebuffer-mode-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-7" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-8" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dom-sourcebuffer-mode-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-10" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-11" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-dom-sourcebuffer-mode-12" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-mode-13" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-mode-14" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-dom-sourcebuffer-mode-15" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-updating"
        aria-label="Links in this document to definition: updating">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-updating"
                aria-label="Permalink for definition: updating. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-1" title="§ 3.5 duration attribute">§ 3.5 duration
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-2" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dom-sourcebuffer-updating-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-4" title="§ 3.9 endOfStream() method">§ 3.9 endOfStream()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-5" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-6" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-8" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-9" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-10" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-12" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-13" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-14" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-15" title="§ 5.4 Event Summary">§ 5.4 Event Summary</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-17" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-sourcebuffer-updating-18" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-19" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-20" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare
                    Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-21" title="§ 5.5.5 Buffer Append">§ 5.5.5 Buffer Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-updating-22" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a>
                <a href="#ref-for-dom-sourcebuffer-updating-23" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-buffered"
        aria-label="Links in this document to definition: buffered">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-buffered"
                aria-label="Permalink for definition: buffered. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-buffered-1" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a> <a
                    href="#ref-for-dom-sourcebuffer-buffered-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-buffered-3" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-buffered-4" title="§ 5.5.10 Coded Frame Eviction">§ 5.5.10 Coded
                    Frame Eviction</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-buffered-5" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered
                    Change</a> <a href="#ref-for-dom-sourcebuffer-buffered-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-sourcebuffer-buffered-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-buffered-8" title="§ 10.2 HTMLMediaElement's buffered">§ 10.2
                    HTMLMediaElement's buffered</a> <a href="#ref-for-dom-sourcebuffer-buffered-9"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-buffered-10"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-buffered-11" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-timestampoffset"
        aria-label="Links in this document to definition: timestampOffset">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-timestampoffset"
                aria-label="Permalink for definition: timestampOffset. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-timestampoffset-1" title="§ 5. SourceBuffer interface">§ 5.
                    SourceBuffer interface</a> <a href="#ref-for-dom-sourcebuffer-timestampoffset-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-timestampoffset-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-timestampoffset-4" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-timestampoffset-5" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1
                    Segment Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-timestampoffset-6" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8
                    Coded Frame Processing</a> <a href="#ref-for-dom-sourcebuffer-timestampoffset-7"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-timestampoffset-8"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-sourcebuffer-timestampoffset-9"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-sourcebuffer-timestampoffset-10"
                    title="Reference 5">(5)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-audiotracks"
        aria-label="Links in this document to definition: audioTracks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-audiotracks"
                aria-label="Permalink for definition: audioTracks. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-audiotracks-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-audiotracks-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-audiotracks-3" title="§ 5.5.7 Initialization Segment Received">§
                    5.5.7 Initialization Segment Received</a> <a href="#ref-for-dom-sourcebuffer-audiotracks-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-audiotracks-5"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-videotracks"
        aria-label="Links in this document to definition: videoTracks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-videotracks"
                aria-label="Permalink for definition: videoTracks. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-videotracks-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-videotracks-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-videotracks-3" title="§ 5.5.7 Initialization Segment Received">§
                    5.5.7 Initialization Segment Received</a> <a href="#ref-for-dom-sourcebuffer-videotracks-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-videotracks-5"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-texttracks"
        aria-label="Links in this document to definition: textTracks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-texttracks"
                aria-label="Permalink for definition: textTracks. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-texttracks-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-texttracks-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-texttracks-3" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dom-sourcebuffer-texttracks-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-sourcebuffer-appendwindowstart"
        aria-label="Links in this document to definition: appendWindowStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-appendwindowstart"
                aria-label="Permalink for definition: appendWindowStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowstart-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowstart-2" title="§ 5. SourceBuffer interface">§ 5.
                    SourceBuffer interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowstart-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowstart-4" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowstart-5" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8
                    Coded Frame Processing</a> <a href="#ref-for-dom-sourcebuffer-appendwindowstart-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-appendwindowstart-7"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-sourcebuffer-appendwindowstart-8"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-appendwindowend"
        aria-label="Links in this document to definition: appendWindowEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-appendwindowend"
                aria-label="Permalink for definition: appendWindowEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowend-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowend-2" title="§ 5. SourceBuffer interface">§ 5.
                    SourceBuffer interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowend-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowend-4" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendwindowend-5" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8
                    Coded Frame Processing</a> <a href="#ref-for-dom-sourcebuffer-appendwindowend-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-appendwindowend-7"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-onupdatestart"
        aria-label="Links in this document to definition: onupdatestart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-onupdatestart"
                aria-label="Permalink for definition: onupdatestart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-onupdatestart-1" title="§ 5. SourceBuffer interface">§ 5.
                    SourceBuffer interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-onupdate"
        aria-label="Links in this document to definition: onupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-onupdate"
                aria-label="Permalink for definition: onupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-onupdate-1" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-onupdateend"
        aria-label="Links in this document to definition: onupdateend">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-onupdateend"
                aria-label="Permalink for definition: onupdateend. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-onupdateend-1" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-onerror"
        aria-label="Links in this document to definition: onerror">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-onerror"
                aria-label="Permalink for definition: onerror. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-onerror-1" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-onabort"
        aria-label="Links in this document to definition: onabort">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-onabort"
                aria-label="Permalink for definition: onabort. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-onabort-1" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-appendbuffer"
        aria-label="Links in this document to definition: appendBuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-appendbuffer"
                aria-label="Permalink for definition: appendBuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-1" title="§ 3.5 duration attribute">§ 3.5 duration
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-2" title="§ 3.15.1 Attaching to a media element">§
                    3.15.1 Attaching to a media element</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-3" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-4" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-5" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-6" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-7" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment
                    Parser Loop</a> <a href="#ref-for-dom-sourcebuffer-appendbuffer-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-9" title="§ 5.5.5 Buffer Append">§ 5.5.5 Buffer
                    Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-10" title="§ 9.2 Event Summary">§ 9.2 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-11" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered
                    Change</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-appendbuffer-12" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-abort"
        aria-label="Links in this document to definition: abort">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-abort"
                aria-label="Permalink for definition: abort. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-abort-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-abort-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-abort-3" title="§ 5.4 Event Summary">§ 5.4 Event Summary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-changetype"
        aria-label="Links in this document to definition: changeType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-changetype"
                aria-label="Permalink for definition: changeType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-2" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-3" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-4" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-5" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment
                    Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-6" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dom-sourcebuffer-changetype-7"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-sourcebuffer-changetype-8"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-sourcebuffer-changetype-9"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-sourcebuffer-changetype-10"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-sourcebuffer-changetype-11"
                    title="Reference 6">(6)</a> <a href="#ref-for-dom-sourcebuffer-changetype-12"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-sourcebuffer-changetype-13"
                    title="Reference 8">(8)</a> <a href="#ref-for-dom-sourcebuffer-changetype-14"
                    title="Reference 9">(9)</a> <a href="#ref-for-dom-sourcebuffer-changetype-15"
                    title="Reference 10">(10)</a> <a href="#ref-for-dom-sourcebuffer-changetype-16"
                    title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-changetype-17" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a> <a href="#ref-for-dom-sourcebuffer-changetype-18" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebuffer-remove"
        aria-label="Links in this document to definition: remove">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebuffer-remove"
                aria-label="Permalink for definition: remove. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-544711679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebuffer-remove-1" title="§ 3.15.6 Duration change">§ 3.15.6 Duration
                    change</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-remove-2" title="§ 5. SourceBuffer interface">§ 5. SourceBuffer
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-remove-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-remove-4" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-remove-5" title="§ 9.2 Event Summary">§ 9.2 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebuffer-remove-6" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-track-buffer"
        aria-label="Links in this document to definition: track buffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#track-buffer"
                aria-label="Permalink for definition: track buffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-track-buffer-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-2" title="§ 3.15.6 Duration change">§ 3.15.6 Duration change</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-3" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-4" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-track-buffer-5" title="Reference 2">(2)</a> <a href="#ref-for-track-buffer-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-track-buffer-7" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-8" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-track-buffer-9" title="Reference 2">(2)</a> <a href="#ref-for-track-buffer-10"
                    title="Reference 3">(3)</a> <a href="#ref-for-track-buffer-11" title="Reference 4">(4)</a> <a
                    href="#ref-for-track-buffer-12" title="Reference 5">(5)</a> <a href="#ref-for-track-buffer-13"
                    title="Reference 6">(6)</a> <a href="#ref-for-track-buffer-14" title="Reference 7">(7)</a> <a
                    href="#ref-for-track-buffer-15" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-16" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-17" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser State</a> <a
                    href="#ref-for-track-buffer-18" title="Reference 2">(2)</a> <a href="#ref-for-track-buffer-19"
                    title="Reference 3">(3)</a> <a href="#ref-for-track-buffer-20" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-21" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-track-buffer-22" title="Reference 2">(2)</a>
                <a href="#ref-for-track-buffer-23" title="Reference 3">(3)</a> <a href="#ref-for-track-buffer-24"
                    title="Reference 4">(4)</a> <a href="#ref-for-track-buffer-25" title="Reference 5">(5)</a> <a
                    href="#ref-for-track-buffer-26" title="Reference 6">(6)</a> <a href="#ref-for-track-buffer-27"
                    title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-28" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-track-buffer-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-track-buffer-30" title="Reference 3">(3)</a> <a href="#ref-for-track-buffer-31"
                    title="Reference 4">(4)</a> <a href="#ref-for-track-buffer-32" title="Reference 5">(5)</a> <a
                    href="#ref-for-track-buffer-33" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-34" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame Removal</a>
                <a href="#ref-for-track-buffer-35" title="Reference 2">(2)</a> <a href="#ref-for-track-buffer-36"
                    title="Reference 3">(3)</a> <a href="#ref-for-track-buffer-37" title="Reference 4">(4)</a> <a
                    href="#ref-for-track-buffer-38" title="Reference 5">(5)</a> <a href="#ref-for-track-buffer-39"
                    title="Reference 6">(6)</a> <a href="#ref-for-track-buffer-40" title="Reference 7">(7)</a> <a
                    href="#ref-for-track-buffer-41" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-42" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio Splice Frame</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-43" title="§ 5.5.13 Text Splice Frame">§ 5.5.13 Text Splice Frame</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-last-decode-timestamp"
        aria-label="Links in this document to definition: last decode timestamp">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#last-decode-timestamp"
                aria-label="Permalink for definition: last decode timestamp. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-last-decode-timestamp-1" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-last-decode-timestamp-2" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-last-decode-timestamp-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-last-decode-timestamp-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-last-decode-timestamp-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-last-decode-timestamp-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-last-decode-timestamp-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-last-decode-timestamp-8" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-last-decode-timestamp-9" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-last-decode-timestamp-10" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-last-frame-duration"
        aria-label="Links in this document to definition: last frame duration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#last-frame-duration"
                aria-label="Permalink for definition: last frame duration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-last-frame-duration-1" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-last-frame-duration-2" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-last-frame-duration-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-last-frame-duration-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-last-frame-duration-5" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-highest-end-timestamp"
        aria-label="Links in this document to definition: highest end timestamp">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#highest-end-timestamp"
                aria-label="Permalink for definition: highest end timestamp. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-highest-end-timestamp-1" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-highest-end-timestamp-2" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-highest-end-timestamp-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-highest-end-timestamp-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-highest-end-timestamp-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-highest-end-timestamp-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-highest-end-timestamp-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-highest-end-timestamp-8" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-highest-end-timestamp-9" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-need-RAP-flag"
        aria-label="Links in this document to definition: need random access point flag">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#need-RAP-flag"
                aria-label="Permalink for definition: need random access point flag. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-need-RAP-flag-1" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser State</a>
            </li>
            <li>
                <a href="#ref-for-need-RAP-flag-2" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a>
            </li>
            <li>
                <a href="#ref-for-need-RAP-flag-3" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-need-RAP-flag-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-need-RAP-flag-5" title="Reference 3">(3)</a> <a href="#ref-for-need-RAP-flag-6"
                    title="Reference 4">(4)</a> <a href="#ref-for-need-RAP-flag-7" title="Reference 5">(5)</a> <a
                    href="#ref-for-need-RAP-flag-8" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-need-RAP-flag-9" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-track-buffer-ranges"
        aria-label="Links in this document to definition: track buffer ranges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#track-buffer-ranges"
                aria-label="Permalink for definition: track buffer ranges. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-track-buffer-ranges-1" title="§ 3.15.6 Duration change">§ 3.15.6 Duration change</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-ranges-2" title="§ 3.15.7 End of stream">§ 3.15.7 End of stream</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-ranges-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-track-buffer-ranges-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-track-buffer-ranges-5" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-track-buffer-ranges-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-updatestart"
        aria-label="Links in this document to definition: updatestart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-updatestart"
                aria-label="Permalink for definition: updatestart. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-updatestart-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updatestart-2" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updatestart-3" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updatestart-4" title="§ 8.1 Attributes">§ 8.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update"
        aria-label="Links in this document to definition: update">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update"
                aria-label="Permalink for definition: update. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-2" title="§ 5.5.5 Buffer Append">§ 5.5.5 Buffer Append</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-3" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-updateend"
        aria-label="Links in this document to definition: updateend">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-updateend"
                aria-label="Permalink for definition: updateend. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-updateend-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8 removeSourceBuffer()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updateend-2" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updateend-3" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updateend-4" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updateend-5" title="§ 5.5.5 Buffer Append">§ 5.5.5 Buffer Append</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updateend-6" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a>
            </li>
            <li>
                <a href="#ref-for-dfn-updateend-7" title="§ 8.1 Attributes">§ 8.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-error"
        aria-label="Links in this document to definition: error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-error"
                aria-label="Permalink for definition: error. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-error-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-error-2" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a>
            </li>
            <li>
                <a href="#ref-for-dfn-error-3" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a> <a
                    href="#ref-for-dfn-error-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-abort"
        aria-label="Links in this document to definition: abort">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-abort"
                aria-label="Permalink for definition: abort. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-abort-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8 removeSourceBuffer()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-abort-2" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-abort-3" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-segment-parser-loop"
        aria-label="Links in this document to definition: Segment Parser Loop">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-segment-parser-loop"
                aria-label="Permalink for definition: Segment Parser Loop. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-segment-parser-loop-1" title="§ 5.5.5 Buffer Append">§ 5.5.5 Buffer Append</a> <a
                    href="#ref-for-dfn-segment-parser-loop-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-segment-parser-loop-3" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a>
            </li>
            <li>
                <a href="#ref-for-dfn-segment-parser-loop-4" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
            <li>
                <a href="#ref-for-dfn-segment-parser-loop-5" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-append-state"
        aria-label="Links in this document to definition: [[append state]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-append-state"
                aria-label="Permalink for definition: [[append state]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-append-state-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dfn-append-state-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-append-state-3" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dfn-append-state-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-append-state-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-append-state-6"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-append-state-7" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-append-state-8" title="Reference 6">(6)</a> <a href="#ref-for-dfn-append-state-9"
                    title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-append-state-10" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser State</a>
                <a href="#ref-for-dfn-append-state-11" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-sourcebuffer-waiting-for-segment"
        aria-label="Links in this document to definition: WAITING_FOR_SEGMENT">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#sourcebuffer-waiting-for-segment"
                aria-label="Permalink for definition: WAITING_FOR_SEGMENT. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-sourcebuffer-waiting-for-segment-1" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1
                    Segment Parser Loop</a> <a href="#ref-for-sourcebuffer-waiting-for-segment-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-sourcebuffer-waiting-for-segment-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-sourcebuffer-waiting-for-segment-4"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-sourcebuffer-waiting-for-segment-5" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset
                    Parser State</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-sourcebuffer-parsing-init-segment"
        aria-label="Links in this document to definition: PARSING_INIT_SEGMENT">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#sourcebuffer-parsing-init-segment"
                aria-label="Permalink for definition: PARSING_INIT_SEGMENT. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-sourcebuffer-parsing-init-segment-1" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1
                    Segment Parser Loop</a> <a href="#ref-for-sourcebuffer-parsing-init-segment-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-sourcebuffer-parsing-media-segment"
        aria-label="Links in this document to definition: PARSING_MEDIA_SEGMENT">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#sourcebuffer-parsing-media-segment"
                aria-label="Permalink for definition: PARSING_MEDIA_SEGMENT. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-sourcebuffer-parsing-media-segment-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-sourcebuffer-parsing-media-segment-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-sourcebuffer-parsing-media-segment-3" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1
                    Segment Parser Loop</a> <a href="#ref-for-sourcebuffer-parsing-media-segment-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-sourcebuffer-parsing-media-segment-5" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset
                    Parser State</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-input-buffer"
        aria-label="Links in this document to definition: [[input buffer]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-input-buffer"
                aria-label="Permalink for definition: [[input buffer]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-input-buffer-1" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-buffer-2" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dfn-input-buffer-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-input-buffer-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-input-buffer-5"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-input-buffer-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-input-buffer-7" title="Reference 6">(6)</a> <a href="#ref-for-dfn-input-buffer-8"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-input-buffer-9" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-input-buffer-10" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-input-buffer-11" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-buffer-12" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser State</a>
                <a href="#ref-for-dfn-input-buffer-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-buffer-14" title="§ 5.5.10 Coded Frame Eviction">§ 5.5.10 Coded Frame
                    Eviction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-buffer-full-flag"
        aria-label="Links in this document to definition: [[buffer full flag]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-buffer-full-flag"
                aria-label="Permalink for definition: [[buffer full flag]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-buffer-full-flag-1" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a>
            </li>
            <li>
                <a href="#ref-for-dfn-buffer-full-flag-2" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
            <li>
                <a href="#ref-for-dfn-buffer-full-flag-3" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-dfn-buffer-full-flag-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-buffer-full-flag-5" title="§ 5.5.10 Coded Frame Eviction">§ 5.5.10 Coded Frame
                    Eviction</a> <a href="#ref-for-dfn-buffer-full-flag-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-group-start-timestamp"
        aria-label="Links in this document to definition: [[group start timestamp]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-group-start-timestamp"
                aria-label="Permalink for definition: [[group start timestamp]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-group-start-timestamp-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a> <a
                    href="#ref-for-dfn-group-start-timestamp-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-start-timestamp-3" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-start-timestamp-4" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded
                    Frame Processing</a> <a href="#ref-for-dfn-group-start-timestamp-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-group-start-timestamp-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-group-start-timestamp-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-group-start-timestamp-8" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-start-timestamp-9" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-group-end-timestamp"
        aria-label="Links in this document to definition: [[group end timestamp]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-group-end-timestamp"
                aria-label="Permalink for definition: [[group end timestamp]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-group-end-timestamp-1" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-end-timestamp-2" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-end-timestamp-3" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-end-timestamp-4" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a> <a href="#ref-for-dfn-group-end-timestamp-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-group-end-timestamp-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-group-end-timestamp-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-group-end-timestamp-8" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-group-end-timestamp-9" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-group-end-timestamp-10" title="§ 5.5.9 Coded Frame Removal">§ 5.5.9 Coded Frame
                    Removal</a> <a href="#ref-for-dfn-group-end-timestamp-11" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-generate-timestamps-flag"
        aria-label="Links in this document to definition: [[generate timestamps flag]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-generate-timestamps-flag"
                aria-label="Permalink for definition: [[generate timestamps flag]]. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-generate-timestamps-flag-1" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a> <a href="#ref-for-dfn-generate-timestamps-flag-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-generate-timestamps-flag-3" title="§ 5.1 Attributes">§ 5.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-generate-timestamps-flag-4" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dfn-generate-timestamps-flag-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-generate-timestamps-flag-6" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded
                    Frame Processing</a> <a href="#ref-for-dfn-generate-timestamps-flag-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-reset-parser-state"
        aria-label="Links in this document to definition: Reset Parser State">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-reset-parser-state"
                aria-label="Permalink for definition: Reset Parser State. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-reset-parser-state-1" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dfn-reset-parser-state-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-reset-parser-state-3" title="§ 5.5.3 Append Error">§ 5.5.3 Append Error</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-append-error"
        aria-label="Links in this document to definition: Append Error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-append-error"
                aria-label="Permalink for definition: Append Error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-append-error-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-append-error-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-append-error-3" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a> <a href="#ref-for-dfn-append-error-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-append-error-5" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a> <a href="#ref-for-dfn-append-error-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-append-error-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-append-error-8" title="§ 14. Byte Stream Formats">§ 14. Byte Stream Formats</a> <a
                    href="#ref-for-dfn-append-error-9" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-prepare-append"
        aria-label="Links in this document to definition: Prepare Append">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-prepare-append"
                aria-label="Permalink for definition: Prepare Append. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-prepare-append-1" title="§ 5.2 Methods">§ 5.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-buffer-append"
        aria-label="Links in this document to definition: Buffer Append">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-buffer-append"
                aria-label="Permalink for definition: Buffer Append. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-buffer-append-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-buffer-append-2" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dfn-buffer-append-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-range-removal"
        aria-label="Links in this document to definition: Range Removal">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-range-removal"
                aria-label="Permalink for definition: Range Removal. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-range-removal-1" title="§ 5.2 Methods">§ 5.2 Methods</a> <a
                    href="#ref-for-dfn-range-removal-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-initialization-segment-received"
        aria-label="Links in this document to definition: Initialization Segment Received">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-segment-received"
                aria-label="Permalink for definition: Initialization Segment Received. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-segment-received-1" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1
                    Segment Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-segment-received-2" title="§ 14. Byte Stream Formats">§ 14. Byte
                    Stream Formats</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-first-initialization-segment-received-flag"
        aria-label="Links in this document to definition: [[first initialization segment received flag]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-first-initialization-segment-received-flag"
                aria-label="Permalink for definition: [[first initialization segment received flag]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-first-initialization-segment-received-flag-1"
                    title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-dfn-first-initialization-segment-received-flag-2"
                    title="§ 5.5.7 Initialization Segment Received">§ 5.5.7 Initialization Segment Received</a> <a
                    href="#ref-for-dfn-first-initialization-segment-received-flag-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-first-initialization-segment-received-flag-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-first-initialization-segment-received-flag-5" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-pending-initialization-segment-for-changetype-flag"
        aria-label="Links in this document to definition: [[pending initialization segment for changeType flag]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-pending-initialization-segment-for-changetype-flag"
                aria-label="Permalink for definition: [[pending initialization segment for changeType flag]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-pending-initialization-segment-for-changetype-flag-1" title="§ 5.2 Methods">§ 5.2
                    Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-pending-initialization-segment-for-changetype-flag-2"
                    title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser Loop</a>
            </li>
            <li>
                <a href="#ref-for-dfn-pending-initialization-segment-for-changetype-flag-3"
                    title="§ 5.5.7 Initialization Segment Received">§ 5.5.7 Initialization Segment Received</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame-processing"
        aria-label="Links in this document to definition: Coded Frame Processing">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame-processing"
                aria-label="Permalink for definition: Coded Frame Processing. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-2" title="§ 3.15.3 Seeking">§ 3.15.3 Seeking</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-3" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a> <a
                    href="#ref-for-dfn-coded-frame-processing-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-processing-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-6" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment
                    Parser Loop</a> <a href="#ref-for-dfn-coded-frame-processing-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-coded-frame-processing-8" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-coded-frame-processing-9" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-10" title="§ 5.5.2 Reset Parser State">§ 5.5.2 Reset Parser
                    State</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-11" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio
                    Splice Frame</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-12" title="§ 5.5.13 Text Splice Frame">§ 5.5.13 Text Splice
                    Frame</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-processing-13" title="§ 8.1 Attributes">§ 8.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame-removal"
        aria-label="Links in this document to definition: Coded Frame Removal">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame-removal"
                aria-label="Permalink for definition: Coded Frame Removal. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-removal-1" title="§ 3.15.6 Duration change">§ 3.15.6 Duration
                    change</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-removal-2" title="§ 5.3 Track Buffers">§ 5.3 Track Buffers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-removal-3" title="§ 5.5.6 Range Removal">§ 5.5.6 Range Removal</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-removal-4" title="§ 5.5.10 Coded Frame Eviction">§ 5.5.10 Coded Frame
                    Eviction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-removal-5" title="§ 8.1 Attributes">§ 8.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-removal-6" title="§ 9.3.2 Memory cleanup">§ 9.3.2 Memory cleanup</a>
                <a href="#ref-for-dfn-coded-frame-removal-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-coded-frame-eviction"
        aria-label="Links in this document to definition: Coded Frame Eviction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-coded-frame-eviction"
                aria-label="Permalink for definition: Coded Frame Eviction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-coded-frame-eviction-1" title="§ 5.5.4 Prepare Append">§ 5.5.4 Prepare Append</a>
            </li>
            <li>
                <a href="#ref-for-dfn-coded-frame-eviction-2" title="§ 8.1 Attributes">§ 8.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-audio-splice-frame"
        aria-label="Links in this document to definition: Audio Splice Frame">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-audio-splice-frame"
                aria-label="Permalink for definition: Audio Splice Frame. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-audio-splice-frame-1" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
            <li>
                <a href="#ref-for-dfn-audio-splice-frame-2" title="§ 5.5.12 Audio Splice Rendering">§ 5.5.12 Audio
                    Splice Rendering</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-audio-splice-rendering"
        aria-label="Links in this document to definition: Audio Splice Rendering">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-audio-splice-rendering"
                aria-label="Permalink for definition: Audio Splice Rendering. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-audio-splice-rendering-1" title="§ 5.5.11 Audio Splice Frame">§ 5.5.11 Audio
                    Splice Frame</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-splice-frame"
        aria-label="Links in this document to definition: Text Splice Frame">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-splice-frame"
                aria-label="Permalink for definition: Text Splice Frame. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-splice-frame-1" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebufferlist"
        aria-label="Links in this document to definition: SourceBufferList">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebufferlist"
                aria-label="Permalink for definition: SourceBufferList. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2108728413">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-1" title="§ 3. MediaSource interface">§ 3. MediaSource
                    interface</a> <a href="#ref-for-dom-sourcebufferlist-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-3" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dom-sourcebufferlist-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-5" title="§ 6. SourceBufferList interface">§ 6. SourceBufferList
                    interface</a> <a href="#ref-for-dom-sourcebufferlist-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebufferlist-getter"
        aria-label="Links in this document to definition: getter">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebufferlist-getter"
                aria-label="Permalink for definition: getter. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-sourcebufferlist-length"
        aria-label="Links in this document to definition: length">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebufferlist-length"
                aria-label="Permalink for definition: length. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2108728413">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-length-1" title="§ 6. SourceBufferList interface">§ 6.
                    SourceBufferList interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-length-2" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-sourcebufferlist-onaddsourcebuffer"
        aria-label="Links in this document to definition: onaddsourcebuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebufferlist-onaddsourcebuffer"
                aria-label="Permalink for definition: onaddsourcebuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2108728413">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-onaddsourcebuffer-1" title="§ 6. SourceBufferList interface">§ 6.
                    SourceBufferList interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-sourcebufferlist-onremovesourcebuffer"
        aria-label="Links in this document to definition: onremovesourcebuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-sourcebufferlist-onremovesourcebuffer"
                aria-label="Permalink for definition: onremovesourcebuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2108728413">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-sourcebufferlist-onremovesourcebuffer-1" title="§ 6. SourceBufferList interface">§
                    6. SourceBufferList interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sourcebufferlist-getter"
        aria-label="Links in this document to definition: getter">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sourcebufferlist-getter"
                aria-label="Permalink for definition: getter. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-addsourcebuffer"
        aria-label="Links in this document to definition: addsourcebuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-addsourcebuffer"
                aria-label="Permalink for definition: addsourcebuffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-addsourcebuffer-1" title="§ 3.7 addSourceBuffer() method">§ 3.7 addSourceBuffer()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-addsourcebuffer-2" title="§ 3.15.5 Changes to selected/enabled track state">§
                    3.15.5 Changes to selected/enabled track state</a> <a href="#ref-for-dfn-addsourcebuffer-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-addsourcebuffer-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-addsourcebuffer-5" title="§ 5.5.7 Initialization Segment Received">§ 5.5.7
                    Initialization Segment Received</a>
            </li>
            <li>
                <a href="#ref-for-dfn-addsourcebuffer-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-removesourcebuffer"
        aria-label="Links in this document to definition: removesourcebuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-removesourcebuffer"
                aria-label="Permalink for definition: removesourcebuffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-removesourcebuffer-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a> <a href="#ref-for-dfn-removesourcebuffer-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-removesourcebuffer-3" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a> <a href="#ref-for-dfn-removesourcebuffer-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-removesourcebuffer-5" title="§ 3.15.5 Changes to selected/enabled track state">§
                    3.15.5 Changes to selected/enabled track state</a> <a href="#ref-for-dfn-removesourcebuffer-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-removesourcebuffer-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-removesourcebuffer-8" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-managedmediasource"
        aria-label="Links in this document to definition: ManagedMediaSource">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedmediasource"
                aria-label="Permalink for definition: ManagedMediaSource. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1619111096">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-managedmediasource-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-2" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-3" title="§ 3.15.2 Detaching from a media element">§ 3.15.2
                    Detaching from a media element</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-4" title="§ 7. ManagedMediaSource interface">§ 7.
                    ManagedMediaSource interface</a> <a href="#ref-for-dom-managedmediasource-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-6" title="§ 7.2 Event Summary">§ 7.2 Event Summary</a> <a
                    href="#ref-for-dom-managedmediasource-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-8" title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1
                    ManagedSourceBuffer Monitoring</a> <a href="#ref-for-dom-managedmediasource-9"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-10" title="§ 9.3.2 Memory cleanup">§ 9.3.2 Memory cleanup</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-managedmediasource-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedmediasource-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-managedmediasource-onstartstreaming"
        aria-label="Links in this document to definition: onstartstreaming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedmediasource-onstartstreaming"
                aria-label="Permalink for definition: onstartstreaming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-managedmediasource-onendstreaming"
        aria-label="Links in this document to definition: onendstreaming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedmediasource-onendstreaming"
                aria-label="Permalink for definition: onendstreaming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-managedmediasource-streaming"
        aria-label="Links in this document to definition: streaming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedmediasource-streaming"
                aria-label="Permalink for definition: streaming. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1619111096">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-managedmediasource-streaming-1" title="§ 3.15.2 Detaching from a media element">§
                    3.15.2 Detaching from a media element</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-streaming-2" title="§ 7. ManagedMediaSource interface">§ 7.
                    ManagedMediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-streaming-3" title="§ 7.2 Event Summary">§ 7.2 Event
                    Summary</a> <a href="#ref-for-dom-managedmediasource-streaming-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedmediasource-streaming-5" title="§ 7.3.1 ManagedSourceBuffer Monitoring">§
                    7.3.1 ManagedSourceBuffer Monitoring</a> <a href="#ref-for-dom-managedmediasource-streaming-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-managedmediasource-streaming-7"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-startstreaming"
        aria-label="Links in this document to definition: startstreaming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-startstreaming"
                aria-label="Permalink for definition: startstreaming. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-startstreaming-1" title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1
                    ManagedSourceBuffer Monitoring</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-endstreaming"
        aria-label="Links in this document to definition: endstreaming">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-endstreaming"
                aria-label="Permalink for definition: endstreaming. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-endstreaming-1" title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1
                    ManagedSourceBuffer Monitoring</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-enough-managed-data-to-ensure-uninterrupted-playback"
        aria-label="Links in this document to definition: enough managed data to ensure uninterrupted playback">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-enough-managed-data-to-ensure-uninterrupted-playback"
                aria-label="Permalink for definition: enough managed data to ensure uninterrupted playback. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-enough-managed-data-to-ensure-uninterrupted-playback-1"
                    title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1 ManagedSourceBuffer Monitoring</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-able-to-retrieve-and-buffer-data-in-an-efficient-way"
        aria-label="Links in this document to definition: able to retrieve and buffer data in an efficient way">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-able-to-retrieve-and-buffer-data-in-an-efficient-way"
                aria-label="Permalink for definition: able to retrieve and buffer data in an efficient way. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-able-to-retrieve-and-buffer-data-in-an-efficient-way-1"
                    title="§ 7.3.1 ManagedSourceBuffer Monitoring">§ 7.3.1 ManagedSourceBuffer Monitoring</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-memory-cleanup"
        aria-label="Links in this document to definition: Memory Cleanup">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-memory-cleanup"
                aria-label="Permalink for definition: Memory Cleanup. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-memory-cleanup-1" title="§ 7. ManagedMediaSource interface">§ 7.
                    ManagedMediaSource interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-bufferedchangeevent"
        aria-label="Links in this document to definition: BufferedChangeEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeevent"
                aria-label="Permalink for definition: BufferedChangeEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2057880103">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-bufferedchangeevent-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-bufferedchangeevent-2" title="§ 8. BufferedChangeEvent interface">§ 8.
                    BufferedChangeEvent interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-bufferedchangeevent-3" title="§ 9.2 Event Summary">§ 9.2 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-bufferedchangeevent-4" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-bufferedchangeevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-bufferedchangeeventinit"
        aria-label="Links in this document to definition: BufferedChangeEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeeventinit"
                aria-label="Permalink for definition: BufferedChangeEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-bufferedchangeeventinit-1" title="§ 8. BufferedChangeEvent interface">§ 8.
                    BufferedChangeEvent interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-bufferedchangeeventinit-2" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered
                    Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-bufferedchangeeventinit-addedranges"
        aria-label="Links in this document to definition: addedRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeeventinit-addedranges"
                aria-label="Permalink for definition: addedRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-bufferedchangeeventinit-addedranges-1" title="§ 9.3.1 Buffered Change">§ 9.3.1
                    Buffered Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-bufferedchangeeventinit-removedranges"
        aria-label="Links in this document to definition: removedRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeeventinit-removedranges"
                aria-label="Permalink for definition: removedRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-bufferedchangeeventinit-removedranges-1" title="§ 9.3.1 Buffered Change">§ 9.3.1
                    Buffered Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-bufferedchangeevent-addedranges"
        aria-label="Links in this document to definition: addedRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeevent-addedranges"
                aria-label="Permalink for definition: addedRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2057880103">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-bufferedchangeevent-addedranges-1" title="§ 8. BufferedChangeEvent interface">§ 8.
                    BufferedChangeEvent interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-bufferedchangeevent-removedranges"
        aria-label="Links in this document to definition: removedRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-bufferedchangeevent-removedranges"
                aria-label="Permalink for definition: removedRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2057880103">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-bufferedchangeevent-removedranges-1" title="§ 8. BufferedChangeEvent interface">§
                    8. BufferedChangeEvent interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-managedsourcebuffer"
        aria-label="Links in this document to definition: ManagedSourceBuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedsourcebuffer"
                aria-label="Permalink for definition: ManagedSourceBuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1682162223">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-2" title="§ 3.7 addSourceBuffer() method">§ 3.7
                    addSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-3" title="§ 7. ManagedMediaSource interface">§ 7.
                    ManagedMediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-4" title="§ 9. ManagedSourceBuffer interface">§ 9.
                    ManagedSourceBuffer interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-5" title="§ 9.2 Event Summary">§ 9.2 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-6" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-managedsourcebuffer-onbufferedchange"
        aria-label="Links in this document to definition: onbufferedchange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-managedsourcebuffer-onbufferedchange"
                aria-label="Permalink for definition: onbufferedchange. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1682162223">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-managedsourcebuffer-onbufferedchange-1"
                    title="§ 9. ManagedSourceBuffer interface">§ 9. ManagedSourceBuffer interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-bufferedchange"
        aria-label="Links in this document to definition: bufferedchange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-bufferedchange"
                aria-label="Permalink for definition: bufferedchange. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-bufferedchange-1" title="§ 7. ManagedMediaSource interface">§ 7.
                    ManagedMediaSource interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-bufferedchange-2" title="§ 9.1 Attributes">§ 9.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-bufferedchange-3" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered Change</a>
            </li>
            <li>
                <a href="#ref-for-dfn-bufferedchange-4" title="§ 9.3.2 Memory cleanup">§ 9.3.2 Memory cleanup</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-memory-cleanup-0"
        aria-label="Links in this document to definition: Memory cleanup">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-memory-cleanup-0"
                aria-label="Permalink for definition: Memory cleanup. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-memory-cleanup-0-1" title="§ 7.3.2 Memory Cleanup">§ 7.3.2 Memory Cleanup</a>
            </li>
            <li>
                <a href="#ref-for-dfn-memory-cleanup-0-2" title="§ 8.1 Attributes">§ 8.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-memory-cleanup-0-3" title="§ 9.2 Event Summary">§ 9.2 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-memory-cleanup-0-4" title="§ 9.3.1 Buffered Change">§ 9.3.1 Buffered Change</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-audiotrack-sourcebuffer"
        aria-label="Links in this document to definition: sourceBuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-audiotrack-sourcebuffer"
                aria-label="Permalink for definition: sourceBuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-935490083">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-audiotrack-sourcebuffer-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-audiotrack-sourcebuffer-2" title="§ 11. AudioTrack extensions">§ 11. AudioTrack
                    extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-videotrack-sourcebuffer"
        aria-label="Links in this document to definition: sourceBuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-videotrack-sourcebuffer"
                aria-label="Permalink for definition: sourceBuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-251527976">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-videotrack-sourcebuffer-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-videotrack-sourcebuffer-2" title="§ 12. VideoTrack extensions">§ 12. VideoTrack
                    extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-texttrack-sourcebuffer"
        aria-label="Links in this document to definition: sourceBuffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-texttrack-sourcebuffer"
                aria-label="Permalink for definition: sourceBuffer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-959897060">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-texttrack-sourcebuffer-1" title="§ 3.8 removeSourceBuffer() method">§ 3.8
                    removeSourceBuffer() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-texttrack-sourcebuffer-2" title="§ 13. TextTrack extensions">§ 13. TextTrack
                    extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-byte-stream-formats"
        aria-label="Links in this document to definition: Byte Stream Formats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-byte-stream-formats"
                aria-label="Permalink for definition: Byte Stream Formats. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-byte-stream-format-specs"
        aria-label="Links in this document to definition: byte stream format specifications">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#byte-stream-format-specs"
                aria-label="Permalink for definition: byte stream format specifications. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-byte-stream-format-specs-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-byte-stream-format-specs-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-byte-stream-format-specs-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-byte-stream-format-specs-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-byte-stream-format-specs-5" title="§ 5.5.1 Segment Parser Loop">§ 5.5.1 Segment Parser
                    Loop</a>
            </li>
            <li>
                <a href="#ref-for-byte-stream-format-specs-6" title="§ 5.5.8 Coded Frame Processing">§ 5.5.8 Coded Frame
                    Processing</a>
            </li>
            <li>
                <a href="#ref-for-byte-stream-format-specs-7" title="§ 14. Byte Stream Formats">§ 14. Byte Stream
                    Formats</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>