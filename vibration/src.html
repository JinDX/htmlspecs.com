<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="generator" content="ReSpec 35.2.2">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "âš ";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>Vibration API</title>




    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "Â§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <meta name="revision" content="baf3eb2528617337baf18599dfd1ab6427744163">
    <link rel="canonical" href="https://www.w3.org/TR/vibration/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "CRD",
  "shortName": "vibration",
  "previousPublishDate": "2024-11-29",
  "previousMaturity": "CRD",
  "github": "w3c/vibration",
  "crEnd": "2024-12-26",
  "editors": [
    {
      "name": "Anssi Kostiainen",
      "company": "Intel",
      "w3cid": "41974"
    }
  ],
  "inlineCSS": true,
  "noIDLIn": true,
  "group": "das",
  "wgPublicList": "public-device-apis",
  "testSuiteURI": "https://wpt.live/vibration/",
  "implementationReportURI": "https://wpt.fyi/results/vibration",
  "processVersion": 2023,
  "xref": {
    "profile": "web-platform"
  },
  "otherLinks": [
    {
      "key": "Translation",
      "data": [
        {
          "value": "ç®€ä½“ä¸­æ–‡",
          "href": "https://w3c-html-ig-zh.github.io/vibration/"
        }
      ]
    }
  ],
  "gitRevision": "baf3eb2528617337baf18599dfd1ab6427744163",
  "publishDate": "2025-02-12",
  "publishISODate": "2025-02-12T00:00:00.000Z",
  "generatedSubtitle": "W3C Candidate Recommendation Draft 12 February 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD">
</head>

<body class="h-entry" data-cite="HTML INFRA URL WEBIDL DOM FETCH">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Vibration API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C Candidate Recommendation Draft</a> <time
                class="dt-published" datetime="2025-02-12">12 February 2025</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/CRD-vibration-20250212/">https://www.w3.org/TR/2025/CRD-vibration-20250212/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/vibration/">https://www.w3.org/TR/vibration/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/vibration/">https://w3c.github.io/vibration/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/vibration/">https://www.w3.org/standards/history/vibration/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/vibration/commits/">Commit history</a>
                </dd>
                <dt>Test suite:</dt>
                <dd><a href="https://wpt.live/vibration/">https://wpt.live/vibration/</a></dd>
                <dt>Implementation report:</dt>
                <dd>
                    <a href="https://wpt.fyi/results/vibration">https://wpt.fyi/results/vibration</a>
                </dd>



                <dt>Editor:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="41974">
                    <span class="p-name fn">Anssi Kostiainen</span> (<span class="p-org org h-org">Intel</span>)
                </dd>


                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/vibration/">GitHub w3c/vibration</a>
                    (<a href="https://github.com/w3c/vibration/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/vibration/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/vibration/issues/">open issues</a>)
                </dd>
                <dd><a
                        href="mailto:public-device-apis@w3.org?subject=%5Bvibration%5D%20YOUR%20TOPIC%20HERE">public-device-apis@w3.org</a>
                    with subject line <kbd>[vibration] <em>â€¦ message topic â€¦</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-device-apis">archives</a>)</dd>

                <dt>Translation</dt>
                <dd>
                    <a href="https://w3c-html-ig-zh.github.io/vibration/">ç®€ä½“ä¸­æ–‡</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            Â©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>Â®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        This specification defines an API that provides access to the vibration
        mechanism of the hosting device. Vibration is a form of tactile feedback.
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
                    reports index</a> at
                https://www.w3.org/TR/.</em></p>
        <p>
            This document represents the consensus of the group on the scope and
            features of the Vibration API. It should be noted that the group is
            aware of more advanced use cases that cannot be realized using this
            simpler first version. The intent is to address them in a future
            revision.
        </p>
        <p>
            A history of <a href="#changes">changes</a> from previous version is provided.
        </p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/das">Devices and Sensors Working
                Group</a> as
            a Candidate Recommendation Draft using the
            <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Candidate Recommendation does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. A Candidate
            Recommendation Draft integrates
            changes from the previous Candidate Recommendation that the Working Group
            intends to include in a subsequent Candidate Recommendation Snapshot.</p>
        <p>
            This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than work in progress.

        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/das/ipr">public list of any patent disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">03 November 2023 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    Introduction
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#vibration-interface"><bdi class="secno">3. </bdi>
                    Vibration Interface
                </a></li>
            <li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">4.
                    </bdi>
                    Security and privacy considerations
                </a></li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">5. </bdi>
                    Examples
                </a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">A. </bdi>
                    Acknowledgements
                </a></li>
            <li class="tocline"><a class="tocxref" href="#changes"><bdi class="secno">B. </bdi>
                    Changes
                </a></li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">C. </bdi>IDL Index</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">D. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">D.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">D.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                Introduction
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            The API is specifically designed to address use cases that require
            simple tactile feedback only. Use cases requiring more fine-grained
            control are out of scope for this specification. This API is not meant
            to be used as a generic notification mechanism. Such use cases may be
            handled using the <cite>Notifications API</cite> [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-notifications" title="Notifications API Standard">NOTIFICATIONS</a></cite>]
            specification. In addition, determining whether vibration is enabled is
            out of scope for this specification.
        </p>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em
                class="rfc2119">SHOULD</em> in this document
            are to be interpreted as described in
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all capitals, as shown here.
        </p>
        <p>
            This specification defines conformance criteria that apply to a single
            product: the <dfn id="ua" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">user agent</dfn> that
            implements the
            interfaces that it contains.
        </p>
        <p>
            Implementations that use ECMAScript to implement the APIs defined in
            this specification must implement them in a manner consistent with the
            ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-webidl-1" title="Web IDL Standard">WEBIDL-1</a></cite>],
            as this specification uses that specification and terminology.
        </p>
    </section>
    <section id="vibration-interface">
        <div class="header-wrapper">
            <h2 id="x3-vibration-interface"><bdi class="secno">3. </bdi>
                Vibration Interface
            </h2><a class="self-link" href="#vibration-interface" aria-label="Permalink for Section 3."></a>
        </div>

        <pre class="idl def" data-cite="WEBIDL HTML" id="webidl-488357042"><span class="idlHeader"><a class="self-link" href="#webidl-488357042">WebIDL</a></span><code><span data-idl="" class="idlTypedef" id="idl-def-vibratepattern" data-title="VibratePattern">typedef<span class="idlType"> (<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a> or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a>&gt;)</span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-vibratepattern" id="ref-for-dom-vibratepattern-1"><code>VibratePattern</code></a>;</span><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">

partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> {<span data-idl="" class="idlMethod" id="idl-def-navigator-vibrate-pattern" data-title="vibrate" data-dfn-for="Navigator"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigator-vibrate" id="ref-for-dom-navigator-vibrate-1"><code>vibrate</code></a> (<span class="idlType"><a data-link-type="idl" href="#dom-vibratepattern" class="internalDFN" id="ref-for-dom-vibratepattern-2"><code>VibratePattern</code></a></span> <span class="idlParamName">pattern</span>);</span>
};</span></code></pre>
        <p data-link-for="Navigator">
            The
            <code><dfn data-dfn-for="Navigator" data-export="" data-dfn-type="method" id="dom-navigator-vibrate" data-idl="operation" data-title="vibrate" data-type="boolean" data-lt="vibrate()|vibrate(pattern)" data-local-lt="Navigator.vibrate|Navigator.vibrate()|vibrate" tabindex="0" aria-haspopup="dialog">vibrate</dfn>()</code>
            method
            steps are to run the <a href="#dfn-processing-vibration-patterns" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-processing-vibration-patterns-1">processing vibration patterns</a> algorithm.
            A <dfn id="dfn-vibration-pattern" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">vibration
                pattern</dfn> is represented by a
            <dfn data-export="" data-dfn-type="typedef" id="dom-vibratepattern" data-idl="typedef"
                data-title="VibratePattern" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>VibratePattern</code></dfn> object.
        </p>
        <p>
            The rules for <dfn id="dfn-processing-vibration-patterns" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">processing vibration patterns</dfn> are as given in
            the following algorithm:
        </p>
        <ol data-link-for="Navigator">
            <li>Let <var>pattern</var> be the first method argument of the
                <code><a href="#dom-navigator-vibrate" class="internalDFN" data-link-type="idl" id="ref-for-dom-navigator-vibrate-2"><code>vibrate</code></a>()</code>
                method.
            </li>
            <li>Let <var>valid pattern</var> be the result of passing
                <var>pattern</var> to <a href="#dfn-validate-and-normalize" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-validate-and-normalize-1">validate and normalize</a>.
            </li>
            <li>If the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">document</a>'s <a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state">visibility state</a>
                is not
                <code>visible</code>, then return false and terminate these steps.
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
                    <div class="">
                        A trusted (also known as privileged) application that integrates
                        closely with the operating system's functionality may vibrate the
                        device even if such an application is not visible at all, and thus
                        may ignore the previous step.
                    </div>
                </div>
            </li>
            <li>
                <a href="#dfn-perform-vibration" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-perform-vibration-1">Perform vibration</a> with <a data-link-type="dfn"
                    href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
                    global object
                </a> and <var>valid pattern</var>.
            </li>
        </ol>
        <p>
            To <dfn id="dfn-validate-and-normalize" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">validate and
                normalize</dfn> a <a href="#dfn-vibration-pattern" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-vibration-pattern-1">vibration pattern</a> given
            <var>pattern</var>, run these steps:
        </p>
        <ol>
            <li>If <var>pattern</var> is a list, proceed to the next step.
                Otherwise run the following substeps:
                <ol>
                    <li>Let <var>list</var> be an initially empty list, and add
                        <var>pattern</var> to <var>list</var>.
                    </li>
                    <li>Set <var>pattern</var> to <var>list</var>.
                    </li>
                </ol>
            </li>
            <li>Let <var>max length</var> have the value 10.
            </li>
            <li>If the length of <var>pattern</var> is greater than <var>max
                    length</var>, truncate <var>pattern</var>, leaving only the first <var>
                    max length</var> entries.
                <div class="note" role="note" id="remove-last-entry">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div>
                    <div class="">
                        If the length of the <var>pattern</var> is even and not zero then
                        the last entry in the pattern will have no effect so an
                        implementation can remove it from the <var>pattern</var> at this
                        point.
                    </div>
                </div>
            </li>
            <li>Let <var>max duration</var> have the value 10000.
            </li>
            <li>For each entry in <var>pattern</var> whose value is greater than
                <var>max duration</var>, set the entry's value to <var>max
                    duration</var>.
            </li>
            <li>Return <var>pattern</var>.
            </li>
        </ol>
        <p>
            To <dfn id="dfn-perform-vibration" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">perform
                vibration</dfn> using a <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a>
            <var>global</var> and a <a href="#dfn-vibration-pattern" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-vibration-pattern-2">vibration pattern</a> <var>pattern</var>,
            run these steps:
        </p>
        <ol>
            <li>
                If <var>global</var> does not have <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#sticky-activation">sticky
                    activation</a>,
                return false and terminate these steps.
            </li>
            <li>An implementation <em class="rfc2119">MAY</em> return false and terminate these steps.
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>Note</span></div>
                    <div class="">
                        For example, an implementation might abort the algorithm because no
                        vibration hardware is present, the user has set a preference
                        indicating that pages at a given origin should never be able to
                        vibrate the device, or an implementation might cap the total amount
                        of time a page may cause the device to vibrate and reject requests
                        in excess of this limit.
                    </div>
                </div>
            </li>
            <li>If another instance of the <a href="#dfn-perform-vibration" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-perform-vibration-2">perform vibration</a> algorithm is
                already running, run the following substeps:
                <ol>
                    <li>Abort that other instance of the <a href="#dfn-perform-vibration" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-perform-vibration-3">perform vibration</a>
                        algorithm, if any.
                    </li>
                    <li>If <var>pattern</var> is an empty list, contains a single entry
                        with a value of 0, or if the device is unable to vibrate, then
                        return true and terminate these steps.
                    </li>
                </ol>
            </li>
            <li>Return true, and then continue running these steps asynchronously.
            </li>
            <li>For each <var>time</var> in <var>pattern</var>, run the following
                substeps:
                <ol>
                    <li>If the index of <var>time</var> is even (the first entry has
                        index 0), vibrate the device for <var>time</var> milliseconds.
                    </li>
                    <li>Otherwise wait for <var>time</var> milliseconds.
                    </li>
                </ol>
            </li>
        </ol>
        <p>
            When the <a href="#ua" class="internalDFN" data-link-type="dfn" id="ref-for-ua-1">user agent</a> determines
            that
            the <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state">visibility state</a> of
            the <code>Document</code> of the <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context">top-level
                browsing
                context</a> changes, it <em class="rfc2119">MUST</em> abort the already running <a
                href="#dfn-processing-vibration-patterns" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-processing-vibration-patterns-2">processing
                vibration patterns</a> algorithm, if any.
        </p>
    </section>
    <section id="security-and-privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x4-security-and-privacy-considerations"><bdi class="secno">4. </bdi>
                Security and privacy considerations
            </h2><a class="self-link" href="#security-and-privacy-considerations"
                aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            Vibration API is not a source of data on its own and as such is not
            producing any data possible to consume on the Web. However, it is known
            that it can serve as a source of events for other APIs. In particular,
            it is known that certain sensors such as accelerometers or gyroscopes
            are prone to tiny imperfections during their manufacturing. As such,
            they provide a fingerprinting surface that can be exploited utilizing
            the vibration stimuli generated via the Vibration API. In this sense,
            Vibration API provides an indirect privacy risk, in conjunction with
            other mechanisms. This can create possibly unexpected privacy risks,
            including cross-device tracking and communication. Additionally, a
            device that is vibrating might be visible to external observers and
            enable physical identification, and possibly tracking of the user.
        </p>
        <p>
            For these reasons, the <a href="#ua" class="internalDFN" data-link-type="dfn" id="ref-for-ua-2">user
                agent</a> <em class="rfc2119">MAY</em> inform the user when
            the API is being used and provide a mechanism to disable the API
            (effectively no-op), on a per-origin basis or globally.
        </p>
        <p>
            The <a href="#ua" class="internalDFN" data-link-type="dfn" id="ref-for-ua-3">user agent</a> <em
                class="rfc2119">SHOULD</em> employ global rate limiting to restrict
            the number of vibration requests made within a certain period
            (e.g., per minute or hour) to prevent excessive use.
        </p>
    </section>
    <section class="informative" id="examples">
        <div class="header-wrapper">
            <h2 id="x5-examples"><bdi class="secno">5. </bdi>
                Examples
            </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 5."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            In the following example the device will vibrate for 1000 milliseconds
            (ms):
        </p>
        <div class="example" id="example-1">
            <div class="marker">
                <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
            </div>
            <pre class="highlight" aria-busy="false"><code class="hljs abnf">// vibrate for <span class="hljs-number">1000</span> ms
navigator.vibrate(<span class="hljs-number">1000</span>)<span class="hljs-comment">;</span>

// or alternatively
navigator.vibrate([<span class="hljs-number">1000</span>])<span class="hljs-comment">;</span></code></pre>
        </div>
        <p>
            In the following example the pattern will cause the device to vibrate
            for 50 ms, be still for 100 ms, and then vibrate for 150 ms:
        </p>
        <div class="example" id="example-2">
            <div class="marker">
                <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
            </div>
            <pre class="highlight"
                aria-busy="false"><code class="hljs css">navigator<span class="hljs-selector-class">.vibrate</span>(<span class="hljs-selector-attr">[50, 100, 150]</span>);</code></pre>
        </div>
        <p>
            The following example cancels any existing vibrations:
        </p>
        <div class="example" id="example-3">
            <div class="marker">
                <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
            </div>
            <pre class="highlight" aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">// cancel any existing vibrations</span>
navigator.<span class="hljs-title function_">vibrate</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// or alternatively</span>
navigator.<span class="hljs-title function_">vibrate</span>([]);</code></pre>
        </div>
    </section>
    <section class="appendix" id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="a-acknowledgements"><bdi class="secno">A. </bdi>
                Acknowledgements
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Appendix A."></a>
        </div>

        <p>
            The group is deeply indebted to Justin Lebar, Mounir Lamouri, Jonas
            Sicking, and the Mozilla WebAPI team for their contributions, and for
            providing the WebVibrator prototype as an initial input. Thanks to Anne
            van Kesteren for suggestions on how to make the specification reusable
            in other contexts, and to Lukasz Olejnik for the privacy
            considerations. Finally, thanks to Zhiqiang Zhang for the Simplified
            Chinese translation.
        </p>
    </section>
    <section class="appendix" id="changes">
        <div class="header-wrapper">
            <h2 id="b-changes"><bdi class="secno">B. </bdi>
                Changes
            </h2><a class="self-link" href="#changes" aria-label="Permalink for Appendix B."></a>
        </div>

        <p>
            Changes since <a href="https://www.w3.org/TR/2016/REC-vibration-20161018/"><abbr
                    title="World Wide Web Consortium">W3C</abbr> Recommendation 18 October 2016</a>:
        </p>
        <ul>
            <li>Update Security and privacy considerations (<a
                    href="https://github.com/w3c/vibration/pull/47/commits/7d644a2ffa518460fdbcdcd65cc9d4ffcb5e0e5e">7d644a2</a>,
                <a href="https://github.com/w3c/vibration/pull/47">#47</a>)
            </li>
            <li>Define "max length" and "max duration" normatively (<a
                    href="https://github.com/w3c/vibration/pull/46/commits/23e6347c1cd19b50d9c356fefb6f1800330868f1">23e6347</a>,
                <a
                    href="https://github.com/w3c/vibration/pull/46/commits/a3af007daf49001bb924a6d345e5dbc2a0c6d96f">a3af007</a>,
                <a href="https://github.com/w3c/vibration/pull/46">#46</a>)
            </li>
            <li>Require sticky activation to <a href="#dfn-perform-vibration" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-perform-vibration-4">perform vibration</a> to mitigate privacy concerns (<a
                    href="https://github.com/w3c/vibration/pull/30/commits/41d039ece8a0cfb43ef7ec818dabf9156fc956d3">41d039e</a>,
                <a href="https://github.com/w3c/vibration/pull/30">#30</a>)
            </li>
            <li>Add <a href="#dfn-vibration-pattern" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-vibration-pattern-3">vibration pattern</a> definition for reuse in other
                specifications (<a
                    href="https://github.com/w3c/vibration/pull/18/commits/b454da89ae954d4c5a6caa6c311441511349e639">b454da8</a>,
                <a href="https://github.com/w3c/vibration/pull/18">#18</a>)
            </li>
            <li>Refactor <a href="#dfn-perform-vibration" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-perform-vibration-5">perform vibration</a> algorithm to use method steps prose (<a
                    href="https://github.com/w3c/vibration/pull/30/commits/a406e764dd4155c69a4cba4ca1ac15c7b5f47587">a406e76</a>,
                <a href="https://github.com/w3c/vibration/pull/30">#30</a>)
            </li>
            <li>Add definitions for "this", "relevant global object", "sticky activation", "user agent" (<a
                    href="https://github.com/w3c/vibration/pull/30/commits/167cf3c6b2131b3d4d2fd0d2678ca3b3a7bfec29">167cf3c</a>,
                <a href="https://github.com/w3c/vibration/pull/30">#30</a>)
            </li>
            <li>Remove references to obsoleted "spin the event loop" concept (<a
                    href="https://github.com/w3c/vibration/pull/30/commits/41d039ece8a0cfb43ef7ec818dabf9156fc956d3">41d039e</a>,
                <a href="https://github.com/w3c/vibration/pull/30">#30</a>)
            </li>
            <li>Update normative reference from HTML5 to HTML Living Standard [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-html" title="HTML Standard">html</a></cite>] (<a
                    href="https://github.com/w3c/vibration/pull/23/commits/ee740335ee0ba305a97336d57c03bb449710a268">ee74033</a>,
                <a href="https://github.com/w3c/vibration/pull/23">#23</a>)
            </li>
            <li>Update governance from <abbr title="World Wide Web Consortium">W3C</abbr> Process 2015 to 2023</li>
            <li>Update visibility state definitions to [HTML], remove normative reference to [PAGE-VISIBILITY-2] (<a
                    href="https://github.com/w3c/vibration/pull/41/commits/fff4fbc618a8230eb2b21987df8c6e985a09e786">fff4fbc</a>,
                <a
                    href="https://github.com/w3c/vibration/pull/41/commits/b4dd105282b2a10d16bb11d53df55e487a0da6ec">b4dd105</a>,
                <a href="https://github.com/w3c/vibration/pull/41">#41</a>)
            </li>
        </ul>
        <p>
            Other changes that do not functionally affect interpretation of the document:
        </p>
        <ul>
            <li>Update test suite and implementation report references</li>
        </ul>
    </section>
    <section id="idl-index" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-idl-index"><bdi class="secno">C. </bdi>IDL Index</h2><a class="self-link" href="#idl-index"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlTypedef" data-title="VibratePattern">typedef<span class="idlType"> (<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a> or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a>&gt;)</span> <a class="internalDFN idlID" data-link-type="typedef" href="#dom-vibratepattern" id="ref-for-dom-vibratepattern-3"><code>VibratePattern</code></a>;</span><span data-idl="" class="idlInterface" data-title="Navigator">

partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> {<span data-idl="" class="idlMethod" data-title="vibrate" data-dfn-for="Navigator"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigator-vibrate" id="ref-for-dom-navigator-vibrate-3"><code>vibrate</code></a> (<span class="idlType"><a data-link-type="idl" href="#dom-vibratepattern" class="internalDFN" id="ref-for-dom-vibratepattern-4"><code>VibratePattern</code></a></span> <span class="idlParamName">pattern</span>);</span>
};</span></code></pre>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="d-references"><bdi class="secno">D. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix D."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="d-1-normative-references"><bdi class="secno">D.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix D.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip JÃ¤genstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl-1">[WEBIDL-1]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="d-2-informative-references"><bdi class="secno">D.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix D.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-notifications">[NOTIFICATIONS]</dt>
                <dd>
                    <a href="https://notifications.spec.whatwg.org/"><cite>Notifications API Standard</cite></a>. Anne
                    van Kesteren. WHATWG. Living Standard. URL: <a
                        href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">â†‘</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-ua"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#ua"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-ua-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration Interface</a>
            </li>
            <li>
                <a href="#ref-for-ua-2" title="Â§ 4. Security and privacy considerations">Â§ 4. Security and privacy
                    considerations</a> <a href="#ref-for-ua-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigator-vibrate"
        aria-label="Links in this document to definition: vibrate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator-vibrate"
                aria-label="Permalink for definition: vibrate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488357042">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigator-vibrate-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration Interface</a>
                <a href="#ref-for-dom-navigator-vibrate-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-vibrate-3" title="Â§ C. IDL Index">Â§ C. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-vibration-pattern"
        aria-label="Links in this document to definition: vibration pattern">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-vibration-pattern"
                aria-label="Permalink for definition: vibration pattern. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-vibration-pattern-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration Interface</a>
                <a href="#ref-for-dfn-vibration-pattern-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-vibration-pattern-3" title="Â§ B. Changes">Â§ B. Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-vibratepattern"
        aria-label="Links in this document to definition: VibratePattern">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-vibratepattern"
                aria-label="Permalink for definition: VibratePattern. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488357042">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-vibratepattern-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration Interface</a> <a
                    href="#ref-for-dom-vibratepattern-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-vibratepattern-3" title="Â§ C. IDL Index">Â§ C. IDL Index</a> <a
                    href="#ref-for-dom-vibratepattern-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-processing-vibration-patterns"
        aria-label="Links in this document to definition: processing vibration patterns">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-processing-vibration-patterns"
                aria-label="Permalink for definition: processing vibration patterns. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-processing-vibration-patterns-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration
                    Interface</a> <a href="#ref-for-dfn-processing-vibration-patterns-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-validate-and-normalize"
        aria-label="Links in this document to definition: validate and normalize">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-validate-and-normalize"
                aria-label="Permalink for definition: validate and normalize. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-validate-and-normalize-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-perform-vibration"
        aria-label="Links in this document to definition: perform vibration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-perform-vibration"
                aria-label="Permalink for definition: perform vibration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-perform-vibration-1" title="Â§ 3. Vibration Interface">Â§ 3. Vibration Interface</a>
                <a href="#ref-for-dfn-perform-vibration-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-perform-vibration-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-perform-vibration-4" title="Â§ B. Changes">Â§ B. Changes</a> <a
                    href="#ref-for-dfn-perform-vibration-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>