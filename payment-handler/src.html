<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.5.1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "âš ";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>Payment Handler API</title>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "Â§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <meta name="color-scheme" content="light">
    <meta name="revision" content="dd7e0d284c4476b1804c49ca205967141ebb464d">
    <meta name="description" content="This specification defines capabilities that enable Web applications to
        handle requests for payment.">
    <link rel="canonical" href="https://www.w3.org/TR/payment-handler/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "github": "https://github.com/w3c/payment-handler/",
  "specStatus": "WD",
  "previousPublishDate": "2023-01-25",
  "prevVersion": "FPWD",
  "previousMaturity": "WD",
  "editors": [
    {
      "name": "Ian Jacobs",
      "url": "http://www.w3.org/People/Jacobs/",
      "company": "W3C",
      "companyURL": "https://www.w3.org/",
      "w3cid": 2175
    },
    {
      "name": "Jinho Bang",
      "company": "Invited Expert",
      "email": "zino@chromium.org",
      "url": "https://github.com/romandev",
      "w3cid": 77147
    },
    {
      "name": "Stephen McGruer",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "email": "smcgruer@chromium.org",
      "w3cid": 96463
    }
  ],
  "formerEditors": [
    {
      "name": "Andre Lyver",
      "url": "https://github.com/lyverovski",
      "company": "Shopify",
      "companyURL": "https://shopify.com",
      "w3cid": 87485
    },
    {
      "name": "Tommy Thorsen",
      "url": "https://github.com/tommythorsen",
      "company": "Opera",
      "companyURL": "https://opera.com",
      "w3cid": 90636
    },
    {
      "name": "Adam Roach",
      "url": "https://github.com/adamroach",
      "company": "Mozilla",
      "companyURL": "https://mozilla.org",
      "w3cid": 67785
    },
    {
      "name": "Rouslan Solomakhin",
      "url": "https://github.com/rsolomakhin",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "w3cid": 83784
    },
    {
      "name": "Adrian Hope-Bailie",
      "url": "https://github.com/adrianhopebailie",
      "company": "Coil",
      "companyURL": "https://coil.com",
      "w3cid": 42590
    }
  ],
  "group": "payments",
  "testSuiteURI": "https://wpt.live/payment-handler/",
  "xref": "web-platform",
  "shortName": "payment-handler",
  "gitRevision": "dd7e0d284c4476b1804c49ca205967141ebb464d",
  "publishDate": "2025-09-27",
  "publishISODate": "2025-09-27T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 27 September 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body data-cite="WEBIDL service-workers payment-method-id HTML INFRA URL WEBIDL DOM FETCH" class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Payment Handler API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C Working Draft</a> <time
                class="dt-published" datetime="2025-09-27">27 September 2025</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-payment-handler-20250927/">https://www.w3.org/TR/2025/WD-payment-handler-20250927/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-handler/">https://www.w3.org/TR/payment-handler/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/payment-handler/">https://w3c.github.io/payment-handler/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/payment-handler/">https://www.w3.org/standards/history/payment-handler/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/payment-handler/commits/">Commit history</a>
                </dd>
                <dt>Test suite:</dt>
                <dd><a href="https://wpt.live/payment-handler/">https://wpt.live/payment-handler/</a></dd>




                <dt>Editors:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="2175">
                    <a class="u-url url p-name fn" href="https://www.w3.org/People/Jacobs/">Ian Jacobs</a> (<a
                        class="p-org org h-org" href="https://www.w3.org/">W3C</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="77147">
                    <a class="u-url url p-name fn" href="https://github.com/romandev">Jinho Bang</a> (<span
                        class="p-org org h-org">Invited Expert</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="96463">
                    <span class="p-name fn">Stephen McGruer</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google</a>)
                </dd>
                <dt>
                    Former editors:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="87485">
                    <a class="u-url url p-name fn" href="https://github.com/lyverovski">Andre Lyver</a> (<a
                        class="p-org org h-org" href="https://shopify.com">Shopify</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="90636">
                    <a class="u-url url p-name fn" href="https://github.com/tommythorsen">Tommy Thorsen</a> (<a
                        class="p-org org h-org" href="https://opera.com">Opera</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="67785">
                    <a class="u-url url p-name fn" href="https://github.com/adamroach">Adam Roach</a> (<a
                        class="p-org org h-org" href="https://mozilla.org">Mozilla</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="83784">
                    <a class="u-url url p-name fn" href="https://github.com/rsolomakhin">Rouslan Solomakhin</a> (<a
                        class="p-org org h-org" href="https://www.google.com/">Google</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="42590">
                    <a class="u-url url p-name fn" href="https://github.com/adrianhopebailie">Adrian Hope-Bailie</a> (<a
                        class="p-org org h-org" href="https://coil.com">Coil</a>)
                </dd>

                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/payment-handler/">GitHub w3c/payment-handler</a>
                    (<a href="https://github.com/w3c/payment-handler/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/payment-handler/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/payment-handler/issues/">open issues</a>)
                </dd>


            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            Â©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>Â®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        <p>
            This specification defines capabilities that enable Web applications to
            handle requests for payment.
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> standards and drafts
                    index</a>.</em></p>
        <p>
            The Web Payments Working Group maintains <a href="https://github.com/w3c/payment-handler/issues">a list of
                all bug
                reports that the group has not yet addressed</a>. This draft highlights
            some of the pending issues that are still to be discussed in the
            working group. No decision has been taken on the outcome of these
            issues including whether they are valid. Pull requests with proposed
            specification text for outstanding issues are strongly encouraged.
        </p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/payments">Web Payments Working
                Group</a> as
            a Working Draft using the
            <a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Working Draft does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p>
            This is a draft document and may be updated, replaced, or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than a work in progress.

        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/payments/ipr">public list of any patent
                disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent that the individual believes contains
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">18 August 2025 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    Introduction
                </a></li>
            <li class="tocline"><a class="tocxref" href="#model"><bdi class="secno">2. </bdi>
                    Overview
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#handling-a-payment-request"><bdi class="secno">2.1
                            </bdi>
                            Handling a Payment Request
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#relation-to-other-types-of-payment-apps"><bdi
                                class="secno">2.2 </bdi>
                            Relation to Other Types of Payment Apps
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#registration"><bdi class="secno">3. </bdi>
                    Registration
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#just-in-time-registration"><bdi class="secno">3.1
                            </bdi>
                            Just-in-time registration
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#management"><bdi class="secno">4. </bdi>
                    Management
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref"
                            href="#extension-to-the-serviceworkerregistration-interface"><bdi class="secno">4.1 </bdi>
                            Extension to the <code>ServiceWorkerRegistration</code> interface
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#paymentmanager-interface"><bdi class="secno">4.2
                            </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="PaymentManager" data-dfn-for=""><code>PaymentManager</code></span> interface
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#userhint-attribute"><bdi class="secno">4.2.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="userHint" data-dfn-for="PaymentManager" data-type="DOMString"
                                        data-lt="userHint"
                                        data-local-lt="PaymentManager.userHint"><code>userHint</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#enabledelegations-method"><bdi
                                        class="secno">4.2.2 </bdi>
                                    <span data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="enableDelegations()" data-dfn-for="PaymentManager"
                                        data-type="Promise" data-lt="enableDelegations()|enableDelegations(delegations)"
                                        data-local-lt="PaymentManager.enableDelegations|PaymentManager.enableDelegations()|enableDelegations"><code>enableDelegations()</code></span>
                                    method
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#paymentdelegation-enum"><bdi class="secno">4.3 </bdi>
                            <span data-export="" data-dfn-type="enum" data-idl="enum" data-title="PaymentDelegation"
                                data-dfn-for=""><code>PaymentDelegation</code></span> enum
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#canmakepayment"><bdi class="secno">5. </bdi>
                    Can make payment
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extension-to-serviceworkerglobalscope"><bdi
                                class="secno">5.1 </bdi>
                            Extension to <code>ServiceWorkerGlobalScope</code>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#oncanmakepayment-attribute"><bdi
                                        class="secno">5.1.1 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope"
                                        data-type="EventHandler" data-lt="oncanmakepayment"
                                        data-local-lt="ServiceWorkerGlobalScope.oncanmakepayment"><code>oncanmakepayment</code></span>
                                    attribute
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#the-canmakepaymentevent"><bdi class="secno">5.2 </bdi>
                            The <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="CanMakePaymentEvent" data-dfn-for=""><code>CanMakePaymentEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#respondwith-method"><bdi class="secno">5.2.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="respondWith()" data-dfn-for="CanMakePaymentEvent"
                                        data-type="undefined"
                                        data-lt="respondWith()|respondWith(canMakePaymentResponse)"
                                        data-local-lt="CanMakePaymentEvent.respondWith|CanMakePaymentEvent.respondWith()|respondWith"><code>respondWith()</code></span>
                                    method
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#handling-a-canmakepaymentevent"><bdi class="secno">5.3
                            </bdi>
                            <span>Handling a CanMakePaymentEvent</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#canmakepayment-example"><bdi class="secno">5.4 </bdi>
                            Example of handling the <span class="formerLink"
                                data-link-type="idl"><code>CanMakePaymentEvent</code></span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#filtering-of-payment-handlers"><bdi class="secno">5.5
                            </bdi>
                            Filtering of Payment Handlers
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#invocation"><bdi class="secno">6. </bdi>
                    Invocation
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extension-to-serviceworkerglobalscope-0"><bdi
                                class="secno">6.1 </bdi>
                            Extension to <span data-cite="SERVICE-WORKERS#serviceworkerglobalscope-interface"
                                data-link-type="idl" class="formerLink"><code>ServiceWorkerGlobalScope</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#onpaymentrequest-attribute"><bdi
                                        class="secno">6.1.1 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope"
                                        data-type="EventHandler" data-lt="onpaymentrequest"
                                        data-local-lt="ServiceWorkerGlobalScope.onpaymentrequest"><code>onpaymentrequest</code></span>
                                    attribute
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#the-paymentrequestdetailsupdate"><bdi
                                class="secno">6.2 </bdi>
                            The <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PaymentRequestDetailsUpdate"
                                data-dfn-for=""><code>PaymentRequestDetailsUpdate</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#error-member"><bdi class="secno">6.2.1 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field" data-title="error"
                                        data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="DOMString"><code>error</code></span> member
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#total-member"><bdi class="secno">6.2.2 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field" data-title="total"
                                        data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="PaymentCurrencyAmount"><code>total</code></span> member
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#modifiers-member"><bdi class="secno">6.2.3
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="sequence"><code>modifiers</code></span> member
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingoptions-member"><bdi
                                        class="secno">6.2.4 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="sequence"><code>shippingOptions</code></span> member
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentmethoderrors-member"><bdi
                                        class="secno">6.2.5 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="object"><code>paymentMethodErrors</code></span> member
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingaddresserrors-member"><bdi
                                        class="secno">6.2.6 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                                        data-type="AddressErrors"><code>shippingAddressErrors</code></span> member
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#the-paymentrequestevent"><bdi class="secno">6.3 </bdi>
                            The <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="PaymentRequestEvent" data-dfn-for=""><code>PaymentRequestEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#toporigin-attribute"><bdi class="secno">6.3.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="topOrigin" data-dfn-for="PaymentRequestEvent" data-type="USVString"
                                        data-lt="topOrigin"
                                        data-local-lt="PaymentRequestEvent.topOrigin"><code>topOrigin</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentrequestorigin-attribute"><bdi
                                        class="secno">6.3.2 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent"
                                        data-type="USVString" data-lt="paymentRequestOrigin"
                                        data-local-lt="PaymentRequestEvent.paymentRequestOrigin"><code>paymentRequestOrigin</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentrequestid-attribute"><bdi
                                        class="secno">6.3.3 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent"
                                        data-type="DOMString" data-lt="paymentRequestId"
                                        data-local-lt="PaymentRequestEvent.paymentRequestId"><code>paymentRequestId</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#methoddata-attribute"><bdi class="secno">6.3.4
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="methodData" data-dfn-for="PaymentRequestEvent"
                                        data-type="FrozenArray" data-lt="methodData"
                                        data-local-lt="PaymentRequestEvent.methodData"><code>methodData</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#total-attribute"><bdi class="secno">6.3.5
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="total" data-dfn-for="PaymentRequestEvent" data-type="object"
                                        data-lt="total"
                                        data-local-lt="PaymentRequestEvent.total"><code>total</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#modifiers-attribute"><bdi class="secno">6.3.6
                                    </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="modifiers" data-dfn-for="PaymentRequestEvent"
                                        data-type="FrozenArray" data-lt="modifiers"
                                        data-local-lt="PaymentRequestEvent.modifiers"><code>modifiers</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentoptions-attribute"><bdi
                                        class="secno">6.3.7 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="paymentOptions" data-dfn-for="PaymentRequestEvent"
                                        data-type="object" data-lt="paymentOptions"
                                        data-local-lt="PaymentRequestEvent.paymentOptions"><code>paymentOptions</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingoptions-attribute"><bdi
                                        class="secno">6.3.8 </bdi>
                                    <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                        data-title="shippingOptions" data-dfn-for="PaymentRequestEvent"
                                        data-type="FrozenArray" data-lt="shippingOptions"
                                        data-local-lt="PaymentRequestEvent.shippingOptions"><code>shippingOptions</code></span>
                                    attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#openwindow-method"><bdi class="secno">6.3.9
                                    </bdi>
                                    <span data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="openWindow()" data-dfn-for="PaymentRequestEvent" data-type="Promise"
                                        data-lt="openWindow()|openWindow(url)"
                                        data-local-lt="PaymentRequestEvent.openWindow|PaymentRequestEvent.openWindow()|openWindow"><code>openWindow()</code></span>
                                    method
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#changepaymentmethod-method"><bdi
                                        class="secno">6.3.10 </bdi>
                                    <span
                                        data-lt="changePaymentMethod(methodName, methodDetails)|changePaymentMethod()|changePaymentMethod(methodName)"
                                        data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="changePaymentMethod()" data-dfn-for="PaymentRequestEvent"
                                        data-type="Promise"
                                        data-local-lt="PaymentRequestEvent.changePaymentMethod|PaymentRequestEvent.changePaymentMethod()|changePaymentMethod"><code>changePaymentMethod()</code></span>
                                    method
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#changeshippingaddress-method"><bdi
                                        class="secno">6.3.11 </bdi>
                                    <span data-lt="changeShippingAddress(shippingAddress)|changeShippingAddress()"
                                        data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="changeShippingAddress()" data-dfn-for="PaymentRequestEvent"
                                        data-type="Promise"
                                        data-local-lt="PaymentRequestEvent.changeShippingAddress|PaymentRequestEvent.changeShippingAddress()|changeShippingAddress"><code>changeShippingAddress()</code></span>
                                    method
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#changeshippingoption-method"><bdi
                                        class="secno">6.3.12 </bdi>
                                    <span data-lt="changeShippingOption(shippingOption)|changeShippingOption()"
                                        data-export="" data-dfn-type="method" data-idl="operation"
                                        data-title="changeShippingOption()" data-dfn-for="PaymentRequestEvent"
                                        data-type="Promise"
                                        data-local-lt="PaymentRequestEvent.changeShippingOption|PaymentRequestEvent.changeShippingOption()|changeShippingOption"><code>changeShippingOption()</code></span>
                                    method
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#respondwith-method-0"><bdi
                                        class="secno">6.3.13 </bdi>
                                    <span data-lt="respondWith(handlerResponsePromise)|respondWith()" data-export=""
                                        data-dfn-type="method" data-idl="operation" data-title="respondWith()"
                                        data-dfn-for="PaymentRequestEvent" data-type="undefined"
                                        data-local-lt="PaymentRequestEvent.respondWith|PaymentRequestEvent.respondWith()|respondWith"><code>respondWith()</code></span>
                                    method
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#paymentrequesteventinit-dictionary"><bdi
                                        class="secno">6.3.14 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="PaymentRequestEventInit"
                                        data-dfn-for=""><code>PaymentRequestEventInit</code></span> dictionary
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#methoddata-population-algorithm"><bdi
                                        class="secno">6.3.15 </bdi>
                                    <span>MethodData Population Algorithm</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#modifiers-population-algorithm"><bdi
                                        class="secno">6.3.16 </bdi>
                                    <span>Modifiers Population Algorithm</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#internal-slots"><bdi class="secno">6.4 </bdi>
                            Internal Slots
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#handling-a-paymentrequestevent"><bdi class="secno">6.5
                            </bdi>
                            <span>Handling a PaymentRequestEvent</span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#windows"><bdi class="secno">7. </bdi>
                    <span data-lt="payment handler window|Windows">Windows</span>
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#open-window-algorithm"><bdi class="secno">7.1 </bdi>
                            <span>Open Window Algorithm</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#post-example"><bdi class="secno">7.2 </bdi>
                            Example of handling the <span data-xref-type="_IDL_" data-link-type="idl"
                                data-lt="PaymentRequestEvent" class="formerLink"><code>PaymentRequestEvent</code></span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#response"><bdi class="secno">8. </bdi>
                    Response
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#paymenthandlerresponse-dictionary"><bdi
                                class="secno">8.1 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PaymentHandlerResponse"
                                data-dfn-for=""><code>PaymentHandlerResponse</code></span> dictionary
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#methodname-attribute"><bdi class="secno">8.1.1
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="methodName" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>methodName</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#details-attribute"><bdi class="secno">8.1.2
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="details" data-dfn-for="PaymentHandlerResponse"
                                        data-type="object"><code>details</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#payername-attribute"><bdi class="secno">8.1.3
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="payerName" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>payerName</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#payeremail-attribute"><bdi class="secno">8.1.4
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>payerEmail</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#payerphone-attribute"><bdi class="secno">8.1.5
                                    </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>payerPhone</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingaddress-attribute"><bdi
                                        class="secno">8.1.6 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"
                                        data-type="AddressInit"><code>shippingAddress</code></span> attribute
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#shippingoption-attribute"><bdi
                                        class="secno">8.1.7 </bdi>
                                    <span data-export="" data-dfn-type="dict-member" data-idl="field"
                                        data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"
                                        data-type="DOMString"><code>shippingOption</code></span> attribute
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#change-payment-method-algorithm"><bdi
                                class="secno">8.2 </bdi>
                            <span>Change Payment Method Algorithm</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#change-payment-details-algorithm"><bdi
                                class="secno">8.3 </bdi>
                            <span>Change Payment Details Algorithm</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#respond-to-paymentrequest-algorithm"><bdi
                                class="secno">8.4 </bdi>
                            <span>Respond to PaymentRequest Algorithm</span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security"><bdi class="secno">9. </bdi>
                    Security and Privacy Considerations
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#addresses"><bdi class="secno">9.1 </bdi>Addresses</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#information-about-the-user-environment"><bdi
                                class="secno">9.2 </bdi>
                            Information about the User Environment
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-consent-to-install"><bdi class="secno">9.3 </bdi>
                            User Consent to Install a Payment Handler
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-consent-before-payment"><bdi class="secno">9.4
                            </bdi>
                            User Consent before Payment
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#user-awareness-about-sharing-data-cross-origin"><bdi
                                class="secno">9.5 </bdi>
                            User Awareness about Sharing Data Cross-Origin
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#secure-communications"><bdi class="secno">9.6 </bdi>
                            Secure Communications
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#authorized-payment-apps"><bdi class="secno">9.7 </bdi>
                            Authorized Payment Apps
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#supported-origin"><bdi class="secno">9.8 </bdi>
                            Supported Origin
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#data-validation"><bdi class="secno">9.9 </bdi>
                            Data Validation
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#private-browsing-mode"><bdi class="secno">9.10 </bdi>
                            Private Browsing Mode
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#display"><bdi class="secno">10. </bdi>
                    Payment Handler Display Considerations
                </a></li>
            <li class="tocline"><a class="tocxref" href="#dependencies"><bdi class="secno">11. </bdi>
                    Dependencies
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">12. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">A. </bdi>IDL Index</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                Introduction
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            This specification defines a number of new features to allow web
            applications to handle requests for payments on behalf of users:
        </p>
        <ul>
            <li>An origin-based permission to handle payment request events.
            </li>
            <li>A payment request event type (<a data-link-type="idl" data-lt="PaymentRequestEvent"
                    href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-1"><code>PaymentRequestEvent</code></a>). A <a
                    href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-1">payment
                    handler</a> is an event handler for the <a data-link-type="idl" data-lt="PaymentRequestEvent"
                    href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-2"><code>PaymentRequestEvent</code></a>.
            </li>
            <li>An extension to the <a href="#dfn-service-worker-registration" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-service-worker-registration-1">service worker registration</a> interface
                (<a data-link-type="idl" data-lt="PaymentManager" href="#dom-paymentmanager" class="internalDFN"
                    id="ref-for-dom-paymentmanager-1"><code>PaymentManager</code></a>) to manage properties of payment
                handlers.
            </li>
            <li>A mechanism to respond to the <a data-link-type="idl" data-lt="PaymentRequestEvent"
                    href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-3"><code>PaymentRequestEvent</code></a>.
            </li>
        </ul>
        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
            <p class="">
                This specification does not address how software built with
                operating-system specific mechanisms (i.e., "native apps") handle
                payment requests.
            </p>
        </div>
    </section>
    <section id="model">
        <div class="header-wrapper">
            <h2 id="x2-overview"><bdi class="secno">2. </bdi>
                Overview
            </h2><a class="self-link" href="#model" aria-label="Permalink for Section 2."></a>
        </div>

        <p>
            In this document we envision the following flow:
        </p>
        <ol>
            <li>An origin requests permission from the user to handle payment
                requests for a set of supported payment methods. For example, a user
                visiting a retail or bank site may be prompted to register a payment
                handler from that origin. The origin establishes the scope of the
                permission but the origin's capabilities may evolve without requiring
                additional user consent.
            </li>
            <li>
                <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-2">Payment handlers</a> are defined in <a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#service-worker-concept">service worker</a> code.
            </li>
            <li>When the merchant (or other <dfn id="dfn-payee" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">payee</dfn>) calls the
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                        title="Payment Request API">payment-request</a></cite>] method <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#canmakepayment-method">canMakePayment()</a> or <a
                    data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#show-method">show()</a>
                (e.g., when the user -- the <dfn id="dfn-payer" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">payer</dfn> -- pushes a button on a
                checkout page), the user agent computes a list of candidate payment
                handlers, comparing the payment methods accepted by the merchant with
                those known to the user agent through any number of mechanisms,
                including, but not limited to:
                <ul>
                    <li>Those previously registered through this API.</li>
                    <li>Those that may be registered through this API during the course of
                        the transaction, e.g., identified through a <a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                            manifest</a>.</li>
                    <li>Those registered through other mechanisms, e.g., the operating
                        system.</li>
                </ul>
            </li>
            <li>The user agent displays a set of choices to the user: the candidate
                payment handlers. The user agent displays these choices using
                information (labels and icons) provided at registration or otherwise
                available from the Web app.
            </li>
            <li>When the <a href="#dfn-payer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payer-1">payer</a> user selects a payment handler, the user agent
                fires a <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-4"><code>PaymentRequestEvent</code></a> (cf.
                the <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">user
                    interaction task
                    source</a>) in the <a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#service-worker-concept">service worker</a> for the
                selected payment
                handler. The <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-5"><code>PaymentRequestEvent</code></a>
                includes some information from the
                PaymentRequest (defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                        title="Payment Request API">payment-request</a></cite>]) as well as additional
                information (e.g., payee's origin).
            </li>
            <li>Once activated, the payment handler performs whatever steps are
                necessary to <a href="#handling-a-payment-request">handle the payment
                    request</a>, and return an appropriate payment response to the
                <a href="#dfn-payee" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-payee-1">payee</a>. If
                interaction with the user is necessary, the <a href="#dfn-payment-handler" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-payment-handler-3">payment
                    handler</a> can open a window for that purpose.
            </li>
            <li>The user agent receives a response asynchronously once the payment
                handler has finished handling the request. The response becomes the
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentresponse">PaymentResponse</a> (of [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-payment-request"
                        title="Payment Request API">payment-request</a></cite>]).
            </li>
        </ol>
        <div class="note" role="note" id="issue-container-generatedID-0">
            <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div>
            <p class="">
                An origin may implement a payment app with more than one service worker
                and therefore multiple <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-4">payment handlers</a> may be registered per
                origin. The handler that is invoked is determined by the selection made
                by the user.
            </p>
        </div>
        <section class="informative" id="handling-a-payment-request">
            <div class="header-wrapper">
                <h3 id="x2-1-handling-a-payment-request"><bdi class="secno">2.1 </bdi>
                    Handling a Payment Request
                </h3><a class="self-link" href="#handling-a-payment-request" aria-label="Permalink for Section 2.1"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>
                A <dfn data-plurals="payment handlers" id="dfn-payment-handler" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">payment handler</dfn> is a Web application that can handle a
                request for payment on behalf of the user.
            </p>
            <p>
                The logic of a payment handler is driven by the payment methods that
                it supports. Some payment methods expect little to no processing by
                the payment handler which simply returns payment card details in the
                response. It is then the job of the payee website to process the
                payment using the returned data as input.
            </p>
            <p>
                In contrast, some payment methods, such as a crypto-currency payments
                or bank originated credit transfers, require that the payment handler
                initiate processing of the payment. In such cases the payment handler
                will return a payment reference, endpoint URL or some other data that
                the payee website can use to determine the outcome of the payment (as
                opposed to processing the payment itself).
            </p>
            <p>
                Handling a payment request may include numerous interactions: with
                the user through a new window or other APIs (such as
                <cite><a data-matched-text="[[[WebCryptoAPI]]]" href="https://www.w3.org/TR/WebCryptoAPI/">Web
                        Cryptography API</a></cite>) or with other services and origins through web
                requests or other means.
            </p>
            <p>
                This specification does not address these activities that occur
                between the payment handler accepting the <a data-link-type="idl" data-lt="PaymentRequestEvent"
                    href="#dom-paymentrequestevent" class="internalDFN"
                    id="ref-for-dom-paymentrequestevent-6"><code>PaymentRequestEvent</code></a> and
                the payment handler returning a response. All of these activities
                which may be required to configure the payment handler and handle the
                payment request, are left to the implementation of the payment
                handler, including:
            </p>
            <ul>
                <li>how the user establishes an account with an origin that provides
                    payment services.
                </li>
                <li>how an origin authenticates a user.
                </li>
                <li>how communication takes place between the payee server and the
                    payee Web application, or between a payment app origin and other
                    parties.
                </li>
            </ul>
            <p>
                Thus, an origin will rely on many other Web technologies defined
                elsewhere for lifecycle management, security, user authentication,
                user interaction, and so on.
            </p>
        </section>
        <section class="informative" id="relation-to-other-types-of-payment-apps">
            <div class="header-wrapper">
                <h3 id="x2-2-relation-to-other-types-of-payment-apps"><bdi class="secno">2.2 </bdi>
                    Relation to Other Types of Payment Apps
                </h3><a class="self-link" href="#relation-to-other-types-of-payment-apps"
                    aria-label="Permalink for Section 2.2"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>
                This specification does not address how third-party mobile payment
                apps interact (through proprietary mechanisms) with user agents, or
                how user agents themselves provide simple payment app functionality.
            </p>
            <figure
                id="fig-payment-handler-api-enables-web-apps-to-handle-payments-other-types-of-payment-apps-may-use-other-proprietary-mechanisms">
                <img alt="Different types of payment apps. Payment Handler API is for Web apps." src="app-types.png">
                <figcaption><a class="self-link"
                        href="#fig-payment-handler-api-enables-web-apps-to-handle-payments-other-types-of-payment-apps-may-use-other-proprietary-mechanisms">Figure
                        <bdi class="figno">1</bdi></a> <span class="fig-title">
                        Payment Handler API enables Web apps to handle payments. Other
                        types of payment apps may use other (proprietary) mechanisms.
                    </span></figcaption>
            </figure>
        </section>
    </section>

    <section id="registration">
        <div class="header-wrapper">
            <h2 id="x3-registration"><bdi class="secno">3. </bdi>
                Registration
            </h2><a class="self-link" href="#registration" aria-label="Permalink for Section 3."></a>
        </div>

        <p>
            One registers a payment handler with the user agent through a
            just-in-time (JIT) registration mechanism.
        </p>
        <section id="just-in-time-registration">
            <div class="header-wrapper">
                <h3 id="x3-1-just-in-time-registration"><bdi class="secno">3.1 </bdi>
                    Just-in-time registration
                </h3><a class="self-link" href="#just-in-time-registration" aria-label="Permalink for Section 3.1"></a>
            </div>

            <p>
                If a payment handler is not registered when a merchant invokes
                <a data-link-type="idl" data-lt="show()"
                    href="https://www.w3.org/TR/payment-request/#show-method"><code>show</code></a><code>()</code>
                method, a user agent may allow the user to
                register this payment handler during the transaction ("just-in-time").
            </p>
            <p><em>The remaining content of this section is non-normative.</em></p>
            <p>
                A user agent may perform just-in-time installation by deriving payment
                handler information from the <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                    manifest</a> that is
                found through the <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-method-id/#dfn-url-based-payment-method-identifier">URL-based
                    payment method identifier</a> that the
                merchant requested.
            </p>
        </section>
    </section>
    <section id="management">
        <div class="header-wrapper">
            <h2 id="x4-management"><bdi class="secno">4. </bdi>
                Management
            </h2><a class="self-link" href="#management" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            This section describes the functionality available to a payment handler
            to manage its own properties.
        </p>
        <section data-dfn-for="ServiceWorkerRegistration" id="extension-to-the-serviceworkerregistration-interface">
            <div class="header-wrapper">
                <h3 id="x4-1-extension-to-the-serviceworkerregistration-interface"><bdi class="secno">4.1 </bdi>
                    Extension to the <code>ServiceWorkerRegistration</code> interface
                </h3><a class="self-link" href="#extension-to-the-serviceworkerregistration-interface"
                    aria-label="Permalink for Section 4.1"></a>
            </div>

            <pre class="idl def" id="webidl-1742672635"><span class="idlHeader"><a class="self-link" href="#webidl-1742672635">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerregistration-partial-1" data-title="ServiceWorkerRegistration">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerregistration-paymentmanager" data-title="paymentManager" data-dfn-for="ServiceWorkerRegistration">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-paymentmanager" class="internalDFN" id="ref-for-dom-paymentmanager-2"><code>PaymentManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-paymentmanager" id="ref-for-dom-serviceworkerregistration-paymentmanager-1"><code>paymentManager</code></a>;</span>
};</span></code></pre>
            <p>
                The <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerregistration-paymentmanager"
                    data-idl="attribute" data-title="paymentManager" data-dfn-for="ServiceWorkerRegistration"
                    data-type="PaymentManager" data-lt="paymentManager"
                    data-local-lt="ServiceWorkerRegistration.paymentManager" tabindex="0"
                    aria-haspopup="dialog"><code>paymentManager</code></dfn> attribute exposes payment handler
                management functionality.
            </p>
        </section>
        <section data-dfn-for="PaymentManager" id="paymentmanager-interface">
            <div class="header-wrapper">
                <h3 id="x4-2-paymentmanager-interface"><bdi class="secno">4.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-paymentmanager" data-idl="interface"
                        data-title="PaymentManager" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentManager</code></dfn> interface
                </h3><a class="self-link" href="#paymentmanager-interface" aria-label="Permalink for Section 4.2"></a>
            </div>

            <pre class="idl def" id="webidl-1708874582"><span class="idlHeader"><a class="self-link" href="#webidl-1708874582">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-paymentmanager" data-title="PaymentManager">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentmanager" id="ref-for-dom-paymentmanager-3"><code>PaymentManager</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-paymentmanager-userhint" data-title="userHint" data-dfn-for="PaymentManager">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentmanager-userhint" id="ref-for-dom-paymentmanager-userhint-1"><code>userHint</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-paymentmanager-enabledelegations-delegations" data-title="enableDelegations" data-dfn-for="PaymentManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentmanager-enabledelegations" id="ref-for-dom-paymentmanager-enabledelegations-1"><code>enableDelegations</code></a>(<span class="idlType"><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-paymentdelegation" class="internalDFN" id="ref-for-dom-paymentdelegation-1"><code>PaymentDelegation</code></a>&gt;</span> <span class="idlParamName">delegations</span>);</span>
};</span></code></pre>
            <p>
                The <a data-link-type="idl" data-lt="PaymentManager" href="#dom-paymentmanager" class="internalDFN"
                    id="ref-for-dom-paymentmanager-4"><code>PaymentManager</code></a> is used by <a
                    href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-5">payment handler</a>s to manage
                their supported delegations.
            </p>
            <section id="userhint-attribute">
                <div class="header-wrapper">
                    <h4 id="x4-2-1-userhint-attribute"><bdi class="secno">4.2.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentmanager-userhint"
                            data-idl="attribute" data-title="userHint" data-dfn-for="PaymentManager"
                            data-type="DOMString" data-lt="userHint" data-local-lt="PaymentManager.userHint"
                            tabindex="0" aria-haspopup="dialog"><code>userHint</code></dfn> attribute
                    </h4><a class="self-link" href="#userhint-attribute" aria-label="Permalink for Section 4.2.1"></a>
                </div>

                <p>
                    When displaying payment handler name and icon, the user agent may
                    use this string to improve the user experience. For example, a user
                    hint of "**** 1234" can remind the user that a particular card is
                    available through this payment handler.
                </p>
            </section>
            <section id="enabledelegations-method">
                <div class="header-wrapper">
                    <h4 id="x4-2-2-enabledelegations-method"><bdi class="secno">4.2.2 </bdi>
                        <dfn data-export="" data-dfn-type="method" id="dom-paymentmanager-enabledelegations"
                            data-idl="operation" data-title="enableDelegations()" data-dfn-for="PaymentManager"
                            data-type="Promise" data-lt="enableDelegations()|enableDelegations(delegations)"
                            data-local-lt="PaymentManager.enableDelegations|PaymentManager.enableDelegations()|enableDelegations"
                            tabindex="0" aria-haspopup="dialog"><code>enableDelegations()</code></dfn> method
                    </h4><a class="self-link" href="#enabledelegations-method"
                        aria-label="Permalink for Section 4.2.2"></a>
                </div>

                <p>
                    This method allows a <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-payment-handler-6">payment handler</a> to asynchronously
                    declare its supported <a href="#dom-paymentdelegation" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentdelegation-2"><code>PaymentDelegation</code></a> list.
                </p>
            </section>
        </section>
        <section data-dfn-for="PaymentDelegation" id="paymentdelegation-enum">
            <div class="header-wrapper">
                <h3 id="x4-3-paymentdelegation-enum"><bdi class="secno">4.3 </bdi>
                    <dfn data-export="" data-dfn-type="enum" id="dom-paymentdelegation" data-idl="enum"
                        data-title="PaymentDelegation" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentDelegation</code></dfn> enum
                </h3><a class="self-link" href="#paymentdelegation-enum" aria-label="Permalink for Section 4.3"></a>
            </div>

            <pre class="idl def" id="webidl-1015767474"><span class="idlHeader"><a class="self-link" href="#webidl-1015767474">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-paymentdelegation" data-title="PaymentDelegation">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-paymentdelegation" id="ref-for-dom-paymentdelegation-3"><code>PaymentDelegation</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-shippingaddress" id="ref-for-dom-paymentdelegation-shippingaddress-1"><code>shippingAddress</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payername" id="ref-for-dom-paymentdelegation-payername-1"><code>payerName</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payerphone" id="ref-for-dom-paymentdelegation-payerphone-1"><code>payerPhone</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payeremail" id="ref-for-dom-paymentdelegation-payeremail-1"><code>payerEmail</code></a>"</span>
};</span></code></pre>
            <dl>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-shippingaddress"
                        data-idl="enum-value" data-title="shippingAddress" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>shippingAddress</code></dfn>"
                </dt>
                <dd>
                    The payment handler will provide shipping address whenever needed.
                </dd>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-payername"
                        data-idl="enum-value" data-title="payerName" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>payerName</code></dfn>"
                </dt>
                <dd>
                    The payment handler will provide payer's name whenever needed.
                </dd>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-payerphone"
                        data-idl="enum-value" data-title="payerPhone" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>payerPhone</code></dfn>"
                </dt>
                <dd>
                    The payment handler will provide payer's phone whenever needed.
                </dd>
                <dt>
                    "<dfn data-export="" data-dfn-type="enum-value" id="dom-paymentdelegation-payeremail"
                        data-idl="enum-value" data-title="payerEmail" data-dfn-for="PaymentDelegation" tabindex="0"
                        aria-haspopup="dialog"><code>payerEmail</code></dfn>"
                </dt>
                <dd>
                    The payment handler will provide payer's email whenever needed.
                </dd>
            </dl>
        </section>
    </section>
    <section id="canmakepayment">
        <div class="header-wrapper">
            <h2 id="x5-can-make-payment"><bdi class="secno">5. </bdi>
                Can make payment
            </h2><a class="self-link" href="#canmakepayment" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            If the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-payment-handler-7">payment handler</a> supports <a href="#dom-canmakepaymentevent"
                class="internalDFN" data-link-type="idl"
                id="ref-for-dom-canmakepaymentevent-1"><code>CanMakePaymentEvent</code></a>, the
            <a href="#dfn-user-agents" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agents-1">user
                agent</a> may use it to help with filtering of the available
            payment handlers.
        </p>
        <p>
            Implementations may impose a timeout for developers to respond to the
            <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-canmakepaymentevent-2"><code>CanMakePaymentEvent</code></a>. If the timeout expires,
            then the
            implementation will behave as if <a data-link-type="idl" data-lt="respondWith()"
                href="#dom-canmakepaymentevent-respondwith" class="internalDFN"
                id="ref-for-dom-canmakepaymentevent-respondwith-1"><code>respondWith</code></a><code>()</code>
            was called with <code>false</code>.
        </p>
        <section data-dfn-for="ServiceWorkerGlobalScope" id="extension-to-serviceworkerglobalscope">
            <div class="header-wrapper">
                <h3 id="x5-1-extension-to-serviceworkerglobalscope"><bdi class="secno">5.1 </bdi>
                    Extension to <code>ServiceWorkerGlobalScope</code>
                </h3><a class="self-link" href="#extension-to-serviceworkerglobalscope"
                    aria-label="Permalink for Section 5.1"></a>
            </div>

            <pre class="idl def" id="webidl-1445944587"><span class="idlHeader"><a class="self-link" href="#webidl-1445944587">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerglobalscope-partial-1" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-oncanmakepayment" data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-oncanmakepayment" id="ref-for-dom-serviceworkerglobalscope-oncanmakepayment-1"><code>oncanmakepayment</code></a>;</span>
};</span></code></pre>
            <section id="oncanmakepayment-attribute">
                <div class="header-wrapper">
                    <h4 id="x5-1-1-oncanmakepayment-attribute"><bdi class="secno">5.1.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-oncanmakepayment"
                            data-idl="attribute" data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope"
                            data-type="EventHandler" data-lt="oncanmakepayment"
                            data-local-lt="ServiceWorkerGlobalScope.oncanmakepayment" tabindex="0"
                            aria-haspopup="dialog"><code>oncanmakepayment</code></dfn> attribute
                    </h4><a class="self-link" href="#oncanmakepayment-attribute"
                        aria-label="Permalink for Section 5.1.1"></a>
                </div>

                <p>
                    The <a data-link-type="idl" href="#dom-serviceworkerglobalscope-oncanmakepayment"
                        class="internalDFN"
                        id="ref-for-dom-serviceworkerglobalscope-oncanmakepayment-2"><code>oncanmakepayment</code></a>
                    attribute is an
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a>
                    whose corresponding <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event
                        handler event
                        type</a> is "canmakepayment".
                </p>
            </section>
        </section>
        <section data-dfn-for="CanMakePaymentEvent" id="the-canmakepaymentevent">
            <div class="header-wrapper">
                <h3 id="x5-2-the-canmakepaymentevent"><bdi class="secno">5.2 </bdi>
                    The <dfn data-export="" data-dfn-type="interface" id="dom-canmakepaymentevent" data-idl="interface"
                        data-title="CanMakePaymentEvent" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>CanMakePaymentEvent</code></dfn>
                </h3><a class="self-link" href="#the-canmakepaymentevent" aria-label="Permalink for Section 5.2"></a>
            </div>

            <p>
                The <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-canmakepaymentevent-3"><code>CanMakePaymentEvent</code></a> is used to as a signal
                for whether the
                payment handler is able to respond to a payment request.
            </p>
            <pre class="idl def" id="webidl-238602632"><span class="idlHeader"><a class="self-link" href="#webidl-238602632">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-canmakepaymentevent" data-title="CanMakePaymentEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-canmakepaymentevent" id="ref-for-dom-canmakepaymentevent-4"><code>CanMakePaymentEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-canmakepaymentevent-constructor-type" data-title="constructor" data-dfn-for="CanMakePaymentEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-canmakepaymentevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CanMakePaymentEvent" data-lt="constructor()|constructor(type)" data-local-lt="CanMakePaymentEvent.constructor|CanMakePaymentEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span><span data-idl="" class="idlMethod" id="idl-def-canmakepaymentevent-respondwith-canmakepaymentresponse" data-title="respondWith" data-dfn-for="CanMakePaymentEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-canmakepaymentevent-respondwith" id="ref-for-dom-canmakepaymentevent-respondwith-2"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <span class="idlParamName">canMakePaymentResponse</span>);</span>
};</span></code></pre>
            <section id="respondwith-method">
                <div class="header-wrapper">
                    <h4 id="x5-2-1-respondwith-method"><bdi class="secno">5.2.1 </bdi>
                        <dfn data-export="" data-dfn-type="method" id="dom-canmakepaymentevent-respondwith"
                            data-idl="operation" data-title="respondWith()" data-dfn-for="CanMakePaymentEvent"
                            data-type="undefined" data-lt="respondWith()|respondWith(canMakePaymentResponse)"
                            data-local-lt="CanMakePaymentEvent.respondWith|CanMakePaymentEvent.respondWith()|respondWith"
                            tabindex="0" aria-haspopup="dialog"><code>respondWith()</code></dfn> method
                    </h4><a class="self-link" href="#respondwith-method" aria-label="Permalink for Section 5.2.1"></a>
                </div>

                <p>
                    This method is used by the payment handler as a signal for whether
                    it can respond to a payment request.
                </p>
            </section>
        </section>
        <section id="handling-a-canmakepaymentevent">
            <div class="header-wrapper">
                <h3 id="x5-3-handling-a-canmakepaymentevent"><bdi class="secno">5.3 </bdi>
                    <dfn id="dfn-handling-a-canmakepaymentevent" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Handling a CanMakePaymentEvent</dfn>
                </h3><a class="self-link" href="#handling-a-canmakepaymentevent"
                    aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                Upon receiving a <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>, the <a
                    href="#dfn-user-agents" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agents-2">user
                    agent</a> <em class="rfc2119">MUST</em>
                run the following steps:
            </p>
            <ol>
                <li>If <a href="#dfn-user-agents" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agents-3">user agent</a> settings prohibit usage of
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-5"><code>CanMakePaymentEvent</code></a> (e.g., in private
                    browsing mode),
                    terminate these steps.
                </li>
                <li>Let <var>registration</var> be a <a data-link-type="idl" data-lt="ServiceWorkerRegistration"
                        href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept"><code>ServiceWorkerRegistration</code></a>.
                </li>
                <li>If <var>registration</var> is not found, terminate these steps.
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#fire-functional-event-algorithm">Fire
                            Functional Event</a> "<code>canmakepayment</code>" using
                        <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-canmakepaymentevent-6"><code>CanMakePaymentEvent</code></a> on
                        <var>registration</var>.
                    </p>
                </li>
            </ol>
        </section>
        <section id="canmakepayment-example" class="informative">
            <div class="header-wrapper">
                <h3 id="x5-4-example-of-handling-the-canmakepaymentevent"><bdi class="secno">5.4 </bdi>
                    Example of handling the <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-7"><code>CanMakePaymentEvent</code></a>
                </h3><a class="self-link" href="#canmakepayment-example" aria-label="Permalink for Section 5.4"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>
                This example shows how to write a service worker that listens to the
                <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-canmakepaymentevent-8"><code>CanMakePaymentEvent</code></a>. When a <a
                    href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-canmakepaymentevent-9"><code>CanMakePaymentEvent</code></a> is
                received, the service worker always returns true.
            </p>
            <div class="example" id="example-handling-the-canmakepaymentevent">
                <div class="marker">
                    <a class="self-link" href="#example-handling-the-canmakepaymentevent">Example<bdi> 1</bdi></a><span
                        class="example-title">: Handling the CanMakePaymentEvent</span>
                </div>
                <pre aria-busy="false"><code class="hljs js">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"canmakepayment"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">respondWith</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve, reject</span>) {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>);
  }));
});</code></pre>
            </div>
        </section>
        <section id="filtering-of-payment-handlers">
            <div class="header-wrapper">
                <h3 id="x5-5-filtering-of-payment-handlers"><bdi class="secno">5.5 </bdi>
                    Filtering of Payment Handlers
                </h3><a class="self-link" href="#filtering-of-payment-handlers"
                    aria-label="Permalink for Section 5.5"></a>
            </div>

            <p>
                Given a <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a> and
                a payment handler that matches on
                <a data-link-type="dfn" href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">payment method
                    identifier</a>, this algorithm returns
                <code>true</code> if this payment handler can be used for payment:
            </p>
            <ol class="algorithm">
                <li>Let <var>methodName</var> be the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">payment method identifier</a>
                    string specified in the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>.
                </li>
                <li>Let <var>methodData</var> be the payment method specific data of
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>.
                </li>
                <li>Let <var>paymentHandlerOrigin</var> be the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> of the
                    <a data-link-type="idl" data-lt="ServiceWorkerRegistration"
                        href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept"><code>ServiceWorkerRegistration</code></a>
                    scope URL of the payment handler.
                </li>
                <li>Let <var>paymentMethodManifest</var> be the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#ingest-payment-method-manifests">ingested</a>
                    and
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest">parsed</a>
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a> for the
                    <var>methodName</var>.
                </li>
                <li>If <var>methodName</var> is a <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-url-based-payment-method-identifier">URL-based
                        payment method
                        identifier</a> with the <code>"*"</code> string <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">supported
                        origins</a> in <var>paymentMethodManifest</var>, return
                    <code>true</code>.
                </li>
                <li>Otherwise, if the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-url-based-payment-method-identifier">URL-based
                        payment method identifier</a>
                    <var>methodName</var> has the same <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> as
                    <var>paymentHandlerOrigin</var>, fire the <a href="#dom-canmakepaymentevent" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-10"><code>CanMakePaymentEvent</code></a>
                    in the payment handler and return the result.
                </li>
                <li>Otherwise, if <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">supported
                        origins</a> in
                    <var>paymentMethodManifest</var> is an ordered set of <a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#concept-url-origin">origin</a>
                    that contains the <var>paymentHandlerOrigin</var>, fire the
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-11"><code>CanMakePaymentEvent</code></a> in the payment
                    handler and return the
                    result.
                </li>
                <li>Otherwise, return <code>false</code>.
                </li>
            </ol>
        </section>
    </section>
    <section id="invocation">
        <div class="header-wrapper">
            <h2 id="x6-invocation"><bdi class="secno">6. </bdi>
                Invocation
            </h2><a class="self-link" href="#invocation" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            Once the user has selected a payment handler, the user agent fires a
            <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent" class="internalDFN"
                id="ref-for-dom-paymentrequestevent-7"><code>PaymentRequestEvent</code></a> and uses the subsequent
            <a href="#dom-paymenthandlerresponse" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-paymenthandlerresponse-1"><code>PaymentHandlerResponse</code></a> to create a <a
                data-link-type="dfn"
                href="https://www.w3.org/TR/payment-request/#dom-paymentresponse">PaymentResponse</a> for
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                    title="Payment Request API">payment-request</a></cite>].
        </p>
        <div class="issue" id="issue-container-number-117">
            <div role="heading" class="issue-title marker" id="h-issue" aria-level="3"><a
                    href="https://github.com/w3c/payment-handler/issues/117"><span class="issue-number">Issue
                        117</span></a><span class="issue-label">: Support for Abort() being delegated to Payment
                    Handler</span></div>
            <p class="">
                Payment Request API supports delegation of responsibility to manage an
                abort to a payment app. There is a proposal to add a
                paymentRequestAborted event to the Payment Handler interface. The event
                will have a respondWith method that takes a boolean parameter
                indicating if the paymentRequest has been successfully aborted.
            </p>
        </div>
        <section data-dfn-for="ServiceWorkerGlobalScope" data-link-for="ServiceWorkerGlobalScope"
            id="extension-to-serviceworkerglobalscope-0">
            <div class="header-wrapper">
                <h3 id="x6-1-extension-to-serviceworkerglobalscope"><bdi class="secno">6.1 </bdi>
                    Extension to <a data-link-type="idl"
                        href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope-interface"><code>ServiceWorkerGlobalScope</code></a>
                </h3><a class="self-link" href="#extension-to-serviceworkerglobalscope-0"
                    aria-label="Permalink for Section 6.1"></a>
            </div>

            <p>
                This specification extends the <a data-link-type="idl"
                    href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope-interface"><code>ServiceWorkerGlobalScope</code></a>
                interface.
            </p>
            <pre class="idl def" id="webidl-1119623754"><span class="idlHeader"><a class="self-link" href="#webidl-1119623754">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerglobalscope-partial-2" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-onpaymentrequest" data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpaymentrequest" id="ref-for-dom-serviceworkerglobalscope-onpaymentrequest-1"><code>onpaymentrequest</code></a>;</span>
};</span></code></pre>
            <section id="onpaymentrequest-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-1-1-onpaymentrequest-attribute"><bdi class="secno">6.1.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-onpaymentrequest"
                            data-idl="attribute" data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope"
                            data-type="EventHandler" data-lt="onpaymentrequest"
                            data-local-lt="ServiceWorkerGlobalScope.onpaymentrequest" tabindex="0"
                            aria-haspopup="dialog"><code>onpaymentrequest</code></dfn> attribute
                    </h4><a class="self-link" href="#onpaymentrequest-attribute"
                        aria-label="Permalink for Section 6.1.1"></a>
                </div>

                <p>
                    The <a href="#dom-serviceworkerglobalscope-onpaymentrequest" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-serviceworkerglobalscope-onpaymentrequest-2"><code>onpaymentrequest</code></a>
                    attribute is an <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a>
                    whose corresponding <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event
                        handler event type</a> is
                    <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN" id="ref-for-dom-paymentrequestevent-8"><code>PaymentRequestEvent</code></a>.
                </p>
            </section>
        </section>
        <section data-dfn-for="PaymentRequestDetailsUpdate" data-link-for="PaymentRequestDetailsUpdate"
            id="the-paymentrequestdetailsupdate">
            <div class="header-wrapper">
                <h3 id="x6-2-the-paymentrequestdetailsupdate"><bdi class="secno">6.2 </bdi>
                    The <dfn data-export="" data-dfn-type="dictionary" id="dom-paymentrequestdetailsupdate"
                        data-idl="dictionary" data-title="PaymentRequestDetailsUpdate" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentRequestDetailsUpdate</code></dfn>
                </h3><a class="self-link" href="#the-paymentrequestdetailsupdate"
                    aria-label="Permalink for Section 6.2"></a>
            </div>

            <p>
                The <code>PaymentRequestDetailsUpdate</code> contains the updated
                total (optionally with modifiers and shipping options) and possible
                errors resulting from user selection of a payment method, a shipping
                address, or a shipping option within a payment handler.
            </p>
            <pre class="idl def" id="webidl-2024425618"><span class="idlHeader"><a class="self-link" href="#webidl-2024425618">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-paymentrequestdetailsupdate" data-title="PaymentRequestDetailsUpdate">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequestdetailsupdate" id="ref-for-dom-paymentrequestdetailsupdate-1"><code>PaymentRequestDetailsUpdate</code></a> {<span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-error" data-title="error" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-error" id="ref-for-dom-paymentrequestdetailsupdate-error-1"><code>error</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-total" data-title="total" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-total" id="ref-for-dom-paymentrequestdetailsupdate-total-1"><code>total</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-modifiers" data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-modifiers" id="ref-for-dom-paymentrequestdetailsupdate-modifiers-1"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-shippingoptions" data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingoptions" id="ref-for-dom-paymentrequestdetailsupdate-shippingoptions-1"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-paymentmethoderrors" data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-paymentmethoderrors" id="ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-1"><code>paymentMethodErrors</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequestdetailsupdate-shippingaddresserrors" data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addresserrors">AddressErrors</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingaddresserrors" id="ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-1"><code>shippingAddressErrors</code></a>;</span>
};</span></code></pre>
            <section id="error-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-1-error-member"><bdi class="secno">6.2.1 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequestdetailsupdate-error"
                            data-idl="field" data-title="error" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>error</code></dfn> member
                    </h4><a class="self-link" href="#error-member" aria-label="Permalink for Section 6.2.1"></a>
                </div>

                <p>
                    A human readable string that explains why the user selected payment
                    method, shipping address or shipping option cannot be used.
                </p>
            </section>
            <section id="total-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-2-total-member"><bdi class="secno">6.2.2 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequestdetailsupdate-total"
                            data-idl="field" data-title="total" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="PaymentCurrencyAmount" tabindex="0"
                            aria-haspopup="dialog"><code>total</code></dfn> member
                    </h4><a class="self-link" href="#total-member" aria-label="Permalink for Section 6.2.2"></a>
                </div>

                <p>
                    Updated total based on the changed payment method, shipping
                    address, or shipping option. The total can change, for example,
                    because the billing address of the payment method selected by the
                    user changes the Value Added Tax (VAT); Or because the shipping
                    option/address selected/provided by the user changes the shipping
                    cost.
                </p>
            </section>
            <section id="modifiers-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-3-modifiers-member"><bdi class="secno">6.2.3 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequestdetailsupdate-modifiers"
                            data-idl="field" data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>modifiers</code></dfn> member
                    </h4><a class="self-link" href="#modifiers-member" aria-label="Permalink for Section 6.2.3"></a>
                </div>

                <p>
                    Updated modifiers based on the changed payment method, shipping
                    address, or shipping option. For example, if the overall total has
                    increased by â‚¬1.00 based on the billing or shipping address, then
                    the totals specified in each of the modifiers should also increase
                    by â‚¬1.00.
                </p>
            </section>
            <section id="shippingoptions-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-4-shippingoptions-member"><bdi class="secno">6.2.4 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member"
                            id="dom-paymentrequestdetailsupdate-shippingoptions" data-idl="field"
                            data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate" data-type="sequence"
                            tabindex="0" aria-haspopup="dialog"><code>shippingOptions</code></dfn> member
                    </h4><a class="self-link" href="#shippingoptions-member"
                        aria-label="Permalink for Section 6.2.4"></a>
                </div>

                <p>
                    Updated shippingOptions based on the changed shipping address. For
                    example, it is possible that express shipping is more expensive or
                    unavailable for the user provided country.
                </p>
            </section>
            <section id="paymentmethoderrors-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-5-paymentmethoderrors-member"><bdi class="secno">6.2.5 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member"
                            id="dom-paymentrequestdetailsupdate-paymentmethoderrors" data-idl="field"
                            data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="object" tabindex="0"
                            aria-haspopup="dialog"><code>paymentMethodErrors</code></dfn> member
                    </h4><a class="self-link" href="#paymentmethoderrors-member"
                        aria-label="Permalink for Section 6.2.5"></a>
                </div>

                <p>
                    Validation errors for the payment method, if any.
                </p>
            </section>
            <section id="shippingaddresserrors-member">
                <div class="header-wrapper">
                    <h4 id="x6-2-6-shippingaddresserrors-member"><bdi class="secno">6.2.6 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member"
                            id="dom-paymentrequestdetailsupdate-shippingaddresserrors" data-idl="field"
                            data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"
                            data-type="AddressErrors" tabindex="0"
                            aria-haspopup="dialog"><code>shippingAddressErrors</code></dfn> member
                    </h4><a class="self-link" href="#shippingaddresserrors-member"
                        aria-label="Permalink for Section 6.2.6"></a>
                </div>

                <p>
                    Validation errors for the shipping address, if any.
                </p>
            </section>
        </section>
        <section data-dfn-for="PaymentRequestEvent" data-link-for="PaymentRequestEvent" id="the-paymentrequestevent">
            <div class="header-wrapper">
                <h3 id="x6-3-the-paymentrequestevent"><bdi class="secno">6.3 </bdi>
                    The <dfn data-export="" data-dfn-type="interface" id="dom-paymentrequestevent" data-idl="interface"
                        data-title="PaymentRequestEvent" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentRequestEvent</code></dfn>
                </h3><a class="self-link" href="#the-paymentrequestevent" aria-label="Permalink for Section 6.3"></a>
            </div>

            <p>
                The PaymentRequestEvent represents the data and methods available to
                a Payment Handler after selection by the user. The user agent
                communicates a subset of data available from the
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> to the Payment
                Handler.
            </p>
            <pre class="idl def" id="webidl-941889379"><span class="idlHeader"><a class="self-link" href="#webidl-941889379">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-paymentrequestevent" data-title="PaymentRequestEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentrequestevent" id="ref-for-dom-paymentrequestevent-9"><code>PaymentRequestEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-paymentrequestevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="PaymentRequestEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-paymentrequestevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PaymentRequestEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PaymentRequestEvent.constructor|PaymentRequestEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-paymentrequesteventinit" class="internalDFN" id="ref-for-dom-paymentrequesteventinit-1"><code>PaymentRequestEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-toporigin" data-title="topOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-toporigin" id="ref-for-dom-paymentrequestevent-toporigin-1"><code>topOrigin</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-paymentrequestorigin" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestorigin" id="ref-for-dom-paymentrequestevent-paymentrequestorigin-1"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-paymentrequestid" data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestid" id="ref-for-dom-paymentrequestevent-paymentrequestid-1"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-methoddata" data-title="methodData" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-methoddata" id="ref-for-dom-paymentrequestevent-methoddata-1"><code>methodData</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-total" data-title="total" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-total" id="ref-for-dom-paymentrequestevent-total-1"><code>total</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-modifiers" data-title="modifiers" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-modifiers" id="ref-for-dom-paymentrequestevent-modifiers-1"><code>modifiers</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-paymentoptions" data-title="paymentOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentoptions" id="ref-for-dom-paymentrequestevent-paymentoptions-1"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-paymentrequestevent-shippingoptions" data-title="shippingOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-shippingoptions" id="ref-for-dom-paymentrequestevent-shippingoptions-1"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-openwindow-url" data-title="openWindow" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dfn-windowclient-0" class="internalDFN" id="ref-for-dfn-windowclient-0-1">WindowClient</a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-openwindow" id="ref-for-dom-paymentrequestevent-openwindow-1"><code>openWindow</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-changepaymentmethod-methodname-methoddetails" data-title="changePaymentMethod" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-2"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changepaymentmethod" id="ref-for-dom-paymentrequestevent-changepaymentmethod-1"><code>changePaymentMethod</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">methodName</span>, optional<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <span class="idlParamName">methodDetails</span> = null);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-changeshippingaddress-shippingaddress" data-title="changeShippingAddress" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-3"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingaddress" id="ref-for-dom-paymentrequestevent-changeshippingaddress-1"><code>changeShippingAddress</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <span class="idlParamName">shippingAddress</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-changeshippingoption-shippingoption" data-title="changeShippingOption" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-4"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingoption" id="ref-for-dom-paymentrequestevent-changeshippingoption-1"><code>changeShippingOption</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">shippingOption</span>);</span><span data-idl="" class="idlMethod" id="idl-def-paymentrequestevent-respondwith-handlerresponsepromise" data-title="respondWith" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-respondwith" id="ref-for-dom-paymentrequestevent-respondwith-1"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymenthandlerresponse" class="internalDFN" id="ref-for-dom-paymenthandlerresponse-2"><code>PaymentHandlerResponse</code></a>&gt;</span> <span class="idlParamName">handlerResponsePromise</span>);</span>
};</span></code></pre>
            <section id="toporigin-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-1-toporigin-attribute"><bdi class="secno">6.3.1 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-toporigin"
                            data-idl="attribute" data-title="topOrigin" data-dfn-for="PaymentRequestEvent"
                            data-type="USVString" data-lt="topOrigin" data-local-lt="PaymentRequestEvent.topOrigin"
                            tabindex="0" aria-haspopup="dialog"><code>topOrigin</code></dfn> attribute
                    </h4><a class="self-link" href="#toporigin-attribute" aria-label="Permalink for Section 6.3.1"></a>
                </div>

                <p>
                    Returns a string that indicates the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> of the top
                    level
                    <a href="#dfn-payee" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-payee-2">payee</a> web
                    page. This attribute is initialized by <a href="#dfn-handling-a-paymentrequestevent"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-handling-a-paymentrequestevent-1">Handling
                        a PaymentRequestEvent</a>.
                </p>
            </section>
            <section id="paymentrequestorigin-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-2-paymentrequestorigin-attribute"><bdi class="secno">6.3.2 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-paymentrequestorigin"
                            data-idl="attribute" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent"
                            data-type="USVString" data-lt="paymentRequestOrigin"
                            data-local-lt="PaymentRequestEvent.paymentRequestOrigin" tabindex="0"
                            aria-haspopup="dialog"><code>paymentRequestOrigin</code></dfn> attribute
                    </h4><a class="self-link" href="#paymentrequestorigin-attribute"
                        aria-label="Permalink for Section 6.3.2"></a>
                </div>

                <p>
                    Returns a string that indicates the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> where a
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> was
                    initialized. When a <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>
                    is initialized in the <a href="#dom-paymentrequestevent-toporigin" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-toporigin-2"><code>topOrigin</code></a>, the attributes have
                    the
                    same value, otherwise the attributes have different values. For
                    example, when a <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> is
                    initialized within an
                    iframe from an origin other than <a href="#dom-paymentrequestevent-toporigin" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-toporigin-3"><code>topOrigin</code></a>, the value of
                    this attribute is the origin of the iframe. This attribute is
                    initialized by <a href="#dfn-handling-a-paymentrequestevent" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-handling-a-paymentrequestevent-2">Handling a
                        PaymentRequestEvent</a>.
                </p>
            </section>
            <section data-cite="payment-request" id="paymentrequestid-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-3-paymentrequestid-attribute"><bdi class="secno">6.3.3 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-paymentrequestid"
                            data-idl="attribute" data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent"
                            data-type="DOMString" data-lt="paymentRequestId"
                            data-local-lt="PaymentRequestEvent.paymentRequestId" tabindex="0"
                            aria-haspopup="dialog"><code>paymentRequestId</code></dfn> attribute
                    </h4><a class="self-link" href="#paymentrequestid-attribute"
                        aria-label="Permalink for Section 6.3.3"></a>
                </div>

                <p>
                    When getting, the <a href="#dom-paymentrequestevent-paymentrequestid" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-paymentrequestid-2"><code>paymentRequestId</code></a>
                    attribute returns the
                    <a data-link-type="attribute" data-lt="[[details]]"
                        href="https://www.w3.org/TR/payment-request/#dfn-details"><code>[[details]]</code></a>.<a
                        data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#id-attribute">id</a> from the
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> that
                    corresponds to this <a data-link-type="idl" data-lt="PaymentRequestEvent"
                        href="#dom-paymentrequestevent" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-10"><code>PaymentRequestEvent</code></a>.
                </p>
            </section>
            <section id="methoddata-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-4-methoddata-attribute"><bdi class="secno">6.3.4 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-methoddata"
                            data-idl="attribute" data-title="methodData" data-dfn-for="PaymentRequestEvent"
                            data-type="FrozenArray" data-lt="methodData" data-local-lt="PaymentRequestEvent.methodData"
                            tabindex="0" aria-haspopup="dialog"><code>methodData</code></dfn> attribute
                    </h4><a class="self-link" href="#methoddata-attribute" aria-label="Permalink for Section 6.3.4"></a>
                </div>

                <p>
                    This attribute contains <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                    dictionaries
                    containing the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">payment method identifiers</a> for the
                    <a data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-payment-method">payment
                        methods</a> that the web site accepts and any associated <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-payment-method">payment
                        method</a> specific data. It is populated from the
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> using the <a
                        href="#dfn-methoddata-population-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-methoddata-population-algorithm-1">MethodData Population
                        Algorithm</a> defined below.
                </p>
            </section>
            <section id="total-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-5-total-attribute"><bdi class="secno">6.3.5 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-total"
                            data-idl="attribute" data-title="total" data-dfn-for="PaymentRequestEvent"
                            data-type="object" data-lt="total" data-local-lt="PaymentRequestEvent.total" tabindex="0"
                            aria-haspopup="dialog"><code>total</code></dfn> attribute
                    </h4><a class="self-link" href="#total-attribute" aria-label="Permalink for Section 6.3.5"></a>
                </div>

                <p>
                    This attribute indicates the total amount being requested for
                    payment. It is of type <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a>
                    dictionary as
                    defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                            title="Payment Request API">payment-request</a></cite>], and initialized with a copy of the
                    <a href="#dom-paymentrequestevent-total" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-total-2"><code>total</code></a> field of the <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                    provided when
                    the corresponding <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> object was
                    instantiated.
                </p>
            </section>
            <section id="modifiers-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-6-modifiers-attribute"><bdi class="secno">6.3.6 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-modifiers"
                            data-idl="attribute" data-title="modifiers" data-dfn-for="PaymentRequestEvent"
                            data-type="FrozenArray" data-lt="modifiers" data-local-lt="PaymentRequestEvent.modifiers"
                            tabindex="0" aria-haspopup="dialog"><code>modifiers</code></dfn> attribute
                    </h4><a class="self-link" href="#modifiers-attribute" aria-label="Permalink for Section 6.3.6"></a>
                </div>

                <p>
                    This sequence of <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>
                    dictionaries
                    contains modifiers for particular payment method identifiers (e.g.,
                    if the payment amount or currency type varies based on a
                    per-payment-method basis). It is populated from the
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> using the <a
                        href="#dfn-modifiers-population-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-modifiers-population-algorithm-1">Modifiers Population
                        Algorithm</a> defined below.
                </p>
            </section>
            <section id="paymentoptions-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-7-paymentoptions-attribute"><bdi class="secno">6.3.7 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-paymentoptions"
                            data-idl="attribute" data-title="paymentOptions" data-dfn-for="PaymentRequestEvent"
                            data-type="object" data-lt="paymentOptions"
                            data-local-lt="PaymentRequestEvent.paymentOptions" tabindex="0"
                            aria-haspopup="dialog"><code>paymentOptions</code></dfn> attribute
                    </h4><a class="self-link" href="#paymentoptions-attribute"
                        aria-label="Permalink for Section 6.3.7"></a>
                </div>

                <p>
                    The value of <a href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">PaymentOptions</a>
                    in the
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>. Available
                    only when shippingAddress and/or
                    any subset of payer's contact information are requested.
                </p>
            </section>
            <section id="shippingoptions-attribute">
                <div class="header-wrapper">
                    <h4 id="x6-3-8-shippingoptions-attribute"><bdi class="secno">6.3.8 </bdi>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-paymentrequestevent-shippingoptions"
                            data-idl="attribute" data-title="shippingOptions" data-dfn-for="PaymentRequestEvent"
                            data-type="FrozenArray" data-lt="shippingOptions"
                            data-local-lt="PaymentRequestEvent.shippingOptions" tabindex="0"
                            aria-haspopup="dialog"><code>shippingOptions</code></dfn> attribute
                    </h4><a class="self-link" href="#shippingoptions-attribute"
                        aria-label="Permalink for Section 6.3.8"></a>
                </div>

                <p>
                    The value of <a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentdetailsbase-shippingoptions">ShippingOptions</a>
                    in the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                    dictionary of the corresponding
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>.(<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                    inherits
                    ShippingOptions from <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsbase-dictionary">PaymentDetailsBase</a>).
                    Available only
                    when shipping address is requested.
                </p>
            </section>
            <section id="openwindow-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-9-openwindow-method"><bdi class="secno">6.3.9 </bdi>
                        <dfn data-export="" data-dfn-type="method" id="dom-paymentrequestevent-openwindow"
                            data-idl="operation" data-title="openWindow()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise" data-lt="openWindow()|openWindow(url)"
                            data-local-lt="PaymentRequestEvent.openWindow|PaymentRequestEvent.openWindow()|openWindow"
                            tabindex="0" aria-haspopup="dialog"><code>openWindow()</code></dfn> method
                    </h4><a class="self-link" href="#openwindow-method" aria-label="Permalink for Section 6.3.9"></a>
                </div>

                <p>
                    This method is used by the payment handler to show a window to the
                    user. When called, it runs the <a href="#dfn-open-window-algorithm" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-open-window-algorithm-1">open window algorithm</a>.
                </p>
            </section>
            <section id="changepaymentmethod-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-10-changepaymentmethod-method"><bdi class="secno">6.3.10 </bdi>
                        <dfn data-lt="changePaymentMethod(methodName, methodDetails)|changePaymentMethod()|changePaymentMethod(methodName)"
                            data-export="" data-dfn-type="method" id="dom-paymentrequestevent-changepaymentmethod"
                            data-idl="operation" data-title="changePaymentMethod()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise"
                            data-local-lt="PaymentRequestEvent.changePaymentMethod|PaymentRequestEvent.changePaymentMethod()|changePaymentMethod"
                            tabindex="0" aria-haspopup="dialog"><code>changePaymentMethod()</code></dfn>
                        method
                    </h4><a class="self-link" href="#changepaymentmethod-method"
                        aria-label="Permalink for Section 6.3.10"></a>
                </div>

                <p>
                    This method is used by the payment handler to get updated total
                    given such payment method details as the billing address. When
                    called, it runs the <a href="#dfn-change-payment-method-algorithm" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-change-payment-method-algorithm-1">change payment method
                        algorithm</a>.
                </p>
            </section>
            <section id="changeshippingaddress-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-11-changeshippingaddress-method"><bdi class="secno">6.3.11 </bdi>
                        <dfn data-lt="changeShippingAddress(shippingAddress)|changeShippingAddress()" data-export=""
                            data-dfn-type="method" id="dom-paymentrequestevent-changeshippingaddress"
                            data-idl="operation" data-title="changeShippingAddress()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise"
                            data-local-lt="PaymentRequestEvent.changeShippingAddress|PaymentRequestEvent.changeShippingAddress()|changeShippingAddress"
                            tabindex="0" aria-haspopup="dialog"><code>changeShippingAddress()</code></dfn>
                        method
                    </h4><a class="self-link" href="#changeshippingaddress-method"
                        aria-label="Permalink for Section 6.3.11"></a>
                </div>

                <p>
                    This method is used by the payment handler to get updated payment
                    details given the shippingAddress. When called, it runs the
                    <a href="#dfn-change-payment-details-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-change-payment-details-algorithm-1">change payment details algorithm</a>.
                </p>
            </section>
            <section id="changeshippingoption-method">
                <div class="header-wrapper">
                    <h4 id="x6-3-12-changeshippingoption-method"><bdi class="secno">6.3.12 </bdi>
                        <dfn data-lt="changeShippingOption(shippingOption)|changeShippingOption()" data-export=""
                            data-dfn-type="method" id="dom-paymentrequestevent-changeshippingoption"
                            data-idl="operation" data-title="changeShippingOption()" data-dfn-for="PaymentRequestEvent"
                            data-type="Promise"
                            data-local-lt="PaymentRequestEvent.changeShippingOption|PaymentRequestEvent.changeShippingOption()|changeShippingOption"
                            tabindex="0" aria-haspopup="dialog"><code>changeShippingOption()</code></dfn>
                        method
                    </h4><a class="self-link" href="#changeshippingoption-method"
                        aria-label="Permalink for Section 6.3.12"></a>
                </div>

                <p>
                    This method is used by the payment handler to get updated payment
                    details given the shippingOption identifier. When called, it runs
                    the <a href="#dfn-change-payment-details-algorithm" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-change-payment-details-algorithm-2">change payment details algorithm</a>.
                </p>
            </section>
            <section id="respondwith-method-0">
                <div class="header-wrapper">
                    <h4 id="x6-3-13-respondwith-method"><bdi class="secno">6.3.13 </bdi>
                        <dfn data-lt="respondWith(handlerResponsePromise)|respondWith()" data-export=""
                            data-dfn-type="method" id="dom-paymentrequestevent-respondwith" data-idl="operation"
                            data-title="respondWith()" data-dfn-for="PaymentRequestEvent" data-type="undefined"
                            data-local-lt="PaymentRequestEvent.respondWith|PaymentRequestEvent.respondWith()|respondWith"
                            tabindex="0" aria-haspopup="dialog"><code>respondWith()</code></dfn> method
                    </h4><a class="self-link" href="#respondwith-method-0"
                        aria-label="Permalink for Section 6.3.13"></a>
                </div>

                <p>
                    This method is used by the payment handler to provide a
                    <a href="#dom-paymenthandlerresponse" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-paymenthandlerresponse-3"><code>PaymentHandlerResponse</code></a> when the
                    payment successfully
                    completes. When called, it runs the <a href="#dfn-respond-to-paymentrequest-algorithm"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-respond-to-paymentrequest-algorithm-1">Respond to PaymentRequest
                        Algorithm</a> with <var>event</var> and <var>handlerResponsePromise</var> as
                    arguments.
                </p>
            </section>
            <div class="issue" id="issue-container-number-123">
                <div role="heading" class="issue-title marker" id="h-issue-0" aria-level="4"><a
                        href="https://github.com/w3c/payment-handler/issues/123"><span class="issue-number">Issue
                            123</span></a><span class="issue-label">: Share user data with payment app?</span></div>
                <p class="">
                    Should payment apps receive user data stored in the user agent upon
                    explicit consent from the user? The payment app could request
                    permission either at installation or when the payment app is first
                    invoked.
                </p>
            </div>
            <section data-dfn-for="PaymentRequestEventInit" id="paymentrequesteventinit-dictionary">
                <div class="header-wrapper">
                    <h4 id="x6-3-14-paymentrequesteventinit-dictionary"><bdi class="secno">6.3.14 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-paymentrequesteventinit"
                            data-idl="dictionary" data-title="PaymentRequestEventInit" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>PaymentRequestEventInit</code></dfn> dictionary
                    </h4><a class="self-link" href="#paymentrequesteventinit-dictionary"
                        aria-label="Permalink for Section 6.3.14"></a>
                </div>

                <pre class="idl def" id="webidl-488183213"><span class="idlHeader"><a class="self-link" href="#webidl-488183213">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-paymentrequesteventinit" data-title="PaymentRequestEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequesteventinit" id="ref-for-dom-paymentrequesteventinit-2"><code>PaymentRequestEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-toporigin" data-title="topOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-toporigin" id="ref-for-dom-paymentrequesteventinit-toporigin-1"><code>topOrigin</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-paymentrequestorigin" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestorigin" id="ref-for-dom-paymentrequesteventinit-paymentrequestorigin-1"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-paymentrequestid" data-title="paymentRequestId" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestid" id="ref-for-dom-paymentrequesteventinit-paymentrequestid-1"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-methoddata" data-title="methodData" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-methoddata" id="ref-for-dom-paymentrequesteventinit-methoddata-1"><code>methodData</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-total" data-title="total" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-total" id="ref-for-dom-paymentrequesteventinit-total-1"><code>total</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-modifiers" data-title="modifiers" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-modifiers" id="ref-for-dom-paymentrequesteventinit-modifiers-1"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-paymentoptions" data-title="paymentOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-paymentrequestevent-paymentoptions" class="internalDFN" id="ref-for-dom-paymentrequestevent-paymentoptions-2">PaymentOptions</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentoptions" id="ref-for-dom-paymentrequesteventinit-paymentoptions-1"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymentrequesteventinit-shippingoptions" data-title="shippingOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-shippingoptions" id="ref-for-dom-paymentrequesteventinit-shippingoptions-1"><code>shippingOptions</code></a>;</span>
};</span></code></pre>
                <p>
                    The <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-toporigin"
                        data-idl="field" data-title="topOrigin" data-dfn-for="PaymentRequestEventInit"
                        data-type="USVString" tabindex="0" aria-haspopup="dialog"><code>topOrigin</code></dfn>, <dfn
                        data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-paymentrequestorigin"
                        data-idl="field" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEventInit"
                        data-type="USVString" tabindex="0"
                        aria-haspopup="dialog"><code>paymentRequestOrigin</code></dfn>,
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-paymentrequestid"
                        data-idl="field" data-title="paymentRequestId" data-dfn-for="PaymentRequestEventInit"
                        data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>paymentRequestId</code></dfn>,
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-methoddata"
                        data-idl="field" data-title="methodData" data-dfn-for="PaymentRequestEventInit"
                        data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>methodData</code></dfn>,
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-total"
                        data-idl="field" data-title="total" data-dfn-for="PaymentRequestEventInit"
                        data-type="PaymentCurrencyAmount" tabindex="0" aria-haspopup="dialog"><code>total</code></dfn>,
                    <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-modifiers"
                        data-idl="field" data-title="modifiers" data-dfn-for="PaymentRequestEventInit"
                        data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>modifiers</code></dfn>, <dfn
                        data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-paymentoptions"
                        data-idl="field" data-title="paymentOptions" data-dfn-for="PaymentRequestEventInit"
                        data-type="PaymentOptions" tabindex="0"
                        aria-haspopup="dialog"><code>paymentOptions</code></dfn>,
                    and <dfn data-export="" data-dfn-type="dict-member" id="dom-paymentrequesteventinit-shippingoptions"
                        data-idl="field" data-title="shippingOptions" data-dfn-for="PaymentRequestEventInit"
                        data-type="sequence" tabindex="0" aria-haspopup="dialog"><code>shippingOptions</code></dfn>
                    members share their definitions with
                    those defined for <a data-link-type="idl" data-lt="PaymentRequestEvent"
                        href="#dom-paymentrequestevent" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-11"><code>PaymentRequestEvent</code></a>
                </p>
            </section>
            <section id="methoddata-population-algorithm">
                <div class="header-wrapper">
                    <h4 id="x6-3-15-methoddata-population-algorithm"><bdi class="secno">6.3.15 </bdi>
                        <dfn id="dfn-methoddata-population-algorithm" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">MethodData Population Algorithm</dfn>
                    </h4><a class="self-link" href="#methoddata-population-algorithm"
                        aria-label="Permalink for Section 6.3.15"></a>
                </div>

                <p>
                    To initialize the value of the <a href="#dom-paymentrequestevent-methoddata" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-methoddata-2"><code>methodData</code></a>, the user agent
                    <em class="rfc2119">MUST</em> perform the following steps or their equivalent:
                </p>
                <ol>
                    <li>Let <var>registeredMethods</var> be the set of registered
                        <a data-link-type="dfn" href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">payment method
                            identifier</a>s of the invoked payment handler.
                    </li>
                    <li>Create a new empty <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a>.
                    </li>
                    <li>Set <var>dataList</var> to the newly created <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a>.
                    </li>
                    <li>For each item in
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>@<var>[[methodData]]</var>
                        in the
                        corresponding payment request, perform the following steps:
                        <ol>
                            <li>Set <var>inData</var> to the item under consideration.
                            </li>
                            <li>Set <var>commonMethods</var> to the set intersection of
                                <var>inData</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                and
                                <var>registeredMethods</var>.
                            </li>
                            <li>If <var>commonMethods</var> is empty, skip the remaining
                                substeps and move on to the next item (if any).
                            </li>
                            <li>Create a new <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>
                                object.
                            </li>
                            <li>Set <var>outData</var> to the newly created
                                <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>.
                            </li>
                            <li>Set <var>outData</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                to a list
                                containing the members of <var>commonMethods</var>.
                            </li>
                            <li>Set <var>outData</var>.data to a copy of
                                <var>inData</var>.data.
                            </li>
                            <li>Append <var>outData</var> to <var>dataList</var>.
                            </li>
                        </ol>
                    </li>
                    <li>Set <a href="#dom-paymentrequestevent-methoddata" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-paymentrequestevent-methoddata-3"><code>methodData</code></a> to
                        <var>dataList</var>.
                    </li>
                </ol>
            </section>
            <section id="modifiers-population-algorithm">
                <div class="header-wrapper">
                    <h4 id="x6-3-16-modifiers-population-algorithm"><bdi class="secno">6.3.16 </bdi>
                        <dfn id="dfn-modifiers-population-algorithm" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Modifiers Population Algorithm</dfn>
                    </h4><a class="self-link" href="#modifiers-population-algorithm"
                        aria-label="Permalink for Section 6.3.16"></a>
                </div>

                <p>
                    To initialize the value of the <a href="#dom-paymentrequestevent-modifiers" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestevent-modifiers-2"><code>modifiers</code></a>, the user agent
                    <em class="rfc2119">MUST</em> perform the following steps or their equivalent:
                </p>
                <ol>
                    <li>Let <var>registeredMethods</var> be the set of registered
                        <a data-link-type="dfn" href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">payment method
                            identifier</a>s of the invoked payment handler.
                    </li>
                    <li>Create a new empty <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a>.
                    </li>
                    <li>Set <var>modifierList</var> to the newly created
                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">Sequence</a>.
                    </li>
                    <li>For each item in
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>@<var>[[paymentDetails]]</var>.<a
                            href="#dom-paymentrequestevent-modifiers" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-paymentrequestevent-modifiers-3"><code>modifiers</code></a>
                        in the corresponding payment request, perform the following steps:
                        <ol>
                            <li>Set <var>inModifier</var> to the item under consideration.
                            </li>
                            <li>Set <var>commonMethods</var> to the set intersection of
                                <var>inModifier</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                and
                                <var>registeredMethods</var>.
                            </li>
                            <li>If <var>commonMethods</var> is empty, skip the remaining
                                substeps and move on to the next item (if any).
                            </li>
                            <li>Create a new <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>
                                object.
                            </li>
                            <li>Set <var>outModifier</var> to the newly created
                                <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>.
                            </li>
                            <li>Set <var>outModifier</var>.<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a>
                                to a
                                list containing the members of <var>commonMethods</var>.
                            </li>
                            <li>Set <var>outModifier</var>.<a href="#dom-paymentrequestevent-total" class="internalDFN"
                                    data-link-type="idl"
                                    id="ref-for-dom-paymentrequestevent-total-3"><code>total</code></a> to a copy of
                                <var>
                                    inModifier</var>.<a href="#dom-paymentrequestevent-total" class="internalDFN"
                                    data-link-type="idl"
                                    id="ref-for-dom-paymentrequestevent-total-4"><code>total</code></a>.
                            </li>
                            <li>Append <var>outModifier</var> to <var>modifierList</var>.
                            </li>
                        </ol>
                    </li>
                    <li>Set <a href="#dom-paymentrequestevent-modifiers" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-paymentrequestevent-modifiers-4"><code>modifiers</code></a> to
                        <var>modifierList</var>.
                    </li>
                </ol>
            </section>
        </section>
        <section id="internal-slots">
            <div class="header-wrapper">
                <h3 id="x6-4-internal-slots"><bdi class="secno">6.4 </bdi>
                    Internal Slots
                </h3><a class="self-link" href="#internal-slots" aria-label="Permalink for Section 6.4"></a>
            </div>

            <p>
                Instances of <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-12"><code>PaymentRequestEvent</code></a> are
                created with the internal
                slots in the following table:
            </p>
            <table>
                <tbody>
                    <tr>
                        <th>
                            Internal Slot
                        </th>
                        <th>
                            Default Value
                        </th>
                        <th>
                            Description (<em>non-normative</em>)
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-dfn-for="PaymentRequestEvent" data-idl="" data-noexport=""
                                data-dfn-type="attribute" id="dfn-windowclient" tabindex="0"
                                aria-haspopup="dialog">[[windowClient]]</dfn>
                        </td>
                        <td>
                            null
                        </td>
                        <td>
                            The currently active <dfn id="dfn-windowclient-0" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">WindowClient</dfn>. This is set if a
                            payment handler is currently showing a window to the user.
                            Otherwise, it is null.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-dfn-for="PaymentRequestEvent" data-idl="" data-noexport=""
                                data-dfn-type="attribute" id="dfn-respondwithcalled" tabindex="0"
                                aria-haspopup="dialog">[[respondWithCalled]]</dfn>
                        </td>
                        <td>
                            false
                        </td>
                        <td>
                            YAHO
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="handling-a-paymentrequestevent">
            <div class="header-wrapper">
                <h3 id="x6-5-handling-a-paymentrequestevent"><bdi class="secno">6.5 </bdi>
                    <dfn id="dfn-handling-a-paymentrequestevent" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Handling a PaymentRequestEvent</dfn>
                </h3><a class="self-link" href="#handling-a-paymentrequestevent"
                    aria-label="Permalink for Section 6.5"></a>
            </div>

            <p>
                Upon receiving a <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> by way of <a
                    href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a> and
                subsequent user selection of a payment handler, the <a href="#dfn-user-agents" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agents-4">user agent</a>
                <em class="rfc2119">MUST</em> run the following steps:
            </p>
            <ol>
                <li>Let <var>registration</var> be the <a data-link-type="idl" data-lt="ServiceWorkerRegistration"
                        href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept"><code>ServiceWorkerRegistration</code></a>
                    corresponding to the payment handler selected by the user.
                </li>
                <li>If <var>registration</var> is not found, reject the <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>
                    that was created by <a
                        href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a> with an
                    "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> and
                    terminate these steps.
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#fire-functional-event-algorithm">Fire
                            Functional Event</a> "<code>paymentrequest</code>" using
                        <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                            class="internalDFN"
                            id="ref-for-dom-paymentrequestevent-13"><code>PaymentRequestEvent</code></a> on
                        <var>registration</var> with the
                        following properties:
                    </p>
                    <dl>
                        <dt>
                            <a data-link-type="idl" href="#dom-paymentrequestevent-toporigin" class="internalDFN"
                                id="ref-for-dom-paymentrequestevent-toporigin-4"><code>topOrigin</code></a>
                        </dt>
                        <dd>
                            the <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin">serialization
                                of an origin</a> of the top level payee web
                            page.
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.paymentRequestOrigin"
                                href="#dom-paymentrequestevent-paymentrequestorigin" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-paymentrequestorigin-2"><code>paymentRequestOrigin</code></a>
                        </dt>
                        <dd>
                            the <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin">serialization
                                of an origin</a> of the context where
                            PaymentRequest was initialized.
                        </dd>
                        <dt>
                            <a data-link-type="idl" href="#dom-paymentrequestevent-methoddata" class="internalDFN"
                                id="ref-for-dom-paymentrequestevent-methoddata-4"><code>methodData</code></a>
                        </dt>
                        <dd>
                            The result of executing the <a href="#dfn-methoddata-population-algorithm"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-methoddata-population-algorithm-2">MethodData Population
                                Algorithm</a>.
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.modifiers" href="#dom-paymentrequestevent-modifiers"
                                class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-modifiers-5"><code>modifiers</code></a>
                        </dt>
                        <dd>
                            The result of executing the <a href="#dfn-modifiers-population-algorithm"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-modifiers-population-algorithm-2">Modifiers Population
                                Algorithm</a>.
                        </dd>
                        <dt>
                            <a data-link-type="idl" href="#dom-paymentrequestevent-total" class="internalDFN"
                                id="ref-for-dom-paymentrequestevent-total-5"><code>total</code></a>
                        </dt>
                        <dd>
                            A copy of the total field on the <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                            from
                            the corresponding <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>.
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.paymentRequestId"
                                href="#dom-paymentrequestevent-paymentrequestid" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-paymentrequestid-3"><code>paymentRequestId</code></a>
                        </dt>
                        <dd>
                            \[\[details\]\].<a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#id-attribute">id</a> from the <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>.
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.paymentOptions"
                                href="#dom-paymentrequestevent-paymentoptions" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-paymentoptions-3"><code>paymentOptions</code></a>
                        </dt>
                        <dd>
                            A copy of the paymentOptions dictionary passed to the
                            constructor of the corresponding <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>.
                        </dd>
                        <dt>
                            <a data-lt="PaymentRequestEvent.shippingOptions"
                                href="#dom-paymentrequestevent-shippingoptions" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymentrequestevent-shippingoptions-2"><code>shippingOptions</code></a>
                        </dt>
                        <dd>
                            A copy of the shippingOptions field on the
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">PaymentDetailsInit</a>
                            from the corresponding
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>.
                        </dd>
                    </dl>
                    <p>
                        Then run the following steps in parallel, with
                        <var>dispatchedEvent</var>:
                    </p>
                    <ol>
                        <li>Wait for all of the promises in the <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">extend
                                lifetime
                                promises</a> of <var>dispatchedEvent</var> to resolve.
                        </li>
                        <li>If the <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-payment-handler-8">payment handler</a> has not provided a
                            <a href="#dom-paymenthandlerresponse" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-paymenthandlerresponse-4"><code>PaymentHandlerResponse</code></a>,
                            reject the <a data-link-type="interface" data-lt="Promise"
                                href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> that was
                            created by <a
                                href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a> with
                            an
                            "<a data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#operationerror"><code>OperationError</code></a>"
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
    </section>
    <section id="windows">
        <div class="header-wrapper">
            <h2 id="x7-windows"><bdi class="secno">7. </bdi>
                <dfn data-lt="payment handler window|Windows" id="dfn-payment-handler-window" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Windows</dfn>
            </h2><a class="self-link" href="#windows" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            An invoked payment handler may or may not need to display information
            about itself or request user input. Some examples of potential payment
            handler display include:
        </p>
        <ul>
            <li>The payment handler opens a window for the user to provide an
                authorization code.
            </li>
            <li>The payment handler opens a window that makes it easy for the user
                to confirm payment using default information for that site provided
                through previous user configuration.
            </li>
            <li>When first selected to pay in a given session, the payment handler
                opens a window. For subsequent payments in the same session, the
                payment handler (through configuration) performs its duties without
                opening a window or requiring user interaction.
            </li>
        </ul>
        <p>
            A <a href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-payment-handler-9">payment handler</a> that requires visual display and user
            interaction, may call openWindow() to display a page to the user.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-1">
            <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>Note</span></div>
            <p class="">
                Since user agents know that this method is connected to the
                <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-14"><code>PaymentRequestEvent</code></a>,
                they <em class="rfc2119">SHOULD</em> render the window in a way that is
                consistent with the flow and not confusing to the user. The resulting
                window client is bound to the tab/window that initiated the
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a>. A single <a
                    href="#dfn-payment-handler" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-10">payment handler</a> <em class="rfc2119">SHOULD NOT</em> be
                allowed to open more than one client window using this method.
            </p>
        </div>
        <section id="open-window-algorithm">
            <div class="header-wrapper">
                <h3 id="x7-1-open-window-algorithm"><bdi class="secno">7.1 </bdi>
                    <dfn id="dfn-open-window-algorithm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Open
                        Window Algorithm</dfn>
                </h3><a class="self-link" href="#open-window-algorithm" aria-label="Permalink for Section 7.1"></a>
            </div>

            <div class="issue closed" id="issue-container-number-115">
                <div role="heading" class="issue-title marker" id="h-issue-1" aria-level="4"><a
                        href="https://github.com/w3c/payment-handler/issues/115"><span class="issue-number">Issue
                            115</span></a><span class="issue-label">: The Open Window Algorithm</span></div>
                <p class="">
                    This algorithm resembles the <a href="#dfn-open-window-algorithm" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-open-window-algorithm-2">Open Window Algorithm</a> in the
                    Service Workers specification.
                </p>
            </div>
            <div class="issue closed" id="issue-container-number-115-0">
                <div role="heading" class="issue-title marker" id="h-issue-2" aria-level="4"><a
                        href="https://github.com/w3c/payment-handler/issues/115"><span class="issue-number">Issue
                            115</span></a><span class="issue-label">: Open Window Algorithm</span></div>
                <p class="">
                    Should we refer to the Service Workers specification instead of
                    copying their steps?
                </p>
            </div>
            <ol class="algorithm">
                <li>Let <var>event</var> be this <a data-link-type="idl" data-lt="PaymentRequestEvent"
                        href="#dom-paymentrequestevent" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-15"><code>PaymentRequestEvent</code></a>.
                </li>
                <li>If <var>event</var>'s <a data-link-type="attribute"
                        href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code>isTrusted</code></a> attribute is
                    false, return a
                    <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> rejected with a "<a
                        data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                </li>
                <li>Let <var>request</var> be the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a> that
                    triggered this <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-16"><code>PaymentRequestEvent</code></a>.
                </li>
                <li>Let <var>url</var> be the result of <a
                        href="https://url.spec.whatwg.org/#concept-url-parser">parsing</a> the <var>url</var> argument.
                </li>
                <li>If the url parsing throws an exception, return a <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>
                    rejected with that exception.
                </li>
                <li>If <var>url</var> is <code>about:blank</code>, return a
                    <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> rejected with a <a
                        data-link-type="exception" data-lt="TypeError"
                        href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.
                </li>
                <li>If <var>url</var>'s origin is not the same as the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#service-worker-concept">service
                        worker</a>'s origin associated with the payment handler, return a
                    <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> resolved with null.
                </li>
                <li>Let <var>promise</var> be a new <a data-link-type="interface" data-lt="Promise"
                        href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
                </li>
                <li>Return <var>promise</var> and perform the remaining steps in
                    parallel:
                </li>
                <li>If <var>event</var>.<a data-link-type="attribute" data-lt="[[windowClient]]"
                        href="#dfn-windowclient" class="internalDFN"
                        id="ref-for-dfn-windowclient-1"><code>[[windowClient]]</code></a> is not null, then:
                    <ol>
                        <li>If <var>event</var>.<a data-link-type="attribute" data-lt="[[windowClient]]"
                                href="#dfn-windowclient" class="internalDFN"
                                id="ref-for-dfn-windowclient-2"><code>[[windowClient]]</code></a>.<a
                                href="https://www.w3.org/TR/service-workers/#client-visibilitystate">visibilityState</a>
                            is not "unloaded", reject <var>promise</var> with an
                            "<a data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>"
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            and abort these steps.
                        </li>
                    </ol>
                </li>
                <li>Let <var>newContext</var> be a new <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context">top-level
                        browsing
                        context</a>.
                </li>
                <li>
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate">Navigate</a>
                    <var>newContext</var> to <var>url</var>, with
                    exceptions enabled and replacement enabled.
                </li>
                <li>If the navigation throws an exception, reject <var>promise</var>
                    with that exception and abort these steps.
                </li>
                <li>If the origin of <var>newContext</var> is not the same as the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-client">
                        service worker client</a> origin associated with the payment
                    handler, then:
                    <ol>
                        <li>Resolve <var>promise</var> with null.
                        </li>
                        <li>Abort these steps.
                        </li>
                    </ol>
                </li>
                <li>Let <var>client</var> be the result of running the
                    <a href="https://www.w3.org/TR/service-workers/#create-windowclient-algorithm">create
                        window client</a> algorithm with <var>newContext</var> as the
                    argument.
                </li>
                <li>Set <var>event</var>.<a data-link-type="attribute" data-lt="[[windowClient]]"
                        href="#dfn-windowclient" class="internalDFN"
                        id="ref-for-dfn-windowclient-3"><code>[[windowClient]]</code></a> to <var>client</var>.
                </li>
                <li>Resolve <var>promise</var> with <var>client</var>.
                </li>
            </ol>
        </section>
        <section id="post-example" class="informative">
            <div class="header-wrapper">
                <h3 id="x7-2-example-of-handling-the-paymentrequestevent"><bdi class="secno">7.2 </bdi>
                    Example of handling the <a data-link-type="idl" data-lt="PaymentRequestEvent"
                        href="#dom-paymentrequestevent" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-17"><code>PaymentRequestEvent</code></a>
                </h3><a class="self-link" href="#post-example" aria-label="Permalink for Section 7.2"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>
                This example shows how to write a service worker that listens to the
                <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-18"><code>PaymentRequestEvent</code></a>.
                When a <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                    class="internalDFN" id="ref-for-dom-paymentrequestevent-19"><code>PaymentRequestEvent</code></a> is
                received,
                the service worker opens a window to interact with the user.
            </p>
            <div class="example" id="example-handling-the-paymentrequestevent">
                <div class="marker">
                    <a class="self-link" href="#example-handling-the-paymentrequestevent">Example<bdi> 2</bdi></a><span
                        class="example-title">: Handling the PaymentRequestEvent</span>
                </div>
                <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPaymentResponseFromWindow</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, listener = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
      self.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"message"</span>, listener);
      <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">data</span> || !e.<span class="hljs-property">data</span>.<span class="hljs-property">methodName</span>) {
        <span class="hljs-title function_">reject</span>();
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">data</span>);
    });
  });
}

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"paymentrequest"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  e.<span class="hljs-title function_">respondWith</span>((<span class="hljs-title function_">async</span>() =&gt; {
    <span class="hljs-comment">// Open a new window for providing payment UI to user.</span>
    <span class="hljs-keyword">const</span> windowClient = <span class="hljs-keyword">await</span> e.<span class="hljs-title function_">openWindow</span>(<span class="hljs-string">"payment_ui.html"</span>);

    <span class="hljs-comment">// Send data to the opened window.</span>
    windowClient.<span class="hljs-title function_">postMessage</span>({
      <span class="hljs-attr">total</span>: e.<span class="hljs-property">total</span>,
      <span class="hljs-attr">modifiers</span>: e.<span class="hljs-property">modifiers</span>
    });

    <span class="hljs-comment">// Wait for a payment response from the opened window.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">getPaymentResponseFromWindow</span>();
  })());
});</code></pre>
            </div>
            <p>
                Using the simple scheme described above, a trivial HTML page that is
                loaded into the <a href="#dfn-payment-handler-window" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-payment-handler-window-1">payment handler window</a> might look like the
                following:
            </p>
            <div class="example" id="example-simple-payment-handler-window">
                <div class="marker">
                    <a class="self-link" href="#example-simple-payment-handler-window">Example<bdi> 3</bdi></a><span
                        class="example-title">: Simple Payment Handler Window</span>
                </div>
                <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"form"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Cardholder Name:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cardholderName"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Card Number:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cardNumber"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Expiration Month:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"expiryMonth"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Expiration Year:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"expiryYear"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Security Code:<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cardSecurityCode"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Pay"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-comment">/* Note: message sent from payment app is available in e.data */</span>
});

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"form"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"submit"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> details = {};
  [<span class="hljs-string">"cardholderName"</span>, <span class="hljs-string">"cardNumber"</span>, <span class="hljs-string">"expiryMonth"</span>, <span class="hljs-string">"expiryYear"</span>, <span class="hljs-string">"cardSecurityCode"</span>]
  .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> {
    details[field] = form.<span class="hljs-property">elements</span>[field].<span class="hljs-property">value</span>;
  });

  <span class="hljs-keyword">const</span> paymentAppResponse = {
    <span class="hljs-attr">methodName</span>: <span class="hljs-string">"https://example.com/pay"</span>,
    details
  };

  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postMessage</span>(paymentAppResponse);
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">close</span>();
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </div>
        </section>
    </section>
    <section id="response">
        <div class="header-wrapper">
            <h2 id="x8-response"><bdi class="secno">8. </bdi>
                Response
            </h2><a class="self-link" href="#response" aria-label="Permalink for Section 8."></a>
        </div>

        <section data-dfn-for="PaymentHandlerResponse" data-link-for="PaymentHandlerResponse"
            id="paymenthandlerresponse-dictionary">
            <div class="header-wrapper">
                <h3 id="x8-1-paymenthandlerresponse-dictionary"><bdi class="secno">8.1 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-paymenthandlerresponse" data-idl="dictionary"
                        data-title="PaymentHandlerResponse" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PaymentHandlerResponse</code></dfn> dictionary
                </h3><a class="self-link" href="#paymenthandlerresponse-dictionary"
                    aria-label="Permalink for Section 8.1"></a>
            </div>
            The PaymentHandlerResponse is conveyed using the following
            dictionary:
            <pre class="idl def" id="webidl-822477832"><span class="idlHeader"><a class="self-link" href="#webidl-822477832">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-paymenthandlerresponse" data-title="PaymentHandlerResponse">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymenthandlerresponse" id="ref-for-dom-paymenthandlerresponse-5"><code>PaymentHandlerResponse</code></a> {<span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-methodname" data-title="methodName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-methodname" id="ref-for-dom-paymenthandlerresponse-methodname-1"><code>methodName</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-details" data-title="details" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-details" id="ref-for-dom-paymenthandlerresponse-details-1"><code>details</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-payername" data-title="payerName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payername" id="ref-for-dom-paymenthandlerresponse-payername-1"><code>payerName</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-payeremail" data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payeremail" id="ref-for-dom-paymenthandlerresponse-payeremail-1"><code>payerEmail</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-payerphone" data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payerphone" id="ref-for-dom-paymenthandlerresponse-payerphone-1"><code>payerPhone</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-shippingaddress" data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingaddress" id="ref-for-dom-paymenthandlerresponse-shippingaddress-1"><code>shippingAddress</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-paymenthandlerresponse-shippingoption" data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingoption" id="ref-for-dom-paymenthandlerresponse-shippingoption-1"><code>shippingOption</code></a>;</span>
};</span></code></pre>
            <section id="methodname-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-1-methodname-attribute"><bdi class="secno">8.1.1 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-methodname"
                            data-idl="field" data-title="methodName" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>methodName</code></dfn>
                        attribute
                    </h4><a class="self-link" href="#methodname-attribute" aria-label="Permalink for Section 8.1.1"></a>
                </div>

                <p>
                    The <a data-link-type="dfn" href="https://www.w3.org/TR/payment-method-id/#dfn-pmi">payment method
                        identifier</a> for the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-payment-method">payment method</a>
                    that the user selected to fulfil the transaction.
                </p>
            </section>
            <section id="details-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-2-details-attribute"><bdi class="secno">8.1.2 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-details"
                            data-idl="field" data-title="details" data-dfn-for="PaymentHandlerResponse"
                            data-type="object" tabindex="0" aria-haspopup="dialog"><code>details</code></dfn> attribute
                    </h4><a class="self-link" href="#details-attribute" aria-label="Permalink for Section 8.1.2"></a>
                </div>

                <p>
                    A <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-json-serialize">JSON-serializable</a> object
                    that provides a <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dfn-payment-method">payment
                        method</a> specific message used by the merchant to process the
                    transaction and determine successful fund transfer.
                </p>
                <p>
                    The user agent receives a successful response from the payment
                    handler through resolution of the Promise provided to the
                    <a data-link-type="idl" href="#dom-paymentrequestevent-respondwith" class="internalDFN"
                        id="ref-for-dom-paymentrequestevent-respondwith-2"><code>respondWith</code></a> function of the
                    corresponding
                    <a data-link-type="idl" data-lt="PaymentRequestEvent" href="#dom-paymentrequestevent"
                        class="internalDFN" id="ref-for-dom-paymentrequestevent-20"><code>PaymentRequestEvent</code></a>
                    interface. The application is expected to
                    resolve the Promise with a <a href="#dom-paymenthandlerresponse" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymenthandlerresponse-6"><code>PaymentHandlerResponse</code></a> instance
                    containing the payment response. In case of user cancellation or
                    error, the application may signal failure by rejecting the Promise.
                </p>
                <p>
                    If the Promise is rejected, the user agent <em class="rfc2119">MUST</em> run the
                    <dfn id="dfn-payment-app-failure-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">payment app failure algorithm</dfn>. The exact details of this
                    algorithm are left to implementers. Acceptable behaviors include,
                    but are not limited to:
                </p>
                <ul>
                    <li>Letting the user try again, with the same payment handler or
                        with a different one.
                    </li>
                    <li>Rejecting the Promise that was created by <a
                            href="https://www.w3.org/TR/payment-request/#show-method">PaymentRequest.show()</a>.
                    </li>
                </ul>
            </section>
            <section id="payername-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-3-payername-attribute"><bdi class="secno">8.1.3 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-payername"
                            data-idl="field" data-title="payerName" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>payerName</code></dfn>
                        attribute
                    </h4><a class="self-link" href="#payername-attribute" aria-label="Permalink for Section 8.1.3"></a>
                </div>

                <p>
                    The user provided payer's name.
                </p>
            </section>
            <section id="payeremail-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-4-payeremail-attribute"><bdi class="secno">8.1.4 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-payeremail"
                            data-idl="field" data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>payerEmail</code></dfn>
                        attribute
                    </h4><a class="self-link" href="#payeremail-attribute" aria-label="Permalink for Section 8.1.4"></a>
                </div>

                <p>
                    The user provided payer's email.
                </p>
            </section>
            <section id="payerphone-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-5-payerphone-attribute"><bdi class="secno">8.1.5 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-payerphone"
                            data-idl="field" data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>payerPhone</code></dfn>
                        attribute
                    </h4><a class="self-link" href="#payerphone-attribute" aria-label="Permalink for Section 8.1.5"></a>
                </div>

                <p>
                    The user provided payer's phone number.
                </p>
            </section>
            <section id="shippingaddress-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-6-shippingaddress-attribute"><bdi class="secno">8.1.6 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-shippingaddress"
                            data-idl="field" data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"
                            data-type="AddressInit" tabindex="0"
                            aria-haspopup="dialog"><code>shippingAddress</code></dfn> attribute
                    </h4><a class="self-link" href="#shippingaddress-attribute"
                        aria-label="Permalink for Section 8.1.6"></a>
                </div>

                <p>
                    The user provided shipping address.
                </p>
            </section>
            <section id="shippingoption-attribute">
                <div class="header-wrapper">
                    <h4 id="x8-1-7-shippingoption-attribute"><bdi class="secno">8.1.7 </bdi>
                        <dfn data-export="" data-dfn-type="dict-member" id="dom-paymenthandlerresponse-shippingoption"
                            data-idl="field" data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"
                            data-type="DOMString" tabindex="0" aria-haspopup="dialog"><code>shippingOption</code></dfn>
                        attribute
                    </h4><a class="self-link" href="#shippingoption-attribute"
                        aria-label="Permalink for Section 8.1.7"></a>
                </div>

                <p>
                    The identifier of the user selected shipping option.
                </p>
            </section>
        </section>
        <section id="change-payment-method-algorithm">
            <div class="header-wrapper">
                <h3 id="x8-2-change-payment-method-algorithm"><bdi class="secno">8.2 </bdi>
                    <dfn id="dfn-change-payment-method-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Change Payment Method Algorithm</dfn>
                </h3><a class="self-link" href="#change-payment-method-algorithm"
                    aria-label="Permalink for Section 8.2"></a>
            </div>

            <p>
                When this algorithm is invoked with <var>methodName</var> and
                <var>methodDetails</var> parameters, the user agent <em class="rfc2119">MUST</em> run the
                following steps:
            </p>
            <ol class="algorithm">
                <li>Run the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#payment-method-changed-algorithm">payment method
                        changed algorithm</a> with
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentmethodchangeevent">PaymentMethodChangeEvent</a>
                    <var>event</var> constructed using the given
                    <var>methodName</var> and <var>methodDetails</var> parameters.
                </li>
                <li>If <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    is not run, return
                    <code>null</code>.
                </li>
                <li>If <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    throws, rethrow the
                    error.
                </li>
                <li>If <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    times out
                    (optional), throw "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                </li>
                <li>Construct and return a <a href="#dom-paymentrequestdetailsupdate" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestdetailsupdate-5"><code>PaymentRequestDetailsUpdate</code></a> from
                    the <var>detailsPromise</var> in
                    <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>.
                </li>
            </ol>
        </section>
        <section id="change-payment-details-algorithm">
            <div class="header-wrapper">
                <h3 id="x8-3-change-payment-details-algorithm"><bdi class="secno">8.3 </bdi>
                    <dfn id="dfn-change-payment-details-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Change Payment Details Algorithm</dfn>
                </h3><a class="self-link" href="#change-payment-details-algorithm"
                    aria-label="Permalink for Section 8.3"></a>
            </div>

            <p>
                When this algorithm is invoked with <var>shippingAddress</var> or
                <var>shippingOption</var> the user agent <em class="rfc2119">MUST</em> run the following
                steps:
            </p>
            <ol class="algorithm">
                <li>Run the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#paymentrequest-updated-algorithm">PaymentRequest
                        updated algorithm</a> with
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequestupdateevent">PaymentRequestUpdateEvent</a>
                    <var>event</var> constructed using the
                    updated details (<var>shippingAddress</var> or
                    <var>shippingOption</var>).
                </li>
                <li>If <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    is not run, return
                    <code>null</code>.
                </li>
                <li>If <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    throws, rethrow the
                    error.
                </li>
                <li>If <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>
                    times out
                    (optional), throw "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                </li>
                <li>Construct and return a <a href="#dom-paymentrequestdetailsupdate" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-paymentrequestdetailsupdate-6"><code>PaymentRequestDetailsUpdate</code></a> from
                    the <var>detailsPromise</var> in
                    <var>event</var>.<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a>.
                </li>
            </ol>
        </section>
        <section id="respond-to-paymentrequest-algorithm">
            <div class="header-wrapper">
                <h3 id="x8-4-respond-to-paymentrequest-algorithm"><bdi class="secno">8.4 </bdi>
                    <dfn id="dfn-respond-to-paymentrequest-algorithm" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Respond to PaymentRequest Algorithm</dfn>
                </h3><a class="self-link" href="#respond-to-paymentrequest-algorithm"
                    aria-label="Permalink for Section 8.4"></a>
            </div>

            <p>
                When this algorithm is invoked with <var>event</var> and
                <var>handlerResponsePromise</var> parameters, the user agent <em class="rfc2119">MUST</em> run
                the following steps:
            </p>
            <ol class="algorithm">
                <li>If <var>event</var>'s <a data-link-type="attribute"
                        href="https://dom.spec.whatwg.org/#dom-event-istrusted"><code>isTrusted</code></a> is false,
                    then throw an
                    "InvalidStateError" <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> and abort
                    these steps.
                </li>
                <li>If <var>event</var>'s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#dispatch-flag">dispatch flag</a> is unset, then throw an
                    "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> and abort
                    these steps.
                </li>
                <li>If <var>event</var>.<a data-link-type="attribute" data-lt="[[respondWithCalled]]"
                        href="#dfn-respondwithcalled" class="internalDFN"
                        id="ref-for-dfn-respondwithcalled-1"><code>[[respondWithCalled]]</code></a> is true, throw an
                    "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> and abort
                    these steps.
                </li>
                <li>Set <var>event</var>.<a data-link-type="attribute" data-lt="[[respondWithCalled]]"
                        href="#dfn-respondwithcalled" class="internalDFN"
                        id="ref-for-dfn-respondwithcalled-2"><code>[[respondWithCalled]]</code></a> to true.
                </li>
                <li>Set the <var>event</var>'s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#stop-propagation-flag">stop propagation flag</a> and
                    <var>event</var>'s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#stop-immediate-propagation-flag">stop immediate propagation
                        flag</a>.
                </li>
                <li>Add <var>handlerResponsePromise</var> to the <var>event</var>'s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">extend
                        lifetime promises</a>
                </li>
                <li>Increment the <var>event</var>'s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#extendableevent-pending-promises-count">pending
                        promises count</a> by one.
                </li>
                <li>
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection">Upon rejection</a> of
                    <var>handlerResponsePromise</var>:
                    <ol>
                        <li>Run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-1">payment app
                                failure algorithm</a> and terminate
                            these steps.
                        </li>
                    </ol>
                </li>
                <li>
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment">Upon fulfillment</a>
                    of <var>handlerResponsePromise</var>:
                    <ol>
                        <li>Let <var>handlerResponse</var> be <var>value</var> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value">converted to
                                an
                                IDL value</a> <a data-link-type="idl" data-lt="PaymentHandlerResponse"
                                href="#dom-paymenthandlerresponse" class="internalDFN"
                                id="ref-for-dom-paymenthandlerresponse-7"><code>PaymentHandlerResponse</code></a>. If
                            this throws an
                            exception, run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-2">payment app
                                failure algorithm</a> and
                            terminate these steps.
                        </li>
                        <li>Validate that all required members exist in
                            <var>handlerResponse</var> and are well formed.
                            <ol>
                                <li>If <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.methodName"
                                        href="#dom-paymenthandlerresponse-methodname" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-methodname-2"><code>methodName</code></a>
                                    is not
                                    present or not set to one of the values from
                                    <var>event</var>.<a data-lt="PaymentRequestEvent.methodData"
                                        href="#dom-paymentrequestevent-methoddata" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymentrequestevent-methoddata-5"><code>methodData</code></a>,
                                    run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-3">
                                        payment app failure algorithm</a> and terminate these
                                    steps.
                                </li>
                                <li>If <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.details"
                                        href="#dom-paymenthandlerresponse-details" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-details-2"><code>details</code></a> is
                                    not present
                                    or not <a data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dfn-json-serialize">JSON-serializable</a>,
                                    run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-4">payment
                                        app
                                        failure algorithm</a> and terminate these steps.
                                </li>
                                <li>Let <var>shippingRequired</var> be the <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestshipping">requestShipping</a>
                                    value of the associated PaymentRequest's
                                    <a data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">paymentOptions</a>.
                                    If <var>shippingRequired</var> and
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.shippingAddress"
                                        href="#dom-paymenthandlerresponse-shippingaddress" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-shippingaddress-2"><code>shippingAddress</code></a>
                                    is not present, run the <a href="#dfn-payment-app-failure-algorithm"
                                        class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-payment-app-failure-algorithm-5">payment app failure
                                        algorithm</a>
                                    and terminate these steps.
                                </li>
                                <li>If <var>shippingRequired</var> and
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.shippingOption"
                                        href="#dom-paymenthandlerresponse-shippingoption" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-shippingoption-2"><code>shippingOption</code></a>
                                    is
                                    not present or not set to one of shipping options identifiers
                                    from <var>event</var>.<a data-lt="PaymentRequestEvent.shippingOptions"
                                        href="#dom-paymentrequestevent-shippingoptions" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymentrequestevent-shippingoptions-3"><code>shippingOptions</code></a>,
                                    run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-6">payment
                                        app failure algorithm</a> and terminate
                                    these steps.
                                </li>
                                <li>Let <var>payerNameRequired</var> be the <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestpayername">requestPayerName</a>
                                    value of the associated PaymentRequest's
                                    <a data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">paymentOptions</a>.
                                    If <var>payerNameRequired</var> and
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.payerName"
                                        href="#dom-paymenthandlerresponse-payername" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-payername-2"><code>payerName</code></a>
                                    is not
                                    present, run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-7">payment
                                        app failure algorithm</a> and
                                    terminate these steps.
                                </li>
                                <li>Let <var>payerEmailRequired</var> be the <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestpayeremail">requestPayerEmail</a>
                                    value of the associated PaymentRequest's
                                    <a data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">paymentOptions</a>.
                                    If <var>payerEmailRequired</var> and
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.payerEmail"
                                        href="#dom-paymenthandlerresponse-payeremail" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-payeremail-2"><code>payerEmail</code></a>
                                    is not
                                    present, run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-8">payment
                                        app failure algorithm</a> and
                                    terminate these steps.
                                </li>
                                <li>Let <var>payerPhoneRequired</var> be the <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions-requestpayerphone">requestPayerPhone</a>
                                    value of the associated PaymentRequest's
                                    <a data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">paymentOptions</a>.
                                    If <var>payerPhoneRequired</var> and
                                    <var>handlerResponse</var>.<a data-lt="PaymentHandlerResponse.payerPhone"
                                        href="#dom-paymenthandlerresponse-payerphone" class="internalDFN"
                                        data-link-type="idl"
                                        id="ref-for-dom-paymenthandlerresponse-payerphone-2"><code>payerPhone</code></a>
                                    is not
                                    present, run the <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-9">payment
                                        app failure algorithm</a> and
                                    terminate these steps.
                                </li>
                            </ol>
                        </li>
                        <li>Serialize required members of <var>handlerResponse</var> (
                            <var>methodName</var> and <var>details</var> are always required;
                            <var>shippingAddress</var> and <var>shippingOption</var> are
                            required when <var>shippingRequired</var> is true;
                            <var>payerName</var>, <var>payerEmail</var>, and
                            <var>payerPhone</var> are required when
                            <var>payerNameRequired</var>, <var>payerEmailRequired</var>, and
                            <var>payerPhoneRequired</var> are true, respectively.):
                            <ol>
                                <li>For each <var>member</var>in
                                    <var>handlerResponse</var>Let <var>serializeMember</var>be
                                    the result of <a
                                        href="https://html.spec.whatwg.org/multipage/#structuredserialize">StructuredSerialize</a>with
                                    <var>
                                        handlerResponse</var>.<var>member</var>. Rethrow any
                                    exceptions.
                                </li>
                            </ol>
                        </li>
                        <li>The user agent <em class="rfc2119">MUST</em> run the <a data-link-type="dfn"
                                href="https://www.w3.org/TR/payment-request/#user-accepts-the-payment-request-algorithm">user
                                accepts the payment
                                request algorithm</a> as defined in [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-payment-request" title="Payment Request API">payment-request</a></cite>],
                            replacing steps 9-15 with these steps or their equivalent.
                            <ol>
                                <li>Deserialize serialized members:
                                    <ol>
                                        <li>For each <var>serializeMember</var>let
                                            <var>member</var>be the result of <a
                                                href="https://html.spec.whatwg.org/multipage/#structureddeserialize">StructuredDeserialize</a>with
                                            <var>serializeMember</var>. Rethrow any exceptions.
                                        </li>
                                    </ol>
                                </li>
                                <li>If any exception occurs in the above step, then run the
                                    <a href="#dfn-payment-app-failure-algorithm" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-payment-app-failure-algorithm-10">payment
                                        app failure algorithm</a> and terminate these
                                    steps.
                                </li>
                                <li>Assign <var>methodName</var> to associated
                                    PaymentRequest's <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>.<a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-methodname">methodName</a>.
                                </li>
                                <li>Assign <var>details</var> to associated PaymentReqeust's
                                    <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>.<a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-details">details</a>.
                                </li>
                                <li>If <var>shippingRequired</var>, then set the
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-shippingaddress">
                                        shippingAddress</a> attribute of associated
                                    PaymentReqeust's <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>
                                    to
                                    <var>shippingAddress</var>. Otherwise, set it to null.
                                </li>
                                <li>If <var>shippingRequired</var>, then set the
                                    <a href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-shippingoption">
                                        shippingOption</a> attribute of associated PaymentReqeust's
                                    <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>
                                    to
                                    <var>shippingOption</var>. Otherwise, set it to null.
                                </li>
                                <li>If <var>payerNameRequired</var>, then set the
                                    <a href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-payername">
                                        payerName</a> attribute of associated PaymentReqeust's
                                    <a data-lt="PaymentResponse" data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>
                                    to
                                    <var>payerName</var>. Otherwise, set it to null.
                                </li>
                                <li>If <var>payerEmailRequired</var>, then set the
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-payeremail">payerEmail</a>
                                    attribute of associated PaymentReqeust's <a data-lt="PaymentResponse"
                                        data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>
                                    to
                                    <var>payerEmail</var>. Otherwise, set it to null.
                                </li>
                                <li>If <var>payerPhoneRequired</var>, then set the
                                    <a
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse-payerphone">payerPhone</a>
                                    attribute of associated PaymentReqeust's <a data-lt="PaymentResponse"
                                        data-link-type="dfn"
                                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse"><var>response</var></a>
                                    to
                                    <var>payerPhone</var>. Otherwise, set it to null.
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>
                    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment">Upon fulfillment</a>
                    or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection">upon rejection</a>
                    of
                    <var>handlerResponsePromise</var>, <a
                        href="https://html.spec.whatwg.org/multipage/#queue-a-microtask">queue a microtask</a> to
                    perform the
                    following steps:
                    <ol>
                        <li>Decrement the <var>event</var>'s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#extendableevent-pending-promises-count">pending
                                promises count</a> by one.
                        </li>
                        <li>Let <var>registration</var> be the <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
                                global object</a>'s associated <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#service-worker-concept">service
                                worker</a>'s
                            <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#dfn-containing-service-worker-registration">containing
                                service worker registration</a>.
                        </li>
                        <li>If <var>registration</var> is not null, invoke <a data-link-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#try-activate-algorithm">Try
                                Activate</a> with <var>registration</var>.
                        </li>
                    </ol>
                </li>
            </ol>
            <p>
                The following example shows how to respond to a payment request:
            </p>
            <div class="example" id="example-sending-a-payment-response">
                <div class="marker">
                    <a class="self-link" href="#example-sending-a-payment-response">Example<bdi> 4</bdi></a><span
                        class="example-title">: Sending a Payment Response</span>
                </div>
                <pre aria-busy="false"><code class="hljs js">paymentRequestEvent.<span class="hljs-title function_">respondWith</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">accept,reject</span>) {
  <span class="hljs-comment">/* ... processing may occur here ... */</span>
  <span class="hljs-title function_">accept</span>({
    <span class="hljs-attr">methodName</span>: <span class="hljs-string">"https://example.com/pay"</span>,
    <span class="hljs-attr">details</span>: {
      <span class="hljs-attr">cardHolderName</span>:   <span class="hljs-string">"John Smith"</span>,
      <span class="hljs-attr">cardNumber</span>:       <span class="hljs-string">"1232343451234"</span>,
      <span class="hljs-attr">expiryMonth</span>:      <span class="hljs-string">"12"</span>,
      expiryYear :      <span class="hljs-string">"2020"</span>,
      <span class="hljs-attr">cardSecurityCode</span>: <span class="hljs-string">"123"</span>
     },
    <span class="hljs-attr">shippingAddress</span>: {
      <span class="hljs-attr">addressLine</span>: [
        <span class="hljs-string">"1875 Explorer St #1000"</span>,
      ],
      <span class="hljs-attr">city</span>: <span class="hljs-string">"Reston"</span>,
      <span class="hljs-attr">country</span>: <span class="hljs-string">"US"</span>,
      <span class="hljs-attr">dependentLocality</span>: <span class="hljs-string">""</span>,
      <span class="hljs-attr">organization</span>: <span class="hljs-string">""</span>,
      <span class="hljs-attr">phone</span>: <span class="hljs-string">"+15555555555"</span>,
      <span class="hljs-attr">postalCode</span>: <span class="hljs-string">"20190"</span>,
      <span class="hljs-attr">recipient</span>: <span class="hljs-string">"John Smith"</span>,
      <span class="hljs-attr">region</span>: <span class="hljs-string">"VA"</span>,
      <span class="hljs-attr">sortingCode</span>: <span class="hljs-string">""</span>
    },
    <span class="hljs-attr">shippingOption</span>: <span class="hljs-string">"express"</span>,
    <span class="hljs-attr">payerEmail</span>: <span class="hljs-string">"john.smith@gmail.com"</span>,
  });
}));</code></pre>
            </div>
            <div class="note" role="note" id="issue-container-generatedID-2">
                <div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div>
                <p class="">
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                            title="Payment Request API">payment-request</a></cite>] defines an <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-request/#id-attribute">ID</a> that parties in the
                    ecosystem (including payment app providers and payees) can use for
                    reconciliation after network or other failures.
                </p>
            </div>
        </section>
    </section>

    <section id="security">
        <div class="header-wrapper">
            <h2 id="x9-security-and-privacy-considerations"><bdi class="secno">9. </bdi>
                Security and Privacy Considerations
            </h2><a class="self-link" href="#security" aria-label="Permalink for Section 9."></a>
        </div>

        <section id="addresses">
            <div class="header-wrapper">
                <h3 id="x9-1-addresses"><bdi class="secno">9.1 </bdi>Addresses</h3><a class="self-link"
                    href="#addresses" aria-label="Permalink for Section 9.1"></a>
            </div>

            <p>
                The Web Payments Working Group removed support for shipping and
                billing addresses from the original version of Payment Request API due
                to privacy issues; see <a href="https://github.com/w3c/payment-request/issues/842">issue
                    842</a>. In order to provide documentation for implementations that
                continue to support this capability, the Working Group is now
                restoring the feature with an expectation of addressing privacy
                issues. In doing so the Working Group may also make changes to Payment
                Request API based on the evolution of other APIs (e.g., the Content
                Picker API).
            </p>
        </section>
        <section id="information-about-the-user-environment">
            <div class="header-wrapper">
                <h3 id="x9-2-information-about-the-user-environment"><bdi class="secno">9.2 </bdi>
                    Information about the User Environment
                </h3><a class="self-link" href="#information-about-the-user-environment"
                    aria-label="Permalink for Section 9.2"></a>
            </div>

            <ul>
                <li>The API does not share information about the user's registered
                    payment handlers. Information from origins is only shared with the
                    payee with the consent of the user.
                </li>
                <li>User agents should not share payment request information with any
                    payment handler until the user has selected that payment handler.
                </li>
                <li>In a browser that supports Payment Handler API, when a merchant
                    creates a PaymentRequest object with URL-based payment method
                    identifiers, a <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-12"><code>CanMakePaymentEvent</code></a> will fire in
                    registered
                    payment handlers from a finite set of origins: the origins of the
                    payment method manifests and their <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">supported
                        origins</a>. This
                    event is fired before the user has selected that payment handler,
                    but it contains no information about the triggering origin (i.e.,
                    the merchant website) and so cannot be used to track users directly.
                </li>
                <li>We acknowledge the risk of a timing attack via
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-13"><code>CanMakePaymentEvent</code></a>:
                    <ul>
                        <li>A merchant website sends notice via a backend channel (e.g., the
                            fetch API) to a payment handler origin, sharing that they are about
                            to construct a PaymentRequest object.</li>
                        <li>The merchant website then constructs the PaymentRequest,
                            triggering a <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-canmakepaymentevent-14"><code>CanMakePaymentEvent</code></a> to be fired
                            at the installed
                            payment handler.</li>
                        <li>That payment handler contacts its own origin, and on the server
                            side attempts to join the two requests.</li>
                    </ul>
                </li>
                <li>User agents should allow users to disable support for the
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-15"><code>CanMakePaymentEvent</code></a>.
                </li>
                <li>In a browser that supports Payment Handler API,
                    <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-16"><code>CanMakePaymentEvent</code></a> will fire in
                    registered payment handlers
                    that can provide all merchant requested information including
                    shipping address and payer's contact information whenever needed.
                </li>
            </ul>
        </section>
        <section id="user-consent-to-install">
            <div class="header-wrapper">
                <h3 id="x9-3-user-consent-to-install-a-payment-handler"><bdi class="secno">9.3 </bdi>
                    User Consent to Install a Payment Handler
                </h3><a class="self-link" href="#user-consent-to-install" aria-label="Permalink for Section 9.3"></a>
            </div>

            <ul>
                <li>This specification does not define how the user agent establishes
                    user consent when a payment handler is first registered. The user
                    agent might notify and/or prompt the user during registration.
                </li>
                <li>User agents <em class="rfc2119">MAY</em> reject payment handler registration for security
                    reasons (e.g., due to an invalid SSL certificate) and <em class="rfc2119">SHOULD</em> notify
                    the user when this happens.
                </li>
            </ul>
        </section>
        <section id="user-consent-before-payment">
            <div class="header-wrapper">
                <h3 id="x9-4-user-consent-before-payment"><bdi class="secno">9.4 </bdi>
                    User Consent before Payment
                </h3><a class="self-link" href="#user-consent-before-payment"
                    aria-label="Permalink for Section 9.4"></a>
            </div>

            <ul>
                <li>One goal of this specification is to minimize the user
                    interaction required to make a payment. However, we also want to
                    ensure that the user has an opportunity to consent to making a
                    payment. Because payment handlers are not required to open a window
                    for user interaction, user agents should take necessary steps to make
                    sure the user (1) is made aware when a payment request is invoked,
                    and (2) has an opportunity to interact with a payment handler before
                    the merchant receives the response from that payment handler.
                </li>
            </ul>
        </section>
        <section id="user-awareness-about-sharing-data-cross-origin">
            <div class="header-wrapper">
                <h3 id="x9-5-user-awareness-about-sharing-data-cross-origin"><bdi class="secno">9.5 </bdi>
                    User Awareness about Sharing Data Cross-Origin
                </h3><a class="self-link" href="#user-awareness-about-sharing-data-cross-origin"
                    aria-label="Permalink for Section 9.5"></a>
            </div>

            <ul>
                <li>By design, a payment handler from one origin shares data with
                    another origin (e.g., the merchant site).
                </li>
                <li>To mitigate phishing attacks, it is important that user agents
                    make clear to users the origin of a payment handler.
                </li>
                <li>User agents should help users understand that they are sharing
                    information cross-origin, and ideally what information they are
                    sharing.
                </li>
            </ul>
        </section>
        <section id="secure-communications">
            <div class="header-wrapper">
                <h3 id="x9-6-secure-communications"><bdi class="secno">9.6 </bdi>
                    Secure Communications
                </h3><a class="self-link" href="#secure-communications" aria-label="Permalink for Section 9.6"></a>
            </div>

            <ul>
                <li>See <a href="https://www.w3.org/TR/service-workers/#security-considerations">Service Worker security
                        considerations</a>
                </li>
                <li>Payment method security is outside the scope of this
                    specification and is addressed by payment handlers that support those
                    payment methods.
                </li>
            </ul>
        </section>
        <section id="authorized-payment-apps">
            <div class="header-wrapper">
                <h3 id="x9-7-authorized-payment-apps"><bdi class="secno">9.7 </bdi>
                    Authorized Payment Apps
                </h3><a class="self-link" href="#authorized-payment-apps" aria-label="Permalink for Section 9.7"></a>
            </div>

            <ul>
                <li>The party responsible for a payment method authorizes payment
                    apps through a <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a>. See the <a href="#dfn-handling-a-canmakepaymentevent" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-handling-a-canmakepaymentevent-1">Handling a
                        CanMakePaymentEvent</a> algorithm for details.
                </li>
                <li>The user agent is not required to make available payment handlers
                    that pose security issues. Security issues might include:
                    <ul>
                        <li>Certificates that are expired, revoked, self-signed, and so
                            on.
                        </li>
                        <li>Mixed content
                        </li>
                        <li>Page available through HTTPs redirects to one that is not.
                        </li>
                        <li>Payment handler is known from safe browsing database to be
                            malicious
                        </li>
                    </ul>
                    <p>
                        When a payment handler is unavailable for security reasons, the
                        user agent should provide rationale to the payment handler
                        developers (e.g., through console messages) and may also inform
                        the user to help avoid confusion.
                    </p>
                </li>
            </ul>
        </section>
        <section id="supported-origin">
            <div class="header-wrapper">
                <h3 id="x9-8-supported-origin"><bdi class="secno">9.8 </bdi>
                    Supported Origin
                </h3><a class="self-link" href="#supported-origin" aria-label="Permalink for Section 9.8"></a>
            </div>

            <ul>
                <li>
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">Payment method
                        manifests</a> authorize origins to distribute
                    payment apps for a given payment method. When the user agent is
                    determining whether a payment handler matches the origin listed in
                    a <a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a>, the user agent uses the scope URL
                    of the payment handler's <a href="#dfn-service-worker-registration" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-service-worker-registration-2">service worker
                        registration</a>.
                </li>
            </ul>
        </section>
        <section id="data-validation">
            <div class="header-wrapper">
                <h3 id="x9-9-data-validation"><bdi class="secno">9.9 </bdi>
                    Data Validation
                </h3><a class="self-link" href="#data-validation" aria-label="Permalink for Section 9.9"></a>
            </div>

            <ul>
                <li>To mitigate the scenario where a hijacked payee site submits
                    fraudlent or malformed payment method data (or, for that matter,
                    payment request data) to the payee's server, the payee's server
                    should validate the data format and correlate the data with
                    authoritative information on the server such as accepted payment
                    methods, total, display items, and shipping address.
                </li>
            </ul>
        </section>
        <section id="private-browsing-mode">
            <div class="header-wrapper">
                <h3 id="x9-10-private-browsing-mode"><bdi class="secno">9.10 </bdi>
                    Private Browsing Mode
                </h3><a class="self-link" href="#private-browsing-mode" aria-label="Permalink for Section 9.10"></a>
            </div>

            <ul>
                <li>When the Payment Request API is invoked in a "private browsing
                    mode," the user agent should launch payment handlers in a private
                    context. This will generally prevent sites from accessing any
                    previously-stored information. In turn, this is likely to require
                    either that the user log in to the origin or re-enter payment details.
                </li>
                <li>The <a href="#dom-canmakepaymentevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-17"><code>CanMakePaymentEvent</code></a> event should not be
                    fired in
                    private browsing mode. The user agent should behave as if
                    <a data-lt="CanMakePaymentEvent.respondWith()" href="#dom-canmakepaymentevent-respondwith"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-canmakepaymentevent-respondwith-3"><code>respondWith()</code></a>
                    was called with <code>false</code>. We acknowledge a consequent risk: if an
                    entity controls both the origin of the Payment Request API call and
                    the origin of the payment handler, that entity may be able to
                    deduce that the user may be in private browsing mode.
                </li>
            </ul>
        </section>
    </section>
    <section id="display" class="informative">
        <div class="header-wrapper">
            <h2 id="x10-payment-handler-display-considerations"><bdi class="secno">10. </bdi>
                Payment Handler Display Considerations
            </h2><a class="self-link" href="#display" aria-label="Permalink for Section 10."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            When ordering payment handlers, the user agent is expected to honor user
            preferences over other preferences. User agents are expected to permit
            manual configuration options, such as setting a preferred payment
            handler display order for an origin, or for all origins.
        </p>
        <p>
            User experience details are left to implementers.
        </p>
    </section>
    <section id="dependencies">
        <div class="header-wrapper">
            <h2 id="x11-dependencies"><bdi class="secno">11. </bdi>
                Dependencies
            </h2><a class="self-link" href="#dependencies" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            This specification relies on several other underlying specifications.
        </p>
        <dl>
            <dt>
                Payment Request API
            </dt>
            <dd>
                The terms <dfn data-lt="payment methods" id="dfn-payment-methods" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://www.w3.org/TR/payment-request/#dfn-payment-method">payment
                        method</a></dfn>,
                <dfn id="dfn-paymentrequest" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">PaymentRequest</a></dfn>,
                <dfn id="dfn-paymentresponse" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentresponse">PaymentResponse</a></dfn>,
                <dfn id="dfn-supportedmethods" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentmethoddata-supportedmethods">supportedMethods</a></dfn>,
                <dfn id="dfn-paymentcurrencyamount" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></dfn>,
                <dfn id="dfn-paymentdetailsmodifier" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">paymentDetailsModifier</a></dfn>,
                <dfn id="dfn-paymentdetailsinit" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsinit-dictionary">paymentDetailsInit</a></dfn>,
                <dfn id="dfn-paymentdetailsbase" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentdetailsbase-dictionary">paymentDetailsBase</a></dfn>,
                <dfn id="dfn-paymentmethoddata" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a></dfn>,
                <dfn id="dfn-paymentoptions" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentoptions">PaymentOptions</a></dfn>,
                <dfn id="dfn-paymentshippingoption" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a></dfn>,
                <dfn id="dfn-addressinit" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></dfn>,
                <dfn id="dfn-addresserrors" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-addresserrors">AddressErrors</a></dfn>,
                <dfn id="dfn-paymentmethodchangeevent" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentmethodchangeevent">PaymentMethodChangeEvent</a></dfn>,
                <dfn id="dfn-paymentrequestupdateevent" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dom-paymentrequestupdateevent">PaymentRequestUpdateEvent</a></dfn>,
                <dfn id="dfn-id" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#id-attribute">ID</a></dfn>,
                <dfn id="dfn-canmakepayment" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#canmakepayment-method">canMakePayment()</a></dfn>,
                <dfn id="dfn-show" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#show-method">show()</a></dfn>,
                <dfn id="dfn-updatewith-detailspromise" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#updatewith-method">updateWith(detailsPromise)</a></dfn>,
                <dfn id="dfn-user-accepts-the-payment-request-algorithm" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#user-accepts-the-payment-request-algorithm">user
                        accepts the payment request algorithm</a></dfn>, <dfn id="dfn-payment-method-changed-algorithm"
                    class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#payment-method-changed-algorithm">payment method
                        changed algorithm</a></dfn>, <dfn id="dfn-paymentrequest-updated-algorithm" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#paymentrequest-updated-algorithm">PaymentRequest
                        updated algorithm</a></dfn>, and <dfn id="dfn-json-serializable" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-request/#dfn-json-serialize">JSON-serializable</a></dfn> are
                defined by the Payment Request API specification
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-request"
                        title="Payment Request API">payment-request</a></cite>].
            </dd>
            <dt>
                ECMAScript
            </dt>
            <dd>
                The terms <dfn id="dfn-internal-slot" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots">internal
                        slot</a></dfn> and
                <code><dfn id="dfn-json-stringify" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://tc39.es/ecma262/multipage/#sec-json.stringify">JSON.stringify</a></dfn></code>
                are
                defined by [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript"
                        title="ECMAScript Language Specification">ECMASCRIPT</a></cite>].
            </dd>
            <dt>
                Payment Method Manifest
            </dt>
            <dd>
                The terms <dfn data-lt="payment method manifests" id="dfn-payment-method-manifests" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#payment-method-manifest">payment method
                        manifest</a></dfn>, <dfn data-lt="ingested" id="dfn-ingested" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#ingest-payment-method-manifests">ingest
                        payment method manifest</a></dfn>, <dfn data-lt="parsed" id="dfn-parsed" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest">parsed
                        payment method manifest</a></dfn>, and <dfn id="dfn-supported-origins" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/payment-method-manifest/#parsed-payment-method-manifest-supported-origins">
                        supported origins</a></dfn> are defined by the Payment Method Manifest
                specification [<cite><a class="bibref" data-link-type="biblio" href="#bib-payment-method-manifest"
                        title="Payment Method Manifest">payment-method-manifest</a></cite>].
            </dd>
            <dt>
                Service Workers
            </dt>
            <dd>
                The terms <dfn id="dfn-service-worker" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#service-worker-concept">service worker</a></dfn>,
                <dfn id="dfn-service-worker-registration" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">service worker registration</dfn>,
                <dfn id="dfn-service-worker-client" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-client">service
                        worker client</a></dfn>,
                <code><dfn id="dom-serviceworkerregistration" data-idl="interface" data-title="ServiceWorkerRegistration" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/service-workers/#service-worker-registration-concept">ServiceWorkerRegistration</a></dfn></code>,
                <code><dfn id="dom-serviceworkerglobalscope" data-idl="interface" data-title="ServiceWorkerGlobalScope" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope-interface">ServiceWorkerGlobalScope</a></dfn></code>,
                <dfn id="dfn-fire-functional-event" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#fire-functional-event-algorithm">fire
                        functional event</a></dfn>, <dfn id="dfn-extend-lifetime-promises" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">extend
                        lifetime
                        promises</a></dfn>,<dfn id="dfn-pending-promises-count" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#extendableevent-pending-promises-count">pending
                        promises
                        count</a></dfn>, <dfn id="dfn-containing-service-worker-registration" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dfn-containing-service-worker-registration">containing
                        service worker registration</a></dfn>,
                <dfn id="dfn-try-clear-registration" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#try-clear-registration-algorithm">Try
                        Clear Registration</a></dfn>, <dfn id="dfn-try-activate" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://www.w3.org/TR/service-workers/#try-activate-algorithm">Try
                        Activate</a></dfn>,
                <dfn id="dfn-extendableevent" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></dfn>,
                <dfn id="dfn-extendableeventinit" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></dfn>,
                and <dfn id="dfn-scope-url" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://www.w3.org/TR/service-workers/#dfn-scope-url">scope URL</a></dfn>
                are defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                        title="Service Workers">SERVICE-WORKERS</a></cite>].
            </dd>
        </dl>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x12-conformance"><bdi class="secno">12. </bdi>Conformance</h2><a class="self-link"
                href="#conformance" aria-label="Permalink for Section 12."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">SHOULD</em>,
            and <em class="rfc2119">SHOULD NOT</em> in this document
            are to be interpreted as described in
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all
            capitals, as shown here.
        </p>
        <p>
            There is only one class of product that can claim conformance to this
            specification: a <dfn data-lt="user agents|user agent" id="dfn-user-agents" tabindex="0"
                aria-haspopup="dialog" data-dfn-type="dfn">user agent</dfn>.
        </p>
        <p>
            User agents <em class="rfc2119">MAY</em> implement algorithms given in this specification in any
            way desired, so long as the end result is indistinguishable from the
            result that would be obtained by the specification's algorithms.
        </p>
        <p>
            User agents <em class="rfc2119">MAY</em> impose implementation-specific limits on otherwise
            unconstrained inputs, e.g., to prevent denial of service attacks, to
            guard against running out of memory, or to work around
            platform-specific limitations. When an input exceeds
            implementation-specific limit, the user agent <em class="rfc2119">MUST</em> throw, or, in the
            context of a promise, reject with, a <a data-link-type="exception" data-lt="TypeError"
                href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a> optionally
            informing
            the developer of how a particular input exceeded an
            implementation-specific limit.
        </p>
    </section>
    <section class="appendix" id="idl-index">
        <div class="header-wrapper">
            <h2 id="a-idl-index"><bdi class="secno">A. </bdi>IDL Index</h2><a class="self-link" href="#idl-index"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlInterface" data-title="ServiceWorkerRegistration">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerregistration"><code>ServiceWorkerRegistration</code></a> {<span data-idl="" class="idlAttribute" data-title="paymentManager" data-dfn-for="ServiceWorkerRegistration">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-paymentmanager" class="internalDFN" id="ref-for-dom-paymentmanager-5"><code>PaymentManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-paymentmanager" id="ref-for-dom-serviceworkerregistration-paymentmanager-2"><code>paymentManager</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PaymentManager">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentmanager" id="ref-for-dom-paymentmanager-6"><code>PaymentManager</code></a> {<span data-idl="" class="idlAttribute" data-title="userHint" data-dfn-for="PaymentManager">
  attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentmanager-userhint" id="ref-for-dom-paymentmanager-userhint-2"><code>userHint</code></a>;</span><span data-idl="" class="idlMethod" data-title="enableDelegations" data-dfn-for="PaymentManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentmanager-enabledelegations" id="ref-for-dom-paymentmanager-enabledelegations-2"><code>enableDelegations</code></a>(<span class="idlType"><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-paymentdelegation" class="internalDFN" id="ref-for-dom-paymentdelegation-4"><code>PaymentDelegation</code></a>&gt;</span> <span class="idlParamName">delegations</span>);</span>
};</span>

<span data-idl="" class="idlEnum" data-title="PaymentDelegation">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-paymentdelegation" id="ref-for-dom-paymentdelegation-5"><code>PaymentDelegation</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-shippingaddress" id="ref-for-dom-paymentdelegation-shippingaddress-2"><code>shippingAddress</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payername" id="ref-for-dom-paymentdelegation-payername-2"><code>payerName</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payerphone" id="ref-for-dom-paymentdelegation-payerphone-2"><code>payerPhone</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-paymentdelegation-payeremail" id="ref-for-dom-paymentdelegation-payeremail-2"><code>payerEmail</code></a>"</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" data-title="oncanmakepayment" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-oncanmakepayment" id="ref-for-dom-serviceworkerglobalscope-oncanmakepayment-3"><code>oncanmakepayment</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="CanMakePaymentEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-canmakepaymentevent" id="ref-for-dom-canmakepaymentevent-18"><code>CanMakePaymentEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="CanMakePaymentEvent">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CanMakePaymentEvent" data-lt="constructor()|constructor(type)" data-local-lt="CanMakePaymentEvent.constructor|CanMakePaymentEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>);</span><span data-idl="" class="idlMethod" data-title="respondWith" data-dfn-for="CanMakePaymentEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-canmakepaymentevent-respondwith" id="ref-for-dom-canmakepaymentevent-respondwith-4"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <span class="idlParamName">canMakePaymentResponse</span>);</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ServiceWorkerGlobalScope">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a> {<span data-idl="" class="idlAttribute" data-title="onpaymentrequest" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpaymentrequest" id="ref-for-dom-serviceworkerglobalscope-onpaymentrequest-3"><code>onpaymentrequest</code></a>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PaymentRequestDetailsUpdate">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequestdetailsupdate" id="ref-for-dom-paymentrequestdetailsupdate-7"><code>PaymentRequestDetailsUpdate</code></a> {<span data-idl="" class="idlMember" data-title="error" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-error" id="ref-for-dom-paymentrequestdetailsupdate-error-2"><code>error</code></a>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-total" id="ref-for-dom-paymentrequestdetailsupdate-total-2"><code>total</code></a>;</span><span data-idl="" class="idlMember" data-title="modifiers" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-modifiers" id="ref-for-dom-paymentrequestdetailsupdate-modifiers-2"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingOptions" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingoptions" id="ref-for-dom-paymentrequestdetailsupdate-shippingoptions-2"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentMethodErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-paymentmethoderrors" id="ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-2"><code>paymentMethodErrors</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingAddressErrors" data-dfn-for="PaymentRequestDetailsUpdate"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addresserrors">AddressErrors</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequestdetailsupdate-shippingaddresserrors" id="ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-2"><code>shippingAddressErrors</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PaymentRequestEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-paymentrequestevent" id="ref-for-dom-paymentrequestevent-21"><code>PaymentRequestEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#extendableevent-interface">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PaymentRequestEvent">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PaymentRequestEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PaymentRequestEvent.constructor|PaymentRequestEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-paymentrequesteventinit" class="internalDFN" id="ref-for-dom-paymentrequesteventinit-3"><code>PaymentRequestEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" data-title="topOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-toporigin" id="ref-for-dom-paymentrequestevent-toporigin-5"><code>topOrigin</code></a>;</span><span data-idl="" class="idlAttribute" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestorigin" id="ref-for-dom-paymentrequestevent-paymentrequestorigin-3"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlAttribute" data-title="paymentRequestId" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentrequestid" id="ref-for-dom-paymentrequestevent-paymentrequestid-4"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlAttribute" data-title="methodData" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-methoddata" id="ref-for-dom-paymentrequestevent-methoddata-6"><code>methodData</code></a>;</span><span data-idl="" class="idlAttribute" data-title="total" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-total" id="ref-for-dom-paymentrequestevent-total-6"><code>total</code></a>;</span><span data-idl="" class="idlAttribute" data-title="modifiers" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-modifiers" id="ref-for-dom-paymentrequestevent-modifiers-6"><code>modifiers</code></a>;</span><span data-idl="" class="idlAttribute" data-title="paymentOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-paymentoptions" id="ref-for-dom-paymentrequestevent-paymentoptions-4"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlAttribute" data-title="shippingOptions" data-dfn-for="PaymentRequestEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-paymentrequestevent-shippingoptions" id="ref-for-dom-paymentrequestevent-shippingoptions-4"><code>shippingOptions</code></a>;</span><span data-idl="" class="idlMethod" data-title="openWindow" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dfn-windowclient-0" class="internalDFN" id="ref-for-dfn-windowclient-0-2">WindowClient</a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-openwindow" id="ref-for-dom-paymentrequestevent-openwindow-2"><code>openWindow</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>);</span><span data-idl="" class="idlMethod" data-title="changePaymentMethod" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-8"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changepaymentmethod" id="ref-for-dom-paymentrequestevent-changepaymentmethod-2"><code>changePaymentMethod</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">methodName</span>, optional<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a>?</span> <span class="idlParamName">methodDetails</span> = null);</span><span data-idl="" class="idlMethod" data-title="changeShippingAddress" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-9"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingaddress" id="ref-for-dom-paymentrequestevent-changeshippingaddress-2"><code>changeShippingAddress</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <span class="idlParamName">shippingAddress</span> = {});</span><span data-idl="" class="idlMethod" data-title="changeShippingOption" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymentrequestdetailsupdate" class="internalDFN" id="ref-for-dom-paymentrequestdetailsupdate-10"><code>PaymentRequestDetailsUpdate</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-changeshippingoption" id="ref-for-dom-paymentrequestevent-changeshippingoption-2"><code>changeShippingOption</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">shippingOption</span>);</span><span data-idl="" class="idlMethod" data-title="respondWith" data-dfn-for="PaymentRequestEvent"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-paymentrequestevent-respondwith" id="ref-for-dom-paymentrequestevent-respondwith-3"><code>respondWith</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-paymenthandlerresponse" class="internalDFN" id="ref-for-dom-paymenthandlerresponse-8"><code>PaymentHandlerResponse</code></a>&gt;</span> <span class="idlParamName">handlerResponsePromise</span>);</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PaymentRequestEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymentrequesteventinit" id="ref-for-dom-paymentrequesteventinit-4"><code>PaymentRequestEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" data-title="topOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-toporigin" id="ref-for-dom-paymentrequesteventinit-toporigin-2"><code>topOrigin</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentRequestOrigin" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestorigin" id="ref-for-dom-paymentrequesteventinit-paymentrequestorigin-2"><code>paymentRequestOrigin</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentRequestId" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentrequestid" id="ref-for-dom-paymentrequesteventinit-paymentrequestid-2"><code>paymentRequestId</code></a>;</span><span data-idl="" class="idlMember" data-title="methodData" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentmethoddata-dictionary">PaymentMethodData</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-methoddata" id="ref-for-dom-paymentrequesteventinit-methoddata-2"><code>methodData</code></a>;</span><span data-idl="" class="idlMember" data-title="total" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentcurrencyamount-dictionary">PaymentCurrencyAmount</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-total" id="ref-for-dom-paymentrequesteventinit-total-2"><code>total</code></a>;</span><span data-idl="" class="idlMember" data-title="modifiers" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#paymentdetailsmodifier-dictionary">PaymentDetailsModifier</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-modifiers" id="ref-for-dom-paymentrequesteventinit-modifiers-2"><code>modifiers</code></a>;</span><span data-idl="" class="idlMember" data-title="paymentOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-paymentrequestevent-paymentoptions" class="internalDFN" id="ref-for-dom-paymentrequestevent-paymentoptions-5">PaymentOptions</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-paymentoptions" id="ref-for-dom-paymentrequesteventinit-paymentoptions-2"><code>paymentOptions</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingOptions" data-dfn-for="PaymentRequestEventInit"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentshippingoption">PaymentShippingOption</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymentrequesteventinit-shippingoptions" id="ref-for-dom-paymentrequesteventinit-shippingoptions-2"><code>shippingOptions</code></a>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PaymentHandlerResponse">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-paymenthandlerresponse" id="ref-for-dom-paymenthandlerresponse-9"><code>PaymentHandlerResponse</code></a> {<span data-idl="" class="idlMember" data-title="methodName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-methodname" id="ref-for-dom-paymenthandlerresponse-methodname-3"><code>methodName</code></a>;</span><span data-idl="" class="idlMember" data-title="details" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-details" id="ref-for-dom-paymenthandlerresponse-details-3"><code>details</code></a>;</span><span data-idl="" class="idlMember" data-title="payerName" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payername" id="ref-for-dom-paymenthandlerresponse-payername-3"><code>payerName</code></a>;</span><span data-idl="" class="idlMember" data-title="payerEmail" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payeremail" id="ref-for-dom-paymenthandlerresponse-payeremail-3"><code>payerEmail</code></a>;</span><span data-idl="" class="idlMember" data-title="payerPhone" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-payerphone" id="ref-for-dom-paymenthandlerresponse-payerphone-3"><code>payerPhone</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingAddress" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-addressinit">AddressInit</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingaddress" id="ref-for-dom-paymenthandlerresponse-shippingaddress-3"><code>shippingAddress</code></a>;</span><span data-idl="" class="idlMember" data-title="shippingOption" data-dfn-for="PaymentHandlerResponse"><span class="idlType">
<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-paymenthandlerresponse-shippingoption" id="ref-for-dom-paymenthandlerresponse-shippingoption-3"><code>shippingOption</code></a>;</span>
};</span></code></pre>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="b-references"><bdi class="secno">B. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-ecmascript">[ECMASCRIPT]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.
                    Ecma International. URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip JÃ¤genstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-payment-method-id">[payment-method-id]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-method-id/"><cite>Payment Method Identifiers</cite></a>.
                    Marcos Caceres. W3C. 8 September 2022. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/payment-method-id/">https://www.w3.org/TR/payment-method-id/</a>
                </dd>
                <dt id="bib-payment-method-manifest">[payment-method-manifest]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-method-manifest/"><cite>Payment Method Manifest</cite></a>.
                    Dapeng(Max) Liu; Domenic Denicola; Zach Koch. W3C. 12 December 2017. FPWD. URL: <a
                        href="https://www.w3.org/TR/payment-method-manifest/">https://www.w3.org/TR/payment-method-manifest/</a>
                </dd>
                <dt id="bib-payment-request">[payment-request]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/payment-request/"><cite>Payment Request API</cite></a>. Marcos
                    Caceres; Rouslan Solomakhin; Ian Jacobs. W3C. 15 August 2025. CRD. URL: <a
                        href="https://www.w3.org/TR/payment-request/">https://www.w3.org/TR/payment-request/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-service-workers">[SERVICE-WORKERS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/service-workers/"><cite>Service Workers</cite></a>. Yoshisato
                    Yanagisawa; Monica CHINTALA. W3C. 6 March 2025. CRD. URL: <a
                        href="https://www.w3.org/TR/service-workers/">https://www.w3.org/TR/service-workers/</a>
                </dd>
                <dt id="bib-url">[URL]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="b-2-informative-references"><bdi class="secno">B.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix B.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-webcryptoapi">[WebCryptoAPI]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/WebCryptoAPI/"><cite>Web Cryptography API</cite></a>. Mark Watson.
                    W3C. 26 January 2017. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/WebCryptoAPI/">https://www.w3.org/TR/WebCryptoAPI/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">â†‘</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payee"
        aria-label="Links in this document to definition: payee">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payee"
                aria-label="Permalink for definition: payee. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payee-1" title="Â§ 2. Overview">Â§ 2. Overview</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payee-2" title="Â§ 6.3.1 topOrigin attribute">Â§ 6.3.1 topOrigin attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payer"
        aria-label="Links in this document to definition: payer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payer"
                aria-label="Permalink for definition: payer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payer-1" title="Â§ 2. Overview">Â§ 2. Overview</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payment-handler"
        aria-label="Links in this document to definition: payment handler">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payment-handler"
                aria-label="Permalink for definition: payment handler. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payment-handler-1" title="Â§ 1. Introduction">Â§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-2" title="Â§ 2. Overview">Â§ 2. Overview</a> <a
                    href="#ref-for-dfn-payment-handler-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-payment-handler-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-5" title="Â§ 4.2 PaymentManager interface">Â§ 4.2 PaymentManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-6" title="Â§ 4.2.2 enableDelegations() method">Â§ 4.2.2
                    enableDelegations() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-7" title="Â§ 5. Can make payment">Â§ 5. Can make payment</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-8" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5 Handling a
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-payment-handler-9" title="Â§ 7. Windows">Â§ 7. Windows</a> <a
                    href="#ref-for-dfn-payment-handler-10" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerregistration-paymentmanager"
        aria-label="Links in this document to definition: paymentManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerregistration-paymentmanager"
                aria-label="Permalink for definition: paymentManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1742672635">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-paymentmanager-1"
                    title="Â§ 4.1 Extension to the ServiceWorkerRegistration interface">Â§ 4.1 Extension to the
                    ServiceWorkerRegistration interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-paymentmanager-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentmanager"
        aria-label="Links in this document to definition: PaymentManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentmanager"
                aria-label="Permalink for definition: PaymentManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1708874582">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentmanager-1" title="Â§ 1. Introduction">Â§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-2"
                    title="Â§ 4.1 Extension to the ServiceWorkerRegistration interface">Â§ 4.1 Extension to the
                    ServiceWorkerRegistration interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-3" title="Â§ 4.2 PaymentManager interface">Â§ 4.2 PaymentManager
                    interface</a> <a href="#ref-for-dom-paymentmanager-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-5" title="Â§ A. IDL Index">Â§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentmanager-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentmanager-userhint"
        aria-label="Links in this document to definition: userHint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentmanager-userhint"
                aria-label="Permalink for definition: userHint. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1708874582">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentmanager-userhint-1" title="Â§ 4.2 PaymentManager interface">Â§ 4.2
                    PaymentManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-userhint-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentmanager-enabledelegations"
        aria-label="Links in this document to definition: enableDelegations()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentmanager-enabledelegations"
                aria-label="Permalink for definition: enableDelegations(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1708874582">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentmanager-enabledelegations-1" title="Â§ 4.2 PaymentManager interface">Â§ 4.2
                    PaymentManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentmanager-enabledelegations-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation"
        aria-label="Links in this document to definition: PaymentDelegation">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation"
                aria-label="Permalink for definition: PaymentDelegation. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-1" title="Â§ 4.2 PaymentManager interface">Â§ 4.2 PaymentManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-2" title="Â§ 4.2.2 enableDelegations() method">Â§ 4.2.2
                    enableDelegations() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-3" title="Â§ 4.3 PaymentDelegation enum">Â§ 4.3 PaymentDelegation
                    enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-4" title="Â§ A. IDL Index">Â§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentdelegation-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentdelegation-shippingaddress"
        aria-label="Links in this document to definition: shippingAddress">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-shippingaddress"
                aria-label="Permalink for definition: shippingAddress. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-shippingaddress-1" title="Â§ 4.3 PaymentDelegation enum">Â§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-shippingaddress-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation-payername"
        aria-label="Links in this document to definition: payerName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-payername"
                aria-label="Permalink for definition: payerName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payername-1" title="Â§ 4.3 PaymentDelegation enum">Â§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payername-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation-payerphone"
        aria-label="Links in this document to definition: payerPhone">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-payerphone"
                aria-label="Permalink for definition: payerPhone. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payerphone-1" title="Â§ 4.3 PaymentDelegation enum">Â§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payerphone-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentdelegation-payeremail"
        aria-label="Links in this document to definition: payerEmail">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentdelegation-payeremail"
                aria-label="Permalink for definition: payerEmail. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1015767474">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payeremail-1" title="Â§ 4.3 PaymentDelegation enum">Â§ 4.3
                    PaymentDelegation enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentdelegation-payeremail-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-oncanmakepayment"
        aria-label="Links in this document to definition: oncanmakepayment">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-oncanmakepayment"
                aria-label="Permalink for definition: oncanmakepayment. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1445944587">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-oncanmakepayment-1"
                    title="Â§ 5.1 Extension to ServiceWorkerGlobalScope">Â§ 5.1 Extension to ServiceWorkerGlobalScope</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-oncanmakepayment-2"
                    title="Â§ 5.1.1 oncanmakepayment attribute">Â§ 5.1.1 oncanmakepayment attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-oncanmakepayment-3" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-canmakepaymentevent"
        aria-label="Links in this document to definition: CanMakePaymentEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-canmakepaymentevent"
                aria-label="Permalink for definition: CanMakePaymentEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-238602632">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-1" title="Â§ 5. Can make payment">Â§ 5. Can make payment</a> <a
                    href="#ref-for-dom-canmakepaymentevent-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-3" title="Â§ 5.2 The CanMakePaymentEvent">Â§ 5.2 The
                    CanMakePaymentEvent</a> <a href="#ref-for-dom-canmakepaymentevent-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-5" title="Â§ 5.3 Handling a CanMakePaymentEvent">Â§ 5.3 Handling
                    a CanMakePaymentEvent</a> <a href="#ref-for-dom-canmakepaymentevent-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-7" title="Â§ 5.4 Example of handling the CanMakePaymentEvent">Â§
                    5.4 Example of handling the CanMakePaymentEvent</a> <a href="#ref-for-dom-canmakepaymentevent-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-canmakepaymentevent-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-10" title="Â§ 5.5 Filtering of Payment Handlers">Â§ 5.5
                    Filtering of Payment Handlers</a> <a href="#ref-for-dom-canmakepaymentevent-11"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-12" title="Â§ 9.2 Information about the User Environment">Â§ 9.2
                    Information about the User Environment</a> <a href="#ref-for-dom-canmakepaymentevent-13"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-canmakepaymentevent-14"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-canmakepaymentevent-15"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-canmakepaymentevent-16"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-17" title="Â§ 9.10 Private Browsing Mode">Â§ 9.10 Private
                    Browsing Mode</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-18" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-canmakepaymentevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-canmakepaymentevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-canmakepaymentevent-respondwith"
        aria-label="Links in this document to definition: respondWith()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-canmakepaymentevent-respondwith"
                aria-label="Permalink for definition: respondWith(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-238602632">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-1" title="Â§ 5. Can make payment">Â§ 5. Can make
                    payment</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-2" title="Â§ 5.2 The CanMakePaymentEvent">Â§ 5.2 The
                    CanMakePaymentEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-3" title="Â§ 9.10 Private Browsing Mode">Â§ 9.10
                    Private Browsing Mode</a>
            </li>
            <li>
                <a href="#ref-for-dom-canmakepaymentevent-respondwith-4" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-handling-a-canmakepaymentevent"
        aria-label="Links in this document to definition: Handling a CanMakePaymentEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handling-a-canmakepaymentevent"
                aria-label="Permalink for definition: Handling a CanMakePaymentEvent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handling-a-canmakepaymentevent-1" title="Â§ 9.7 Authorized Payment Apps">Â§ 9.7
                    Authorized Payment Apps</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-onpaymentrequest"
        aria-label="Links in this document to definition: onpaymentrequest">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-onpaymentrequest"
                aria-label="Permalink for definition: onpaymentrequest. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1119623754">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpaymentrequest-1"
                    title="Â§ 6.1 Extension to ServiceWorkerGlobalScope">Â§ 6.1 Extension to ServiceWorkerGlobalScope</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpaymentrequest-2"
                    title="Â§ 6.1.1 onpaymentrequest attribute">Â§ 6.1.1 onpaymentrequest attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpaymentrequest-3" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequestdetailsupdate"
        aria-label="Links in this document to definition: PaymentRequestDetailsUpdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate"
                aria-label="Permalink for definition: PaymentRequestDetailsUpdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-1" title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2
                    The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-2" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a> <a href="#ref-for-dom-paymentrequestdetailsupdate-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-paymentrequestdetailsupdate-4"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-5" title="Â§ 8.2 Change Payment Method Algorithm">Â§ 8.2
                    Change Payment Method Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-6" title="Â§ 8.3 Change Payment Details Algorithm">Â§
                    8.3 Change Payment Details Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-7" title="Â§ A. IDL Index">Â§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentrequestdetailsupdate-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-paymentrequestdetailsupdate-9" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-paymentrequestdetailsupdate-10" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-error"
        aria-label="Links in this document to definition: error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-error"
                aria-label="Permalink for definition: error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-error-1"
                    title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-error-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-total"
        aria-label="Links in this document to definition: total">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-total"
                aria-label="Permalink for definition: total. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-total-1"
                    title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-total-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-modifiers"
        aria-label="Links in this document to definition: modifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-modifiers"
                aria-label="Permalink for definition: modifiers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-modifiers-1"
                    title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-modifiers-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-shippingoptions"
        aria-label="Links in this document to definition: shippingOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-shippingoptions"
                aria-label="Permalink for definition: shippingOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingoptions-1"
                    title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingoptions-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-paymentmethoderrors"
        aria-label="Links in this document to definition: paymentMethodErrors">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-paymentmethoderrors"
                aria-label="Permalink for definition: paymentMethodErrors. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-1"
                    title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-paymentmethoderrors-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestdetailsupdate-shippingaddresserrors"
        aria-label="Links in this document to definition: shippingAddressErrors">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestdetailsupdate-shippingaddresserrors"
                aria-label="Permalink for definition: shippingAddressErrors. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2024425618">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-1"
                    title="Â§ 6.2 The PaymentRequestDetailsUpdate">Â§ 6.2 The PaymentRequestDetailsUpdate</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestdetailsupdate-shippingaddresserrors-2" title="Â§ A. IDL Index">Â§ A.
                    IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequestevent"
        aria-label="Links in this document to definition: PaymentRequestEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent"
                aria-label="Permalink for definition: PaymentRequestEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-1" title="Â§ 1. Introduction">Â§ 1. Introduction</a> <a
                    href="#ref-for-dom-paymentrequestevent-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-paymentrequestevent-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-4" title="Â§ 2. Overview">Â§ 2. Overview</a> <a
                    href="#ref-for-dom-paymentrequestevent-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-6" title="Â§ 2.1 Handling a Payment Request">Â§ 2.1 Handling a
                    Payment Request</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-7" title="Â§ 6. Invocation">Â§ 6. Invocation</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-8" title="Â§ 6.1.1 onpaymentrequest attribute">Â§ 6.1.1
                    onpaymentrequest attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-9" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-10" title="Â§ 6.3.3 paymentRequestId attribute">Â§ 6.3.3
                    paymentRequestId attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-11" title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§
                    6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-12" title="Â§ 6.4 Internal Slots">Â§ 6.4 Internal Slots</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-13" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5
                    Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-14" title="Â§ 7. Windows">Â§ 7. Windows</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-15" title="Â§ 7.1 Open Window Algorithm">Â§ 7.1 Open Window
                    Algorithm</a> <a href="#ref-for-dom-paymentrequestevent-16" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-17"
                    title="Â§ 7.2 Example of handling the PaymentRequestEvent">Â§ 7.2 Example of handling the
                    PaymentRequestEvent</a> <a href="#ref-for-dom-paymentrequestevent-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-paymentrequestevent-19" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-20" title="Â§ 8.1.2 details attribute">Â§ 8.1.2 details
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-21" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-toporigin"
        aria-label="Links in this document to definition: topOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-toporigin"
                aria-label="Permalink for definition: topOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-2" title="Â§ 6.3.2 paymentRequestOrigin attribute">Â§
                    6.3.2 paymentRequestOrigin attribute</a> <a href="#ref-for-dom-paymentrequestevent-toporigin-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-4" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-toporigin-5" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-paymentrequestorigin"
        aria-label="Links in this document to definition: paymentRequestOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-paymentrequestorigin"
                aria-label="Permalink for definition: paymentRequestOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestorigin-1"
                    title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestorigin-2"
                    title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestorigin-3" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-paymentrequestid"
        aria-label="Links in this document to definition: paymentRequestId">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-paymentrequestid"
                aria-label="Permalink for definition: paymentRequestId. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-1" title="Â§ 6.3 The PaymentRequestEvent">Â§
                    6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-2"
                    title="Â§ 6.3.3 paymentRequestId attribute">Â§ 6.3.3 paymentRequestId attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-3"
                    title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentrequestid-4" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-methoddata"
        aria-label="Links in this document to definition: methodData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-methoddata"
                aria-label="Permalink for definition: methodData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-2"
                    title="Â§ 6.3.15 MethodData Population Algorithm">Â§ 6.3.15 MethodData Population Algorithm</a> <a
                    href="#ref-for-dom-paymentrequestevent-methoddata-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-4" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-5"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-methoddata-6" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequestevent-total"
        aria-label="Links in this document to definition: total">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-total"
                aria-label="Permalink for definition: total. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-2" title="Â§ 6.3.5 total attribute">Â§ 6.3.5 total
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-3" title="Â§ 6.3.16 Modifiers Population Algorithm">Â§
                    6.3.16 Modifiers Population Algorithm</a> <a href="#ref-for-dom-paymentrequestevent-total-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-5" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5
                    Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-total-6" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-modifiers"
        aria-label="Links in this document to definition: modifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-modifiers"
                aria-label="Permalink for definition: modifiers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-2" title="Â§ 6.3.16 Modifiers Population Algorithm">Â§
                    6.3.16 Modifiers Population Algorithm</a> <a href="#ref-for-dom-paymentrequestevent-modifiers-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-paymentrequestevent-modifiers-4"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-5" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-modifiers-6" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-paymentoptions"
        aria-label="Links in this document to definition: paymentOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-paymentoptions"
                aria-label="Permalink for definition: paymentOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3
                    The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-2"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-3"
                    title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-paymentoptions-4" title="Â§ A. IDL Index">Â§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentrequestevent-paymentoptions-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-shippingoptions"
        aria-label="Links in this document to definition: shippingOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-shippingoptions"
                aria-label="Permalink for definition: shippingOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3
                    The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-2"
                    title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5 Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-3"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-shippingoptions-4" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-openwindow"
        aria-label="Links in this document to definition: openWindow()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-openwindow"
                aria-label="Permalink for definition: openWindow(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-openwindow-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-openwindow-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-changepaymentmethod"
        aria-label="Links in this document to definition: changePaymentMethod()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-changepaymentmethod"
                aria-label="Permalink for definition: changePaymentMethod(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changepaymentmethod-1" title="Â§ 6.3 The PaymentRequestEvent">Â§
                    6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changepaymentmethod-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-changeshippingaddress"
        aria-label="Links in this document to definition: changeShippingAddress()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-changeshippingaddress"
                aria-label="Permalink for definition: changeShippingAddress(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingaddress-1"
                    title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingaddress-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-changeshippingoption"
        aria-label="Links in this document to definition: changeShippingOption()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-changeshippingoption"
                aria-label="Permalink for definition: changeShippingOption(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingoption-1"
                    title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-changeshippingoption-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequestevent-respondwith"
        aria-label="Links in this document to definition: respondWith()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequestevent-respondwith"
                aria-label="Permalink for definition: respondWith(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-941889379">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-respondwith-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-respondwith-2" title="Â§ 8.1.2 details attribute">Â§ 8.1.2
                    details attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequestevent-respondwith-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymentrequesteventinit"
        aria-label="Links in this document to definition: PaymentRequestEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit"
                aria-label="Permalink for definition: PaymentRequestEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-2" title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§
                    6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymentrequesteventinit-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-toporigin"
        aria-label="Links in this document to definition: topOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-toporigin"
                aria-label="Permalink for definition: topOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-toporigin-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-toporigin-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-paymentrequestorigin"
        aria-label="Links in this document to definition: paymentRequestOrigin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-paymentrequestorigin"
                aria-label="Permalink for definition: paymentRequestOrigin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestorigin-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestorigin-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-paymentrequestid"
        aria-label="Links in this document to definition: paymentRequestId">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-paymentrequestid"
                aria-label="Permalink for definition: paymentRequestId. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestid-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentrequestid-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-methoddata"
        aria-label="Links in this document to definition: methodData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-methoddata"
                aria-label="Permalink for definition: methodData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-methoddata-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-methoddata-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-total" aria-label="Links in this document to definition: total">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-total"
                aria-label="Permalink for definition: total. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-total-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-total-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-modifiers"
        aria-label="Links in this document to definition: modifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-modifiers"
                aria-label="Permalink for definition: modifiers. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-modifiers-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-modifiers-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-paymentoptions"
        aria-label="Links in this document to definition: paymentOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-paymentoptions"
                aria-label="Permalink for definition: paymentOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentoptions-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-paymentoptions-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymentrequesteventinit-shippingoptions"
        aria-label="Links in this document to definition: shippingOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymentrequesteventinit-shippingoptions"
                aria-label="Permalink for definition: shippingOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-488183213">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-shippingoptions-1"
                    title="Â§ 6.3.14 PaymentRequestEventInit dictionary">Â§ 6.3.14 PaymentRequestEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymentrequesteventinit-shippingoptions-2" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-methoddata-population-algorithm"
        aria-label="Links in this document to definition: MethodData Population Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-methoddata-population-algorithm"
                aria-label="Permalink for definition: MethodData Population Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-methoddata-population-algorithm-1" title="Â§ 6.3.4 methodData attribute">Â§ 6.3.4
                    methodData attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-methoddata-population-algorithm-2" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-modifiers-population-algorithm"
        aria-label="Links in this document to definition: Modifiers Population Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-modifiers-population-algorithm"
                aria-label="Permalink for definition: Modifiers Population Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-modifiers-population-algorithm-1" title="Â§ 6.3.6 modifiers attribute">Â§ 6.3.6
                    modifiers attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-modifiers-population-algorithm-2" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§
                    6.5 Handling a PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-windowclient"
        aria-label="Links in this document to definition: [[windowClient]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-windowclient"
                aria-label="Permalink for definition: [[windowClient]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-windowclient-1" title="Â§ 7.1 Open Window Algorithm">Â§ 7.1 Open Window
                    Algorithm</a> <a href="#ref-for-dfn-windowclient-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-windowclient-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-windowclient-0"
        aria-label="Links in this document to definition: WindowClient">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-windowclient-0"
                aria-label="Permalink for definition: WindowClient. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-windowclient-0-1" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-windowclient-0-2" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-respondwithcalled"
        aria-label="Links in this document to definition: [[respondWithCalled]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-respondwithcalled"
                aria-label="Permalink for definition: [[respondWithCalled]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-respondwithcalled-1" title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4
                    Respond to PaymentRequest Algorithm</a> <a href="#ref-for-dfn-respondwithcalled-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-handling-a-paymentrequestevent"
        aria-label="Links in this document to definition: Handling a PaymentRequestEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handling-a-paymentrequestevent"
                aria-label="Permalink for definition: Handling a PaymentRequestEvent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handling-a-paymentrequestevent-1" title="Â§ 6.3.1 topOrigin attribute">Â§ 6.3.1
                    topOrigin attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-handling-a-paymentrequestevent-2" title="Â§ 6.3.2 paymentRequestOrigin attribute">Â§
                    6.3.2 paymentRequestOrigin attribute</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-payment-handler-window"
        aria-label="Links in this document to definition: Windows">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payment-handler-window"
                aria-label="Permalink for definition: Windows. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payment-handler-window-1"
                    title="Â§ 7.2 Example of handling the PaymentRequestEvent">Â§ 7.2 Example of handling the
                    PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-open-window-algorithm"
        aria-label="Links in this document to definition: Open Window Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-open-window-algorithm"
                aria-label="Permalink for definition: Open Window Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-open-window-algorithm-1" title="Â§ 6.3.9 openWindow() method">Â§ 6.3.9 openWindow()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-open-window-algorithm-2" title="Â§ 7.1 Open Window Algorithm">Â§ 7.1 Open Window
                    Algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-paymenthandlerresponse"
        aria-label="Links in this document to definition: PaymentHandlerResponse">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse"
                aria-label="Permalink for definition: PaymentHandlerResponse. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-1" title="Â§ 6. Invocation">Â§ 6. Invocation</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-2" title="Â§ 6.3 The PaymentRequestEvent">Â§ 6.3 The
                    PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-3" title="Â§ 6.3.13 respondWith() method">Â§ 6.3.13
                    respondWith() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-4" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5
                    Handling a PaymentRequestEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-5" title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1
                    PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-6" title="Â§ 8.1.2 details attribute">Â§ 8.1.2 details
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-7" title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4
                    Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-8" title="Â§ A. IDL Index">Â§ A. IDL Index</a> <a
                    href="#ref-for-dom-paymenthandlerresponse-9" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-methodname"
        aria-label="Links in this document to definition: methodName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-methodname"
                aria-label="Permalink for definition: methodName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-methodname-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-methodname-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-methodname-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-details"
        aria-label="Links in this document to definition: details">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-details"
                aria-label="Permalink for definition: details. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-details-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-details-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-details-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-payment-app-failure-algorithm"
        aria-label="Links in this document to definition: payment app failure algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-payment-app-failure-algorithm"
                aria-label="Permalink for definition: payment app failure algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-payment-app-failure-algorithm-1"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-payment-app-failure-algorithm-10" title="Reference 10">(10)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-payername"
        aria-label="Links in this document to definition: payerName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-payername"
                aria-label="Permalink for definition: payerName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payername-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payername-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payername-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-payeremail"
        aria-label="Links in this document to definition: payerEmail">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-payeremail"
                aria-label="Permalink for definition: payerEmail. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payeremail-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payeremail-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payeremail-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-payerphone"
        aria-label="Links in this document to definition: payerPhone">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-payerphone"
                aria-label="Permalink for definition: payerPhone. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payerphone-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payerphone-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-payerphone-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-shippingaddress"
        aria-label="Links in this document to definition: shippingAddress">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-shippingaddress"
                aria-label="Permalink for definition: shippingAddress. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingaddress-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingaddress-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingaddress-3" title="Â§ A. IDL Index">Â§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-paymenthandlerresponse-shippingoption"
        aria-label="Links in this document to definition: shippingOption">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-paymenthandlerresponse-shippingoption"
                aria-label="Permalink for definition: shippingOption. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-822477832">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingoption-1"
                    title="Â§ 8.1 PaymentHandlerResponse dictionary">Â§ 8.1 PaymentHandlerResponse dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingoption-2"
                    title="Â§ 8.4 Respond to PaymentRequest Algorithm">Â§ 8.4 Respond to PaymentRequest Algorithm</a>
            </li>
            <li>
                <a href="#ref-for-dom-paymenthandlerresponse-shippingoption-3" title="Â§ A. IDL Index">Â§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-change-payment-method-algorithm"
        aria-label="Links in this document to definition: Change Payment Method Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-change-payment-method-algorithm"
                aria-label="Permalink for definition: Change Payment Method Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-change-payment-method-algorithm-1" title="Â§ 6.3.10 changePaymentMethod() method">Â§
                    6.3.10 changePaymentMethod() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-change-payment-details-algorithm"
        aria-label="Links in this document to definition: Change Payment Details Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-change-payment-details-algorithm"
                aria-label="Permalink for definition: Change Payment Details Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-change-payment-details-algorithm-1"
                    title="Â§ 6.3.11 changeShippingAddress() method">Â§ 6.3.11 changeShippingAddress() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-change-payment-details-algorithm-2"
                    title="Â§ 6.3.12 changeShippingOption() method">Â§ 6.3.12 changeShippingOption() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-respond-to-paymentrequest-algorithm"
        aria-label="Links in this document to definition: Respond to PaymentRequest Algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-respond-to-paymentrequest-algorithm"
                aria-label="Permalink for definition: Respond to PaymentRequest Algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-respond-to-paymentrequest-algorithm-1" title="Â§ 6.3.13 respondWith() method">Â§
                    6.3.13 respondWith() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-service-worker-registration"
        aria-label="Links in this document to definition: service worker registration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-service-worker-registration"
                aria-label="Permalink for definition: service worker registration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-service-worker-registration-1" title="Â§ 1. Introduction">Â§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-service-worker-registration-2" title="Â§ 9.8 Supported Origin">Â§ 9.8 Supported
                    Origin</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-user-agents"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-user-agents"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-user-agents-1" title="Â§ 5. Can make payment">Â§ 5. Can make payment</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agents-2" title="Â§ 5.3 Handling a CanMakePaymentEvent">Â§ 5.3 Handling a
                    CanMakePaymentEvent</a> <a href="#ref-for-dfn-user-agents-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agents-4" title="Â§ 6.5 Handling a PaymentRequestEvent">Â§ 6.5 Handling a
                    PaymentRequestEvent</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>