<!DOCTYPE html>
<html lang="zh-hans" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- <meta name="generator" content="ReSpec 35.5.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>加密媒体扩展</title>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <link rel="stylesheet" href="https://www.w3.org/TR/encrypted-media-2/eme.css">

    <meta name="color-scheme" content="light">
    <!-- <meta name="revision" content="1b9ea6db1992c2c783b5728416906bcf55e2fcba"> -->
    <meta name="description" content="本规范扩展了 HTMLMediaElement [HTML]，提供用于控制加密内容播放的 API。">
    <link rel="canonical" href="https://www.w3.org/TR/encrypted-media-2/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "implementationReportURI": "https://w3c.github.io/test-results/encrypted-media/all.html",
  "shortName": "encrypted-media-2",
  "edDraftURI": "https://w3c.github.io/encrypted-media/",
  "prevRecURI": "https://www.w3.org/TR/2017/REC-encrypted-media-20170918/",
  "editors": [
    {
      "name": "Joey Parrish",
      "w3cid": "105371",
      "company": "Google Inc.",
      "companyURL": "https://www.google.com/"
    },
    {
      "name": "Greg Freedman",
      "w3cid": "115364",
      "company": "Netflix Inc.",
      "companyURL": "https://www.netflix.com/"
    }
  ],
  "formerEditors": [
    {
      "name": "Mark Watson",
      "note": "Until September 2019",
      "w3cid": "46379",
      "company": "Netflix Inc.",
      "companyURL": "https://www.netflix.com/"
    },
    {
      "name": "David Dorwin",
      "note": "Until September 2017",
      "w3cid": "52505",
      "company": "Google Inc.",
      "companyURL": "https://www.google.com/"
    },
    {
      "name": "Jerry Smith",
      "note": "Until September 2017",
      "w3cid": "60176",
      "company": "Microsoft Corporation",
      "companyURL": "https://www.microsoft.com/"
    },
    {
      "name": "Adrian Bateman",
      "note": "Until May 2014",
      "w3cid": "42763",
      "company": "Microsoft Corporation",
      "companyURL": "https://www.microsoft.com/"
    }
  ],
  "group": "media",
  "github": "w3c/encrypted-media",
  "wgURI": "https://www.w3.org/media-wg/",
  "wgPublicList": "public-media-wg",
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/115198/status",
  "localBiblio": {
    "CENC": {
      "title": "ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files",
      "href": "https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1",
      "status": "International Standard",
      "publisher": "ISO/IEC",
      "id": "cenc"
    }
  },
  "xref": [
    "dom",
    "html",
    "infra",
    "mimesniff",
    "webaudio"
  ],
  "gitRevision": "1b9ea6db1992c2c783b5728416906bcf55e2fcba",
  "publishDate": "2025-08-21",
  "previousMaturity": "WD",
  "previousPublishDate": "2025-04-04",
  "publishISODate": "2025-08-21T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 21 August 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL dom html infra mimesniff webaudio">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">加密媒体扩展</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a> <time class="dt-published"
                datetime="2025-08-21">2025年8月21日</time></p>
        <details open="">
            <summary>关于本文档的更多信息</summary>
            <dl>
                <dt>本版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-encrypted-media-2-20250821/">https://www.w3.org/TR/2025/WD-encrypted-media-2-20250821/</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/encrypted-media-2/">https://www.w3.org/TR/encrypted-media-2/</a>
                </dd>
                <dt>最新编辑草案：</dt>
                <dd><a href="https://w3c.github.io/encrypted-media/">https://w3c.github.io/encrypted-media/</a></dd>
                <dt>历史：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/encrypted-media-2/">https://www.w3.org/standards/history/encrypted-media-2/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/encrypted-media/commits/">提交历史</a>
                </dd>

                <dt>实施报告：</dt>
                <dd>
                    <a
                        href="https://w3c.github.io/test-results/encrypted-media/all.html">https://w3c.github.io/test-results/encrypted-media/all.html</a>
                </dd>


                <dt>最新推荐标准：</dt>
                <dd><a
                        href="https://www.w3.org/TR/2017/REC-encrypted-media-20170918/">https://www.w3.org/TR/2017/REC-encrypted-media-20170918/</a>
                </dd>
                <dt>编辑：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="105371">
                    <span class="p-name fn">Joey Parrish</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google公司</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="115364">
                    <span class="p-name fn">Greg Freedman</span> (<a class="p-org org h-org"
                        href="https://www.netflix.com/">Netflix公司</a>)
                </dd>
                <dt>
                    前任编辑：
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="46379">
                    <span class="p-name fn">Mark Watson</span> (<a class="p-org org h-org"
                        href="https://www.netflix.com/">Netflix公司</a>)（截至2019年9月）
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="52505">
                    <span class="p-name fn">David Dorwin</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google公司</a>)（截至2017年9月）
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="60176">
                    <span class="p-name fn">Jerry Smith</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com/">微软公司</a>)（截至2017年9月）
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="42763">
                    <span class="p-name fn">Adrian Bateman</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com/">微软公司</a>)（截至2014年5月）
                </dd>

                <dt>反馈：</dt>
                <dd>
                    <a href="https://github.com/w3c/encrypted-media/">GitHub w3c/encrypted-media</a>
                    (<a href="https://github.com/w3c/encrypted-media/pulls/">拉取请求</a>,
                    <a href="https://github.com/w3c/encrypted-media/issues/new/choose">新建议题</a>,
                    <a href="https://github.com/w3c/encrypted-media/issues/">开放议题</a>)
                </dd>
                <dd><a
                        href="mailto:public-media-wg@w3.org?subject=%5Bencrypted-media-2%5D%20YOUR%20TOPIC%20HERE">public-media-wg@w3.org</a>
                    邮件主题请使用 <kbd>[encrypted-media-2] <em>… 消息主题 …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-media-wg">存档</a>)</dd>


            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p>
            本规范扩展了 <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-1"><code>HTMLMediaElement</code></a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            ，提供用于控制加密内容播放的 API。
        </p>
        <p>
            该 API 支持从简单的 Clear Key 解密到高价值视频（取决于用户代理的实现）等用例。许可证/密钥交换由应用程序控制，便于开发支持多种内容解密和保护技术的健壮播放应用。
        </p>
        <p>
            本规范不定义内容保护或数字版权管理（Digital Rights Management）系统。相反，它定义了一个通用的
            API，可用于发现、选择并与这些系统以及更简单的内容加密系统交互。为了符合本规范，不要求实现数字版权管理：仅需将
            <a data-link-type="dfn|abstract-op" href="#dfn-clear-key" class="internalDFN"
                id="ref-for-dfn-clear-key-1">Clear Key</a> 系统作为通用基线来实现。
        </p>
        <p>
            该通用 API 支持一组简单的内容加密能力，将诸如身份验证和授权之类的应用功能留给页面作者。通过要求由页面来中介内容保护系统特定的消息传递，而不是假定加密系统与许可证或其它服务器之间存在带外通信，从而实现这一点。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p><em>本节描述了本文档在其发布时的状态。当前的 <abbr title="World Wide Web Consortium">W3C</abbr> 出版物列表以及本技术报告的最新修订可在
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> 标准与草案索引</a>
                中找到。</em></p>
        <p>
            自 2017 年 9 月作为 <abbr title="World Wide Web Consortium">W3C</abbr> 推荐标准发布以来，新增了两个功能：
        </p>
        <ul>
            <li>通过 <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-1"><code>encryptionScheme</code></a>
                属性，增加了对加密方案能力的检测。
            </li>
            <li>通过 <a data-link-type="idl" data-lt="getStatusForPolicy()" href="#dom-mediakeys-getstatusforpolicy"
                    class="internalDFN"
                    id="ref-for-dom-mediakeys-getstatusforpolicy-1"><code>getStatusForPolicy</code></a><code>()</code>
                方法，增加了查询与 HDCP 策略相关的密钥状态的能力。
            </li>
        </ul>
        <p>
            将其他功能纳入范围之外是媒体工作组的决定。除编辑更新外，对本规范所做的其他实质性更改主要为解决与本规范相关的维护问题：
        </p>
        <ul>
            <li>通过 <a data-link-type="dfn|abstract-op" href="#dfn-encrypted-media" class="internalDFN"
                    id="ref-for-dfn-encrypted-media-1"><code>encrypted-media</code></a> 标识符与权限策略（Permissions Policy）集成。
            </li>
            <li>向 <a data-link-type="idl" href="#dom-mediakeystatus-usable-in-future" class="internalDFN"
                    id="ref-for-dom-mediakeystatus-usable-in-future-1"><code>usable-in-future</code></a> 添加到 <a
                    data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus" class="internalDFN"
                    id="ref-for-dom-mediakeystatus-1"><code>MediaKeyStatus</code></a>，用于尚不可用于解密的密钥。
            </li>
            <li>当由于资源不足导致步骤失败时，返回 <a data-link-type="dfn|abstract-op" href="#dfn-quotaexceedederror" class="internalDFN"
                    id="ref-for-dfn-quotaexceedederror-1"><code>QuotaExceededError</code></a>。
            </li>
            <li>添加 <a data-link-type="idl" data-lt="MediaKeySessionClosedReason" href="#dom-mediakeysessionclosedreason"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysessionclosedreason-1"><code>MediaKeySessionClosedReason</code></a>
                来描述会话关闭的可能原因，并相应调整算法。
            </li>
        </ul>
        <p>
            有关自上一个版本以来所做更改的完整列表，请参见 <a href="https://github.com/w3c/encrypted-media/commits/main">提交</a>。
        </p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/media">媒体工作组（Media Working Group）</a> 以 Recommendation track
            的流程作为工作草案发布。
        </p>
        <p>作为工作草案的发布并不意味着被 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员认可。 </p>
        <p>
            本文档为草案文件，可能随时被更新、替换或被其他文档废弃。不适宜将此文档作为除工作进展以外的引用来源。
        </p>
        <p>
            本文档由一个根据 <a href="https://www.w3.org/policies/patent-policy/"><abbr
                    title="World Wide Web Consortium">W3C</abbr>
                专利政策</a> 运作的小组制作。
            <abbr title="World Wide Web Consortium">W3C</abbr> 维护着一份与该小组成果相关的
            <a rel="disclosure"
                href="https://www.w3.org/groups/wg/media/ipr">任何专利披露的公开列表</a>；该页面还包含披露专利的说明。如果个人确实知道某项专利并认为其中含有
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">必要权利要求（Essential Claim(s)）</a>，则该个人必须按照
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第 6 节</a> 的规定披露该信息。
        </p>
        <p>
            本文档受 <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">2025年8月18日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> 流程文件</a> 管辖。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    介绍
                </a></li>
            <li class="tocline"><a class="tocxref" href="#definitions"><bdi class="secno">2. </bdi>
                    定义
                </a></li>
            <li class="tocline"><a class="tocxref" href="#obtaining-access-to-key-systems"><bdi class="secno">3. </bdi>
                    获取对密钥系统的访问
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#permissions-policy-integration"><bdi class="secno">3.1
                            </bdi>
                            权限策略集成
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#navigator-extension-requestmediakeysystemaccess"><bdi
                                class="secno">3.2 </bdi>
                            <span data-idl="interface" data-title="Navigator"
                                data-dfn-for=""><code>Navigator</code></span> 扩展：
                            <code>requestMediaKeySystemAccess()</code>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#methods"><bdi class="secno">3.2.1 </bdi>
                                    方法
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#algorithms"><bdi class="secno">3.2.2 </bdi>
                                    算法
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#get-supported-configuration"><bdi
                                                class="secno">3.2.2.1 </bdi>
                                            <span class="export" data-export="">获取受支持的配置</span>
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#get-supported-configuration-and-consent"><bdi class="secno">3.2.2.2
                                            </bdi>
                                            <span>获取受支持的配置和同意</span>
                                        </a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#get-supported-capabilities-for-audio-video-type"><bdi
                                                class="secno">3.2.2.3 </bdi>
                                            <span>获取音频/视频类型的受支持能力</span>
                                        </a></li>
                                    <li class="tocline"><a class="tocxref" href="#get-consent-status"><bdi
                                                class="secno">3.2.2.4 </bdi>
                                            <span>获取同意状态</span>
                                        </a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysystemconfiguration-dictionary"><bdi
                                class="secno">3.3 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="MediaKeySystemConfiguration"
                                data-dfn-for=""><code>MediaKeySystemConfiguration</code></span> 字典
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysystemmediacapability-dictionary"><bdi
                                class="secno">3.4 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="MediaKeySystemMediaCapability"
                                data-dfn-for=""><code>MediaKeySystemMediaCapability</code></span> 字典
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#dictionary-mediakeysystemmediacapability-members"><bdi class="secno">3.4.1
                                    </bdi>
                                    字典 <span class="formerLink"
                                        data-link-type="idl"><code>MediaKeySystemMediaCapability</code></span> 成员
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediakeysystemaccess-interface"><bdi class="secno">4. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface"
                        data-title="MediaKeySystemAccess" data-dfn-for=""><code>MediaKeySystemAccess</code></span>
                    接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes"><bdi class="secno">4.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-0"><bdi class="secno">4.2 </bdi>
                            方法
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediakeys-interface"><bdi class="secno">5. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="MediaKeys"
                        data-dfn-for=""><code>MediaKeys</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#methods-1"><bdi class="secno">5.1 </bdi>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#algorithms-0"><bdi class="secno">5.2 </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#is-persistent-session-type"><bdi
                                        class="secno">5.2.1 </bdi>
                                    <span>是否为持久会话类型？</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#cdm-unavailable"><bdi class="secno">5.2.2
                                    </bdi>
                                    <span>CDM 不可用</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-keys-storage"><bdi class="secno">5.3 </bdi>
                            <span>存储与持久化</span>
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#mediakeysession-interface"><bdi class="secno">6. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="MediaKeySession"
                        data-dfn-for=""><code>MediaKeySession</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-0"><bdi class="secno">6.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-2"><bdi class="secno">6.2 </bdi>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediakeystatusmap-interface"><bdi class="secno">6.3
                            </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="MediaKeyStatusMap" data-dfn-for=""><code>MediaKeyStatusMap</code></span>
                            接口
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#attributes-1"><bdi class="secno">6.3.1 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#methods-3"><bdi class="secno">6.3.2 </bdi>
                                    方法
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mediakeymessageevent"><bdi class="secno">6.4 </bdi>
                            <span data-xref-type="_IDL_" data-link-type="idl" data-lt="MediaKeyMessageEvent"
                                class="formerLink"><code>MediaKeyMessageEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#attributes-2"><bdi class="secno">6.4.1 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mediakeymessageeventinit"><bdi
                                        class="secno">6.4.2 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="MediaKeyMessageEventInit"
                                        data-dfn-for=""><code>MediaKeyMessageEventInit</code></span>
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#dictionary-mediakeymessageeventinit-members"><bdi
                                                class="secno">6.4.2.1 </bdi>
                                            字典 <span class="formerLink"
                                                data-link-type="idl"><code>MediaKeyMessageEventInit</code></span> 成员
                                        </a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysession-events"><bdi class="secno">6.5 </bdi>
                            事件摘要
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediakeysession-algorithms"><bdi class="secno">6.6
                            </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#queue-message"><bdi class="secno">6.6.1 </bdi>
                                    <span>入队一个 “message” 事件</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#update-key-statuses"><bdi class="secno">6.6.2
                                    </bdi>
                                    <span>更新密钥状态</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#update-expiration"><bdi class="secno">6.6.3
                                    </bdi>
                                    <span>更新到期时间</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#session-closed"><bdi class="secno">6.6.4
                                    </bdi>
                                    <span>会话关闭</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#monitor-cdm"><bdi class="secno">6.6.5 </bdi>
                                    <span>监视 CDM 状态变化</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#exceptions"><bdi class="secno">6.7 </bdi>
                            异常
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#session-storage"><bdi class="secno">6.8 </bdi>
                            会话存储与持久化
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#htmlmediaelement-extensions"><bdi class="secno">7. </bdi>
                    <span data-idl="interface" data-title="HTMLMediaElement"
                        data-dfn-for=""><code>HTMLMediaElement</code></span> 扩展
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#attributes-3"><bdi class="secno">7.1 </bdi>
                            属性
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#methods-4"><bdi class="secno">7.2 </bdi>
                            方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#mediaencryptedevent"><bdi class="secno">7.3 </bdi>
                            <span class="formerLink" data-link-type="idl"><code>MediaEncryptedEvent</code></span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#attributes-4"><bdi class="secno">7.3.1 </bdi>
                                    属性
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mediaencryptedeventinit"><bdi
                                        class="secno">7.3.2 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="MediaEncryptedEventInit"
                                        data-dfn-for=""><code>MediaEncryptedEventInit</code></span>
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#dictionary-mediaencryptedeventinit-members"><bdi
                                                class="secno">7.3.2.1 </bdi>
                                            字典 <span class="formerLink"
                                                data-link-type="idl"><code>MediaEncryptedEventInit</code></span> 成员
                                        </a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-events"><bdi class="secno">7.4 </bdi>
                            事件摘要
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#htmlmediaelement-algorithms"><bdi class="secno">7.5
                            </bdi>
                            算法
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#media-may-contain-encrypted-blocks"><bdi
                                        class="secno">7.5.1 </bdi>
                                    媒体数据可能包含加密块
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#initdata-encountered"><bdi class="secno">7.5.2
                                    </bdi>
                                    <span class="export" data-export="">遇到初始化数据</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#encrypted-block-encountered"><bdi
                                        class="secno">7.5.3 </bdi>
                                    <span class="export" data-export="">遇到加密块</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#attempt-to-decrypt"><bdi class="secno">7.5.4
                                    </bdi>
                                    <span>尝试解密</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#wait-for-key"><bdi class="secno">7.5.5 </bdi>
                                    <span>等待密钥</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#resume-playback"><bdi class="secno">7.5.6
                                    </bdi>
                                    <span>如有必要，尝试恢复播放</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-element-restrictions"><bdi class="secno">7.6
                            </bdi>
                            媒体元素限制
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#implementation-requirements"><bdi class="secno">8. </bdi>
                    实现要求
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#cdm-constraint-requirements"><bdi class="secno">8.1
                            </bdi>
                            CDM 约束
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#messaging-requirements"><bdi class="secno">8.2 </bdi>
                            消息与通信
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#persistent-state-requirements"><bdi class="secno">8.3
                            </bdi>
                            持久数据
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#use-origin-specific-key-system-storage"><bdi
                                        class="secno">8.3.1 </bdi>
                                    使用特定于来源和浏览配置文件的 <span data-link-type="dfn|abstract-op" class="formerLink">Key
                                        System</span> 存储
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#allow-persistent-data-cleared"><bdi
                                        class="secno">8.3.2 </bdi>
                                    允许清除持久数据
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#encrypt-or-obfuscate-persistent-data"><bdi
                                        class="secno">8.3.3 </bdi>
                                    对持久数据进行加密或混淆
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#exposed-value-requirements"><bdi class="secno">8.4
                            </bdi>
                            暴露给应用的值
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#per-origin-per-profile-values"><bdi
                                        class="secno">8.4.1 </bdi>
                                    使用每来源每配置文件的值
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#allow-values-to-be-cleared"><bdi
                                        class="secno">8.4.2 </bdi>
                                    允许清除这些值
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#identifier-requirements"><bdi class="secno">8.5 </bdi>
                            标识符
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers"><bdi
                                        class="secno">8.5.1 </bdi>
                                    限制或避免使用明显标识符和永久标识符
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#encrypt-identifiers"><bdi class="secno">8.5.2
                                    </bdi>
                                    对标识符加密
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#per-origin-per-profile-identifiers"><bdi
                                        class="secno">8.5.3 </bdi>
                                    使用每来源每配置文件标识符
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#non-associable-identifiers"><bdi
                                        class="secno">8.5.4 </bdi>
                                    使用不可关联的标识符
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#allow-identifiers-cleared"><bdi
                                        class="secno">8.5.5 </bdi>
                                    允许清除标识符
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#individualization"><bdi class="secno">8.6 </bdi>
                            <span>个性化</span>
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#direct-individualization"><bdi
                                        class="secno">8.6.1 </bdi>
                                    <span>直接个性化</span>
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#app-assisted-individualization"><bdi
                                        class="secno">8.6.2 </bdi>
                                    <span>应用辅助的个性化</span>
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#support-multiple-keys"><bdi class="secno">8.7 </bdi>
                            支持多个密钥
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#initialization-data-type-support-requirements"><bdi
                                class="secno">8.8 </bdi>
                            初始化数据类型支持
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#licenses-generated-are-independent-of-content-type"><bdi class="secno">8.8.1
                                    </bdi>
                                    生成的许可证与内容类型无关
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#support-extraction-from-media-data"><bdi
                                        class="secno">8.8.2 </bdi>
                                    支持从媒体数据中提取
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-requirements"><bdi class="secno">8.9 </bdi>
                            支持的媒体
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#unencrypted-container"><bdi
                                        class="secno">8.9.1 </bdi>
                                    未加密容器
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interoperably-encrypted"><bdi
                                        class="secno">8.9.2 </bdi>
                                    可互操作加密
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#unencrypted-in-band-support-content"><bdi
                                        class="secno">8.9.3 </bdi>
                                    未加密的带内支持内容
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#common-key-systems"><bdi class="secno">9. </bdi>
                    常见密钥系统
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#clear-key"><bdi class="secno">9.1 </bdi>
                            Clear Key
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#clear-key-capabilities"><bdi
                                        class="secno">9.1.1 </bdi>
                                    能力
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-behavior"><bdi class="secno">9.1.2
                                    </bdi>
                                    行为
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-request-format"><bdi
                                        class="secno">9.1.3 </bdi>
                                    许可证请求格式
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#clear-key-request-format-example"><bdi
                                                class="secno">9.1.3.1 </bdi>
                                            示例
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-license-format"><bdi
                                        class="secno">9.1.4 </bdi>
                                    许可证格式
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#clear-key-license-format-example"><bdi
                                                class="secno">9.1.4.1 </bdi>
                                            示例
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-release-format"><bdi
                                        class="secno">9.1.5 </bdi>
                                    许可证释放格式
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#clear-key-release-format-example-1"><bdi class="secno">9.1.5.1 </bdi>
                                            反映许可证销毁记录的示例消息
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#clear-key-release-ack-format"><bdi
                                        class="secno">9.1.6 </bdi>
                                    许可证释放确认格式
                                </a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#clear-key-release-ack-format-example"><bdi class="secno">9.1.6.1
                                            </bdi>
                                            示例
                                        </a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#using-base64url"><bdi class="secno">9.1.7
                                    </bdi>
                                    使用 base64url
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security"><bdi class="secno">10. </bdi>
                    安全性
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#input-data-security"><bdi class="secno">10.1 </bdi>
                            输入数据攻击与漏洞
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#cdm-security"><bdi class="secno">10.2 </bdi>
                            CDM 攻击与漏洞
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#network-attacks"><bdi class="secno">10.3 </bdi>
                            网络攻击
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#potential-attacks"><bdi class="secno">10.3.1
                                    </bdi>
                                    潜在攻击
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations"><bdi class="secno">10.3.2 </bdi>
                                    缓解措施
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#iframe-attacks"><bdi class="secno">10.4 </bdi>
                            <code>iframe</code> 攻击
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#potential-attacks-0"><bdi class="secno">10.4.1
                                    </bdi>
                                    潜在攻击
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-0"><bdi class="secno">10.4.2
                                    </bdi>
                                    缓解措施
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#cross-directory-attacks"><bdi class="secno">10.5
                            </bdi>
                            跨目录攻击
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy"><bdi class="secno">11. </bdi>
                    隐私
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#privacy-disclosure"><bdi class="secno">11.1 </bdi>
                            EME 与密钥系统披露的信息
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#privacy-fingerprinting"><bdi class="secno">11.2 </bdi>
                            指纹识别
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#privacy-leakage"><bdi class="secno">11.3 </bdi>
                            信息泄露
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns"><bdi class="secno">11.3.1 </bdi>
                                    关注点
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-1"><bdi class="secno">11.3.2
                                    </bdi>
                                    缓解措施
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#user-tracking"><bdi class="secno">11.4 </bdi>
                            用户跟踪
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns-0"><bdi class="secno">11.4.1 </bdi>
                                    关注点
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-2"><bdi class="secno">11.4.2
                                    </bdi>
                                    缓解措施
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#privacy-storedinfo"><bdi class="secno">11.5 </bdi>
                            存储在用户设备上的信息
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns-1"><bdi class="secno">11.5.1 </bdi>
                                    关注点
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-3"><bdi class="secno">11.5.2
                                    </bdi>
                                    缓解措施
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#incomplete-clearing"><bdi class="secno">11.6 </bdi>
                            数据未完全清除
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#concerns-2"><bdi class="secno">11.6.1 </bdi>
                                    关注点
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#mitigations-4"><bdi class="secno">11.6.2
                                    </bdi>
                                    缓解措施
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#private-browsing"><bdi class="secno">11.7 </bdi>
                            私人浏览模式
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#privacy-secureorigin"><bdi class="secno">11.8 </bdi>
                            安全来源与传输
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">12. </bdi>符合性</a></li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">13. </bdi>
                    示例
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#example-source-and-key-known"><bdi class="secno">13.1
                            </bdi>
                            页面加载时已知源和密钥（Clear Key）
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-selecting-key-system"><bdi class="secno">13.2
                            </bdi>
                            选择受支持的密钥系统并使用来自 “encrypted” 事件的初始化数据
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-mediakeys-before-source"><bdi
                                class="secno">13.3 </bdi>
                            在加载媒体之前创建 MediaKeys
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-using-all-events"><bdi class="secno">13.4
                            </bdi>
                            使用所有事件
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-stored-license"><bdi class="secno">13.5 </bdi>
                            存储的许可证
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#example-getStatusForPolicy"><bdi class="secno">13.6
                            </bdi>
                            预取带有 HDCP 策略的媒体
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">14. </bdi>
                    致谢
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1
                            </bdi>规范性参考文献</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.2
                            </bdi>信息性参考文献</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                介绍
            </h2><a class="self-link" href="#introduction" aria-label="第 1 节的永久链接。"></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            本规范允许脚本选择内容保护机制、控制许可证/密钥交换，并执行自定义许可证管理算法。它支持广泛的用例，而不要求每个用户代理针对每个用例进行客户端修改。这使内容提供者能够为所有设备开发单一的应用解决方案。
        </p>
        <p>
            支持的内容按照容器特定的“通用加密（common encryption）”规范进行加密，从而在不同密钥系统之间可重用。支持的内容具有未加密的容器，便于将元数据提供给应用程序，并保持与其它 <a
                data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-2"><code>HTMLMediaElement</code></a> 功能的兼容性。
        </p>
        <p>
            实现者应关注本规范中描述的安全性和隐私威胁与关注点的缓解措施。特别地，安全与隐私的规范性要求在没有对 <a data-link-type="dfn|abstract-op"
                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-1">Key System</a>
            及其实现的安全与隐私属性的了解时无法满足。<a href="#implementation-requirements" class="sec-ref"><bdi class="secno">8. </bdi>
                实现要求</a> 包含与底层 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-2">Key System</a> 实现的集成和使用相关的安全与隐私条款。<a href="#security" class="sec-ref"><bdi
                    class="secno">10. </bdi>
                安全性</a> 侧重于外部威胁，例如输入数据或网络攻击。<a href="#privacy" class="sec-ref"><bdi class="secno">11. </bdi>
                隐私</a> 侧重于用户特定信息的处理并为用户提供对其隐私的充分控制。
        </p>
        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注</span></div>
            <p class="">
                尽管本规范与媒体数据来源无关，但作者应意识到许多实现仅支持解密通过媒体源扩展（Media Source Extensions）提供的媒体数据 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-media-source"
                        title="Media Source Extensions™">MEDIA-SOURCE</a></cite>]。
            </p>
        </div>
        <p>
            使用该 API 实现的通用栈示例如下所示。该图显示了一个示例流程；也可以有其他组合的 API 调用和事件。
        </p><img src="https://www.w3.org/TR/encrypted-media-2/stack_overview.svg" alt="使用所提议 API 实现的通用栈示意图"
            height="700">
    </section>
    <section id="definitions">
        <div class="header-wrapper">
            <h2 id="x2-definitions"><bdi class="secno">2. </bdi>
                定义
            </h2><a class="self-link" href="#definitions" aria-label="第 2 节的永久链接。"></a>
        </div>

        <dl>
            <dt>
                <dfn class="export" data-lt="CDM|Content Decryption Module (CDM)" data-export="" data-plurals="cdms"
                    id="dfn-cdm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">内容解密模块（CDM）</dfn>
            </dt>
            <dd>
                <p>
                    内容解密模块（CDM）是客户端组件，提供一个或多个 <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-3">Key Systems</a> 的功能，包括解密。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>注</span></div>
                    <p class="">
                        实现可能会将 CDM 的实现分离开来，也可能将其视为与用户代理不可分。对此 API 和应用程序这是透明的。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-plurals="key systems" id="dfn-key-system" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Key System</dfn>
            </dt>
            <dd>
                <p>
                    Key System 是对解密机制和/或内容保护提供方的通用称呼。Key System 字符串为 Key System 提供唯一标识。用户代理使用它们来选择 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-1">CDM</a> 并识别密钥相关事件的来源。用户代理 <em class="rfc2119">MUST</em> 支持 <a
                        data-link-type="dfn|abstract-op" href="#dfn-common-key-systems" class="internalDFN"
                        id="ref-for-dfn-common-key-systems-1">常见密钥系统</a>。用户代理 <em class="rfc2119">MAY</em> 还可提供额外的具有对应
                    Key System 字符串的 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-2">CDMs</a>。
                </p>
                <p>
                    Key System 字符串始终为反向域名。Key System 字符串使用区分大小写的匹配进行比较。建议 <a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-3">CDMs</a> 使用简单的小写 ASCII key system
                    字符串。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>注</span></div>
                    <p class="">
                        例如，“com.example.somesystem”。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>注</span></div>
                    <p class="">
                        在给定系统内（示例中的 “somesystem”），子系统由密钥系统提供方确定并定义。例如，“com.example.somesystem.1”和
                        “com.example.somesystem.1_5”。密钥系统提供方应记住这些字符串将用于比较和发现，因此应便于比较且结构保持相对简单。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="dfn-key-session" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Key Session</dfn>
            </dt>
            <dd>
                <p>
                    Key Session，或简称 Session，提供与 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-4">CDM</a> 的消息交换上下文，结果是密钥被提供给 <a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-5">CDM</a>。会话以 <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-1"><code>MediaKeySession</code></a> 对象体现。每个 Key Session 与在 <a
                        data-link-type="idl" data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-generaterequest-1"><code>generateRequest</code></a><code>()</code>
                    调用中提供的单个 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-1">Initialization Data</a> 相关联。
                </p>
                <p>
                    每个 Key Session 与单个 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                        class="internalDFN" id="ref-for-dom-mediakeys-1"><code>MediaKeys</code></a> 对象相关联，且只有与该 <a
                        data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-2"><code>MediaKeys</code></a> 对象关联的媒体元素才可访问与该会话关联的密钥。其它 <a
                        data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-3"><code>MediaKeys</code></a> 对象、<a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-6">CDM</a> 实例以及媒体元素 <em
                        class="rfc2119">MUST NOT</em> 访问该密钥会话或使用其密钥。会话及其包含的密钥在会话关闭后（包括当 <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-2"><code>MediaKeySession</code></a> 对象被销毁时）不再 <a
                        data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption" class="internalDFN"
                        id="ref-for-dfn-usable-for-decryption-1">可用于解密</a>。
                </p>
                <p>
                    所有与 Key Session 相关且未被显式存储的许可证和密钥在 Key Session 关闭时 <em class="rfc2119">MUST</em> 被销毁。
                </p>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-1">Key IDs</a> <em class="rfc2119">MUST</em> 在会话内唯一。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="session ids" id="dfn-session-id" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Session ID</dfn>
            </dt>
            <dd>
                <p>
                    Session ID 是由 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-7">CDM</a> 生成的唯一字符串标识符，应用可用它来识别 <a data-link-type="idl"
                        data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-3"><code>MediaKeySession</code></a> 对象。
                </p>
                <p>
                    每次当用户代理与 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-8">CDM</a> 成功创建新会话时，都会生成一个新的 Session ID。
                </p>
                <p>
                    每个 Session ID 在创建它的浏览上下文中 <em class="rfc2119">SHALL</em> 是唯一的。对于 <a data-link-type="dfn|abstract-op"
                        href="#dfn-is-persistent-session-type" class="internalDFN"
                        id="ref-for-dfn-is-persistent-session-type-1">Is persistent session type?</a> 算法返回
                    <code>true</code> 的会话类型，Session ID 在时间上（包括跨浏览会话）在该 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> 内 <em
                        class="rfc2119">MUST</em> 保持唯一。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>注</span></div>
                    <p class="">
                        底层内容保护协议不一定需要支持 Session ID。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="key(s)|Key" id="dfn-key-s" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Key</dfn>
            </dt>
            <dd>
                <p>
                    除非另有说明，key 指可用于解密 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> 中区块的解密密钥。每个此类密钥由 <a
                        data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-2">key ID</a> 唯一标识。密钥与用于将其提供给 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-9">CDM</a> 的 <a data-link-type="dfn|abstract-op" data-lt="key session"
                        href="#dfn-key-session" class="internalDFN" id="ref-for-dfn-key-session-1">session</a>
                    相关联。（相同密钥可存在于多个会话中。）这些密钥 <em class="rfc2119">MUST</em> 仅通过 <a data-link-type="idl"
                        data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-1"><code>update</code></a><code>()</code> 调用提供给 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-10">CDM</a>。（它们稍后可以作为存储会话数据的一部分通过 <a data-link-type="idl" data-lt="load()"
                        href="#dom-mediakeysession-load" class="internalDFN"
                        id="ref-for-dom-mediakeysession-load-1"><code>load</code></a><code>()</code> 加载。）
                </p>
                <div class="note" role="note" id="issue-container-generatedID-4">
                    <div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>注</span></div>
                    <p class="">
                        作者 <em class="rfc2119">SHOULD</em> 对每组需要执行显著不同策略的流使用不同的密钥（和 key
                        ID）。例如，如果两个视频分辨率之间的策略可能不同，则包含一种分辨率的流不应使用用于另一种分辨率的密钥进行加密。对于加密的情况，音频流 <em class="rfc2119">SHOULD
                            NOT</em> 与任何视频流使用相同的密钥。这是确保在客户端之间执行和兼容的唯一方法。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn id="dfn-usable-for-decryption" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">可用于解密</dfn>
            </dt>
            <dd>
                <p>
                    如果 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-11">CDM</a> 确定某密钥当前可用于解密一个或多个 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> 的区块，则该密钥被视为可用于解密。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-5">
                    <div role="heading" class="note-title marker" id="h-note-5" aria-level="3"><span>注</span></div>
                    <p class="">
                        例如，如果密钥的许可证已过期，则该密钥不可用于解密。即使许可证未过期，如果其它使用条件（例如输出保护）当前未满足，该密钥也不可用于解密。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="export" data-export="" data-lt="Decryption key ID|Key ID" data-plurals="key ids"
                    id="dfn-decryption-key-id" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Key ID</dfn>
            </dt>
            <dd>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-s" class="internalDFN"
                        id="ref-for-dfn-key-s-1">key</a> 关联一个 key ID，该 key ID 是一系列八位字节并能唯一标识该密钥。容器指定可解密媒体数据中某区块或一组区块的密钥的
                    ID。<a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-2">Initialization Data</a> <em class="rfc2119">MAY</em>
                    包含用于识别解密媒体数据所需密钥的 key ID(s)。然而，并不要求 Initialization Data 包含媒体数据或媒体资源中使用的任何或所有 key ID。提供给 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-12">CDM</a> 的 <a data-link-type="dfn|abstract-op" href="#dfn-license"
                        class="internalDFN" id="ref-for-dfn-license-1">许可证</a> 将每个密钥与一个 key ID 关联，以便 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-13">CDM</a> 在解密加密的媒体数据区块时选择适当的密钥。
                </p>
            </dd>
            <dt>
                <dfn data-lt="Known|Known Key" data-plurals="known keys" id="dfn-known" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">已知密钥（Known Key）</dfn>
            </dt>
            <dd>
                <p>
                    如果 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-14">CDM</a> 的会话实现包含关于某密钥的任何信息——特别是 <a data-link-type="dfn|abstract-op"
                        href="#dfn-decryption-key-id" class="internalDFN" id="ref-for-dfn-decryption-key-id-3">key
                        ID</a> ——则该密钥被视为为会话所知，无论该密钥是否可用或其值是否已知。已知密钥通过 <a data-link-type="idl"
                        href="#dom-mediakeysession-keystatuses" class="internalDFN"
                        id="ref-for-dom-mediakeysession-keystatuses-1"><code>keyStatuses</code></a> 属性暴露。
                </p>
                <p>
                    即使密钥变得不可用，例如由于 <a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                        id="ref-for-dfn-expiration-1">过期</a>，或如果它们被移除但存在 <a data-link-type="dfn|abstract-op"
                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                        id="ref-for-dfn-record-s-of-license-destruction-1">许可证销毁记录</a>，这些密钥仍被视为已知。只有当它们被显式从会话中移除并且任何许可证释放消息被确认后，密钥才变为未知。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-6">
                    <div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>注</span></div>
                    <p class="">
                        例如，如果一次 <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysession-update-2"><code>update</code></a><code>()</code>
                        调用提供了不包含该密钥的新许可证并包含替换先前包含该密钥的许可证的指示，则该密钥可能变为未知。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-plurals="licenses" id="dfn-license" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">许可证（License）</dfn>
            </dt>
            <dd>
                <p>
                    许可证是密钥系统特定的状态信息，包含一个或多个 <a data-link-type="dfn|abstract-op" href="#dfn-key-s" class="internalDFN"
                        id="ref-for-dfn-key-s-3">密钥</a>，每个密钥都与一个 <a data-link-type="dfn|abstract-op"
                        href="#dfn-decryption-key-id" class="internalDFN" id="ref-for-dfn-decryption-key-id-4">key
                        ID</a> 关联，并可能包含关于密钥使用的其它信息。
                </p>
            </dd>
            <dt id="initialization-data">
                <dfn class="export" data-export="" id="dfn-initialization-data" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Initialization Data</dfn>
            </dt>
            <dd>
                <div class="note" role="note" id="issue-container-generatedID-7">
                    <div role="heading" class="note-title marker" id="h-note-7" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-4">Key Systems</a>
                        通常在构造许可证请求消息之前需要一段包含待解密流信息的初始化数据块。该块可以是一个简单的密钥或内容 ID，或包含此类信息的更复杂结构。它 <em
                            class="rfc2119">SHOULD</em> 始终允许唯一标识解密内容所需的 <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-s" class="internalDFN" id="ref-for-dfn-key-s-4">key(s)</a>。该初始化信息 <em
                            class="rfc2119">MAY</em> 通过某些应用特定方式获取或随媒体数据提供。
                    </p>
                </div>
                <p>
                    Initialization Data 是一个通用术语，表示容器特定的数据，CDM 用它来生成许可证请求。
                </p>
                <p>
                    初始化数据的格式取决于容器类型，且容器 <em class="rfc2119">MAY</em> 支持多种初始化数据格式。<dfn class="export" data-export=""
                        id="dfn-initialization-data-type" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Initialization Data Type</dfn> 是一个字符串，用于指示随附 Initialization Data
                    的格式。Initialization Data Type 字符串始终区分大小写匹配。建议 Initialization Data Type 字符串使用小写 ASCII 字符串。
                </p>
                <p>
                    <cite><a data-matched-text="[[[EME-INITDATA-REGISTRY]]]"
                            href="https://www.w3.org/TR/eme-initdata-registry/">Encrypted Media Extensions
                            Initialization Data Format Registry</a></cite> [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-eme-initdata-registry"
                            title="Encrypted Media Extensions Initialization Data Format Registry">EME-INITDATA-REGISTRY</a></cite>]
                    提供了从 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                        id="ref-for-dfn-initialization-data-type-1">Initialization Data Type</a> 字符串到每种格式规范的映射。
                </p>
                <p>
                    当用户代理在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> 中遇到 Initialization
                    Data 时，它将该 Initialization Data 提供给应用，置于 <a data-link-type="idl"
                        href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                        id="ref-for-dom-mediaencryptedevent-initdata-1"><code>initData</code></a> 属性中，作为 <a
                        data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-1"><code><code>encrypted</code></code></a> 事件的一部分。用户代理 <em
                        class="rfc2119">MUST NOT</em> 在遇到时存储 Initialization Data 或使用其 <em>内容</em>。应用通过在 <a
                        data-link-type="idl" data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-generaterequest-2"><code>generateRequest</code></a><code>()</code>
                    调用中将 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-3">Initialization Data</a> 提供给 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-16">CDM</a>。用户代理 <em class="rfc2119">MUST NOT</em> 通过其它方式将 <a
                        data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-4">Initialization Data</a> 提供给 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-17">CDM</a>。
                </p>
                <p>
                    Initialization Data 对于给定的一组流或媒体数据 <em class="rfc2119">MUST</em> 是固定值。它 <em class="rfc2119">MUST</em>
                    仅包含与播放给定一组流或媒体数据所需密钥相关的信息。它 <em class="rfc2119">MUST NOT</em> 包含应用数据、客户端特定数据、用户特定数据或可执行代码。
                </p>
                <p>
                    Initialization Data <em class="rfc2119">SHOULD NOT</em> 包含 Key System 特定的数据或值。实现 <em
                        class="rfc2119">MUST</em> 支持 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-eme-initdata-registry"
                            title="Encrypted Media Extensions Initialization Data Format Registry">EME-INITDATA-REGISTRY</a></cite>]
                    中为其支持的每种 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                        class="internalDFN" id="ref-for-dfn-initialization-data-type-2">Initialization Data Type</a>
                    定义的通用格式。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-8">
                    <div role="heading" class="note-title marker" id="h-note-8" aria-level="3"><span>注</span></div>
                    <p class="">
                        不鼓励使用专有格式/内容，且强烈不建议仅支持或仅使用专有格式。专有格式应仅在预先存在的内容或不支持通用格式的预先存在的客户端设备上使用。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="associable|Associable Value" id="dfn-associable" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">可关联值（Associable Value）</dfn>
            </dt>
            <dd>
                <p>
                    如果两个或多个标识符或其它值是相同的，或可以在合理的时间和努力范围内将它们相关联或关联起来，则称它们为可关联的。否则，这些值为 <dfn id="dfn-non-associable"
                        tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">不可关联</dfn>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-9">
                    <div role="heading" class="note-title marker" id="h-note-9" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            例如，以下方式创建的值被认为是 <a data-link-type="dfn|abstract-op" href="#dfn-associable"
                                class="internalDFN" id="ref-for-dfn-associable-1">可关联</a>：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    使用可被轻易逆转的哈希函数。
                                </p>
                            </li>
                            <li>
                                <p>
                                    共享前缀或其它子集。
                                </p>
                            </li>
                            <li>
                                <p>
                                    将随机值 N 替换为 N+10。
                                </p>
                            </li>
                            <li>
                                <p>
                                    将 origin 与固定值进行 XOR（因为这是可以轻易逆转的）。
                                </p>
                            </li>
                        </ul>
                        <p>
                            相比之下，两个完全不相关或在加密学上不可逆（例如使用强加密哈希函数） 的值为 <a data-link-type="dfn|abstract-op"
                                href="#dfn-non-associable" class="internalDFN"
                                id="ref-for-dfn-non-associable-1">不可关联</a>。
                        </p>
                    </div>
                </div>
                <p>
                    如果在合理时间和努力范围内，所述实体或实体集合能够在不依赖其它实体参与的情况下将它们相关联或关联起来，则称两个或多个标识符或其它值为 <dfn
                        id="dfn-associable-by-an-entity" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">可被某实体关联</dfn>。否则，这些值为 <dfn id="dfn-non-associable-by-an-entity" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">不可被某实体关联</dfn>。
                </p>
                <p>
                    如果它们为 <a data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-an-entity"
                        class="internalDFN"
                        id="ref-for-dfn-non-associable-by-an-entity-1">不可被某实体关联</a>，且该实体为包含应用、所有其它应用以及它们使用或通信的服务器在内的集合，则称两个或多个标识符或其它值为
                    <dfn data-lt="non-associable by application|non-associable by the application"
                        data-plurals="non-associable by applications" id="dfn-non-associable-by-application"
                        tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">应用不可关联</dfn>。否则，这些值将被视为 <dfn
                        id="dfn-associable-by-the-application" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">可被应用关联</dfn>，这是被禁止的。
                </p>
            </dd>
            <dt>
                <dfn data-lt="distinctive|Distinctive Value" data-plurals="distinctive values" id="dfn-distinctive"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Distinctive Value（区别性值）</dfn>
            </dt>
            <dd>
                <p>
                    Distinctive Value 是一种值、数据片段、持有某数据的含义或一种可观察的行为或时序，不在大量用户或客户端设备间共享。Distinctive Value 可以存在于内存中或被持久化。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-10">
                    <div role="heading" class="note-title marker" id="h-note-10" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            Distinctive Value 的示例包括但不限于：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-1">Distinctive
                                        Identifiers（区别性标识符）</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-1">Distinctive Permanent
                                        Identifiers（区别性永久标识符）</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    其它标识符
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-session-id" class="internalDFN"
                                        id="ref-for-dfn-session-id-1">Session ID</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn|abstract-op" href="#dfn-license" class="internalDFN"
                                        id="ref-for-dfn-license-2">许可证</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    其它会话数据
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-11">
                    <div role="heading" class="note-title marker" id="h-note-11" aria-level="3"><span>注</span></div>
                    <p class="">
                        虽然 Distinctive Value 通常对用户或客户端设备是唯一的，但值不必严格唯一才算区别性。例如，在少量用户之间共享的值仍然可能是区别性的。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="Permanent Identifier(s)|Permanent Identifier" data-plurals="permanent identifiers"
                    id="dfn-permanent-identifier-s" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">永久标识符（Permanent Identifier）</dfn>
            </dt>
            <dd>
                <p>
                    永久标识符是一种以某种方式不可磨灭或对用户而言非平凡以移除、重置或更改的值、数据片段、持有某数据的含义或可观察的行为或时序。这包括但不限于：
                </p>
                <ul>
                    <li>
                        <p>
                            硬件或基于硬件的标识符
                        </p>
                    </li>
                    <li>
                        <p>
                            在出厂时在硬件中预置的值
                        </p>
                    </li>
                    <li>
                        <p>
                            与操作系统安装实例相关或从其派生的值
                        </p>
                    </li>
                    <li>
                        <p>
                            与用户代理安装实例相关或从其派生的值
                        </p>
                    </li>
                    <li>
                        <p>
                            与 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-18">CDM</a> 或其它软件组件相关的值
                        </p>
                    </li>
                    <li>
                        <p>
                            配置文件或类似半永久数据中的值，即使在客户端生成
                        </p>
                    </li>
                    <li>
                        <p>
                            客户端或其它用户账户值
                        </p>
                    </li>
                </ul>
                <p>
                    <dfn data-lt="Distinctive Permanent Identifier(s)|Distinctive Permanent Identifier"
                        data-plurals="distinctive permanent identifiers" id="dfn-distinctive-permanent-identifier-s"
                        tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">区别性永久标识符</dfn> 是一种 <a
                        data-link-type="dfn|abstract-op" href="#dfn-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-permanent-identifier-s-1">永久标识符</a>，且为 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive" class="internalDFN" id="ref-for-dfn-distinctive-1">区别性</a> 的。
                </p>
                <p>
                    当在客户端之外暴露时，区别性永久标识符及其派生或相关值 <em class="rfc2119">MUST</em> 被 <a
                        href="#encrypt-identifiers">加密</a>。区别性永久标识符 <em class="rfc2119">MUST NOT</em>
                    以任何形式（即使是加密形式）暴露给应用。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-12">
                    <div role="heading" class="note-title marker" id="h-note-12" aria-level="3"><span>注</span></div>
                    <p class="">
                        虽然区别性永久标识符通常对用户或客户端设备是唯一的，但它不必严格唯一才算区别性。例如，在少量用户之间共享的区别性永久标识符仍可能是区别性的。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-13">
                    <div role="heading" class="note-title marker" id="h-note-13" aria-level="3"><span>注</span></div>
                    <p class="">
                        区别性永久标识符并不是 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                            class="internalDFN"
                            id="ref-for-dfn-distinctive-identifier-s-2">区别性标识符</a>，因为它不是在本规范范围内派生或生成的。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-14">
                    <div role="heading" class="note-title marker" id="h-note-14" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-1"><code>distinctiveIdentifier</code></a>
                        控制是否允许使用区别性永久标识符。具体地，只有当用于创建 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                            href="#dom-mediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-mediakeysystemaccess-1"><code>MediaKeySystemAccess</code></a> 的 <a
                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-2"><code>distinctiveIdentifier</code></a>
                        成员的值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-required-1"><code>required</code></a>" 时，才允许使用区别性永久标识符。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="Distinctive Identifier(s)|Distinctive Identifier" data-plurals="distinctive identifiers"
                    id="dfn-distinctive-identifier-s" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">区别性标识符（Distinctive Identifier）</dfn>
            </dt>
            <dd>
                <div class="note" role="note" id="issue-container-generatedID-15">
                    <div role="heading" class="note-title marker" id="h-note-15" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            区别性标识符是一个值（包括不透明或加密形式），外部实体可以将该值与其它值相关联或匹配，从而超出用户在 Web 平台上可能预期的关联范围（例如 cookie
                            和其它站点数据）。例如，在以下情形下的值即为区别性标识符：可被应用以外的实体跨 a) <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a>、b)
                            <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-1">浏览配置文件</a> 或 c) 浏览会话
                            关联，即使用户尝试通过清除浏览数据来保护其隐私，或该值不易被用户打破这种关联。特别地，如果某中心服务器（例如个性化服务器）能够将值在各 origin
                            间关联，比如因为个性化请求包含了共同的值，或者因为个性化请求中提供的值即使在尝试清除浏览数据后仍可被该服务器关联，那么该值即为区别性标识符。可能导致此类情况的原因包括在个性化过程中使用了
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-2">区别性永久标识符</a>。
                        </p>
                        <p>
                            暴露给应用的区别性标识符，即使以加密形式，<em class="rfc2119">MUST</em> 遵守 <a
                                href="#identifier-requirements">标识符要求</a>，包括被 <a href="#encrypt-identifiers">加密</a>、<a
                                href="#per-origin-per-profile-identifiers">在每个 origin 与配置文件中唯一</a>，并且可 <a
                                href="#allow-identifiers-cleared">被清除</a>。
                        </p>
                        <p>
                            虽然区别性标识符的实例化或使用由应用对本规范中定义的 API 的使用触发，但触发与区别性标识符相关的条件并不要求该标识符必须被提供给应用。（区别性永久标识符 <em
                                class="rfc2119">MUST NOT</em> 以任何形式提供给应用，包括不透明或加密形式。）
                        </p>
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-16">
                    <div role="heading" class="note-title marker" id="h-note-16" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-3"><code>distinctiveIdentifier</code></a>
                        控制是否允许使用区别性标识符。具体地，仅当用于创建 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                            href="#dom-mediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-mediakeysystemaccess-2"><code>MediaKeySystemAccess</code></a> 的 <a
                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-4"><code>distinctiveIdentifier</code></a>
                        成员的值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-required-2"><code>required</code></a>" 时，才允许使用区别性标识符。
                    </p>
                </div>
                <p>
                    区别性标识符是满足以下所有条件的值、数据片段、持有某数据的含义或可观察的行为或时序：
                </p>
                <ul>
                    <li>
                        <p>
                            它是 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                                id="ref-for-dfn-distinctive-2">区别性</a> 的。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-17">
                            <div role="heading" class="note-title marker" id="h-note-17" aria-level="3">
                                <span>注</span>
                            </div>
                            <p class="">
                                虽然区别性标识符通常对单个用户或客户端设备是唯一的，但标识符不必严格唯一才算区别性。例如，少量用户共享的标识符仍可能是区别性的。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            它、关于它的信息或从它派生或与它相关的值被暴露，即使是加密形式，也会在客户端之外被暴露。这包括但不限于将其提供给应用和/或许可证、<a
                                data-link-type="dfn|abstract-op" href="#dfn-individualization" class="internalDFN"
                                id="ref-for-dfn-individualization-2">个性化</a> 或其它服务器。
                        </p>
                    </li>
                    <li>
                        <p>
                            它具有下列一种或多种属性：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    它是从一个或多个 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-4">区别性永久标识符</a> 派生的。
                                </p>
                            </li>
                            <li>
                                <p>
                                    生成、<a data-link-type="dfn|abstract-op" href="#dfn-individualization"
                                        class="internalDFN"
                                        id="ref-for-dfn-individualization-3">个性化</a>、预置或产生该值的其它过程涉及一个或多个 <a
                                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-5">区别性永久标识符</a> 或另一个区别性标识符。
                                </p>
                            </li>
                            <li>
                                <p>
                                    它是 <a href="#allow-identifiers-cleared">可清除</a> 的，但不是与 cookies 和其它站点数据一并清除的那种。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-18">
                                    <div role="heading" class="note-title marker" id="h-note-18" aria-level="3">
                                        <span>注</span>
                                    </div>
                                    <p class="">
                                        例如，通过某个用户代理外部的机制，例如操作系统级别的机制。
                                    </p>
                                </div>
                            </li>
                        </ul>
                        <div class="note" role="note" id="issue-container-generatedID-19">
                            <div role="heading" class="note-title marker" id="h-note-19" aria-level="3">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    公开给应用的值在规范性上被禁止的其它属性包括但不限于：
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            它是 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                                id="ref-for-dfn-distinctive-permanent-identifier-s-6">区别性永久标识符</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            它 <em>不是</em> <a href="#allow-identifiers-cleared">可清除</a> 的。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            清除标识符后创建的值可能会被应用 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-associable-by-the-application" class="internalDFN"
                                                id="ref-for-dfn-associable-by-the-application-1">与之前的值关联</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            对不同 origin 的值可能 <a href="#per-origin-per-profile-identifiers">不是每
                                                origin/每配置文件唯一</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            不同 origin 的值可能被应用 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-associable-by-the-application" class="internalDFN"
                                                id="ref-for-dfn-associable-by-the-application-2">关联</a>。
                                        </p>
                                    </li>
                                </ul>
                                <p>
                                    此类在规范上被禁止的值的示例包括但不限于：
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            用于所有 origin 的单一基于硬件的值。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            用于所有 origin 的单一基于随机的值。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            从个性化过程获得的单一值，在所有 origin 中使用。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            包含上述全部或部分内容的值。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            用于多个但不是全部 origin 的单一值。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            用于域上所有 origin 的单一值。（标识符必须为每个 <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                            的。）
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            预置的特定 origin 的值。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            通过可轻易逆转的方式生成的值，因此被视为可被应用 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-associable-by-the-application" class="internalDFN"
                                                id="ref-for-dfn-associable-by-the-application-3">关联</a>，无论是在客户端生成还是涉及 <a
                                                data-link-type="dfn|abstract-op" href="#dfn-individualization"
                                                class="internalDFN" id="ref-for-dfn-individualization-5">个性化</a> 过程。例如，将
                                            origin 与固定值进行 XOR 或以其它方式整合（部分）。
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="note" role="note" id="issue-container-generatedID-20">
                    <div role="heading" class="note-title marker" id="h-note-20" aria-level="3"><span>注</span></div>
                    <p class="">
                        虽然区别性标识符通常可被生成它们的实体所 <a data-link-type="dfn|abstract-op" data-lt="associable by an entity"
                            href="#dfn-associable-by-an-entity" class="internalDFN"
                            id="ref-for-dfn-associable-by-an-entity-4">关联</a>，但它们 <em class="rfc2119">MUST</em> 对应用而言 <a
                            data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                            class="internalDFN"
                            id="ref-for-dfn-non-associable-by-application-1">不可关联</a>。换句话说，此类关联或匹配仅可由最初生成区别性标识符值的实体（例如
                        <a data-link-type="dfn|abstract-op" href="#dfn-individualization" class="internalDFN"
                            id="ref-for-dfn-individualization-6">个性化</a> 服务器）完成。拥有访问 <a data-link-type="dfn|abstract-op"
                            href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                            id="ref-for-dfn-distinctive-permanent-identifier-s-7">区别性永久标识符</a> 的实体 <em
                            class="rfc2119">MUST NOT</em> 将此能力暴露给应用，否则会使生成的区别性标识符对应用变得 <a
                            data-link-type="dfn|abstract-op" href="#dfn-associable-by-the-application"
                            class="internalDFN" id="ref-for-dfn-associable-by-the-application-4">可关联</a>，并且 <em
                            class="rfc2119">SHOULD</em> 注意避免向其它实体或第三方暴露此类关联能力。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-21">
                    <div role="heading" class="note-title marker" id="h-note-21" aria-level="3"><span>注</span></div>
                    <div class="">
                        <p>
                            区别性标识符的示例包括但不限于：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    在密钥请求中包含的一系列字节，该序列与其它客户端设备包含的不同，并基于或直接/间接使用了 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-8">区别性永久标识符</a>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    在密钥请求中包含的公钥，该公钥与其它客户端设备请求中包含的公钥不同，并基于或直接/间接使用了 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-9">区别性永久标识符</a>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    证明拥有私钥（例如，通过签署某些数据），其它客户端设备没有该私钥，并基于或直接/间接使用了 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-10">区别性永久标识符</a>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    该私钥的标识符。
                                </p>
                            </li>
                            <li>
                                <p>
                                    用于派生另一个即使第一个值不直接暴露仍会被暴露的值。
                                </p>
                            </li>
                            <li>
                                <p>
                                    从另一个区别性标识符派生的值。
                                </p>
                            </li>
                            <li>
                                <p>
                                    在与 <a data-link-type="dfn|abstract-op" href="#dfn-individualization"
                                        class="internalDFN" id="ref-for-dfn-individualization-7">个性化</a>
                                    服务器一起报告的随机值，或在提供了 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-11">区别性永久标识符</a> 后由此类服务器提供的值。
                                </p>
                            </li>
                            <li>
                                <p>
                                    从出厂时预置在硬件设备中的唯一值派生的值。
                                </p>
                            </li>
                            <li>
                                <p>
                                    从硬件设备中的唯一硬件值（例如 MAC 地址或序列号）或软件值（例如操作系统安装实例或操作系统用户帐户名）派生的值。
                                </p>
                            </li>
                            <li>
                                <p>
                                    从包含在 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-19">CDM</a> 二进制文件或 CDM 使用的其它文件中的唯一值派生的值。
                                </p>
                            </li>
                        </ul>
                        <p>
                            并非 Distinctive Identifier 的示例包括：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    在给定 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-21">CDM</a> 版本的所有副本中共享的公钥（如果已安装基数很大）。
                                </p>
                            </li>
                            <li>
                                <p>
                                    唯一但仅在一个会话中使用的 nonce 或短期密钥。
                                </p>
                            </li>
                            <li>
                                <p>
                                    未被暴露（即使是派生或类似方式）到客户端之外的值，包括通过 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-individualization" class="internalDFN"
                                        id="ref-for-dfn-individualization-8">个性化</a> 或类似方式。
                                </p>
                            </li>
                            <li>
                                <p>
                                    在视频管道与 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-22">CDM</a> 之间用于证明的设备唯一密钥，当 <a
                                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-23">CDM</a>
                                    不允许这些证明继续流向应用，而是使用不会构成区分性标识符的新密钥自行做新的证明时，该值不构成区别性标识符。
                                </p>
                            </li>
                            <li>
                                <p>
                                    与浏览数据（例如 cookies）一并完全清除/可清除的值，之后它将被一个 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-non-associable" class="internalDFN"
                                        id="ref-for-dfn-non-associable-2">不可关联</a> 的值替换（不仅仅是对应用 <a
                                        data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                                        class="internalDFN"
                                        id="ref-for-dfn-non-associable-by-application-2">不可关联</a>），并且满足下列一项或多项条件：
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            在生成该值时未涉及任何 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                                id="ref-for-dfn-distinctive-permanent-identifier-s-13">区别性永久标识符</a>
                                            或区别性标识符。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            它是一个在没有系统输入的情况下生成的随机值。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            它是由服务器提供的值，且在生成时未使用或未知任何其它区别性标识符。
                                        </p>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </dd>
            <dt>
                <dfn class="lint-ignore" id="dfn-use-of-distinctive-identifiers-and-distinctive-permanent-identifiers"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">区别性标识符与区别性永久标识符的使用</dfn>
            </dt>
            <dd>
                <p>
                    如果某实现、配置、实例或对象在其生命周期内或相关实体的生命周期内在客户端之外暴露（即使以加密形式）一个或多个 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-3">区别性标识符</a>、有关它们的信息或从它们派生或与它们相关的值，则称其 <dfn
                        data-lt="use Distinctive Identifier(s)|use of Distinctive Identifier(s)|uses Distinctive Identifier(s)"
                        id="dfn-use-distinctive-identifier-s" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">使用了区别性标识符</dfn>。这包括但不限于将此类值提供给应用和/或许可证、<a data-link-type="dfn|abstract-op"
                        href="#dfn-individualization" class="internalDFN" id="ref-for-dfn-individualization-10">个性化</a>
                    或其它服务器。
                </p>
                <p>
                    如果某实现、配置、实例或对象在其生命周期内或相关实体的生命周期内在客户端之外暴露（即使以加密形式）一个或多个 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-permanent-identifier-s-14">区别性永久标识符</a>、有关它们的信息或从它们派生或与它们相关的值，则称其
                    <dfn data-lt="use Distinctive Permanent Identifier(s)|using Distinctive Permanent Identifier(s)|uses Distinctive Permanent Identifier(s)"
                        id="dfn-use-distinctive-permanent-identifier-s" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">使用了区别性永久标识符</dfn>。此类值 <em class="rfc2119">MUST NOT</em> 提供给应用。
                </p>
                <p>
                    如果某实现、配置、实例或对象 <a data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-identifier-s-1">使用了区别性标识符</a> 和/或 <a
                        data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-permanent-identifier-s"
                        class="internalDFN"
                        id="ref-for-dfn-use-distinctive-permanent-identifier-s-1">使用了区别性永久标识符</a>，则称其 <dfn
                        data-lt="use Distinctive Identifier(s) or Distinctive Permanent Identifier(s)|use of Distinctive Identifier(s) or Distinctive Permanent Identifier(s)|using Distinctive Identifier(s) or Distinctive Permanent Identifier(s)|uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                        id="dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">使用了区别性标识符或区别性永久标识符</dfn>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-22">
                    <div role="heading" class="note-title marker" id="h-note-22" aria-level="3"><span>注</span></div>
                    <p class="">
                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-5"><code>distinctiveIdentifier</code></a>
                        控制是否允许使用 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-4">区别性标识符</a> 和 <a
                            data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                            class="internalDFN"
                            id="ref-for-dfn-distinctive-permanent-identifier-s-15">区别性永久标识符</a>。具体地，只有当用于创建 <a
                            data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemaccess-3"><code>MediaKeySystemAccess</code></a> 的 <a
                            data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-6"><code>distinctiveIdentifier</code></a>
                        成员的值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-required-3"><code>required</code></a>" 时，才允许使用这些标识符。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn class="lint-ignore" id="dfn-cross-origin-limitations" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">跨源限制（Cross Origin Limitations）</dfn>
            </dt>
            <dd>
                <p>
                    在播放期间，嵌入的媒体数据会在嵌入页面的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                    下暴露给脚本。为了能在 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-5">Initialization Data</a> 在 <a data-link-type="idl"
                        data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-2"><code><code>encrypted</code></code></a> 事件中被提供，<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> <em
                        class="rfc2119">MUST</em> 与嵌入页面保持 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#cors-same-origin">CORS-same-origin</a>。如果媒体数据与嵌入文档为跨源，作者
                    <em class="rfc2119">SHOULD</em> 在 <a data-link-type="idl" data-lt="HTMLMediaElement"
                        href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-3"><code>HTMLMediaElement</code></a> 上使用 <a
                        data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-crossorigin"><code>crossOrigin</code></a>
                    属性，并在媒体数据响应上使用 CORS 头，使其为 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#cors-same-origin">CORS-same-origin</a>。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-mixed-content-limitations" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">混合内容限制（Mixed Content Limitations）</dfn>
            </dt>
            <dd>
                <p>
                    在播放期间，嵌入的媒体数据会在嵌入页面的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                    下暴露给脚本。为了能在 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-6">Initialization Data</a> 在 <a data-link-type="idl"
                        data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-3"><code><code>encrypted</code></code></a> 事件中被提供，<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> <em
                        class="rfc2119">MUST NOT</em> 为 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/mixed-content/#mixed-content">混合内容</a> [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-mixed-content"
                            title="Mixed Content">MIXED-CONTENT</a></cite>]。
                </p>
            </dd>
            <dt>
                <dfn id="dfn-time" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">时间（Time）</dfn>
            </dt>
            <dd>
                <p>
                    时间 <em class="rfc2119">MUST</em> 等价于 ECMAScript 中所表示的时间值（参见 <a class="external"
                        href="https://tc39.github.io/ecma262/#sec-time-values-and-time-range">ECMAScript Time Values and
                        Time Range</a>）[<cite><a class="bibref" data-link-type="biblio" href="#bib-ecma-262"
                            title="ECMAScript Language Specification">ECMA-262</a></cite>]。
                </p>
                <p>
                    如果不存在这样的时间或时间不确定，时间将等于 <code>NaN</code>。它不应具有 <code>Infinity</code> 的值。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-23">
                    <div role="heading" class="note-title marker" id="h-note-23" aria-level="3"><span>注</span></div>
                    <p class="">
                        时间通常表示一个具有毫秒精度的时刻；然而这并不是充分的定义。已定义的时间值与时间范围引用添加了其它重要要求。
                    </p>
                </div>
            </dd>
            <dt>
                <dfn data-lt="expiration|Expiration Time" id="dfn-expiration" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">到期时间（Expiration Time）</dfn>
            </dt>
            <dd>
                <p>
                    指密钥在该时间之后不再 <a data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption"
                        class="internalDFN" id="ref-for-dfn-usable-for-decryption-2">可用于解密</a> 的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-time" class="internalDFN"
                        id="ref-for-dfn-time-1">时间</a>。
                </p>
            </dd>
            <dt>
                <dfn data-plurals="browsing profiles" id="dfn-browsing-profile" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">浏览配置文件（Browsing Profile）</dfn>
            </dt>
            <dd>
                <p>
                    在给定机器上的用户代理可能支持在多种不同上下文、模式或临时状态下执行，这些上下文或模式在对应用可见的状态和数据方面应当独立。特别地，所有存储数据应当是独立的。在本规范中，我们将此类独立上下文或模式称为“浏览配置文件”。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-24">
                    <div role="heading" class="note-title marker" id="h-note-24" aria-level="3"><span>注</span></div>
                    <p class="">
                        此类独立上下文的示例包括用户代理在不同操作系统用户帐户中运行，或用户代理提供在单个帐户下定义多个独立配置文件的能力。
                    </p>
                </div>
            </dd>
        </dl>
    </section>
    <section id="obtaining-access-to-key-systems">
        <div class="header-wrapper">
            <h2 id="x3-obtaining-access-to-key-systems"><bdi class="secno">3. </bdi>
                获取对密钥系统的访问
            </h2><a class="self-link" href="#obtaining-access-to-key-systems" aria-label="第 3 节的永久链接。"></a>
        </div>

        <p>
            本节定义获取 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-5">Key System</a> 访问的机制。在请求中包含能力也允许进行功能检测。
        </p>
        <p>
            当 promise 被拒绝时，算法的步骤将始终中止。
        </p>
        <section id="permissions-policy-integration">
            <div class="header-wrapper">
                <h3 id="x3-1-permissions-policy-integration"><bdi class="secno">3.1 </bdi>
                    权限策略集成
                </h3><a class="self-link" href="#permissions-policy-integration" aria-label="第 3.1 节的永久链接。"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                    href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                    id="ref-for-dom-navigator-requestmediakeysystemaccess-1"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                是由字符串
                <code><dfn id="dfn-encrypted-media" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">encrypted-media</dfn></code>
                标识的 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature">策略控制功能</a>。其
                <a data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist">默认允许列表</a>
                为 <code>'self'</code> [<cite><a class="bibref" data-link-type="biblio" href="#bib-permissions-policy"
                        title="Permissions Policy">PERMISSIONS-POLICY</a></cite>].
            </p>
        </section>
        <section data-dfn-for="Navigator" id="navigator-extension-requestmediakeysystemaccess">
            <div class="header-wrapper">
                <h3 id="x3-2-navigator-extension-requestmediakeysystemaccess"><bdi class="secno">3.2 </bdi>
                    <dfn id="dom-navigator" data-idl="interface" data-title="Navigator" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn"><code>Navigator</code></dfn> 扩展：
                    <code>requestMediaKeySystemAccess()</code>
                </h3><a class="self-link" href="#navigator-extension-requestmediakeysystemaccess"
                    aria-label="第 3.2 节的永久链接。"></a>
            </div>

            <pre class="idl def" id="webidl-571417346"><span class="idlHeader"><a class="self-link" href="#webidl-571417346">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-navigator" id="ref-for-dom-navigator-1"><code>Navigator</code></a> {<span data-idl="" class="idlMethod" id="idl-def-navigator-requestmediakeysystemaccess-keysystem-supportedconfigurations" data-title="requestMediaKeySystemAccess" data-dfn-for="Navigator">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemaccess" class="internalDFN" id="ref-for-dom-mediakeysystemaccess-4"><code>MediaKeySystemAccess</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigator-requestmediakeysystemaccess" id="ref-for-dom-navigator-requestmediakeysystemaccess-2"><code>requestMediaKeySystemAccess</code></a> (<span class="idlType">
      <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">keySystem</span>,<span class="idlType">
      <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemconfiguration" class="internalDFN" id="ref-for-dom-mediakeysystemconfiguration-1"><code>MediaKeySystemConfiguration</code></a>&gt;</span> <span class="idlParamName">supportedConfigurations</span>);</span>
};</span></code></pre>
            <section id="methods">
                <div class="header-wrapper">
                    <h4 id="x3-2-1-methods"><bdi class="secno">3.2.1 </bdi>
                        方法
                    </h4><a class="self-link" href="#methods" aria-label="第 3.2.1 节的永久链接。"></a>
                </div>

                <dl class="methods">
                    <dt>
                        <dfn data-export="" data-dfn-type="method" id="dom-navigator-requestmediakeysystemaccess"
                            data-idl="operation" data-title="requestMediaKeySystemAccess()" data-dfn-for="Navigator"
                            data-type="Promise"
                            data-lt="requestMediaKeySystemAccess()|requestMediaKeySystemAccess(keySystem, supportedConfigurations)"
                            data-local-lt="Navigator.requestMediaKeySystemAccess|Navigator.requestMediaKeySystemAccess()|requestMediaKeySystemAccess"
                            tabindex="0" aria-haspopup="dialog"><code>requestMediaKeySystemAccess()</code></dfn>
                    </dt>
                    <dd>
                        <div class="note" role="note" id="issue-container-generatedID-25">
                            <div role="heading" class="note-title marker" id="h-note-25" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                调用此方法可能会产生<em>用户可见的影响</em>，包括请求用户同意。只有当作者打算使用提供的配置创建并使用一个 <a data-link-type="idl"
                                    data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                    id="ref-for-dom-mediakeys-7"><code>MediaKeys</code></a> 对象时，才应调用此方法。
                            </p>
                        </div>
                        <p>
                            请求对指定的 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-6">Key System</a> 的访问。至少其元素之一指定的配置必须被支持。结果的 <a
                                data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysystemaccess-5"><code>MediaKeySystemAccess</code></a>
                            将对应于第一个满足条件的元素。
                        </p>
                        <p>
                            任何权限检查或用户交互（例如同意提示）<em class="rfc2119">MUST</em> 在解析 promise 之前执行。
                        </p>
                        <p>
                            如果 <code>keySystem</code> 不被支持或不被允许（在至少一个 <code>supportedConfigurations</code> 中），则 promise
                            被拒绝。否则，返回一个新的 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                href="#dom-mediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-mediakeysystemaccess-6"><code>MediaKeySystemAccess</code></a> 对象。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-26">
                            <div role="heading" class="note-title marker" id="h-note-26" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    如 IDL 属性中所示（<code>[SecureContext]</code>），此方法仅在 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">安全上下文</a>
                                    中暴露。
                                </p>
                                <p>
                                    要求安全上下文并不能替代其它与安全和隐私相关的要求与建议。实现 <em class="rfc2119">MUST</em> 满足所有相关要求，并且 <em
                                        class="rfc2119">SHOULD</em> 遵循相关建议，以使在安全上下文中的风险类似。
                                </p>
                            </div>
                        </div>
                        <p>
                            当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行下列步骤：
                        </p>
                        <ol class="method-algorithm">

                            <li>
                                <p>
                                    如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">相关全局对象</a>
                                    的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window">关联
                                        Document</a> 未被允许使用标识为 <a href="#dfn-encrypted-media" class="internalDFN"
                                        data-link-type="dfn"
                                        id="ref-for-dfn-encrypted-media-2"><code><code>encrypted-media</code></code></a>
                                    的功能，则抛出一个 "<a data-link-type="exception" data-lt="SecurityError"
                                        href="https://webidl.spec.whatwg.org/#securityerror"><code>SecurityError</code></a>"
                                    <a data-link-type="interface" data-lt="DOMException"
                                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                                    并中止这些步骤。
                                </p>
                            </li>
                            <li>
                                <p>
                                    如果 <var>keySystem</var> 是空字符串，则返回一个以新建的 <a data-link-type="idl" data-lt="TypeError"
                                        href="#dfn-typeerror" class="internalDFN"
                                        id="ref-for-dfn-typeerror-1"><code><code>TypeError</code></code></a> 拒绝的
                                    promise。
                                </p>
                            </li>
                            <li>
                                <p>
                                    如果 <var>supportedConfigurations</var> 为空，则返回一个以新建的 <a data-link-type="idl"
                                        data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                        id="ref-for-dfn-typeerror-2"><code><code>TypeError</code></code></a> 拒绝的
                                    promise。
                                </p>
                            </li>
                            <li>
                                <p>
                                    令 <var>document</var> 为调用上下文的 <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-document">Document</a>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    令 <var>origin</var> 为 <var>document</var> 的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    令 <var>promise</var> 为一个新的 promise。
                                </p>
                            </li>
                            <li>
                                <p>
                                    并行运行下列步骤：
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            如果 <var>keySystem</var> 不是用户代理支持的 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-key-system" class="internalDFN"
                                                id="ref-for-dfn-key-system-7">Key Systems</a> 之一，
                                            则以 <a data-link-type="idl" data-lt="NotSupportedError"
                                                href="#dfn-notsupportederror" class="internalDFN"
                                                id="ref-for-dfn-notsupportederror-1"><code><code>NotSupportedError</code></code></a>
                                            拒绝 <var>promise</var>。
                                            字符串比较区分大小写。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            令 <var>implementation</var> 为 <var>keySystem</var> 的实现。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            对 <code>supportedConfigurations</code> 中的每个值执行下列操作：
                                        </p>
                                        <ol>
                                            <li>
                                                <p>
                                                    令 <var>candidate configuration</var> 为该值。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    令 <var>supported configuration</var> 为在 <var>implementation</var>、
                                                    <var>candidate configuration</var> 和 <var>origin</var> 上执行
                                                    <a data-link-type="dfn|abstract-op"
                                                        href="#dfn-get-supported-configuration" class="internalDFN"
                                                        id="ref-for-dfn-get-supported-configuration-1">Get Supported
                                                        Configuration</a> 算法的结果。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    如果 <var>supported configuration</var> 不是
                                                    <code>NotSupported</code>，则运行下列步骤：
                                                </p>
                                                <ol>
                                                    <li>
                                                        <p>
                                                            令 <var>access</var> 为一个新的 <a data-link-type="idl"
                                                                data-lt="MediaKeySystemAccess"
                                                                href="#dom-mediakeysystemaccess" class="internalDFN"
                                                                id="ref-for-dom-mediakeysystemaccess-7"><code>MediaKeySystemAccess</code></a>
                                                            对象，并按如下方式初始化它：
                                                        </p>
                                                        <ol>
                                                            <li>
                                                                <p>
                                                                    将 <a data-link-type="idl"
                                                                        href="#dom-mediakeysystemaccess-keysystem"
                                                                        class="internalDFN"
                                                                        id="ref-for-dom-mediakeysystemaccess-keysystem-1"><code>keySystem</code></a>
                                                                    属性设置为 <var>keySystem</var>。
                                                                </p>
                                                            </li>
                                                            <li>
                                                                <p>
                                                                    令 <var>configuration</var> 值为
                                                                    <var>supported
                                                                        configuration</var>。
                                                                </p>
                                                            </li>
                                                            <li>
                                                                <p>
                                                                    令 <var>cdm implementation</var> 值为
                                                                    <var>implementation</var>。
                                                                </p>
                                                            </li>
                                                        </ol>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            使用 <var>access</var> 解析 <var>promise</var> 并中止本算法的并行步骤。
                                                        </p>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        <p>
                                            以 <a data-link-type="idl" data-lt="NotSupportedError"
                                                href="#dfn-notsupportederror" class="internalDFN"
                                                id="ref-for-dfn-notsupportederror-2"><code><code>NotSupportedError</code></code></a>
                                            拒绝 <var>promise</var>。
                                        </p>
                                        <div class="note" role="note" id="issue-container-generatedID-27">
                                            <div role="heading" class="note-title marker" id="h-note-27" aria-level="5">
                                                <span>注</span>
                                            </div>
                                            <p class="">
                                                <code>keySystem</code> 不被支持/允许，或 <code>supportedConfigurations</code>
                                                中的配置均不被支持/允许。
                                            </p>
                                        </div>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    返回 <var>promise</var>。
                                </p>
                            </li>
                        </ol>
                    </dd>
                </dl>
            </section>
            <section id="algorithms">
                <div class="header-wrapper">
                    <h4 id="x3-2-2-algorithms"><bdi class="secno">3.2.2 </bdi>
                        算法
                    </h4><a class="self-link" href="#algorithms" aria-label="第 3.2.2 节的永久链接。"></a>
                </div>

                <section id="get-supported-configuration">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-1-get-supported-configuration"><bdi class="secno">3.2.2.1 </bdi>
                            <dfn class="export" data-export="" id="dfn-get-supported-configuration" tabindex="0"
                                aria-haspopup="dialog" data-dfn-type="dfn">获取受支持的配置（Get Supported Configuration）</dfn>
                        </h5><a class="self-link" href="#get-supported-configuration"
                            aria-label="第 3.2.2.1 节的永久链接。"></a>
                    </div>

                    <p>
                        给定一个 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-8">Key Systems</a> 实现 <var>implementation</var>、
                        <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-2"><code>MediaKeySystemConfiguration</code></a>
                        <var>candidate configuration</var> 和 <var>origin</var>，此算法将根据情况返回受支持的配置或
                        <code>NotSupported</code>。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-28">
                        <div role="heading" class="note-title marker" id="h-note-28" aria-level="6"><span>注</span>
                        </div>
                        <p class="">
                            根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                                    title="Web IDL Standard">WEBIDL</a></cite>]，在 <var>candidate configuration</var>
                            中未识别的字典成员会被忽略并且永远不会到达此算法。因此，它们不能被视为配置的一部分。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-29">
                        <div role="heading" class="note-title marker" id="h-note-29" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            <p>
                                对于某些配置，可能需要获得用户同意或告知用户。用户代理在确定特定配置是否需要同意以及该同意是否也可适用于其他配置时具有一定灵活性。例如，对某一配置的同意也可能意味着对更受限配置的同意。类似地，对某一配置的拒绝也可能意味着对更强大、限制更少的配置的拒绝。
                            </p>
                            <p>
                                受支持的配置（包括受支持的音频和视频编码）可能依赖于可选能力的可用性，例如 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-distinctive-identifier-s" class="internalDFN"
                                    id="ref-for-dfn-distinctive-identifier-s-5">Distinctive Identifier(s)</a>
                                和持久状态。下面的算法会迭代尝试找到既受支持又获得用户同意（或不需要同意）的配置。
                            </p>
                            <p>
                                在适当情况下，用户代理应重用先前的同意响应，至少在 <a data-link-type="idl"
                                    data-lt="requestMediaKeySystemAccess()"
                                    href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                    id="ref-for-dom-navigator-requestmediakeysystemaccess-3"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                算法的持续期间，以避免对类似配置向用户反复请求。
                            </p>
                            <p>
                                下列步骤中的变量 <var>restrictions</var> 表示在执行此算法期间或基于该 origin
                                的持久同意信息而被拒绝用户同意的配置。它用于确定候选配置或累计配置是否已被拒绝同意。若每个派生配置均已被拒绝，则累计配置被视为被拒绝同意。<var>restrictions</var>
                                的内部表示由实现决定。
                            </p>
                        </div>
                    </div>
                    <ol>
                        <li>
                            <p>
                                将 <var>supported configuration</var> 设为 <code>ConsentDenied</code>。
                            </p>
                        </li>
                        <li>
                            <p>
                                初始化 <var>restrictions</var>，表示尚无配置被拒绝用户同意。
                            </p>
                        </li>
                        <li>
                            <p>
                                在 <var>supported configuration</var> 为 <code>ConsentDenied</code> 时重复以下步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>supported configuration</var> 并（若提供）令 <var>restrictions</var> 为在
                                        <var>implementation</var>、
                                        <var>candidate configuration</var>、<var>restrictions</var> 和 <var>origin</var>
                                        上执行 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-get-supported-configuration-and-consent" class="internalDFN"
                                            id="ref-for-dfn-get-supported-configuration-and-consent-1">Get Supported
                                            Configuration and Consent</a> 算法的结果。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>supported configuration</var>。
                            </p>
                        </li>
                    </ol>
                </section>
                <section id="get-supported-configuration-and-consent">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-2-get-supported-configuration-and-consent"><bdi class="secno">3.2.2.2 </bdi>
                            <dfn id="dfn-get-supported-configuration-and-consent" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">获取受支持的配置并征求同意（Get Supported Configuration and Consent）</dfn>
                        </h5><a class="self-link" href="#get-supported-configuration-and-consent"
                            aria-label="第 3.2.2.2 节的永久链接。"></a>
                    </div>

                    <p>
                        给定一个 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-9">Key Systems</a> 实现 <var>implementation</var>、
                        <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-3"><code>MediaKeySystemConfiguration</code></a>
                        <var>candidate configuration</var>、<var>restrictions</var> 和
                        <var>origin</var>，此算法将根据情况返回受支持的配置、<code>NotSupported</code> 或 <code>ConsentDenied</code>，
                        并在 <code>ConsentDenied</code> 的情况下返回 <var>restrictions</var>。
                    </p>
                    <ol>
                        <li>
                            <p>
                                令 <var>accumulated configuration</var> 为一个新的 <a data-link-type="idl"
                                    data-lt="MediaKeySystemConfiguration" href="#dom-mediakeysystemconfiguration"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-4"><code>MediaKeySystemConfiguration</code></a>
                                字典。
                            </p>
                        </li>
                        <li>
                            <p>
                                将 <var>accumulated
                                    configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-label" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-label-1"><code>label</code></a> 成员设置为等于
                                <var>candidate configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-label" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-label-2"><code>label</code></a> 成员。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>candidate
                                    configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-initdatatypes" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-1"><code>initDataTypes</code></a>
                                成员非空，则运行以下步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>supported types</var> 为一个空的 <a data-link-type="interface"
                                            data-lt="DOMString"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>
                                        序列。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        对 <var>candidate configuration</var> 的
                                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-initdatatypes"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-2"><code>initDataTypes</code></a>
                                        成员中的每个值执行下列操作：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                令 <var>initDataType</var> 为该值。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>implementation</var> 支持基于 <var>initDataType</var> 生成请求，则将
                                                <var>initDataType</var> 添加到 <var>supported
                                                    types</var>。字符串比较区分大小写。空字符串永不被支持。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-30">
                                                <div role="heading" class="note-title marker" id="h-note-30"
                                                    aria-level="6"><span>注</span></div>
                                                <p class="">
                                                    <var>initDataType</var> 必须独立于内容类型而被支持，以避免在后续步骤中意外拒绝配置。对
                                                    <var>initDataType</var> 的支持包括许可证生成以及在适当情况下从媒体数据中提取。参见 <a
                                                        href="#initialization-data-type-support-requirements">初始化数据类型支持要求</a>。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>supported types</var> 为空，则返回 <code>NotSupported</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-initdatatypes" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-3"><code>initDataTypes</code></a>
                                        成员设置为 <var>supported types</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>

                        <li>
                            <p>
                                令 <var>distinctive identifier requirement</var> 为 <var>candidate
                                    configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-7"><code>distinctiveIdentifier</code></a>
                                成员的值。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>distinctive identifier requirement</var> 为
                                "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-1"><code>optional</code></a>" 并且根据
                                <var>restrictions</var> 不允许使用 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-distinctive-identifier-s" class="internalDFN"
                                    id="ref-for-dfn-distinctive-identifier-s-6">Distinctive
                                    Identifiers</a>，则将 <var>distinctive identifier
                                    requirement</var> 设为 "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-not-allowed" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-1"><code>not-allowed</code></a>"。
                            </p>
                        </li>
                        <li>
                            <p>
                                按下列列表中与 <var>distinctive identifier requirement</var> 值相对应的步骤执行：
                            </p>
                            <dl class="switch">
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-4"><code>required</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        如果 <var>implementation</var> 在与 <var>accumulated
                                            configuration</var> 和 <var>restrictions</var> 组合时不支持 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-identifier-s"
                                            class="internalDFN"
                                            id="ref-for-dfn-use-distinctive-identifier-s-2">使用区别性标识符</a>，则返回
                                        <code>NotSupported</code>。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-optional-2"><code>optional</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        继续执行以下步骤。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-not-allowed-2"><code>not-allowed</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        如果 <var>implementation</var> 在与 <var>accumulated
                                            configuration</var> 和 <var>restrictions</var> 组合时要求使用 <a
                                            data-link-type="dfn|abstract-op"
                                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                            class="internalDFN"
                                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-1">区别性标识符或区别性永久标识符</a>，则返回
                                        <code>NotSupported</code>。
                                    </p>
                                </dd>
                            </dl>
                            <div class="note" role="note" id="issue-container-generatedID-31">
                                <div role="heading" class="note-title marker" id="h-note-31" aria-level="6">
                                    <span>注</span>
                                </div>
                                <div class="">
                                    <p>
                                        <var>accumulated configuration</var> 与 <var>restrictions</var> 的组合意味着包含
                                        <var>accumulated configuration</var> 中所有内容且未被 <var>restrictions</var> 拒绝的所有可能配置。
                                    </p>
                                    <p>
                                        如果实现对组合中的至少一个配置支持该特性，则该实现被视为在该组合下支持该特性。
                                    </p>
                                    <p>
                                        如果实现在该组合中支持的所有配置都包含该特性，则该实现被视为在该组合下要求该特性。
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-8"><code>distinctiveIdentifier</code></a>
                                成员设置为等于 <var>distinctive identifier requirement</var>。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>persistent state requirement</var> 等于 <var>candidate configuration</var> 的
                                <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-1"><code>persistentState</code></a>
                                成员的值。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>persistent state requirement</var> 为 "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-optional" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-3"><code>optional</code></a>" 且根据
                                <var>restrictions</var> 不允许持久化状态，则将
                                <var>persistent state requirement</var> 设为 "<a data-link-type="idl"
                                    href="#dom-mediakeysrequirement-not-allowed" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-3"><code>not-allowed</code></a>"。
                            </p>
                        </li>
                        <li>
                            <p>
                                按下列列表中与 <var>persistent state requirement</var> 值相对应的步骤执行：
                            </p>
                            <dl class="switch">
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-5"><code>required</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        如果 <var>implementation</var> 在与 <var>accumulated configuration</var> 和
                                        <var>restrictions</var> 组合时不支持持久化状态，则返回 <code>NotSupported</code>。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-optional-4"><code>optional</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        继续执行以下步骤。
                                    </p>
                                </dd>
                                <dt>
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-not-allowed-4"><code>not-allowed</code></a>"
                                </dt>
                                <dd>
                                    <p>
                                        如果 <var>implementation</var> 在与 <var>accumulated configuration</var> 和
                                        <var>restrictions</var> 组合时要求持久化状态，则返回 <code>NotSupported</code>。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-2"><code>persistentState</code></a>
                                成员设置为等于 <var>persistent state requirement</var> 的值。
                            </p>
                        </li>
                        <li>
                            <p>
                                按下列列表中首个匹配条件的步骤执行：
                            </p>
                            <dl class="switch">
                                <dt>
                                    如果 <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-sessiontypes"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-1"><code>sessionTypes</code></a>
                                    成员在 <var>candidate
                                        configuration</var> 中为 <a data-link-type="dfn" data-lt="exist"
                                        href="https://infra.spec.whatwg.org/#map-exists">存在</a> [<cite><a class="bibref"
                                            data-link-type="biblio" href="#bib-infra"
                                            title="Infra Standard">Infra</a></cite>]，
                                </dt>
                                <dd>
                                    <p>
                                        令 <var>session types</var> 为 <var>candidate configuration</var> 的
                                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-sessiontypes"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-2"><code>sessionTypes</code></a>
                                        成员。
                                    </p>
                                </dd>
                                <dt>
                                    否则
                                </dt>
                                <dd>
                                    <p>
                                        令 <var>session types</var> 为
                                        <code>[ "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN" id="ref-for-dom-mediakeysessiontype-temporary-1"><code>temporary</code></a>"
                                        ]</code>。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                对 <var>session types</var> 中的每个值执行下列操作：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>session type</var> 为该值。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-3"><code>persistentState</code></a>
                                        值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-5"><code>not-allowed</code></a>"
                                        且 <a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type"
                                            class="internalDFN" id="ref-for-dfn-is-persistent-session-type-2">Is
                                            persistent session
                                            type?</a> 算法对 <var>session type</var> 返回 <code>true</code>，则返回
                                        <code>NotSupported</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>implementation</var> 在与 <var>accumulated configuration</var> 和
                                        <var>restrictions</var> 组合时因其它原因不支持 <var>session type</var>，则返回
                                        <code>NotSupported</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-4"><code>persistentState</code></a>
                                        值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-optional-5"><code>optional</code></a>"
                                        且对 <var>session type</var> 运行 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-is-persistent-session-type" class="internalDFN"
                                            id="ref-for-dfn-is-persistent-session-type-3">Is persistent session
                                            type?</a> 算法的结果为 <code>true</code>，则将 <var>accumulated configuration</var> 的
                                        <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-5"><code>persistentState</code></a>
                                        值更改为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-6"><code>required</code></a>"。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                将 <var>accumulated
                                    configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-sessiontypes" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-3"><code>sessionTypes</code></a>
                                成员设置为 <var>session types</var>。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>candidate
                                    configuration</var> 中的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-videocapabilities" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-1"><code>videoCapabilities</code></a>
                                与
                                <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-1"><code>audioCapabilities</code></a>
                                成员均为空，则返回 <code>NotSupported</code>。
                            </p>
                        </li>
                        <li>
                            <dl class="switch">
                                <dt>
                                    如果 <var>candidate configuration</var> 中的 <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-videocapabilities" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-2"><code>videoCapabilities</code></a>
                                    成员非空：
                                </dt>
                                <dd>
                                    <ol>
                                        <li>
                                            <p>
                                                令 <var>video capabilities</var> 为在 Video、<var>candidate
                                                    configuration</var> 的
                                                <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-videocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-3"><code>videoCapabilities</code></a>
                                                成员、<var>accumulated configuration</var> 与 <var>restrictions</var> 上执行 <a
                                                    data-link-type="dfn|abstract-op"
                                                    href="#dfn-get-supported-capabilities-for-audio-video-type"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-get-supported-capabilities-for-audio-video-type-1">获取音/视频类型的受支持能力</a>
                                                算法的结果。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>video capabilities</var> 为 <code>null</code>，则返回
                                                <code>NotSupported</code>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-videocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-4"><code>videoCapabilities</code></a>
                                                成员设置为 <var>video capabilities</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </dd>
                                <dt>
                                    否则：
                                </dt>
                                <dd>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-videocapabilities"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-5"><code>videoCapabilities</code></a>
                                        成员设置为空序列。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <dl class="switch">
                                <dt>
                                    如果 <var>candidate configuration</var> 中的 <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-audiocapabilities" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-2"><code>audioCapabilities</code></a>
                                    成员非空：
                                </dt>
                                <dd>
                                    <ol>
                                        <li>
                                            <p>
                                                令 <var>audio capabilities</var> 为在 Audio、<var>candidate
                                                    configuration</var> 的
                                                <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-3"><code>audioCapabilities</code></a>
                                                成员、<var>accumulated configuration</var> 与 <var>restrictions</var> 上执行 <a
                                                    data-link-type="dfn|abstract-op"
                                                    href="#dfn-get-supported-capabilities-for-audio-video-type"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-get-supported-capabilities-for-audio-video-type-2">获取音/视频类型的受支持能力</a>
                                                算法的结果。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>audio capabilities</var> 为 <code>null</code>，则返回
                                                <code>NotSupported</code>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-4"><code>audioCapabilities</code></a>
                                                成员设置为 <var>audio capabilities</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </dd>
                                <dt>
                                    否则：
                                </dt>
                                <dd>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-5"><code>audioCapabilities</code></a>
                                        成员设置为空序列。
                                    </p>
                                </dd>
                            </dl>
                        </li>

                        <li>
                            <p>
                                如果 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-9"><code>distinctiveIdentifier</code></a>
                                值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-6"><code>optional</code></a>"，则按下列列表中首个匹配条件执行：
                            </p>
                            <dl class="switch">
                                <dt>
                                    如果 <var>implementation</var> 要求在 <var>accumulated configuration</var> 的任一组合中使用 <a
                                        data-link-type="dfn|abstract-op"
                                        href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-2">区别性标识符或区别性永久标识符</a>：
                                </dt>
                                <dd>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-10"><code>distinctiveIdentifier</code></a>
                                        值改为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-7"><code>required</code></a>"。
                                    </p>
                                </dd>
                                <dt>
                                    否则
                                </dt>
                                <dd>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-11"><code>distinctiveIdentifier</code></a>
                                        值改为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-6"><code>not-allowed</code></a>"。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                如果 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-6"><code>persistentState</code></a>
                                值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-7"><code>optional</code></a>"，则按下列列表中首个匹配条件执行：
                            </p>
                            <dl class="switch">
                                <dt>
                                    如果 <var>implementation</var> 要求在 <var>accumulated configuration</var> 的任一组合中持久化状态
                                </dt>
                                <dd>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-7"><code>persistentState</code></a>
                                        值改为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-8"><code>required</code></a>"。
                                    </p>
                                </dd>
                                <dt>
                                    否则
                                </dt>
                                <dd>
                                    <p>
                                        将 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-8"><code>persistentState</code></a>
                                        值改为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-7"><code>not-allowed</code></a>"。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                如果 <var>implementation</var> 在由 <var>accumulated configuration</var> 中的值组合所指定的配置中不被支持或在
                                <var>origin</var> 中不被允许，则返回 <code>NotSupported</code>。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-32">
                                <div role="heading" class="note-title marker" id="h-note-32" aria-level="6">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    在此步骤中，“支持”包括实现当该算法返回时可用，而不仅仅是用户代理对该实现的支持。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                如果 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-12"><code>distinctiveIdentifier</code></a>
                                值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-required-9"><code>required</code></a>" 且与
                                <var>accumulated configuration</var> 关联的 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-distinctive-identifier-s" class="internalDFN"
                                    id="ref-for-dfn-distinctive-identifier-s-7">Distinctive
                                    Identifier(s)</a> 并非 <a href="#per-origin-per-profile-identifiers">每 origin
                                    与每配置文件唯一</a> 且可 <a href="#allow-identifiers-cleared">被清除</a>：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        更新 <var>restrictions</var> 以反映 <var>accumulated configuration</var>
                                        描述的所有配置均未获得用户同意。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        返回 <code>ConsentDenied</code> 与 <var>restrictions</var>。
                                    </p>
                                </li>
                            </ol>
                            <div class="note" role="note" id="issue-container-generatedID-33">
                                <div role="heading" class="note-title marker" id="h-note-33" aria-level="6">
                                    <span>注</span>
                                </div>
                                <div class="">
                                    <p>
                                        “每 origin 与每配置文件唯一” 与“可清除”条件在符合规范的实现中不可能为假，因为实现 <em class="rfc2119">MUST</em> <a
                                            href="#per-origin-per-profile-identifiers">使用每 origin 每配置文件的标识符</a> 且 <a
                                            href="#allow-identifiers-cleared">允许用户清除标识符</a>。
                                    </p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                令 <var>consent status</var> 与 <var>updated restrictions</var> 为在 <var>accumulated
                                    configuration</var>、<var>restrictions</var> 与 <var>origin</var> 上运行 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-get-consent-status" class="internalDFN"
                                    id="ref-for-dfn-get-consent-status-1">获取同意状态（Get Consent Status）</a> 算法的结果，并按
                                <var>consent status</var> 的值执行下列步骤：
                            </p>
                            <dl class="switch">
                                <dt>
                                    <code>ConsentDenied</code>:
                                </dt>
                                <dd>
                                    <p>
                                        返回 <code>ConsentDenied</code> 与 <var>updated restrictions</var>。
                                    </p>
                                </dd>
                                <dt>
                                    <code>InformUser</code>:
                                </dt>
                                <dd>
                                    <p>
                                        告知用户 <var>accumulated configuration</var> 在 <var>origin</var> 中的使用情况，具体包括如果
                                        <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-13"><code>distinctiveIdentifier</code></a>
                                        成员为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-10"><code>required</code></a>"，将适当使用
                                        <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-8">Distinctive
                                            Identifier(s)</a> 和/或 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-distinctive-permanent-identifier-s-16">Distinctive Permanent
                                            Identifier(s)</a>。然后继续下一步。
                                    </p>
                                </dd>
                                <dt>
                                    <code>Allowed</code>:
                                </dt>
                                <dd>
                                    <p>
                                        继续下一步。
                                    </p>
                                </dd>
                            </dl>
                        </li>
                        <li>
                            <p>
                                返回 <var>accumulated configuration</var>。
                            </p>
                        </li>
                    </ol>
                </section>
                <section id="get-supported-capabilities-for-audio-video-type">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-3-get-supported-capabilities-for-audio-video-type"><bdi class="secno">3.2.2.3
                            </bdi>
                            <dfn id="dfn-get-supported-capabilities-for-audio-video-type" tabindex="0"
                                aria-haspopup="dialog" data-dfn-type="dfn">获取音/视频类型的受支持能力</dfn>
                        </h5><a class="self-link" href="#get-supported-capabilities-for-audio-video-type"
                            aria-label="第 3.2.2.3 节的永久链接。"></a>
                    </div>

                    <p>
                        给定一个 <var>audio/video type</var>、<a data-link-type="idl" data-lt="MediaKeySystemMediaCapability"
                            href="#dom-mediakeysystemmediacapability" class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-1"><code>MediaKeySystemMediaCapability</code></a>
                        序列 <var>requested media capabilities</var>、<a data-link-type="idl"
                            data-lt="MediaKeySystemConfiguration" href="#dom-mediakeysystemconfiguration"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-5"><code>MediaKeySystemConfiguration</code></a>
                        <var>accumulated configuration</var> 和 <var>restrictions</var>，此算法将返回针对该音/视频类型的一系列受支持的 <a
                            data-link-type="idl" data-lt="MediaKeySystemMediaCapability"
                            href="#dom-mediakeysystemmediacapability" class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-2"><code>MediaKeySystemMediaCapability</code></a>
                        值，或者在适当情况下返回 <code>null</code>。
                    </p>
                    <ol>
                        <li>
                            <p>
                                令 <var>local accumulated configuration</var> 为 <var>accumulated configuration</var>
                                的本地副本。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>supported media capabilities</var> 为一个空的 <a data-link-type="idl"
                                    data-lt="MediaKeySystemMediaCapability" href="#dom-mediakeysystemmediacapability"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemmediacapability-3"><code>MediaKeySystemMediaCapability</code></a>
                                字典序列。
                            </p>
                        </li>
                        <li>
                            <p>
                                对 <var>requested media capabilities</var> 中的每个 <var>requested media capability</var>
                                执行下列操作：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>content type</var> 为 <var>requested media capability</var> 的
                                        <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-contenttype"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemmediacapability-contenttype-1"><code>contentType</code></a>
                                        成员。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>encryption scheme</var> 为 <var>requested media capability</var> 的
                                        <a data-link-type="idl"
                                            href="#dom-mediakeysystemmediacapability-encryptionscheme"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-2"><code>encryptionScheme</code></a>
                                        成员。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>robustness</var> 为 <var>requested media capability</var> 的
                                        <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-robustness"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemmediacapability-robustness-1"><code>robustness</code></a>
                                        成员。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>content type</var> 是空字符串，则返回 <code>null</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>mimeType</var> 为对 <var>content type</var> 运行 <a data-link-type="dfn"
                                            href="https://mimesniff.spec.whatwg.org/#parse-a-mime-type">parse a MIME
                                            type</a> 的结果。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>mimeType</var> 为 <code>failure</code> 或不可识别，则继续下一个迭代。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>container</var> 为 <var>mimeType</var> 指定的容器类型。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果用户代理不支持 <var>container</var>，则继续下一个迭代。字符串比较的大小写敏感性由相应的 RFC 决定。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-34">
                                        <div role="heading" class="note-title marker" id="h-note-34" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            根据 RFC 6838 [<cite><a class="bibref" data-link-type="biblio"
                                                    href="#bib-rfc6838"
                                                    title="Media Type Specifications and Registration Procedures">RFC6838</a></cite>]，“顶级类型和子类型名称均不区分大小写。”
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        令 <var>parameters</var> 为 <var>mimeType</var> 的 "codecs" 和 "profiles"（若有）RFC
                                        6381 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6381"
                                                title="The 'Codecs' and 'Profiles' Parameters for &quot;Bucket&quot; Media Types">RFC6381</a></cite>]
                                        参数（如果有）。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果用户代理无法识别一个或多个 <var>parameters</var>，或任何参数根据相关规范无效，则继续下一个迭代。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>media types</var> 为由 <var>parameters</var> 指定的一组 codec 和 codec
                                        约束。字符串比较的大小写敏感性由适当的 RFC 或其它规范决定。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-35">
                                        <div role="heading" class="note-title marker" id="h-note-35" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            建议使用区分大小写的字符串比较，因为 RFC 6381 [<cite><a class="bibref" data-link-type="biblio"
                                                    href="#bib-rfc6381"
                                                    title="The 'Codecs' and 'Profiles' Parameters for &quot;Bucket&quot; Media Types">RFC6381</a></cite>]
                                            对某些格式指出，“Values are case sensitive”。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>media types</var> 为空：
                                    </p>
                                    <dl class="switch">
                                        <dt>
                                            如果 <var>container</var> 规范性地蕴含了一组特定的 codec 和 codec 约束：
                                        </dt>
                                        <dd>
                                            <p>
                                                令 <var>parameters</var> 为该集合。
                                            </p>
                                        </dd>
                                        <dt>
                                            否则：
                                        </dt>
                                        <dd>
                                            <p>
                                                继续下一个迭代。
                                            </p>
                                        </dd>
                                    </dl>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>mimeType</var> 严格来说不是一个 <var>audio/video type</var>，则继续下一个迭代。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-36">
                                        <div role="heading" class="note-title marker" id="h-note-36" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            例如，如果 <var>audio/video type</var> 为 Video，而 <var>mimeType</var> 的 <a
                                                data-link-type="dfn"
                                                href="https://mimesniff.spec.whatwg.org/#type">type</a> 不是 "video" 或
                                            <var>media
                                                types</var> 包含非视频 codec。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>encryption scheme</var> 非空且未被 <var>implementation</var>
                                        识别或不被支持，则继续下一个迭代。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>robustness</var> 不是空字符串并且包含未识别的值或 <var>implementation</var>
                                        不支持的值，则继续下一个迭代。字符串比较区分大小写。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果用户代理和 <var>implementation</var> 确定地支持在 <var>container</var>、<var>media
                                            types</var>、<var>encryption scheme</var>、<var>robustness</var> 和 <var>local
                                            accumulated configuration</var> 的组合下播放加密的<a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                                            data</a>，并结合 <var>restrictions</var>：
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-37">
                                        <div role="heading" class="note-title marker" id="h-note-37" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            <var>requested media capability</var>（content type 和 robustness）在与之前已加入的所有
                                            requested media capabilities 一同使用时必须被支持。
                                        </p>
                                    </div>
                                    <ol>
                                        <li>
                                            <p>
                                                将 <var>requested media capability</var> 添加到 <var>supported media
                                                    capabilities</var>。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-38">
                                                <div role="heading" class="note-title marker" id="h-note-38"
                                                    aria-level="6"><span>注</span></div>
                                                <p class="">
                                                    该步骤确保 <var>supported media capabilities</var> 中条目成员的值严格等于
                                                    <var>requested media capability</var> 中提供的字符串，不会被用户代理修改。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <dl class="switch">
                                                <dt>
                                                    如果 <var>audio/video type</var> 为 Video：
                                                </dt>
                                                <dd>
                                                    <p>
                                                        将 <var>requested media capability</var> 添加到 <a
                                                            data-link-type="idl"
                                                            href="#dom-mediakeysystemconfiguration-videocapabilities"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-6"><code>videoCapabilities</code></a>
                                                        成员，加入到 <var>local accumulated configuration</var>。
                                                    </p>
                                                </dd>
                                                <dt>
                                                    如果 <var>audio/video type</var> 为 Audio：
                                                </dt>
                                                <dd>
                                                    <p>
                                                        将 <var>requested media capability</var> 添加到 <a
                                                            data-link-type="idl"
                                                            href="#dom-mediakeysystemconfiguration-audiocapabilities"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-6"><code>audioCapabilities</code></a>
                                                        成员，加入到 <var>local accumulated configuration</var>。
                                                    </p>
                                                </dd>
                                            </dl>
                                            <div class="note" role="note" id="issue-container-generatedID-39">
                                                <div role="heading" class="note-title marker" id="h-note-39"
                                                    aria-level="6"><span>注</span></div>
                                                <p class="">
                                                    此步骤确保配置始终与先前迭代中的配置（包括先前对本算法的调用中加入的配置）一起被检查。否则，后续调用中将仅检查先前对本算法的调用中的配置。
                                                </p>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                如果 <var>supported media capabilities</var> 为空，则返回 <code>null</code>。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-40">
                                <div role="heading" class="note-title marker" id="h-note-40" aria-level="6">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    <var>requested media capabilities</var> 中没有任何 <a data-link-type="idl"
                                        data-lt="MediaKeySystemMediaCapability"
                                        href="#dom-mediakeysystemmediacapability" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-4"><code>MediaKeySystemMediaCapability</code></a>
                                    元素在与 <var>accumulated configuration</var> 组合时被支持。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                返回 <var>supported media capabilities</var>。
                            </p>
                        </li>
                    </ol>
                </section>
                <section id="get-consent-status">
                    <div class="header-wrapper">
                        <h5 id="x3-2-2-4-get-consent-status"><bdi class="secno">3.2.2.4 </bdi>
                            <dfn id="dfn-get-consent-status" tabindex="0" aria-haspopup="dialog"
                                data-dfn-type="dfn">获取同意状态</dfn>
                        </h5><a class="self-link" href="#get-consent-status" aria-label="第 3.2.2.4 节的永久链接。"></a>
                    </div>

                    <p>
                        给定一个 <var>accumulated configuration</var>、<var>restrictions</var> 和 <var>origin</var>，此算法返回
                        <var>accumulated configuration</var> 与 <var>origin</var> 的同意状态，结果为
                        <code>ConsentDenied</code>、<code>InformUser</code> 或 <code>Allowed</code> 之一；在
                        <code>ConsentDenied</code> 情况下还会一并返回更新后的 <var>restrictions</var>。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-41">
                        <div role="heading" class="note-title marker" id="h-note-41" aria-level="6"><span>注</span>
                        </div>
                        <div class="">
                            <p>
                                <var>accumulated configuration</var> 的同意状态至少取决于 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-14"><code>distinctiveIdentifier</code></a>
                                成员的值。
                            </p>
                            <p>
                                先前对于 <var>accumulated configuration</var> 且 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-15"><code>distinctiveIdentifier</code></a>
                                被设为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-8"><code>not-allowed</code></a>"
                                的同意并不意味着对相同配置但将 <a data-link-type="idl"
                                    href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-16"><code>distinctiveIdentifier</code></a>
                                设为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-optional-8"><code>optional</code></a>" 或 "<a
                                    data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-required-11"><code>required</code></a>" 的同意。
                            </p>
                        </div>
                    </div>
                    <ol>
                        <li>
                            <p>
                                如果存在针对 <var>origin</var> 的持久拒绝，表明 <var>accumulated configuration</var> 不被允许，则运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        更新 <var>restrictions</var> 以反映已被拒绝同意的配置。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        返回 <code>ConsentDenied</code> 与 <var>restrictions</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                如果存在针对 <var>origin</var> 的持久同意，表明 <var>accumulated configuration</var> 被允许，则返回
                                <code>Allowed</code>。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果下列任一情况为真：
                            </p>
                            <ul>
                                <li>
                                    <p>
                                        <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-17"><code>distinctiveIdentifier</code></a>
                                        成员不是 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-not-allowed-9"><code>not-allowed</code></a>"，且用户代理、<var>implementation</var>
                                        与 <var>accumulated configuration</var> 的组合没有遵循关于 <a
                                            href="#allow-persistent-data-cleared">允许清除持久数据</a> 关于 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-9">Distinctive
                                            Identifier(s)</a> 的所有建议。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        用户代理因其它原因要求对 <var>accumulated configuration</var> 进行显式用户同意。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-42">
                                        <div role="heading" class="note-title marker" id="h-note-42" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            要求显式用户同意的另一个原因可能是由于 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                class="internalDFN" id="ref-for-dfn-cdm-24">CDM</a> 实现的安全属性。
                                        </p>
                                    </div>
                                </li>
                            </ul>
                            <p>
                                则运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        请求用户同意在 <var>origin</var> 中使用 <var>accumulated configuration</var> 并等待用户响应。
                                    </p>
                                    <p>
                                        若 <var>accumulated configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-18"><code>distinctiveIdentifier</code></a>
                                        成员为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-12"><code>required</code></a>"，则该同意
                                        <em class="rfc2119">必须</em> 包含对使用适当的 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-distinctive-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-distinctive-identifier-s-10">Distinctive Identifier(s)</a>
                                        和/或 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                            id="ref-for-dfn-distinctive-permanent-identifier-s-17">Distinctive Permanent
                                            Identifier(s)</a> 的同意。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-43">
                                        <div role="heading" class="note-title marker" id="h-note-43" aria-level="6">
                                            <span>注</span>
                                        </div>
                                        <div class="">
                                            <p>
                                                对 <var>accumulated configuration</var> 的用户同意是特定于 <var>origin</var>
                                                的，并且可能限制为与 <var>accumulated configuration</var> 共享某些属性的配置。
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        如果用户拒绝同意，则运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                更新 <var>restrictions</var> 以反映被拒绝同意的配置。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                返回 <code>ConsentDenied</code> 与 <var>restrictions</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                如果 <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-19"><code>distinctiveIdentifier</code></a>
                                成员在 <var>accumulated configuration</var> 中不是
                                "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysrequirement-not-allowed-10"><code>not-allowed</code></a>"，则返回
                                <code>InformUser</code>。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果用户代理因其它原因要求告知用户有关 <var>accumulated configuration</var>，则返回 <code>InformUser</code>。
                            </p>
                        </li>
                        <li>
                            <p>
                                返回 <code>Allowed</code>。
                            </p>
                        </li>
                    </ol>
                </section>
            </section>
        </section>
        <section data-dfn-for="MediaKeySystemConfiguration" id="mediakeysystemconfiguration-dictionary">
            <div class="header-wrapper">
                <h3 id="x3-3-mediakeysystemconfiguration-dictionary"><bdi class="secno">3.3 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeysystemconfiguration"
                        data-idl="dictionary" data-title="MediaKeySystemConfiguration" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>MediaKeySystemConfiguration</code></dfn> 字典
                </h3><a class="self-link" href="#mediakeysystemconfiguration-dictionary"
                    aria-label="Permalink for Section 3.3"></a>
            </div>

            <pre class="idl def" id="webidl-1197737164"><span class="idlHeader"><a class="self-link" href="#webidl-1197737164">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeysrequirement" data-title="MediaKeysRequirement">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeysrequirement" id="ref-for-dom-mediakeysrequirement-1"><code>MediaKeysRequirement</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysrequirement-required" id="ref-for-dom-mediakeysrequirement-required-13"><code>required</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysrequirement-optional" id="ref-for-dom-mediakeysrequirement-optional-9"><code>optional</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysrequirement-not-allowed" id="ref-for-dom-mediakeysrequirement-not-allowed-11"><code>not-allowed</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-mediakeysrequirement" data-idl="enum"
                    data-title="MediaKeysRequirement" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeysRequirement</code></dfn> 枚举定义如下：
            </p>
            <table class="simple" data-dfn-for="MediaKeysRequirement">
                <tbody>
                    <tr>
                        <th colspan="2">
                            枚举说明
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysrequirement-required"
                                data-idl="enum-value" data-title="required" data-dfn-for="MediaKeysRequirement"
                                tabindex="0" aria-haspopup="dialog"><code>required</code></dfn>
                        </td>
                        <td>
                            <dl>
                                <dt>
                                    用于调用 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-4"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    时
                                </dt>
                                <dd>
                                    返回的对象 <em class="rfc2119">MUST</em> 必须支持此特性。
                                </dd>
                                <dt>
                                    由 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-8"><code>MediaKeySystemAccess</code></a>
                                    对象返回时
                                </dt>
                                <dd>
                                    该对象创建的 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-25">CDM</a> 实例 <em class="rfc2119">MAY</em> 可以使用此特性。
                                </dd>
                            </dl>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysrequirement-optional"
                                data-idl="enum-value" data-title="optional" data-dfn-for="MediaKeysRequirement"
                                tabindex="0" aria-haspopup="dialog"><code>optional</code></dfn>
                        </td>
                        <td>
                            <dl>
                                <dt>
                                    用于调用 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-5"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    时
                                </dt>
                                <dd>
                                    返回的对象 <em class="rfc2119">MAY</em> 可以支持并使用此特性。
                                </dd>
                                <dt>
                                    由 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-9"><code>MediaKeySystemAccess</code></a>
                                    对象返回时
                                </dt>
                                <dd>
                                    此值不能且 <em class="rfc2119">MUST NOT</em> 出现在此类对象中。
                                </dd>
                            </dl>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysrequirement-not-allowed"
                                data-idl="enum-value" data-title="not-allowed" data-dfn-for="MediaKeysRequirement"
                                tabindex="0" aria-haspopup="dialog"><code>not-allowed</code></dfn>
                        </td>
                        <td>
                            <dl>
                                <dt>
                                    用于调用 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-6"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    时
                                </dt>
                                <dd>
                                    返回的对象 <em class="rfc2119">MUST</em> 必须在任何时候都不使用此特性，并且 <em class="rfc2119">MUST
                                        NOT</em> 使用它。
                                </dd>
                                <dt>
                                    由 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-10"><code>MediaKeySystemAccess</code></a>
                                    对象返回时
                                </dt>
                                <dd>
                                    该对象创建的 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-26">CDM</a> 实例 <em class="rfc2119">MUST NOT</em> 使用此特性。
                                </dd>
                            </dl>
                        </td>
                    </tr>
                </tbody>
            </table>
            <pre class="idl def" id="webidl-798704963"><span class="idlHeader"><a class="self-link" href="#webidl-798704963">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeysystemconfiguration" data-title="MediaKeySystemConfiguration">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediakeysystemconfiguration" id="ref-for-dom-mediakeysystemconfiguration-6"><code>MediaKeySystemConfiguration</code></a> {<span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-label" data-title="label" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>                               <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-label" id="ref-for-dom-mediakeysystemconfiguration-label-3"><code>label</code></a> = "";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-initdatatypes" data-title="initDataTypes" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span>                     <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-initdatatypes" id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-4"><code>initDataTypes</code></a> = [];</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-audiocapabilities" data-title="audioCapabilities" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemmediacapability" class="internalDFN" id="ref-for-dom-mediakeysystemmediacapability-5"><code>MediaKeySystemMediaCapability</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-audiocapabilities" id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-7"><code>audioCapabilities</code></a> = [];</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-videocapabilities" data-title="videoCapabilities" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-mediakeysystemmediacapability" class="internalDFN" id="ref-for-dom-mediakeysystemmediacapability-6"><code>MediaKeySystemMediaCapability</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-videocapabilities" id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-7"><code>videoCapabilities</code></a> = [];</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-distinctiveidentifier" data-title="distinctiveIdentifier" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="idl" href="#dom-mediakeysrequirement" class="internalDFN" id="ref-for-dom-mediakeysrequirement-2"><code>MediaKeysRequirement</code></a></span>                    <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-distinctiveidentifier" id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-20"><code>distinctiveIdentifier</code></a> = "optional";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-persistentstate" data-title="persistentState" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="idl" href="#dom-mediakeysrequirement" class="internalDFN" id="ref-for-dom-mediakeysrequirement-3"><code>MediaKeysRequirement</code></a></span>                    <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-persistentstate" id="ref-for-dom-mediakeysystemconfiguration-persistentstate-9"><code>persistentState</code></a> = "optional";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemconfiguration-sessiontypes" data-title="sessionTypes" data-dfn-for="MediaKeySystemConfiguration"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span>                     <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemconfiguration-sessiontypes" id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-4"><code>sessionTypes</code></a>;</span>
};</span></code></pre>
            <p>
                字典 <a data-link-type="idl" data-lt="MediaKeySystemConfiguration" href="#dom-mediakeysystemconfiguration"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemconfiguration-7"><code>MediaKeySystemConfiguration</code></a> 包含以下成员：
            </p>
            <dl class="dictionary-members" data-dfn-for="MediaKeySystemConfiguration">
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-label" data-idl="field" data-title="label" data-dfn-for="MediaKeySystemConfiguration" data-type="DOMString" tabindex="0" aria-haspopup="dialog">label</dfn></code>
                    类型为 <a data-link-type="interface" data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，默认值为
                    <code>""</code>
                </dt>
                <dd>
                    一个可选标签，会在 <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                        href="#dom-mediakeysystemconfiguration" class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-8"><code>MediaKeySystemConfiguration</code></a> 通过
                    <a data-link-type="idl" data-lt="getConfiguration()"
                        href="#dom-mediakeysystemaccess-getconfiguration" class="internalDFN"
                        id="ref-for-dom-mediakeysystemaccess-getconfiguration-1"><code>getConfiguration</code></a><code>()</code>
                    方法由
                    <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemaccess-11"><code>MediaKeySystemAccess</code></a> 返回时保留。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-initdatatypes" data-idl="field" data-title="initDataTypes" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">initDataTypes</dfn></code>
                    类型为 <span class="idlMemberType">sequence&lt;<a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>&gt;</span>，
                    默认值为 <code>[]</code>
                </dt>
                <dd>
                    支持的 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                        id="ref-for-dfn-initialization-data-type-3">初始化数据类型（Initialization Data Type）</a> 名称列表。此对象的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                        id="ref-for-dfn-initialization-data-type-4">初始化数据类型</a>
                    能力被视为支持，如果列表为空或包含一个或多个与所有其它成员（由算法决定）均兼容的值。序列中的值 <em class="rfc2119">MUST</em> 不得为空字符串。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-audiocapabilities" data-idl="field" data-title="audioCapabilities" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">audioCapabilities</dfn></code>
                    类型为 <span class="idlMemberType">sequence&lt;<a data-link-type="idl"
                            data-lt="MediaKeySystemMediaCapability" href="#dom-mediakeysystemmediacapability"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-7"><code>MediaKeySystemMediaCapability</code></a>&gt;</span>，
                    默认值为
                    <code>[]</code>
                </dt>
                <dd>
                    支持的音频类型与能力对的列表。该对象的音频能力被视为支持，如果列表为空或包含一个或多个与所有其它成员（由算法决定）均兼容的值。当值间冲突时，优先选择前面的值。空列表表示不支持任何音频能力，此时 <a
                        data-link-type="idl" href="#dom-mediakeysystemconfiguration-videocapabilities"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-8"><code>videoCapabilities</code></a>
                    元素不能为空。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-videocapabilities" data-idl="field" data-title="videoCapabilities" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">videoCapabilities</dfn></code>
                    类型为 <span class="idlMemberType">sequence&lt;<a data-link-type="idl"
                            data-lt="MediaKeySystemMediaCapability" href="#dom-mediakeysystemmediacapability"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemmediacapability-8"><code>MediaKeySystemMediaCapability</code></a>&gt;</span>，
                    默认值为
                    <code>[]</code>
                </dt>
                <dd>
                    支持的视频类型与能力对的列表。该对象的视频能力被视为支持，如果列表为空或包含一个或多个与所有其它成员（由算法决定）均兼容的值。当值间冲突时，优先选择前面的值。空列表表示不支持任何视频能力，此时 <a
                        data-link-type="idl" href="#dom-mediakeysystemconfiguration-audiocapabilities"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-audiocapabilities-8"><code>audioCapabilities</code></a>
                    元素不能为空。
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-distinctiveidentifier" data-idl="field" data-title="distinctiveIdentifier" data-dfn-for="MediaKeySystemConfiguration" data-type="MediaKeysRequirement" tabindex="0" aria-haspopup="dialog">distinctiveIdentifier</dfn></code>
                    类型为 <a data-link-type="idl" data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysrequirement-4"><code>MediaKeysRequirement</code></a>，
                    默认值为 <code>"optional"</code>
                </dt>
                <dd>
                    是否要求使用 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-11">区别性标识符</a>。
                    <p>
                        当该成员为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-not-allowed-12"><code>not-allowed</code></a>" 时，实现 <em
                            class="rfc2119">MUST NOT</em> 在从此配置创建的任何对象的任何操作中 <a data-link-type="dfn|abstract-op"
                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                            class="internalDFN"
                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-3">使用区别性标识符或区别性永久标识符</a>。
                    </p>
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-persistentstate" data-idl="field" data-title="persistentState" data-dfn-for="MediaKeySystemConfiguration" data-type="MediaKeysRequirement" tabindex="0" aria-haspopup="dialog">persistentState</dfn></code>
                    类型为 <a data-link-type="idl" data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysrequirement-5"><code>MediaKeysRequirement</code></a>，默认值为
                    <code>"optional"</code>
                </dt>
                <dd>
                    是否要求具备持久化状态的能力，包括会话数据及其它类型的状态。
                    <p>
                        当该成员为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed" class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-not-allowed-13"><code>not-allowed</code></a>" 时，<a
                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-27">CDM</a> <em class="rfc2119">MUST NOT</em> 持久化与应用或该对象的 <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                        相关的任何状态。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-44">
                        <div role="heading" class="note-title marker" id="h-note-44" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            就此成员而言，持久化状态不包括由 <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-10">Key System</a> 实现控制的持久化唯一标识符（<a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-12">区别性标识符</a>）。<a
                                data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-21"><code>distinctiveIdentifier</code></a>
                            独立反映该要求。
                        </p>
                    </div>
                    <p>
                        当不支持持久化状态时，仅允许创建 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysessiontype-temporary-2"><code>temporary</code></a>" 会话。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-45">
                        <div role="heading" class="note-title marker" id="h-note-45" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            对于 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-temporary-3"><code>temporary</code></a>"
                            会话，是否需要及能否存储状态取决于 <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-11">Key System</a> 的具体实现，并可能随所使用的功能而异。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-46">
                        <div role="heading" class="note-title marker" id="h-note-46" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            如果应用打算创建非 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-temporary-4"><code>temporary</code></a>" 会话，应在调用 <a
                                data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-navigator-requestmediakeysystemaccess-7"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                            时，将该成员设置为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysrequirement-required-14"><code>required</code></a>"。
                        </p>
                    </div>
                </dd>
                <dt>
                    <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemconfiguration-sessiontypes" data-idl="field" data-title="sessionTypes" data-dfn-for="MediaKeySystemConfiguration" data-type="sequence" tabindex="0" aria-haspopup="dialog">sessionTypes</dfn></code>
                    类型为 <span class="idlMemberType">sequence&lt;<a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>&gt;</span>
                </dt>
                <dd>
                    必须支持的 <a data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                        class="internalDFN" id="ref-for-dom-mediakeysessiontype-1"><code>MediaKeySessionType</code></a>
                    列表。所有值都必须被支持。
                    <p>
                        如果此成员在字典传递给 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-8"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        时 <a data-link-type="dfn" data-lt="exist"
                            href="https://infra.spec.whatwg.org/#map-exists">不存在</a> [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-infra"
                                title="Infra Standard">Infra</a></cite>]，则该字典会被视为已设置为
                        <code>[ "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN" id="ref-for-dom-mediakeysessiontype-temporary-5"><code>temporary</code></a>"
                        ]</code>。
                    </p>
                </dd>
            </dl>
            <p>
                实现 <em class="rfc2119">SHOULD NOT</em> 向该字典添加成员。如确需添加，<em class="rfc2119">MUST</em> 类型为 <a
                    data-link-type="idl" data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysrequirement-6"><code>MediaKeysRequirement</code></a>，并且强烈建议（<em
                    class="rfc2119">RECOMMENDED</em>）默认值为 "<a data-link-type="idl"
                    href="#dom-mediakeysrequirement-optional" class="internalDFN"
                    id="ref-for-dom-mediakeysrequirement-optional-10"><code>optional</code></a>"，以支持最广泛的应用与客户端组合。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-47">
                <div role="heading" class="note-title marker" id="h-note-47" aria-level="4"><span>注</span></div>
                <p class="">
                    用户代理实现未识别的字典成员会被 [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                            title="Web IDL Standard">WEBIDL</a></cite>] 忽略，不会在 <a data-link-type="idl"
                        data-lt="requestMediaKeySystemAccess()" href="#dom-navigator-requestmediakeysystemaccess"
                        class="internalDFN"
                        id="ref-for-dom-navigator-requestmediakeysystemaccess-9"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                    算法中考虑。应用如使用非标准字典成员，<em class="rfc2119">MUST NOT</em> 依赖用户代理实现会因包含此类成员而拒绝配置。
                </p>
            </div>
            <p>
                此字典 <em class="rfc2119">MUST NOT</em> 用于向 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-28">CDM</a> 传递状态或数据。
            </p>
        </section>
        <section id="mediakeysystemmediacapability-dictionary">
            <div class="header-wrapper">
                <h3 id="x3-4-mediakeysystemmediacapability-dictionary"><bdi class="secno">3.4 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeysystemmediacapability"
                        data-idl="dictionary" data-title="MediaKeySystemMediaCapability" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>MediaKeySystemMediaCapability</code></dfn> 字典
                </h3><a class="self-link" href="#mediakeysystemmediacapability-dictionary"
                    aria-label="第 3.4 节的永久链接。"></a>
            </div>

            <pre class="idl def" id="webidl-1151374081"><span class="idlHeader"><a class="self-link" href="#webidl-1151374081">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeysystemmediacapability" data-title="MediaKeySystemMediaCapability">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediakeysystemmediacapability" id="ref-for-dom-mediakeysystemmediacapability-9"><code>MediaKeySystemMediaCapability</code></a> {<span data-idl="" class="idlMember" id="idl-def-mediakeysystemmediacapability-contenttype" data-title="contentType" data-dfn-for="MediaKeySystemMediaCapability"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemmediacapability-contenttype" id="ref-for-dom-mediakeysystemmediacapability-contenttype-2"><code>contentType</code></a> = "";</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemmediacapability-encryptionscheme" data-title="encryptionScheme" data-dfn-for="MediaKeySystemMediaCapability"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemmediacapability-encryptionscheme" id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-3"><code>encryptionScheme</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-mediakeysystemmediacapability-robustness" data-title="robustness" data-dfn-for="MediaKeySystemMediaCapability"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeysystemmediacapability-robustness" id="ref-for-dom-mediakeysystemmediacapability-robustness-2"><code>robustness</code></a> = "";</span>
};</span></code></pre>
            <section id="dictionary-mediakeysystemmediacapability-members">
                <div class="header-wrapper">
                    <h4 id="x3-4-1-dictionary-mediakeysystemmediacapability-members"><bdi class="secno">3.4.1 </bdi>
                        字典 <a class="idlType internalDFN" href="#dom-mediakeysystemmediacapability" data-link-type="idl"
                            id="ref-for-dom-mediakeysystemmediacapability-10"><code>MediaKeySystemMediaCapability</code></a>
                        成员
                    </h4><a class="self-link" href="#dictionary-mediakeysystemmediacapability-members"
                        aria-label="第 3.4.1 节的永久链接。"></a>
                </div>

                <dl class="dictionary-members" data-dfn-for="MediaKeySystemMediaCapability">
                    <dt>
                        <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemmediacapability-contenttype" data-idl="field" data-title="contentType" data-dfn-for="MediaKeySystemMediaCapability" data-type="DOMString" tabindex="0" aria-haspopup="dialog">contentType</dfn></code>
                        类型为 <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，默认值为
                        <code>""</code>
                    </dt>
                    <dd>
                        <p>
                            <a href="https://html.spec.whatwg.org/multipage/#media-resource">媒体资源</a>的 <a
                                href="https://html.spec.whatwg.org/multipage/#mime-types">MIME 类型</a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-48">
                            <div role="heading" class="note-title marker" id="h-note-48" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                应用 <em class="rfc2119">SHOULD</em> 确保 MIME 类型显式指定 codec 及 codec 约束（例如，参见 [<cite><a
                                        class="bibref" data-link-type="biblio" href="#bib-rfc6381"
                                        title="The 'Codecs' and 'Profiles' Parameters for &quot;Bucket&quot; Media Types">RFC6381</a></cite>]），除非这些已被容器规范性蕴含。
                            </p>
                        </div>
                    </dd>
                    <dt>
                        <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemmediacapability-encryptionscheme" data-idl="field" data-title="encryptionScheme" data-dfn-for="MediaKeySystemMediaCapability" data-type="DOMString" tabindex="0" aria-haspopup="dialog">encryptionScheme</dfn></code>
                        类型为 <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，默认值为
                        <code>null</code>
                    </dt>
                    <dd>
                        <p>
                            与 contentType 关联的加密方案。值为 null 或未提供表示应用未指定特定加密方案，因此任何加密方案均可接受。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-49">
                            <div role="heading" class="note-title marker" id="h-note-49" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    了解此字段的应用 <em class="rfc2119">SHOULD</em>
                                    指定所需的加密方案，因为不同加密方案通常彼此不兼容。应用实际接受“任何”加密方案并不现实，但默认值 null 及将 null
                                    解释为“任何”可为未适配的应用提供向后兼容性，并为旧版用户代理提供 polyfill 路径。
                                </p>
                            </div>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-50">
                            <div role="heading" class="note-title marker" id="h-note-50" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    空字符串与 null 或未提供不同，因此会被视为未识别的加密方案。
                                </p>
                            </div>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-51">
                            <div role="heading" class="note-title marker" id="h-note-51" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    encryptionScheme 的常用值包括：
                                </p>
                                <ul>
                                    <li>
                                        <code><dfn id="scheme-cenc" data-lt="&quot;cenc&quot;|cenc" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">cenc</dfn></code>：
                                        “cenc”模式，定义见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-cenc"
                                                title="ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files">CENC</a></cite>]，第
                                        4.2a 节。AES-CTR 模式全样本和视频 NAL 子样本加密。
                                    </li>
                                    <li>
                                        <code><dfn id="scheme-cbcs" data-lt="&quot;cbcs&quot;|cbcs" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">cbcs</dfn></code>：
                                        “cbcs”模式，定义见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-cenc"
                                                title="ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files">CENC</a></cite>]，第
                                        4.2d 节。AES-CBC 模式部分视频 NAL 模式加密。对于视频，规范允许各种加密模式。
                                    </li>
                                    <li>
                                        <code><dfn class="lint-ignore" id="dfn-cbcs-1-9" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">cbcs-1-9</dfn></code>：
                                        与 <a data-link-type="dfn|abstract-op" href="#scheme-cbcs" class="internalDFN"
                                            id="ref-for-scheme-cbcs-1"><code>"cbcs"</code></a> 模式相同，但视频加密模式为 1:9（加 1 跳
                                        9），推荐见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-cenc"
                                                title="ISO/IEC 23001-7:2016, Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base Media File Format files">CENC</a></cite>]
                                        第 10.4.2 节。
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </dd>
                    <dt>
                        <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeysystemmediacapability-robustness" data-idl="field" data-title="robustness" data-dfn-for="MediaKeySystemMediaCapability" data-type="DOMString" tabindex="0" aria-haspopup="dialog">robustness</dfn></code>
                        类型为 <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，默认值为
                        <code>""</code>
                    </dt>
                    <dd>
                        <p>
                            与 contentType 关联的健壮性级别。空字符串表示可接受任何解密和解码 contentType 的能力。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-52">
                            <div role="heading" class="note-title marker" id="h-note-52" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    实现 <em class="rfc2119">MUST</em> 配置 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-29">CDM</a> 至少支持用于创建 <a
                                        data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                        class="internalDFN" id="ref-for-dom-mediakeys-8"><code>MediaKeys</code></a> 的 <a
                                        data-link-type="idl" data-lt="MediaKeySystemAccess"
                                        href="#dom-mediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemaccess-12"><code>MediaKeySystemAccess</code></a>
                                    对象配置中的健壮性级别。具体如何配置 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                        class="internalDFN" id="ref-for-dfn-cdm-30">CDM</a> 取决于实现，且实现 <em
                                        class="rfc2119">MAY</em> 可选择在配置中使用最高健壮性级别，即使有更高健壮性可用。如果仅指定空字符串，实现 <em
                                        class="rfc2119">MAY</em> 可配置为使用最低健壮性级别。
                                </p>
                                <p>
                                    应用 <em class="rfc2119">SHOULD</em> 指定所需的健壮性级别，以避免意外的客户端不兼容。
                                </p>
                            </div>
                        </div>
                    </dd>
                </dl>
            </section>
            <p>
                为使该对象表示的能力被视为受支持，<a data-link-type="idl" href="#dom-mediakeysystemmediacapability-contenttype"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemmediacapability-contenttype-3"><code>contentType</code></a> <em
                    class="rfc2119">MUST NOT</em> 为空字符串，且其全部值（包括所有 codec）<em class="rfc2119">MUST</em> 与 <a
                    data-link-type="idl" href="#dom-mediakeysystemmediacapability-robustness" class="internalDFN"
                    id="ref-for-dom-mediakeysystemmediacapability-robustness-3"><code>robustness</code></a> 一起被支持。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-53">
                <div role="heading" class="note-title marker" id="h-note-53" aria-level="4"><span>注</span></div>
                <p class="">
                    如果可接受任何一组 codec，应为每个 codec 使用该字典的独立实例。
                </p>
            </div>
        </section>
    </section>
    <section id="mediakeysystemaccess-interface">
        <div class="header-wrapper">
            <h2 id="x4-mediakeysystemaccess-interface"><bdi class="secno">4. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediakeysystemaccess" data-idl="interface"
                    data-title="MediaKeySystemAccess" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeySystemAccess</code></dfn> 接口
            </h2><a class="self-link" href="#mediakeysystemaccess-interface" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaKeySystemAccess" href="#dom-mediakeysystemaccess" class="internalDFN"
                id="ref-for-dom-mediakeysystemaccess-13"><code>MediaKeySystemAccess</code></a>
            对象用于访问 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-12">Key System</a>。
        </p>
        <pre class="idl def" id="webidl-1780138428"><span class="idlHeader"><a class="self-link" href="#webidl-1780138428">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeysystemaccess" data-title="MediaKeySystemAccess">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeysystemaccess" id="ref-for-dom-mediakeysystemaccess-14"><code>MediaKeySystemAccess</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-mediakeysystemaccess-keysystem" data-title="keySystem" data-dfn-for="MediaKeySystemAccess">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysystemaccess-keysystem" id="ref-for-dom-mediakeysystemaccess-keysystem-2"><code>keySystem</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysystemaccess-getconfiguration" data-title="getConfiguration" data-dfn-for="MediaKeySystemAccess"><span class="idlType">
  <a data-link-type="idl" href="#dom-mediakeysystemconfiguration" class="internalDFN" id="ref-for-dom-mediakeysystemconfiguration-9"><code>MediaKeySystemConfiguration</code></a></span>  <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysystemaccess-getconfiguration" id="ref-for-dom-mediakeysystemaccess-getconfiguration-2"><code>getConfiguration</code></a> ();</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysystemaccess-createmediakeys" data-title="createMediaKeys" data-dfn-for="MediaKeySystemAccess"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-9"><code>MediaKeys</code></a>&gt;</span>           <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysystemaccess-createmediakeys" id="ref-for-dom-mediakeysystemaccess-createmediakeys-1"><code>createMediaKeys</code></a> ();</span>
};</span></code></pre>
        <section id="attributes">
            <div class="header-wrapper">
                <h3 id="x4-1-attributes"><bdi class="secno">4.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes" aria-label="Permalink for Section 4.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="MediaKeySystemAccess">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysystemaccess-keysystem"
                        data-idl="attribute" data-title="keySystem" data-dfn-for="MediaKeySystemAccess"
                        data-type="DOMString" data-lt="keySystem" data-local-lt="MediaKeySystemAccess.keySystem"
                        tabindex="0" aria-haspopup="dialog"><code>keySystem</code></dfn> 类型为 <a
                        data-link-type="interface" data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，只读
                </dt>
                <dd>
                    标识正在使用的 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-13">Key System</a>。
                </dd>
            </dl>
        </section>
        <section id="methods-0">
            <div class="header-wrapper">
                <h3 id="x4-2-methods"><bdi class="secno">4.2 </bdi>
                    方法
                </h3><a class="self-link" href="#methods-0" aria-label="Permalink for Section 4.2"></a>
            </div>

            <dl class="methods" data-dfn-for="MediaKeySystemAccess">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysystemaccess-getconfiguration"
                        data-idl="operation" data-title="getConfiguration()" data-dfn-for="MediaKeySystemAccess"
                        data-type="MediaKeySystemConfiguration" data-lt="getConfiguration()"
                        data-local-lt="MediaKeySystemAccess.getConfiguration|MediaKeySystemAccess.getConfiguration()|getConfiguration"
                        tabindex="0" aria-haspopup="dialog"><code>getConfiguration()</code></dfn>
                </dt>
                <dd>
                    <p>
                        返回由 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-10"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        算法选择的受支持配置选项组合。
                    </p>
                    <p>
                        返回的对象是第一个可满足的 <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-10"><code>MediaKeySystemConfiguration</code></a>
                        配置（加上任何隐含默认值）的非严格子集，来自于传递给 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-11"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        的参数，该参数返回了被解析为本对象的 promise。它不包含未在该单一配置中指定的能力（除隐含默认值外），因此可能不反映 <a
                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-14">Key System</a> 实现的所有能力。配置中的所有值都可以任意组合使用。类型为 <a
                            data-link-type="idl" data-lt="MediaKeysRequirement" href="#dom-mediakeysrequirement"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-7"><code>MediaKeysRequirement</code></a>
                        的成员反映该能力是否在任何组合中是必需的。它们不会有值 "<a data-link-type="idl" href="#dom-mediakeysrequirement-optional"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysrequirement-optional-11"><code>optional</code></a>"。
                    </p>
                    <p>
                        调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                返回此对象的 <var>configuration</var> 值。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-54">
                                <div role="heading" class="note-title marker" id="h-note-54" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    每次调用该方法都会创建并从 <var>configuration</var> 初始化一个新对象。
                                </p>
                            </div>
                            <div class="note" role="note" id="issue-container-generatedID-55">
                                <div role="heading" class="note-title marker" id="h-note-55" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    如果应用未指定 <a data-link-type="idl"
                                        href="#dom-mediakeysystemmediacapability-encryptionscheme" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-4"><code>encryptionScheme</code></a>，累计的
                                    <var>configuration</var> <em class="rfc2119">MUST</em> 仍包含 <a data-link-type="idl"
                                        href="#dom-mediakeysystemmediacapability-encryptionscheme" class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-5"><code>encryptionScheme</code></a>
                                    字段且值为 <code>null</code>，这样 polyfill 可以检测用户代理对该字段的支持，无需指定具体值。
                                </p>
                            </div>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysystemaccess-createmediakeys"
                        data-idl="operation" data-title="createMediaKeys()" data-dfn-for="MediaKeySystemAccess"
                        data-type="Promise" data-lt="createMediaKeys()"
                        data-local-lt="MediaKeySystemAccess.createMediaKeys|MediaKeySystemAccess.createMediaKeys()|createMediaKeys"
                        tabindex="0" aria-haspopup="dialog"><code>createMediaKeys()</code></dfn>
                </dt>
                <dd>
                    <p>
                        为 <var>keySystem</var> 创建一个新的 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                            class="internalDFN" id="ref-for-dom-mediakeys-10"><code>MediaKeys</code></a> 对象。
                    </p>
                    <p>
                        调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>configuration</var> 为此对象的 <var>configuration</var> 值。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        若 <var>configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-22"><code>distinctiveIdentifier</code></a>
                                        成员值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-15"><code>required</code></a>"，则
                                        <var>use distinctive identifier</var> 为 <code>true</code>，否则为
                                        <code>false</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        若 <var>configuration</var> 的 <a data-link-type="idl"
                                            href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                                            id="ref-for-dom-mediakeysystemconfiguration-persistentstate-10"><code>persistentState</code></a>
                                        成员值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysrequirement-required-16"><code>required</code></a>"，则
                                        <var>persistent state allowed</var> 为 <code>true</code>，否则为 <code>false</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如有必要，加载并初始化由此对象的 <var>cdm implementation</var> 值表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                            id="ref-for-dfn-key-system-15">Key System</a> 实现。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>instance</var> 为此对象 <var>cdm implementation</var> 值表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                            id="ref-for-dfn-key-system-16">Key System</a> 实现的新实例。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        用 <var>configuration</var> 初始化 <var>instance</var>，以启用、禁用和/或选择 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                            id="ref-for-dfn-key-system-17">Key System</a> 功能。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>use distinctive identifier</var> 为 <code>false</code>，则禁止
                                        <var>instance</var> <a data-link-type="dfn|abstract-op"
                                            data-lt="uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                            class="internalDFN"
                                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-4">使用区别性标识符或区别性永久标识符</a>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>persistent state allowed</var> 为 <code>false</code>，则禁止
                                        <var>instance</var> 持久化与应用或本对象 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                        相关的任何状态。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果上述任何步骤失败，则以合适的 <a href="#error-names">error name</a> 拒绝
                                        <var>promise</var>，并创建新的 <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>media keys</var> 为一个新的 <a data-link-type="idl" data-lt="MediaKeys"
                                            href="#dom-mediakeys" class="internalDFN"
                                            id="ref-for-dom-mediakeys-11"><code>MediaKeys</code></a> 对象，并按如下方式初始化：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                <var>use distinctive identifier</var> 值为 <var>use distinctive
                                                    identifier</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>persistent state allowed</var> 值为 <var>persistent state
                                                    allowed</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>supported session types</var> 值为 <var>configuration</var> 的 <a
                                                    data-link-type="idl"
                                                    href="#dom-mediakeysystemconfiguration-sessiontypes"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysystemconfiguration-sessiontypes-5"><code>sessionTypes</code></a>
                                                成员的值。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>cdm implementation</var> 值为此对象的 <var>cdm implementation</var> 值。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>cdm instance</var> 值为 <var>instance</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        用 <var>media keys</var> 解析 <var>promise</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
    </section>
    <section id="mediakeys-interface">
        <div class="header-wrapper">
            <h2 id="x5-mediakeys-interface"><bdi class="secno">5. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediakeys" data-idl="interface"
                    data-title="MediaKeys" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeys</code></dfn> 接口
            </h2><a class="self-link" href="#mediakeys-interface" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                id="ref-for-dom-mediakeys-12"><code>MediaKeys</code></a> 对象表示一组密钥，相关的 <a data-link-type="idl"
                data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-4"><code>HTMLMediaElement</code></a> 可以在播放期间使用这些密钥来解密 <a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>。它也表示一个
            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-32">CDM</a> 实例。
        </p>
        <p>
            当 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                id="ref-for-dom-mediakeys-13"><code>MediaKeys</code></a> 对象不再可访问时，用户代理可能会销毁该对象。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-56">
            <div role="heading" class="note-title marker" id="h-note-56" aria-level="3"><span>注</span></div>
            <p class="">
                例如，当没有脚本引用且没有附加的媒体元素时。
            </p>
        </div>
        <p>
            对于返回 promise 的方法，所有错误都通过拒绝返回的 Promise 异步报告。这包括 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>] 类型映射错误。
        </p>
        <p>
            当 promise 被拒绝时，算法的步骤将始终中止。
        </p>
        <pre class="idl def" id="webidl-2083600463"><span class="idlHeader"><a class="self-link" href="#webidl-2083600463">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeysessiontype" data-title="MediaKeySessionType">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeysessiontype" id="ref-for-dom-mediakeysessiontype-2"><code>MediaKeySessionType</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessiontype-temporary" id="ref-for-dom-mediakeysessiontype-temporary-6"><code>temporary</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessiontype-persistent-license" id="ref-for-dom-mediakeysessiontype-persistent-license-1"><code>persistent-license</code></a>"</span>
};</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="enum" id="dom-mediakeysessiontype" data-idl="enum"
                data-title="MediaKeySessionType" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>MediaKeySessionType</code></dfn> 枚举定义如下：
        </p>
        <table class="simple" data-dfn-for="MediaKeySessionType">
            <tbody>
                <tr>
                    <th colspan="2">
                        枚举说明
                    </th>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysessiontype-temporary"
                            data-idl="enum-value" data-title="temporary" data-dfn-for="MediaKeySessionType" tabindex="0"
                            aria-haspopup="dialog"><code>temporary</code></dfn>
                    </td>
                    <td>
                        <p>
                            一种会话，其许可证、密钥及与会话相关的记录或数据不被持久化。
                        </p>
                        <p>
                            应用无需管理此类存储。对该会话类型的支持为 <em class="rfc2119">必需（REQUIRED）</em>。
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeysessiontype-persistent-license"
                            data-idl="enum-value" data-title="persistent-license" data-dfn-for="MediaKeySessionType"
                            tabindex="0" aria-haspopup="dialog"><code>persistent-license</code></dfn>
                    </td>
                    <td>
                        <p>
                            一种会话，其许可证（以及可能的其它与会话相关的数据）将被持久化。当许可证及其包含的密钥被销毁时，必须持久保存一份 <a data-link-type="dfn|abstract-op"
                                href="#dfn-record-s-of-license-destruction" class="internalDFN"
                                id="ref-for-dfn-record-s-of-license-destruction-2">许可证销毁记录</a>。该“许可证销毁记录”是一个由 <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-18">Key System</a> 指定的、表明许可证及其密钥在客户端不再可用的证明。对该会话类型的支持为 <em
                                class="rfc2119">可选（OPTIONAL）</em>。
                        </p>
                        <p>
                            只有当创建此对象的 <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                                href="#dom-mediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-mediakeysystemaccess-15"><code>MediaKeySystemAccess</code></a> 对象的配置中，<a
                                data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysystemconfiguration-persistentstate-11"><code>persistentState</code></a>
                            的值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                                id="ref-for-dom-mediakeysrequirement-required-17"><code>required</code></a>"
                            时，才可以创建此类会话。该会话在成功调用 <a data-link-type="idl" data-lt="update()"
                                href="#dom-mediakeysession-update" class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-3"><code>update()</code></a> 后，必须能够通过其 <a
                                data-link-type="dfn|abstract-op" href="#dfn-session-id" class="internalDFN"
                                id="ref-for-dfn-session-id-2">Session ID</a> 被加载。一条类型为 "<a data-link-type="idl"
                                href="#dom-mediakeymessagetype-license-release" class="internalDFN"
                                id="ref-for-dom-mediakeymessagetype-license-release-1"><code>license-release</code></a>"
                            的 <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                                id="ref-for-dfn-message-1"><code>message</code></a>，其中包含 <a
                                data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-3">许可证销毁记录</a>，将在调用
                            <a data-link-type="idl" data-lt="remove()" href="#dom-mediakeysession-remove"
                                class="internalDFN" id="ref-for-dom-mediakeysession-remove-1"><code>remove()</code></a>
                            时生成，直到该记录通过传给 <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN" id="ref-for-dom-mediakeysession-update-4"><code>update()</code></a>
                            的响应被确认。
                        </p>
                        <p>
                            应用负责确保当不再需要这些会话的持久化数据时将其移除。参见 <a href="#session-storage">会话存储与持久化</a>。
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <pre class="idl def" id="webidl-742597615"><span class="idlHeader"><a class="self-link" href="#webidl-742597615">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeys" data-title="MediaKeys">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeys" id="ref-for-dom-mediakeys-14"><code>MediaKeys</code></a> {<span data-idl="" class="idlMethod" id="idl-def-mediakeys-createsession-sessiontype" data-title="createSession" data-dfn-for="MediaKeys"><span class="idlType">
    <a data-link-type="idl" href="#dom-mediakeysession" class="internalDFN" id="ref-for-dom-mediakeysession-4"><code>MediaKeySession</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeys-createsession" id="ref-for-dom-mediakeys-createsession-1"><code>createSession</code></a> (optional<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeysessiontype" class="internalDFN" id="ref-for-dom-mediakeysessiontype-3"><code>MediaKeySessionType</code></a></span> <span class="idlParamName">sessionType</span> = "temporary");</span><span data-idl="" class="idlMethod" id="idl-def-mediakeys-getstatusforpolicy-policy" data-title="getStatusForPolicy" data-dfn-for="MediaKeys"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeystatus" class="internalDFN" id="ref-for-dom-mediakeystatus-2"><code>MediaKeyStatus</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeys-getstatusforpolicy" id="ref-for-dom-mediakeys-getstatusforpolicy-2"><code>getStatusForPolicy</code></a> (optional<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeyspolicy" class="internalDFN" id="ref-for-dom-mediakeyspolicy-1"><code>MediaKeysPolicy</code></a></span> <span class="idlParamName">policy</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-mediakeys-setservercertificate-servercertificate" data-title="setServerCertificate" data-dfn-for="MediaKeys"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeys-setservercertificate" id="ref-for-dom-mediakeys-setservercertificate-1"><code>setServerCertificate</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">serverCertificate</span>);</span>
};</span></code></pre>
        <section id="methods-1">
            <div class="header-wrapper">
                <h3 id="x5-1-methods"><bdi class="secno">5.1 </bdi>
                    方法
                </h3><a class="self-link" href="#methods-1" aria-label="Permalink for Section 5.1"></a>
            </div>

            <dl class="methods" data-dfn-for="MediaKeys">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeys-createsession" data-idl="operation"
                        data-title="createSession()" data-dfn-for="MediaKeys" data-type="MediaKeySession"
                        data-lt="createSession()|createSession(sessionType)"
                        data-local-lt="MediaKeys.createSession|MediaKeys.createSession()|createSession" tabindex="0"
                        aria-haspopup="dialog"><code>createSession()</code></dfn>
                </dt>
                <dd>
                    <p>
                        返回一个新的 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                            class="internalDFN" id="ref-for-dom-mediakeysession-5"><code>MediaKeySession</code></a> 对象。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-57">
                        <div role="heading" class="note-title marker" id="h-note-57" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            <var>sessionType</var> 参数会影响返回对象的行为。
                        </p>
                    </div>
                    <p>
                        调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>supported session types</var> 值不包含 <var>sessionType</var>，则 <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                                        title="Web IDL Standard">WEBIDL</a></cite>] 一个 <a data-link-type="idl"
                                    data-lt="NotSupportedError" href="#dfn-notsupportederror" class="internalDFN"
                                    id="ref-for-dfn-notsupportederror-3"><code><code>NotSupportedError</code></code></a>。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-58">
                                <div role="heading" class="note-title marker" id="h-note-58" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    对于那些 <a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type"
                                        class="internalDFN" id="ref-for-dfn-is-persistent-session-type-4">Is persistent
                                        session type?</a> 算法返回 <code>true</code> 的 <var>sessionType</var>，如果此对象的
                                    <var>persistent state allowed</var> 值为 <code>false</code>，则会失败。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                如果实现不支持在当前状态下执行 <a data-link-type="idl" data-lt="MediaKeySession"
                                    href="#dom-mediakeysession" class="internalDFN"
                                    id="ref-for-dom-mediakeysession-6"><code>MediaKeySession</code></a> 操作，则 <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                                        title="Web IDL Standard">WEBIDL</a></cite>] 一个 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-1"><code><code>InvalidStateError</code></code></a>。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-59">
                                <div role="heading" class="note-title marker" id="h-note-59" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    有些实现直到该 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                        class="internalDFN" id="ref-for-dom-mediakeys-15"><code>MediaKeys</code></a>
                                    对象通过 <a data-link-type="idl" data-lt="setMediaKeys()"
                                        href="#dom-htmlmediaelement-setmediakeys" class="internalDFN"
                                        id="ref-for-dom-htmlmediaelement-setmediakeys-1"><code>setMediaKeys()</code></a>
                                    与媒体元素关联后，才可执行 <a data-link-type="idl" data-lt="MediaKeySession"
                                        href="#dom-mediakeysession" class="internalDFN"
                                        id="ref-for-dom-mediakeysession-7"><code>MediaKeySession</code></a>
                                    算法。此步骤使应用在尝试执行此类操作之前能够检测到这种不常见的行为。
                                </p>
                            </div>
                        </li>
                        <li>
                            <p>
                                令 <var>session</var> 为一个新的 <a data-link-type="idl" data-lt="MediaKeySession"
                                    href="#dom-mediakeysession" class="internalDFN"
                                    id="ref-for-dom-mediakeysession-8"><code>MediaKeySession</code></a> 对象，并按如下方式初始化：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysession-sessionid-1"><code>sessionId</code></a>
                                        属性为一个空字符串。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <a data-link-type="idl" href="#dom-mediakeysession-expiration"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysession-expiration-1"><code>expiration</code></a>
                                        属性为 <code>NaN</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <a data-link-type="idl" href="#dom-mediakeysession-closed" class="internalDFN"
                                            id="ref-for-dom-mediakeysession-closed-1"><code>closed</code></a> 属性
                                        为一个新的 promise。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>key status</var> 为一个新的空的 <a data-link-type="idl"
                                            data-lt="MediaKeyStatusMap" href="#dom-mediakeystatusmap"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeystatusmap-1"><code>MediaKeyStatusMap</code></a>
                                        对象，并按如下方式初始化：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                令 <a data-link-type="idl" href="#dom-mediakeystatusmap-size"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeystatusmap-size-1"><code>size</code></a>
                                                属性为 0。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        令 <var>session type</var> 值为 <var>sessionType</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>uninitialized</var> 值为 true。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>callable</var> 值为 false。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>closing or closed</var> 值为 false。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>use distinctive identifier</var> 值为此对象的 <var>use distinctive
                                            identifier</var> 值。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>cdm implementation</var> 值为此对象的 <var>cdm implementation</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>cdm instance</var> 值为此对象的 <var>cdm instance</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>session</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeys-getstatusforpolicy"
                        data-idl="operation" data-title="getStatusForPolicy()" data-dfn-for="MediaKeys"
                        data-type="Promise" data-lt="getStatusForPolicy()|getStatusForPolicy(policy)"
                        data-local-lt="MediaKeys.getStatusForPolicy|MediaKeys.getStatusForPolicy()|getStatusForPolicy"
                        tabindex="0" aria-haspopup="dialog"><code>getStatusForPolicy()</code></dfn>
                </dt>
                <dd>
                    <p id="status-for-policy">
                        返回给定 <a data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus"
                            class="internalDFN" id="ref-for-dom-mediakeystatus-3"><code>MediaKeyStatus</code></a> 对应于指定的
                        <a data-link-type="idl" data-lt="MediaKeysPolicy" href="#dom-mediakeyspolicy"
                            class="internalDFN" id="ref-for-dom-mediakeyspolicy-2"><code>MediaKeysPolicy</code></a>。
                    </p>
                    <div>
                        <pre class="idl def" id="webidl-2023973166"><span class="idlHeader"><a class="self-link" href="#webidl-2023973166">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeyspolicy" data-title="MediaKeysPolicy">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeyspolicy" data-idl="dictionary" data-title="MediaKeysPolicy" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MediaKeysPolicy</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-mediakeyspolicy-minhdcpversion" data-title="minHdcpVersion" data-dfn-for="MediaKeysPolicy"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeyspolicy-minhdcpversion" data-idl="field" data-title="minHdcpVersion" data-dfn-for="MediaKeysPolicy" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>minHdcpVersion</code></dfn>;</span>
};</span></code></pre>
                        <p>
                            <a data-link-type="idl" data-lt="MediaKeysPolicy" href="#dom-mediakeyspolicy"
                                class="internalDFN" id="ref-for-dom-mediakeyspolicy-3"><code>MediaKeysPolicy</code></a>
                            字典仅由可选属性组成。每个属性表示一项策略要求。如果 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-33">CDM</a> 会基于所有这些要求允许呈现解密后的媒体数据，则该策略被认为已满足。
                        </p>
                    </div>
                    <div>
                        <p>
                            HDCP 策略由 <a data-link-type="idl" href="#dom-mediakeyspolicy-minhdcpversion"
                                class="internalDFN"
                                id="ref-for-dom-mediakeyspolicy-minhdcpversion-1"><code>minHdcpVersion</code></a>
                            表示。如果系统能够启用所指定或更高版本的 HDCP，则该策略将导致返回的 <a data-link-type="idl" data-lt="MediaKeyStatus"
                                href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-4"><code>MediaKeyStatus</code></a> 为 "<a
                                data-link-type="idl" href="#dom-mediakeystatus-usable" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-usable-1"><code>usable</code></a>"。[<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-eme-hdcp-version-registry"
                                    title="Encrypted Media Extensions HDCP Version Registry">EME-HDCP-VERSION-REGISTRY</a></cite>]
                            提供了从 <a data-link-type="idl" href="#dom-mediakeyspolicy-minhdcpversion" class="internalDFN"
                                id="ref-for-dom-mediakeyspolicy-minhdcpversion-2"><code>minHdcpVersion</code></a> 值到
                            HDCP 规范的映射。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-60">
                            <div role="heading" class="note-title marker" id="h-note-60" aria-level="4">
                                <span>注</span>
                            </div>
                            <p class="">
                                HDCP 状态的判定应以 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                    id="ref-for-dfn-cdm-34">CDM</a>
                                在播放期间执行此类限制时的方式一致。通过这种方式，应用开发者可以获得合理的提示，以便优化他们为开始播放而获取的内容。
                            </p>
                        </div>
                    </div>
                    <p>
                        调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>If <var>policy</var> 没有任何 <a data-link-type="dfn" data-lt="exist"
                                href="https://infra.spec.whatwg.org/#map-exists">存在的</a> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">字典成员</a>，则返回一个以新建 <a
                                data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                id="ref-for-dfn-typeerror-3"><code><code>TypeError</code></code></a> 被拒绝的 promise。
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                                来运行以下步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        对 <var>policy</var> 的每个 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">字典成员</a>
                                        运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果键不是有效的 <a data-link-type="idl" data-lt="MediaKeysPolicy"
                                                    href="#dom-mediakeyspolicy" class="internalDFN"
                                                    id="ref-for-dom-mediakeyspolicy-4"><code>MediaKeysPolicy</code></a>
                                                成员或值的类型不正确，则以 <a data-link-type="idl" data-lt="TypeError"
                                                    href="#dfn-typeerror" class="internalDFN"
                                                    id="ref-for-dfn-typeerror-4"><code><code>TypeError</code></code></a>
                                                拒绝 <var>promise</var> 并中止这些步骤。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        对 <var>policy</var> 的每个 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">字典成员</a>
                                        运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-35">CDM</a> 无法确定该字典成员对应的 <a
                                                    data-link-type="idl" data-lt="MediaKeyStatus"
                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-5"><code>MediaKeyStatus</code></a>，则以
                                                <a data-link-type="idl" data-lt="NotSupportedError"
                                                    href="#dfn-notsupportederror" class="internalDFN"
                                                    id="ref-for-dfn-notsupportederror-4"><code><code>NotSupportedError</code></code></a>
                                                拒绝 <var>promise</var> 并中止这些步骤。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        对 <var>policy</var> 的每个 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-dictionary-member">字典成员</a>
                                        运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-36">CDM</a>
                                                会阻止就该字典成员呈现解密后的媒体数据，则用 "<a data-link-type="idl"
                                                    href="#dom-mediakeystatus-output-restricted" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-output-restricted-1"><code>output-restricted</code></a>"
                                                解析 <var>promise</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        用 "<a data-link-type="idl" href="#dom-mediakeystatus-usable" class="internalDFN"
                                            id="ref-for-dom-mediakeystatus-usable-2"><code>usable</code></a>" 解析
                                        <var>promise</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeys-setservercertificate"
                        data-idl="operation" data-title="setServerCertificate()" data-dfn-for="MediaKeys"
                        data-type="Promise" data-lt="setServerCertificate()|setServerCertificate(serverCertificate)"
                        data-local-lt="MediaKeys.setServerCertificate|MediaKeys.setServerCertificate()|setServerCertificate"
                        tabindex="0" aria-haspopup="dialog"><code>setServerCertificate()</code></dfn>
                </dt>
                <dd>
                    <p id="server-certificate">
                        提供一个服务器证书，用于加密发送到许可证服务器的消息。
                    </p>
                    <p>
                        使用此类证书的 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-19">Key Systems</a> 必须也支持通过 <a data-link-type="dfn|abstract-op"
                            href="#dfn-queue-a-message-event" class="internalDFN"
                            id="ref-for-dfn-queue-a-message-event-1">排队 "message" 事件</a> 算法从服务器请求该证书。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-61">
                        <div role="heading" class="note-title marker" id="h-note-61" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            此方法允许应用主动向支持该功能的实现提供服务器证书，以避免当 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-37">CDM</a> 请求证书时额外的往返。该方法用于优化，应用不必一定使用它。
                        </p>
                    </div>
                    <p>
                        服务器证书内容为 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-20">Key System</a> 特定内容。它 <em class="rfc2119">MUST NOT</em>
                        包含可执行代码。
                    </p>
                    <p>
                        调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>cdm implementation</var> 值所表示的 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-21">Key
                                    System</a> 实现不支持服务器证书，则返回一个解析为 <code>false</code> 的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>serverCertificate</var> 是空数组，则返回一个以新建 <a data-link-type="idl"
                                    data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-5"><code><code>TypeError</code></code></a> 被拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>certificate</var> 为 <var>serverCertificate</var> 参数内容的副本。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>sanitized certificate</var> 为对 <var>certificate</var> 的验证和/或清理后的版本。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-62">
                                        <div role="heading" class="note-title marker" id="h-note-62" aria-level="4">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            用户代理应在将证书传递给 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                class="internalDFN" id="ref-for-dfn-cdm-38">CDM</a>
                                            之前对其进行彻底验证。此过程可能包括验证字段值在合理范围内、剥离无关数据或字段、预解析、对其进行清理，和/或生成完全清理后的版本。用户代理应检查字段的长度和值是否合理。未知字段应被拒绝或移除。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        使用此对象的 <var>cdm instance</var> 来处理 <var>sanitized certificate</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果前一步失败，则以合适的 <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>（其
                                        name 为相应的 <a href="#error-names">错误名</a>）拒绝 <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        用 <code>true</code> 解析 <var>promise</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="algorithms-0">
            <div class="header-wrapper">
                <h3 id="x5-2-algorithms"><bdi class="secno">5.2 </bdi>
                    算法
                </h3><a class="self-link" href="#algorithms-0" aria-label="Permalink for Section 5.2"></a>
            </div>

            <section id="is-persistent-session-type">
                <div class="header-wrapper">
                    <h4 id="x5-2-1-is-persistent-session-type"><bdi class="secno">5.2.1 </bdi>
                        <dfn id="dfn-is-persistent-session-type" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Is persistent session type?</dfn>
                    </h4><a class="self-link" href="#is-persistent-session-type"
                        aria-label="Permalink for Section 5.2.1"></a>
                </div>

                <p>
                    Is persistent session type? 算法用于确定指定的会话类型是否支持任何形式的持久化。请求运行此算法时包含一个 <a data-link-type="idl"
                        data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-4"><code>MediaKeySessionType</code></a> 值。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>session type</var> 为指定的 <a data-link-type="idl" data-lt="MediaKeySessionType"
                                href="#dom-mediakeysessiontype" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-5"><code>MediaKeySessionType</code></a> 值。
                        </p>
                    </li>
                    <li>
                        <p>
                            按 <var>session type</var> 的值从下列列表中执行对应步骤：
                        </p>
                        <dl class="switch">
                            <dt>
                                "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-temporary-7"><code>temporary</code></a>"
                            </dt>
                            <dd>
                                返回 <code>false</code>。
                            </dd>
                            <dt>
                                "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-persistent-license-2"><code>persistent-license</code></a>"
                            </dt>
                            <dd>
                                返回 <code>true</code>。
                            </dd>
                        </dl>
                    </li>
                </ol>
            </section>
            <section id="cdm-unavailable">
                <div class="header-wrapper">
                    <h4 id="x5-2-2-cdm-unavailable"><bdi class="secno">5.2.2 </bdi>
                        <dfn id="dfn-cdm-unavailable" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">CDM
                            Unavailable</dfn>
                    </h4><a class="self-link" href="#cdm-unavailable" aria-label="Permalink for Section 5.2.2"></a>
                </div>

                <p>
                    CDM Unavailable 算法用于在 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                        class="internalDFN" id="ref-for-dom-mediakeysession-9"><code>MediaKeySession</code></a> 对象关联的 <a
                        data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-16"><code>MediaKeys</code></a> 对象 <var>media keys</var> 上关闭所有会话，当相应的
                    <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-39">CDM</a> 实例变为不可用时。请求运行此算法时包含一个 <a data-link-type="idl"
                        data-lt="MediaKeySessionClosedReason" href="#dom-mediakeysessionclosedreason"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysessionclosedreason-2"><code>MediaKeySessionClosedReason</code></a> 值。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>reason</var> 为指定的 <a data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                                href="#dom-mediakeysessionclosedreason" class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-3"><code>MediaKeySessionClosedReason</code></a>
                            值。
                        </p>
                    </li>
                    <li>
                        <p>
                            对于由 <var>media keys</var> 创建且尚未被 <a data-link-type="dfn|abstract-op" href="#dfn-closed"
                                class="internalDFN" id="ref-for-dfn-closed-1">closed</a> 的每个 <a data-link-type="idl"
                                data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-10"><code>MediaKeySession</code></a>，排队一个任务以在该会话上使用原因
                            <var>reason</var> 运行 <a data-link-type="dfn|abstract-op" href="#dfn-session-closed"
                                class="internalDFN" id="ref-for-dfn-session-closed-1">Session Closed</a> 算法。
                        </p>
                    </li>
                </ol>
            </section>
        </section>
        <section id="media-keys-storage">
            <div class="header-wrapper">
                <h3 id="x5-3-storage-and-persistence"><bdi class="secno">5.3 </bdi>
                    <dfn id="dfn-storage-and-persistence" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">存储与持久化</dfn>
                </h3><a class="self-link" href="#media-keys-storage" aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                本节描述与存储和持久化相关的一般要求。
            </p>
            <p>
                如果一个 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-17"><code>MediaKeys</code></a> 对象的 <var>persistent state allowed</var> 值为
                <code>false</code>，则该对象的 <var>cdm instance</var> <em class="rfc2119">不得（SHALL NOT）</em>
                因该对象或其创建的任何会话的操作而持久化状态或访问先前持久化的状态。
            </p>
            <p>
                如果一个 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-18"><code>MediaKeys</code></a> 对象的 <var>persistent state allowed</var> 值为
                <code>true</code>，则该对象的 <var>cdm instance</var> <em class="rfc2119">可以（MAY）</em>
                因该对象或其创建的任何会话的操作而持久化状态或访问先前持久化的状态。
            </p>
            <p>
                持久化的数据 <em class="rfc2119">必须（MUST）</em> 始终以仅由该对象的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                的文档访问的方式存储。此外，该数据 <em class="rfc2119">必须（MUST）</em> 仅能被当前的 <a data-link-type="dfn|abstract-op"
                    href="#dfn-browsing-profile" class="internalDFN" id="ref-for-dfn-browsing-profile-2">浏览配置文件</a>
                访问；其它浏览配置文件、用户代理和应用不得访问存储的数据。参见 <a href="#privacy-storedinfo">用户设备上存储的信息</a>。
            </p>
            <p>
                在支持持久化存储时，请参阅 <a href="#security" class="sec-ref"><bdi class="secno">10. </bdi>
                    安全</a> 和 <a href="#privacy" class="sec-ref"><bdi class="secno">11. </bdi>
                    隐私</a> 以获取更多考虑事项。
            </p>
        </section>
    </section>
    <section id="mediakeysession-interface">
        <div class="header-wrapper">
            <h2 id="x6-mediakeysession-interface"><bdi class="secno">6. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-mediakeysession" data-idl="interface"
                    data-title="MediaKeySession" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeySession</code></dfn> Interface
            </h2><a class="self-link" href="#mediakeysession-interface" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-11"><code>MediaKeySession</code></a> 对象表示一个 <a
                data-link-type="dfn|abstract-op" href="#dfn-key-session" class="internalDFN"
                id="ref-for-dfn-key-session-2">key session</a>。
        </p>
        <p>
            当且仅当对象的 <a data-link-type="idl" href="#dom-mediakeysession-closed" class="internalDFN"
                id="ref-for-dom-mediakeysession-closed-2"><code>closed</code></a> 属性已被解析时，<a data-link-type="idl"
                data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-12"><code>MediaKeySession</code></a> 对象才被视为 <dfn
                data-dfn-for="media key session" id="dfn-closed" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">closed</dfn>。
        </p>
        <p>
            用户代理 <em class="rfc2119">SHALL</em> 持续为每个未被 <a data-link-type="dfn|abstract-op" href="#dfn-closed"
                class="internalDFN" id="ref-for-dfn-closed-2">closed</a> 的 <a data-link-type="idl"
                data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-13"><code>MediaKeySession</code></a> 对象执行 <a
                data-link-type="dfn|abstract-op" href="#dfn-monitor-for-cdm-state-changes" class="internalDFN"
                id="ref-for-dfn-monitor-for-cdm-state-changes-1">Monitor for CDM State Changes</a> 算法。<a
                data-link-type="dfn|abstract-op" href="#dfn-monitor-for-cdm-state-changes" class="internalDFN"
                id="ref-for-dfn-monitor-for-cdm-state-changes-2">Monitor for CDM State Changes</a> 算法 <em
                class="rfc2119">MUST</em> 与主事件循环并行运行，但不应与本规范中也被定义为并行运行的其它过程并行执行。
        </p>
        <p>
            一个 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-14"><code>MediaKeySession</code></a> 对象 <em class="rfc2119">SHALL
                NOT</em> 被销毁，并且在它未被 <a data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                id="ref-for-dfn-closed-3">closed</a> 且创建它的 <a data-link-type="idl" data-lt="MediaKeys"
                href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-19"><code>MediaKeys</code></a>
            对象仍然可访问时 <em class="rfc2119">SHALL</em> 继续接收事件。否则，一个已不再可访问的 <a data-link-type="idl"
                data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-15"><code>MediaKeySession</code></a> 对象
            <em class="rfc2119">SHALL NOT</em> 再接收进一步的事件并且 <em class="rfc2119">MAY</em> 被销毁。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-63">
            <div role="heading" class="note-title marker" id="h-note-63" aria-level="3"><span>Note</span></div>
            <p class="">
                上述规则意味着在所有与该 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-40">CDM</a> 实例相关的 <a data-link-type="idl" data-lt="MediaKeys"
                    href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-20"><code>MediaKeys</code></a>
                对象和 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-16"><code>MediaKeySession</code></a> 对象都被销毁之前，不得销毁该 <a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-41">CDM</a>
                实例。
            </p>
        </div>
        <p>
            如果在 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                id="ref-for-dom-mediakeysession-17"><code>MediaKeySession</code></a> 对象在变得对页面不可访问时仍未被 <a
                data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                id="ref-for-dfn-closed-4">closed</a>，则相应的 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                class="internalDFN" id="ref-for-dfn-cdm-42">CDM</a> 必须关闭与该对象关联的 <a data-link-type="dfn|abstract-op"
                href="#dfn-key-session" class="internalDFN" id="ref-for-dfn-key-session-3">key session</a>。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-64">
            <div role="heading" class="note-title marker" id="h-note-64" aria-level="3"><span>Note</span></div>
            <p class="">
                关闭 key session 会导致销毁任何未被显式存储的许可证和密钥。
            </p>
        </div>
        <div class="note" role="note" id="issue-container-generatedID-65">
            <div role="heading" class="note-title marker" id="h-note-65" aria-level="3"><span>Note</span></div>
            <p class="">
                何时精确关闭 key session 属于实现细节，应用不应依赖具体的时序。

                想要在采取其它操作之前确保会话已关闭的应用 <em class="rfc2119">SHOULD</em> 调用 <a data-link-type="idl" data-lt="close()"
                    href="#dom-mediakeysession-close" class="internalDFN"
                    id="ref-for-dom-mediakeysession-close-1"><code>close</code></a><code>()</code> 并等待返回的 promise 被解析。
            </p>
        </div>
        <p>
            对于返回 promise 的方法，所有错误都通过拒绝返回的 Promise 异步报告。这也包括 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>] 的类型映射错误。
        </p>
        <p>
            当拒绝 promise 时，算法的下列步骤将始终中止。
        </p>
        <pre class="idl def" id="webidl-103604943"><span class="idlHeader"><a class="self-link" href="#webidl-103604943">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeysessionclosedreason" data-title="MediaKeySessionClosedReason">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeysessionclosedreason" id="ref-for-dom-mediakeysessionclosedreason-4"><code>MediaKeySessionClosedReason</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-internal-error" id="ref-for-dom-mediakeysessionclosedreason-internal-error-1"><code>internal-error</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-closed-by-application" id="ref-for-dom-mediakeysessionclosedreason-closed-by-application-1"><code>closed-by-application</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-release-acknowledged" id="ref-for-dom-mediakeysessionclosedreason-release-acknowledged-1"><code>release-acknowledged</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-hardware-context-reset" id="ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-1"><code>hardware-context-reset</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeysessionclosedreason-resource-evicted" id="ref-for-dom-mediakeysessionclosedreason-resource-evicted-1"><code>resource-evicted</code></a>"</span>
};</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="enum" id="dom-mediakeysessionclosedreason" data-idl="enum"
                data-title="MediaKeySessionClosedReason" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>MediaKeySessionClosedReason</code></dfn> 枚举定义如下：
        </p>
        <table class="simple" data-dfn-for="MediaKeySessionClosedReason">
            <tbody>
                <tr>
                    <th colspan="2">
                        枚举说明
                    </th>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-internal-error" data-idl="enum-value"
                            data-title="internal-error" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>internal-error</code></dfn>
                    </td>
                    <td>
                        该会话因 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-43">CDM</a> 中发生不可恢复错误而被关闭。发生此情况时，应用 <em class="rfc2119">MUST NOT</em> 在该
                        <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                            id="ref-for-dom-mediakeys-21"><code>MediaKeys</code></a> 实例上创建新的会话。
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-closed-by-application" data-idl="enum-value"
                            data-title="closed-by-application" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>closed-by-application</code></dfn>
                    </td>
                    <td>
                        该会话是因为应用显式调用会话的 <a data-link-type="idl" data-lt="close()" href="#dom-mediakeysession-close"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysession-close-2"><code>close</code></a><code>()</code> 方法而被关闭。
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-release-acknowledged" data-idl="enum-value"
                            data-title="release-acknowledged" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>release-acknowledged</code></dfn>
                    </td>
                    <td>
                        该会话因为 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-44">CDM</a> 收到许可证销毁记录的确认而被关闭。
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-hardware-context-reset" data-idl="enum-value"
                            data-title="hardware-context-reset" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>hardware-context-reset</code></dfn>
                    </td>
                    <td>
                        该会话因为 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-45">CDM</a> 的原始硬件上下文被重置而被关闭。
                        发生此情况时，用户代理 <em class="rfc2119">MUST</em> 允许应用在该 <a data-link-type="idl" data-lt="MediaKeys"
                            href="#dom-mediakeys" class="internalDFN"
                            id="ref-for-dom-mediakeys-22"><code>MediaKeys</code></a> 实例上创建新会话。
                        <div class="note" role="note" id="issue-container-generatedID-66">
                            <div role="heading" class="note-title marker" id="h-note-66" aria-level="3">
                                <span>Note</span>
                            </div>
                            <div class="">
                                <p>
                                    这可能由多种原因引起，包括设备休眠、显示器配置更改等。硬件上下文重置的具体原因取决于实现。
                                </p>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <dfn data-export="" data-dfn-type="enum-value"
                            id="dom-mediakeysessionclosedreason-resource-evicted" data-idl="enum-value"
                            data-title="resource-evicted" data-dfn-for="MediaKeySessionClosedReason" tabindex="0"
                            aria-haspopup="dialog"><code>resource-evicted</code></dfn>
                    </td>
                    <td>
                        该会话因系统需要回收资源以允许创建其它会话而被关闭。
                        <div class="note" role="note" id="issue-container-generatedID-67">
                            <div role="heading" class="note-title marker" id="h-note-67" aria-level="3">
                                <span>Note</span>
                            </div>
                            <div class="">
                                <p>
                                    这表示应用已达到设备特定的会话资源限制。如果被关闭的会话仍然需要，应用开发者应考虑减少所需会话数或主动关闭不需要的会话等策略。
                                </p>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <pre class="idl def" id="webidl-782043315"><span class="idlHeader"><a class="self-link" href="#webidl-782043315">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeysession" data-title="MediaKeySession">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeysession" id="ref-for-dom-mediakeysession-18"><code>MediaKeySession</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-sessionid" data-title="sessionId" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>                            <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-sessionid" id="ref-for-dom-mediakeysession-sessionid-2"><code>sessionId</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-expiration" data-title="expiration" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">unrestricted double</a></span>                  <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-expiration" id="ref-for-dom-mediakeysession-expiration-2"><code>expiration</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-closed" data-title="closed" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-mediakeysessionclosedreason" class="internalDFN" id="ref-for-dom-mediakeysessionclosedreason-5"><code>MediaKeySessionClosedReason</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-closed" id="ref-for-dom-mediakeysession-closed-3"><code>closed</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-keystatuses" data-title="keyStatuses" data-dfn-for="MediaKeySession">
  readonly        attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeystatusmap" class="internalDFN" id="ref-for-dom-mediakeystatusmap-2"><code>MediaKeyStatusMap</code></a></span>                    <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-keystatuses" id="ref-for-dom-mediakeysession-keystatuses-2"><code>keyStatuses</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-onkeystatuseschange" data-title="onkeystatuseschange" data-dfn-for="MediaKeySession">
                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span>                         <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-onkeystatuseschange" id="ref-for-dom-mediakeysession-onkeystatuseschange-1"><code>onkeystatuseschange</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeysession-onmessage" data-title="onmessage" data-dfn-for="MediaKeySession">
                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span>                         <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeysession-onmessage" id="ref-for-dom-mediakeysession-onmessage-1"><code>onmessage</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-generaterequest-initdatatype-initdata" data-title="generateRequest" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-generaterequest" id="ref-for-dom-mediakeysession-generaterequest-3"><code>generateRequest</code></a> (<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">initDataType</span>,<span class="idlType"> <a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">initData</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-load-sessionid" data-title="load" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-load" id="ref-for-dom-mediakeysession-load-2"><code>load</code></a> (<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">sessionId</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-update-response" data-title="update" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-update" id="ref-for-dom-mediakeysession-update-5"><code>update</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">response</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-close" data-title="close" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-close" id="ref-for-dom-mediakeysession-close-3"><code>close</code></a> ();</span><span data-idl="" class="idlMethod" id="idl-def-mediakeysession-remove" data-title="remove" data-dfn-for="MediaKeySession"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span>    <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeysession-remove" id="ref-for-dom-mediakeysession-remove-2"><code>remove</code></a> ();</span>
};</span></code></pre>
        <section id="attributes-0">
            <div class="header-wrapper">
                <h3 id="x6-1-attributes"><bdi class="secno">6.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-0" aria-label="Permalink for Section 6.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="MediaKeySession">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-sessionid"
                        data-idl="attribute" data-title="sessionId" data-dfn-for="MediaKeySession" data-type="DOMString"
                        data-lt="sessionId" data-local-lt="MediaKeySession.sessionId" tabindex="0"
                        aria-haspopup="dialog"><code>sessionId</code></dfn> 类型为 <a data-link-type="interface"
                        data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>, 只读
                </dt>
                <dd>
                    <p>
                        此对象及其关联的 key(s) 或 license(s) 的 <a data-link-type="dfn|abstract-op" href="#dfn-session-id"
                            class="internalDFN" id="ref-for-dfn-session-id-3">Session ID</a>。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-expiration"
                        data-idl="attribute" data-title="expiration" data-dfn-for="MediaKeySession"
                        data-type="unrestricted double" data-lt="expiration" data-local-lt="MediaKeySession.expiration"
                        tabindex="0" aria-haspopup="dialog"><code>expiration</code></dfn> 类型为 <a
                        data-link-type="interface" data-lt="unrestricted double"
                        href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><code>unrestricted double</code></a>,
                    只读
                </dt>
                <dd>
                    <p>
                        会话中所有 key(s) 的 <a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                            id="ref-for-dfn-expiration-2">到期时间</a>，如果不存在此类时间或 CDM 明确指示许可证永不过期，则为 <code>NaN</code>，由 <a
                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-46">CDM</a> 决定。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-68">
                        <div role="heading" class="note-title marker" id="h-note-68" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            此值在会话生命周期内 <em class="rfc2119">可能（MAY）</em> 发生变化，例如某个操作触发了窗口开始时间。
                        </p>
                    </div>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-closed" data-idl="attribute"
                        data-title="closed" data-dfn-for="MediaKeySession" data-type="Promise" data-lt="closed"
                        data-local-lt="MediaKeySession.closed" tabindex="0"
                        aria-haspopup="dialog"><code>closed</code></dfn> 类型为 <span class="idlAttrType">Promise&lt;<a
                            data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                            href="#dom-mediakeysessionclosedreason" class="internalDFN"
                            id="ref-for-dom-mediakeysessionclosedreason-6"><code>MediaKeySessionClosedReason</code></a>&gt;</span>,
                    只读
                </dt>
                <dd>
                    <p>
                        当因运行 <a data-link-type="dfn|abstract-op" href="#dfn-session-closed" class="internalDFN"
                            id="ref-for-dfn-session-closed-2">Session Closed</a> 算法而导致该对象被视为 <a
                            data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                            id="ref-for-dfn-closed-5">closed</a> 时发出信号。此 promise 只能被 fulfilled，不会被 rejected。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-keystatuses"
                        data-idl="attribute" data-title="keyStatuses" data-dfn-for="MediaKeySession"
                        data-type="MediaKeyStatusMap" data-lt="keyStatuses" data-local-lt="MediaKeySession.keyStatuses"
                        tabindex="0" aria-haspopup="dialog"><code>keyStatuses</code></dfn> 类型为 <a data-link-type="idl"
                        data-lt="MediaKeyStatusMap" href="#dom-mediakeystatusmap" class="internalDFN"
                        id="ref-for-dom-mediakeystatusmap-3"><code>MediaKeyStatusMap</code></a>,
                    只读
                </dt>
                <dd>
                    <p>
                        对只读映射的引用，该映射将 <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id"
                            class="internalDFN" id="ref-for-dfn-decryption-key-id-5">key IDs</a>（对会话已知）映射到关联密钥的当前状态。每个条目
                        <em class="rfc2119">必须（MUST）</em> 具有唯一的 key ID。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-69">
                        <div role="heading" class="note-title marker" id="h-note-69" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            映射条目及其值可能在事件循环运行时被更新。映射 <em class="rfc2119">不得（MUST NOT）</em>
                            出现不一致或部分更新，但在两次访问之间如果事件循环运行过，映射可能发生变化。Key IDs 可能因调用 <a data-link-type="idl" data-lt="load()"
                                href="#dom-mediakeysession-load" class="internalDFN"
                                id="ref-for-dom-mediakeysession-load-3"><code>load()</code></a> 或 <a
                                data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN" id="ref-for-dom-mediakeysession-update-6"><code>update()</code></a>
                            而被添加。Key IDs 可能因调用 <a data-link-type="idl" data-lt="update()"
                                href="#dom-mediakeysession-update" class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-7"><code>update()</code></a>
                            并移除对现有密钥的知识（或用新的一组密钥替换现有集合）而被移除。Key IDs <em class="rfc2119">不得（MUST NOT）</em>
                            因变得不可用（例如到期）而被移除。相反，此类密钥 <em class="rfc2119">必须（MUST）</em> 被赋予适当的状态，例如 "<a
                                data-link-type="idl" href="#dom-mediakeystatus-expired" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-expired-1"><code>expired</code></a>"。
                        </p>
                    </div>
                    <div class="note" role="note" id="issue-container-generatedID-70">
                        <div role="heading" class="note-title marker" id="h-note-70" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            某些旧平台上的 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-22">Key System</a> 实现可能不暴露 key
                            IDs，从而无法提供完全符合规范的用户代理实现。为了最大化互操作性，暴露此类 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-47">CDMs</a> 的用户代理实现 <em
                                class="rfc2119">应（SHOULD）</em> 如下实现此成员：每当应有非空列表（例如该对象表示的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-session" class="internalDFN"
                                id="ref-for-dfn-key-session-4">key session</a> 可能包含 <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-s" class="internalDFN" id="ref-for-dfn-key-s-5">key(s)</a>
                            时），用一对条目填充映射，条目使用单字节 key ID <code>0</code> 和最适合该对象聚合状态的 <a data-link-type="idl"
                                data-lt="MediaKeyStatus" href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-6"><code>MediaKeyStatus</code></a>。
                        </p>
                    </div>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-onkeystatuseschange"
                        data-idl="attribute" data-title="onkeystatuseschange" data-dfn-for="MediaKeySession"
                        data-type="EventHandler" data-lt="onkeystatuseschange"
                        data-local-lt="MediaKeySession.onkeystatuseschange" tabindex="0"
                        aria-haspopup="dialog"><code>onkeystatuseschange</code></dfn> 类型为 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        用于处理 <a data-link-type="idl" data-lt="keystatuseschange" href="#dfn-keystatuseschange"
                            class="internalDFN"
                            id="ref-for-dfn-keystatuseschange-1"><code><code>keystatuseschange</code></code></a>
                        事件的事件处理器。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeysession-onmessage"
                        data-idl="attribute" data-title="onmessage" data-dfn-for="MediaKeySession"
                        data-type="EventHandler" data-lt="onmessage" data-local-lt="MediaKeySession.onmessage"
                        tabindex="0" aria-haspopup="dialog"><code>onmessage</code></dfn> 类型为 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        用于处理 <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                            id="ref-for-dfn-message-2"><code><code>message</code></code></a> 事件的事件处理器。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="methods-2">
            <div class="header-wrapper">
                <h3 id="x6-2-methods"><bdi class="secno">6.2 </bdi>
                    方法
                </h3><a class="self-link" href="#methods-2" aria-label="Permalink for Section 6.2"></a>
            </div>

            <dl class="methods" data-dfn-for="MediaKeySession">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-generaterequest"
                        data-idl="operation" data-title="generateRequest()" data-dfn-for="MediaKeySession"
                        data-type="Promise" data-lt="generateRequest()|generateRequest(initDataType, initData)"
                        data-local-lt="MediaKeySession.generateRequest|MediaKeySession.generateRequest()|generateRequest"
                        tabindex="0" aria-haspopup="dialog"><code>generateRequest()</code></dfn>
                </dt>
                <dd>
                    <p>
                        基于 <var>initData</var> 生成许可证请求。如果算法成功并且 promise 被解析，则类型为
                        "<a data-link-type="idl" href="#dom-mediakeymessagetype-license-request" class="internalDFN"
                            id="ref-for-dom-mediakeymessagetype-license-request-1"><code>license-request</code></a>" 或
                        "<a data-link-type="idl" href="#dom-mediakeymessagetype-individualization-request"
                            class="internalDFN"
                            id="ref-for-dom-mediakeymessagetype-individualization-request-1"><code>individualization-request</code></a>"
                        的 <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                            id="ref-for-dfn-message-3"><code><code>message</code></code></a> 将始终被排入队列。
                    </p>
                    <p>
                        当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>closing or closed</var> 值为 true，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-2"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果此对象的 <var>uninitialized</var> 值为 false，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-3"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                将此对象的 <var>uninitialized</var> 值设为 false。
                            </p>
                        </li>

                        <li>
                            <p>
                                如果 <var>initDataType</var> 是空字符串，则返回一个以新建的 <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-6"><code><code>TypeError</code></code></a> 拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>initData</var> 是空数组，则返回一个以新建的 <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-7"><code><code>TypeError</code></code></a> 拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果此对象的 <var>cdm implementation</var> 值所表示的 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-23">Key
                                    System</a> 实现不支持将 <var>initDataType</var> 作为一种 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-initialization-data-type" class="internalDFN"
                                    id="ref-for-dfn-initialization-data-type-5">Initialization Data Type</a>，则返回一个以 <a
                                    data-link-type="idl" data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                    class="internalDFN"
                                    id="ref-for-dfn-notsupportederror-5"><code><code>NotSupportedError</code></code></a>
                                拒绝的 promise。字符串比较区分大小写。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>init data</var> 为 <var>initData</var> 参数内容的副本。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>session type</var> 为此对象的 <var>session type</var>。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        如果 <var>init data</var> 对于 <var>initDataType</var> 无效，则以新建的 <a
                                            data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                            class="internalDFN"
                                            id="ref-for-dfn-typeerror-8"><code><code>TypeError</code></code></a> 拒绝
                                        <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>sanitized init data</var> 为经验证和清理后的 <var>init data</var> 版本。
                                    </p>
                                    <p>
                                        用户代理 <em class="rfc2119">MUST</em> 在将 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-initialization-data" class="internalDFN"
                                            id="ref-for-dfn-initialization-data-7">Initialization Data</a> 传递给 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-48">CDM</a>
                                        之前对其进行彻底验证。这包括验证字段的长度和值是否合理、验证值是否在合理范围内，以及剥离无关、不支持或未知的数据或字段。建议用户代理对 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                            class="internalDFN" id="ref-for-dfn-initialization-data-8">Initialization
                                            Data</a> 进行预解析、清理和/或生成完全清理后的版本。如果 <var>initDataType</var> 指定的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                            class="internalDFN" id="ref-for-dfn-initialization-data-9">Initialization
                                            Data</a> 格式支持多条目，用户代理 <em class="rfc2119">SHOULD</em> 移除 CDM 不需要的条目。用户代理 <em
                                            class="rfc2119">MUST NOT</em> 重新排序 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-initialization-data" class="internalDFN"
                                            id="ref-for-dfn-initialization-data-10">Initialization Data</a> 中的条目。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果前一步失败，则以新建的 <a data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                            class="internalDFN"
                                            id="ref-for-dfn-typeerror-9"><code><code>TypeError</code></code></a> 拒绝
                                        <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>sanitized init data</var> 为空，则以 <a data-link-type="idl"
                                            data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                            class="internalDFN"
                                            id="ref-for-dfn-notsupportederror-6"><code><code>NotSupportedError</code></code></a>
                                        拒绝 <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>session id</var> 为空字符串。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message type</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>cdm</var> 为由此对象的 <var>cdm instance</var> 值所表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-50">CDM</a> 实例。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        使用 <var>cdm</var> 执行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果 <var>sanitized init data</var> 不被 <var>cdm</var> 支持，则以 <a
                                                    data-link-type="idl" data-lt="NotSupportedError"
                                                    href="#dfn-notsupportederror" class="internalDFN"
                                                    id="ref-for-dfn-notsupportederror-7"><code><code>NotSupportedError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                按下列列表中与 <var>session type</var> 值相对应的条目执行步骤：
                                            </p>
                                            <dl class="switch">
                                                <dt>
                                                    "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysessiontype-temporary-8"><code>temporary</code></a>"
                                                </dt>
                                                <dd>
                                                    <p>
                                                        将 <var>requested license type</var> 设为一个临时的不可持久化的许可证。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-71">
                                                        <div role="heading" class="note-title marker" id="h-note-71"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            返回的许可证不得为可持久化的，也不得要求持久化与其相关的信息。
                                                        </p>
                                                    </div>
                                                </dd>
                                                <dt>
                                                    "<a data-link-type="idl"
                                                        href="#dom-mediakeysessiontype-persistent-license"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysessiontype-persistent-license-3"><code>persistent-license</code></a>"
                                                </dt>
                                                <dd>
                                                    <p>
                                                        将 <var>requested license type</var> 设为可持久化的许可证。
                                                    </p>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <p>
                                                令 <var>session id</var> 为一个唯一的 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-session-id" class="internalDFN"
                                                    id="ref-for-dfn-session-id-4">Session ID</a> 字符串。
                                            </p>
                                            <p>
                                                如果对 <var>session type</var> 运行 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-is-persistent-session-type" class="internalDFN"
                                                    id="ref-for-dfn-is-persistent-session-type-5">Is persistent session
                                                    type?</a> 算法的结果为 <code>true</code>，则该 ID <em
                                                    class="rfc2119">MUST</em> 在此对象的 <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                                范围内随时间保持唯一，包括跨越不同的 Documents 和浏览会话。
                                            </p>
                                        </li>
                                        <li>
                                            <dl class="switch">
                                                <dt>
                                                    如果可基于 <var>sanitized init data</var> 生成针对 <var>requested license
                                                        type</var> 的许可证请求：
                                                </dt>
                                                <dd>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                令 <var>message</var> 为基于按照 <var>initDataType</var> 解释的
                                                                <var>sanitized init data</var> 所生成的、用于 <var>requested
                                                                    license type</var> 的许可证请求。
                                                            </p>
                                                            <p>
                                                                <var>cdm</var> <em class="rfc2119">MUST NOT</em>
                                                                使用任何流特定数据，包括未通过 <var>sanitized init data</var> 提供的 <a
                                                                    data-link-type="dfn"
                                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                                                                    data</a>。
                                                            </p>
                                                            <p>
                                                                <var>cdm</var> <em class="rfc2119">SHOULD NOT</em>
                                                                在此时存储会话数据，包括会话 ID。参见 <a
                                                                    href="#session-storage">会话存储与持久化</a>。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                令 <var>message type</var> 为 "<a data-link-type="idl"
                                                                    href="#dom-mediakeymessagetype-license-request"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeymessagetype-license-request-2"><code>license-request</code></a>"。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                                <dt>
                                                    否则：
                                                </dt>
                                                <dd>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                令 <var>message</var> 为在生成可基于 <var>sanitized init
                                                                    data</var> 的 <var>requested license type</var>
                                                                许可证请求之前需要被处理的请求。
                                                            </p>
                                                            <p>
                                                                在随后对 <a data-link-type="idl" data-lt="update()"
                                                                    href="#dom-mediakeysession-update"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeysession-update-8"><code>update()</code></a>
                                                                的调用中，<a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                                    class="internalDFN" id="ref-for-dfn-cdm-51">CDM</a>
                                                                <em class="rfc2119">MUST</em> 基于按照
                                                                <var>initDataType</var> 解释的 <var>sanitized init
                                                                    data</var> 生成针对 <var>requested license type</var>
                                                                的许可证请求。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                令 <var>message type</var> 表示 <var>message</var> 的类型，为
                                                                "<a data-link-type="idl"
                                                                    href="#dom-mediakeymessagetype-license-request"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeymessagetype-license-request-3"><code>license-request</code></a>"
                                                                或 "<a data-link-type="idl"
                                                                    href="#dom-mediakeymessagetype-individualization-request"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeymessagetype-individualization-request-2"><code>individualization-request</code></a>"。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                            </dl>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                            a task）</a> 来运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果前述任何步骤因资源短缺而失败，则以 <a data-link-type="idl" data-lt="QuotaExceededError"
                                                    href="#dfn-quotaexceedederror" class="internalDFN"
                                                    id="ref-for-dfn-quotaexceedederror-2"><code><code>QuotaExceededError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果前述任何步骤因其它原因失败，则以一个新的 <a data-link-type="interface"
                                                    data-lt="DOMException"
                                                    href="https://webidl.spec.whatwg.org/#dfn-DOMException"><code>DOMException</code></a>（其
                                                name 为相应的 <a href="#error-names">error name</a>） 拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                将 <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-sessionid-3"><code>sessionId</code></a>
                                                属性设为 <var>session id</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                将此对象的 <var>callable</var> 值设为 true。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                用 <code>undefined</code> 解析 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-queue-a-message-event" class="internalDFN"
                                                    id="ref-for-dfn-queue-a-message-event-2">Queue a "message" Event</a>
                                                算法，提供 <var>message type</var> 和 <var>message</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-load" data-idl="operation"
                        data-title="load()" data-dfn-for="MediaKeySession" data-type="Promise"
                        data-lt="load()|load(sessionId)"
                        data-local-lt="MediaKeySession.load|MediaKeySession.load()|load" tabindex="0"
                        aria-haspopup="dialog"><code>load()</code></dfn>
                </dt>
                <dd>
                    <p>
                        将为指定会话存储的数据加载到此对象中。
                    </p>
                    <p>
                        当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>closing or closed</var> 值为 true，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-4"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果此对象的 <var>uninitialized</var> 值为 false，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-5"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                将此对象的 <var>uninitialized</var> 值设为 false。
                            </p>
                        </li>

                        <li>
                            <p>
                                如果 <var>sessionId</var> 是空字符串，则返回一个以新建的 <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-10"><code><code>TypeError</code></code></a> 拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果对本对象的 <var>session type</var> 运行 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-is-persistent-session-type" class="internalDFN"
                                    id="ref-for-dfn-is-persistent-session-type-6">Is persistent session type?</a> 算法的结果为
                                <code>false</code>，则返回一个以新建的 <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-11"><code><code>TypeError</code></code></a> 拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>origin</var> 为此对象的 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>sanitized session ID</var> 为 <var>sessionId</var> 的经验证和/或清理后的版本。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-72">
                                        <div role="heading" class="note-title marker" id="h-note-72" aria-level="4">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            用户代理在将 sessionId 值传递给 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                class="internalDFN" id="ref-for-dfn-cdm-52">CDM</a>
                                            之前应对其进行彻底验证。至少应检查长度和值是否合理（例如，不超过几十个字符且为字母数字）。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        如果前一步失败，或 <var>sanitized session ID</var> 为空，则以新建的 <a data-link-type="idl"
                                            data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                            id="ref-for-dfn-typeerror-12"><code><code>TypeError</code></code></a> 拒绝
                                        <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果在本对象的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-document">Document</a> 中存在一个尚未被
                                        <a data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                                            id="ref-for-dfn-closed-6">closed</a> 的 <a data-link-type="idl"
                                            data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                                            id="ref-for-dom-mediakeysession-19"><code>MediaKeySession</code></a> 对象，且其
                                        <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                            class="internalDFN"
                                            id="ref-for-dom-mediakeysession-sessionid-4"><code>sessionId</code></a> 属性等于
                                        <var>sanitized session ID</var>，则以 <a data-link-type="idl"
                                            data-lt="QuotaExceededError" href="#dfn-quotaexceedederror"
                                            class="internalDFN"
                                            id="ref-for-dfn-quotaexceedederror-3"><code><code>QuotaExceededError</code></code></a>
                                        拒绝 <var>promise</var>。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-73">
                                        <div role="heading" class="note-title marker" id="h-note-73" aria-level="4">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            换言之，如果在此浏览上下文中已存在一个针对该 <var>sanitized session ID</var>
                                            的未关闭会话（不论类型），则不要创建新会话。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        令 <var>expiration time</var> 为 <code>NaN</code>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message type</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>cdm</var> 为由此对象的 <var>cdm instance</var> 值所表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-53">CDM</a> 实例。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        使用 <var>cdm</var> 执行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果在 <var>origin</var> 中不存在针对 <var>sanitized session ID</var> 的存储数据，则以
                                                <code>false</code> 解析 <var>promise</var> 并中止这些步骤。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果存储的会话的 <var>session type</var> 与当前本对象的 <a data-link-type="idl"
                                                    data-lt="MediaKeySession" href="#dom-mediakeysession"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-20"><code>MediaKeySession</code></a>
                                                的 <var>session type</var> 不同，则以新建的 <a data-link-type="idl"
                                                    data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                                    id="ref-for-dfn-typeerror-13"><code><code>TypeError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                令 <var>session data</var> 为在 <var>origin</var> 下为 <var>sanitized session
                                                    ID</var> 存储的数据。此数据 <em class="rfc2119">MUST NOT</em> 包含来自其它 origin
                                                的数据或与 origin 无关的数据。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果存在一个在任一 <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                                                中尚未被 <a data-link-type="dfn|abstract-op" href="#dfn-closed"
                                                    class="internalDFN" id="ref-for-dfn-closed-7">closed</a> 且表示该
                                                <var>session data</var> 的 <a data-link-type="idl"
                                                    data-lt="MediaKeySession" href="#dom-mediakeysession"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-21"><code>MediaKeySession</code></a>
                                                对象，则以 <a data-link-type="idl" data-lt="QuotaExceededError"
                                                    href="#dfn-quotaexceedederror" class="internalDFN"
                                                    id="ref-for-dfn-quotaexceedederror-4"><code><code>QuotaExceededError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-74">
                                                <div role="heading" class="note-title marker" id="h-note-74"
                                                    aria-level="4"><span>注</span></div>
                                                <p class="">
                                                    换言之，如果在任何浏览上下文中已存在针对该 <var>sanitized session ID</var>
                                                    的未关闭持久会话，则不要创建新会话。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                加载 <var>session data</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>session data</var> 指示了该会话的某个 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-expiration" class="internalDFN"
                                                    id="ref-for-dfn-expiration-3">expiration time</a>，则将 <var>expiration
                                                    time</var> 设为该到期时间。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果需要发送消息，则执行下列步骤：
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        令 <var>message</var> 为基于 <var>session data</var> 生成的消息。
                                                    </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        令 <var>message type</var> 为该消息的适当 <a data-link-type="idl"
                                                            data-lt="MediaKeyMessageType"
                                                            href="#dom-mediakeymessagetype" class="internalDFN"
                                                            id="ref-for-dom-mediakeymessagetype-1"><code>MediaKeyMessageType</code></a>。
                                                    </p>
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                            a task）</a> 来运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果前述任何步骤失败，则以适当的 <a href="#error-names">error name</a> 拒绝
                                                <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                将 <a data-link-type="idl" href="#dom-mediakeysession-sessionid"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysession-sessionid-5"><code>sessionId</code></a>
                                                属性设为 <var>sanitized session ID</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                将此对象的 <var>callable</var> 值设为 true。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果已加载的会话包含有关任何密钥的信息（存在 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-known" class="internalDFN" id="ref-for-dfn-known-2">known
                                                    keys</a>），则对 <var>session</var> 运行 <a
                                                    data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                                    class="internalDFN" id="ref-for-dfn-update-key-statuses-1">Update
                                                    Key Statuses</a> 算法，提供每个密钥的 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-decryption-key-id" class="internalDFN"
                                                    id="ref-for-dfn-decryption-key-id-6">key ID</a> 及相应的 <a
                                                    data-link-type="idl" data-lt="MediaKeyStatus"
                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-7"><code>MediaKeyStatus</code></a>。
                                            </p>
                                            <p>
                                                如果确定某密钥的状态需要额外处理，可使用 "<a data-link-type="idl"
                                                    href="#dom-mediakeystatus-status-pending" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-status-pending-1"><code>status-pending</code></a>"。一旦对一个或多个密钥的额外处理完成，再次运行
                                                <a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                                    class="internalDFN" id="ref-for-dfn-update-key-statuses-2">Update
                                                    Key Statuses</a> 算法并提供实际状态。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-update-expiration" class="internalDFN"
                                                    id="ref-for-dfn-update-expiration-1">Update Expiration</a> 算法，提供
                                                <var>expiration time</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                用 <code>true</code> 解析 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>message</var> 非 null，则在 <var>session</var> 上运行 <a
                                                    data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event"
                                                    class="internalDFN" id="ref-for-dfn-queue-a-message-event-3">Queue a
                                                    "message" Event</a> 算法，提供 <var>message type</var> 和
                                                <var>message</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-update" data-idl="operation"
                        data-title="update()" data-dfn-for="MediaKeySession" data-type="Promise"
                        data-lt="update()|update(response)"
                        data-local-lt="MediaKeySession.update|MediaKeySession.update()|update" tabindex="0"
                        aria-haspopup="dialog"><code>update()</code></dfn>
                </dt>
                <dd>
                    <p>
                        向 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-54">CDM</a> 提供消息（包括许可证）。
                    </p>
                    <p>
                        <var>response</var> 参数包含要提供给 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                            class="internalDFN" id="ref-for-dfn-cdm-55">CDM</a> 的消息。其内容依赖于 <a
                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-24">Key System</a>，且 <em class="rfc2119">MUST NOT</em> 包含可执行代码。
                    </p>
                    <p>
                        当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>closing or closed</var> 值为 true，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-6"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果此对象的 <var>callable</var> 值为 false，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-7"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>response</var> 是空数组，则返回一个以新建的 <a data-link-type="idl" data-lt="TypeError"
                                    href="#dfn-typeerror" class="internalDFN"
                                    id="ref-for-dfn-typeerror-14"><code><code>TypeError</code></code></a> 拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>response copy</var> 为 <var>response</var> 参数内容的副本。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>sanitized response</var> 为对 <var>response copy</var> 经验证和/或清理后的版本。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-75">
                                        <div role="heading" class="note-title marker" id="h-note-75" aria-level="4">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            用户代理在将响应传递给 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                class="internalDFN" id="ref-for-dfn-cdm-56">CDM</a>
                                            之前应对其进行彻底验证。这可能包括验证字段值在合理范围内、剥离无关数据或字段、预解析、清理和/或生成完全清理后的版本。用户代理应检查字段的长度和值是否合理。未知字段应被拒绝或移除。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        如果前一步失败，或 <var>sanitized response</var> 为空，则以新建的 <a data-link-type="idl"
                                            data-lt="TypeError" href="#dfn-typeerror" class="internalDFN"
                                            id="ref-for-dfn-typeerror-15"><code><code>TypeError</code></code></a> 拒绝
                                        <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message type</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>session closed</var> 为 false。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>cdm</var> 为由此对象的 <var>cdm instance</var> 值所表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-57">CDM</a> 实例。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        使用 <var>cdm</var> 执行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果 <var>sanitized response</var> 的格式在任何方面无效，则以新建的 <a
                                                    data-link-type="idl" data-lt="TypeError" href="#dfn-typeerror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-typeerror-16"><code><code>TypeError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                处理 <var>sanitized response</var>，并按下列列表中首个匹配条件的规定执行：
                                            </p>
                                            <dl class="switch">
                                                <dt>
                                                    如果 <var>sanitized response</var> 包含许可证或密钥
                                                </dt>
                                                <dd>
                                                    <div class="note" role="note" id="issue-container-generatedID-76">
                                                        <div role="heading" class="note-title marker" id="h-note-76"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            这包括初始许可证、更新许可证以及许可证续订消息。
                                                        </p>
                                                    </div>
                                                    <p>
                                                        处理 <var>sanitized response</var>，并按下列列表中首个匹配条件的规定执行：
                                                    </p>
                                                    <dl class="switch">
                                                        <dt>
                                                            如果 <var>sessionType</var> 为 "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-temporary"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-temporary-9"><code>temporary</code></a>"
                                                            且 <var>sanitized response</var>
                                                            未指定应存储其包含的会话数据（包括任何许可证、密钥或类似会话数据）
                                                        </dt>
                                                        <dd>
                                                            处理 <var>sanitized response</var>，但不存储任何会话数据。
                                                        </dd>
                                                        <dt>
                                                            如果 <var>sessionType</var> 为 "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-persistent-license"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-persistent-license-4"><code>persistent-license</code></a>"
                                                            且 <var>sanitized response</var> 包含可持久化的许可证
                                                        </dt>
                                                        <dd>
                                                            处理 <var>sanitized response</var>，并存储 <var>sanitized
                                                                response</var> 中包含的许可证/密钥及相关会话数据。此类数据 <em
                                                                class="rfc2119">MUST</em> 以仅能由此对象的 <a
                                                                data-link-type="dfn"
                                                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                                                            访问的方式存储。
                                                        </dd>
                                                        <dt>
                                                            否则
                                                        </dt>
                                                        <dd>
                                                            <p>
                                                                以新建的 <a data-link-type="idl" data-lt="TypeError"
                                                                    href="#dfn-typeerror" class="internalDFN"
                                                                    id="ref-for-dfn-typeerror-17"><code><code>TypeError</code></code></a>
                                                                拒绝 <var>promise</var>。
                                                            </p>
                                                        </dd>
                                                    </dl>
                                                    <p>
                                                        另见 <a href="#session-storage">会话存储与持久化</a>。
                                                    </p>
                                                    <p>
                                                        每个会话的状态信息（包括密钥） <em class="rfc2119">MUST</em>
                                                        以这样一种方式存储：关闭一个会话不会影响其它会话中可观察到的状态，即使这些会话包含重叠的 key ID。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-77">
                                                        <div role="heading" class="note-title marker" id="h-note-77"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            当 <var>sanitized response</var> 包含密钥和/或相关数据时，<var>cdm</var>
                                                            很可能在内存中按 key ID 存储该密钥和相关数据。
                                                        </p>
                                                    </div>
                                                    <div class="note" role="note" id="issue-container-generatedID-78">
                                                        <div role="heading" class="note-title marker" id="h-note-78"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            会话内部的替换算法依赖于 <a data-link-type="dfn|abstract-op"
                                                                href="#dfn-key-system" class="internalDFN"
                                                                id="ref-for-dfn-key-system-25">Key System</a>。
                                                        </p>
                                                    </div>
                                                    <div class="note" role="note" id="issue-container-generatedID-79">
                                                        <div role="heading" class="note-title marker" id="h-note-79"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            建议 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                                class="internalDFN" id="ref-for-dfn-cdm-58">CDM</a>
                                                            实现支持每个 <a data-link-type="idl" data-lt="MediaKeySession"
                                                                href="#dom-mediakeysession" class="internalDFN"
                                                                id="ref-for-dom-mediakeysession-22"><code>MediaKeySession</code></a>
                                                            对象的标准且合理的最小密钥数目（包含标准替换算法），以及标准且合理的最小 <a data-link-type="idl"
                                                                data-lt="MediaKeySession" href="#dom-mediakeysession"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysession-23"><code>MediaKeySession</code></a>
                                                            对象数目。这使得在用户代理之间能够实现合理数量的密钥轮换算法，并可能在涉及同一元素中多路流（例如自适应流、不同音视频轨道）使用不同密钥的用例中减少播放中断的可能性。
                                                        </p>
                                                    </div>
                                                </dd>
                                                <dt>
                                                    如果 <var>sanitized response</var> 包含 <a
                                                        data-link-type="dfn|abstract-op"
                                                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                                                        id="ref-for-dfn-record-s-of-license-destruction-5">许可证销毁记录</a>
                                                    的确认且 <var>sessionType</var> 为 "<a data-link-type="idl"
                                                        href="#dom-mediakeysessiontype-persistent-license"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysessiontype-persistent-license-5"><code>persistent-license</code></a>"
                                                </dt>
                                                <dd>
                                                    <p>
                                                        运行下列步骤：
                                                    </p>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                关闭 <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-key-session" class="internalDFN"
                                                                    id="ref-for-dfn-key-session-5">key session</a>
                                                                并清除与此对象关联的 <em>所有</em> 存储会话数据，包括 <a data-link-type="idl"
                                                                    href="#dom-mediakeysession-sessionid"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeysession-sessionid-6"><code>sessionId</code></a>
                                                                和 <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-record-s-of-license-destruction"
                                                                    class="internalDFN"
                                                                    id="ref-for-dfn-record-s-of-license-destruction-6">许可证销毁记录</a>。
                                                            </p>
                                                            <div class="note" role="note"
                                                                id="issue-container-generatedID-80">
                                                                <div role="heading" class="note-title marker"
                                                                    id="h-note-80" aria-level="4"><span>注</span>
                                                                </div>
                                                                <p class="">
                                                                    随后的对 <a data-link-type="idl" data-lt="load()"
                                                                        href="#dom-mediakeysession-load"
                                                                        class="internalDFN"
                                                                        id="ref-for-dom-mediakeysession-load-4"><code>load()</code></a>
                                                                    的调用，若使用此对象的 <a data-link-type="idl"
                                                                        href="#dom-mediakeysession-sessionid"
                                                                        class="internalDFN"
                                                                        id="ref-for-dom-mediakeysession-sessionid-7"><code>sessionId</code></a>
                                                                    值，将会失败，因为该会话 ID 不再有存储的数据。
                                                                </p>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                将 <var>session closed</var> 设为 true。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                                <dt>
                                                    否则
                                                </dt>
                                                <dd>
                                                    处理 <var>sanitized response</var>，但不存储任何会话数据。
                                                    <div class="note" role="note" id="issue-container-generatedID-81">
                                                        <div role="heading" class="note-title marker" id="h-note-81"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            例如，<var>sanitized response</var> 可能包含将用于生成另一个 <a
                                                                data-link-type="idl" data-lt="message"
                                                                href="#dfn-message" class="internalDFN"
                                                                id="ref-for-dfn-message-4"><code><code>message</code></code></a>
                                                            事件的信息。在这种情况下，无需验证其内容是否与 <var>sessionType</var> 匹配。
                                                        </p>
                                                    </div>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <p>
                                                如果需要发送消息，执行下列步骤：
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        令 <var>message</var> 为该消息。
                                                    </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        令 <var>message type</var> 为该消息的适当 <a data-link-type="idl"
                                                            data-lt="MediaKeyMessageType"
                                                            href="#dom-mediakeymessagetype" class="internalDFN"
                                                            id="ref-for-dom-mediakeymessagetype-2"><code>MediaKeyMessageType</code></a>。
                                                    </p>
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                            a task）</a> 来运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <dl class="switch">
                                                <dt>
                                                    如果 <var>session closed</var> 为 true：
                                                </dt>
                                                <dd>
                                                    <p>
                                                        在此对象上以原因 "<a data-link-type="idl"
                                                            href="#dom-mediakeysessionclosedreason-release-acknowledged"
                                                            class="internalDFN"
                                                            id="ref-for-dom-mediakeysessionclosedreason-release-acknowledged-2"><code>release-acknowledged</code></a>"
                                                        运行 <a data-link-type="dfn|abstract-op"
                                                            href="#dfn-session-closed" class="internalDFN"
                                                            id="ref-for-dfn-session-closed-3">Session Closed</a> 算法。
                                                    </p>
                                                </dd>
                                                <dt>
                                                    否则：
                                                </dt>
                                                <dd>
                                                    <p>
                                                        运行下列步骤：
                                                    </p>
                                                    <ol>
                                                        <li>
                                                            <p>
                                                                如果此对象的 <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-cdm" class="internalDFN"
                                                                    id="ref-for-dfn-cdm-59">CDM</a>
                                                                对该对象已知的密钥集合变化或任何密钥的状态发生变化，则对 <var>session</var> 运行 <a
                                                                    data-link-type="dfn|abstract-op"
                                                                    href="#dfn-update-key-statuses" class="internalDFN"
                                                                    id="ref-for-dfn-update-key-statuses-3">Update Key
                                                                    Statuses</a> 算法，提供每个已知密钥的 <a
                                                                    data-link-type="dfn|abstract-op"
                                                                    href="#dfn-decryption-key-id" class="internalDFN"
                                                                    id="ref-for-dfn-decryption-key-id-7">key ID</a> 及相应的
                                                                <a data-link-type="idl" data-lt="MediaKeyStatus"
                                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                                    id="ref-for-dom-mediakeystatus-8"><code>MediaKeyStatus</code></a>。
                                                            </p>
                                                            <p>
                                                                如果确定某密钥的状态需要额外处理，可使用 "<a data-link-type="idl"
                                                                    href="#dom-mediakeystatus-status-pending"
                                                                    class="internalDFN"
                                                                    id="ref-for-dom-mediakeystatus-status-pending-2"><code>status-pending</code></a>"。一旦额外处理完成，再次运行
                                                                <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-update-key-statuses" class="internalDFN"
                                                                    id="ref-for-dfn-update-key-statuses-4">Update Key
                                                                    Statuses</a> 算法并提供实际状态。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                如果会话的 <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-expiration" class="internalDFN"
                                                                    id="ref-for-dfn-expiration-4">expiration time</a>
                                                                发生变化，则在 <var>session</var> 上运行 <a
                                                                    data-link-type="dfn|abstract-op"
                                                                    href="#dfn-update-expiration" class="internalDFN"
                                                                    id="ref-for-dfn-update-expiration-2">Update
                                                                    Expiration</a> 算法，提供新的到期时间。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                如果前述任一步骤失败，则以新的 <a data-link-type="interface"
                                                                    data-lt="DOMException"
                                                                    href="https://webidl.spec.whatwg.org/#dfn-DOMException"><code>DOMException</code></a>（其
                                                                name 为相应的 <a href="#error-names">error name</a>） 拒绝
                                                                <var>promise</var>。
                                                            </p>
                                                        </li>
                                                        <li>
                                                            <p>
                                                                如果 <var>message</var> 非 null，则在 <var>session</var> 上运行
                                                                <a data-link-type="dfn|abstract-op"
                                                                    href="#dfn-queue-a-message-event"
                                                                    class="internalDFN"
                                                                    id="ref-for-dfn-queue-a-message-event-4">Queue a
                                                                    "message" Event</a> 算法，提供 <var>message type</var> 和
                                                                <var>message</var>。
                                                            </p>
                                                        </li>
                                                    </ol>
                                                </dd>
                                            </dl>
                                        </li>
                                        <li>
                                            <p>
                                                用 <code>undefined</code> 解析 <var>promise</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-close" data-idl="operation"
                        data-title="close()" data-dfn-for="MediaKeySession" data-type="Promise" data-lt="close()"
                        data-local-lt="MediaKeySession.close|MediaKeySession.close()|close" tabindex="0"
                        aria-haspopup="dialog"><code>close()</code></dfn>
                </dt>
                <dd>
                    <p>
                        表示应用不再需要该会话，且 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-60">CDM</a> 应释放与会话关联的任何资源并关闭该会话。已持久化的数据不应被释放或清除。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-82">
                        <div role="heading" class="note-title marker" id="h-note-82" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            当请求被处理完毕时，返回的 promise 将被解析；当会话关闭时，<a data-link-type="idl" href="#dom-mediakeysession-closed"
                                class="internalDFN" id="ref-for-dom-mediakeysession-closed-4"><code>closed</code></a>
                            属性的 promise 将被解析为 "<a data-link-type="idl"
                                href="#dom-mediakeysessionclosedreason-closed-by-application" class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-closed-by-application-2"><code>closed-by-application</code></a>"。
                        </p>
                    </div>
                    <p>
                        当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>closing or closed</var> 值为 true，则返回一个解析为 <code>undefined</code> 的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果此对象的 <var>callable</var> 值为 false，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-8"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                将此对象的 <var>closing or closed</var> 值设为 true。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>cdm</var> 为由此对象的 <var>cdm instance</var> 值所表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-61">CDM</a> 实例。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        使用 <var>cdm</var> 关闭与此对象关联的 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-key-session" class="internalDFN"
                                            id="ref-for-dfn-key-session-6">key session</a>。
                                    </p>
                                    <div class="note" role="note" id="issue-container-generatedID-83">
                                        <div role="heading" class="note-title marker" id="h-note-83" aria-level="4">
                                            <span>注</span>
                                        </div>
                                        <p class="">
                                            关闭 key session 会导致销毁任何未被显式存储的许可证和密钥。
                                        </p>
                                    </div>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                            a task）</a> 来运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                用 <code>undefined</code> 解析 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                在此对象上以原因 "<a data-link-type="idl"
                                                    href="#dom-mediakeysessionclosedreason-closed-by-application"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeysessionclosedreason-closed-by-application-3"><code>closed-by-application</code></a>"
                                                运行 <a data-link-type="dfn|abstract-op" href="#dfn-session-closed"
                                                    class="internalDFN" id="ref-for-dfn-session-closed-4">Session
                                                    Closed</a> 算法。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-mediakeysession-remove" data-idl="operation"
                        data-title="remove()" data-dfn-for="MediaKeySession" data-type="Promise" data-lt="remove()"
                        data-local-lt="MediaKeySession.remove|MediaKeySession.remove()|remove" tabindex="0"
                        aria-haspopup="dialog"><code>remove()</code></dfn>
                </dt>
                <dd>
                    <p>
                        移除与该会话关联的所有许可证和密钥。对于 <a href="#is-persistent-session-type">持久会话类型</a>，其它会话数据将在释放消息确认被 <a
                            data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                            class="internalDFN" id="ref-for-dom-mediakeysession-update-9"><code>update()</code></a>
                        处理后按每种会话类型的定义被清除。
                    </p>
                    <p>
                        当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">
                        <li>
                            <p>
                                如果此对象的 <var>closing or closed</var> 值为 true，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-9"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果此对象的 <var>callable</var> 值为 false，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-10"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>cdm</var> 为由此对象的 <var>cdm instance</var> 值所表示的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                            id="ref-for-dfn-cdm-62">CDM</a> 实例。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>message type</var> 为 null。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        使用 <var>cdm</var> 执行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果有任何许可证和/或密钥与该会话相关联：
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        销毁与该会话关联的许可证和/或密钥。
                                                    </p>
                                                    <div class="note" role="note" id="issue-container-generatedID-84">
                                                        <div role="heading" class="note-title marker" id="h-note-84"
                                                            aria-level="4"><span>注</span></div>
                                                        <p class="">
                                                            这意味着无论许可证和/或密钥是在内存中、持久存储中或两者中，都将被销毁。
                                                        </p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <p>
                                                        按下列列表中与此对象的 <var>session type</var> 值相对应的条目执行步骤：
                                                    </p>
                                                    <dl class="switch">
                                                        <dt>
                                                            "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-temporary"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-temporary-10"><code>temporary</code></a>"
                                                        </dt>
                                                        <dd>
                                                            <p>
                                                                继续执行下列步骤。
                                                            </p>
                                                        </dd>
                                                        <dt>
                                                            "<a data-link-type="idl"
                                                                href="#dom-mediakeysessiontype-persistent-license"
                                                                class="internalDFN"
                                                                id="ref-for-dom-mediakeysessiontype-persistent-license-6"><code>persistent-license</code></a>"
                                                        </dt>
                                                        <dd>
                                                            <ol>
                                                                <li>
                                                                    <p>
                                                                        令 <var>record of license destruction</var>
                                                                        为表示此对象所代表许可证的 <a
                                                                            data-link-type="dfn|abstract-op"
                                                                            href="#dfn-record-s-of-license-destruction"
                                                                            class="internalDFN"
                                                                            id="ref-for-dfn-record-s-of-license-destruction-7">许可证销毁记录</a>。
                                                                    </p>
                                                                </li>
                                                                <li>
                                                                    <p>
                                                                        存储该 <var>record of license destruction</var>。
                                                                    </p>
                                                                </li>
                                                                <li>
                                                                    <p>
                                                                        令 <var>message</var> 为包含或反映该 <var>record of
                                                                            license destruction</var> 的消息。
                                                                    </p>
                                                                </li>
                                                            </ol>
                                                        </dd>
                                                    </dl>
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                            a task）</a> 来运行下列步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-update-key-statuses" class="internalDFN"
                                                    id="ref-for-dfn-update-key-statuses-5">Update Key Statuses</a>
                                                算法，为会话中的所有 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-decryption-key-id" class="internalDFN"
                                                    id="ref-for-dfn-decryption-key-id-8">key ID</a> 提供 "<a
                                                    data-link-type="idl" href="#dom-mediakeystatus-released"
                                                    class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-released-1"><code>released</code></a>"
                                                的 <a data-link-type="idl" data-lt="MediaKeyStatus"
                                                    href="#dom-mediakeystatus" class="internalDFN"
                                                    id="ref-for-dom-mediakeystatus-9"><code>MediaKeyStatus</code></a> 值。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-update-expiration" class="internalDFN"
                                                    id="ref-for-dfn-update-expiration-3">Update Expiration</a> 算法，提供
                                                <code>NaN</code>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果前述任一步骤失败，则以新的 <a data-link-type="interface" data-lt="DOMException"
                                                    href="https://webidl.spec.whatwg.org/#dfn-DOMException"><code>DOMException</code></a>（其
                                                name 为相应的 <a href="#error-names">error name</a>） 拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                令 <var>message type</var> 为 "<a data-link-type="idl"
                                                    href="#dom-mediakeymessagetype-license-release" class="internalDFN"
                                                    id="ref-for-dom-mediakeymessagetype-license-release-2"><code>license-release</code></a>"。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                用 <code>undefined</code> 解析 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>message</var> 非 <code>null</code>，则在 <var>session</var> 上运行 <a
                                                    data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event"
                                                    class="internalDFN" id="ref-for-dfn-queue-a-message-event-5">Queue a
                                                    "message" Event</a> 算法，提供 <var>message type</var> 和
                                                <var>message</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="mediakeystatusmap-interface">
            <div class="header-wrapper">
                <h3 id="x6-3-mediakeystatusmap-interface"><bdi class="secno">6.3 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-mediakeystatusmap" data-idl="interface"
                        data-title="MediaKeyStatusMap" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>MediaKeyStatusMap</code></dfn> 接口
                </h3><a class="self-link" href="#mediakeystatusmap-interface"
                    aria-label="Permalink for Section 6.3"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="MediaKeyStatusMap" href="#dom-mediakeystatusmap" class="internalDFN"
                    id="ref-for-dom-mediakeystatusmap-4"><code>MediaKeyStatusMap</code></a> 对象是一个只读映射，
                将 <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                    id="ref-for-dfn-decryption-key-id-9">key IDs</a> 映射到关联密钥的当前状态。
            </p>
            <p>
                密钥的状态与该密钥当前是否正在被使用以及与媒体数据无关。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-85">
                <div role="heading" class="note-title marker" id="h-note-85" aria-level="4"><span>注</span></div>
                <p class="">
                    例如，如果某个密钥具有当前无法满足的输出要求，则无论该密钥是否已被或当前被用来解密媒体数据，其状态都应相应地为 "<a data-link-type="idl"
                        href="#dom-mediakeystatus-output-downscaled" class="internalDFN"
                        id="ref-for-dom-mediakeystatus-output-downscaled-1"><code>output-downscaled</code></a>" 或
                    "<a data-link-type="idl" href="#dom-mediakeystatus-output-restricted" class="internalDFN"
                        id="ref-for-dom-mediakeystatus-output-restricted-2"><code>output-restricted</code></a>"。
                </p>
            </div>
            <pre class="idl def" id="webidl-366396555"><span class="idlHeader"><a class="self-link" href="#webidl-366396555">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeystatusmap" data-title="MediaKeyStatusMap">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-mediakeystatusmap" id="ref-for-dom-mediakeystatusmap-5"><code>MediaKeyStatusMap</code></a> {<span data-idl="" class="idlIterable" id="idl-def-mediakeystatusmap-iterable" data-title="iterable" data-dfn-for="MediaKeyStatusMap">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-iterable">iterable</a>&lt;<a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a>,<a data-link-type="idl" href="#dom-mediakeystatus" class="internalDFN" id="ref-for-dom-mediakeystatus-10"><code>MediaKeyStatus</code></a>&gt;;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeystatusmap-size" data-title="size" data-dfn-for="MediaKeyStatusMap">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeystatusmap-size" id="ref-for-dom-mediakeystatusmap-size-2"><code>size</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-mediakeystatusmap-has-keyid" data-title="has" data-dfn-for="MediaKeyStatusMap"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeystatusmap-has" id="ref-for-dom-mediakeystatusmap-has-1"><code>has</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">keyId</span>);</span><span data-idl="" class="idlMethod" id="idl-def-mediakeystatusmap-get-keyid" data-title="get" data-dfn-for="MediaKeyStatusMap"><span class="idlType">
  (<a data-link-type="idl" href="#dom-mediakeystatus" class="internalDFN" id="ref-for-dom-mediakeystatus-11"><code>MediaKeyStatus</code></a> or <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>)</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-mediakeystatusmap-get" id="ref-for-dom-mediakeystatusmap-get-1"><code>get</code></a> (<span class="idlType"><a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a></span> <span class="idlParamName">keyId</span>);</span>
};</span></code></pre>
            <section id="attributes-1">
                <div class="header-wrapper">
                    <h4 id="x6-3-1-attributes"><bdi class="secno">6.3.1 </bdi>
                        属性
                    </h4><a class="self-link" href="#attributes-1" aria-label="Permalink for Section 6.3.1"></a>
                </div>

                <dl class="attributes" data-dfn-for="MediaKeyStatusMap">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeystatusmap-size"
                            data-idl="attribute" data-title="size" data-dfn-for="MediaKeyStatusMap"
                            data-type="unsigned long" data-lt="size" data-local-lt="MediaKeyStatusMap.size" tabindex="0"
                            aria-haspopup="dialog"><code>size</code></dfn> 类型为 <a data-link-type="interface"
                            data-lt="unsigned long"
                            href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><code>unsigned long</code></a>,
                        只读
                    </dt>
                    <dd>
                        <p>
                            已知的 <a data-link-type="dfn|abstract-op" href="#dfn-known" class="internalDFN"
                                id="ref-for-dfn-known-4">known keys</a> 的数量。
                        </p>
                    </dd>
                </dl>
            </section>
            <section id="methods-3">
                <div class="header-wrapper">
                    <h4 id="x6-3-2-methods"><bdi class="secno">6.3.2 </bdi>
                        方法
                    </h4><a class="self-link" href="#methods-3" aria-label="Permalink for Section 6.3.2"></a>
                </div>

                <dl class="methods" data-dfn-for="MediaKeyStatusMap">
                    <dt>
                        <dfn data-export="" data-dfn-type="method" id="dom-mediakeystatusmap-has" data-idl="operation"
                            data-title="has()" data-dfn-for="MediaKeyStatusMap" data-type="boolean"
                            data-lt="has()|has(keyId)" data-local-lt="MediaKeyStatusMap.has|MediaKeyStatusMap.has()|has"
                            tabindex="0" aria-haspopup="dialog"><code>has()</code></dfn>
                    </dt>
                    <dd>
                        <p>
                            如果已知由 <var>keyId</var> 标识的密钥的状态，则返回 <code>true</code>。
                        </p>
                    </dd>
                    <dt>
                        <dfn data-export="" data-dfn-type="method" id="dom-mediakeystatusmap-get" data-idl="operation"
                            data-title="get()" data-dfn-for="MediaKeyStatusMap" data-type="MediaKeyStatus|undefined"
                            data-lt="get()|get(keyId)" data-local-lt="MediaKeyStatusMap.get|MediaKeyStatusMap.get()|get"
                            tabindex="0" aria-haspopup="dialog"><code>get()</code></dfn>
                    </dt>
                    <dd>
                        <p>
                            返回由 <var>keyId</var> 标识的密钥的 <a data-link-type="idl" data-lt="MediaKeyStatus"
                                href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-12"><code>MediaKeyStatus</code></a>，
                            如果由 <var>keyId</var> 标识的密钥的状态未知，则返回 <code>undefined</code>。
                        </p>
                    </dd>
                </dl>
                <p>
                    此接口具有由 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-iterable">iterable</a>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                            title="Web IDL Standard">WebIDL</a></cite>] 提供的
                    <code>entries</code>、<code>keys</code>、<code>values</code>、
                    <code>forEach</code> 和 <code>@@iterator</code> 方法。
                </p>
                <p>
                    要迭代的键值对是针对所有 <a data-link-type="dfn|abstract-op" href="#dfn-known" class="internalDFN"
                        id="ref-for-dfn-known-5">known keys</a> 所形成的 <a data-link-type="dfn|abstract-op"
                        href="#dfn-decryption-key-id" class="internalDFN" id="ref-for-dfn-decryption-key-id-10">key
                        ID</a> 与其关联的 <a data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus"
                        class="internalDFN" id="ref-for-dom-mediakeystatus-13"><code>MediaKeyStatus</code></a> 值的快照，按 <a
                        data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-11">key ID</a> 排序。Key ID 的比较方式如下：对于长度为 <var>m</var> 的 key ID
                    <var>A</var> 和长度为 <var>n</var> 的 <var>B</var>，令 <var>m</var> &lt;= <var>n</var>，当且仅当 <var>A</var> 的
                    <var>m</var> 个八位字节在字典序中小于 <var>B</var> 的前 <var>m</var> 个八位字节，或这些八位字节相等且 <var>m</var> &lt;
                    <var>n</var> 时，判定 <var>A</var> &lt; <var>B</var>。
                </p>
            </section>
            <pre class="idl def" id="webidl-418631828"><span class="idlHeader"><a class="self-link" href="#webidl-418631828">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeystatus" data-title="MediaKeyStatus">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeystatus" id="ref-for-dom-mediakeystatus-14"><code>MediaKeyStatus</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-usable" id="ref-for-dom-mediakeystatus-usable-3"><code>usable</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-expired" id="ref-for-dom-mediakeystatus-expired-2"><code>expired</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-released" id="ref-for-dom-mediakeystatus-released-2"><code>released</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-output-restricted" id="ref-for-dom-mediakeystatus-output-restricted-3"><code>output-restricted</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-output-downscaled" id="ref-for-dom-mediakeystatus-output-downscaled-2"><code>output-downscaled</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-usable-in-future" id="ref-for-dom-mediakeystatus-usable-in-future-2"><code>usable-in-future</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-status-pending" id="ref-for-dom-mediakeystatus-status-pending-3"><code>status-pending</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeystatus-internal-error" id="ref-for-dom-mediakeystatus-internal-error-1"><code>internal-error</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-mediakeystatus" data-idl="enum"
                    data-title="MediaKeyStatus" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeyStatus</code></dfn> 枚举定义如下：
            </p>
            <table class="simple" data-dfn-for="MediaKeyStatus">
                <tbody>
                    <tr>
                        <th colspan="2">
                            枚举说明
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-usable"
                                data-idl="enum-value" data-title="usable" data-dfn-for="MediaKeyStatus" tabindex="0"
                                aria-haspopup="dialog"><code>usable</code></dfn>
                        </td>
                        <td>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-63">CDM</a> 确定该密钥当前可用于 <a data-link-type="dfn|abstract-op"
                                href="#dfn-usable-for-decryption" class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-3">解密</a>。<br>
                            可能当前不可用于 <a data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption"
                                class="internalDFN" id="ref-for-dfn-usable-for-decryption-4">解密</a> 的密钥 <em
                                class="rfc2119">MUST NOT</em> 被标示为此状态。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-expired"
                                data-idl="enum-value" data-title="expired" data-dfn-for="MediaKeyStatus" tabindex="0"
                                aria-haspopup="dialog"><code>expired</code></dfn>
                        </td>
                        <td>
                            该密钥因其 <a data-link-type="dfn|abstract-op" href="#dfn-expiration" class="internalDFN"
                                id="ref-for-dfn-expiration-5">到期时间</a> 已过而不再可用于 <a data-link-type="dfn|abstract-op"
                                href="#dfn-usable-for-decryption" class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-5">解密</a>。<br>
                            <a data-link-type="idl" href="#dom-mediakeysession-expiration" class="internalDFN"
                                id="ref-for-dom-mediakeysession-expiration-3"><code>expiration</code></a> 属性表示的时间 <em
                                class="rfc2119">MUST</em> 早于当前时间。会话中的所有其他密钥 <em class="rfc2119">MUST</em> 具有此状态。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-released"
                                data-idl="enum-value" data-title="released" data-dfn-for="MediaKeyStatus" tabindex="0"
                                aria-haspopup="dialog"><code>released</code></dfn>
                        </td>
                        <td>
                            该密钥本身不再可供 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-64">CDM</a> 使用，
                            但有关该密钥的信息（例如 <a data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-8">许可证销毁记录</a>）仍然可用。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-output-restricted"
                                data-idl="enum-value" data-title="output-restricted" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>output-restricted</code></dfn>
                        </td>
                        <td>
                            与该密钥相关的输出限制当前无法满足。使用此密钥解密的媒体数据可能会在必要时被阻止呈现以遵守输出限制。应用应避免使用会触发该密钥相关输出限制的流。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-output-downscaled"
                                data-idl="enum-value" data-title="output-downscaled" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>output-downscaled</code></dfn>
                        </td>
                        <td>
                            与该密钥相关的输出限制当前无法满足。根据输出限制的需要，使用此密钥解密的媒体数据可能以较低质量（例如分辨率）呈现。应用应避免使用会触发该密钥相关输出限制的流。<br>
                            对下采样（downscaling）的支持为 <em class="rfc2119">可选（OPTIONAL）</em>。应用 <em class="rfc2119">SHOULD
                                NOT</em> 依赖下采样以在输出要求无法满足时确保播放不中断。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-usable-in-future"
                                data-idl="enum-value" data-title="usable-in-future" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>usable-in-future</code></dfn>
                        </td>
                        <td>
                            该密钥尚未可用于 <a data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption"
                                class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-6">解密</a>，因为其开始时间在将来。该密钥将在其开始时间到达时变为可用。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-status-pending"
                                data-idl="enum-value" data-title="status-pending" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>status-pending</code></dfn>
                        </td>
                        <td>
                            该密钥的状态尚不确定，正在确定中。一旦确定，将使用实际状态进行更新。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeystatus-internal-error"
                                data-idl="enum-value" data-title="internal-error" data-dfn-for="MediaKeyStatus"
                                tabindex="0" aria-haspopup="dialog"><code>internal-error</code></dfn>
                        </td>
                        <td>
                            由于 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-65">CDM</a> 中发生了与其它值无关的错误，该密钥当前不可用于 <a
                                data-link-type="dfn|abstract-op" href="#dfn-usable-for-decryption" class="internalDFN"
                                id="ref-for-dfn-usable-for-decryption-7">解密</a>。此值对应用不可行动（non-actionable）。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="mediakeymessageevent">
            <div class="header-wrapper">
                <h3 id="x6-4-mediakeymessageevent"><bdi class="secno">6.4 </bdi>
                    <a data-link-type="idl" data-lt="MediaKeyMessageEvent" href="#dom-mediakeymessageevent"
                        class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-1"><code>MediaKeyMessageEvent</code></a>
                </h3><a class="self-link" href="#mediakeymessageevent" aria-label="Permalink for Section 6.4"></a>
            </div>

            <p>
                <code>MediaKeyMessageEvent</code> 对象用于 <a data-link-type="idl" data-lt="message" href="#dfn-message"
                    class="internalDFN" id="ref-for-dfn-message-5"><code><code>message</code></code></a> 事件。
            </p>
            <pre class="idl def" id="webidl-1754914033"><span class="idlHeader"><a class="self-link" href="#webidl-1754914033">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-mediakeymessagetype" data-title="MediaKeyMessageType">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-mediakeymessagetype" id="ref-for-dom-mediakeymessagetype-3"><code>MediaKeyMessageType</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-license-request" id="ref-for-dom-mediakeymessagetype-license-request-4"><code>license-request</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-license-renewal" id="ref-for-dom-mediakeymessagetype-license-renewal-1"><code>license-renewal</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-license-release" id="ref-for-dom-mediakeymessagetype-license-release-3"><code>license-release</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-mediakeymessagetype-individualization-request" id="ref-for-dom-mediakeymessagetype-individualization-request-3"><code>individualization-request</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum" id="dom-mediakeymessagetype" data-idl="enum"
                    data-title="MediaKeyMessageType" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>MediaKeyMessageType</code></dfn> 定义如下：
            </p>
            <table class="simple" data-dfn-for="MediaKeyMessageType">
                <tbody>
                    <tr>
                        <th colspan="2">
                            枚举说明
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeymessagetype-license-request"
                                data-idl="enum-value" data-title="license-request" data-dfn-for="MediaKeyMessageType"
                                tabindex="0" aria-haspopup="dialog"><code>license-request</code></dfn>
                        </td>
                        <td>
                            消息包含对新许可证的请求。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeymessagetype-license-renewal"
                                data-idl="enum-value" data-title="license-renewal" data-dfn-for="MediaKeyMessageType"
                                tabindex="0" aria-haspopup="dialog"><code>license-renewal</code></dfn>
                        </td>
                        <td>
                            消息包含对现有许可证的续订请求。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value" id="dom-mediakeymessagetype-license-release"
                                data-idl="enum-value" data-title="license-release" data-dfn-for="MediaKeyMessageType"
                                tabindex="0" aria-haspopup="dialog"><code>license-release</code></dfn>
                        </td>
                        <td>
                            消息包含一份 <a data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-9">许可证销毁记录</a>。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <dfn data-export="" data-dfn-type="enum-value"
                                id="dom-mediakeymessagetype-individualization-request" data-idl="enum-value"
                                data-title="individualization-request" data-dfn-for="MediaKeyMessageType" tabindex="0"
                                aria-haspopup="dialog"><code>individualization-request</code></dfn>
                        </td>
                        <td>
                            消息包含对 <a data-link-type="dfn|abstract-op" href="#dfn-app-assisted-individualization"
                                class="internalDFN" id="ref-for-dfn-app-assisted-individualization-1">App-Assisted
                                Individualization</a>（或重新个性化）的请求。<br>
                            与其它消息一样，消息中的任何标识符 <em class="rfc2119">MUST</em> 在 <a
                                href="#per-origin-per-profile-identifiers">origin 与 profile 范围内保持区别性</a>，且 <em
                                class="rfc2119">MUST NOT</em> 为 <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-permanent-identifier-s-18">Distinctive Permanent
                                Identifiers</a>。
                        </td>
                    </tr>
                </tbody>
            </table>
            <pre class="idl def" id="webidl-1595553803"><span class="idlHeader"><a class="self-link" href="#webidl-1595553803">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediakeymessageevent" data-title="MediaKeyMessageEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-mediakeymessageevent" data-idl="interface" data-title="MediaKeyMessageEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MediaKeyMessageEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-mediakeymessageevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="MediaKeyMessageEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-mediakeymessageevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="MediaKeyMessageEvent" data-lt="constructor()|constructor(type, eventInitDict)" data-local-lt="MediaKeyMessageEvent.constructor|MediaKeyMessageEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>,<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeymessageeventinit" class="internalDFN" id="ref-for-dom-mediakeymessageeventinit-1"><code>MediaKeyMessageEventInit</code></a></span> <span class="idlParamName">eventInitDict</span>);</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeymessageevent-messagetype" data-title="messageType" data-dfn-for="MediaKeyMessageEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeymessagetype" class="internalDFN" id="ref-for-dom-mediakeymessagetype-4"><code>MediaKeyMessageType</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeymessageevent-messagetype" id="ref-for-dom-mediakeymessageevent-messagetype-1"><code>messageType</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediakeymessageevent-message" data-title="message" data-dfn-for="MediaKeyMessageEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span>         <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediakeymessageevent-message" id="ref-for-dom-mediakeymessageevent-message-1"><code>message</code></a>;</span>
};</span></code></pre>
            <section id="attributes-2">
                <div class="header-wrapper">
                    <h4 id="x6-4-1-attributes"><bdi class="secno">6.4.1 </bdi>
                        属性
                    </h4><a class="self-link" href="#attributes-2" aria-label="Permalink for Section 6.4.1"></a>
                </div>

                <dl class="attributes" data-dfn-for="MediaKeyMessageEvent">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeymessageevent-messagetype"
                            data-idl="attribute" data-title="messageType" data-dfn-for="MediaKeyMessageEvent"
                            data-type="MediaKeyMessageType" data-lt="messageType"
                            data-local-lt="MediaKeyMessageEvent.messageType" tabindex="0"
                            aria-haspopup="dialog"><code>messageType</code></dfn> 类型为 <a data-link-type="idl"
                            data-lt="MediaKeyMessageType" href="#dom-mediakeymessagetype" class="internalDFN"
                            id="ref-for-dom-mediakeymessagetype-5"><code>MediaKeyMessageType</code></a>, 只读
                    </dt>
                    <dd>
                        消息的类型。
                        <p>
                            实现 <em class="rfc2119">MUST NOT</em> 要求应用处理消息类型。实现 <em class="rfc2119">MUST</em>
                            支持不区分消息类型的应用，
                            且 <em class="rfc2119">MUST NOT</em> 要求应用必须处理消息类型。具体来说，<a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-26">Key
                                Systems</a> <em class="rfc2119">MUST</em> 支持把所有类型的消息都传递到同一个 URL。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-86">
                            <div role="heading" class="note-title marker" id="h-note-86" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                该属性允许应用在不解析消息的情况下区分消息类型。其旨在支持可选的应用和/或服务器优化，但应用不必使用它。
                            </p>
                        </div>
                    </dd>
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediakeymessageevent-message"
                            data-idl="attribute" data-title="message" data-dfn-for="MediaKeyMessageEvent"
                            data-type="ArrayBuffer" data-lt="message" data-local-lt="MediaKeyMessageEvent.message"
                            tabindex="0" aria-haspopup="dialog"><code>message</code></dfn> 类型为 <a
                            data-link-type="interface" data-lt="ArrayBuffer"
                            href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>,
                        只读
                    </dt>
                    <dd>
                        来自 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-66">CDM</a> 的消息。消息是 <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-27">Key System</a>
                        特定的。
                    </dd>
                </dl>
            </section>
            <section id="mediakeymessageeventinit">
                <div class="header-wrapper">
                    <h4 id="x6-4-2-mediakeymessageeventinit"><bdi class="secno">6.4.2 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-mediakeymessageeventinit"
                            data-idl="dictionary" data-title="MediaKeyMessageEventInit" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>MediaKeyMessageEventInit</code></dfn>
                    </h4><a class="self-link" href="#mediakeymessageeventinit"
                        aria-label="Permalink for Section 6.4.2"></a>
                </div>

                <pre class="idl def" id="webidl-726369050"><span class="idlHeader"><a class="self-link" href="#webidl-726369050">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediakeymessageeventinit" data-title="MediaKeyMessageEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediakeymessageeventinit" id="ref-for-dom-mediakeymessageeventinit-2"><code>MediaKeyMessageEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-mediakeymessageeventinit-messagetype" data-title="messageType" data-dfn-for="MediaKeyMessageEventInit">
  required<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeymessagetype" class="internalDFN" id="ref-for-dom-mediakeymessagetype-6"><code>MediaKeyMessageType</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeymessageeventinit-messagetype" id="ref-for-dom-mediakeymessageeventinit-messagetype-1"><code>messageType</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-mediakeymessageeventinit-message" data-title="message" data-dfn-for="MediaKeyMessageEventInit">
  required<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span>         <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediakeymessageeventinit-message" id="ref-for-dom-mediakeymessageeventinit-message-1"><code>message</code></a>;</span>
};</span></code></pre>
                <section id="dictionary-mediakeymessageeventinit-members">
                    <div class="header-wrapper">
                        <h5 id="x6-4-2-1-dictionary-mediakeymessageeventinit-members"><bdi class="secno">6.4.2.1 </bdi>
                            Dictionary <a class="idlType internalDFN" href="#dom-mediakeymessageeventinit"
                                data-link-type="idl"
                                id="ref-for-dom-mediakeymessageeventinit-3"><code>MediaKeyMessageEventInit</code></a>
                            成员
                        </h5><a class="self-link" href="#dictionary-mediakeymessageeventinit-members"
                            aria-label="Permalink for Section 6.4.2.1"></a>
                    </div>

                    <dl class="dictionary-members" data-dfn-for="MediaKeyMessageEventInit">
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeymessageeventinit-messagetype" data-idl="field" data-title="messageType" data-dfn-for="MediaKeyMessageEventInit" data-type="MediaKeyMessageType" tabindex="0" aria-haspopup="dialog">messageType</dfn></code>
                            类型为 <a data-link-type="idl" data-lt="MediaKeyMessageType" href="#dom-mediakeymessagetype"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessagetype-7"><code>MediaKeyMessageType</code></a>
                        </dt>
                        <dd>
                            消息的类型。
                        </dd>
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediakeymessageeventinit-message" data-idl="field" data-title="message" data-dfn-for="MediaKeyMessageEventInit" data-type="ArrayBuffer" tabindex="0" aria-haspopup="dialog">message</dfn></code>
                            类型为 <a data-link-type="interface" data-lt="ArrayBuffer"
                                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>
                        </dt>
                        <dd>
                            消息内容。
                        </dd>
                    </dl>
                </section>
            </section>
        </section>
        <section id="mediakeysession-events" class="informative">
            <div class="header-wrapper">
                <h3 id="x6-5-event-summary"><bdi class="secno">6.5 </bdi>
                    事件摘要
                </h3><a class="self-link" href="#mediakeysession-events" aria-label="Permalink for Section 6.5"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <table class="old-table">
                <thead>
                    <tr>
                        <th>
                            事件名称
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            触发时...
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <code><dfn id="dfn-keystatuseschange" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">keystatuseschange</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            会话中的密钥或其状态发生了变化。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-message" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">message</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaKeyMessageEvent" href="#dom-mediakeymessageevent"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessageevent-2"><code>MediaKeyMessageEvent</code></a>
                        </td>
                        <td>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-67">CDM</a> 已为该会话生成了一条消息。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="mediakeysession-algorithms">
            <div class="header-wrapper">
                <h3 id="x6-6-algorithms"><bdi class="secno">6.6 </bdi>
                    算法
                </h3><a class="self-link" href="#mediakeysession-algorithms" aria-label="Permalink for Section 6.6"></a>
            </div>

            <section id="queue-message">
                <div class="header-wrapper">
                    <h4 id="x6-6-1-queue-a-message-event"><bdi class="secno">6.6.1 </bdi>
                        <dfn id="dfn-queue-a-message-event" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">排队一个
                            "message" 事件</dfn>
                    </h4><a class="self-link" href="#queue-message" aria-label="Permalink for Section 6.6.1"></a>
                </div>

                <p>
                    Queue a "message" Event 算法将一个 message 事件排入指定的 <a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-24"><code>MediaKeySession</code></a> 对象的事件队列。请求运行此算法时包括一个目标 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-25"><code>MediaKeySession</code></a> 对象、一个 <var>message
                        type</var> 和一个 <var>message</var>。
                </p>
                <p>
                    <var>message</var> <em class="rfc2119">MUST NOT</em> 包含 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-permanent-identifier-s-19">Distinctive Permanent
                        Identifier(s)</a>，即使是以加密形式也不得包含。若 <a data-link-type="idl" data-lt="MediaKeySession"
                        href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-26"><code>MediaKeySession</code></a> 对象的 <var>use distinctive
                        identifier</var> 值为 false，则 <var>message</var> <em class="rfc2119">MUST NOT</em> 包含 <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-13">Distinctive Identifier(s)</a>，即使是以加密形式也不得包含。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>session</var> 为指定的 <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-27"><code>MediaKeySession</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来创建一个名为 <a data-link-type="idl" data-lt="message" href="#dfn-message"
                                class="internalDFN" id="ref-for-dfn-message-6"><code><code>message</code></code></a>
                            的事件，该事件不冒泡且不可取消，使用 <a data-link-type="idl" data-lt="MediaKeyMessageEvent"
                                href="#dom-mediakeymessageevent" class="internalDFN"
                                id="ref-for-dom-mediakeymessageevent-3"><code>MediaKeyMessageEvent</code></a> 接口，\
                            将其 <var>type</var> 属性设为 <code>message</code>，并将其 <var>isTrusted</var> 属性初始化为
                            <code>true</code>，然后在 <var>session</var> 上派发该事件。
                        </p>
                        <p>
                            该事件接口 <a data-link-type="idl" data-lt="MediaKeyMessageEvent"
                                href="#dom-mediakeymessageevent" class="internalDFN"
                                id="ref-for-dom-mediakeymessageevent-4"><code>MediaKeyMessageEvent</code></a> 具有：
                        </p>
                        <ul style="list-style-type:none">
                            <li><a data-link-type="idl" href="#dom-mediakeymessageevent-messagetype" class="internalDFN"
                                    id="ref-for-dom-mediakeymessageevent-messagetype-2"><code>messageType</code></a> =
                                指定的 <var>message type</var><br>
                                <br>
                                <a data-link-type="idl" href="#dom-mediakeymessageevent-message" class="internalDFN"
                                    id="ref-for-dom-mediakeymessageevent-message-2"><code>message</code></a> = 指定的
                                <var>message</var>
                            </li>
                        </ul>
                    </li>
                </ol>
            </section>
            <section id="update-key-statuses">
                <div class="header-wrapper">
                    <h4 id="x6-6-2-update-key-statuses"><bdi class="secno">6.6.2 </bdi>
                        <dfn id="dfn-update-key-statuses" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">更新密钥状态（Update Key Statuses）</dfn>
                    </h4><a class="self-link" href="#update-key-statuses" aria-label="Permalink for Section 6.6.2"></a>
                </div>

                <p>
                    Update Key Statuses 算法用于更新某个 <a data-link-type="dfn|abstract-op" href="#dfn-known"
                        class="internalDFN" id="ref-for-dfn-known-6">known</a> 密钥集合，或更新一个或多个密钥的状态，该会话为 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-28"><code>MediaKeySession</code></a>。请求运行此算法时包括一个目标 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-29"><code>MediaKeySession</code></a> 对象以及一系列 <a
                        data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                        id="ref-for-dfn-decryption-key-id-12">key ID</a> 与其对应的 <a data-link-type="idl"
                        data-lt="MediaKeyStatus" href="#dom-mediakeystatus" class="internalDFN"
                        id="ref-for-dom-mediakeystatus-15"><code>MediaKeyStatus</code></a> 对。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-87">
                    <div role="heading" class="note-title marker" id="h-note-87" aria-level="5"><span>注</span></div>
                    <p class="">
                        该算法总是在一个 task 中运行。
                    </p>
                </div>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>session</var> 为相关联的 <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-30"><code>MediaKeySession</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>input statuses</var> 为由 key ID 与对应 <a data-link-type="idl" data-lt="MediaKeyStatus"
                                href="#dom-mediakeystatus" class="internalDFN"
                                id="ref-for-dom-mediakeystatus-16"><code>MediaKeyStatus</code></a> 对组成的序列。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>statuses</var> 为 <var>session</var> 的 <a data-link-type="idl"
                                href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                id="ref-for-dom-mediakeysession-keystatuses-3"><code>keyStatuses</code></a> 属性。
                        </p>
                    </li>
                    <li>
                        <p>
                            运行下列步骤以替换 <var>statuses</var> 的内容：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    清空 <var>statuses</var>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    对 <var>input statuses</var> 中的每一对进行处理。
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            令 <var>pair</var> 为该对。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            在 <var>statuses</var> 中插入一项，其键为 <var>pair</var> 的 key ID，值为 <var>pair</var>
                                            的 <a data-link-type="idl" data-lt="MediaKeyStatus"
                                                href="#dom-mediakeystatus" class="internalDFN"
                                                id="ref-for-dom-mediakeystatus-17"><code>MediaKeyStatus</code></a> 值。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                        <div class="note" role="note" id="issue-container-generatedID-88">
                            <div role="heading" class="note-title marker" id="h-note-88" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                该步骤的效果是以原子方式替换 <var>session</var> 的 <a data-link-type="idl"
                                    href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                    id="ref-for-dom-mediakeysession-keystatuses-4"><code>keyStatuses</code></a>
                                属性内容，而不会使对该属性的现有引用失效。从脚本角度看，这种替换是原子的；脚本 <em class="rfc2119">MUST NOT</em> 看到部分填充的序列。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来 <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发一个事件（fire an event）</a>，事件名为 <a
                                data-link-type="idl" data-lt="keystatuseschange" href="#dfn-keystatuseschange"
                                class="internalDFN"
                                id="ref-for-dfn-keystatuseschange-2"><code><code>keystatuseschange</code></code></a>，在
                            <var>session</var> 上触发。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来在每个其 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-1"><code>mediaKeys</code></a> 属性为创建该
                            <var>session</var> 的 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-23"><code>MediaKeys</code></a> 对象的媒体元素上运行
                            <a data-link-type="dfn|abstract-op" href="#dfn-attempt-to-resume-playback-if-necessary"
                                class="internalDFN" id="ref-for-dfn-attempt-to-resume-playback-if-necessary-1">Attempt
                                to Resume Playback If Necessary</a> 算法。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="update-expiration">
                <div class="header-wrapper">
                    <h4 id="x6-6-3-update-expiration"><bdi class="secno">6.6.3 </bdi>
                        <dfn id="dfn-update-expiration" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">更新到期时间（Update Expiration）</dfn>
                    </h4><a class="self-link" href="#update-expiration" aria-label="Permalink for Section 6.6.3"></a>
                </div>

                <p>
                    Update Expiration 算法用于更新某个 <a data-link-type="dfn|abstract-op" href="#dfn-expiration"
                        class="internalDFN" id="ref-for-dfn-expiration-6">expiration time</a>，目标为某个 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-31"><code>MediaKeySession</code></a>。请求运行此算法时包括一个目标 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-32"><code>MediaKeySession</code></a> 对象和新的到期时间，该时间可以为
                    <code>NaN</code>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-89">
                    <div role="heading" class="note-title marker" id="h-note-89" aria-level="5"><span>注</span></div>
                    <p class="">
                        该算法总是在一个 task 中运行。
                    </p>
                </div>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>session</var> 为相关联的 <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-33"><code>MediaKeySession</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>expiration time</var> 为 <code>NaN</code>。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果新的到期时间不是 <code>NaN</code>，则令 <var>expiration time</var> 为该到期时间。
                        </p>
                    </li>
                    <li>
                        <p>
                            将 <var>session</var> 的 <a data-link-type="idl" href="#dom-mediakeysession-expiration"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-expiration-4"><code>expiration</code></a> 属性设置为以 <a
                                data-link-type="dfn|abstract-op" href="#dfn-time" class="internalDFN"
                                id="ref-for-dfn-time-2">time</a> 表示的 <var>expiration time</var>。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="session-closed">
                <div class="header-wrapper">
                    <h4 id="x6-6-4-session-closed"><bdi class="secno">6.6.4 </bdi>
                        <dfn id="dfn-session-closed" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">会话已关闭（Session Closed）</dfn>
                    </h4><a class="self-link" href="#session-closed" aria-label="Permalink for Section 6.6.4"></a>
                </div>

                <p>
                    Session Closed 算法在 <a data-link-type="dfn|abstract-op" href="#dfn-key-session" class="internalDFN"
                        id="ref-for-dfn-key-session-7">key session</a> 被相应的 <a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-68">CDM</a> 关闭后，更新对应的 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-34"><code>MediaKeySession</code></a> 状态。请求运行此算法时包括一个目标 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-35"><code>MediaKeySession</code></a> 对象和一个 <a
                        data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                        href="#dom-mediakeysessionclosedreason" class="internalDFN"
                        id="ref-for-dom-mediakeysessionclosedreason-7"><code>MediaKeySessionClosedReason</code></a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-90">
                    <div role="heading" class="note-title marker" id="h-note-90" aria-level="5"><span>注</span></div>
                    <p class="">
                        该算法总是在一个 task 中运行。
                    </p>
                </div>
                <p>
                    当会话被关闭时，与之关联的许可证和密钥不再可用于解密 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>。在运行此算法之后，所有 <a
                        data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                        id="ref-for-dom-mediakeysession-36"><code>MediaKeySession</code></a> 的方法将失败，且不会再为该对象排入新的事件。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-91">
                    <div role="heading" class="note-title marker" id="h-note-91" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-69">CDM</a> 可能在任何时刻关闭会话，例如当会话不再需要或系统资源丢失时。在这种情况下，<a
                                data-link-type="dfn|abstract-op" href="#dfn-monitor-for-cdm-state-changes"
                                class="internalDFN" id="ref-for-dfn-monitor-for-cdm-state-changes-3">Monitor for CDM
                                State Changes</a> 算法会检测到该变化并运行此算法。
                        </p>
                        <p>
                            其它会话中的密钥 <em class="rfc2119">MUST</em> 不受影响，即使它们具有重叠的 key ID。
                        </p>
                        <p>
                            在此算法运行后，由该算法排入队列的事件的事件处理器将被执行，但不能再排入更多事件。因此，关闭会话不会导致 <a data-link-type="dfn|abstract-op"
                                href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-70">CDM</a> 发送更多消息。
                        </p>
                    </div>
                </div>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>session</var> 为相关联的 <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-37"><code>MediaKeySession</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>promise</var> 为 <var>session</var> 的 <a data-link-type="idl"
                                href="#dom-mediakeysession-closed" class="internalDFN"
                                id="ref-for-dom-mediakeysession-closed-5"><code>closed</code></a> 属性。
                        </p>
                    </li>

                    <li>
                        <p>
                            如果 <var>promise</var> 已被解析，则中止这些步骤。
                        </p>
                    </li>

                    <li>
                        <p>
                            将 <var>session</var> 的 <var>closing or closed</var> 值设为 true。
                        </p>
                    </li>
                    <li>
                        <p>
                            在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                class="internalDFN" id="ref-for-dfn-update-key-statuses-6">Update Key Statuses</a>
                            算法，传入一个空序列。
                        </p>
                    </li>
                    <li>
                        <p>
                            在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op" href="#dfn-update-expiration"
                                class="internalDFN" id="ref-for-dfn-update-expiration-4">Update Expiration</a> 算法，传入
                            <code>NaN</code>。
                        </p>
                    </li>
                    <li>
                        <p>
                            用提供的原因解析 <var>promise</var>。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="monitor-cdm">
                <div class="header-wrapper">
                    <h4 id="x6-6-5-monitor-for-cdm-state-changes"><bdi class="secno">6.6.5 </bdi>
                        <dfn id="dfn-monitor-for-cdm-state-changes" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">监视 CDM 状态变化（Monitor for CDM State Changes）</dfn>
                    </h4><a class="self-link" href="#monitor-cdm" aria-label="Permalink for Section 6.6.5"></a>
                </div>

                <p>
                    Monitor for CDM State Changes 算法执行在 CDM 状态发生各种变化时所需的步骤。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-92">
                    <div role="heading" class="note-title marker" id="h-note-92" aria-level="5"><span>注</span></div>
                    <p class="">
                        该算法仅适用于那些未被其它算法覆盖的 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-72">CDM</a> 状态变化。例如，<a data-link-type="idl" data-lt="update()"
                            href="#dom-mediakeysession-update" class="internalDFN"
                            id="ref-for-dom-mediakeysession-update-10"><code>update()</code></a>
                        可能导致消息、密钥状态变化和/或到期时间变化，但这些都在该算法内部处理。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-93">
                    <div role="heading" class="note-title marker" id="h-note-93" aria-level="5"><span>注</span></div>
                    <p class="">
                        该算法总是与主事件循环并行运行。
                    </p>
                </div>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>session</var> 为 <a data-link-type="idl" data-lt="MediaKeySession"
                                href="#dom-mediakeysession" class="internalDFN"
                                id="ref-for-dom-mediakeysession-38"><code>MediaKeySession</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>cdm</var> 为由 <var>session</var> 的 <var>cdm instance</var> 值表示的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-73">CDM</a> 实例。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>cdm</var> 有一个尚未发送的外发消息（outgoing message），则 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来执行下列步骤：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>message type</var> 和 <var>message</var> 分别为该消息的类型与消息内容。
                                </p>
                            </li>
                            <li>
                                <p>
                                    运行 <a data-link-type="dfn|abstract-op" href="#dfn-queue-a-message-event"
                                        class="internalDFN" id="ref-for-dfn-queue-a-message-event-6">Queue a "message"
                                        Event</a> 算法，传入 <var>session</var>、<var>message type</var> 与 <var>message</var>。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            如果 <var>cdm</var> 更改了对 <var>session</var> 已知的密钥集合（known keys）或更改了一个或多个密钥的状态，则 <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来执行下列步骤：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>statuses</var> 为一个包含键值对的列表，每项为对 <var>session</var> 已知的一个 key ID 与其对应的 <a
                                        data-link-type="idl" data-lt="MediaKeyStatus" href="#dom-mediakeystatus"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeystatus-18"><code>MediaKeyStatus</code></a> 值。
                                </p>
                            </li>
                            <li>
                                <p>
                                    运行 <a data-link-type="dfn|abstract-op" href="#dfn-update-key-statuses"
                                        class="internalDFN" id="ref-for-dfn-update-key-statuses-7">Update Key
                                        Statuses</a> 算法，传入 <var>session</var> 与 <var>statuses</var>。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            如果 <var>cdm</var> 更改了 <var>session</var> 的 <a data-link-type="dfn|abstract-op"
                                href="#dfn-expiration" class="internalDFN" id="ref-for-dfn-expiration-7">expiration
                                time</a>，则 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来执行下列步骤：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>expiration time</var> 为 <var>session</var> 的新到期时间。
                                </p>
                            </li>
                            <li>
                                <p>
                                    运行 <a data-link-type="dfn|abstract-op" href="#dfn-update-expiration"
                                        class="internalDFN" id="ref-for-dfn-update-expiration-5">Update Expiration</a>
                                    算法，传入 <var>session</var> 与 <var>expiration time</var>。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            如果 <var>cdm</var> 已关闭 <var>session</var>，则 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来在 <var>session</var> 上运行 <a data-link-type="dfn|abstract-op"
                                href="#dfn-session-closed" class="internalDFN" id="ref-for-dfn-session-closed-5">Session
                                Closed</a> 算法，并提供一个适当的 <a data-link-type="idl" data-lt="MediaKeySessionClosedReason"
                                href="#dom-mediakeysessionclosedreason" class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-8"><code>MediaKeySessionClosedReason</code></a>
                            值。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>cdm</var> 因硬件上下文重置而变为不可用，则 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来运行 <a data-link-type="dfn|abstract-op" href="#dfn-cdm-unavailable"
                                class="internalDFN" id="ref-for-dfn-cdm-unavailable-1">CDM Unavailable</a> 算法，原因设为 "<a
                                data-link-type="idl" href="#dom-mediakeysessionclosedreason-hardware-context-reset"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-2"><code>hardware-context-reset</code></a>"。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>cdm</var> 因其它原因变为不可用，则 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务（Queue
                                a task）</a> 来运行 <a data-link-type="dfn|abstract-op" href="#dfn-cdm-unavailable"
                                class="internalDFN" id="ref-for-dfn-cdm-unavailable-2">CDM Unavailable</a> 算法，原因设为 "<a
                                data-link-type="idl" href="#dom-mediakeysessionclosedreason-internal-error"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessionclosedreason-internal-error-2"><code>internal-error</code></a>"。
                        </p>
                    </li>
                </ol>
            </section>
        </section>
        <section id="exceptions">
            <div class="header-wrapper">
                <h3 id="x6-7-exceptions"><bdi class="secno">6.7 </bdi>
                    异常
                </h3><a class="self-link" href="#exceptions" aria-label="Permalink for Section 6.7"></a>
            </div>

            <p id="error-names">
                方法通过拒绝返回的 promise，并抛出 <a data-link-type="dfn"
                    href="https://webidl.spec.whatwg.org/#dfn-simple-exception">简单异常</a>
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                        title="Web IDL Standard">WEBIDL</a></cite>] 或 <a data-link-type="interface"
                    data-lt="DOMException"
                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> 来报告错误。下列
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl"
                        title="Web IDL Standard">WEBIDL</a></cite>] 中定义的 <a data-link-type="dfn"
                    href="https://webidl.spec.whatwg.org/#dfn-simple-exception">简单异常</a> 和 <a
                    href="https://webidl.spec.whatwg.org/#idl-DOMException-error-names">DOMException 名称</a>
                会在算法中使用。算法中指定的原因会列在每个名称旁边，但这些名称 <em class="rfc2119">MAY</em> 也可用于其他原因。
            </p>
            <table class="old-table">
                <tbody>
                    <tr>
                        <th>
                            名称
                        </th>
                        <th>
                            可能原因（非详尽）
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-typeerror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">TypeError</dfn></code>
                        </td>
                        <td>
                            参数为空。<br>
                            初始化数据无效。<br>
                            响应格式无效。<br>
                            为 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-temporary-11"><code>temporary</code></a>"
                            会话提供了持久许可证。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-notsupportederror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">NotSupportedError</dfn></code>
                        </td>
                        <td>
                            现有 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-24"><code>MediaKeys</code></a> 对象无法移除。<br>
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-28">Key System</a> 不被支持。<br>
                            初始化数据类型不被 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-29">Key System</a> 支持。<br>
                            会话类型不被 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-30">Key System</a> 支持。<br>
                            初始化数据不被 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-31">Key System</a> 支持。<br>
                            操作不被 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-32">Key System</a> 支持。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-invalidstateerror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">InvalidStateError</dfn></code>
                        </td>
                        <td>
                            现有 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-25"><code>MediaKeys</code></a> 对象目前无法移除。<br>
                            会话已经被使用。<br>
                            会话尚未初始化。<br>
                            会话已关闭。
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-quotaexceedederror" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">QuotaExceededError</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-26"><code>MediaKeys</code></a> 对象无法与更多 <a data-link-type="idl"
                                data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-5"><code>HTMLMediaElement</code></a> 一起使用。<br>
                            针对该 sessionId 已存在一个未关闭的会话。<br>
                            资源不足，无法创建新会话或许可证请求。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="session-storage">
            <div class="header-wrapper">
                <h3 id="x6-8-session-storage-and-persistence"><bdi class="secno">6.8 </bdi>
                    会话存储与持久化
                </h3><a class="self-link" href="#session-storage" aria-label="Permalink for Section 6.8"></a>
            </div>

            <p>
                本节提供了与算法互补的会话存储与持久化概述。
            </p>
            <p>
                除 <a data-link-type="dfn|abstract-op" href="#dfn-storage-and-persistence" class="internalDFN"
                    id="ref-for-dfn-storage-and-persistence-1">存储与持久化</a> 的要求外，下列要求也适用。
            </p>
            <p>
                如果对本对象的 <var>session type</var> 运行 <a data-link-type="dfn|abstract-op"
                    href="#dfn-is-persistent-session-type" class="internalDFN"
                    id="ref-for-dfn-is-persistent-session-type-7">Is persistent session type?</a> 算法结果为
                <code>false</code>，则用户代理和 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-74">CDM</a> <em class="rfc2119">MUST NOT</em>
                在任何时候持久化与该会话相关的记录或数据。这包括许可证、密钥、<a data-link-type="dfn|abstract-op"
                    href="#dfn-record-s-of-license-destruction" class="internalDFN"
                    id="ref-for-dfn-record-s-of-license-destruction-10">许可证销毁记录</a>，以及 <a
                    data-link-type="dfn|abstract-op" href="#dfn-session-id" class="internalDFN"
                    id="ref-for-dfn-session-id-5">Session ID</a>。
            </p>
            <p>
                本节剩余内容适用于 <a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type" class="internalDFN"
                    id="ref-for-dfn-is-persistent-session-type-8">Is persistent session type?</a> 算法返回 <code>true</code>
                的会话类型。
            </p>
            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-75">CDM</a>
                <em class="rfc2119">SHOULD NOT</em> 在首次调用 <a data-link-type="idl" data-lt="update()"
                    href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-11"><code>update()</code></a> 前存储会话数据（包括 Session ID）。具体来说，<a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-76">CDM</a>
                <em class="rfc2119">SHOULD NOT</em> 在 <a data-link-type="idl" data-lt="generateRequest()"
                    href="#dom-mediakeysession-generaterequest" class="internalDFN"
                    id="ref-for-dom-mediakeysession-generaterequest-4"><code>generateRequest()</code></a>
                算法期间存储会话数据。这可确保应用知晓会话的存在，并知道需要最终移除它。
            </p>
            <p>
                与会话相关的 <em>所有</em> 数据在会话被清除时 <em class="rfc2119">MUST</em> 被清除，例如在处理 <a data-link-type="idl"
                    data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-12"><code>update()</code></a> 时收到 <a
                    data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction" class="internalDFN"
                    id="ref-for-dfn-record-s-of-license-destruction-11">许可证销毁记录</a>确认。参见 <a
                    href="#persistent-state-requirements">持久数据</a>。
            </p>
            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-77">CDM</a>
                <em class="rfc2119">MUST</em> 确保某个会话的数据只存在于一个未被 <a data-link-type="dfn|abstract-op" href="#dfn-closed"
                    class="internalDFN" id="ref-for-dfn-closed-8">closed</a> 的 <a data-link-type="idl"
                    data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-39"><code>MediaKeySession</code></a> 对象中，无论在哪个 <a
                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>。换言之，当已经存在一个由
                <a data-link-type="idl" data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysession-generaterequest-5"><code>generateRequest()</code></a> 创建且仍活动的对象，或已通过
                <a data-link-type="idl" data-lt="load()" href="#dom-mediakeysession-load" class="internalDFN"
                    id="ref-for-dom-mediakeysession-load-6"><code>load()</code></a> 加载到另一个对象中时，针对该 sessionId 的 <a
                    data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-40"><code>MediaKeySession</code></a> 的 <a data-link-type="idl"
                    data-lt="load()" href="#dom-mediakeysession-load" class="internalDFN"
                    id="ref-for-dom-mediakeysession-load-5"><code>load()</code></a> <em class="rfc2119">MUST</em>
                失败。只有所有曾经表示该会话的对象都已 <a data-link-type="dfn|abstract-op" href="#dfn-closed" class="internalDFN"
                    id="ref-for-dfn-closed-9">closed</a> 时，会话才 <em class="rfc2119">MAY</em> 被再次加载。
            </p>
            <p>
                应用在使用 <a data-link-type="dfn|abstract-op" href="#dfn-is-persistent-session-type" class="internalDFN"
                    id="ref-for-dfn-is-persistent-session-type-9">Is persistent session type?</a> 算法返回 <code>true</code>
                的类型创建会话后，<em class="rfc2119">SHOULD</em> 之后通过先用 <a data-link-type="idl" data-lt="remove()"
                    href="#dom-mediakeysession-remove" class="internalDFN"
                    id="ref-for-dom-mediakeysession-remove-3"><code>remove()</code></a>
                启动移除过程，然后确保移除过程（可能涉及消息交换）成功完成来删除存储的数据。<a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-78">CDM</a> <em class="rfc2119">MAY</em> 也会酌情移除会话，但应用 <em
                    class="rfc2119">SHOULD NOT</em> 依赖此行为。
            </p>
            <p>
                支持持久化存储时参见 <a href="#security" class="sec-ref"><bdi class="secno">10. </bdi>
                    安全</a> 和 <a href="#privacy" class="sec-ref"><bdi class="secno">11. </bdi>
                    隐私</a> 以获取更多考虑事项。
            </p>
        </section>
    </section>
    <section id="htmlmediaelement-extensions">
        <div class="header-wrapper">
            <h2 id="x7-htmlmediaelement-extensions"><bdi class="secno">7. </bdi>
                <dfn id="dom-htmlmediaelement" data-idl="interface" data-title="HTMLMediaElement" data-dfn-for=""
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>HTMLMediaElement</code></dfn>
                扩展
            </h2><a class="self-link" href="#htmlmediaelement-extensions" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            本节规定了当支持加密媒体扩展（Encrypted Media Extensions）时，<a data-link-type="idl" data-lt="HTMLMediaElement"
                href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-6"><code>HTMLMediaElement</code></a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-html" title="HTML Standard">HTML</a></cite>]
            所增加和修改的内容。
        </p>
        <p>
            以下内部值被添加到 <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                class="internalDFN" id="ref-for-dom-htmlmediaelement-7"><code>HTMLMediaElement</code></a>：
        </p>
        <ul>
            <li>
                <p>
                    <var>attaching media keys</var>，其值 <em class="rfc2119">SHALL</em> 是布尔类型。
                </p>
            </li>
            <li>
                <p>
                    <var>encrypted block queue</var>，其值 <em class="rfc2119">SHALL</em> 是一个等待解密的加密块队列。
                </p>
            </li>
            <li>
                <p>
                    <var>decryption blocked waiting for key</var>，其值 <em class="rfc2119">SHALL</em> 是布尔类型。
                </p>
            </li>
            <li>
                <p>
                    <var>playback blocked waiting for key</var>，其值 <em class="rfc2119">SHALL</em> 是布尔类型。
                </p>
            </li>
        </ul>
        <p>
            对 <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                id="ref-for-dom-htmlmediaelement-8"><code>HTMLMediaElement</code></a> 的行为做如下修改：
        </p>
        <ul>
            <li>
                <p>
                    当创建一个 <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                        class="internalDFN" id="ref-for-dom-htmlmediaelement-9"><code>HTMLMediaElement</code></a> 时，其
                    <var>attaching media keys</var> 值 <em class="rfc2119">SHALL</em>
                    初始化为 <code>false</code>，其 <var>encrypted block queue</var> 值 <em class="rfc2119">SHALL</em>
                    为空，其 <var>decryption blocked waiting for key</var> 值 <em class="rfc2119">SHALL</em> 初始化
                    为 <code>false</code>，其 <var>playback blocked waiting for key</var> 值 <em class="rfc2119">SHALL</em>
                    初始化为 <code>false</code>。
                </p>
            </li>
            <li>
                <p>
                    当 <a href="https://html.spec.whatwg.org/multipage/#current-playback-position">当前播放位置</a>
                    被更改，但不是作为正常播放的一部分沿 <a href="https://html.spec.whatwg.org/multipage/#direction-of-playback">播放方向</a>
                    前进时，
                    <var>encrypted block queue</var> 值 <em class="rfc2119">SHALL</em> 为空，
                    <var>decryption blocked waiting for key</var> 值 <em class="rfc2119">SHALL</em> 初始化为
                    <code>false</code>，
                    <var>playback blocked waiting for key</var> 值 <em class="rfc2119">SHALL</em> 被设为 <code>false</code>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-94">
                    <div role="heading" class="note-title marker" id="h-note-94" aria-level="3"><span>注</span></div>
                    <p class="">
                        换句话说，这些值应在加载媒体资源或进行 <a href="https://html.spec.whatwg.org/multipage/#seeking">seek</a> 时被重置。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    除 [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] 中规定的标准外，
                    如果 <var>playback blocked waiting for key</var> 的值为 <code>true</code>，
                    <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-10"><code>HTMLMediaElement</code></a> 也应被视为 <a
                        href="https://html.spec.whatwg.org/multipage/#blocked-media-element">受阻塞的媒体元素</a>。
                </p>
            </li>
            <li>
                <p>
                    当用户代理准备开始播放，并在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>中检测到可能包含加密块的迹象，
                    且该检测发生在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>期间时，
                    用户代理 <em class="rfc2119">SHALL</em> 运行 <a
                        href="#media-may-contain-encrypted-blocks">媒体数据可能包含加密块</a>算法。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-95">
                    <div role="heading" class="note-title marker" id="h-note-95" aria-level="3"><span>注</span></div>
                    <p class="">
                        对于某些容器格式，该指示与 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                            class="internalDFN" id="ref-for-dfn-initialization-data-11">Initialization Data</a> 是分开的。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-96">
                    <div role="heading" class="note-title marker" id="h-note-96" aria-level="3"><span>注</span></div>
                    <p class="">
                        该算法应在解析相关容器数据之后运行，包括运行 <a data-link-type="dfn|abstract-op"
                            href="#dfn-initialization-data-encountered" class="internalDFN"
                            id="ref-for-dfn-initialization-data-encountered-1">Initialization Data Encountered</a>
                        算法，但在解码开始之前。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    当用户代理在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>
                    中发现 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-12">Initialization Data</a>，
                    且该发现发生在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>期间，
                    用户代理 <em class="rfc2119">SHALL</em> 运行 <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data-encountered" class="internalDFN"
                        id="ref-for-dfn-initialization-data-encountered-2">Initialization Data Encountered</a> 算法。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-97">
                    <div role="heading" class="note-title marker" id="h-note-97" aria-level="3"><span>注</span></div>
                    <p class="">
                        某些容器格式可能支持加密媒体数据，但该数据不包含 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                            class="internalDFN" id="ref-for-dfn-initialization-data-13">Initialization
                            Data</a>，因此不会触发该算法。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    对于在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#concept-media-load-resource">资源获取算法</a>期间遇到的每个加密
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>块，
                    用户代理 <em class="rfc2119">SHALL</em> 按遇到加密块的顺序运行 <a data-link-type="dfn|abstract-op"
                        href="#dfn-encrypted-block-encountered" class="internalDFN"
                        id="ref-for-dfn-encrypted-block-encountered-1">Encrypted Block Encountered</a> 算法。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-98">
                    <div role="heading" class="note-title marker" id="h-note-98" aria-level="3"><span>注</span></div>
                    <p class="">
                        上述步骤为用户代理实现提供了灵活性，可以在遇到加密块后，在需要播放之前的任意时间进行解密。
                    </p>
                </div>
            </li>
            <li>
                <p>
                    当下列任一情况发生且 <var>decryption blocked waiting for key</var> 值为 <code>true</code> 时，
                    用户代理 <em class="rfc2119">SHALL</em> 运行 <a data-link-type="dfn|abstract-op" href="#dfn-wait-for-key"
                        class="internalDFN" id="ref-for-dfn-wait-for-key-1">Wait for Key</a> 算法。
                </p>
                <ul>
                    <li>
                        <p>
                            用户代理无法沿 <a href="https://html.spec.whatwg.org/multipage/#direction-of-playback">播放方向</a>推进
                            <a href="https://html.spec.whatwg.org/multipage/#current-playback-position">当前播放位置</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            用户代理无法为 <a
                                href="https://html.spec.whatwg.org/multipage/#current-playback-position">当前播放位置</a>提供数据。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-99">
                            <div role="heading" class="note-title marker" id="h-note-99" aria-level="3">
                                <span>注</span>
                            </div>
                            <p class="">
                                例如，在播放开始或 <a href="https://html.spec.whatwg.org/multipage/#seeking">seek</a> 之后。
                            </p>
                        </div>
                    </li>
                </ul>
            </li>
            <li>
                <p>
                    还会添加如下属性和方法。
                </p>
            </li>
        </ul>
        <p>
            对于返回 promise 的方法，所有错误都通过拒绝返回的 Promise 异步报告。这包括 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>] 类型映射错误。
        </p>
        <p>
            当 promise 被拒绝时，算法的步骤始终中止。
        </p>
        <pre class="idl def" id="webidl-1869224078"><span class="idlHeader"><a class="self-link" href="#webidl-1869224078">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-htmlmediaelement-partial-1" data-title="HTMLMediaElement">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>] partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-htmlmediaelement" id="ref-for-dom-htmlmediaelement-11"><code>HTMLMediaElement</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-mediakeys" data-title="mediaKeys" data-dfn-for="HTMLMediaElement">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>] readonly        attribute<span class="idlType"> <a data-link-type="idl" href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-27"><code>MediaKeys</code></a>?</span>   <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-mediakeys" id="ref-for-dom-htmlmediaelement-mediakeys-2"><code>mediaKeys</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-onencrypted" data-title="onencrypted" data-dfn-for="HTMLMediaElement">
                                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-onencrypted" id="ref-for-dom-htmlmediaelement-onencrypted-1"><code>onencrypted</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-onwaitingforkey" data-title="onwaitingforkey" data-dfn-for="HTMLMediaElement">
                                  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-onwaitingforkey" id="ref-for-dom-htmlmediaelement-onwaitingforkey-1"><code>onwaitingforkey</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-htmlmediaelement-setmediakeys-mediakeys" data-title="setMediaKeys" data-dfn-for="HTMLMediaElement">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-htmlmediaelement-setmediakeys" id="ref-for-dom-htmlmediaelement-setmediakeys-2"><code>setMediaKeys</code></a> (<span class="idlType"><a data-link-type="idl" href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-28"><code>MediaKeys</code></a>?</span> <span class="idlParamName">mediaKeys</span>);</span>
};</span></code></pre>
        <section id="attributes-3">
            <div class="header-wrapper">
                <h3 id="x7-1-attributes"><bdi class="secno">7.1 </bdi>
                    属性
                </h3><a class="self-link" href="#attributes-3" aria-label="Permalink for Section 7.1"></a>
            </div>

            <dl class="attributes" data-dfn-for="HTMLMediaElement">
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-mediakeys"
                        data-idl="attribute" data-title="mediaKeys" data-dfn-for="HTMLMediaElement"
                        data-type="MediaKeys" data-lt="mediaKeys" data-local-lt="HTMLMediaElement.mediaKeys"
                        tabindex="0" aria-haspopup="dialog"><code>mediaKeys</code></dfn> 类型为 <a data-link-type="idl"
                        data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-29"><code>MediaKeys</code></a>，只读，可为 null
                </dt>
                <dd>
                    <p>
                        当前 media element 解密加密 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> 时所用的 <a
                            data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                            id="ref-for-dom-mediakeys-30"><code>MediaKeys</code></a>。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-onencrypted"
                        data-idl="attribute" data-title="onencrypted" data-dfn-for="HTMLMediaElement"
                        data-type="EventHandler" data-lt="onencrypted" data-local-lt="HTMLMediaElement.onencrypted"
                        tabindex="0" aria-haspopup="dialog"><code>onencrypted</code></dfn> 类型为 <a
                        data-link-type="typedef" data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        用于 <a data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                            id="ref-for-dfn-encrypted-4"><code><code>encrypted</code></code></a> 事件的事件处理器。所有 <a
                            data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                            class="internalDFN" id="ref-for-dom-htmlmediaelement-12"><code>HTMLMediaElement</code></a> 都
                        <em class="rfc2119">MUST</em> 同时支持作为内容属性和 IDL 属性。
                    </p>
                </dd>
                <dt>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-onwaitingforkey"
                        data-idl="attribute" data-title="onwaitingforkey" data-dfn-for="HTMLMediaElement"
                        data-type="EventHandler" data-lt="onwaitingforkey"
                        data-local-lt="HTMLMediaElement.onwaitingforkey" tabindex="0"
                        aria-haspopup="dialog"><code>onwaitingforkey</code></dfn> 类型为 <a data-link-type="typedef"
                        data-lt="EventHandler"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><code>EventHandler</code></a>
                </dt>
                <dd>
                    <p>
                        用于 <a data-link-type="idl" data-lt="waitingforkey" href="#dfn-waitingforkey" class="internalDFN"
                            id="ref-for-dfn-waitingforkey-1"><code><code>waitingforkey</code></code></a> 事件的事件处理器。所有 <a
                            data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                            class="internalDFN" id="ref-for-dom-htmlmediaelement-13"><code>HTMLMediaElement</code></a> 都
                        <em class="rfc2119">MUST</em> 同时支持作为内容属性和 IDL 属性。
                    </p>
                </dd>
            </dl>
        </section>
        <section id="methods-4">
            <div class="header-wrapper">
                <h3 id="x7-2-methods"><bdi class="secno">7.2 </bdi>
                    方法
                </h3><a class="self-link" href="#methods-4" aria-label="Permalink for Section 7.2"></a>
            </div>

            <dl class="methods" data-dfn-for="HTMLMediaElement">
                <dt>
                    <dfn data-export="" data-dfn-type="method" id="dom-htmlmediaelement-setmediakeys"
                        data-idl="operation" data-title="setMediaKeys()" data-dfn-for="HTMLMediaElement"
                        data-type="Promise" data-lt="setMediaKeys()|setMediaKeys(mediaKeys)"
                        data-local-lt="HTMLMediaElement.setMediaKeys|HTMLMediaElement.setMediaKeys()|setMediaKeys"
                        tabindex="0" aria-haspopup="dialog"><code>setMediaKeys()</code></dfn>
                </dt>
                <dd>
                    <p>
                        提供用于播放时解密媒体数据的 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                            class="internalDFN" id="ref-for-dom-mediakeys-31"><code>MediaKeys</code></a>。
                    </p>
                    <div class="note" role="note" id="issue-container-generatedID-100">
                        <div role="heading" class="note-title marker" id="h-note-100" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            在播放过程中清除或替换关联的 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-32"><code>MediaKeys</code></a>
                            对象的支持属于实现质量问题。在许多情况下会导致不良的用户体验或 promise 被拒绝。
                        </p>
                    </div>
                    <p>
                        当调用此方法时，用户代理 <em class="rfc2119">MUST</em> 运行以下步骤：
                    </p>
                    <ol class="method-algorithm">

                        <li>
                            <p>
                                如果此对象的 <var>attaching media keys</var> 值为 true，则返回一个以 <a data-link-type="idl"
                                    data-lt="InvalidStateError" href="#dfn-invalidstateerror" class="internalDFN"
                                    id="ref-for-dfn-invalidstateerror-11"><code><code>InvalidStateError</code></code></a>
                                拒绝的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>mediaKeys</var> 与 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                    class="internalDFN"
                                    id="ref-for-dom-htmlmediaelement-mediakeys-3"><code>mediaKeys</code></a>
                                属性是同一个对象，则返回一个解析为 <code>undefined</code> 的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                将此对象的 <var>attaching media keys</var> 值设为 true。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>promise</var> 为一个新的 promise。
                            </p>
                        </li>
                        <li>
                            <p>
                                并行运行下列步骤：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        如果以下条件全部成立：
                                    </p>
                                    <ul>
                                        <li>
                                            <p>
                                                <var>mediaKeys</var> 不为 null，
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                <var>mediaKeys</var> 所代表的 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-79">CDM</a>
                                                实例已被其他媒体元素使用，
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                用户代理无法与当前元素一起使用它，
                                            </p>
                                        </li>
                                    </ul>
                                    <p>
                                        则将此对象的 <var>attaching media keys</var> 值设为 false，并以 <a data-link-type="idl"
                                            data-lt="QuotaExceededError" href="#dfn-quotaexceedederror"
                                            class="internalDFN"
                                            id="ref-for-dfn-quotaexceedederror-5"><code><code>QuotaExceededError</code></code></a>
                                        拒绝 <var>promise</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                            class="internalDFN"
                                            id="ref-for-dom-htmlmediaelement-mediakeys-4"><code>mediaKeys</code></a>
                                        属性不为 null，则运行以下步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                如果用户代理或 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-80">CDM</a> 不支持解除关联，则将
                                                <var>attaching media keys</var> 设为 false，并以 <a data-link-type="idl"
                                                    data-lt="NotSupportedError" href="#dfn-notsupportederror"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-notsupportederror-8"><code><code>NotSupportedError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果当前无法解除关联，则将 <var>attaching media keys</var> 设为 false，并以 <a
                                                    data-link-type="idl" data-lt="InvalidStateError"
                                                    href="#dfn-invalidstateerror" class="internalDFN"
                                                    id="ref-for-dfn-invalidstateerror-12"><code><code>InvalidStateError</code></code></a>
                                                拒绝 <var>promise</var>。
                                            </p>
                                            <div class="note" role="note" id="issue-container-generatedID-101">
                                                <div role="heading" class="note-title marker" id="h-note-101"
                                                    aria-level="4"><span>注</span></div>
                                                <p class="">
                                                    例如，某些实现可能不允许在播放期间解除关联。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <p>
                                                停止使用 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                                    class="internalDFN" id="ref-for-dfn-cdm-81">CDM</a> 实例（由 <a
                                                    data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                                    class="internalDFN"
                                                    id="ref-for-dom-htmlmediaelement-mediakeys-5"><code>mediaKeys</code></a>
                                                属性表示）来解密 <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>，并解除与媒体元素的关联。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果前述步骤失败，则将 <var>attaching media keys</var> 设为 false，并以合适的 <a
                                                    href="#error-names">错误名</a> 拒绝 <var>promise</var>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>mediaKeys</var> 不为 null，则运行以下步骤：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                将 <var>mediaKeys</var> 所代表的 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-82">CDM</a>
                                                实例与媒体元素关联，以用于解密 <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a>。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果前述步骤失败，运行以下步骤：
                                            </p>
                                            <ol>
                                                <li>
                                                    <p>
                                                        将 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                                            class="internalDFN"
                                                            id="ref-for-dom-htmlmediaelement-mediakeys-6"><code>mediaKeys</code></a>
                                                        属性设为 null。
                                                    </p>
                                                </li>

                                                <li>
                                                    <p>
                                                        将 <var>attaching media keys</var> 设为 false。
                                                    </p>
                                                </li>
                                                <li>
                                                    <p>
                                                        以新的 <a data-link-type="interface" data-lt="DOMException"
                                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>（其
                                                        name 为合适的 <a href="#error-names">错误名</a>）拒绝 <var>promise</var>。
                                                    </p>
                                                </li>
                                            </ol>
                                        </li>
                                        <li>
                                            <p>
                                                <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>，在该媒体元素上运行
                                                <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-attempt-to-resume-playback-if-necessary"
                                                    class="internalDFN"
                                                    id="ref-for-dfn-attempt-to-resume-playback-if-necessary-2">Attempt
                                                    to Resume Playback If Necessary</a> 算法。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        将 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                            class="internalDFN"
                                            id="ref-for-dom-htmlmediaelement-mediakeys-7"><code>mediaKeys</code></a>
                                        属性设为 <var>mediaKeys</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        将 <var>attaching media keys</var> 设为 false。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        用 <code>undefined</code> 解析 <var>promise</var>。
                                    </p>
                                </li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                返回 <var>promise</var>。
                            </p>
                        </li>
                    </ol>
                </dd>
            </dl>
        </section>
        <section id="mediaencryptedevent">
            <div class="header-wrapper">
                <h3 id="x7-3-mediaencryptedevent"><bdi class="secno">7.3 </bdi>
                    <a href="#dom-mediaencryptedevent" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-mediaencryptedevent-1"><code>MediaEncryptedEvent</code></a>
                </h3><a class="self-link" href="#mediaencryptedevent" aria-label="Permalink for Section 7.3"></a>
            </div>

            <p>
                <code>MediaEncryptedEvent</code> 对象用于 <a data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted"
                    class="internalDFN" id="ref-for-dfn-encrypted-5"><code><code>encrypted</code></code></a> 事件。
            </p>
            <pre class="idl def" id="webidl-1395593112"><span class="idlHeader"><a class="self-link" href="#webidl-1395593112">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-mediaencryptedevent" data-title="MediaEncryptedEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-mediaencryptedevent" data-idl="interface" data-title="MediaEncryptedEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>MediaEncryptedEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-mediaencryptedevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="MediaEncryptedEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-mediaencryptedevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="MediaEncryptedEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="MediaEncryptedEvent.constructor|MediaEncryptedEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-mediaencryptedeventinit" class="internalDFN" id="ref-for-dom-mediaencryptedeventinit-1"><code>MediaEncryptedEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-mediaencryptedevent-initdatatype" data-title="initDataType" data-dfn-for="MediaEncryptedEvent">
    readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>    <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediaencryptedevent-initdatatype" id="ref-for-dom-mediaencryptedevent-initdatatype-1"><code>initDataType</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-mediaencryptedevent-initdata" data-title="initData" data-dfn-for="MediaEncryptedEvent">
    readonly        attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-mediaencryptedevent-initdata" id="ref-for-dom-mediaencryptedevent-initdata-2"><code>initData</code></a>;</span>
};</span></code></pre>
            <section id="attributes-4">
                <div class="header-wrapper">
                    <h4 id="x7-3-1-attributes"><bdi class="secno">7.3.1 </bdi>
                        属性
                    </h4><a class="self-link" href="#attributes-4" aria-label="Permalink for Section 7.3.1"></a>
                </div>

                <dl class="attributes" data-dfn-for="MediaEncryptedEvent">
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediaencryptedevent-initdatatype"
                            data-idl="attribute" data-title="initDataType" data-dfn-for="MediaEncryptedEvent"
                            data-type="DOMString" data-lt="initDataType"
                            data-local-lt="MediaEncryptedEvent.initDataType" tabindex="0"
                            aria-haspopup="dialog"><code>initDataType</code></dfn> 类型为 <a data-link-type="interface"
                            data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，只读
                    </dt>
                    <dd>
                        指示 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                            id="ref-for-dfn-initialization-data-type-6">Initialization Data Type</a>，
                        由 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                            id="ref-for-dfn-initialization-data-14">Initialization Data</a> 所包含，
                        并存储在 <a data-link-type="idl" href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                            id="ref-for-dom-mediaencryptedevent-initdata-3"><code>initData</code></a> 属性中。
                    </dd>
                    <dt>
                        <dfn data-export="" data-dfn-type="attribute" id="dom-mediaencryptedevent-initdata"
                            data-idl="attribute" data-title="initData" data-dfn-for="MediaEncryptedEvent"
                            data-type="ArrayBuffer" data-lt="initData" data-local-lt="MediaEncryptedEvent.initData"
                            tabindex="0" aria-haspopup="dialog"><code>initData</code></dfn> 类型为 <a
                            data-link-type="interface" data-lt="ArrayBuffer"
                            href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>，只读，可为
                        null
                    </dt>
                    <dd>
                        该事件的 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                            id="ref-for-dfn-initialization-data-15">Initialization Data</a>。
                    </dd>
                </dl>
            </section>
            <section id="mediaencryptedeventinit">
                <div class="header-wrapper">
                    <h4 id="x7-3-2-mediaencryptedeventinit"><bdi class="secno">7.3.2 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-mediaencryptedeventinit"
                            data-idl="dictionary" data-title="MediaEncryptedEventInit" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>MediaEncryptedEventInit</code></dfn>
                    </h4><a class="self-link" href="#mediaencryptedeventinit"
                        aria-label="Permalink for Section 7.3.2"></a>
                </div>

                <pre class="idl def" id="webidl-51354785"><span class="idlHeader"><a class="self-link" href="#webidl-51354785">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-mediaencryptedeventinit" data-title="MediaEncryptedEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-mediaencryptedeventinit" id="ref-for-dom-mediaencryptedeventinit-2"><code>MediaEncryptedEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-mediaencryptedeventinit-initdatatype" data-title="initDataType" data-dfn-for="MediaEncryptedEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span>    <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediaencryptedeventinit-initdatatype" id="ref-for-dom-mediaencryptedeventinit-initdatatype-1"><code>initDataType</code></a> = "";</span><span data-idl="" class="idlMember" id="idl-def-mediaencryptedeventinit-initdata" data-title="initData" data-dfn-for="MediaEncryptedEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-mediaencryptedeventinit-initdata" id="ref-for-dom-mediaencryptedeventinit-initdata-1"><code>initData</code></a> = null;</span>
};</span></code></pre>
                <section id="dictionary-mediaencryptedeventinit-members">
                    <div class="header-wrapper">
                        <h5 id="x7-3-2-1-dictionary-mediaencryptedeventinit-members"><bdi class="secno">7.3.2.1 </bdi>
                            字典 <a class="idlType internalDFN" href="#dom-mediaencryptedeventinit" data-link-type="idl"
                                id="ref-for-dom-mediaencryptedeventinit-3"><code>MediaEncryptedEventInit</code></a>
                            成员
                        </h5><a class="self-link" href="#dictionary-mediaencryptedeventinit-members"
                            aria-label="Permalink for Section 7.3.2.1"></a>
                    </div>

                    <dl class="dictionary-members" data-dfn-for="MediaEncryptedEventInit">
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediaencryptedeventinit-initdatatype" data-idl="field" data-title="initDataType" data-dfn-for="MediaEncryptedEventInit" data-type="DOMString" tabindex="0" aria-haspopup="dialog">initDataType</dfn></code>
                            类型为 <a data-link-type="interface" data-lt="DOMString"
                                href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，默认值为
                            <code>""</code>
                        </dt>
                        <dd>
                            <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type" class="internalDFN"
                                id="ref-for-dfn-initialization-data-type-7">Initialization Data Type</a>。
                        </dd>
                        <dt>
                            <code><dfn data-export="" data-dfn-type="dict-member" id="dom-mediaencryptedeventinit-initdata" data-idl="field" data-title="initData" data-dfn-for="MediaEncryptedEventInit" data-type="ArrayBuffer" tabindex="0" aria-haspopup="dialog">initData</dfn></code>
                            类型为 <a data-link-type="interface" data-lt="ArrayBuffer"
                                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>，可为
                            null，默认值为
                            <code>null</code>
                        </dt>
                        <dd>
                            <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                                id="ref-for-dfn-initialization-data-16">Initialization Data</a>。
                        </dd>
                    </dl>
                </section>
            </section>
        </section>
        <section id="htmlmediaelement-events" class="informative">
            <div class="header-wrapper">
                <h3 id="x7-4-event-summary"><bdi class="secno">7.4 </bdi>
                    事件摘要
                </h3><a class="self-link" href="#htmlmediaelement-events" aria-label="Permalink for Section 7.4"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <table class="old-table">
                <thead>
                    <tr>
                        <th>
                            事件名称
                        </th>
                        <th>
                            接口
                        </th>
                        <th>
                            触发时...
                        </th>
                        <th>
                            前置条件
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <code><dfn id="dfn-encrypted" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">encrypted</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="idl" data-lt="MediaEncryptedEvent" href="#dom-mediaencryptedevent"
                                class="internalDFN"
                                id="ref-for-dom-mediaencryptedevent-2"><code>MediaEncryptedEvent</code></a>
                        </td>
                        <td>
                            用户代理在 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                                class="internalDFN" id="ref-for-dfn-initialization-data-17">Initialization Data</a> 在 <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> 中被发现时触发。
                        </td>
                        <td>
                            元素的 <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                            等于或大于
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                            <div class="note" role="note" id="issue-container-generatedID-102">
                                <div role="heading" class="note-title marker" id="h-note-102" aria-level="4">
                                    <span>注</span>
                                </div>
                                <p class="">
                                    元素可能正在播放或已经播放过。
                                </p>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code><dfn id="dfn-waitingforkey" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">waitingforkey</dfn></code>
                        </td>
                        <td>
                            <a data-link-type="interface" data-lt="Event"
                                href="https://dom.spec.whatwg.org/#event"><code>Event</code></a>
                        </td>
                        <td>
                            播放因等待密钥而被阻塞。
                        </td>
                        <td>
                            <a data-link-type="attribute"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                            等于或小于
                            <a data-link-type="const"
                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>。
                            元素的 <var>playback blocked waiting for key</var> 值刚刚变为 <code>true</code>。
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="htmlmediaelement-algorithms">
            <div class="header-wrapper">
                <h3 id="x7-5-algorithms"><bdi class="secno">7.5 </bdi>
                    算法
                </h3><a class="self-link" href="#htmlmediaelement-algorithms"
                    aria-label="Permalink for Section 7.5"></a>
            </div>

            <section id="media-may-contain-encrypted-blocks">
                <div class="header-wrapper">
                    <h4 id="x7-5-1-media-data-may-contain-encrypted-blocks"><bdi class="secno">7.5.1 </bdi>
                        媒体数据可能包含加密块
                    </h4><a class="self-link" href="#media-may-contain-encrypted-blocks"
                        aria-label="Permalink for Section 7.5.1"></a>
                </div>

                <p>
                    Media Data May Contain Encrypted Blocks 算法在用户代理要求在播放媒体数据之前指定 <a data-link-type="idl"
                        data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-33"><code>MediaKeys</code></a> 对象时暂停播放。运行此算法的请求包含一个目标 <a
                        data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-14"><code>HTMLMediaElement</code></a> 对象。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>media element</var> 为指定的 <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-15"><code>HTMLMediaElement</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>media element</var> 的 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-8"><code>mediaKeys</code></a> 属性为 null，
                            且实现要求在解码可能被加密的 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#media-data">媒体数据</a> 之前指定 <a
                                data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-34"><code>MediaKeys</code></a> 对象，则运行下列步骤：
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-103">
                            <div role="heading" class="note-title marker" id="h-note-103" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                当应用在调用 <a data-link-type="idl" data-lt="setMediaKeys()"
                                    href="#dom-htmlmediaelement-setmediakeys" class="internalDFN"
                                    id="ref-for-dom-htmlmediaelement-setmediakeys-3"><code>setMediaKeys</code></a><code>()</code>
                                来提供 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                    class="internalDFN" id="ref-for-dom-mediakeys-35"><code>MediaKeys</code></a>
                                对象之前就提供媒体数据时，可能会到达这些步骤。选择 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                    class="internalDFN" id="ref-for-dfn-cdm-83">CDM</a>
                                可能会影响使用的管线和/或解码器，因此一些实现可能会延迟播放可能包含加密块的媒体数据，直到通过向 <a data-link-type="idl"
                                    data-lt="setMediaKeys()" href="#dom-htmlmediaelement-setmediakeys"
                                    class="internalDFN"
                                    id="ref-for-dom-htmlmediaelement-setmediakeys-4"><code>setMediaKeys</code></a><code>()</code>
                                传入一个 <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                    class="internalDFN" id="ref-for-dom-mediakeys-36"><code>MediaKeys</code></a> 对象来指定
                                <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                    id="ref-for-dfn-cdm-84">CDM</a> 为止。
                            </p>
                        </div>
                        <ol>
                            <li>
                                <p>
                                    在 <var>media element</var> 上运行 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-wait-for-key" class="internalDFN"
                                        id="ref-for-dfn-wait-for-key-2">Wait for Key</a> 算法。
                                </p>
                            </li>
                            <li>
                                <p>
                                    等待恢复播放的信号。
                                </p>
                            </li>
                        </ol>
                    </li>
                </ol>
            </section>
            <section id="initdata-encountered">
                <div class="header-wrapper">
                    <h4 id="x7-5-2-initialization-data-encountered"><bdi class="secno">7.5.2 </bdi>
                        <dfn class="export" data-export="" id="dfn-initialization-data-encountered" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">遇到 Initialization Data</dfn>
                    </h4><a class="self-link" href="#initdata-encountered" aria-label="Permalink for Section 7.5.2"></a>
                </div>

                <p>
                    Initialization Data Encountered 算法为在 <a data-link-type="dfn" data-lt="Initialization Data"
                        href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-18">Initialization Data</a> 中遇到的项排入一个 <a
                        data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted" class="internalDFN"
                        id="ref-for-dfn-encrypted-6"><code><code>encrypted</code></code></a> 事件。运行此算法的请求包含一个目标 <a
                        data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-16"><code>HTMLMediaElement</code></a> 对象。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>media element</var> 为指定的 <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-17"><code>HTMLMediaElement</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>initDataType</var> 为空字符串。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>initData</var> 为 null。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果媒体数据是 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/media.html#media-data">CORS-same-origin</a>
                            且 <em>不是</em> <a data-link-type="dfn|abstract-op" data-lt="mixed content limitations"
                                href="#dfn-mixed-content-limitations" class="internalDFN"
                                id="ref-for-dfn-mixed-content-limitations-1">混合内容受限</a>，则运行下列步骤：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>initDataType</var> 为表示该 Initialization Data 的 <a
                                        data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                                        class="internalDFN" id="ref-for-dfn-initialization-data-type-8">Initialization
                                        Data Type</a> 的字符串。
                                </p>
                            </li>
                            <li>
                                <p>
                                    令 <var>initData</var> 为该 Initialization Data。
                                </p>
                            </li>
                        </ol>
                        <div class="note" role="note" id="issue-container-generatedID-104">
                            <div role="heading" class="note-title marker" id="h-note-104" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                虽然媒体元素可能允许加载“可升级内容”（Upgradeable Content），但用户代理 <em class="rfc2119">MUST NOT</em>
                                将来自此类媒体数据的 Initialization Data 暴露给应用程序。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                            来创建一个名为 <a data-link-type="idl" data-lt="encrypted" href="#dfn-encrypted"
                                class="internalDFN" id="ref-for-dfn-encrypted-7"><code><code>encrypted</code></code></a>
                            的事件，该事件不冒泡且不可取消，使用 <a href="#dom-mediaencryptedevent" class="internalDFN"
                                data-link-type="idl"
                                id="ref-for-dom-mediaencryptedevent-3"><code>MediaEncryptedEvent</code></a> 接口，将其
                            <var>type</var> 属性设为 <code>encrypted</code> 并将 <var>isTrusted</var> 初始化为
                            <code>true</code>，然后在 <var>media element</var> 上派发该事件。
                        </p>
                        <p>
                            该事件接口 <a href="#dom-mediaencryptedevent" class="internalDFN" data-link-type="idl"
                                id="ref-for-dom-mediaencryptedevent-4"><code>MediaEncryptedEvent</code></a> 包含：
                        </p>
                        <ul style="list-style-type:none">
                            <li><a data-link-type="idl" href="#dom-mediaencryptedevent-initdatatype" class="internalDFN"
                                    id="ref-for-dom-mediaencryptedevent-initdatatype-2"><code>initDataType</code></a> =
                                <var>initDataType</var><br>
                                <br>
                                <a data-link-type="idl" href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                                    id="ref-for-dom-mediaencryptedevent-initdata-4"><code>initData</code></a> =
                                <var>initData</var>
                            </li>
                        </ul>
                        <div class="note" role="note" id="issue-container-generatedID-105">
                            <div role="heading" class="note-title marker" id="h-note-105" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                不会被改变，且不会中止任何算法。此事件仅提供信息。
                            </p>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-106">
                            <div role="heading" class="note-title marker" id="h-note-106" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                如果媒体数据不是 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/urls-and-fetching.html#cors-same-origin">CORS-same-origin</a>
                                或为 <a data-link-type="dfn|abstract-op" data-lt="mixed content limitations"
                                    href="#dfn-mixed-content-limitations" class="internalDFN"
                                    id="ref-for-dfn-mixed-content-limitations-2">混合内容</a>，则 <a data-link-type="idl"
                                    href="#dom-mediaencryptedevent-initdata" class="internalDFN"
                                    id="ref-for-dom-mediaencryptedevent-initdata-5"><code>initData</code></a> 属性将为
                                null。应用可以从其它来源检索 Initialization Data。
                            </p>
                        </div>
                    </li>
                </ol>
            </section>
            <section id="encrypted-block-encountered">
                <div class="header-wrapper">
                    <h4 id="x7-5-3-encrypted-block-encountered"><bdi class="secno">7.5.3 </bdi>
                        <dfn class="export" data-export="" id="dfn-encrypted-block-encountered" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn">遇到加密块</dfn>
                    </h4><a class="self-link" href="#encrypted-block-encountered"
                        aria-label="Permalink for Section 7.5.3"></a>
                </div>

                <p>
                    Encrypted Block Encountered 算法将一块加密的媒体数据排入解密队列，并在可能的情况下尝试解密。运行此算法的请求包含一个目标 <a data-link-type="idl"
                        data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-18"><code>HTMLMediaElement</code></a> 对象。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>media element</var> 为指定的 <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-19"><code>HTMLMediaElement</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>block</var> 为该块加密的媒体数据。
                        </p>
                    </li>
                    <li>
                        <p>
                            将 <var>block</var> 添加到 <var>media element</var> 的 <var>encrypted block queue</var> 的末端。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>media element</var> 的 <var>decryption blocked waiting for key</var> 值为
                            <code>false</code>，则运行 <a data-link-type="dfn|abstract-op" href="#dfn-attempt-to-decrypt"
                                class="internalDFN" id="ref-for-dfn-attempt-to-decrypt-1">Attempt to Decrypt</a> 算法。
                        </p>

                    </li>
                </ol>
            </section>
            <section id="attempt-to-decrypt">
                <div class="header-wrapper">
                    <h4 id="x7-5-4-attempt-to-decrypt"><bdi class="secno">7.5.4 </bdi>
                        <dfn id="dfn-attempt-to-decrypt" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">尝试解密</dfn>
                    </h4><a class="self-link" href="#attempt-to-decrypt" aria-label="Permalink for Section 7.5.4"></a>
                </div>

                <p>
                    Attempt to Decrypt 算法尝试解密已排队等待解密的媒体数据。运行此算法的请求包含一个目标 <a data-link-type="idl"
                        data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-20"><code>HTMLMediaElement</code></a> 对象。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>media element</var> 为指定的 <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-21"><code>HTMLMediaElement</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>media element</var> 的 <var>encrypted block queue</var> 为空，则中止这些步骤。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>media element</var> 的 <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-9"><code>mediaKeys</code></a> 属性不为
                            null，则运行下列步骤：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>media keys</var> 为该属性所引用的 <a data-link-type="idl" data-lt="MediaKeys"
                                        href="#dom-mediakeys" class="internalDFN"
                                        id="ref-for-dom-mediakeys-37"><code>MediaKeys</code></a> 对象。
                                </p>
                            </li>
                            <li>
                                <p>
                                    令 <var>cdm</var> 为 <var>media keys</var> 的 <var>cdm instance</var> 值所表示的 <a
                                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-85">CDM</a> 实例。
                                </p>
                            </li>
                            <li>
                                <p>
                                    如果 <var>cdm</var> 因任何原因不再可用，运行下列步骤：
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            运行 <a
                                                href="https://html.spec.whatwg.org/multipage/#fatal-decode-error">资源获取算法</a>
                                            的 “media data is corrupted” 步骤。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            在 <var>media keys</var> 上以原因为硬件上下文重置或其他适当原因运行 <a
                                                data-link-type="dfn|abstract-op" href="#dfn-cdm-unavailable"
                                                class="internalDFN" id="ref-for-dfn-cdm-unavailable-3">CDM
                                                Unavailable</a> 算法。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            中止这些步骤。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    如果由 <var>media keys</var> 创建且尚未被 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-closed" class="internalDFN" id="ref-for-dfn-closed-10">closed</a>
                                    的至少一个 <a data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysession-41"><code>MediaKeySession</code></a> 存在，则运行下列步骤：
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-107">
                                    <div role="heading" class="note-title marker" id="h-note-107" aria-level="5">
                                        <span>注</span>
                                    </div>
                                    <p class="">
                                        该检查确保 <var>cdm</var> 已完成加载，并且是匹配密钥可用的先决条件。
                                    </p>
                                </div>
                                <ol>
                                    <li>
                                        <p>
                                            令 <var>block</var> 为 <var>media element</var> 的 <var>encrypted block
                                                queue</var> 中的第一项。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            令 <var>block key ID</var> 为 <var>block</var> 的 key ID。
                                        </p>
                                        <div class="note" role="note" id="issue-container-generatedID-108">
                                            <div role="heading" class="note-title marker" id="h-note-108"
                                                aria-level="5"><span>注</span></div>
                                            <p class="">
                                                key ID 通常由容器指定。
                                            </p>
                                        </div>
                                    </li>
                                    <li>
                                        <p>
                                            使用 <var>cdm</var> 执行下列步骤：
                                        </p>
                                        <ol>
                                            <li>
                                                <p>
                                                    令 <var>available keys</var> 为由 <var>media keys</var> 创建的 session
                                                    中所有密钥的并集。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    令 <var>block key</var> 为 null。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    如果任何 <var>available keys</var> 对应于 <var>block key ID</var> 且可 <a
                                                        data-link-type="dfn|abstract-op"
                                                        href="#dfn-usable-for-decryption" class="internalDFN"
                                                        id="ref-for-dfn-usable-for-decryption-8">用于解密</a>，则令
                                                    <var>session</var> 为包含该密钥的 <a data-link-type="idl"
                                                        data-lt="MediaKeySession" href="#dom-mediakeysession"
                                                        class="internalDFN"
                                                        id="ref-for-dom-mediakeysession-42"><code>MediaKeySession</code></a>
                                                    对象，并令 <var>block key</var> 为该密钥。
                                                </p>
                                                <div class="note" role="note" id="issue-container-generatedID-109">
                                                    <div role="heading" class="note-title marker" id="h-note-109"
                                                        aria-level="5"><span>注</span></div>
                                                    <p class="">
                                                        如果多个会话包含对于 <var>block key ID</var> 可 <a
                                                            data-link-type="dfn|abstract-op"
                                                            href="#dfn-usable-for-decryption" class="internalDFN"
                                                            id="ref-for-dfn-usable-for-decryption-9">用于解密</a>
                                                        的密钥，选择使用哪个会话和密钥取决于 <a data-link-type="dfn|abstract-op"
                                                            href="#dfn-key-system" class="internalDFN"
                                                            id="ref-for-dfn-key-system-33">Key System</a>。
                                                    </p>
                                                </div>
                                            </li>
                                            <li>
                                                <p>
                                                    如果在运行前述步骤后任何 <var>available keys</var> 的状态发生变化，则为每个受影响的
                                                    <var>session</var> 排队一个任务来运行 <a data-link-type="dfn|abstract-op"
                                                        href="#dfn-update-key-statuses" class="internalDFN"
                                                        id="ref-for-dfn-update-key-statuses-8">Update Key Statuses</a>
                                                    算法，提供该会话中所有的 <a data-link-type="dfn|abstract-op"
                                                        href="#dfn-decryption-key-id" class="internalDFN"
                                                        id="ref-for-dfn-decryption-key-id-13">key ID</a> 及其对应的 <a
                                                        data-link-type="idl" data-lt="MediaKeyStatus"
                                                        href="#dom-mediakeystatus" class="internalDFN"
                                                        id="ref-for-dom-mediakeystatus-19"><code>MediaKeyStatus</code></a>
                                                    值。
                                                </p>
                                            </li>
                                            <li>
                                                <p>
                                                    如果 <var>block key</var> 不为 null，则运行下列步骤：
                                                </p>
                                                <ol>
                                                    <li>
                                                        <p>
                                                            使用 <var>cdm</var> 用 <var>block key</var> 解密
                                                            <var>block</var>。
                                                        </p>
                                                    </li>
                                                    <li>
                                                        <p>
                                                            按下列列表中首个匹配的情况执行步骤：
                                                        </p>
                                                        <dl class="switch">
                                                            <dt>
                                                                如果解密失败
                                                            </dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        <p>
                                                                            运行资源获取算法的 “media data is corrupted” 步骤。
                                                                        </p>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            如果 <var>cdm</var> 不再可用，则在 <var>media
                                                                                keys</var> 上以相应原因运行 <a
                                                                                data-link-type="dfn|abstract-op"
                                                                                href="#dfn-cdm-unavailable"
                                                                                class="internalDFN"
                                                                                id="ref-for-dfn-cdm-unavailable-4">CDM
                                                                                Unavailable</a> 算法（硬件上下文重置时使用
                                                                            <code>hardware-context-reset</code>，否则使用
                                                                            <code>internal-error</code>）。
                                                                        </p>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            中止这些步骤。
                                                                        </p>
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                            <dt>
                                                                否则
                                                            </dt>
                                                            <dd>
                                                                <ol>
                                                                    <li>
                                                                        <p>
                                                                            从 <var>media element</var> 的 <var>encrypted
                                                                                block queue</var> 前端移除 <var>block</var>。
                                                                        </p>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            正常处理解密后的块。
                                                                        </p>
                                                                        <div class="note" role="note"
                                                                            id="issue-container-generatedID-110">
                                                                            <div role="heading"
                                                                                class="note-title marker"
                                                                                id="h-note-110" aria-level="5">
                                                                                <span>注</span>
                                                                            </div>
                                                                            <p class="">
                                                                                换言之，对该块进行解码。
                                                                            </p>
                                                                        </div>
                                                                    </li>
                                                                    <li>
                                                                        <p>
                                                                            返回到本算法的开头。
                                                                        </p>
                                                                    </li>
                                                                </ol>
                                                            </dd>
                                                        </dl>
                                                        <div class="note" role="note"
                                                            id="issue-container-generatedID-111">
                                                            <div role="heading" class="note-title marker"
                                                                id="h-note-111" aria-level="5"><span>注</span></div>
                                                            <p class="">
                                                                并非所有解密问题（例如使用了错误的密钥）都会导致解密失败。在此类情况下，此处不会触发错误，但在解码期间可能会触发错误。
                                                            </p>
                                                        </div>
                                                    </li>
                                                </ol>
                                                <div class="note" role="note" id="issue-container-generatedID-112">
                                                    <div role="heading" class="note-title marker" id="h-note-112"
                                                        aria-level="5"><span>注</span></div>
                                                    <p class="">
                                                        否则，表示在任何会话中都不存在该 <var>block key ID</var> 的密钥，则继续后续流程。
                                                    </p>
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            将 <var>media element</var> 的 <var>decryption blocked waiting for key</var> 值设为
                            <code>true</code>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-113">
                            <div role="heading" class="note-title marker" id="h-note-113" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                当对于 <var>block</var> 不存在可 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-usable-for-decryption" class="internalDFN"
                                    id="ref-for-dfn-usable-for-decryption-10">用于解密</a> 的密钥时，将到达此步骤。
                            </p>
                        </div>
                        <div class="note" role="note" id="issue-container-generatedID-114">
                            <div role="heading" class="note-title marker" id="h-note-114" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    一旦用户代理已呈现位于该无法解密块之前的块（尽可能多，例如所有完整的视频帧），它将运行 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-wait-for-key" class="internalDFN"
                                        id="ref-for-dfn-wait-for-key-3">Wait for Key</a> 算法。
                                </p>
                                <p>
                                    在此处不直接运行该算法是为了允许实现提前对当前播放位置之前的媒体数据进行解密和解码，而不影响可见行为。
                                </p>
                            </div>
                        </div>
                    </li>
                </ol>
                <div class="note" role="note" id="issue-container-generatedID-115">
                    <div role="heading" class="note-title marker" id="h-note-115" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            对于基于帧的加密，当媒体元素作为资源获取算法的一部分尝试解码一个帧时，可按如下方式实现：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>encrypted</var> 为 false。
                                </p>
                            </li>
                            <li>
                                <p>
                                    检测该帧是否被加密。
                                </p>
                                <dl class="switch">
                                    <dt>
                                        如果该帧被加密
                                    </dt>
                                    <dd>
                                        运行上述步骤。
                                    </dd>
                                    <dt>
                                        否则
                                    </dt>
                                    <dd>
                                        继续。
                                    </dd>
                                </dl>
                            </li>
                            <li>
                                <p>
                                    解码该帧。
                                </p>
                            </li>
                            <li>
                                <p>
                                    提供该帧用于渲染。
                                </p>
                            </li>
                        </ol>
                    </div>
                </div>
            </section>
            <section id="wait-for-key">
                <div class="header-wrapper">
                    <h4 id="x7-5-5-wait-for-key"><bdi class="secno">7.5.5 </bdi>
                        <dfn id="dfn-wait-for-key" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">等待密钥</dfn>
                    </h4><a class="self-link" href="#wait-for-key" aria-label="Permalink for Section 7.5.5"></a>
                </div>

                <p>
                    Wait for Key 算法排入一个 <a data-link-type="idl" data-lt="waitingforkey" href="#dfn-waitingforkey"
                        class="internalDFN" id="ref-for-dfn-waitingforkey-2"><code><code>waitingforkey</code></code></a>
                    事件并更新 <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>。该算法仅应在
                    <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-22"><code>HTMLMediaElement</code></a> 对象处于可播放状态并且其 <a
                        data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                    大于或等于 <a data-link-type="const"
                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>
                    时调用。运行此算法的请求包含一个目标 <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                        class="internalDFN" id="ref-for-dom-htmlmediaelement-23"><code>HTMLMediaElement</code></a> 对象。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>media element</var> 为指定的 <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-24"><code>HTMLMediaElement</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>media element</var> 的 <var>playback blocked waiting for key</var> 值为
                            <code>true</code>，则中止这些步骤。
                        </p>
                    </li>
                    <li>
                        <p>
                            将 <var>media element</var> 的 <var>playback blocked waiting for key</var> 值设为
                            <code>true</code>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-116">
                            <div role="heading" class="note-title marker" id="h-note-116" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                由于上述步骤，媒体元素如果尚未成为受阻塞的媒体元素，将变为一个受阻塞的媒体元素。在这种情况下，媒体元素将停止播放。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            按下列列表中首个匹配条件的规定执行步骤：
                        </p>
                        <dl class="switch">
                            <dt>
                                如果可获得用于当前播放位置的即时数据
                            </dt>
                            <dd>
                                <p>
                                    将 <var>media element</var> 的 <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                    设为 <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>。
                                </p>
                            </dd>
                            <dt>
                                否则
                            </dt>
                            <dd>
                                <p>
                                    将 <var>media element</var> 的 <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                    设为 <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                                </p>
                            </dd>
                        </dl>
                        <div class="note" role="note" id="issue-container-generatedID-117">
                            <div role="heading" class="note-title marker" id="h-note-117" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                换言之，如果当前播放位置的视帧和音频数据因为未加密和/或已成功解密而已被解码，则将 <a data-link-type="attribute"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                设为 <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>。否则（包括此前情况但数据不再可用的情形），将
                                <code>readyState</code> 设为 <a data-link-type="const"
                                    href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_metadata"><code>HAVE_METADATA</code></a>。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">排队一个任务</a>
                            来触发名为 <a data-link-type="idl" data-lt="waitingforkey" href="#dfn-waitingforkey"
                                class="internalDFN"
                                id="ref-for-dfn-waitingforkey-3"><code><code>waitingforkey</code></code></a> 的事件于
                            <var>media element</var>。
                        </p>
                    </li>
                    <li>
                        <p>
                            挂起播放。
                        </p>
                    </li>
                </ol>
            </section>
            <section id="resume-playback">
                <div class="header-wrapper">
                    <h4 id="x7-5-6-attempt-to-resume-playback-if-necessary"><bdi class="secno">7.5.6 </bdi>
                        <dfn id="dfn-attempt-to-resume-playback-if-necessary" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">必要时尝试恢复播放</dfn>
                    </h4><a class="self-link" href="#resume-playback" aria-label="Permalink for Section 7.5.6"></a>
                </div>

                <p>
                    Attempt to Resume Playback If Necessary 算法在媒体元素因等待密钥而被阻塞且所需密钥当前 <a data-link-type="dfn|abstract-op"
                        href="#dfn-usable-for-decryption" class="internalDFN"
                        id="ref-for-dfn-usable-for-decryption-11">可用于解密</a> 时恢复播放。运行此算法的请求包含一个目标 <a data-link-type="idl"
                        data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                        id="ref-for-dom-htmlmediaelement-25"><code>HTMLMediaElement</code></a> 对象。
                </p>
                <p>
                    运行下列步骤：
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>media element</var> 为指定的 <a data-link-type="idl" data-lt="HTMLMediaElement"
                                href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-26"><code>HTMLMediaElement</code></a> 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>media element</var> 的 <var>playback blocked waiting for key</var> 为
                            <code>false</code>，则中止这些步骤。
                        </p>
                    </li>
                    <li>
                        <p>
                            在 <var>media element</var> 上运行 <a data-link-type="dfn|abstract-op"
                                href="#dfn-attempt-to-decrypt" class="internalDFN"
                                id="ref-for-dfn-attempt-to-decrypt-2">Attempt to Decrypt</a> 算法。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果用户代理能够沿播放方向推进当前播放位置：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    将 <var>media element</var> 的 <var>decryption blocked waiting for key</var> 值设为
                                    <code>false</code>。
                                </p>
                            </li>
                            <li>
                                <p>
                                    将 <var>media element</var> 的 <var>playback blocked waiting for key</var> 值设为
                                    <code>false</code>。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-118">
                                    <div role="heading" class="note-title marker" id="h-note-118" aria-level="5">
                                        <span>注</span>
                                    </div>
                                    <p class="">
                                        由于上述步骤，媒体元素可能不再是一个受阻塞的媒体元素，从而播放可能恢复。
                                    </p>
                                </div>
                            </li>
                            <li>
                                <p>
                                    将 <var>media element</var> 的 <a data-link-type="attribute"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-readystate"><code>readyState</code></a>
                                    值设为 <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>、
                                    <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_future_data"><code>HAVE_FUTURE_DATA</code></a>
                                    或 <a data-link-type="const"
                                        href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_enough_data"><code>HAVE_ENOUGH_DATA</code></a>，视情况而定。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID-119">
                                    <div role="heading" class="note-title marker" id="h-note-119" aria-level="5">
                                        <span>注</span>
                                    </div>
                                    <div class="">
                                        <p>
                                            超过 <a data-link-type="const"
                                                href="https://html.spec.whatwg.org/multipage/media.html#dom-media-have_current_data"><code>HAVE_CURRENT_DATA</code></a>
                                            的状态以及 <a data-link-type="event"
                                                href="https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough">canplaythrough</a>
                                            事件通常不会（或不太可能）考虑当前密钥之外的密钥可用性。
                                        </p>
                                        <p>
                                            readyState 的变化也可能导致如规范中所述触发相应的 <a data-link-type="idl"
                                                data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                                                class="internalDFN"
                                                id="ref-for-dom-htmlmediaelement-27"><code>HTMLMediaElement</code></a>
                                            事件。
                                        </p>
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </li>
                </ol>
            </section>
        </section>
        <section id="media-element-restrictions" class="informative">
            <div class="header-wrapper">
                <h3 id="x7-6-media-element-restrictions"><bdi class="secno">7.6 </bdi>
                    Media Element Restrictions
                </h3><a class="self-link" href="#media-element-restrictions" aria-label="Permalink for Section 7.6"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <p>
                由 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-86">CDM</a> 处理的媒体数据在常规方式下（例如通过 <a data-link-type="interface"
                    data-lt="CanvasRenderingContext2D"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d"><code>CanvasRenderingContext2D</code></a>
                的
                <a data-link-type="method" data-lt="drawImage()"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage"><code>drawImage</code></a><code>()</code>
                方法或通过 <a data-link-type="interface" data-lt="AudioContext"
                    href="https://www.w3.org/TR/webaudio-1.0/#AudioContext"><code>AudioContext</code></a> 的
                <a data-link-type="interface" data-lt="MediaElementAudioSourceNode"
                    href="https://www.w3.org/TR/webaudio-1.0/#MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a>）可能无法通过
                Web 平台 API 获取。该规范并不定义媒体数据不可用的具体条件，但如果媒体数据对这些 API 不可用，则这些 API <em class="rfc2119">MAY</em>
                表现得像根本不存在媒体数据一样。
            </p>
            <p>
                在媒体呈现并非由用户代理执行的情况下（例如使用硬件媒体管线），完整的 HTML 呈现能力（例如 CSS 变换）<em class="rfc2119">MAY</em> 无法使用。一个可能的限制是视频媒体<em
                    class="rfc2119">MAY</em> 被限制为仅在与窗口边缘平行且方向正常的矩形区域中显示。
            </p>
        </section>
    </section>
    <section id="implementation-requirements">
        <div class="header-wrapper">
            <h2 id="x8-implementation-requirements"><bdi class="secno">8. </bdi>
                Implementation Requirements
            </h2><a class="self-link" href="#implementation-requirements" aria-label="Permalink for Section 8."></a>
        </div>

        <p>
            本节定义实现要求——针对用户代理和 <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                id="ref-for-dfn-key-system-34">Key Systems</a>（包括 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                class="internalDFN" id="ref-for-dfn-cdm-87">CDM</a> 与服务器）——这些要求可能未在算法中明确涉及。此处及整份规范中的要求适用于所有实现，无论 <a
                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-88">CDM</a>
            是独立于用户代理还是作为其一部分。
        </p>
        <section id="cdm-constraint-requirements">
            <div class="header-wrapper">
                <h3 id="x8-1-cdm-constraints"><bdi class="secno">8.1 </bdi>
                    CDM Constraints
                </h3><a class="self-link" href="#cdm-constraint-requirements"
                    aria-label="Permalink for Section 8.1"></a>
            </div>

            <p>
                用户代理实现者 <em class="rfc2119">MUST</em> 确保 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-89">CDMs</a> 不得访问任何对使用本规范功能播放受保护媒体并非合理必要的信息、存储或系统能力。具体而言，<a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-90">CDM</a>
                <em class="rfc2119">SHALL
                    NOT</em>：
            </p>
            <ul>
                <li>
                    <p>
                        访问网络资源（本地或远程），除非通过用户代理并且本规范明确允许。
                    </p>
                </li>
                <li>
                    <p>
                        访问存储（例如磁盘或内存），除非为使用本规范功能播放受保护媒体的合理需要。
                    </p>
                </li>
                <li>
                    <p>
                        访问用户数据，除非是 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-91">CDM</a> 状态或 <a href="#persistent-state-requirements">持久化数据</a>。
                    </p>
                </li>
                <li>
                    <p>
                        访问硬件组件或设备，除非为使用本规范功能播放受保护媒体的合理需要。
                    </p>
                </li>
            </ul>
            <p>
                用户代理实现者可使用各种技术来满足上述要求。例如，自行实现 CDM 的用户代理实现者可以将上述要求作为该组件的设计要求。使用第三方 CDM
                的用户代理实现者可以确保其在受限环境（例如“沙箱”）中执行，从而无法访问被禁止的信息和组件。
            </p>
        </section>
        <section id="messaging-requirements">
            <div class="header-wrapper">
                <h3 id="x8-2-messages-and-communication"><bdi class="secno">8.2 </bdi>
                    Messages and Communication
                </h3><a class="self-link" href="#messaging-requirements" aria-label="Permalink for Section 8.2"></a>
            </div>

            <p>
                与 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-94">CDM</a> 之间的所有消息与通信（例如 CDM 与许可证服务器之间）<em class="rfc2119">MUST</em>
                通过用户代理传递。<a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-95">CDM</a> <em class="rfc2119">MUST NOT</em> 发起直接的带外网络请求。除 <a
                    href="#direct-individualization">Direct Individualization</a> 所述外，所有消息与通信 <em
                    class="rfc2119">MUST</em> 通过应用程序并使用本规范定义的 API 传递。具体而言，所有包含应用、<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                或内容特定信息，或发送到由应用指定或基于其 origin 的 URL 的通信 <em class="rfc2119">MUST</em> 通过这些 API。包括所有许可证交换消息在内。
            </p>
        </section>
        <section id="persistent-state-requirements">
            <div class="header-wrapper">
                <h3 id="x8-3-persistent-data"><bdi class="secno">8.3 </bdi>
                    Persistent Data
                </h3><a class="self-link" href="#persistent-state-requirements"
                    aria-label="Permalink for Section 8.3"></a>
            </div>

            <p>
                持久化数据包括由 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-97">CDM</a> 或代表 CDM 由用户代理存储的、在 <a data-link-type="idl" data-lt="MediaKeys"
                    href="#dom-mediakeys" class="internalDFN" id="ref-for-dom-mediakeys-38"><code>MediaKeys</code></a>
                对象销毁后仍然存在的所有数据。具体包括任何标识符（包括 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                    class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-14">Distinctive
                    Identifier(s)</a>）、许可证、密钥、key ID 或 <a data-link-type="dfn|abstract-op"
                    href="#dfn-record-s-of-license-destruction" class="internalDFN"
                    id="ref-for-dfn-record-s-of-license-destruction-12">许可证销毁记录</a>，这些由 <a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-99">CDM</a>
                或代表 CDM 的用户代理存储。
            </p>
            <section id="use-origin-specific-key-system-storage">
                <div class="header-wrapper">
                    <h4 id="x8-3-1-use-origin-specific-and-browsing-profile-specific-key-system-storage"><bdi
                            class="secno">8.3.1 </bdi>
                        Use origin-specific and browsing profile-specific <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-35">Key System</a>
                        storage
                    </h4><a class="self-link" href="#use-origin-specific-key-system-storage"
                        aria-label="Permalink for Section 8.3.1"></a>
                </div>

                <p>
                    可能影响应用或许可证服务器可见消息或行为的持久化数据 <em class="rfc2119">MUST</em> 以 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>-特定且 <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-3">浏览配置文件</a>-特定的方式存储，且<em class="rfc2119">MUST NOT</em>
                    泄漏到私人浏览会话或从私人浏览会话泄漏。具体但不限于，会话数据、许可证、密钥和按 origin 的标识符 <em class="rfc2119">MUST</em> 按 origin
                    和按浏览配置文件存储。
                </p>
                <p>
                    参见 <a href="#session-storage">Session Storage and Persistence</a>。
                </p>
            </section>
            <section id="allow-persistent-data-cleared">
                <div class="header-wrapper">
                    <h4 id="x8-3-2-allow-persistent-data-to-be-cleared"><bdi class="secno">8.3.2 </bdi>
                        Allow Persistent Data to Be Cleared
                    </h4><a class="self-link" href="#allow-persistent-data-cleared"
                        aria-label="Permalink for Section 8.3.2"></a>
                </div>

                <p>
                    使用持久化数据的实现 <em class="rfc2119">MUST</em> 允许用户清除这些数据，使其在外部（例如通过本规范定义的 API）和客户端设备上均不可再检索。
                </p>
                <p>
                    用户代理 <em class="rfc2119">SHOULD</em>：
                </p>
                <ul>
                    <li>
                        <p>
                            将持久化数据如同其他站点数据（例如 cookies）处理。具体包括：
                        </p>
                        <ul>
                            <li>
                                <p id="allow-persistent-data-cleared-with-cookies">
                                    允许用户与清除 cookies 一并清除持久化数据。
                                </p>
                            </li>
                            <li>
                                <p>
                                    允许用户作为清除浏览历史功能的一部分清除持久化数据。
                                </p>
                            </li>
                            <li>
                                <p>
                                    将持久化数据包含在“删除所有数据”的功能中。
                                </p>
                            </li>
                            <li>
                                <p>
                                    在与其它站点数据相同的 UI 位置展示持久化数据。
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            允许用户按 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> 和按
                            <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-5">浏览配置文件</a> 清除持久化数据，尤其是在“忘记此站点”功能中一并忘记与该站点关联的
                            cookies、数据库等。
                        </p>
                    </li>
                    <li>
                        <p>
                            确保清除持久化数据的操作具有足够的原子性，以防止通过未同时清除的其他本地存储数据重新关联新旧标识符（“cookie resurrection”）。参见 <a
                                href="#incomplete-clearing">incomplete clearing of data</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            在界面中以有助于用户理解 <a href="#incomplete-clearing">incomplete clearing of data</a>
                            可能性的方式呈现这些接口，并使他们能够同时删除与所有持久化功能关联的数据（包括 cookies 和 Web 存储）。
                        </p>
                    </li>
                    <li>
                        <p>
                            以便于用户理解 <a href="#incomplete-clearing">incomplete clearing of data</a> 可能性的方式呈现用于禁用和重新启用 <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-36">Key System</a> 的界面，并使他们能够同时删除所有此类持久化存储中的数据。
                        </p>
                    </li>
                    <li>
                        <p>
                            允许用户针对特定 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            或所有 origin 专门删除持久化数据。
                        </p>
                    </li>
                </ul>
            </section>
            <section id="encrypt-or-obfuscate-persistent-data">
                <div class="header-wrapper">
                    <h4 id="x8-3-3-encrypt-or-obfuscate-persistent-data"><bdi class="secno">8.3.3 </bdi>
                        Encrypt or obfuscate Persistent Data
                    </h4><a class="self-link" href="#encrypt-or-obfuscate-persistent-data"
                        aria-label="Permalink for Section 8.3.3"></a>
                </div>

                <p>
                    用户代理 <em class="rfc2119">SHOULD</em> 将持久化数据视为潜在敏感数据；这些信息的泄露可能严重危及用户隐私。因此，用户代理 <em
                        class="rfc2119">SHOULD</em> 确保持久化数据被安全存储，并在删除数据时及时从底层存储中清除。
                </p>
            </section>
        </section>
        <section id="exposed-value-requirements">
            <div class="header-wrapper">
                <h3 id="x8-4-values-exposed-to-the-application"><bdi class="secno">8.4 </bdi>
                    Values Exposed to the Application
                </h3><a class="self-link" href="#exposed-value-requirements" aria-label="Permalink for Section 8.4"></a>
            </div>

            <p>
                暴露给应用或可被应用推断出的值（例如通过其被 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-101">CDM</a> 使用）可能被用来识别客户端或用户，无论这些值是否被设计为标识符。本节定义了避免或至少缓解此类问题的要求。关于 <a
                    href="#identifier-requirements">Identifiers</a> 有额外要求。
            </p>
            <section id="per-origin-per-profile-values">
                <div class="header-wrapper">
                    <h4 id="x8-4-1-use-per-origin-per-profile-values"><bdi class="secno">8.4.1 </bdi>
                        Use Per-Origin Per-Profile Values
                    </h4><a class="self-link" href="#per-origin-per-profile-values"
                        aria-label="Permalink for Section 8.4.1"></a>
                </div>

                <p>
                    所有暴露给或可被应用推断出的 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                        id="ref-for-dfn-distinctive-3">Distinctive Values</a> <em class="rfc2119">MUST</em> 在每个 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> 和每个 <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-6">浏览配置文件</a> 范围内唯一。也就是说，使用本规范定义的 API 为一个 origin 生成的值 <em
                        class="rfc2119">MUST</em> 与为任何其他 origin 生成的值不同，且在一个浏览配置文件中使用的值 <em class="rfc2119">MUST</em>
                    与其它配置文件的值不同。此类值 <em class="rfc2119">MUST NOT</em> 泄漏到私人浏览会话或从私人浏览会话泄漏。
                </p>
                <p>
                    跨 origin 与配置文件的值 <em class="rfc2119">MUST</em> 是 <a data-link-type="dfn|abstract-op"
                        href="#dfn-non-associable-by-application" class="internalDFN"
                        id="ref-for-dfn-non-associable-by-application-3">应用不可关联的</a>，即应用不应能将来自多个 origin
                    或配置文件的值关联起来以判断它们是否来自同一客户端或用户。具体而言，那些从与 origin 无关或配置文件无关的值派生 per-origin 值的实现 <em
                        class="rfc2119">MUST</em> 采用确保上述不可关联性的方法，例如使用具备非可逆性质的派生函数。
                </p>
            </section>
            <section id="allow-values-to-be-cleared">
                <div class="header-wrapper">
                    <h4 id="x8-4-2-allow-values-to-be-cleared"><bdi class="secno">8.4.2 </bdi>
                        Allow Values to Be Cleared
                    </h4><a class="self-link" href="#allow-values-to-be-cleared"
                        aria-label="Permalink for Section 8.4.2"></a>
                </div>

                <p>
                    根据 <a href="#allow-persistent-data-cleared">Allow Persistent Data to Be Cleared</a>
                    的要求，所有持久化并暴露给应用的值 <em class="rfc2119">MUST</em> 可被清除，使其在外部（例如通过本规范定义的 API）和客户端设备上均不可再检索、观察或推断。
                </p>
                <p>
                    一旦被清除，当再次需要值时 <em class="rfc2119">MUST</em> 生成新的、对应用不可关联的值。
                </p>
            </section>
        </section>
        <section id="identifier-requirements">
            <div class="header-wrapper">
                <h3 id="x8-5-identifiers"><bdi class="secno">8.5 </bdi>
                    Identifiers
                </h3><a class="self-link" href="#identifier-requirements" aria-label="Permalink for Section 8.5"></a>
            </div>

            <p>
                实现中使用标识符（尤其是 <a data-link-type="dfn|abstract-op"
                    data-lt="uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                    href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s" class="internalDFN"
                    id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-5">Distinctive
                    Identifier(s) 或 Distinctive Permanent Identifier(s)</a>）会带来隐私问题。本节定义了避免或至少缓解这些问题的要求。<a
                    href="#exposed-value-requirements">Values Exposed to the Application</a> 中的要求同样适用于暴露给应用的标识符。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-120">
                <div role="heading" class="note-title marker" id="h-note-120" aria-level="4"><span>注</span></div>
                <div class="">
                    <p>
                        概要如下：
                    </p>
                    <ul>
                        <li>
                            <p>
                                <a href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers">限制或避免使用
                                    Distinctive Identifiers 与 Permanent Identifiers</a>。
                            </p>
                        </li>
                        <li>
                            <p>
                                除 <a data-link-type="dfn|abstract-op" href="#dfn-permanent-identifier-s"
                                    class="internalDFN" id="ref-for-dfn-permanent-identifier-s-2">Permanent
                                    Identifiers</a> 外，所有标识符 <em class="rfc2119">MUST</em> 在每个 origin
                                与配置文件范围内唯一、对应用不可关联且可被清除。
                            </p>
                        </li>
                        <li>
                            <p>
                                所有标识符 <em class="rfc2119">SHOULD</em> 在暴露到客户端外部时被加密。
                            </p>
                        </li>
                        <li>
                            <p>
                                <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                    class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-15">Distinctive
                                    Identifiers</a> <em class="rfc2119">MUST</em> 在暴露到客户端外部时被加密、对于每个 origin
                                与配置文件唯一，并且可被清除。
                            </p>
                        </li>
                        <li>
                            <p>
                                <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                    class="internalDFN"
                                    id="ref-for-dfn-distinctive-permanent-identifier-s-20">Distinctive Permanent
                                    Identifiers</a> <em class="rfc2119">MUST</em> 在暴露到客户端外部时被加密，并且 <em
                                    class="rfc2119">MUST NOT</em> 暴露给应用。
                            </p>
                        </li>
                        <li>
                            <p>
                                由本规范 API 使用生成的所有潜在标识符或 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive"
                                    class="internalDFN" id="ref-for-dfn-distinctive-4">Distinctive
                                    Values</a>（未在上文覆盖者）<em class="rfc2119">MUST</em> 在每个 origin
                                与配置文件范围内唯一且可被清除，包括随机标识符、会话数据和其他 CDM 数据。
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
            <section id="limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-1-limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers"><bdi
                            class="secno">8.5.1 </bdi>
                        Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers
                    </h4><a class="self-link"
                        href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers"
                        aria-label="Permalink for Section 8.5.1"></a>
                </div>

                <ul>
                    <li>
                        <p>
                            实现 <em class="rfc2119">SHOULD</em> 避免使用 <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-6">Distinctive
                                Identifier(s) 或 Distinctive Permanent Identifier(s)</a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-121">
                            <div role="heading" class="note-title marker" id="h-note-121" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                例如，使用适用于一组客户端或设备的标识符或其他值，而非针对单个客户端。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            实现 <em class="rfc2119">SHOULD</em> 仅在必要时使用 <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-7">Distinctive
                                Identifier(s) 或 Distinctive Permanent Identifier(s)</a>，以执行与特定 <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-103">CDM</a> 实例和会话相关的策略。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-122">
                            <div role="heading" class="note-title marker" id="h-note-122" aria-level="5">
                                <span>注</span>
                            </div>
                            <p class="">
                                例如，"<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-temporary-12"><code>temporary</code></a>" 与
                                "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                    class="internalDFN"
                                    id="ref-for-dom-mediakeysessiontype-persistent-license-7"><code>persistent-license</code></a>"
                                会话可能有不同需求。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            支持使用 Distinctive Identifiers 或 Distinctive Permanent Identifiers 的实现 <em
                                class="rfc2119">SHOULD</em> 提供不使用它们的选项，并且应向用户暴露该选项以供选择。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-123">
                            <div role="heading" class="note-title marker" id="h-note-123" aria-level="5">
                                <span>注</span>
                            </div>
                            <div class="">
                                <p>
                                    当支持时，应用可通过将 <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-23"><code>distinctiveIdentifier</code></a>
                                    设为
                                    "<a data-link-type="idl" href="#dom-mediakeysrequirement-not-allowed"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-not-allowed-14"><code>not-allowed</code></a>"
                                    来选择该模式。选择此选项可能影响 <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                        href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                        id="ref-for-dom-navigator-requestmediakeysystemaccess-12"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                                    的结果以及随后生成的会话所产生的许可证请求。
                                </p>
                                <p>
                                    向用户提供选择此实现能力的访问可能使用户在保持更高隐私的同时仍能访问内容。
                                </p>
                            </div>
                        </div>
                    </li>
                </ul>
            </section>
            <section id="encrypt-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-2-encrypt-identifiers"><bdi class="secno">8.5.2 </bdi>
                        Encrypt Identifiers
                    </h4><a class="self-link" href="#encrypt-identifiers" aria-label="Permalink for Section 8.5.2"></a>
                </div>

                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-16">Distinctive Identifiers</a> 与 <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-21">Distinctive Permanent
                        Identifiers</a> <em class="rfc2119">MUST</em> 在暴露到客户端外部时在消息交换层被加密。所有其他标识符 <em
                        class="rfc2119">SHOULD</em> 在暴露到客户端外部时在消息交换层被加密。所使用的加密 <em class="rfc2119">MUST</em>
                    确保任何两次同一标识符密文实例仅能被持有相应解密密钥的实体 <a data-link-type="dfn|abstract-op" data-lt="associable by an entity"
                        href="#dfn-associable-by-an-entity" class="internalDFN"
                        id="ref-for-dfn-associable-by-an-entity-5">关联</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-124">
                    <div role="heading" class="note-title marker" id="h-note-124" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            标识符可能通过以下方式暴露：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    通过 <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                                        id="ref-for-dfn-message-7"><code><code>message</code></code></a> 事件暴露给应用。
                                </p>
                            </li>
                            <li>
                                <p>
                                    在来自服务器的消息中，例如作为传递给 <a data-link-type="idl" data-lt="update()"
                                        href="#dom-mediakeysession-update" class="internalDFN"
                                        id="ref-for-dom-mediakeysession-update-13"><code>update</code></a><code>()</code>
                                    的消息的一部分。
                                </p>
                            </li>
                            <li>
                                <p>
                                    作为 <a data-link-type="dfn|abstract-op" href="#dfn-individualization"
                                        class="internalDFN" id="ref-for-dfn-individualization-12">individualization</a>
                                    的一部分。
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-104">CDM</a> <em class="rfc2119">MUST</em> 验证用于加密的密钥属于其 <a
                        data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-37">Key System</a> 的有效服务器。对于暴露给应用的标识符，这可通过 <a
                        href="#server-certificate">服务器证书</a> 实现。
                </p>
                <p>
                    服务器 <em class="rfc2119">MUST NOT</em> 将 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-17">Distinctive Identifier</a> 暴露给除发送该标识符的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-105">CDM</a> 之外的任何实体。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-125">
                    <div role="heading" class="note-title marker" id="h-note-125" aria-level="5"><span>注</span></div>
                    <p class="">
                        具体来说，不应将其提供给应用或在发送给 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-106">CDM</a> 的消息中以未加密形式包含。可以通过对标识符进行加密或将其包含在仅能被特定 <a
                            data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-107">CDM</a> 解密的加密信封中来实现。
                    </p>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-126">
                    <div role="heading" class="note-title marker" id="h-note-126" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            这意味着：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    使用设备特定或用户特定密钥进行的每个签名 <em class="rfc2119">MUST</em> 即使对相同明文也应不同。
                                </p>
                            </li>
                            <li>
                                <p>
                                    与设备或用户特定密钥相关的标识符、密钥或证书 <em class="rfc2119">MUST</em> 为许可证或 individualization 服务器加密。
                                </p>
                            </li>
                            <li>
                                <p>
                                    来自许可证服务器发送到 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                        id="ref-for-dfn-cdm-108">CDM</a> 的消息 <em class="rfc2119">MUST NOT</em>
                                    在加密信封外部暴露接收者唯一的标识符（例如预期解密密钥的 ID）。
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
            <section id="per-origin-per-profile-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-3-use-per-origin-per-profile-identifiers"><bdi class="secno">8.5.3 </bdi>
                        Use Per-Origin Per-Profile Identifiers
                    </h4><a class="self-link" href="#per-origin-per-profile-identifiers"
                        aria-label="Permalink for Section 8.5.3"></a>
                </div>

                <p>
                    除 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-22">Distinctive Permanent
                        Identifiers</a> 外，所有标识符 <em class="rfc2119">MUST</em> 在每个 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> 与每个 <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-8">浏览配置文件</a> 范围内唯一。参见 <a href="#per-origin-per-profile-values"
                        class="sec-ref"><bdi class="secno">8.4.1 </bdi>
                        Use Per-Origin Per-Profile Values</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-127">
                    <div role="heading" class="note-title marker" id="h-note-127" aria-level="5"><span>注</span></div>
                    <div class="">
                        <p>
                            这包括但不限于 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-18">Distinctive
                                Identifiers</a>。
                        </p>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-23">Distinctive
                                Permanent Identifiers</a> <em class="rfc2119">MUST NOT</em> 暴露给应用或 origin。
                        </p>
                    </div>
                </div>
            </section>
            <section id="non-associable-identifiers">
                <div class="header-wrapper">
                    <h4 id="x8-5-4-use-non-associable-identifiers"><bdi class="secno">8.5.4 </bdi>
                        Use Non-Associable Identifiers
                    </h4><a class="self-link" href="#non-associable-identifiers"
                        aria-label="Permalink for Section 8.5.4"></a>
                </div>

                <p>
                    所有暴露给应用的标识符，包括 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-19">Distinctive
                        Identifiers</a>，即使为加密形式，<em class="rfc2119">MUST</em> 对应用保持 <a data-link-type="dfn|abstract-op"
                        href="#dfn-non-associable-by-application" class="internalDFN"
                        id="ref-for-dfn-non-associable-by-application-5">不可关联</a>，跨 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a>、<a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-9">浏览配置文件</a> 和清除标识符的情形均应如此。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-128">
                    <div role="heading" class="note-title marker" id="h-note-128" aria-level="5"><span>注</span></div>
                    <p class="">
                        对于所有此类标识符，一个或多个应用（包括相关的许可证或其它服务器）<em class="rfc2119">MUST NOT</em> 能够实现对此类值的关联或匹配。
                    </p>
                </div>
            </section>
            <section id="allow-identifiers-cleared">
                <div class="header-wrapper">
                    <h4 id="x8-5-5-allow-identifiers-to-be-cleared"><bdi class="secno">8.5.5 </bdi>
                        Allow Identifiers to Be Cleared
                    </h4><a class="self-link" href="#allow-identifiers-cleared"
                        aria-label="Permalink for Section 8.5.5"></a>
                </div>

                <p>
                    根据 <a href="#allow-persistent-data-cleared">Allow Persistent Data to Be Cleared</a> 的要求，除 <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-24">Distinctive Permanent
                        Identifiers</a> 外，所有潜在标识符或 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive"
                        class="internalDFN" id="ref-for-dfn-distinctive-5">Distinctive Values</a> <em
                        class="rfc2119">MUST</em> 可被清除，使其在外部（例如通过本规范定义的 API）和客户端设备上均不可再检索、观察或推断。
                </p>
                <p>
                    使用 <a data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-identifier-s-3">Distinctive Identifiers</a> 的实现 <em
                        class="rfc2119">MUST</em> 允许用户清除这些 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-20">Distinctive Identifier(s)</a>。使用 <a
                        data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-permanent-identifier-s-2">Distinctive
                        Permanent Identifier(s)</a> 的实现 <em class="rfc2119">MUST</em> 允许用户清除与这些 <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-25">Distinctive Permanent
                        Identifier(s)</a> 相关联的值。
                </p>
                <p>
                    一旦清除，当再次需要诸如 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-21">Distinctive Identifiers</a>
                    等值时，必须生成新的不可被应用关联的值。
                </p>
            </section>
        </section>
        <section id="individualization">
            <div class="header-wrapper">
                <h3 id="x8-6-individualization"><bdi class="secno">8.6 </bdi>
                    <dfn id="dfn-individualization" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Individualization</dfn>
                </h3><a class="self-link" href="#individualization" aria-label="Permalink for Section 8.6"></a>
            </div>

            <p>
                标识符，尤其是 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                    id="ref-for-dfn-distinctive-identifier-s-22">Distinctive Identifiers</a>，有时通过称为 individualization 或
                provisioning 的流程生成或获取。由此产生的标识符 <em class="rfc2119">MUST</em> 满足 <a data-link-type="dfn|abstract-op"
                    href="#dfn-non-associable-by-application" class="internalDFN"
                    id="ref-for-dfn-non-associable-by-application-7">non-associable by applications</a> 要求，并且对它们的 <a
                    data-link-type="dfn|abstract-op" data-lt="use of Distinctive Identifier(s)"
                    href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                    id="ref-for-dfn-use-distinctive-identifier-s-4">使用</a> <em class="rfc2119">MUST</em> 仅在<a
                    href="#per-origin-per-profile-identifiers">来自单一配置文件的单一 origin</a>的范围内暴露。该过程 <em
                    class="rfc2119">MAY</em> 被重复执行，例如在标识符被 <a href="#allow-identifiers-cleared">清除</a> 之后。
            </p>
            <p>
                该过程 <em class="rfc2119">MUST</em> 由 <a data-link-type="dfn|abstract-op"
                    data-lt="direct individualization" href="#dfn-direct-individualization" class="internalDFN"
                    id="ref-for-dfn-direct-individualization-1">用户代理直接执行</a> 或 <a data-link-type="dfn|abstract-op"
                    data-lt="app-assisted individualization" href="#dfn-app-assisted-individualization"
                    class="internalDFN" id="ref-for-dfn-app-assisted-individualization-2">通过应用执行</a>。两种
                individualization 类型的机制、流程和限制不同，下面的各节对其作了说明。采用哪种方法取决于 <a data-link-type="dfn|abstract-op"
                    href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-109">CDM</a> 的实现以及对本规范要求的应用，尤其是下文所述的要求。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-129">
                <div role="heading" class="note-title marker" id="h-note-129" aria-level="4"><span>Note</span></div>
                <p class="">
                    <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-24"><code>distinctiveIdentifier</code></a>
                    控制是否可以对 <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-23">Distinctive Identifiers</a> 以及 <a
                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-26">Distinctive Permanent
                        Identifiers</a> 进行包括 individualization 在内的使用。具体地，只有当用于创建 <a data-link-type="idl"
                        data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                        id="ref-for-dom-mediakeys-39"><code>MediaKeys</code></a> 对象的 <a data-link-type="idl"
                        href="#dom-mediakeysystemconfiguration-distinctiveidentifier" class="internalDFN"
                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-25"><code>distinctiveIdentifier</code></a>
                    成员的值为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                        id="ref-for-dom-mediakeysrequirement-required-18"><code>required</code></a>" 时，才允许使用这些标识符。
                </p>
            </div>
            <section id="direct-individualization">
                <div class="header-wrapper">
                    <h4 id="x8-6-1-direct-individualization"><bdi class="secno">8.6.1 </bdi>
                        <dfn id="dfn-direct-individualization" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Direct Individualization</dfn>
                    </h4><a class="self-link" href="#direct-individualization"
                        aria-label="Permalink for Section 8.6.1"></a>
                </div>

                <p>
                    Direct Individualization 在 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-110">CDM</a> 与一个与 origin 和应用无关的服务器之间进行。尽管该服务器与 origin 无关，individualization
                    的结果仍允许 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-111">CDM</a> 根据本规范的其他要求提供 origin 特定的标识符。该过程 <em class="rfc2119">MUST</em>
                    由用户代理执行，且 <em class="rfc2119">MUST NOT</em> 使用本规范中定义的 API。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-130">
                    <div role="heading" class="note-title marker" id="h-note-130" aria-level="5"><span>Note</span></div>
                    <p class="">
                        例如，该过程可能通过与用户代理或 CDM 厂商托管的预定服务器通信来初始化客户端设备和/或为 <a
                            href="#per-origin-per-profile-identifiers">单个浏览配置文件</a>获取一个 <a
                            href="#per-origin-per-profile-identifiers">可清除的 per-origin 标识符</a>，可能使用客户端设备的 <a
                            data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-permanent-identifier-s"
                            class="internalDFN" id="ref-for-dfn-use-distinctive-permanent-identifier-s-3">Distinctive
                            Permanent Identifier(s)</a> 或其他 <a data-link-type="dfn|abstract-op"
                            href="#dfn-permanent-identifier-s" class="internalDFN"
                            id="ref-for-dfn-permanent-identifier-s-3">Permanent Identifier(s)</a>。
                    </p>
                </div>
                <p>
                    对于此类 individualization，所有消息交换：
                </p>
                <ul>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 由用户代理处理并通过用户代理的网络栈执行。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 由 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-112">CDM</a> 直接执行。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 通过本规范定义的 API 传递给或经由应用程序。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 发送到独立于任何 origin 和应用的 URL。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 对所有 <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-24">Distinctive Identifiers</a> 和 <a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-27">Distinctive
                                Permanent Identifiers</a> 进行加密。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 使用 TLS。
                        </p>
                    </li>
                </ul>
                <p>
                    实现 <em class="rfc2119">MUST NOT</em> 将 origin(s)、origin 或应用特定信息，或可与 origin(s) <a
                        data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                        id="ref-for-dfn-associable-2">associable</a> 的值暴露给集中式服务器（即便是以加密形式），因为这可能会创建用户或设备访问过的所有 origin
                    的集中记录。
                </p>
            </section>
            <section id="app-assisted-individualization">
                <div class="header-wrapper">
                    <h4 id="x8-6-2-app-assisted-individualization"><bdi class="secno">8.6.2 </bdi>
                        <dfn id="dfn-app-assisted-individualization" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">App-Assisted Individualization</dfn>
                    </h4><a class="self-link" href="#app-assisted-individualization"
                        aria-label="Permalink for Section 8.6.2"></a>
                </div>

                <p>
                    App-Assisted Individualization 在 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-113">CDM</a> 与应用之间进行（可包括应用选择的服务器），并产生一个 per-origin
                    标识符。该过程 <em class="rfc2119">MUST</em> 通过本规范定义的 API 执行，且 <em class="rfc2119">MUST NOT</em>
                    涉及其它通信方式。与所有通过这些 API 的用法一样，该过程 <em class="rfc2119">MAY</em> <a data-link-type="dfn|abstract-op"
                        data-lt="use Distinctive Identifier(s)" href="#dfn-use-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-identifier-s-5">使用一个或多个 Distinctive
                        Identifier(s)</a>，但 <em class="rfc2119">MUST NOT</em> <a data-link-type="dfn|abstract-op"
                        href="#dfn-use-distinctive-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-permanent-identifier-s-4">使用 Distinctive Permanent
                        Identifier(s)</a> 或 非 origin 特定的值，即便是以加密形式。若该过程 <a data-link-type="dfn|abstract-op"
                        data-lt="uses Distinctive Identifier(s)" href="#dfn-use-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-use-distinctive-identifier-s-6">使用了一个或多个 Distinctive
                        Identifier(s)</a>，则生成的标识符也将按定义成为 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-25">Distinctive Identifier</a>。
                </p>
                <p>
                    对于此类 individualization，所有消息交换：
                </p>
                <ul>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 通过本规范定义的 API 传递给或经由应用程序。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">SHALL</em> 对所有相关的 <a data-link-type="idl" data-lt="message"
                                href="#dfn-message" class="internalDFN"
                                id="ref-for-dfn-message-8"><code><code>message</code></code></a> 事件 使用消息类型 "<a
                                data-link-type="idl" href="#dom-mediakeymessagetype-individualization-request"
                                class="internalDFN"
                                id="ref-for-dom-mediakeymessagetype-individualization-request-4"><code>individualization-request</code></a>"。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 由用户代理执行。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 由 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-114">CDM</a> 直接执行。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 包含或以其它方式 <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-permanent-identifier-s" class="internalDFN"
                                id="ref-for-dfn-use-distinctive-permanent-identifier-s-5">使用 Distinctive Permanent
                                Identifier(s)</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 包含非 origin 特定的每客户端信息。
                        </p>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST</em> 遵守 <a href="#identifier-requirements">identifier
                                requirements</a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-131">
                            <div role="heading" class="note-title marker" id="h-note-131" aria-level="5">
                                <span>Note</span>
                            </div>
                            <p class="">
                                这包括仅使用 <a href="#per-origin-per-profile-identifiers">在 origin 与配置文件范围内唯一</a>、<a
                                    href="#allow-identifiers-cleared">可清除</a> 的值，并按需对其 <a
                                    href="#encrypt-identifiers">进行加密</a>。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            <em class="rfc2119">MUST NOT</em> 向 <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-115">CDM</a> 提供可执行代码。
                        </p>
                    </li>
                </ul>
                <p>
                    当在流程中使用可 <a data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                        id="ref-for-dfn-associable-3">associable</a> 的值，包括 <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-26">Distinctive Identifier(s)</a> 时，实施者 <em
                        class="rfc2119">MUST NOT</em> 将 origin(s)、origin 或应用特定信息，或可与 origin(s) <a
                        data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                        id="ref-for-dfn-associable-4">associable</a> 的值暴露给集中服务器（即便是以加密形式），因为这同样可能创建用户或设备访问过的所有 origin
                    的集中记录。
                </p>
                <p>
                    经过适当的防护，此类 individualization 可以比 <a data-link-type="dfn|abstract-op"
                        href="#dfn-direct-individualization" class="internalDFN"
                        id="ref-for-dfn-direct-individualization-2">Direct Individualization</a> 提供更好的隐私，尽管仍不及不使用 <a
                        data-link-type="dfn|abstract-op" href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-use-distinctive-identifier-s-8">Distinctive Identifier(s)</a>
                    的模型。为保持此设计的隐私优势并避免引入其他隐私问题，此类实现及支持它们的应用 <em class="rfc2119">SHOULD</em> 避免将 individualization
                    消息延后或转发到由应用作者不控制的集中服务器或其他服务器。
                </p>
            </section>
        </section>
        <section id="support-multiple-keys">
            <div class="header-wrapper">
                <h3 id="x8-7-support-multiple-keys"><bdi class="secno">8.7 </bdi>
                    Support Multiple Keys
                </h3><a class="self-link" href="#support-multiple-keys" aria-label="Permalink for Section 8.7"></a>
            </div>

            <p>
                实现 <em class="rfc2119">MUST</em> 在每个 <a data-link-type="idl" data-lt="MediaKeySession"
                    href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-43"><code>MediaKeySession</code></a> 对象中支持多个密钥。
            </p>
            <div class="note" role="note" id="issue-container-generatedID-132">
                <div role="heading" class="note-title marker" id="h-note-132" aria-level="4"><span>Note</span></div>
                <p class="">
                    多个密钥如何被支持属于实现细节，但这一点 <em class="rfc2119">MUST</em> 对应用和本规范定义的 API 透明。
                </p>
            </div>
            <p>
                实现 <em class="rfc2119">MUST</em> 支持在播放期间在密钥之间无缝切换。这包括同一 <a data-link-type="idl"
                    data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-44"><code>MediaKeySession</code></a> 中的密钥以及位于不同 <a
                    data-link-type="idl" data-lt="MediaKeySession" href="#dom-mediakeysession" class="internalDFN"
                    id="ref-for-dom-mediakeysession-45"><code>MediaKeySession</code></a> 对象中的密钥。
            </p>
        </section>
        <section id="initialization-data-type-support-requirements">
            <div class="header-wrapper">
                <h3 id="x8-8-initialization-data-type-support"><bdi class="secno">8.8 </bdi>
                    Initialization Data Type Support
                </h3><a class="self-link" href="#initialization-data-type-support-requirements"
                    aria-label="Permalink for Section 8.8"></a>
            </div>

            <section id="licenses-generated-are-independent-of-content-type">
                <div class="header-wrapper">
                    <h4 id="x8-8-1-licenses-generated-are-independent-of-content-type"><bdi class="secno">8.8.1 </bdi>
                        Licenses Generated are Independent of Content Type
                    </h4><a class="self-link" href="#licenses-generated-are-independent-of-content-type"
                        aria-label="Permalink for Section 8.8.1"></a>
                </div>

                <p>
                    实现 <em class="rfc2119">SHOULD</em> 允许用其支持的任何 <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data-type" class="internalDFN"
                        id="ref-for-dfn-initialization-data-type-9">Initialization Data Type</a> 生成的许可证被用于任何内容类型。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-133">
                    <div role="heading" class="note-title marker" id="h-note-133" aria-level="5"><span>Note</span></div>
                    <p class="">
                        否则，<a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                            href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                            id="ref-for-dom-navigator-requestmediakeysystemaccess-13"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                        算法可能例如会因为某个 <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                            href="#dom-mediakeysystemconfiguration" class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-11"><code>MediaKeySystemConfiguration</code></a>
                        中的某个 <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-initdatatypes"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-initdatatypes-5"><code>initDataTypes</code></a>
                        与某个 <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-videocapabilities"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysystemconfiguration-videocapabilities-9"><code>videoCapabilities</code></a>
                        不兼容而拒绝该配置。
                    </p>
                </div>
            </section>
            <section id="support-extraction-from-media-data">
                <div class="header-wrapper">
                    <h4 id="x8-8-2-support-extraction-from-media-data"><bdi class="secno">8.8.2 </bdi>
                        Support Extraction From Media Data
                    </h4><a class="self-link" href="#support-extraction-from-media-data"
                        aria-label="Permalink for Section 8.8.2"></a>
                </div>

                <p>
                    对于任何可能出现在受支持容器中的受支持的 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                        class="internalDFN" id="ref-for-dfn-initialization-data-type-10">Initialization Data
                        Type</a>，用户代理 <em class="rfc2119">MUST</em> 支持从每种此类受支持的容器中 <a
                        href="#initdata-encountered">提取</a> 该类型的 <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-19">Initialization Data</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-134">
                    <div role="heading" class="note-title marker" id="h-note-134" aria-level="5"><span>Note</span></div>
                    <p class="">
                        换言之，表明支持某个 <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data-type"
                            class="internalDFN" id="ref-for-dfn-initialization-data-type-11">Initialization Data
                            Type</a> 意味着既支持 <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                            id="ref-for-dfn-cdm-116">CDM</a>
                        生成许可证请求，也（对于容器特定类型）支持用户代理从容器中提取该类型的数据。这并不意味着实现必须能够从任意受支持的内容类型中解析任意受支持的 <a
                            data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                            id="ref-for-dfn-initialization-data-20">Initialization Data</a>。
                    </p>
                </div>
            </section>
        </section>
        <section id="media-requirements">
            <div class="header-wrapper">
                <h3 id="x8-9-supported-media"><bdi class="secno">8.9 </bdi>
                    Supported Media
                </h3><a class="self-link" href="#media-requirements" aria-label="Permalink for Section 8.9"></a>
            </div>

            <p>
                本节定义了本规范实现所支持的内容（<a href="https://html.spec.whatwg.org/multipage/#media-resource">media
                    resource</a>）的属性。
            </p>
            <section id="unencrypted-container">
                <div class="header-wrapper">
                    <h4 id="x8-9-1-unencrypted-container"><bdi class="secno">8.9.1 </bdi>
                        Unencrypted Container
                    </h4><a class="self-link" href="#unencrypted-container"
                        aria-label="Permalink for Section 8.9.1"></a>
                </div>

                <p>
                    媒体容器 <em class="rfc2119">MUST NOT</em> 被加密。本规范依赖于用户代理在无需解密任何媒体数据的情况下解析媒体容器的能力。这包括 <a
                        data-link-type="dfn|abstract-op" href="#dfn-encrypted-block-encountered" class="internalDFN"
                        id="ref-for-dfn-encrypted-block-encountered-2">Encrypted Block Encountered</a> 和 <a
                        data-link-type="dfn|abstract-op" href="#dfn-initialization-data-encountered" class="internalDFN"
                        id="ref-for-dfn-initialization-data-encountered-3">Initialization Data Encountered</a>
                    算法，以及支持标准的 <a data-link-type="idl" data-lt="HTMLMediaElement" href="#dom-htmlmediaelement"
                        class="internalDFN" id="ref-for-dom-htmlmediaelement-28"><code>HTMLMediaElement</code></a> 功能，例如
                    <a href="https://html.spec.whatwg.org/multipage/#seeking">seeking</a>。
                </p>
            </section>
            <section id="interoperably-encrypted">
                <div class="header-wrapper">
                    <h4 id="x8-9-2-interoperably-encrypted"><bdi class="secno">8.9.2 </bdi>
                        Interoperably Encrypted
                    </h4><a class="self-link" href="#interoperably-encrypted"
                        aria-label="Permalink for Section 8.9.2"></a>
                </div>

                <p>
                    <a href="https://html.spec.whatwg.org/multipage/#media-resource">Media resources</a>（包括所有轨道）<em
                        class="rfc2119">MUST</em> 按照允许在提供密钥时以完全规范且兼容的方式解密内容的容器特定 “common encryption” 规范进行加密与打包。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-135">
                    <div role="heading" class="note-title marker" id="h-note-135" aria-level="5"><span>Note</span></div>
                    <p class="">
                        <cite><a data-matched-text="[[[EME-STREAM-REGISTRY]]]"
                                href="https://www.w3.org/TR/eme-stream-registry/">Encrypted Media Extensions Stream
                                Format Registry</a></cite> [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-eme-stream-registry"
                                title="Encrypted Media Extensions Stream Format Registry">EME-STREAM-REGISTRY</a></cite>]
                        提供了此类流格式的参考。
                    </p>
                </div>
            </section>
            <section id="unencrypted-in-band-support-content">
                <div class="header-wrapper">
                    <h4 id="x8-9-3-unencrypted-in-band-support-content"><bdi class="secno">8.9.3 </bdi>
                        Unencrypted In-band Support Content
                    </h4><a class="self-link" href="#unencrypted-in-band-support-content"
                        aria-label="Permalink for Section 8.9.3"></a>
                </div>

                <p>
                    带内支持内容（例如字幕、描述音轨和转录）<em class="rfc2119">SHOULD NOT</em> 被加密。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-136">
                    <div role="heading" class="note-title marker" id="h-note-136" aria-level="5"><span>Note</span></div>
                    <p class="">
                        对这些轨道进行解密——尤其是要将其提供回用户代理——通常不被实现支持。因此，对这些轨道加密将阻止它们在用户代理实现中广泛用于无障碍功能。
                    </p>
                </div>
                <p>
                    为确保可访问性信息以可用的形式提供，对于选择支持加密的带内支持内容的实现：a) <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-117">CDM</a> <em class="rfc2119">MUST</em>
                    将解密后的数据提供给用户代理，且 b) 用户代理 <em class="rfc2119">MUST</em> 以与等效未加密支持内容相同的方式对其进行处理，例如将其作为 <a
                        href="https://html.spec.whatwg.org/multipage/#timed-text-tracks">timed text tracks</a> 暴露
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>]。
                </p>
            </section>
        </section>
    </section>
    <section id="common-key-systems">
        <div class="header-wrapper">
            <h2 id="x9-common-key-systems"><bdi class="secno">9. </bdi>
                <dfn id="dfn-common-key-systems" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">通用密钥系统</dfn>
            </h2><a class="self-link" href="#common-key-systems" aria-label="第9节的永久链接"></a>
        </div>

        <p>
            所有用户代理 <em class="rfc2119">MUST</em> 支持本节中描述的通用 <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-38">密钥系统</a>。
        </p>
        <div class="note" role="note" id="issue-container-generatedID-137">
            <div role="heading" class="note-title marker" id="h-note-137" aria-level="3"><span>注</span></div>
            <p class="">
                这确保了在所有用户代理中都有一个通用的基线功能级别，包括那些完全开源的用户代理。因此，仅需要基本解密的内容提供商可以构建简单的应用程序，在所有平台上工作，而无需与任何内容保护提供商合作。
            </p>
        </div>
        <section id="clear-key">
            <div class="header-wrapper">
                <h3 id="x9-1-clear-key"><bdi class="secno">9.1 </bdi>
                    <dfn id="dfn-clear-key" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Clear
                        Key（明文密钥）</dfn>
                </h3><a class="self-link" href="#clear-key" aria-label="第9.1节的永久链接"></a>
            </div>

            <p>
                <code>"org.w3.clearkey"</code> <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-39">密钥系统</a> 使用明文（未加密）的密钥来解密源内容。不需要额外的客户端侧内容保护。该 <a
                    data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-40">密钥系统</a> 在下文描述。
            </p>
            <section id="clear-key-capabilities">
                <div class="header-wrapper">
                    <h4 id="x9-1-1-capabilities"><bdi class="secno">9.1.1 </bdi>
                        功能
                    </h4><a class="self-link" href="#clear-key-capabilities" aria-label="第9.1.1节的永久链接"></a>
                </div>

                <p>
                    下文描述了 <a data-link-type="dfn|abstract-op" href="#dfn-clear-key" class="internalDFN"
                        id="ref-for-dfn-clear-key-2">Clear Key</a> 如何支持与 <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-41">密钥系统</a> 相关的特定功能：
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="MediaKeySystemConfiguration"
                                href="#dom-mediakeysystemconfiguration" class="internalDFN"
                                id="ref-for-dom-mediakeysystemconfiguration-12"><code>MediaKeySystemConfiguration</code></a>:
                        </p>
                        <ol>
                            <li>
                                <p>
                                    <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-encryptionscheme-6"><code>encryptionScheme</code></a>:
                                    实现 <em class="rfc2119">MUST</em> 支持
                                    <code><a data-link-type="dfn|abstract-op" href="#scheme-cenc" class="internalDFN" id="ref-for-scheme-cenc-1"><code>"cenc"</code></a></code>
                                    方案，并 <em class="rfc2119">MAY</em> 支持其他方案。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="idl" href="#dom-mediakeysystemmediacapability-robustness"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemmediacapability-robustness-4"><code>robustness</code></a>:
                                    仅支持空字符串。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="idl"
                                        href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-26"><code>distinctiveIdentifier</code></a>:
                                    不支持 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-19"><code>required</code></a>"。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysystemconfiguration-persistentstate-12"><code>persistentState</code></a>:
                                    不应为 "<a data-link-type="idl" href="#dom-mediakeysrequirement-required"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysrequirement-required-20"><code>required</code></a>"
                                    ，除非应用打算创建非 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary"
                                        class="internalDFN"
                                        id="ref-for-dom-mediakeysessiontype-temporary-13"><code>temporary</code></a>"
                                    会话（如果支持）。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-persistent-license-8"><code>persistent-license</code></a>"
                            类型的 <a data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-6"><code>MediaKeySessionType</code></a>:
                            实现 <em class="rfc2119">MAY</em> 支持该类型。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="setServerCertificate()"
                                href="#dom-mediakeys-setservercertificate" class="internalDFN"
                                id="ref-for-dom-mediakeys-setservercertificate-2"><code>setServerCertificate</code></a><code>()</code>
                            方法：不支持。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="getStatusForPolicy()"
                                href="#dom-mediakeys-getstatusforpolicy" class="internalDFN"
                                id="ref-for-dom-mediakeys-getstatusforpolicy-3"><code>getStatusForPolicy</code></a><code>()</code>
                            方法：实现应始终将 promise 解析为 "<a data-link-type="idl" href="#dom-mediakeystatus-usable"
                                class="internalDFN" id="ref-for-dom-mediakeystatus-usable-4"><code>usable</code></a>"。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="setMediaKeys()" href="#dom-htmlmediaelement-setmediakeys"
                                class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-setmediakeys-5"><code>setMediaKeys</code></a><code>()</code>
                            方法：实现 <em class="rfc2119">MAY</em> 支持将 <a data-link-type="idl" data-lt="MediaKeys"
                                href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-40"><code>MediaKeys</code></a> 对象关联到多个 <a data-link-type="idl"
                                data-lt="HTMLMediaElement" href="#dom-htmlmediaelement" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-29"><code>HTMLMediaElement</code></a>。
                        </p>
                    </li>
                </ul>
            </section>
            <section id="clear-key-behavior">
                <div class="header-wrapper">
                    <h4 id="x9-1-2-behavior"><bdi class="secno">9.1.2 </bdi>
                        行为
                    </h4><a class="self-link" href="#clear-key-behavior" aria-label="第9.1.2节的永久链接"></a>
                </div>

                <p>
                    下文描述了 <a data-link-type="dfn|abstract-op" href="#dfn-clear-key" class="internalDFN"
                        id="ref-for-dfn-clear-key-3">Clear Key</a> 如何实现与 <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-42">密钥系统</a> 相关的特定行为：
                </p>
                <ul>
                    <li>
                        <p>
                            在 <a data-link-type="idl" data-lt="generateRequest()"
                                href="#dom-mediakeysession-generaterequest" class="internalDFN"
                                id="ref-for-dom-mediakeysession-generaterequest-6"><code>generateRequest</code></a><code>()</code>
                            算法中：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    生成的 <var>message</var> 是一个 JSON 对象，按 <a href="#clear-key-request-format">许可请求格式</a>
                                    所述以 UTF-8 编码。
                                </p>
                            </li>
                            <li>
                                <p>
                                    请求通过从 <var>sanitized init data</var> 中提取密钥 ID 来生成。
                                </p>
                            </li>
                            <li>
                                <p>
                                    "type" 成员的值是 <var>sessionType</var> 参数的值。
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" href="#dom-mediakeysession-sessionid" class="internalDFN"
                                id="ref-for-dom-mediakeysession-sessionid-8"><code>sessionId</code></a> 属性是可由 32
                            位整数表示的数值。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" href="#dom-mediakeysession-expiration" class="internalDFN"
                                id="ref-for-dom-mediakeysession-expiration-5"><code>expiration</code></a> 属性始终为
                            <code>NaN</code>。
                        </p>
                    </li>
                    <li>
                        <p>
                            在 <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-14"><code>update</code></a><code>()</code>
                            算法中：
                        </p>
                        <ul>
                            <li>
                                <p>
                                    <var>response</var> 参数要么是一个按 <a href="#clear-key-license-format">许可格式</a> 所述的 JWK
                                    集，要么是一个按 <a href="#clear-key-release-ack-format">许可释放确认格式</a> 所述以 UTF-8 编码的 JSON 对象。
                                </p>
                            </li>
                            <li>
                                <p>
                                    在第一种情况下，如果 <var>sanitized response</var> 不是具有至少一个针对音频/视频类型长度有效的有效 JWK 密钥的有效 JWK
                                    集，则被视为无效。在第二种情况下，如果 <var>sanitized response</var> 不是有效的 JSON 对象，则被视为无效。
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            对于类型为 "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysessiontype-persistent-license-9"><code>persistent-license</code></a>"
                            的会话，在 <a data-link-type="idl" data-lt="remove()" href="#dom-mediakeysession-remove"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-remove-4"><code>remove</code></a><code>()</code>
                            算法中，反映 <var>record of license destruction</var> 的 <var>message</var> 是一个按 <a
                                href="#clear-key-release-format">许可释放格式</a> 所述以 UTF-8 编码的 JSON 对象。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                id="ref-for-dom-mediakeysession-keystatuses-5"><code>keyStatuses</code></a> 属性最初包含通过 <a
                                data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-update-15"><code>update</code></a><code>()</code>
                            提供的所有密钥 ID，状态为 "<a data-link-type="idl" href="#dom-mediakeystatus-usable"
                                class="internalDFN"
                                id="ref-for-dom-mediakeystatus-usable-5"><code>usable</code></a>"。当执行 <a
                                data-link-type="idl" data-lt="remove()" href="#dom-mediakeysession-remove"
                                class="internalDFN"
                                id="ref-for-dom-mediakeysession-remove-5"><code>remove</code></a><code>()</code>
                            算法时，<a data-link-type="idl" href="#dom-mediakeysession-keystatuses" class="internalDFN"
                                id="ref-for-dom-mediakeysession-keystatuses-6"><code>keyStatuses</code></a> 属性将被设置为空列表。
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                                id="ref-for-dfn-initialization-data-21">初始化数据</a>：实现 <em class="rfc2119">MAY</em>
                            支持注册的初始化数据类型的任意组合 [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-eme-initdata-registry"
                                    title="Encrypted Media Extensions Initialization Data Format Registry">EME-INITDATA-REGISTRY</a></cite>]。实现
                            <em class="rfc2119">SHOULD</em> 支持
                            <code>"keyids"</code> 类型 [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-eme-initdata-keyids"
                                    title="&quot;keyids&quot; Initialization Data Format">EME-INITDATA-KEYIDS</a></cite>]
                            及其他适合用户代理支持的内容类型的类型。
                        </p>
                    </li>
                </ul>
            </section>
            <section id="clear-key-request-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-3-license-request-format"><bdi class="secno">9.1.3 </bdi>
                        许可请求格式
                    </h4><a class="self-link" href="#clear-key-request-format" aria-label="第9.1.3节的永久链接"></a>
                </div>

                <p>
                    本节描述通过 <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                        id="ref-for-dfn-message-9"><code><code>message</code></code></a> 事件的 <var>message</var>
                    属性提供给应用的许可请求的格式。
                </p>
                <p>
                    该格式是一个 JSON 对象，包含以下成员：
                </p>
                <dl>
                    <dt>
                        "kids"
                    </dt>
                    <dd>
                        一个 <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-14">密钥 ID</a> 的数组。数组的每个元素都是包含该密钥 ID 值的字节序列的 base64url 编码。
                    </dd>
                    <dt>
                        "type"
                    </dt>
                    <dd>
                        请求的 <a data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysessiontype-7"><code>MediaKeySessionType</code></a>。
                    </dd>
                </dl>
                <p>
                    当包含在 <a data-link-type="idl" href="#dom-mediakeymessageevent-message" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-message-3"><code>message</code></a>
                    属性的 ArrayBuffer 中，作为 <a data-link-type="idl" data-lt="MediaKeyMessageEvent"
                        href="#dom-mediakeymessageevent" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-5"><code>MediaKeyMessageEvent</code></a> 对象的一部分时，JSON 字符串按
                    Encoding 规范 [<cite><a class="bibref" data-link-type="biblio" href="#bib-encoding"
                            title="Encoding Standard">ENCODING</a></cite>] 中规定的方式以 UTF-8 编码。应用 <em
                        class="rfc2119">MAY</em> 使用 <a data-link-type="interface" data-lt="TextDecoder"
                        href="https://encoding.spec.whatwg.org/#textdecoder"><code>TextDecoder</code></a> 接口将
                    ArrayBuffer 的内容解码为 JSON 字符串。
                </p>
                <section id="clear-key-request-format-example" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-3-1-example"><bdi class="secno">9.1.3.1 </bdi>
                            示例
                        </h5><a class="self-link" href="#clear-key-request-format-example"
                            aria-label="第9.1.3.1节的永久链接"></a>
                    </div>
                    <p><em>本节为非规范性内容。</em></p>

                    <p>
                        下例是针对两个密钥 ID 的临时许可的许可请求。（换行仅为可读性）
                    </p>
                    <div class="example" id="example-1">
                        <div class="marker">
                            <a class="self-link" href="#example-1">示例<bdi> 1</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kids"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"0DdtU9od-Bh5L3xbv0Xf_A"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"temporary"</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="clear-key-license-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-4-license-format"><bdi class="secno">9.1.4 </bdi>
                        许可格式
                    </h4><a class="self-link" href="#clear-key-license-format" aria-label="第9.1.4节的永久链接"></a>
                </div>

                <p>
                    本节描述作为 <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-16"><code>update</code></a><code>()</code> 方法的
                    <var>response</var> 参数提供的许可的格式。
                </p>
                <p>
                    该格式是一个包含对称密钥表示的 JSON Web Key (JWK) 集，用于解密，定义见 JSON Web Key (JWK) 规范 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-rfc7517" title="JSON Web Key (JWK)">RFC7517</a></cite>]。
                </p>
                <p>
                    对于集合中的每个 JWK，其参数值如下：
                </p>
                <dl>
                    <dt>
                        "kty" (key type)
                    </dt>
                    <dd>
                        "oct"（八位元组序列）。
                    </dd>
                    <dt>
                        "k" (key value)
                    </dt>
                    <dd>
                        包含对称 <a data-link-type="dfn|abstract-op" href="#dfn-key-s" class="internalDFN"
                            id="ref-for-dfn-key-s-6">key</a> 值的字节序列的 base64url 编码。
                    </dd>
                    <dt>
                        "kid" (key ID)
                    </dt>
                    <dd>
                        包含 <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-15">密钥 ID</a> 值的字节序列的 base64url 编码。
                    </dd>
                </dl>
                <p>
                    JSON 对象 <em class="rfc2119">MAY</em> 有一个可选的 "type" 成员值，该值 <em class="rfc2119">MUST</em> 是 <a
                        data-link-type="idl" data-lt="MediaKeySessionType" href="#dom-mediakeysessiontype"
                        class="internalDFN" id="ref-for-dom-mediakeysessiontype-8"><code>MediaKeySessionType</code></a>
                    值之一。
                    如果未指定，则使用默认值 "<a data-link-type="idl" href="#dom-mediakeysessiontype-temporary" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-temporary-14"><code>temporary</code></a>"。<a
                        data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-17"><code>update</code></a><code>()</code> 算法将此值与
                    <var>sessionType</var> 进行比较。
                </p>
                <p>
                    当作为 ArrayBuffer <var>response</var> 参数传递给 <a data-link-type="idl" data-lt="update()"
                        href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-18"><code>update</code></a><code>()</code> 方法时，JSON 字符串
                    <em class="rfc2119">MUST</em> 按 Encoding 规范 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-encoding" title="Encoding Standard">ENCODING</a></cite>] 中规定的方式以 UTF-8 编码。应用 <em
                        class="rfc2119">MAY</em> 使用 <a data-link-type="interface" data-lt="TextEncoder"
                        href="https://encoding.spec.whatwg.org/#textencoder"><code>TextEncoder</code></a> 接口对 JSON
                    字符串进行编码。
                </p>
                <section id="clear-key-license-format-example" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-4-1-example"><bdi class="secno">9.1.4.1 </bdi>
                            示例
                        </h5><a class="self-link" href="#clear-key-license-format-example"
                            aria-label="第9.1.4.1节的永久链接"></a>
                    </div>
                    <p><em>本节为非规范性内容。</em></p>

                    <p>
                        下例是一个包含单个对称密钥的 JWK 集。（换行仅为可读性）
                    </p>
                    <div class="example" id="example-2">
                        <div class="marker">
                            <a class="self-link" href="#example-2">示例<bdi> 2</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"keys"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"kty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"oct"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"k"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tQ0bJVWb6b0KPL6KtZIy_A"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"kid"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"temporary"</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="clear-key-release-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-5-license-release-format"><bdi class="secno">9.1.5 </bdi>
                        许可释放格式
                    </h4><a class="self-link" href="#clear-key-release-format" aria-label="第9.1.5节的永久链接"></a>
                </div>

                <p>
                    本节描述通过 <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                        id="ref-for-dfn-message-10"><code><code>message</code></code></a> 事件的 <var>message</var>
                    属性提供的许可释放消息的格式。
                </p>
                <p>
                    该格式是一个 JSON 对象。对于类型为
                    "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license" class="internalDFN"
                        id="ref-for-dom-mediakeysessiontype-persistent-license-10"><code>persistent-license</code></a>"
                    的会话，该对象应包含以下成员：
                </p>
                <dl>
                    <dt>
                        "kids"
                    </dt>
                    <dd>
                        一个 <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-16">密钥 ID</a> 的数组。数组的每个元素都是包含该密钥 ID 值的字节序列的 base64url 编码。
                    </dd>
                </dl>
                <p>
                    当包含在 <a data-link-type="idl" href="#dom-mediakeymessageevent-message" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-message-4"><code>message</code></a>
                    属性的 ArrayBuffer 中，作为 <a data-link-type="idl" data-lt="MediaKeyMessageEvent"
                        href="#dom-mediakeymessageevent" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-6"><code>MediaKeyMessageEvent</code></a> 对象的一部分时，JSON 字符串按
                    Encoding 规范 [<cite><a class="bibref" data-link-type="biblio" href="#bib-encoding"
                            title="Encoding Standard">ENCODING</a></cite>] 中规定的方式以 UTF-8 编码。应用 <em
                        class="rfc2119">MAY</em> 使用 <a data-link-type="interface" data-lt="TextDecoder"
                        href="https://encoding.spec.whatwg.org/#textdecoder"><code>TextDecoder</code></a> 接口将
                    ArrayBuffer 的内容解码为 JSON 字符串。
                </p>
                <section id="clear-key-release-format-example-1" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-5-1-example-message-reflecting-a-record-of-license-destruction"><bdi
                                class="secno">9.1.5.1 </bdi>
                            反映许可销毁记录的示例消息
                        </h5><a class="self-link" href="#clear-key-release-format-example-1"
                            aria-label="第9.1.5.1节的永久链接"></a>
                    </div>
                    <p><em>本节为非规范性内容。</em></p>

                    <p>
                        下例是包含两个密钥的 "<a data-link-type="idl" href="#dom-mediakeysessiontype-persistent-license"
                            class="internalDFN"
                            id="ref-for-dom-mediakeysessiontype-persistent-license-11"><code>persistent-license</code></a>"
                        会话的许可释放示例。（换行仅为可读性）
                    </p>
                    <div class="example" id="example-3">
                        <div class="marker">
                            <a class="self-link" href="#example-3">示例<bdi> 3</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kids"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"0DdtU9od-Bh5L3xbv0Xf_A"</span> <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="clear-key-release-ack-format">
                <div class="header-wrapper">
                    <h4 id="x9-1-6-license-release-acknowledgement-format"><bdi class="secno">9.1.6 </bdi>
                        许可释放确认格式
                    </h4><a class="self-link" href="#clear-key-release-ack-format" aria-label="第9.1.6节的永久链接"></a>
                </div>

                <p>
                    本节描述作为 <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-19"><code>update</code></a><code>()</code> 方法的
                    <var>response</var> 参数提供的许可释放确认的格式。
                </p>
                <p>
                    该格式是一个 JSON 对象，包含以下成员：
                </p>
                <dl>
                    <dt>
                        "kids"
                    </dt>
                    <dd>
                        一个 <a data-link-type="dfn|abstract-op" href="#dfn-decryption-key-id" class="internalDFN"
                            id="ref-for-dfn-decryption-key-id-17">密钥 ID</a> 的数组。数组的每个元素都是包含该密钥 ID 值的字节序列的 base64url 编码。
                    </dd>
                </dl>
                <p>
                    当作为 ArrayBuffer <var>response</var> 参数传递给 <a data-link-type="idl" data-lt="update()"
                        href="#dom-mediakeysession-update" class="internalDFN"
                        id="ref-for-dom-mediakeysession-update-20"><code>update</code></a><code>()</code> 方法时，JSON 字符串
                    <em class="rfc2119">MUST</em> 按 Encoding 规范 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-encoding" title="Encoding Standard">ENCODING</a></cite>] 中规定的方式以 UTF-8 编码。应用 <em
                        class="rfc2119">MAY</em> 使用 <a data-link-type="interface" data-lt="TextEncoder"
                        href="https://encoding.spec.whatwg.org/#textencoder"><code>TextEncoder</code></a> 接口对 JSON
                    字符串进行编码。
                </p>
                <section id="clear-key-release-ack-format-example" class="informative">
                    <div class="header-wrapper">
                        <h5 id="x9-1-6-1-example"><bdi class="secno">9.1.6.1 </bdi>
                            示例
                        </h5><a class="self-link" href="#clear-key-release-ack-format-example"
                            aria-label="第9.1.6.1节的永久链接"></a>
                    </div>
                    <p><em>本节为非规范性内容。</em></p>

                    <p>
                        下例是针对两个密钥 ID 的临时许可的许可请求。（换行仅为可读性）
                    </p>
                    <div class="example" id="example-4">
                        <div class="marker">
                            <a class="self-link" href="#example-4">示例<bdi> 4</bdi></a>
                        </div>
                        <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kids"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"LwVHf8JLtPrv2GUXFW2v_A"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"0DdtU9od-Bh5L3xbv0Xf_A"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </section>
            </section>
            <section id="using-base64url" class="informative">
                <div class="header-wrapper">
                    <h4 id="x9-1-7-using-base64url"><bdi class="secno">9.1.7 </bdi>
                        使用 base64url
                    </h4><a class="self-link" href="#using-base64url" aria-label="第9.1.7节的永久链接"></a>
                </div>
                <p><em>本节为非规范性内容。</em></p>

                <p>
                    有关 base64url 及其使用的更多信息，请参阅 RFC7515 中的 "Base64url Encoding" 术语定义和 "Notes on implementing base64url
                    encoding without padding"。具体来说，不使用 '=' 填充，并且字符 '-' 和 '_' <em class="rfc2119">MUST</em> 分别替代 '+' 和
                    '/'。
                </p>
            </section>
        </section>
    </section>
    <section id="security">
        <div class="header-wrapper">
            <h2 id="x10-security"><bdi class="secno">10. </bdi>
                Security
            </h2><a class="self-link" href="#security" aria-label="Permalink for Section 10."></a>
        </div>

        <section id="input-data-security">
            <div class="header-wrapper">
                <h3 id="x10-1-input-data-attacks-and-vulnerabilities"><bdi class="secno">10.1 </bdi>
                    Input Data Attacks and Vulnerabilities
                </h3><a class="self-link" href="#input-data-security" aria-label="Permalink for Section 10.1"></a>
            </div>

            <p>
                User Agent and <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-43">Key System</a> implementations <em class="rfc2119">MUST</em> consider
                <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/media.html#media-data">media
                    data</a>, <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                    id="ref-for-dfn-initialization-data-22">Initialization Data</a>, data passed to <a
                    data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-21"><code>update</code></a><code>()</code>, licenses,
                key data, and all other data provided by the application as untrusted content and
                potential attack vectors. They <em class="rfc2119">MUST</em> use appropriate safeguards to mitigate any
                associated
                threats and take care to safely parse, decrypt, etc. such data. User Agents <em
                    class="rfc2119">SHOULD</em>
                validate data before passing it to the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-118">CDM</a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-138">
                <div role="heading" class="note-title marker" id="h-note-138" aria-level="4"><span>Note</span></div>
                <p class="">
                    Such validation is especially important if the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-119">CDM</a> does not run in the same
                    (sandboxed) context as, for example, the DOM.
                </p>
            </div>
            <p>
                Implementations <em class="rfc2119">MUST NOT</em> return active content or passive content that affects
                program
                control flow to the application.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-139">
                <div role="heading" class="note-title marker" id="h-note-139" aria-level="4"><span>Note</span></div>
                <p class="">
                    For example, it is not safe to expose URLs or other information that may have come from
                    media data, such as is the case for the <a data-link-type="dfn|abstract-op"
                        href="#dfn-initialization-data" class="internalDFN"
                        id="ref-for-dfn-initialization-data-23">Initialization Data</a> passed to
                    <a data-link-type="idl" data-lt="generateRequest()" href="#dom-mediakeysession-generaterequest"
                        class="internalDFN"
                        id="ref-for-dom-mediakeysession-generaterequest-7"><code>generateRequest</code></a><code>()</code>.
                    Applications must determine the URLs to use. The
                    <a data-link-type="idl" href="#dom-mediakeymessageevent-messagetype" class="internalDFN"
                        id="ref-for-dom-mediakeymessageevent-messagetype-3"><code>messageType</code></a> attribute of
                    the <a data-link-type="idl" data-lt="message" href="#dfn-message" class="internalDFN"
                        id="ref-for-dfn-message-11"><code><code>message</code></code></a> event can be used by
                    the application to select among a set of URLs if applicable.
                </p>
            </div>
        </section>
        <section id="cdm-security">
            <div class="header-wrapper">
                <h3 id="x10-2-cdm-attacks-and-vulnerabilities"><bdi class="secno">10.2 </bdi>
                    CDM Attacks and Vulnerabilities
                </h3><a class="self-link" href="#cdm-security" aria-label="Permalink for Section 10.2"></a>
            </div>

            <p>
                User Agents are responsible for providing users with a secure way to browse the web. This
                responsibility applies to any functionality used by User Agents, including
                functionalities from third parties. User agent implementers <em class="rfc2119">MUST</em> obtain
                sufficient
                information from <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-44">Key System</a> implementers to enable them to properly assess the
                security implications of integrating with the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-45">Key System</a>. User agent implementers
                <em class="rfc2119">MUST</em> ensure <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-120">CDM</a> implementations provide and/or support
                sufficient controls for the
                user agent to provide security for the user. User agent implementers <em class="rfc2119">MUST</em>
                ensure <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-121">CDM</a>
                implementations can and will be quickly and proactively updated in the event of security
                vulnerabilities.
            </p>
            <p>
                Exploiting a <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-122">CDM</a> implementation that is not fully sandboxed and/or uses platform
                features may allow an attacker to access OS or platform features, elevate privilege
                (e.g., to run as system or root), and/or access drivers, kernel, firmware, hardware, etc.
                Such features, software, and hardware may not be written to be robust against hostile
                software or web-based attacks and may not be updated with security fixes, especially
                compared to the user agent. Lack of, infrequent, or slow updates for fixes to security
                vulnerabilities in <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-123">CDM</a> implementations increases the risk. Such <a
                    data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-124">CDM</a>
                implementations and UAs that expose them <em class="rfc2119">MUST</em> be especially careful in all
                areas of
                security, including parsing of <a href="#input-data-security">all data</a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-140">
                <div role="heading" class="note-title marker" id="h-note-140" aria-level="4"><span>Note</span></div>
                <p class="">
                    User agents should be especially diligent when using a <a data-link-type="dfn|abstract-op"
                        href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-125">CDM</a> or underlying mechanism
                    that is part of or provided by the client OS, platform and/or hardware.
                </p>
            </div>
            <p>
                If a user agent chooses to support a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-46">Key System</a> implementation that cannot be
                sufficiently sandboxed or otherwise secured, the user agent <em class="rfc2119">SHOULD</em> <a
                    href="#security-consent">ensure that users are fully informed and/or give explicit consent</a>
                before loading or invoking it.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-141">
                <div role="heading" class="note-title marker" id="h-note-141" aria-level="4"><span>Note</span></div>
                <p class="">
                    Granting permissions to unauthenticated origins is equivalent to granting the permissions
                    to any origin in the presence of a network attacker. See <a href="#persisted-consent-abuse">abuse of
                        persisted consent</a>.
                </p>
            </div>
        </section>
        <section id="network-attacks">
            <div class="header-wrapper">
                <h3 id="x10-3-network-attacks"><bdi class="secno">10.3 </bdi>
                    Network Attacks
                </h3><a class="self-link" href="#network-attacks" aria-label="Permalink for Section 10.3"></a>
            </div>

            <section class="informative" id="potential-attacks">
                <div class="header-wrapper">
                    <h4 id="x10-3-1-potential-attacks"><bdi class="secno">10.3.1 </bdi>
                        Potential Attacks
                    </h4><a class="self-link" href="#potential-attacks" aria-label="Permalink for Section 10.3.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    Potential network attacks and their implications include:
                </p>
                <ul>
                    <li>
                        <p>
                            DNS spoofing attacks: One cannot guarantee that a host claiming to be in a certain
                            domain (<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>)
                            really is from that domain.
                        </p>
                    </li>
                    <li>
                        <p>
                            Passive network attacks: One cannot guarantee that data, including <a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-27">Distinctive
                                Identifiers</a> and <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-permanent-identifier-s-28">Distinctive Permanent
                                Identifiers</a>, transmitted between the
                            client and server is not viewed by other entities. See <a href="#user-tracking">User
                                Tracking</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            Active network attacks: One cannot guarantee that Additional scripts or iframes are
                            not injected into pages (both those that use the APIs defined in this specification
                            for legitimate purposes and pages that do not use them). The consequences are that:
                        </p>
                        <ul>
                            <li>
                                <p>
                                    Calls to the APIs defined in this specification can be injected into any page.
                                </p>
                            </li>
                            <li>
                                <p>
                                    Calls to the APIs defined in this specification from pages using them for
                                    legitimate reasons can be manipulated, including modifying the requested
                                    functionality, modifying or adding calls, and modifying or injecting data. See
                                    also <a href="#input-data-security">Input Data Attacks and Vulnerabilities</a>
                                </p>
                            </li>
                            <li>
                                <p>
                                    Data, including <a data-link-type="dfn|abstract-op"
                                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                                        id="ref-for-dfn-distinctive-identifier-s-28">Distinctive Identifiers</a> and <a
                                        data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                        class="internalDFN"
                                        id="ref-for-dfn-distinctive-permanent-identifier-s-29">Distinctive Permanent
                                        Identifiers</a>, transmitted between the client and server can be viewed and/or
                                    modified by other entities. See <a href="#user-tracking">User Tracking</a>.
                                </p>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <p>
                            <span id="persisted-consent-abuse">Abuse of persisted consent</span>: One cannot
                            guarantee that the host requesting use of the APIs defined in this specification is
                            the host to which the user previously provided consent. The consequences are that
                            granting permissions to unauthenticated origins is equivalent to granting the
                            permissions to any origin in the presence of a network attacker.
                        </p>
                    </li>
                </ul>
            </section>
            <section id="mitigations">
                <div class="header-wrapper">
                    <h4 id="x10-3-2-mitigations"><bdi class="secno">10.3.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations" aria-label="Permalink for Section 10.3.2"></a>
                </div>

                <p>
                    The following techniques may mitigate the risks:
                </p>
                <dl>
                    <dt>
                        Use TLS
                    </dt>
                    <dd>
                        <p>
                            Applications using TLS can be sure that only the user, software working on behalf
                            of the user, and other pages using TLS that have certificates identifying them as
                            being from the same domain, can interact with that application. Furthermore,
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>-specific
                            permissions in combination with a secure origin, ensure that
                            permissions granted to an application cannot be abused by a network attacker.
                        </p>
                        <p>
                            The APIs defined in this specification are only exposed on secure contexts. See
                            also <a href="#privacy-secureorigin">Secure Origin and Transport</a>.
                        </p>
                    </dd>
                    <dt>
                        Block Mixed Content
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MUST</em> properly handle Mixed Content [<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-mixed-content"
                                    title="Mixed Content">MIXED-CONTENT</a></cite>], including
                            blocking "Blockable Content" [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-mixed-content" title="Mixed Content">MIXED-CONTENT</a></cite>] to avoid
                            potential exposure to
                            insecure content. Such exposure could compromise other mitigations, such as use of
                            TLS.
                        </p>
                        <p>
                            User agents <em class="rfc2119">MAY</em> choose to block all Mixed Content, including
                            "Optionally-blockable
                            Content" [<cite><a class="bibref" data-link-type="biblio" href="#bib-mixed-content"
                                    title="Mixed Content">MIXED-CONTENT</a></cite>] to further increase security by
                            preventing <a href="#input-data-security">untrusted media data</a> from being passed to the
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-126">CDM</a>
                            (see <a href="#cdm-security">CDM Attacks and Vulnerabilities</a>).
                        </p>
                    </dd>
                    <dt id="security-consent">
                        Fully inform users and/or require explicit user consent
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">SHOULD</em> ensure that users are fully informed and/or give
                            explicit
                            consent before a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-47">Key System</a> that presents security
                            concerns that are greater
                            than other user agent features (e.g., DOM content) may be accessed by an
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>.
                        </p>
                        <p>
                            Such mechanisms <em class="rfc2119">MUST</em> be per <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> to
                            avoid valid uses enabling subsequent
                            malicious access and <em class="rfc2119">MUST</em> be per <a
                                data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-10">browsing profile</a>.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-142">
                            <div role="heading" class="note-title marker" id="h-note-142" aria-level="5">
                                <span>Note</span>
                            </div>
                            <p class="">
                                The restriction of the APIs defined in this specification to secure contexts
                                ensures that a <a href="#network-attacks">network attacker</a> cannot exploit
                                permissions granted to an unauthenticated origin. See <a
                                    href="#persisted-consent-abuse">abuse of persisted consent</a>.
                            </p>
                        </div>
                    </dd>
                </dl>
            </section>
        </section>
        <section id="iframe-attacks">
            <div class="header-wrapper">
                <h3 id="x10-4-iframe-attacks"><bdi class="secno">10.4 </bdi>
                    <code>iframe</code> Attacks
                </h3><a class="self-link" href="#iframe-attacks" aria-label="Permalink for Section 10.4"></a>
            </div>

            <section class="informative" id="potential-attacks-0">
                <div class="header-wrapper">
                    <h4 id="x10-4-1-potential-attacks"><bdi class="secno">10.4.1 </bdi>
                        Potential Attacks
                    </h4><a class="self-link" href="#potential-attacks-0" aria-label="Permalink for Section 10.4.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    Malicious pages could host legitimate applications in an iframe in an attempt hide an
                    attack or deceive the user as to the source, such as making the use appear to be from a
                    legitimate content provider. This is especially relevent for implementations that
                    <a href="#security-consent">inform the user or require consent</a>, such as for
                    security and/or <a href="#privacy-consent">privacy reasons</a>. In addition to <a
                        href="#network-attacks">Network Attacks</a>, attackers could try to exploit legitimate uses
                    of the APIs defined in this specification by hosting them in an <code>iframe</code>. By
                    having the legitimate application performing the actions, the attacker can reuse
                    existing granted permissions (or whitelisting) and/or appear to be a legitimate request
                    or use.
                </p>
            </section>
            <section id="mitigations-0">
                <div class="header-wrapper">
                    <h4 id="x10-4-2-mitigations"><bdi class="secno">10.4.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-0" aria-label="Permalink for Section 10.4.2"></a>
                </div>

                <p>
                    User agents that <a href="#security-consent">inform the user or require consent</a>,
                    including for security and/or <a href="#privacy-consent">privacy reasons</a>, <em
                        class="rfc2119">SHOULD</em>
                    base the UI and persistence of consent on the combination of <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> of the
                    top-level <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                    and the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> using the
                    APIs defined in this specification.
                    This ensures that users are informed of the main document making the request and that
                    persisting a permission for one (legitimate) combination does not inadvertently allow
                    malicious use to go undetected.
                </p>
                <p>
                    Authors <em class="rfc2119">SHOULD</em> prevent other entities from hosting their applications in
                    <code>iframe</code>s. Applications that must support being hosted for legitimate
                    application-design reasons <em class="rfc2119">SHOULD NOT</em> allow hosting documents to provide <a
                        href="#input-data-security">any data to be passed to the CDM</a> - either via the APIs
                    defined in this specification or as media data - and <em class="rfc2119">SHOULD NOT</em> allow
                    hosting frames to
                    invoke the APIs defined in this specification.
                </p>
            </section>
        </section>
        <section id="cross-directory-attacks" class="informative">
            <div class="header-wrapper">
                <h3 id="x10-5-cross-directory-attacks"><bdi class="secno">10.5 </bdi>
                    Cross-Directory Attacks
                </h3><a class="self-link" href="#cross-directory-attacks" aria-label="Permalink for Section 10.5"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>
                Different authors sharing one host name, for example users hosting content on
                <code>geocities.com</code>, all share one <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>. User agents
                do not provide features
                to restrict access to APIs by pathname.
            </p>
            <p>
                Using the APIs defined in this specification on shared hosts compromises origin-based
                security and privacy mitigations implemented by user agents. For example, per-origin
                <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                    id="ref-for-dfn-distinctive-identifier-s-29">Distinctive Identifiers</a> are shared by all authors
                on one host name, and peristed data
                may be accessed and manipulated by any author on the host. The latter is especially
                important if, for example, modification or deletion of such data could erase a user's
                right to specific content.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-143">
                <div role="heading" class="note-title marker" id="h-note-143" aria-level="4"><span>Note</span></div>
                <p class="">
                    Even if a path-restriction feature was made available by user agents, the usual DOM
                    scripting security model would make it trivial to bypass this protection and access the
                    data from any path.
                </p>
            </div>
            <p>
                Authors on shared hosts are therefore <em class="rfc2119">RECOMMENDED</em> to avoid using the APIs
                defined in this
                specification because doing so compromises origin-based security and privacy mitigations
                in user agents.
            </p>
        </section>
    </section>
    <section id="privacy">
        <div class="header-wrapper">
            <h2 id="x11-privacy"><bdi class="secno">11. </bdi>
                Privacy
            </h2><a class="self-link" href="#privacy" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            The presence or use of <a data-link-type="dfn|abstract-op" data-lt="Key System" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-48">Key System(s)</a> on a user's device raises a number
            of
            privacy issues, falling into two categories: (a) user-specific information that may be
            disclosed by the EME interface itself or within <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                class="internalDFN" id="ref-for-dfn-key-system-49">Key System</a> messages and (b)
            user-specific information that may be persistently stored on the user's device.
        </p>
        <p>
            User Agents <em class="rfc2119">MUST</em> take responsibility for providing users with adequate control over
            their
            own privacy. Since User Agents may integrate with third party <a data-link-type="dfn|abstract-op"
                href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-127">CDM</a> implementations,
            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN" id="ref-for-dfn-cdm-128">CDM</a>
            implementers <em class="rfc2119">MUST</em> provide sufficient information and controls to user agent
            implementers to enable them to implement appropriate techniques to ensure users have
            control over their privacy, including but not limited to the techniques described below.
        </p>
        <section id="privacy-disclosure">
            <div class="header-wrapper">
                <h3 id="x11-1-information-disclosed-by-eme-and-key-systems"><bdi class="secno">11.1 </bdi>
                    Information Disclosed by EME and Key Systems
                </h3><a class="self-link" href="#privacy-disclosure" aria-label="Permalink for Section 11.1"></a>
            </div>

            <p>
                Concerns regarding information disclosed by EME and <a data-link-type="dfn|abstract-op"
                    href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-50">Key Systems</a> fall into
                two
                categories: (a) concerns about non-specific information that may nevertheless contribute
                to the possibility of fingerprinting a user agent or device and (b) user-specific
                information that may be used directly for <a href="#user-tracking">user tracking</a>.
            </p>
        </section>
        <section id="privacy-fingerprinting">
            <div class="header-wrapper">
                <h3 id="x11-2-fingerprinting"><bdi class="secno">11.2 </bdi>
                    Fingerprinting
                </h3><a class="self-link" href="#privacy-fingerprinting" aria-label="Permalink for Section 11.2"></a>
            </div>

            <p>
                Malicious applications may be able to fingerprint users or user agents by detecting or
                enumerating the list of <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-51">Key Systems</a> that are supported and related information. If
                proper origin protections are not provided this could include detection of sites that
                have been visited and information stored for those sites. In particular, <a
                    data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-52">Key Systems</a>
                <em class="rfc2119">MUST</em> not share key or other data between <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a>.
            </p>
        </section>
        <section id="privacy-leakage">
            <div class="header-wrapper">
                <h3 id="x11-3-information-leakage"><bdi class="secno">11.3 </bdi>
                    Information Leakage
                </h3><a class="self-link" href="#privacy-leakage" aria-label="Permalink for Section 11.3"></a>
            </div>

            <section class="informative" id="concerns">
                <div class="header-wrapper">
                    <h4 id="x11-3-1-concerns"><bdi class="secno">11.3.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns" aria-label="Permalink for Section 11.3.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    CDMs, especially those implemented outside the user agent, may not have the same
                    fundamental isolations as the web platform. It is important that steps be taken to
                    avoid information leakage, especially across origins. This includes both in-memory and
                    stored data. Failure to do so could lead to information leakage to/from private
                    browsing sessions, across <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-11">browsing profiles</a> (including across
                    operating system user
                    accounts) and even across different browsers or applications.
                </p>
            </section>
            <section id="mitigations-1">
                <div class="header-wrapper">
                    <h4 id="x11-3-2-mitigations"><bdi class="secno">11.3.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-1" aria-label="Permalink for Section 11.3.2"></a>
                </div>

                <p>
                    To avoid such issues, user agent and <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-129">CDM</a> implementations <em
                        class="rfc2119">MUST</em> ensure that:
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-130">CDMs</a> have a concept of a <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-131">CDM</a> instance that is associated one-to-one with a
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-41"><code>MediaKeys</code></a> object.
                        </p>
                    </li>
                    <li>
                        <p>
                            Keys, licenses, other session data, and the presence of sessions are restricted to
                            the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-132">CDM</a> instance associated with the <a data-link-type="idl"
                                data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-42"><code>MediaKeys</code></a> object that created the
                            session.
                        </p>
                    </li>
                    <li>
                        <p>
                            Session data is not shared between <a data-link-type="idl" data-lt="MediaKeys"
                                href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-43"><code>MediaKeys</code></a> objects or <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-133">CDM</a> instances.
                        </p>
                    </li>
                    <li>
                        <p>
                            Session data is not shared with media elements not associated with the
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-44"><code>MediaKeys</code></a> object that created the
                            session. Among other things, this means a
                            session's keys <em class="rfc2119">MUST</em> not be used to decrypt content loaded by a
                            media element whose
                            <a data-link-type="idl" href="#dom-htmlmediaelement-mediakeys" class="internalDFN"
                                id="ref-for-dom-htmlmediaelement-mediakeys-10"><code>mediaKeys</code></a> attribute is
                            not that <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys"
                                class="internalDFN" id="ref-for-dom-mediakeys-45"><code>MediaKeys</code></a> object.
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                                id="ref-for-dom-mediakeys-46"><code>MediaKeys</code></a> objects and the underlying
                            implementation do not expose information
                            outside the <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>.
                        </p>
                    </li>
                    <li>
                        <p>
                            Persisted session data, if applicable, is stored on a per-<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            basis.
                        </p>
                    </li>
                    <li>
                        <p>
                            Only data stored by the requesting <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            may be loaded.
                        </p>
                    </li>
                    <li>
                        <p>
                            It is not possible to extract, derive or infer information from the <a
                                data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-134">CDM</a> that is
                            not either explicitly described in this specification or available to the page
                            through other web platform APIs without user permission. This applies to any
                            information that is exposed outside the client device or to the application,
                            including, for example, in <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                                class="internalDFN" id="ref-for-dfn-cdm-135">CDM</a> messages.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-144">
                            <div role="heading" class="note-title marker" id="h-note-144" aria-level="5">
                                <span>Note</span>
                            </div>
                            <div class="">
                                <p>
                                    The type of information covered by this requirement includes but is not limited
                                    to:
                                </p>
                                <ul>
                                    <li>
                                        <p>
                                            Location, including geolocation
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Credentials or identifiers other than <a data-link-type="dfn|abstract-op"
                                                href="#dfn-distinctive-identifier-s" class="internalDFN"
                                                id="ref-for-dfn-distinctive-identifier-s-30">Distinctive Identifiers</a>
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            OS account name and other potential PII
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Local directory paths, which may contain similar information.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Local network details (for example, the device's local IP address)
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Local devices, including but not limited to Bluetooth, USB, and user media.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            User state not associated with or stored as a result of the APIs defined in
                                            this specification.
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </section>
        </section>
        <section id="user-tracking">
            <div class="header-wrapper">
                <h3 id="x11-4-user-tracking"><bdi class="secno">11.4 </bdi>
                    User Tracking
                </h3><a class="self-link" href="#user-tracking" aria-label="Permalink for Section 11.4"></a>
            </div>

            <section class="informative" id="concerns-0">
                <div class="header-wrapper">
                    <h4 id="x11-4-1-concerns"><bdi class="secno">11.4.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns-0" aria-label="Permalink for Section 11.4.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    A third-party host (or any entity, such as an advertiser, capable of getting content
                    distributed to multiple sites) could use a <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-31">Distinctive Identifier</a> or persistent
                    data, including licenses, keys, key IDs, or <a data-link-type="dfn|abstract-op"
                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                        id="ref-for-dfn-record-s-of-license-destruction-14">records of license destruction</a>, stored
                    by or on behalf of the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-136">CDM</a> to track a user across multiple sessions (including
                    across <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a> and <a
                        data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                        id="ref-for-dfn-browsing-profile-12">browsing profiles</a>), building a profile of the user's
                    activities or interests. Such tracking would undermine the privacy protections provided
                    by the rest of the web platform and could, for example, enable highly-targeted
                    advertising not otherwise possible. In conjunction with a site that is aware of the
                    user's real identity (for example, a content provider or e-commerce site that requires
                    authenticated credentials), this could allow oppressive groups to target individuals
                    with greater accuracy than in a world with purely anonymous web usage.
                </p>
                <p>
                    User- or client-specific information that could be obtained via implementations of the
                    APIs in this specification includes:
                </p>
                <ul>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-32">Distinctive Identifier(s)</a>
                        </p>
                    </li>
                    <li>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-30">Distinctive
                                Permanent Identifier(s)</a>
                        </p>
                    </li>
                    <li>
                        <p>
                            Origins visited (via stored or in-memory data, permissions, etc.)
                        </p>
                    </li>
                    <li>
                        <p>
                            Content viewed (via stored or in-memory licenses, keys, key IDs, <a
                                data-link-type="dfn|abstract-op" href="#dfn-record-s-of-license-destruction"
                                class="internalDFN" id="ref-for-dfn-record-s-of-license-destruction-15">records of
                                license destruction</a>, etc.)
                        </p>
                    </li>
                </ul>
                <p>
                    This specification presents a specific concern because such information is commonly
                    stored outside the user agent (and associated <a data-link-type="dfn|abstract-op"
                        href="#dfn-browsing-profile" class="internalDFN" id="ref-for-dfn-browsing-profile-13">browsing
                        profile</a> storage), often in
                    the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-137">CDM</a>.
                </p>
                <p>
                    Since the content of licenses and <a data-link-type="dfn|abstract-op"
                        href="#dfn-record-s-of-license-destruction" class="internalDFN"
                        id="ref-for-dfn-record-s-of-license-destruction-16">records of license destruction</a> are <a
                        data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-53">Key System</a>-specific and since key IDs may contain any value,
                    these data items could be
                    abused to store user-identifying information.
                </p>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-54">Key Systems</a> may access or create persistent or
                    semi-persistent identifier(s) for a
                    device or user of a device. In some cases these identifiers may be bound to a specific
                    device in a secure manner. If these identifiers are present in <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-55">Key System</a>
                    messages,
                    then devices and/or users may be tracked. If the mitigations below are not applied,
                    this could include both tracking of users / devices over time and associating multiple
                    users of a given device.
                </p>
                <p>
                    It is important to note that such identifiers, especially those that are non-clearable,
                    non-<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>-specific,
                    or <a data-link-type="dfn|abstract-op" data-lt="permanent identifier"
                        href="#dfn-permanent-identifier-s" class="internalDFN"
                        id="ref-for-dfn-permanent-identifier-s-4">permanent</a>, exceed the tracking
                    impact of existing techniques such as cookies [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-cookies" title="HTTP State Management Mechanism">COOKIES</a></cite>] or session
                    identifiers
                    embedded in URLs.
                </p>
                <p>
                    If not mitigated, such tracking may take three forms depending on the design of the
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-56">Key System</a>:
                </p>
                <ul>
                    <li>
                        <p>
                            In all cases, such identifiers are expected to be available to sites and/or servers
                            that fully support the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-57">Key System</a> (and thus can
                            interpret <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-58">Key System</a>
                            messages) enabling tracking by such sites.
                        </p>
                    </li>
                    <li>
                        <p>
                            If identifiers exposed by <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-59">Key Systems</a> are not
                            origin-specific, then two sites
                            and/or servers that fully support the <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-60">Key System</a>
                            may collude to track the user.
                        </p>
                    </li>
                    <li>
                        <p>
                            If <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-61">Key System</a> messages contain information derived from
                            a user identifier in a
                            consistent manner, for example such that a portion of the initial <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-62">Key System</a>
                            message for a specific content item does not change over time and is dependent on
                            the user identifier, then this information could be used by any application to
                            track the device or user over time.
                        </p>
                    </li>
                </ul>
                <p>
                    In addition, if a <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-63">Key System</a> permits keys or other data to be stored and to be
                    re-used between origins, then it may be possible for two origins to collude and track a
                    unique user by recording their ability to access a common key.
                </p>
                <p>
                    Finally, if any user interface for user control of <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-64">Key Systems</a>
                    presents data
                    separately from data in HTTP session cookies [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-cookies" title="HTTP State Management Mechanism">COOKIES</a></cite>] or
                    persistent storage, then
                    users are likely to modify site authorization or delete data in one and not the others.
                    This would allow sites to use the various features as redundant backup for each other,
                    defeating a user's attempts to protect his or her privacy.
                </p>
                <p>
                    In addition to the potential for sites and other third-parties to track users, the user
                    agent implementer, <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-138">CDM</a> vendor, or device vendor could build a profile of the user's
                    activities or interests, such as sites using the APIs defined in this specification
                    that the user visits. Such tracking would undermine the privacy protections provided by
                    the rest of the web platform, especially those related to isolation of origins.
                </p>
                <p>
                    Identifiers, such as <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-33">Distinctive Identifiers</a>,
                    may be obtained from a server
                    operated or provided by the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-139">CDM</a> vendor, such as via an <a data-link-type="dfn|abstract-op"
                        href="#dfn-individualization" class="internalDFN"
                        id="ref-for-dfn-individualization-14">individualization</a>
                    process. The process may include providing client identifier(s), including
                    <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                        class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-31">Distinctive Permanent
                        Identifier(s)</a>, to the server. In order to generate a
                    per-origin identifier, a value representing the origin may also be provided.
                </p>
                <p>
                    In such an implementation, the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                        class="internalDFN" id="ref-for-dfn-cdm-140">CDM</a> vendor may be able to track the activity of
                    the
                    user, such as number of origins visited or number of times a new identifier is
                    required. If the origin or a value <a data-link-type="dfn|abstract-op" href="#dfn-associable"
                        class="internalDFN" id="ref-for-dfn-associable-5">associable</a> with the origin is provided in
                    the
                    identifier request, the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                        id="ref-for-dfn-cdm-141">CDM</a> vendor could track the sites visited by the user or
                    user(s) of a device.
                </p>
                <p>
                    The following section describes techniques that may mitigate the risks of tracking
                    without user consent.
                </p>
            </section>
            <section id="mitigations-2">
                <div class="header-wrapper">
                    <h4 id="x11-4-2-mitigations"><bdi class="secno">11.4.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-2" aria-label="Permalink for Section 11.4.2"></a>
                </div>

                <dl>
                    <dt>
                        Do not <a data-link-type="dfn|abstract-op"
                            data-lt="use Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                            href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                            class="internalDFN"
                            id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-11">use
                            Distinctive Identifiers or Distinctive Permanent Identifiers</a>
                    </dt>
                    <dd>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-65">Key System</a> implementations <em
                                class="rfc2119">SHOULD</em> avoid <a data-link-type="dfn|abstract-op"
                                data-lt="using Distinctive Identifier(s) or Distinctive Permanent Identifier(s)"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-12">using
                                Distinctive Identifiers and Distinctive Permanent Identifiers</a> whenever possible and
                            only use them when they meaningfully
                            contribute to the robustness of the implementation. See <a
                                href="#limit-or-avoid-use-of-distinctive-identifiers-and-permanent-identifiers">Limit or
                                Avoid use of Distinctive Identifiers and Permanent Identifiers</a>.
                        </p>
                    </dd>
                    <dt>
                        Do not expose <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-permanent-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-permanent-identifier-s-32">Distinctive
                            Permanent Identifiers</a> to the application
                    </dt>
                    <dd>
                        <p>
                            Implementations <em class="rfc2119">MUST NOT</em> expose <a data-link-type="dfn|abstract-op"
                                href="#dfn-distinctive-permanent-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-permanent-identifier-s-33">Distinctive Permanent
                                Identifiers</a> to the
                            application or origin.
                        </p>
                    </dd>
                    <dt>
                        Encrypt <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-34">Distinctive Identifiers</a>
                    </dt>
                    <dd>
                        <p>
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-35">Distinctive Identifiers</a> in <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-66">Key System</a> messages <em class="rfc2119">MUST</em> be
                            encrypted, together
                            with a timestamp or nonce, such that the <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-67">Key System</a>
                            messages are always
                            different. This prevents the use of <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-68">Key System</a>
                            messages for tracking except by
                            servers fully supporting the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-69">Key System</a>. See <a
                                href="#encrypt-identifiers">Encrypt Identifiers</a>.
                        </p>
                    </dd>
                    <dt id="like-cookies">
                        Treat <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                            class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-36">Distinctive Identifiers</a>
                        and Key System stored data like cookies / web
                        storage
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">SHOULD</em> present the presence of <a
                                data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-37">Distinctive
                                Identifiers</a> and data
                            stored by <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-70">Key Systems</a> to the user in a way that associates them
                            strongly with
                            HTTP session cookies [<cite><a class="bibref" data-link-type="biblio" href="#bib-cookies"
                                    title="HTTP State Management Mechanism">COOKIES</a></cite>], including it in "remove
                            all data", and presenting
                            it in the same UI locations. This might encourage users to view such identifiers
                            with healthy suspicion. User agents <em class="rfc2119">SHOULD</em> help the user avoid <a
                                href="#incomplete-clearing">Incomplete Clearing of Data</a>.
                        </p>
                    </dd>
                    <dt>
                        Do not expose per-origin information to unrelated entities
                    </dt>
                    <dd>
                        <p>
                            Do not provide <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>(s)
                            or values <a data-link-type="dfn|abstract-op" href="#dfn-associable" class="internalDFN"
                                id="ref-for-dfn-associable-6">associable</a> with origins to
                            individualization servers or other entities not related to the origin. Follow the
                            requirements and recommendations in the <a data-link-type="dfn|abstract-op"
                                href="#dfn-individualization" class="internalDFN"
                                id="ref-for-dfn-individualization-15">Individualization</a> section if such a
                            process is used by the implementation.
                        </p>
                    </dd>
                    <dt>
                        Use non-associable per-origin per-profile values and identifiers
                    </dt>
                    <dd>

                        <p>
                            For all <a data-link-type="dfn|abstract-op" href="#dfn-distinctive" class="internalDFN"
                                id="ref-for-dfn-distinctive-6">Distinctive Values</a> exposed to the application,
                            implementations <em class="rfc2119">MUST</em> use
                            a different <a data-link-type="dfn|abstract-op" href="#dfn-non-associable-by-application"
                                class="internalDFN" id="ref-for-dfn-non-associable-by-application-8">non-associable by
                                applications</a> value for each <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            and
                            <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-14">browsing profile</a>. See <a
                                href="#per-origin-per-profile-values" class="sec-ref"><bdi class="secno">8.4.1 </bdi>
                                Use Per-Origin Per-Profile Values</a>.
                        </p>
                        <p>
                            This is especially important for implementations that <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-9">use Distinctive Identifier(s)</a>. See
                            <a href="#per-origin-per-profile-identifiers" class="sec-ref"><bdi class="secno">8.5.3
                                </bdi>
                                Use Per-Origin Per-Profile Identifiers</a>.
                        </p>
                    </dd>
                    <dt>
                        Use origin-specific and browsing profile-specific <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-71">Key System</a>
                        storage
                    </dt>
                    <dd>
                        <p>
                            Any data used by the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                                id="ref-for-dfn-cdm-142">CDM</a> that might impact messages or behavior in an
                            application- or license server-visible way <em class="rfc2119">MUST</em> be partitioned by
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            and
                            <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-15">browsing profile</a> and <em class="rfc2119">MUST
                                NOT</em> leak to or from private browsing sessions. This
                            includes both in-memory and persisted data. Specifically but not exhaustively,
                            session data, licenses, keys, and per-origin identifiers <em class="rfc2119">MUST</em> be
                            partitioned
                            per-<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                            and per-<a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-16">browsing profile</a>. See <a
                                href="#use-origin-specific-key-system-storage" class="sec-ref"><bdi class="secno">8.3.1
                                </bdi>
                                Use origin-specific and browsing profile-specific <span>Key System</span> storage</a>
                            and <a href="#per-origin-per-profile-values" class="sec-ref"><bdi class="secno">8.4.1 </bdi>
                                Use Per-Origin Per-Profile Values</a>.
                        </p>
                    </dd>
                    <dt>
                        Provide user deletion of persistent data, including <a data-link-type="dfn|abstract-op"
                            href="#dfn-distinctive-identifier-s" class="internalDFN"
                            id="ref-for-dfn-distinctive-identifier-s-38">Distinctive Identifiers</a>
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MUST</em> provide users with the ability to clear any
                            persistent data,
                            including <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-39">Distinctive
                                Identifiers</a>, maintained by <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-72">Key
                                Systems</a>. See <a href="#allow-persistent-data-cleared">Allow Persistent Data to Be
                                Cleared</a>.
                        </p>
                    </dd>
                    <dt>
                        Expire stored data
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MAY</em>, possibly in a manner configured by the user,
                            automatically delete
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-40">Distinctive Identifiers</a> and/or other
                            Key System data after a period of time.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-145">
                            <div role="heading" class="note-title marker" id="h-note-145" aria-level="5">
                                <span>Note</span>
                            </div>
                            <div class="">
                                <p>
                                    For example, a user agent could be configured to store such data as session-only
                                    storage, deleting the data once the user had closed all the browsing contexts
                                    that could access it.
                                </p>
                                <p>
                                    This can restrict the ability of a site to track a user, as the site would then
                                    only be able to track the user across multiple sessions when the user
                                    authenticates with the site itself (e.g., by making a purchase or signing in to a
                                    service).
                                </p>
                                <p>
                                    However, this can also put the user's access to content, especially purchased or
                                    rented content, at risk if the user does not fully understand the implications of
                                    such expiration.
                                </p>
                            </div>
                        </div>
                    </dd>
                    <dt>
                        Block third-party access
                    </dt>
                    <dd>

                        <p>
                            User agents <em class="rfc2119">MAY</em> restrict access to <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-73">Key Systems</a> and/or features to scripts
                            originating at the <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> of
                            the top-level <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-document">Document</a> of the browsing
                            context. For example, <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                                href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                                id="ref-for-dom-navigator-requestmediakeysystemaccess-14"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                            may deny requests
                            for certain configurations for pages from other origins running in
                            <code>iframe</code>s.
                        </p>
                    </dd>
                    <dt id="privacy-consent">
                        Fully inform users and/or require explicit user consent
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MUST</em> ensure that users are fully informed and/or give
                            explicit consent
                            before <a data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-13">using
                                Distinctive Identifier(s) or Distinctive Permanent Identifier(s)</a>.
                        </p>
                        <p>
                            Such mechanisms <em class="rfc2119">MUST</em> be per <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> to
                            avoid valid uses enabling subsequent
                            malicious access and <em class="rfc2119">MUST</em> be per <a
                                data-link-type="dfn|abstract-op" href="#dfn-browsing-profile" class="internalDFN"
                                id="ref-for-dfn-browsing-profile-17">browsing profile</a>.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-146">
                            <div role="heading" class="note-title marker" id="h-note-146" aria-level="5">
                                <span>Note</span>
                            </div>
                            <p class="">
                                The restriction of the APIs defined in this specification to secure contexts
                                ensures that a <a href="#network-attacks">network attacker</a> cannot exploit
                                permissions granted to an unauthenticated origin. See <a
                                    href="#persisted-consent-abuse">abuse of persisted consent</a>.
                            </p>
                        </div>
                    </dd>
                    <dt>
                        Provide user controls to disable <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                            class="internalDFN" id="ref-for-dfn-key-system-74">Key Systems</a> or <a
                            data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                            id="ref-for-dfn-key-system-75">Key System</a> use of identifiers
                    </dt>
                    <dd>
                        <p>
                            User Agents <em class="rfc2119">SHOULD</em> provide users with a global control of whether a
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-76">Key System</a>
                            is enabled and/or whether <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-77">Key System</a> <a
                                data-link-type="dfn|abstract-op"
                                href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                                class="internalDFN"
                                id="ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-14">use
                                of Distinctive Identifier(s) or Distinctive Permanent Identifier(s)</a> is enabled (if
                            supported by the <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-78">Key System</a>). User agents <em
                                class="rfc2119">SHOULD</em> help the user avoid <a
                                href="#incomplete-clearing">Incomplete Clearing of Data</a>.
                        </p>
                    </dd>
                    <dt>
                        Require site-specific whitelisting of access to each <a data-link-type="dfn|abstract-op"
                            href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-79">Key System</a>
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MAY</em> require the user to explicitly authorize access to
                            each <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-80">Key System</a> - and/or certain features - before a site
                            can use it. User agents <em class="rfc2119">SHOULD</em>
                            enable users to revoke this authorization either temporarily or permanently.
                        </p>
                    </dd>
                    <dt>
                        Use shared blacklists
                    </dt>
                    <dd>
                        <p>
                            User agents <em class="rfc2119">MAY</em> allow users to share blacklists of <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a>
                            and/or <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-81">Key Systems</a>. This would allow communities to act
                            together to protect their privacy.
                        </p>
                    </dd>
                </dl>
                <div class="note" role="note" id="issue-container-generatedID-147">
                    <div role="heading" class="note-title marker" id="h-note-147" aria-level="5"><span>Note</span></div>
                    <p class="">
                        While these suggestions prevent trivial use of the APIs defined in this specification
                        for user tracking, they do not block it altogether. Within a single origin, a site can
                        continue to track the user during a session, and can then pass all this information to
                        a third party along with any identifying information (names, credit card numbers,
                        addresses) obtained by the site. If a third party cooperates with multiple sites to
                        obtain such information, and if identifiers are not
                        <a href="#per-origin-per-profile-identifiers">unique per origin and profile</a>, then a profile
                        can still be created.
                    </p>
                </div>
            </section>
        </section>
        <section id="privacy-storedinfo">
            <div class="header-wrapper">
                <h3 id="x11-5-information-stored-on-user-devices"><bdi class="secno">11.5 </bdi>
                    Information Stored on User Devices
                </h3><a class="self-link" href="#privacy-storedinfo" aria-label="Permalink for Section 11.5"></a>
            </div>

            <section class="informative" id="concerns-1">
                <div class="header-wrapper">
                    <h4 id="x11-5-1-concerns"><bdi class="secno">11.5.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns-1" aria-label="Permalink for Section 11.5.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-82">Key Systems</a> may store information on a user's device, or user
                    agents may store
                    information on behalf of Key Systems. Potentially, this could reveal information about
                    a user to another user of the same device, including potentially the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origins</a> that
                    have used a particular <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-83">Key System</a> (i.e., sites visited) or even
                    the content that
                    has been decrypted using a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-84">Key System</a>.
                </p>
                <p>
                    If information stored by one origin affects the operation of the <a data-link-type="dfn|abstract-op"
                        href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-85">Key System</a> for
                    another origin, then potentially the sites visited or content viewed by a user on one
                    site may be revealed to another, potentially malicious, site.
                </p>
                <p>
                    If information stored for one <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-18">browsing profile</a> on the client
                    device affects the
                    operation of the <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                        id="ref-for-dfn-key-system-86">Key System</a> for other <a data-link-type="dfn|abstract-op"
                        href="#dfn-browsing-profile" class="internalDFN" id="ref-for-dfn-browsing-profile-19">browsing
                        profiles</a>, or browsers, then
                    potentially the sites visited or content viewed in one may be revealed by or
                    correlatable with another <a data-link-type="dfn|abstract-op" href="#dfn-browsing-profile"
                        class="internalDFN" id="ref-for-dfn-browsing-profile-20">browsing profile</a>, even including
                    for different operating
                    system user accounts or browsers.
                </p>
            </section>
            <section id="mitigations-3">
                <div class="header-wrapper">
                    <h4 id="x11-5-2-mitigations"><bdi class="secno">11.5.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-3" aria-label="Permalink for Section 11.5.2"></a>
                </div>

                <p>
                    Requirements mitigating these concerns are defined in <a href="#persistent-state-requirements"
                        class="sec-ref"><bdi class="secno">8.3 </bdi>
                        Persistent Data</a>.
                </p>
            </section>
        </section>
        <section id="incomplete-clearing">
            <div class="header-wrapper">
                <h3 id="x11-6-incomplete-clearing-of-data"><bdi class="secno">11.6 </bdi>
                    Incomplete Clearing of Data
                </h3><a class="self-link" href="#incomplete-clearing" aria-label="Permalink for Section 11.6"></a>
            </div>

            <section class="informative" id="concerns-2">
                <div class="header-wrapper">
                    <h4 id="x11-6-1-concerns"><bdi class="secno">11.6.1 </bdi>
                        Concerns
                    </h4><a class="self-link" href="#concerns-2" aria-label="Permalink for Section 11.6.1"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>
                    A user's attempts to protect his or her privacy by clearing <a data-link-type="dfn|abstract-op"
                        href="#dfn-distinctive-identifier-s" class="internalDFN"
                        id="ref-for-dfn-distinctive-identifier-s-41">Distinctive Identifiers</a>
                    and stored data and/or disabling a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                        class="internalDFN" id="ref-for-dfn-key-system-87">Key System</a> may be defeated if all such
                    data and
                    functionality as well as cookies [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-cookies" title="HTTP State Management Mechanism">COOKIES</a></cite>] and other
                    site data are not cleared and/or
                    disabled at the same time. For example:
                </p>
                <ul>
                    <li>
                        <p>
                            If a user clears cookies or other persistent storage without also clearing
                            <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s" class="internalDFN"
                                id="ref-for-dfn-distinctive-identifier-s-42">Distinctive Identifiers</a> and data stored
                            by Key Systems, sites can defeat those
                            attempts by using the various features as redundant backup for each other.
                        </p>
                    </li>
                    <li>
                        <p>
                            If a user clears <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-43">Distinctive
                                Identifiers</a> without also clearing data stored by
                            <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-88">Key Systems</a>, including persistent sessions, as well
                            as cookies and other
                            persistent storage, sites can defeat those attempts by using the remaining data to
                            associate the old and new identifiers.
                        </p>
                    </li>
                    <li>
                        <p>
                            If a user disables a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-89">Key System</a>, especially for a
                            specific <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>,
                            without
                            also clearing cookies or other persistent storage, sites can defeat those attempts
                            by using the remaining features.
                        </p>
                    </li>
                    <li>
                        <p>
                            If a user disables a <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                                class="internalDFN" id="ref-for-dfn-key-system-90">Key System</a>, then later decide to
                            enable the <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-91">Key System</a>, without also clearing cookies or other
                            persistent storage, <a data-link-type="dfn|abstract-op" href="#dfn-distinctive-identifier-s"
                                class="internalDFN" id="ref-for-dfn-distinctive-identifier-s-44">Distinctive
                                Identifiers</a>, and data stored by <a data-link-type="dfn|abstract-op"
                                href="#dfn-key-system" class="internalDFN" id="ref-for-dfn-key-system-92">Key
                                Systems</a>, sites may be able to associate
                            data prior to the disabling with data and behavior after the <a
                                data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                                id="ref-for-dfn-key-system-93">Key System</a> is
                            re-enabled.
                        </p>
                    </li>
                </ul>
            </section>
            <section id="mitigations-4">
                <div class="header-wrapper">
                    <h4 id="x11-6-2-mitigations"><bdi class="secno">11.6.2 </bdi>
                        Mitigations
                    </h4><a class="self-link" href="#mitigations-4" aria-label="Permalink for Section 11.6.2"></a>
                </div>

                <p>
                    Recommendations mitigating these concerns are defined in <a href="#persistent-state-requirements"
                        class="sec-ref"><bdi class="secno">8.3 </bdi>
                        Persistent Data</a>.
                </p>
            </section>
        </section>
        <section id="private-browsing">
            <div class="header-wrapper">
                <h3 id="x11-7-private-browsing-modes"><bdi class="secno">11.7 </bdi>
                    Private Browsing Modes
                </h3><a class="self-link" href="#private-browsing" aria-label="Permalink for Section 11.7"></a>
            </div>

            <p>
                User agents may support a mode (e.g., private browsing) of operation intended to preserve
                user anonymity and/or ensure records of browsing activity are not persisted on the
                client. The privacy concerns discussed in previous sections may be especially concerning
                for users employing such modes.
            </p>
            <p>
                User agent implementers that support such mode(s) <em class="rfc2119">SHOULD</em> carefully consider
                whether
                access to <a data-link-type="dfn|abstract-op" href="#dfn-key-system" class="internalDFN"
                    id="ref-for-dfn-key-system-94">Key Systems</a> should be disabled in these mode(s). For example,
                such modes
                <em class="rfc2119">MAY</em> prohibit creation of <a data-link-type="idl" data-lt="MediaKeySystemAccess"
                    href="#dom-mediakeysystemaccess" class="internalDFN"
                    id="ref-for-dom-mediakeysystemaccess-17"><code>MediaKeySystemAccess</code></a> objects that support
                or use
                <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-persistentstate" class="internalDFN"
                    id="ref-for-dom-mediakeysystemconfiguration-persistentstate-13"><code>persistentState</code></a> or
                a
                <a data-link-type="idl" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-27"><code>distinctiveIdentifier</code></a>
                (either as part of the <a data-link-type="dfn|abstract-op" href="#dfn-cdm" class="internalDFN"
                    id="ref-for-dfn-cdm-143">CDM</a>
                implementation or because the application indicated they were
                "<a data-link-type="idl" href="#dom-mediakeysrequirement-required" class="internalDFN"
                    id="ref-for-dom-mediakeysrequirement-required-21"><code>required</code></a>"). If implementations do
                not prohibit such creation,
                they <em class="rfc2119">SHOULD</em> inform the user of the implications and potential consequences for
                the
                expected privacy properties of such modes before allowing their use.
            </p>
        </section>
        <section id="privacy-secureorigin">
            <div class="header-wrapper">
                <h3 id="x11-8-secure-origin-and-transport"><bdi class="secno">11.8 </bdi>
                    Secure Origin and Transport
                </h3><a class="self-link" href="#privacy-secureorigin" aria-label="Permalink for Section 11.8"></a>
            </div>

            <p>
                The APIs defined in this specification are only supported on secure origins, protecting
                information discussed in previous sections. Identifiers are additionally encrypted as
                specified in <a href="#encrypt-identifiers">Encrypt Identifiers</a>.
            </p>
            <p>
                Applications, including the servers they use, <em class="rfc2119">SHOULD</em> use secure transport for
                all traffic
                involving or containing data or messages from the <a data-link-type="dfn|abstract-op" href="#dfn-cdm"
                    class="internalDFN" id="ref-for-dfn-cdm-144">CDM</a>, including but is not limited
                to all data passed from <a data-link-type="idl" data-lt="message" href="#dfn-message"
                    class="internalDFN" id="ref-for-dfn-message-12"><code><code>message</code></code></a> events and to
                <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update" class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-22"><code>update</code></a><code>()</code>.
            </p>
            <p>
                All user agents <em class="rfc2119">MUST</em> properly handle Mixed Content [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-mixed-content"
                        title="Mixed Content">MIXED-CONTENT</a></cite>] to avoid exposure to
                insecure content or transport when the user agent or application wish to enforce secure
                origin and transport.
            </p>
        </section>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x12-conformance"><bdi class="secno">12. </bdi>Conformance</h2><a class="self-link"
                href="#conformance" aria-label="Permalink for Section 12."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST
                NOT</em>, <em class="rfc2119">OPTIONAL</em>, <em class="rfc2119">RECOMMENDED</em>, <em
                class="rfc2119">REQUIRED</em>, <em class="rfc2119">SHALL</em>, <em class="rfc2119">SHALL NOT</em>, <em
                class="rfc2119">SHOULD</em>, and <em class="rfc2119">SHOULD NOT</em> in this document
            are to be interpreted as described in
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all
            capitals, as shown here.
        </p>
    </section>
    <section id="examples" class="informative">
        <div class="header-wrapper">
            <h2 id="x13-examples"><bdi class="secno">13. </bdi>
                Examples
            </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 13."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            This section contains example solutions for various use cases using the proposed
            extensions. These are not the only solutions to these use cases. Video elements are used in
            the examples, but the same would apply to all media elements. In some cases, such as using
            synchronous XHR, the examples are simplified to keep the focus on the extensions.
        </p>
        <section id="example-source-and-key-known">
            <div class="header-wrapper">
                <h3 id="x13-1-source-and-key-known-at-page-load-clear-key"><bdi class="secno">13.1 </bdi>
                    Source and Key Known at Page Load (Clear Key)
                </h3><a class="self-link" href="#example-source-and-key-known"
                    aria-label="Permalink for Section 13.1"></a>
            </div>

            <p class="exampledescription">
                In this simple example, the source file and <a href="#clear-key">clear-text license</a>
                are hard-coded in the page. Only one session will ever be created.
            </p>
            <div class="example" id="example-5">
                <div class="marker">
                    <a class="self-link" href="#example-5">Example<bdi> 5</bdi></a>
                </div>
                <pre class="highlight" aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'video'</span>);

    <span class="hljs-keyword">if</span> (!video.<span class="hljs-property">mediaKeys</span>) {
      navigator.<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">'org.w3.clearkey'</span>, [
        { <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">'webm'</span>],
          <span class="hljs-attr">videoCapabilities</span>: [{ <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp8"'</span> }] }
      ]).<span class="hljs-title function_">then</span>(
        <span class="hljs-keyword">function</span>(<span class="hljs-params">keySystemAccess</span>) {
          <span class="hljs-keyword">var</span> promise = keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
          promise.<span class="hljs-title function_">catch</span>(
            <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create MediaKeys'</span>)
          );
          promise.<span class="hljs-title function_">then</span>(
            <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
              <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(createdMediaKeys);
            }
          ).<span class="hljs-title function_">catch</span>(
            <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to set MediaKeys'</span>)
          );
          promise.<span class="hljs-title function_">then</span>(
            <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
              <span class="hljs-keyword">var</span> te = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();
              <span class="hljs-keyword">var</span> initData = te.<span class="hljs-title function_">encode</span>( <span class="hljs-string">'{"kids":["LwVHf8JLtPrv2GUXFW2v_A"]}'</span>);
              <span class="hljs-keyword">var</span> keySession = createdMediaKeys.<span class="hljs-title function_">createSession</span>();
              keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, handleMessage, <span class="hljs-literal">false</span>);
              <span class="hljs-keyword">return</span> keySession.<span class="hljs-title function_">generateRequest</span>(<span class="hljs-string">'keyids'</span>, initData);
            }
          ).<span class="hljs-title function_">catch</span>(
            <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create or initialize key session'</span>)
          );
        }
      );
    }
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">var</span> keySession = event.<span class="hljs-property">target</span>;
    <span class="hljs-keyword">var</span> te = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();
    <span class="hljs-keyword">var</span> license = te.<span class="hljs-title function_">encode</span>(<span class="hljs-string">'{"keys":[{"kty":"oct","k":"tQ0bJVWb6b0KPL6KtZIy_A","kid":"LwVHf8JLtPrv2GUXFW2v_A"}],"type":"temporary"}'</span>);
    keySession.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'update() failed'</span>)
    );
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onload</span>=<span class="hljs-string">'onLoad()'</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'foo.webm'</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'video'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-selecting-key-system">
            <div class="header-wrapper">
                <h3 id="x13-2-selecting-a-supported-key-system-and-using-initialization-data-from-the-encrypted-event">
                    <bdi class="secno">13.2 </bdi>
                    Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event
                </h3><a class="self-link" href="#example-selecting-key-system"
                    aria-label="Permalink for Section 13.2"></a>
            </div>

            <p class="exampledescription">
                This example selects a supported <a data-link-type="dfn|abstract-op" href="#dfn-key-system"
                    class="internalDFN" id="ref-for-dfn-key-system-95">Key System</a> using the
                <a data-link-type="idl" data-lt="requestMediaKeySystemAccess()"
                    href="#dom-navigator-requestmediakeysystemaccess" class="internalDFN"
                    id="ref-for-dom-navigator-requestmediakeysystemaccess-15"><code>requestMediaKeySystemAccess</code></a><code>()</code>
                method then uses the <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data"
                    class="internalDFN" id="ref-for-dfn-initialization-data-24">Initialization Data</a>
                from the <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/media.html#media-data">media data</a> to generate the
                license request and send it to
                the appropriate license server. One of the supported key systems uses a
                serverCertificate, which is provided proactively.
            </p>
            <div class="example" id="example-6">
                <div class="marker">
                    <a class="self-link" href="#example-6">Example<bdi> 6</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;

  <span class="hljs-comment">// Returns a Promise&lt;MediaKeys&gt;.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) {
    someSystemOptions = [
     { <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">'keyids'</span>, <span class="hljs-string">'webm'</span>],
       <span class="hljs-attr">audioCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="opus"'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="vorbis"'</span> }
       ],
       <span class="hljs-attr">videoCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp9"'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp8"'</span> }
       ]
     }
    ];
    clearKeyOptions = [
     { <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">'keyids'</span>, <span class="hljs-string">'webm'</span>],
       <span class="hljs-attr">audioCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="opus"'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'audio/webm; codecs="vorbis"'</span> }
       ],
       <span class="hljs-attr">videoCapabilities</span>: [
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp9"'</span>,
           <span class="hljs-attr">robustness</span>: <span class="hljs-string">'foo'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp9"'</span>,
           <span class="hljs-attr">robustness</span>: <span class="hljs-string">'bar'</span> },
         { <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/webm; codecs="vp8"'</span>,
           <span class="hljs-attr">robustness</span>: <span class="hljs-string">'bar'</span> },
       ]
     }
    ];

    <span class="hljs-keyword">return</span> navigator.<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">'com.example.somesystem'</span>, someSystemOptions).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">keySystemAccess</span>) {
        <span class="hljs-comment">// Not shown:</span>
        <span class="hljs-comment">// 1. Use both attributes of keySystemAccess.getConfiguration().audioCapabilities[0]</span>
        <span class="hljs-comment">//    and both attributes of keySystemAccess.getConfiguration().videoCapabilities[0]</span>
        <span class="hljs-comment">//    to retrieve appropriate stream(s).</span>
        <span class="hljs-comment">// 2. Set video.src.</span>

        licenseUrl = <span class="hljs-string">'https://license.example.com/getkey'</span>;
        serverCertificate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([ ... ]);
        <span class="hljs-keyword">return</span> keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
        <span class="hljs-comment">// Try the next key system.</span>
        navigator.<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">'org.w3.clearkey'</span>, clearKeyOptions).<span class="hljs-title function_">then</span>(
          <span class="hljs-keyword">function</span>(<span class="hljs-params">keySystemAccess</span>) {
            <span class="hljs-comment">// Not shown:</span>
            <span class="hljs-comment">// 1. Use keySystemAccess.getConfiguration().audioCapabilities[0].contentType</span>
            <span class="hljs-comment">//    and keySystemAccess.getConfiguration().videoCapabilities[0].contentType</span>
            <span class="hljs-comment">//    to retrieve appropriate stream(s).</span>
            <span class="hljs-comment">// 2. Set video.src.</span>

            licenseUrl = <span class="hljs-string">'https://license.example.com/clearkey/request'</span>;
            <span class="hljs-keyword">return</span> keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
          }
        );
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to instantiate a key system supporting the required combinations'</span>)
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInitData</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">var</span> video = event.<span class="hljs-property">target</span>;
    <span class="hljs-keyword">if</span> (video.<span class="hljs-property">mediaKeysObject</span> === <span class="hljs-literal">undefined</span>) {
      video.<span class="hljs-property">mediaKeysObject</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// Prevent entering this path again.</span>
      video.<span class="hljs-property">pendingSessionData</span> = []; <span class="hljs-comment">// Will store all initData until the MediaKeys is ready.</span>
      <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
        <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
          video.<span class="hljs-property">mediaKeysObject</span> = createdMediaKeys;

          <span class="hljs-keyword">if</span> (serverCertificate)
            createdMediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);

          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; video.<span class="hljs-property">pendingSessionData</span>.<span class="hljs-property">length</span>; i++) {
            <span class="hljs-keyword">var</span> data = video.<span class="hljs-property">pendingSessionData</span>[i];
            <span class="hljs-title function_">makeNewRequest</span>(video.<span class="hljs-property">mediaKeysObject</span>, data.<span class="hljs-property">initDataType</span>, data.<span class="hljs-property">initData</span>);
          }
          video.<span class="hljs-property">pendingSessionData</span> = [];

          <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(createdMediaKeys);
        }
      ).<span class="hljs-title function_">catch</span>(
        <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
      );
    }
    <span class="hljs-title function_">addSession</span>(video, event.<span class="hljs-property">initDataType</span>, event.<span class="hljs-property">initData</span>);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addSession</span>(<span class="hljs-params">video, initDataType, initData</span>) {
    <span class="hljs-keyword">if</span> (video.<span class="hljs-property">mediaKeysObject</span>) {
      <span class="hljs-title function_">makeNewRequest</span>(video.<span class="hljs-property">mediaKeysObject</span>, initDataType, initData);
    } <span class="hljs-keyword">else</span> {
      video.<span class="hljs-property">pendingSessionData</span>.<span class="hljs-title function_">push</span>({<span class="hljs-attr">initDataType</span>: initDataType, <span class="hljs-attr">initData</span>: initData});
    }
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>();
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, licenseRequestReady, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-title function_">generateRequest</span>(initDataType, initData).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create or initialize key session'</span>)
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">licenseRequestReady</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">var</span> request = event.<span class="hljs-property">message</span>;

    <span class="hljs-keyword">var</span> xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xmlhttp.<span class="hljs-property">keySession</span> = event.<span class="hljs-property">target</span>;
    xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">"POST"</span>, licenseUrl);
    xmlhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span> (xmlhttp.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span>) {
        <span class="hljs-keyword">var</span> license = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(xmlhttp.<span class="hljs-property">response</span>);
        xmlhttp.<span class="hljs-property">keySession</span>.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">catch</span>(
          <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'update() failed'</span>)
        );
      }
    }
    xmlhttp.<span class="hljs-title function_">send</span>(request);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">onencrypted</span>=<span class="hljs-string">'handleInitData(event)'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-mediakeys-before-source">
            <div class="header-wrapper">
                <h3 id="x13-3-create-mediakeys-before-loading-media"><bdi class="secno">13.3 </bdi>
                    Create MediaKeys Before Loading Media
                </h3><a class="self-link" href="#example-mediakeys-before-source"
                    aria-label="Permalink for Section 13.3"></a>
            </div>

            <p class="exampledescription">
                Initialization is much simpler if encrypted events do not need to be handled during
                <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-47"><code>MediaKeys</code></a> initialization. This can be accomplished
                either by providing the
                <a data-link-type="dfn|abstract-op" href="#dfn-initialization-data" class="internalDFN"
                    id="ref-for-dfn-initialization-data-25">Initialization Data</a> in other ways or setting the source
                after the <a data-link-type="idl" data-lt="MediaKeys" href="#dom-mediakeys" class="internalDFN"
                    id="ref-for-dom-mediakeys-48"><code>MediaKeys</code></a>
                object has been created. This example does the latter.
            </p>
            <div class="example" id="example-7">
                <div class="marker">
                    <a class="self-link" href="#example-7">Example<bdi> 7</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;
  <span class="hljs-keyword">var</span> mediaKeys;

  <span class="hljs-comment">// See the previous example for implementations of these functions.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">licenseRequestReady</span>(<span class="hljs-params">event</span>) { ... }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInitData</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-title function_">makeNewRequest</span>(mediaKeys, event.<span class="hljs-property">initDataType</span>, event.<span class="hljs-property">initData</span>);
  }

  <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
      mediaKeys = createdMediaKeys;
      <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
      video.<span class="hljs-property">src</span> = <span class="hljs-string">'foo.webm'</span>;
      <span class="hljs-keyword">if</span> (serverCertificate)
        mediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);
      <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
    }
  ).<span class="hljs-title function_">catch</span>(
    <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
  );
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"v"</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">onencrypted</span>=<span class="hljs-string">'handleInitData(event)'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-using-all-events">
            <div class="header-wrapper">
                <h3 id="x13-4-using-all-events"><bdi class="secno">13.4 </bdi>
                    Using All Events
                </h3><a class="self-link" href="#example-using-all-events" aria-label="Permalink for Section 13.4"></a>
            </div>

            <p class="exampledescription">
                This is a more complete example showing all events being used.
            </p>
            <p class="exampledescription">
                Note that <code>handleMessage()</code> could be called multiple times, including in
                response to the <a data-link-type="idl" data-lt="update()" href="#dom-mediakeysession-update"
                    class="internalDFN"
                    id="ref-for-dom-mediakeysession-update-23"><code>update</code></a><code>()</code> call if multiple
                round trips are required
                and for any other reason the Key System might need to send a message.
            </p>
            <div class="example" id="example-8">
                <div class="marker">
                    <a class="self-link" href="#example-8">Example<bdi> 8</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;
  <span class="hljs-keyword">var</span> mediaKeys;

  <span class="hljs-comment">// See previous examples for implementations of these functions.</span>
  <span class="hljs-comment">// createSupportedKeySystem() additionally sets renewalUrl.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleInitData</span>(<span class="hljs-params">event</span>) { ... }

  <span class="hljs-comment">// This replaces the implementation in the previous example.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>();
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keystatuseschange'</span>, handlekeyStatusesChange, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-property">closed</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>, <span class="hljs-string">'closed, reason'</span>, reason);
      }.<span class="hljs-title function_">bind</span>(keySession)
    );
    keySession.<span class="hljs-title function_">generateRequest</span>(initDataType, initData).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to create or initialize key session'</span>)
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessageResponse</span>(<span class="hljs-params">keySession, response</span>) {
    <span class="hljs-keyword">var</span> license = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(response);
    keySession.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">catch</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'update() failed: '</span> + err);
      }
    );
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">type, message, keySession</span>) {
    <span class="hljs-keyword">var</span> url = licenseUrl;
    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"license-renewal"</span>)
      url = renewalUrl;
    xmlhttp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xmlhttp.<span class="hljs-property">keySession</span> = keySession;
    xmlhttp.<span class="hljs-title function_">open</span>(<span class="hljs-string">'POST'</span>, url);
    xmlhttp.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span> (xmlhttp.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span>)
        <span class="hljs-title function_">handleMessageResponse</span>(xmlhttp.<span class="hljs-property">keySession</span>, xmlhttp.<span class="hljs-property">response</span>);
    }
    xmlhttp.<span class="hljs-title function_">send</span>(message);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-title function_">sendMessage</span>(event.<span class="hljs-property">messageType</span>, event.<span class="hljs-property">message</span>, event.<span class="hljs-property">target</span>);
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handlekeyStatusesChange</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-comment">// Evaluate the current state using one of the map-like methods exposed by</span>
    <span class="hljs-comment">// event.target.keyStatuses.</span>
    <span class="hljs-comment">// For example:</span>
    event.<span class="hljs-property">target</span>.<span class="hljs-property">keyStatuses</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">status, keyId</span>) {
      <span class="hljs-keyword">switch</span> (status) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"usable"</span>:
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"expired"</span>:
          <span class="hljs-comment">// Report an expired key.</span>
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">"status-pending"</span>:
          <span class="hljs-comment">// The status is not yet known. Consider the key unusable until the status is updated.</span>
          <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
          <span class="hljs-comment">// Do something with |keyId| and |status|.</span>
      }
    })
  }

  <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
      mediaKeys = createdMediaKeys;
      <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
      video.<span class="hljs-property">src</span> = <span class="hljs-string">'foo.webm'</span>;
      <span class="hljs-keyword">if</span> (serverCertificate)
        mediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);
      <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
    }
  ).<span class="hljs-title function_">catch</span>(
    <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
  );
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"v"</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">onencrypted</span>=<span class="hljs-string">'handleInitData(event)'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-stored-license">
            <div class="header-wrapper">
                <h3 id="x13-5-stored-license"><bdi class="secno">13.5 </bdi>
                    Stored License
                </h3><a class="self-link" href="#example-stored-license" aria-label="Permalink for Section 13.5"></a>
            </div>

            <p class="exampledescription">
                This example requests a persistent license for future use and stores it. It also provides
                functions for later retrieving the license and for destroying it.
            </p>
            <div class="example" id="example-9">
                <div class="marker">
                    <a class="self-link" href="#example-9">Example<bdi> 9</bdi></a>
                </div>
                <pre class="highlight"
                    aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
  <span class="hljs-keyword">var</span> licenseUrl;
  <span class="hljs-keyword">var</span> serverCertificate;
  <span class="hljs-keyword">var</span> mediaKeys;

  <span class="hljs-comment">// See the previous examples for implementations of these functions.</span>
  <span class="hljs-comment">// createSupportedKeySystem() additionally sets persistentState: "required" in each options dictionary.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">createSupportedKeySystem</span>(<span class="hljs-params"></span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">message, keySession</span>) { ... }
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params">event</span>) { ... }

  <span class="hljs-comment">// Called if the application does not have a stored sessionId for the media resource.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeNewRequest</span>(<span class="hljs-params">mediaKeys, initDataType, initData</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>(<span class="hljs-string">"persistent-license"</span>);
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-property">closed</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>, <span class="hljs-string">'closed, reason'</span>, reason);
      }.<span class="hljs-title function_">bind</span>(keySession)
    );
    keySession.<span class="hljs-title function_">generateRequest</span>(initDataType, initData).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// Store this.sessionId in the application.</span>
      }.<span class="hljs-title function_">bind</span>(keySession)
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to request a persistent license'</span>)
    );
  }

  <span class="hljs-comment">// Called if the application has a stored sessionId for the media resource.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadStoredSession</span>(<span class="hljs-params">mediaKeys, sessionId</span>) {
    <span class="hljs-keyword">var</span> keySession = mediaKeys.<span class="hljs-title function_">createSession</span>(<span class="hljs-string">"persistent-license"</span>);
    keySession.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, handleMessage, <span class="hljs-literal">false</span>);
    keySession.<span class="hljs-property">closed</span>.<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">reason</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>, <span class="hljs-string">'closed, reason'</span>, reason);
      }.<span class="hljs-title function_">bind</span>(keySession)
    );
    keySession.<span class="hljs-title function_">load</span>(sessionId).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params">loaded</span>) {
        <span class="hljs-keyword">if</span> (!loaded) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'No stored session with the ID '</span> + sessionId + <span class="hljs-string">' was found.'</span>);
          <span class="hljs-comment">// The application should remove its record of |sessionId|.</span>
          <span class="hljs-keyword">return</span>;
        }
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Unable to load or initialize the stored session with the ID '</span> + sessionId)
    );
  }

  <span class="hljs-comment">// Called when the application wants to stop using the session without removing the stored license.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">closeSession</span>(<span class="hljs-params">keySession</span>) {
    keySession.<span class="hljs-title function_">close</span>();
  }

  <span class="hljs-comment">// Called when the application wants to remove the stored license.</span>
  <span class="hljs-comment">// The stored session data has not been completely removed until the promise returned by remove() is fulfilled.</span>
  <span class="hljs-comment">// The remove() call may initiate a series of messages to/from the server that must be completed before this occurs.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeStoredSession</span>(<span class="hljs-params">keySession</span>) {
    keySession.<span class="hljs-title function_">remove</span>().<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Session '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> + <span class="hljs-string">' removed'</span>);
        <span class="hljs-comment">// The application should remove its record of this.sessionId.</span>
      }.<span class="hljs-title function_">bind</span>(keySession)
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to remove the session'</span>)
    );
  }

  <span class="hljs-comment">// This replaces the implementation in the previous example.</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMessageResponse</span>(<span class="hljs-params">keySession, response</span>) {
    <span class="hljs-keyword">var</span> license = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(response);
    keySession.<span class="hljs-title function_">update</span>(license).<span class="hljs-title function_">then</span>(
      <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// If this was the last required message from the server, the license is</span>
        <span class="hljs-comment">// now stored. Update the application state as appropriate.</span>
      }
    ).<span class="hljs-title function_">catch</span>(
      <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'update() failed'</span>)
    );
  }

  <span class="hljs-title function_">createSupportedKeySystem</span>().<span class="hljs-title function_">then</span>(
    <span class="hljs-keyword">function</span>(<span class="hljs-params">createdMediaKeys</span>) {
      mediaKeys = createdMediaKeys;
      <span class="hljs-keyword">var</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"v"</span>);
      <span class="hljs-keyword">if</span> (serverCertificate)
        mediaKeys.<span class="hljs-title function_">setServerCertificate</span>(serverCertificate);
      <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
    }
  ).<span class="hljs-title function_">catch</span>(
    <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">'Failed to create and initialize a MediaKeys object'</span>)
  );
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">'v'</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'foo.webm'</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></code></pre>
            </div>
        </section>
        <section id="example-getStatusForPolicy">
            <div class="header-wrapper">
                <h3 id="x13-6-pre-fetch-media-with-hdcp-policy"><bdi class="secno">13.6 </bdi>
                    Pre-fetch Media With HDCP Policy
                </h3><a class="self-link" href="#example-getStatusForPolicy"
                    aria-label="Permalink for Section 13.6"></a>
            </div>

            <p class="exampledescription">
                If some media will have an HDCP policy in the license, an application can check for that
                version before pre-fetching.
            </p>
            <div class="example" id="example-10">
                <div class="marker">
                    <a class="self-link" href="#example-10">Example<bdi> 10</bdi></a>
                </div>
                <pre class="highlight" aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">const</span> status = <span class="hljs-keyword">await</span> video.<span class="hljs-property">mediaKeys</span>.<span class="hljs-title function_">getStatusForPolicy</span>({
  <span class="hljs-attr">minHdcpVersion</span>: <span class="hljs-string">'1.4'</span>
});

<span class="hljs-keyword">if</span> (status === <span class="hljs-string">'usable'</span>) {
  <span class="hljs-comment">// Pre-fetch HD content.</span>
} <span class="hljs-keyword">else</span> {  <span class="hljs-comment">// 'output-restricted'</span>
  <span class="hljs-comment">// Pre-fetch SD content.</span>
}</code></pre>
            </div>
        </section>
    </section>
    <section id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="x14-acknowledgments"><bdi class="secno">14. </bdi>
                Acknowledgments
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Section 14."></a>
        </div>

        <p>
            The editors would like to thank Aaron Colwell, Alex Russell, Anne van Kesteren, Bob Lund,
            Boris Zbarsky, Chris Needham, Chris Pearce, David Singer, Domenic Denicola, Frank Galligan,
            Glenn Adams, Henri Sivonen, Jer Noble, Joe Steele, Joey Parrish, John Simmons, Mark
            Vickers, Pavel Pergamenshchik, Philip Jägenstedt, Pierre Lemieux, Robert O'Callahan, Ryan
            Sleevi, Steve Heffernan, Steven Robertson Theresa O'Connor, Thomás Inskip, Travis Leithead,
            and Xiaohan Wang for their contributions to this specification. Thank you also to the many
            others who contributed to the specification, including through their participation on the
            mailing list and in the issues.
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-cookies">[COOKIES]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc6265.html"><cite>HTTP State Management Mechanism</cite></a>. A.
                    Barth. IETF. April 2011. Proposed Standard. URL: <a
                        href="https://httpwg.org/specs/rfc6265.html">https://httpwg.org/specs/rfc6265.html</a>
                </dd>
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-ecma-262">[ECMA-262]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.
                    Ecma International. URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-eme-initdata-keyids">[EME-INITDATA-KEYIDS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-initdata-keyids/"><cite>"keyids" Initialization Data
                            Format</cite></a>. Joey Parrish; Greg Freedman. W3C. 20 August 2024. W3C Working Group Note.
                    URL: <a
                        href="https://www.w3.org/TR/eme-initdata-keyids/">https://www.w3.org/TR/eme-initdata-keyids/</a>
                </dd>
                <dt id="bib-eme-initdata-registry">[EME-INITDATA-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-initdata-registry/"><cite>Encrypted Media Extensions
                            Initialization Data Format Registry</cite></a>. Joey Parrish; Greg Freedman. W3C. 18 July
                    2024. DRY. URL: <a
                        href="https://www.w3.org/TR/eme-initdata-registry/">https://www.w3.org/TR/eme-initdata-registry/</a>
                </dd>
                <dt id="bib-encoding">[ENCODING]</dt>
                <dd>
                    <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Anne van Kesteren.
                    WHATWG. Living Standard. URL: <a
                        href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[Infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. Living Standard. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mimesniff">[mimesniff]</dt>
                <dd>
                    <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Gordon P.
                    Hemsley. WHATWG. Living Standard. URL: <a
                        href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mixed-content">[MIXED-CONTENT]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/mixed-content/"><cite>Mixed Content</cite></a>. Emily Stark; Mike
                    West; Carlos IbarraLopez. W3C. 23 February 2023. CRD. URL: <a
                        href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a>
                </dd>
                <dt id="bib-permissions-policy">[PERMISSIONS-POLICY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions-policy-1/"><cite>Permissions Policy</cite></a>. Ian
                    Clelland. W3C. 6 August 2025. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/permissions-policy-1/">https://www.w3.org/TR/permissions-policy-1/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc6381">[RFC6381]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6381"><cite>The 'Codecs' and 'Profiles' Parameters for
                            "Bucket" Media Types</cite></a>. R. Gellens; D. Singer; P. Frojdh. IETF. August 2011.
                    Proposed Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6381">https://www.rfc-editor.org/rfc/rfc6381</a>
                </dd>
                <dt id="bib-rfc7517">[RFC7517]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7517"><cite>JSON Web Key (JWK)</cite></a>. M. Jones.
                    IETF. May 2015. Proposed Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7517">https://www.rfc-editor.org/rfc/rfc7517</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="a-2-informative-references"><bdi class="secno">A.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix A.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-cenc">[CENC]</dt>
                <dd>
                    <a href="https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1"><cite>ISO/IEC 23001-7:2016,
                            Information technology — MPEG systems technologies — Part 7: Common encryption in ISO Base
                            Media File Format files</cite></a>. ISO/IEC. International Standard. URL: <a
                        href="https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1">https://www.iso.org/obp/ui/#iso:std:iso-iec:23001:-7:ed-3:v1</a>
                </dd>
                <dt id="bib-eme-hdcp-version-registry">[EME-HDCP-VERSION-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-hdcp-version-registry/"><cite>Encrypted Media Extensions HDCP
                            Version Registry</cite></a>. Joey Parrish; Greg Freedman. W3C. 18 July 2024. DRY. URL: <a
                        href="https://www.w3.org/TR/eme-hdcp-version-registry/">https://www.w3.org/TR/eme-hdcp-version-registry/</a>
                </dd>
                <dt id="bib-eme-stream-registry">[EME-STREAM-REGISTRY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/eme-stream-registry/"><cite>Encrypted Media Extensions Stream Format
                            Registry</cite></a>. Joey Parrish; Greg Freedman. W3C. 18 July 2024. DRY. URL: <a
                        href="https://www.w3.org/TR/eme-stream-registry/">https://www.w3.org/TR/eme-stream-registry/</a>
                </dd>
                <dt id="bib-media-source">[MEDIA-SOURCE]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/media-source-2/"><cite>Media Source Extensions™</cite></a>. Jean-Yves
                    Avenard; Mark Watson. W3C. 17 April 2025. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/media-source-2/">https://www.w3.org/TR/media-source-2/</a>
                </dd>
                <dt id="bib-rfc6838">[RFC6838]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6838"><cite>Media Type Specifications and Registration
                            Procedures</cite></a>. N. Freed; J. Klensin; T. Hansen. IETF. January 2013. Best Current
                    Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6838">https://www.rfc-editor.org/rfc/rfc6838</a>
                </dd>
                <dt id="bib-rfc7515">[RFC7515]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7515"><cite>JSON Web Signature (JWS)</cite></a>. M.
                    Jones; J. Bradley; N. Sakimura. IETF. May 2015. Proposed Standard. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7515">https://www.rfc-editor.org/rfc/rfc7515</a>
                </dd>
                <dt id="bib-webaudio">[webaudio]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/webaudio-1.0/"><cite>Web Audio API</cite></a>. Paul Adenot; Hongchan
                    Choi. W3C. 17 June 2021. W3C Recommendation. URL: <a
                        href="https://www.w3.org/TR/webaudio-1.0/">https://www.w3.org/TR/webaudio-1.0/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cdm"
        aria-label="Links in this document to definition: Content Decryption Module (CDM)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cdm"
                aria-label="Permalink for definition: Content Decryption Module (CDM). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-cdm-1" title="§ 2. Definitions">§ 2. Definitions</a> <a href="#ref-for-dfn-cdm-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-cdm-7" title="Reference 7">(7)</a> <a href="#ref-for-dfn-cdm-8"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-cdm-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-cdm-10" title="Reference 10">(10)</a> <a href="#ref-for-dfn-cdm-11"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-cdm-12" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-cdm-13" title="Reference 13">(13)</a> <a href="#ref-for-dfn-cdm-14"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-cdm-15" title="Reference 15">(15)</a> <a
                    href="#ref-for-dfn-cdm-16" title="Reference 16">(16)</a> <a href="#ref-for-dfn-cdm-17"
                    title="Reference 17">(17)</a> <a href="#ref-for-dfn-cdm-18" title="Reference 18">(18)</a> <a
                    href="#ref-for-dfn-cdm-19" title="Reference 19">(19)</a> <a href="#ref-for-dfn-cdm-20"
                    title="Reference 20">(20)</a> <a href="#ref-for-dfn-cdm-21" title="Reference 21">(21)</a> <a
                    href="#ref-for-dfn-cdm-22" title="Reference 22">(22)</a> <a href="#ref-for-dfn-cdm-23"
                    title="Reference 23">(23)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-24" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4 Get Consent Status</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-25" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dfn-cdm-26" title="Reference 2">(2)</a>
                <a href="#ref-for-dfn-cdm-27" title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-28"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-29" title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§ 3.4.1
                    Dictionary MediaKeySystemMediaCapability Members</a> <a href="#ref-for-dfn-cdm-30"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-31" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-32" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-33" title="§ 5.1 Methods">§ 5.1 Methods</a> <a href="#ref-for-dfn-cdm-34"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-35" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-36" title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-37"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-38" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-39" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-40" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
                <a href="#ref-for-dfn-cdm-41" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-42"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-43" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-44" title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-45"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-46" title="§ 6.1 Attributes">§ 6.1 Attributes</a> <a
                    href="#ref-for-dfn-cdm-47" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-48" title="§ 6.2 Methods">§ 6.2 Methods</a> <a href="#ref-for-dfn-cdm-49"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-50" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-51" title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-52"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-53" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-cdm-54" title="Reference 7">(7)</a> <a href="#ref-for-dfn-cdm-55"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-cdm-56" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-cdm-57" title="Reference 10">(10)</a> <a href="#ref-for-dfn-cdm-58"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-cdm-59" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-cdm-60" title="Reference 13">(13)</a> <a href="#ref-for-dfn-cdm-61"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-cdm-62" title="Reference 15">(15)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-63" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3 MediaKeyStatusMap
                    Interface</a> <a href="#ref-for-dfn-cdm-64" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-65" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-66" title="§ 6.4.1 Attributes">§ 6.4.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-67" title="§ 6.5 Event Summary">§ 6.5 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-68" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a> <a
                    href="#ref-for-dfn-cdm-69" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-70"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-71" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM
                    State Changes</a> <a href="#ref-for-dfn-cdm-72" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-73" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-74" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage and
                    Persistence</a> <a href="#ref-for-dfn-cdm-75" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-76" title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-77"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-78" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-79" title="§ 7.2 Methods">§ 7.2 Methods</a> <a href="#ref-for-dfn-cdm-80"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-81" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-cdm-82" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-83" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1 Media Data
                    May Contain Encrypted Blocks</a> <a href="#ref-for-dfn-cdm-84" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-85" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-86" title="§ 7.6 Media Element Restrictions">§ 7.6 Media Element
                    Restrictions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-87" title="§ 8. Implementation Requirements">§ 8. Implementation
                    Requirements</a> <a href="#ref-for-dfn-cdm-88" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-89" title="§ 8.1 CDM Constraints">§ 8.1 CDM Constraints</a> <a
                    href="#ref-for-dfn-cdm-90" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-91"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-92" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-93" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-94" title="§ 8.2 Messages and Communication">§ 8.2 Messages and
                    Communication</a> <a href="#ref-for-dfn-cdm-95" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-96" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-97" title="§ 8.3 Persistent Data">§ 8.3 Persistent Data</a> <a
                    href="#ref-for-dfn-cdm-98" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-99"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-100" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-101" title="§ 8.4 Values Exposed to the Application">§ 8.4 Values Exposed to
                    the Application</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-102" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-103"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-104" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt Identifiers</a> <a
                    href="#ref-for-dfn-cdm-105" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-106"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-107" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-108" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-109" title="§ 8.6 Individualization">§ 8.6 Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-110" title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct
                    Individualization</a> <a href="#ref-for-dfn-cdm-111" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-112" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-113" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted
                    Individualization</a> <a href="#ref-for-dfn-cdm-114" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-115" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-116" title="§ 8.8.2 Support Extraction From Media Data">§ 8.8.2 Support
                    Extraction From Media Data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-117" title="§ 8.9.3 Unencrypted In-band Support Content">§ 8.9.3 Unencrypted
                    In-band Support Content</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-118" title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input Data
                    Attacks and Vulnerabilities</a> <a href="#ref-for-dfn-cdm-119" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-120" title="§ 10.2 CDM Attacks and Vulnerabilities">§ 10.2 CDM Attacks and
                    Vulnerabilities</a> <a href="#ref-for-dfn-cdm-121" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-cdm-122" title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-123"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-cdm-124" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-cdm-125" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-126" title="§ 10.3.2 Mitigations">§ 10.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-127" title="§ 11. Privacy">§ 11. Privacy</a> <a href="#ref-for-dfn-cdm-128"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-129" title="§ 11.3.2 Mitigations">§ 11.3.2 Mitigations</a> <a
                    href="#ref-for-dfn-cdm-130" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-131"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-132" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-133" title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-134"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-cdm-135" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-136" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-cdm-137" title="Reference 2">(2)</a> <a href="#ref-for-dfn-cdm-138"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-cdm-139" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-cdm-140" title="Reference 5">(5)</a> <a href="#ref-for-dfn-cdm-141"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-142" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-143" title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing Modes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-144" title="§ 11.8 Secure Origin and Transport">§ 11.8 Secure Origin and
                    Transport</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-key-system"
        aria-label="Links in this document to definition: Key System">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-key-system"
                aria-label="Permalink for definition: Key System. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-key-system-1" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-key-system-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-3" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-key-system-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-5" title="§ 3. Obtaining Access to Key Systems">§ 3. Obtaining Access
                    to Key Systems</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-6" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dfn-key-system-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-8" title="§ 3.2.2.1 Get Supported Configuration">§ 3.2.2.1 Get
                    Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-9" title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2
                    Get Supported Configuration and Consent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-10" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dfn-key-system-11"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-12" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-13" title="§ 4.1 Attributes">§ 4.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-14" title="§ 4.2 Methods">§ 4.2 Methods</a> <a
                    href="#ref-for-dfn-key-system-15" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-16"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-17" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-18" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-19" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dfn-key-system-20" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-21"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-22" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-23" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-key-system-24" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-25"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-26" title="§ 6.4.1 Attributes">§ 6.4.1 Attributes</a> <a
                    href="#ref-for-dfn-key-system-27" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-28" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a> <a
                    href="#ref-for-dfn-key-system-29" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-30"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-31" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-32" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-33" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-34" title="§ 8. Implementation Requirements">§ 8. Implementation
                    Requirements</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-35"
                    title="§ 8.3.1 Use origin-specific and browsing profile-specific Key System storage">§ 8.3.1 Use
                    origin-specific and browsing profile-specific Key System storage</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-36" title="§ 8.3.2 Allow Persistent Data to Be Cleared">§ 8.3.2 Allow
                    Persistent Data to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-37" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-38" title="§ 9. Common Key Systems">§ 9. Common Key Systems</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-39" title="§ 9.1 Clear Key">§ 9.1 Clear Key</a> <a
                    href="#ref-for-dfn-key-system-40" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-41" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-42" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-43" title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input
                    Data Attacks and Vulnerabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-44" title="§ 10.2 CDM Attacks and Vulnerabilities">§ 10.2 CDM Attacks
                    and Vulnerabilities</a> <a href="#ref-for-dfn-key-system-45" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-key-system-46" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-47" title="§ 10.3.2 Mitigations">§ 10.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-48" title="§ 11. Privacy">§ 11. Privacy</a> <a
                    href="#ref-for-dfn-key-system-49" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-50" title="§ 11.1 Information Disclosed by EME and Key Systems">§ 11.1
                    Information Disclosed by EME and Key Systems</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-51" title="§ 11.2 Fingerprinting">§ 11.2 Fingerprinting</a> <a
                    href="#ref-for-dfn-key-system-52" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-53" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-key-system-54" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-55"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-56" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-57" title="Reference 5">(5)</a> <a href="#ref-for-dfn-key-system-58"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-key-system-59" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-key-system-60" title="Reference 8">(8)</a> <a href="#ref-for-dfn-key-system-61"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-key-system-62" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-key-system-63" title="Reference 11">(11)</a> <a href="#ref-for-dfn-key-system-64"
                    title="Reference 12">(12)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-65" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a> <a
                    href="#ref-for-dfn-key-system-66" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-67"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-68" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-69" title="Reference 5">(5)</a> <a href="#ref-for-dfn-key-system-70"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-key-system-71" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-key-system-72" title="Reference 8">(8)</a> <a href="#ref-for-dfn-key-system-73"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-key-system-74" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-key-system-75" title="Reference 11">(11)</a> <a href="#ref-for-dfn-key-system-76"
                    title="Reference 12">(12)</a> <a href="#ref-for-dfn-key-system-77" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-key-system-78" title="Reference 14">(14)</a> <a href="#ref-for-dfn-key-system-79"
                    title="Reference 15">(15)</a> <a href="#ref-for-dfn-key-system-80" title="Reference 16">(16)</a> <a
                    href="#ref-for-dfn-key-system-81" title="Reference 17">(17)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-82" title="§ 11.5.1 Concerns">§ 11.5.1 Concerns</a> <a
                    href="#ref-for-dfn-key-system-83" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-84"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-85" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-86" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-87" title="§ 11.6.1 Concerns">§ 11.6.1 Concerns</a> <a
                    href="#ref-for-dfn-key-system-88" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-system-89"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-system-90" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-key-system-91" title="Reference 5">(5)</a> <a href="#ref-for-dfn-key-system-92"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-key-system-93" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-94" title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing
                    Modes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-system-95"
                    title="§ 13.2 Selecting a Supported Key System and Using Initialization Data from the &quot;encrypted&quot; Event">§
                    13.2 Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-key-session"
        aria-label="Links in this document to definition: Key Session">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-key-session"
                aria-label="Permalink for definition: Key Session. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-key-session-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-2" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dfn-key-session-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-4" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-key-session-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-session-7" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-session-id"
        aria-label="Links in this document to definition: Session ID">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-session-id"
                aria-label="Permalink for definition: Session ID. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-session-id-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-3" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-4" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-id-5" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage
                    and Persistence</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-key-s"
        aria-label="Links in this document to definition: Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-key-s"
                aria-label="Permalink for definition: Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-key-s-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-key-s-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-key-s-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-key-s-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-s-5" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-key-s-6" title="§ 9.1.4 License Format">§ 9.1.4 License Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-usable-for-decryption"
        aria-label="Links in this document to definition: Usable For Decryption">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-usable-for-decryption"
                aria-label="Permalink for definition: Usable For Decryption. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-usable-for-decryption-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a> <a href="#ref-for-dfn-usable-for-decryption-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-usable-for-decryption-5"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-usable-for-decryption-6"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-usable-for-decryption-7"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-8" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dfn-usable-for-decryption-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-usable-for-decryption-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-usable-for-decryption-11"
                    title="§ 7.5.6 Attempt to Resume Playback If Necessary">§ 7.5.6 Attempt to Resume Playback If
                    Necessary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-decryption-key-id"
        aria-label="Links in this document to definition: Key ID">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-decryption-key-id"
                aria-label="Permalink for definition: Key ID. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-decryption-key-id-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-decryption-key-id-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-decryption-key-id-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-5" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-6" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-decryption-key-id-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-decryption-key-id-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-9" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-10" title="§ 6.3.2 Methods">§ 6.3.2 Methods</a> <a
                    href="#ref-for-dfn-decryption-key-id-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-12" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-13" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-14" title="§ 9.1.3 License Request Format">§ 9.1.3 License
                    Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-15" title="§ 9.1.4 License Format">§ 9.1.4 License Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-16" title="§ 9.1.5 License Release Format">§ 9.1.5 License
                    Release Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-decryption-key-id-17" title="§ 9.1.6 License Release Acknowledgement Format">§
                    9.1.6 License Release Acknowledgement Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-known"
        aria-label="Links in this document to definition: Known Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-known"
                aria-label="Permalink for definition: Known Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-known-1" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a href="#ref-for-dfn-known-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-4" title="§ 6.3.1 Attributes">§ 6.3.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-5" title="§ 6.3.2 Methods">§ 6.3.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-6" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-known-7" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM
                    State Changes</a> <a href="#ref-for-dfn-known-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-license"
        aria-label="Links in this document to definition: License">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-license"
                aria-label="Permalink for definition: License. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-license-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-license-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initialization-data"
        aria-label="Links in this document to definition: Initialization Data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-data"
                aria-label="Permalink for definition: Initialization Data. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-data-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-initialization-data-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-data-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-initialization-data-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-initialization-data-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-initialization-data-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-7" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-initialization-data-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-initialization-data-9" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-initialization-data-10" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-11" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a> <a href="#ref-for-dfn-initialization-data-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-initialization-data-13"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-14" title="§ 7.3.1 Attributes">§ 7.3.1 Attributes</a> <a
                    href="#ref-for-dfn-initialization-data-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-16"
                    title="§ 7.3.2.1 Dictionary MediaEncryptedEventInit Members">§ 7.3.2.1 Dictionary
                    MediaEncryptedEventInit Members</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-17" title="§ 7.4 Event Summary">§ 7.4 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-18" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-19" title="§ 8.8.2 Support Extraction From Media Data">§ 8.8.2
                    Support Extraction From Media Data</a> <a href="#ref-for-dfn-initialization-data-20"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-21" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-22" title="§ 10.1 Input Data Attacks and Vulnerabilities">§
                    10.1 Input Data Attacks and Vulnerabilities</a> <a href="#ref-for-dfn-initialization-data-23"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-24"
                    title="§ 13.2 Selecting a Supported Key System and Using Initialization Data from the &quot;encrypted&quot; Event">§
                    13.2 Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-25" title="§ 13.3 Create MediaKeys Before Loading Media">§
                    13.3 Create MediaKeys Before Loading Media</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initialization-data-type"
        aria-label="Links in this document to definition: Initialization Data Type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-data-type"
                aria-label="Permalink for definition: Initialization Data Type. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-initialization-data-type-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-3" title="§ 3.3 MediaKeySystemConfiguration dictionary">§
                    3.3 MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dfn-initialization-data-type-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-5" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-6" title="§ 7.3.1 Attributes">§ 7.3.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-7"
                    title="§ 7.3.2.1 Dictionary MediaEncryptedEventInit Members">§ 7.3.2.1 Dictionary
                    MediaEncryptedEventInit Members</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-8" title="§ 7.5.2 Initialization Data Encountered">§
                    7.5.2 Initialization Data Encountered</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-9"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-type-10" title="§ 8.8.2 Support Extraction From Media Data">§
                    8.8.2 Support Extraction From Media Data</a> <a href="#ref-for-dfn-initialization-data-type-11"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-associable"
        aria-label="Links in this document to definition: Associable Value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associable"
                aria-label="Permalink for definition: Associable Value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associable-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-2" title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-3" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted
                    Individualization</a> <a href="#ref-for-dfn-associable-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-5" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-6" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-non-associable"
        aria-label="Links in this document to definition: non-associable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-non-associable"
                aria-label="Permalink for definition: non-associable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-non-associable-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-non-associable-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-associable-by-an-entity"
        aria-label="Links in this document to definition: associable by an entity">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associable-by-an-entity"
                aria-label="Permalink for definition: associable by an entity. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associable-by-an-entity-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-associable-by-an-entity-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associable-by-an-entity-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-associable-by-an-entity-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associable-by-an-entity-5" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-non-associable-by-an-entity"
        aria-label="Links in this document to definition: non-associable by an entity">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-non-associable-by-an-entity"
                aria-label="Permalink for definition: non-associable by an entity. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-non-associable-by-an-entity-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-non-associable-by-application"
        aria-label="Links in this document to definition: non-associable by the application">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-non-associable-by-application"
                aria-label="Permalink for definition: non-associable by the application. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-non-associable-by-application-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-3"
                    title="§ 8.4.1 Use Per-Origin Per-Profile Values">§ 8.4.1 Use Per-Origin Per-Profile Values</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-4" title="§ 8.4.2 Allow Values to Be Cleared">§
                    8.4.2 Allow Values to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-5" title="§ 8.5.4 Use Non-Associable Identifiers">§
                    8.5.4 Use Non-Associable Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-6" title="§ 8.5.5 Allow Identifiers to Be Cleared">§
                    8.5.5 Allow Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-7" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-non-associable-by-application-8" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-associable-by-the-application"
        aria-label="Links in this document to definition: associable by the application">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associable-by-the-application"
                aria-label="Permalink for definition: associable by the application. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associable-by-the-application-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-associable-by-the-application-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associable-by-the-application-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-associable-by-the-application-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-distinctive"
        aria-label="Links in this document to definition: Distinctive Value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-distinctive"
                aria-label="Permalink for definition: Distinctive Value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-distinctive-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-distinctive-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-3" title="§ 8.4.1 Use Per-Origin Per-Profile Values">§ 8.4.1 Use
                    Per-Origin Per-Profile Values</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-4" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-5" title="§ 8.5.5 Allow Identifiers to Be Cleared">§ 8.5.5 Allow
                    Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-6" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-permanent-identifier-s"
        aria-label="Links in this document to definition: Permanent Identifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-permanent-identifier-s"
                aria-label="Permalink for definition: Permanent Identifier. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-2" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-3" title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-permanent-identifier-s-4" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-distinctive-permanent-identifier-s"
        aria-label="Links in this document to definition: Distinctive Permanent Identifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-distinctive-permanent-identifier-s"
                aria-label="Permalink for definition: Distinctive Permanent Identifier. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-1" title="§ 2. Definitions">§ 2.
                    Definitions</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-7"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-8"
                    title="Reference 8">(8)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-9"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-10"
                    title="Reference 10">(10)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-11"
                    title="Reference 11">(11)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-12"
                    title="Reference 12">(12)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-13"
                    title="Reference 13">(13)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-14"
                    title="Reference 14">(14)</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-15"
                    title="Reference 15">(15)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-16"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-17" title="§ 3.2.2.4 Get Consent Status">§
                    3.2.2.4 Get Consent Status</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-18" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-19"
                    title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-20" title="§ 8.5 Identifiers">§ 8.5
                    Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-21" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2
                    Encrypt Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-22"
                    title="§ 8.5.3 Use Per-Origin Per-Profile Identifiers">§ 8.5.3 Use Per-Origin Per-Profile
                    Identifiers</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-23"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-24"
                    title="§ 8.5.5 Allow Identifiers to Be Cleared">§ 8.5.5 Allow Identifiers to Be Cleared</a> <a
                    href="#ref-for-dfn-distinctive-permanent-identifier-s-25" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-26" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-27" title="§ 8.6.1 Direct Individualization">§
                    8.6.1 Direct Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-28" title="§ 10.3.1 Potential Attacks">§ 10.3.1
                    Potential Attacks</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-29"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-30" title="§ 11.4.1 Concerns">§ 11.4.1
                    Concerns</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-31"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-permanent-identifier-s-32" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a> <a href="#ref-for-dfn-distinctive-permanent-identifier-s-33"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-distinctive-identifier-s"
        aria-label="Links in this document to definition: Distinctive Identifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-distinctive-identifier-s"
                aria-label="Permalink for definition: Distinctive Identifier. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-5" title="§ 3.2.2.1 Get Supported Configuration">§
                    3.2.2.1 Get Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-6"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dfn-distinctive-identifier-s-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-9" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4 Get
                    Consent Status</a> <a href="#ref-for-dfn-distinctive-identifier-s-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-11"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dfn-distinctive-identifier-s-12" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-13" title="§ 6.6.1 Queue a &quot;message&quot; Event">§
                    6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-14" title="§ 8.3 Persistent Data">§ 8.3 Persistent
                    Data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-15" title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-16" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a> <a href="#ref-for-dfn-distinctive-identifier-s-17" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-18"
                    title="§ 8.5.3 Use Per-Origin Per-Profile Identifiers">§ 8.5.3 Use Per-Origin Per-Profile
                    Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-19" title="§ 8.5.4 Use Non-Associable Identifiers">§
                    8.5.4 Use Non-Associable Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-20" title="§ 8.5.5 Allow Identifiers to Be Cleared">§
                    8.5.5 Allow Identifiers to Be Cleared</a> <a href="#ref-for-dfn-distinctive-identifier-s-21"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-22" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a> <a href="#ref-for-dfn-distinctive-identifier-s-23" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-24" title="§ 8.6.1 Direct Individualization">§ 8.6.1
                    Direct Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-25" title="§ 8.6.2 App-Assisted Individualization">§
                    8.6.2 App-Assisted Individualization</a> <a href="#ref-for-dfn-distinctive-identifier-s-26"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-27" title="§ 10.3.1 Potential Attacks">§ 10.3.1 Potential
                    Attacks</a> <a href="#ref-for-dfn-distinctive-identifier-s-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-29" title="§ 10.5 Cross-Directory Attacks">§ 10.5
                    Cross-Directory Attacks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-30" title="§ 11.3.2 Mitigations">§ 11.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-31" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-33" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-34" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
                <a href="#ref-for-dfn-distinctive-identifier-s-35" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-36" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-37" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-38" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-39" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-40" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-distinctive-identifier-s-41" title="§ 11.6.1 Concerns">§ 11.6.1 Concerns</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-42" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-43" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-distinctive-identifier-s-44" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-use-of-distinctive-identifiers-and-distinctive-permanent-identifiers"
        aria-label="Links in this document to definition: Use of Distinctive Identifiers and Distinctive Permanent Identifiers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-of-distinctive-identifiers-and-distinctive-permanent-identifiers"
                aria-label="Permalink for definition: Use of Distinctive Identifiers and Distinctive Permanent Identifiers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-use-distinctive-identifier-s"
        aria-label="Links in this document to definition: uses Distinctive Identifier(s)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-distinctive-identifier-s"
                aria-label="Permalink for definition: uses Distinctive Identifier(s). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-2"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-3" title="§ 8.5.5 Allow Identifiers to Be Cleared">§
                    8.5.5 Allow Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-4" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-5" title="§ 8.6.2 App-Assisted Individualization">§
                    8.6.2 App-Assisted Individualization</a> <a href="#ref-for-dfn-use-distinctive-identifier-s-6"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-use-distinctive-identifier-s-7"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-use-distinctive-identifier-s-8"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-9" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-use-distinctive-permanent-identifier-s"
        aria-label="Links in this document to definition: uses Distinctive Permanent Identifier(s)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-distinctive-permanent-identifier-s"
                aria-label="Permalink for definition: uses Distinctive Permanent Identifier(s). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-1" title="§ 2. Definitions">§ 2.
                    Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-2"
                    title="§ 8.5.5 Allow Identifiers to Be Cleared">§ 8.5.5 Allow Identifiers to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-3"
                    title="§ 8.6.1 Direct Individualization">§ 8.6.1 Direct Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-permanent-identifier-s-4"
                    title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted Individualization</a> <a
                    href="#ref-for-dfn-use-distinctive-permanent-identifier-s-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
        aria-label="Links in this document to definition: uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s"
                aria-label="Permalink for definition: uses Distinctive Identifier(s) or Distinctive Permanent Identifier(s). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-3"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-4"
                    title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-5"
                    title="§ 8.5 Identifiers">§ 8.5 Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-6"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-7"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-8"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-9"
                    title="§ 8.6 Individualization">§ 8.6 Individualization</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-10"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-11"
                    title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-12"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-13"
                    title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-use-distinctive-identifier-s-or-distinctive-permanent-identifier-s-14"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cross-origin-limitations"
        aria-label="Links in this document to definition: Cross Origin Limitations">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cross-origin-limitations"
                aria-label="Permalink for definition: Cross Origin Limitations. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mixed-content-limitations"
        aria-label="Links in this document to definition: Mixed Content Limitations">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-mixed-content-limitations"
                aria-label="Permalink for definition: Mixed Content Limitations. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-mixed-content-limitations-1" title="§ 7.5.2 Initialization Data Encountered">§
                    7.5.2 Initialization Data Encountered</a> <a href="#ref-for-dfn-mixed-content-limitations-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-time"
        aria-label="Links in this document to definition: Time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-time"
                aria-label="Permalink for definition: Time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-time-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-time-2" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update Expiration</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-expiration"
        aria-label="Links in this document to definition: Expiration Time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-expiration"
                aria-label="Permalink for definition: Expiration Time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-expiration-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-2" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-expiration-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-5" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3 MediaKeyStatusMap
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-6" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update Expiration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-expiration-7" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for
                    CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-browsing-profile"
        aria-label="Links in this document to definition: Browsing Profile">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-browsing-profile"
                aria-label="Permalink for definition: Browsing Profile. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-browsing-profile-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-2" title="§ 5.3 Storage and Persistence">§ 5.3 Storage and
                    Persistence</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-3"
                    title="§ 8.3.1 Use origin-specific and browsing profile-specific Key System storage">§ 8.3.1 Use
                    origin-specific and browsing profile-specific Key System storage</a> <a
                    href="#ref-for-dfn-browsing-profile-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-5" title="§ 8.3.2 Allow Persistent Data to Be Cleared">§ 8.3.2
                    Allow Persistent Data to Be Cleared</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-6" title="§ 8.4.1 Use Per-Origin Per-Profile Values">§ 8.4.1 Use
                    Per-Origin Per-Profile Values</a> <a href="#ref-for-dfn-browsing-profile-7"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-8" title="§ 8.5.3 Use Per-Origin Per-Profile Identifiers">§ 8.5.3
                    Use Per-Origin Per-Profile Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-9" title="§ 8.5.4 Use Non-Associable Identifiers">§ 8.5.4 Use
                    Non-Associable Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-10" title="§ 10.3.2 Mitigations">§ 10.3.2 Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-11" title="§ 11.3.1 Concerns">§ 11.3.1 Concerns</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-12" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a> <a
                    href="#ref-for-dfn-browsing-profile-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-14" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a> <a
                    href="#ref-for-dfn-browsing-profile-15" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-browsing-profile-16" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-browsing-profile-17" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-browsing-profile-18" title="§ 11.5.1 Concerns">§ 11.5.1 Concerns</a> <a
                    href="#ref-for-dfn-browsing-profile-19" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-browsing-profile-20" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-encrypted-media"
        aria-label="Links in this document to definition: encrypted-media">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-encrypted-media"
                aria-label="Permalink for definition: encrypted-media. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-encrypted-media-1" title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-media-2" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigator"
        aria-label="Links in this document to definition: Navigator">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator"
                aria-label="Permalink for definition: Navigator. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigator-1" title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§
                    3.2 Navigator Extension: requestMediaKeySystemAccess()</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-navigator-requestmediakeysystemaccess"
        aria-label="Links in this document to definition: requestMediaKeySystemAccess()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator-requestmediakeysystemaccess"
                aria-label="Permalink for definition: requestMediaKeySystemAccess(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-571417346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-1"
                    title="§ 3.1 Permissions Policy Integration">§ 3.1 Permissions Policy Integration</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-2"
                    title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§ 3.2 Navigator Extension:
                    requestMediaKeySystemAccess()</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-3"
                    title="§ 3.2.2.1 Get Supported Configuration">§ 3.2.2.1 Get Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-4"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-7"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-8"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-9"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-10" title="§ 4.2 Methods">§ 4.2 Methods</a>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-12"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-13"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-14" title="§ 11.4.2 Mitigations">§ 11.4.2
                    Mitigations</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-requestmediakeysystemaccess-15"
                    title="§ 13.2 Selecting a Supported Key System and Using Initialization Data from the &quot;encrypted&quot; Event">§
                    13.2 Selecting a Supported Key System and Using Initialization Data from the "encrypted" Event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-get-supported-configuration"
        aria-label="Links in this document to definition: Get Supported Configuration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-supported-configuration"
                aria-label="Permalink for definition: Get Supported Configuration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-supported-configuration-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-get-supported-configuration-and-consent"
        aria-label="Links in this document to definition: Get Supported Configuration and Consent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-supported-configuration-and-consent"
                aria-label="Permalink for definition: Get Supported Configuration and Consent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-supported-configuration-and-consent-1"
                    title="§ 3.2.2.1 Get Supported Configuration">§ 3.2.2.1 Get Supported Configuration</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-get-supported-capabilities-for-audio-video-type"
        aria-label="Links in this document to definition: Get Supported Capabilities for Audio/Video Type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-supported-capabilities-for-audio-video-type"
                aria-label="Permalink for definition: Get Supported Capabilities for Audio/Video Type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-supported-capabilities-for-audio-video-type-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dfn-get-supported-capabilities-for-audio-video-type-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-get-consent-status"
        aria-label="Links in this document to definition: Get Consent Status">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-get-consent-status"
                aria-label="Permalink for definition: Get Consent Status. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-get-consent-status-1" title="§ 3.2.2.2 Get Supported Configuration and Consent">§
                    3.2.2.2 Get Supported Configuration and Consent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysystemconfiguration"
        aria-label="Links in this document to definition: MediaKeySystemConfiguration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration"
                aria-label="Permalink for definition: MediaKeySystemConfiguration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-1"
                    title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§ 3.2 Navigator Extension:
                    requestMediaKeySystemAccess()</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-2" title="§ 3.2.2.1 Get Supported Configuration">§
                    3.2.2.1 Get Supported Configuration</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-3"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-5"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-6"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-9" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-10" title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-11"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-12" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysrequirement"
        aria-label="Links in this document to definition: MediaKeysRequirement">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement"
                aria-label="Permalink for definition: MediaKeysRequirement. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-1" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysrequirement-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysrequirement-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysrequirement-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeysrequirement-6"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-7" title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysrequirement-required"
        aria-label="Links in this document to definition: required">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement-required"
                aria-label="Permalink for definition: required. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-4"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysrequirement-required-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-8" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-9" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-10" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-11" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4
                    Get Consent Status</a> <a href="#ref-for-dom-mediakeysrequirement-required-12"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-13"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-required-14" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-15" title="§ 4.2 Methods">§ 4.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysrequirement-required-16" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-17" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-18" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-19" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a> <a href="#ref-for-dom-mediakeysrequirement-required-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-required-21" title="§ 11.7 Private Browsing Modes">§ 11.7
                    Private Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysrequirement-optional"
        aria-label="Links in this document to definition: optional">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement-optional"
                aria-label="Permalink for definition: optional. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysrequirement-optional-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-optional-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-8" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4
                    Get Consent Status</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-9"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-optional-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-optional-11" title="§ 4.2 Methods">§ 4.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysrequirement-not-allowed"
        aria-label="Links in this document to definition: not-allowed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysrequirement-not-allowed"
                aria-label="Permalink for definition: not-allowed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1197737164">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysrequirement-not-allowed-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-8" title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4
                    Get Consent Status</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-9"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-10"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-11"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysrequirement-not-allowed-13"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysrequirement-not-allowed-14"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-label"
        aria-label="Links in this document to definition: label">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-label"
                aria-label="Permalink for definition: label. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-label-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-label-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-label-3"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-initdatatypes"
        aria-label="Links in this document to definition: initDataTypes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-initdatatypes"
                aria-label="Permalink for definition: initDataTypes. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-4"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-initdatatypes-5"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-audiocapabilities"
        aria-label="Links in this document to definition: audioCapabilities">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-audiocapabilities"
                aria-label="Permalink for definition: audioCapabilities. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-5"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-6"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-7"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-audiocapabilities-8"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-videocapabilities"
        aria-label="Links in this document to definition: videoCapabilities">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-videocapabilities"
                aria-label="Permalink for definition: videoCapabilities. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-5"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-6"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-7"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-8"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-videocapabilities-9"
                    title="§ 8.8.1 Licenses Generated are Independent of Content Type">§ 8.8.1 Licenses Generated are
                    Independent of Content Type</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-distinctiveidentifier"
        aria-label="Links in this document to definition: distinctiveIdentifier">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-distinctiveidentifier"
                aria-label="Permalink for definition: distinctiveIdentifier. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-1" title="§ 2. Definitions">§ 2.
                    Definitions</a> <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-2"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-3" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-4" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-5" title="Reference 5">(5)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-7"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-8"
                    title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-9" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-10" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-11" title="Reference 5">(5)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-12" title="Reference 6">(6)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-13" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-14"
                    title="§ 3.2.2.4 Get Consent Status">§ 3.2.2.4 Get Consent Status</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-15" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-16" title="Reference 3">(3)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-17" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-18" title="Reference 5">(5)</a>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-19" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-20"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-21"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-22" title="§ 4.2 Methods">§ 4.2
                    Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-23"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-24"
                    title="§ 8.6 Individualization">§ 8.6 Individualization</a> <a
                    href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-25" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-26"
                    title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-distinctiveidentifier-27"
                    title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-persistentstate"
        aria-label="Links in this document to definition: persistentState">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-persistentstate"
                aria-label="Permalink for definition: persistentState. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-7"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-8"
                    title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-9"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-10" title="§ 4.2 Methods">§ 4.2
                    Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-11" title="§ 5. MediaKeys Interface">§
                    5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-12" title="§ 9.1.1 Capabilities">§
                    9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-persistentstate-13"
                    title="§ 11.7 Private Browsing Modes">§ 11.7 Private Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemconfiguration-sessiontypes"
        aria-label="Links in this document to definition: sessionTypes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemconfiguration-sessiontypes"
                aria-label="Permalink for definition: sessionTypes. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-798704963">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-4"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemconfiguration-sessiontypes-5" title="§ 4.2 Methods">§ 4.2
                    Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability"
        aria-label="Links in this document to definition: MediaKeySystemMediaCapability">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability"
                aria-label="Permalink for definition: MediaKeySystemMediaCapability. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-1"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a> <a href="#ref-for-dom-mediakeysystemmediacapability-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemmediacapability-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemmediacapability-4"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-5"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemmediacapability-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemmediacapability-7" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysystemmediacapability-8" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-9"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-10"
                    title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§ 3.4.1 Dictionary
                    MediaKeySystemMediaCapability Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability-contenttype"
        aria-label="Links in this document to definition: contentType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability-contenttype"
                aria-label="Permalink for definition: contentType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-contenttype-1"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-contenttype-2"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemmediacapability-contenttype-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability-encryptionscheme"
        aria-label="Links in this document to definition: encryptionScheme">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability-encryptionscheme"
                aria-label="Permalink for definition: encryptionScheme. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-1"
                    title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-2"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-3"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-4" title="§ 4.2 Methods">§ 4.2
                    Methods</a> <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-encryptionscheme-6" title="§ 9.1.1 Capabilities">§
                    9.1.1 Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-scheme-cenc"
        aria-label="Links in this document to definition: cenc">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#scheme-cenc"
                aria-label="Permalink for definition: cenc. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-scheme-cenc-1" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-scheme-cbcs"
        aria-label="Links in this document to definition: cbcs">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#scheme-cbcs"
                aria-label="Permalink for definition: cbcs. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-scheme-cbcs-1" title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§
                    3.4.1 Dictionary MediaKeySystemMediaCapability Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cbcs-1-9"
        aria-label="Links in this document to definition: cbcs-1-9">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cbcs-1-9"
                aria-label="Permalink for definition: cbcs-1-9. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemmediacapability-robustness"
        aria-label="Links in this document to definition: robustness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemmediacapability-robustness"
                aria-label="Permalink for definition: robustness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1151374081">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-1"
                    title="§ 3.2.2.3 Get Supported Capabilities for Audio/Video Type">§ 3.2.2.3 Get Supported
                    Capabilities for Audio/Video Type</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-2"
                    title="§ 3.4 MediaKeySystemMediaCapability dictionary">§ 3.4 MediaKeySystemMediaCapability
                    dictionary</a> <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemmediacapability-robustness-4" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysystemaccess"
        aria-label="Links in this document to definition: MediaKeySystemAccess">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess"
                aria-label="Permalink for definition: MediaKeySystemAccess. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-4"
                    title="§ 3.2 Navigator Extension: requestMediaKeySystemAccess()">§ 3.2 Navigator Extension:
                    requestMediaKeySystemAccess()</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-5" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysystemaccess-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-8" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a> <a href="#ref-for-dom-mediakeysystemaccess-9"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysystemaccess-10"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeysystemaccess-11"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-12"
                    title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§ 3.4.1 Dictionary
                    MediaKeySystemMediaCapability Members</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-13" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a> <a href="#ref-for-dom-mediakeysystemaccess-14"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-15" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-16" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-17" title="§ 11.7 Private Browsing Modes">§ 11.7 Private
                    Browsing Modes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemaccess-keysystem"
        aria-label="Links in this document to definition: keySystem">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess-keysystem"
                aria-label="Permalink for definition: keySystem. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-keysystem-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-keysystem-2" title="§ 4. MediaKeySystemAccess Interface">§ 4.
                    MediaKeySystemAccess Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemaccess-getconfiguration"
        aria-label="Links in this document to definition: getConfiguration()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess-getconfiguration"
                aria-label="Permalink for definition: getConfiguration(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-getconfiguration-1"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-getconfiguration-2"
                    title="§ 4. MediaKeySystemAccess Interface">§ 4. MediaKeySystemAccess Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysystemaccess-createmediakeys"
        aria-label="Links in this document to definition: createMediaKeys()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysystemaccess-createmediakeys"
                aria-label="Permalink for definition: createMediaKeys(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1780138428">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysystemaccess-createmediakeys-1"
                    title="§ 4. MediaKeySystemAccess Interface">§ 4. MediaKeySystemAccess Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeys"
        aria-label="Links in this document to definition: MediaKeys">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys"
                aria-label="Permalink for definition: MediaKeys. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeys-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeys-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeys-5" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeys-6"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-7" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-8" title="§ 3.4.1 Dictionary MediaKeySystemMediaCapability Members">§
                    3.4.1 Dictionary MediaKeySystemMediaCapability Members</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-9" title="§ 4. MediaKeySystemAccess Interface">§ 4. MediaKeySystemAccess
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-10" title="§ 4.2 Methods">§ 4.2 Methods</a> <a
                    href="#ref-for-dom-mediakeys-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-12" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a> <a
                    href="#ref-for-dom-mediakeys-13" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-14"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-15" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-16" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-17" title="§ 5.3 Storage and Persistence">§ 5.3 Storage and
                    Persistence</a> <a href="#ref-for-dom-mediakeys-18" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-19" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dom-mediakeys-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeys-21" title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeys-22"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-23" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-24" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a> <a
                    href="#ref-for-dom-mediakeys-25" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-26"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-27" title="§ 7. HTMLMediaElement Extensions">§ 7. HTMLMediaElement
                    Extensions</a> <a href="#ref-for-dom-mediakeys-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-29" title="§ 7.1 Attributes">§ 7.1 Attributes</a> <a
                    href="#ref-for-dom-mediakeys-30" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-31" title="§ 7.2 Methods">§ 7.2 Methods</a> <a
                    href="#ref-for-dom-mediakeys-32" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-33" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1
                    Media Data May Contain Encrypted Blocks</a> <a href="#ref-for-dom-mediakeys-34"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-35" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeys-36" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-37" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-38" title="§ 8.3 Persistent Data">§ 8.3 Persistent Data</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-39" title="§ 8.6 Individualization">§ 8.6 Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-40" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-41" title="§ 11.3.2 Mitigations">§ 11.3.2 Mitigations</a> <a
                    href="#ref-for-dom-mediakeys-42" title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeys-43"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-mediakeys-44" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeys-45" title="Reference 5">(5)</a> <a href="#ref-for-dom-mediakeys-46"
                    title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-47" title="§ 13.3 Create MediaKeys Before Loading Media">§ 13.3 Create
                    MediaKeys Before Loading Media</a> <a href="#ref-for-dom-mediakeys-48" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysessiontype"
        aria-label="Links in this document to definition: MediaKeySessionType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessiontype"
                aria-label="Permalink for definition: MediaKeySessionType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2083600463">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-1" title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3
                    MediaKeySystemConfiguration dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a> <a href="#ref-for-dom-mediakeysessiontype-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-4" title="§ 5.2.1 Is persistent session type?">§ 5.2.1 Is
                    persistent session type?</a> <a href="#ref-for-dom-mediakeysessiontype-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-6" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-7" title="§ 9.1.3 License Request Format">§ 9.1.3 License
                    Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-8" title="§ 9.1.4 License Format">§ 9.1.4 License Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessiontype-temporary"
        aria-label="Links in this document to definition: temporary">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessiontype-temporary"
                aria-label="Permalink for definition: temporary. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2083600463">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-1"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-2"
                    title="§ 3.3 MediaKeySystemConfiguration dictionary">§ 3.3 MediaKeySystemConfiguration
                    dictionary</a> <a href="#ref-for-dom-mediakeysessiontype-temporary-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-5" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-6" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-7" title="§ 5.2.1 Is persistent session type?">§
                    5.2.1 Is persistent session type?</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-8" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-temporary-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-11" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-12"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-13" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-temporary-14" title="§ 9.1.4 License Format">§ 9.1.4 License
                    Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessiontype-persistent-license"
        aria-label="Links in this document to definition: persistent-license">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessiontype-persistent-license"
                aria-label="Permalink for definition: persistent-license. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2083600463">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-1" title="§ 5. MediaKeys Interface">§ 5.
                    MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-2"
                    title="§ 5.2.1 Is persistent session type?">§ 5.2.1 Is persistent session type?</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-3" title="§ 6.2 Methods">§ 6.2 Methods</a>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-persistent-license-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysessiontype-persistent-license-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-7"
                    title="§ 8.5.1 Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers">§ 8.5.1
                    Limit or Avoid use of Distinctive Identifiers and Permanent Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-8" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-9" title="§ 9.1.2 Behavior">§ 9.1.2
                    Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-10"
                    title="§ 9.1.5 License Release Format">§ 9.1.5 License Release Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessiontype-persistent-license-11"
                    title="§ 9.1.5.1 Example message reflecting a record of license destruction">§ 9.1.5.1 Example
                    message reflecting a record of license destruction</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-record-s-of-license-destruction"
        aria-label="Links in this document to definition: record of license destruction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-record-s-of-license-destruction"
                aria-label="Permalink for definition: record of license destruction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a> <a href="#ref-for-dfn-record-s-of-license-destruction-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-4" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-record-s-of-license-destruction-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-record-s-of-license-destruction-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-8" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-9" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-10"
                    title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage and Persistence</a> <a
                    href="#ref-for-dfn-record-s-of-license-destruction-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-12" title="§ 8.3 Persistent Data">§ 8.3 Persistent
                    Data</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-13"
                    title="§ 9.1.5.1 Example message reflecting a record of license destruction">§ 9.1.5.1 Example
                    message reflecting a record of license destruction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-record-s-of-license-destruction-14" title="§ 11.4.1 Concerns">§ 11.4.1
                    Concerns</a> <a href="#ref-for-dfn-record-s-of-license-destruction-15" title="Reference 2">(2)</a>
                <a href="#ref-for-dfn-record-s-of-license-destruction-16" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeys-createsession"
        aria-label="Links in this document to definition: createSession()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys-createsession"
                aria-label="Permalink for definition: createSession(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-createsession-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeys-getstatusforpolicy"
        aria-label="Links in this document to definition: getStatusForPolicy()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys-getstatusforpolicy"
                aria-label="Permalink for definition: getStatusForPolicy(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-getstatusforpolicy-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-getstatusforpolicy-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-getstatusforpolicy-3" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeyspolicy"
        aria-label="Links in this document to definition: MediaKeysPolicy">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeyspolicy"
                aria-label="Permalink for definition: MediaKeysPolicy. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeyspolicy-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeyspolicy-2" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeyspolicy-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeyspolicy-4" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeyspolicy-minhdcpversion"
        aria-label="Links in this document to definition: minHdcpVersion">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeyspolicy-minhdcpversion"
                aria-label="Permalink for definition: minHdcpVersion. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeyspolicy-minhdcpversion-1" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeyspolicy-minhdcpversion-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeys-setservercertificate"
        aria-label="Links in this document to definition: setServerCertificate()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeys-setservercertificate"
                aria-label="Permalink for definition: setServerCertificate(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-742597615">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeys-setservercertificate-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeys-setservercertificate-2" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-is-persistent-session-type"
        aria-label="Links in this document to definition: Is persistent session type?">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-is-persistent-session-type"
                aria-label="Permalink for definition: Is persistent session type?. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-2"
                    title="§ 3.2.2.2 Get Supported Configuration and Consent">§ 3.2.2.2 Get Supported Configuration and
                    Consent</a> <a href="#ref-for-dfn-is-persistent-session-type-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-4" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-is-persistent-session-type-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-persistent-session-type-7" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a> <a href="#ref-for-dfn-is-persistent-session-type-8"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-is-persistent-session-type-9"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-cdm-unavailable"
        aria-label="Links in this document to definition: CDM Unavailable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-cdm-unavailable"
                aria-label="Permalink for definition: CDM Unavailable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-cdm-unavailable-1" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a> <a href="#ref-for-dfn-cdm-unavailable-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-cdm-unavailable-3" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dfn-cdm-unavailable-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-storage-and-persistence"
        aria-label="Links in this document to definition: Storage and Persistence">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-storage-and-persistence"
                aria-label="Permalink for definition: Storage and Persistence. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-storage-and-persistence-1" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession"
        aria-label="Links in this document to definition: MediaKeySession">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession"
                aria-label="Permalink for definition: MediaKeySession. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysession-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-4" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-5" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-7" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-8" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-9" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a> <a
                    href="#ref-for-dom-mediakeysession-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-11" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dom-mediakeysession-12" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-13" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-14" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysession-15" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-mediakeysession-16" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-mediakeysession-17" title="Reference 7">(7)</a> <a
                    href="#ref-for-dom-mediakeysession-18" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-19" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-21" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-22" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysession-23" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-24" title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1
                    Queue a "message" Event</a> <a href="#ref-for-dom-mediakeysession-25" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-26" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-27" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-28" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a> <a href="#ref-for-dom-mediakeysession-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-30" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-31" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update
                    Expiration</a> <a href="#ref-for-dom-mediakeysession-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-33" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-34" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a> <a
                    href="#ref-for-dom-mediakeysession-35" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-36" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-37" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-38" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-39" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session
                    Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-40" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-41" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dom-mediakeysession-42" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-43" title="§ 8.7 Support Multiple Keys">§ 8.7 Support Multiple
                    Keys</a> <a href="#ref-for-dom-mediakeysession-44" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-45" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-closed"
        aria-label="Links in this document to definition: closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-closed"
                aria-label="Permalink for definition: closed. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-closed-1" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-2" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a> <a href="#ref-for-dfn-closed-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-closed-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-5" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-6" title="§ 6.2 Methods">§ 6.2 Methods</a> <a href="#ref-for-dfn-closed-7"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-8" title="§ 6.8 Session Storage and Persistence">§ 6.8 Session Storage and
                    Persistence</a> <a href="#ref-for-dfn-closed-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-closed-10" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysessionclosedreason"
        aria-label="Links in this document to definition: MediaKeySessionClosedReason">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason"
                aria-label="Permalink for definition: MediaKeySessionClosedReason. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-2" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM
                    Unavailable</a> <a href="#ref-for-dom-mediakeysessionclosedreason-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-4" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dom-mediakeysessionclosedreason-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-7" title="§ 6.6.4 Session Closed">§ 6.6.4 Session
                    Closed</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-8" title="§ 6.6.5 Monitor for CDM State Changes">§
                    6.6.5 Monitor for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-internal-error"
        aria-label="Links in this document to definition: internal-error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-internal-error"
                aria-label="Permalink for definition: internal-error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-2"
                    title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-3" title="§ 7.5.4 Attempt to Decrypt">§
                    7.5.4 Attempt to Decrypt</a> <a href="#ref-for-dom-mediakeysessionclosedreason-internal-error-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-closed-by-application"
        aria-label="Links in this document to definition: closed-by-application">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-closed-by-application"
                aria-label="Permalink for definition: closed-by-application. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-closed-by-application-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-closed-by-application-2" title="§ 6.2 Methods">§ 6.2
                    Methods</a> <a href="#ref-for-dom-mediakeysessionclosedreason-closed-by-application-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-release-acknowledged"
        aria-label="Links in this document to definition: release-acknowledged">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-release-acknowledged"
                aria-label="Permalink for definition: release-acknowledged. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-release-acknowledged-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-release-acknowledged-2" title="§ 6.2 Methods">§ 6.2
                    Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-hardware-context-reset"
        aria-label="Links in this document to definition: hardware-context-reset">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-hardware-context-reset"
                aria-label="Permalink for definition: hardware-context-reset. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-2"
                    title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-3"
                    title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a> <a
                    href="#ref-for-dom-mediakeysessionclosedreason-hardware-context-reset-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysessionclosedreason-resource-evicted"
        aria-label="Links in this document to definition: resource-evicted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysessionclosedreason-resource-evicted"
                aria-label="Permalink for definition: resource-evicted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-103604943">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysessionclosedreason-resource-evicted-1"
                    title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-sessionid"
        aria-label="Links in this document to definition: sessionId">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-sessionid"
                aria-label="Permalink for definition: sessionId. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-mediakeysession-sessionid-7" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-sessionid-8" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-expiration"
        aria-label="Links in this document to definition: expiration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-expiration"
                aria-label="Permalink for definition: expiration. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-4" title="§ 6.6.3 Update Expiration">§ 6.6.3 Update
                    Expiration</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-expiration-5" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-closed"
        aria-label="Links in this document to definition: closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-closed"
                aria-label="Permalink for definition: closed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dom-mediakeysession-closed-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-4" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-closed-5" title="§ 6.6.4 Session Closed">§ 6.6.4 Session
                    Closed</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-keystatuses"
        aria-label="Links in this document to definition: keyStatuses">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-keystatuses"
                aria-label="Permalink for definition: keyStatuses. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-3" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update
                    Key Statuses</a> <a href="#ref-for-dom-mediakeysession-keystatuses-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-keystatuses-5" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a> <a
                    href="#ref-for-dom-mediakeysession-keystatuses-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysession-onkeystatuseschange"
        aria-label="Links in this document to definition: onkeystatuseschange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-onkeystatuseschange"
                aria-label="Permalink for definition: onkeystatuseschange. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-onkeystatuseschange-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-onmessage"
        aria-label="Links in this document to definition: onmessage">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-onmessage"
                aria-label="Permalink for definition: onmessage. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-onmessage-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeysession-generaterequest"
        aria-label="Links in this document to definition: generateRequest()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-generaterequest"
                aria-label="Permalink for definition: generateRequest(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-1" title="§ 2. Definitions">§ 2. Definitions</a>
                <a href="#ref-for-dom-mediakeysession-generaterequest-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-3" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-4" title="§ 6.8 Session Storage and Persistence">§
                    6.8 Session Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-generaterequest-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-6" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-generaterequest-7"
                    title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input Data Attacks and
                    Vulnerabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-load"
        aria-label="Links in this document to definition: load()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-load"
                aria-label="Permalink for definition: load(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-3" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-4" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-load-5" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-load-6"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-update"
        aria-label="Links in this document to definition: update()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-update"
                aria-label="Permalink for definition: update(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dom-mediakeysession-update-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-3" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a> <a href="#ref-for-dom-mediakeysession-update-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-5" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a> <a
                    href="#ref-for-dom-mediakeysession-update-7" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-8" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeysession-update-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-10" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5
                    Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-11" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a> <a href="#ref-for-dom-mediakeysession-update-12"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-13" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-14" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a> <a
                    href="#ref-for-dom-mediakeysession-update-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-16" title="§ 9.1.4 License Format">§ 9.1.4 License
                    Format</a> <a href="#ref-for-dom-mediakeysession-update-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeysession-update-18" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-19"
                    title="§ 9.1.6 License Release Acknowledgement Format">§ 9.1.6 License Release Acknowledgement
                    Format</a> <a href="#ref-for-dom-mediakeysession-update-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-21" title="§ 10.1 Input Data Attacks and Vulnerabilities">§
                    10.1 Input Data Attacks and Vulnerabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-22" title="§ 11.8 Secure Origin and Transport">§ 11.8
                    Secure Origin and Transport</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-update-23" title="§ 13.4 Using All Events">§ 13.4 Using All
                    Events</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-close"
        aria-label="Links in this document to definition: close()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-close"
                aria-label="Permalink for definition: close(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-close-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dom-mediakeysession-close-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-mediakeysession-close-3"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeysession-remove"
        aria-label="Links in this document to definition: remove()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeysession-remove"
                aria-label="Permalink for definition: remove(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-782043315">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-2" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-3" title="§ 6.8 Session Storage and Persistence">§ 6.8
                    Session Storage and Persistence</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeysession-remove-4" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a> <a
                    href="#ref-for-dom-mediakeysession-remove-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap"
        aria-label="Links in this document to definition: MediaKeyStatusMap">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap"
                aria-label="Permalink for definition: MediaKeyStatusMap. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-2" title="§ 6. MediaKeySession Interface">§ 6. MediaKeySession
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-3" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-4" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatusmap-5"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap-size"
        aria-label="Links in this document to definition: size">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap-size"
                aria-label="Permalink for definition: size. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-size-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-size-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap-has"
        aria-label="Links in this document to definition: has()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap-has"
                aria-label="Permalink for definition: has(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-has-1" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatusmap-get"
        aria-label="Links in this document to definition: get()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatusmap-get"
                aria-label="Permalink for definition: get(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-366396555">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatusmap-get-1" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus"
        aria-label="Links in this document to definition: MediaKeyStatus">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus"
                aria-label="Permalink for definition: MediaKeyStatus. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-1" title="§ Status of This Document">§ Status of This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-2" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-3" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeystatus-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-6" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-7" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeystatus-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-10" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatus-11" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-mediakeystatus-14" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-12" title="§ 6.3.2 Methods">§ 6.3.2 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-15" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a> <a href="#ref-for-dom-mediakeystatus-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeystatus-17" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-18" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-19" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus-usable"
        aria-label="Links in this document to definition: usable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-usable"
                aria-label="Permalink for definition: usable. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-1" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-usable-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-4" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-5" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus-expired"
        aria-label="Links in this document to definition: expired">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-expired"
                aria-label="Permalink for definition: expired. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-expired-1" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-expired-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeystatus-released"
        aria-label="Links in this document to definition: released">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-released"
                aria-label="Permalink for definition: released. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-released-1" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-released-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-output-restricted"
        aria-label="Links in this document to definition: output-restricted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-output-restricted"
                aria-label="Permalink for definition: output-restricted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-output-restricted-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-output-restricted-2" title="§ 6.3 MediaKeyStatusMap Interface">§
                    6.3 MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatus-output-restricted-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-output-downscaled"
        aria-label="Links in this document to definition: output-downscaled">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-output-downscaled"
                aria-label="Permalink for definition: output-downscaled. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-output-downscaled-1" title="§ 6.3 MediaKeyStatusMap Interface">§
                    6.3 MediaKeyStatusMap Interface</a> <a href="#ref-for-dom-mediakeystatus-output-downscaled-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-usable-in-future"
        aria-label="Links in this document to definition: usable-in-future">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-usable-in-future"
                aria-label="Permalink for definition: usable-in-future. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-in-future-1" title="§ Status of This Document">§ Status of
                    This Document</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-usable-in-future-2" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-status-pending"
        aria-label="Links in this document to definition: status-pending">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-status-pending"
                aria-label="Permalink for definition: status-pending. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-status-pending-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeystatus-status-pending-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeystatus-status-pending-3" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeystatus-internal-error"
        aria-label="Links in this document to definition: internal-error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeystatus-internal-error"
                aria-label="Permalink for definition: internal-error. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-418631828">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeystatus-internal-error-1" title="§ 6.3 MediaKeyStatusMap Interface">§ 6.3
                    MediaKeyStatusMap Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessagetype"
        aria-label="Links in this document to definition: MediaKeyMessageType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype"
                aria-label="Permalink for definition: MediaKeyMessageType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeymessagetype-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-3" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a> <a href="#ref-for-dom-mediakeymessagetype-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-5" title="§ 6.4.1 Attributes">§ 6.4.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-6" title="§ 6.4.2 MediaKeyMessageEventInit">§ 6.4.2
                    MediaKeyMessageEventInit</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-7"
                    title="§ 6.4.2.1 Dictionary MediaKeyMessageEventInit Members">§ 6.4.2.1 Dictionary
                    MediaKeyMessageEventInit Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-license-request"
        aria-label="Links in this document to definition: license-request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-license-request"
                aria-label="Permalink for definition: license-request. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-request-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dom-mediakeymessagetype-license-request-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-mediakeymessagetype-license-request-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-request-4" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-license-renewal"
        aria-label="Links in this document to definition: license-renewal">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-license-renewal"
                aria-label="Permalink for definition: license-renewal. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-renewal-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-license-release"
        aria-label="Links in this document to definition: license-release">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-license-release"
                aria-label="Permalink for definition: license-release. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-release-1" title="§ 5. MediaKeys Interface">§ 5.
                    MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-release-2" title="§ 6.2 Methods">§ 6.2 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-license-release-3" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessagetype-individualization-request"
        aria-label="Links in this document to definition: individualization-request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessagetype-individualization-request"
                aria-label="Permalink for definition: individualization-request. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1754914033">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-individualization-request-1" title="§ 6.2 Methods">§ 6.2
                    Methods</a> <a href="#ref-for-dom-mediakeymessagetype-individualization-request-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-individualization-request-3"
                    title="§ 6.4 MediaKeyMessageEvent">§ 6.4 MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessagetype-individualization-request-4"
                    title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted Individualization</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessageevent"
        aria-label="Links in this document to definition: MediaKeyMessageEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent"
                aria-label="Permalink for definition: MediaKeyMessageEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-2" title="§ 6.5 Event Summary">§ 6.5 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-3" title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1
                    Queue a "message" Event</a> <a href="#ref-for-dom-mediakeymessageevent-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-5" title="§ 9.1.3 License Request Format">§ 9.1.3 License
                    Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-6" title="§ 9.1.5 License Release Format">§ 9.1.5 License
                    Release Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageevent-messagetype"
        aria-label="Links in this document to definition: messageType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent-messagetype"
                aria-label="Permalink for definition: messageType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1595553803">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-messagetype-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-messagetype-2"
                    title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-messagetype-3"
                    title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input Data Attacks and
                    Vulnerabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessageevent-message"
        aria-label="Links in this document to definition: message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageevent-message"
                aria-label="Permalink for definition: message. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1595553803">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-2"
                    title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-3" title="§ 9.1.3 License Request Format">§ 9.1.3
                    License Request Format</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageevent-message-4" title="§ 9.1.5 License Release Format">§ 9.1.5
                    License Release Format</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediakeymessageeventinit"
        aria-label="Links in this document to definition: MediaKeyMessageEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageeventinit"
                aria-label="Permalink for definition: MediaKeyMessageEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-726369050">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-2" title="§ 6.4.2 MediaKeyMessageEventInit">§ 6.4.2
                    MediaKeyMessageEventInit</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-3"
                    title="§ 6.4.2.1 Dictionary MediaKeyMessageEventInit Members">§ 6.4.2.1 Dictionary
                    MediaKeyMessageEventInit Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageeventinit-messagetype"
        aria-label="Links in this document to definition: messageType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageeventinit-messagetype"
                aria-label="Permalink for definition: messageType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-726369050">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-messagetype-1" title="§ 6.4.2 MediaKeyMessageEventInit">§
                    6.4.2 MediaKeyMessageEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediakeymessageeventinit-message"
        aria-label="Links in this document to definition: message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediakeymessageeventinit-message"
                aria-label="Permalink for definition: message. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-726369050">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediakeymessageeventinit-message-1" title="§ 6.4.2 MediaKeyMessageEventInit">§
                    6.4.2 MediaKeyMessageEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-keystatuseschange"
        aria-label="Links in this document to definition: keystatuseschange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-keystatuseschange"
                aria-label="Permalink for definition: keystatuseschange. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-keystatuseschange-1" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-keystatuseschange-2" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update Key
                    Statuses</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-message"
        aria-label="Links in this document to definition: message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-message"
                aria-label="Permalink for definition: message. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-message-1" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-2" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-message-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-5" title="§ 6.4 MediaKeyMessageEvent">§ 6.4 MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-6" title="§ 6.6.1 Queue a &quot;message&quot; Event">§ 6.6.1 Queue a
                    "message" Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-7" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt Identifiers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-8" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2 App-Assisted
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-9" title="§ 9.1.3 License Request Format">§ 9.1.3 License Request
                    Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-10" title="§ 9.1.5 License Release Format">§ 9.1.5 License Release
                    Format</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-11" title="§ 10.1 Input Data Attacks and Vulnerabilities">§ 10.1 Input
                    Data Attacks and Vulnerabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-message-12" title="§ 11.8 Secure Origin and Transport">§ 11.8 Secure Origin and
                    Transport</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-queue-a-message-event"
        aria-label="Links in this document to definition: Queue a &quot;message&quot; Event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-queue-a-message-event"
                aria-label="Permalink for definition: Queue a &quot;message&quot; Event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-queue-a-message-event-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-queue-a-message-event-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-queue-a-message-event-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-queue-a-message-event-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-queue-a-message-event-5" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-queue-a-message-event-6" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5
                    Monitor for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-key-statuses"
        aria-label="Links in this document to definition: Update Key Statuses">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-key-statuses"
                aria-label="Permalink for definition: Update Key Statuses. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-update-key-statuses-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-update-key-statuses-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-update-key-statuses-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-update-key-statuses-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-6" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-7" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5
                    Monitor for CDM State Changes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-key-statuses-8" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-expiration"
        aria-label="Links in this document to definition: Update Expiration">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-expiration"
                aria-label="Permalink for definition: Update Expiration. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-expiration-1" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-update-expiration-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-update-expiration-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-expiration-4" title="§ 6.6.4 Session Closed">§ 6.6.4 Session Closed</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-expiration-5" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-session-closed"
        aria-label="Links in this document to definition: Session Closed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-session-closed"
                aria-label="Permalink for definition: Session Closed. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-session-closed-1" title="§ 5.2.2 CDM Unavailable">§ 5.2.2 CDM Unavailable</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-closed-2" title="§ 6.1 Attributes">§ 6.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-closed-3" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-session-closed-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-session-closed-5" title="§ 6.6.5 Monitor for CDM State Changes">§ 6.6.5 Monitor
                    for CDM State Changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-monitor-for-cdm-state-changes"
        aria-label="Links in this document to definition: Monitor for CDM State Changes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-monitor-for-cdm-state-changes"
                aria-label="Permalink for definition: Monitor for CDM State Changes. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-monitor-for-cdm-state-changes-1" title="§ 6. MediaKeySession Interface">§ 6.
                    MediaKeySession Interface</a> <a href="#ref-for-dfn-monitor-for-cdm-state-changes-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-monitor-for-cdm-state-changes-3" title="§ 6.6.4 Session Closed">§ 6.6.4 Session
                    Closed</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-typeerror"
        aria-label="Links in this document to definition: TypeError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-typeerror"
                aria-label="Permalink for definition: TypeError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-typeerror-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dfn-typeerror-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-typeerror-3" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dfn-typeerror-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-typeerror-5"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-typeerror-6" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-typeerror-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-typeerror-8"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-typeerror-9" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-typeerror-10" title="Reference 5">(5)</a> <a href="#ref-for-dfn-typeerror-11"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-typeerror-12" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-typeerror-13" title="Reference 8">(8)</a> <a href="#ref-for-dfn-typeerror-14"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-typeerror-15" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-typeerror-16" title="Reference 11">(11)</a> <a href="#ref-for-dfn-typeerror-17"
                    title="Reference 12">(12)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-notsupportederror"
        aria-label="Links in this document to definition: NotSupportedError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-notsupportederror"
                aria-label="Permalink for definition: NotSupportedError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-notsupportederror-1" title="§ 3.2.1 Methods">§ 3.2.1 Methods</a> <a
                    href="#ref-for-dfn-notsupportederror-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-notsupportederror-3" title="§ 5.1 Methods">§ 5.1 Methods</a> <a
                    href="#ref-for-dfn-notsupportederror-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-notsupportederror-5" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-notsupportederror-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-notsupportederror-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-notsupportederror-8" title="§ 7.2 Methods">§ 7.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-invalidstateerror"
        aria-label="Links in this document to definition: InvalidStateError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-invalidstateerror"
                aria-label="Permalink for definition: InvalidStateError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-invalidstateerror-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dfn-invalidstateerror-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-invalidstateerror-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-invalidstateerror-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-invalidstateerror-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-invalidstateerror-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-invalidstateerror-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-invalidstateerror-8" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-invalidstateerror-9" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-invalidstateerror-10" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-invalidstateerror-11" title="§ 7.2 Methods">§ 7.2 Methods</a> <a
                    href="#ref-for-dfn-invalidstateerror-12" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-quotaexceedederror"
        aria-label="Links in this document to definition: QuotaExceededError">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-quotaexceedederror"
                aria-label="Permalink for definition: QuotaExceededError. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-quotaexceedederror-1" title="§ Status of This Document">§ Status of This
                    Document</a>
            </li>
            <li>
                <a href="#ref-for-dfn-quotaexceedederror-2" title="§ 6.2 Methods">§ 6.2 Methods</a> <a
                    href="#ref-for-dfn-quotaexceedederror-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-quotaexceedederror-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-quotaexceedederror-5" title="§ 7.2 Methods">§ 7.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement"
        aria-label="Links in this document to definition: HTMLMediaElement">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement"
                aria-label="Permalink for definition: HTMLMediaElement. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-2" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-3" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-4" title="§ 5. MediaKeys Interface">§ 5. MediaKeys Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-5" title="§ 6.7 Exceptions">§ 6.7 Exceptions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-6" title="§ 7. HTMLMediaElement Extensions">§ 7. HTMLMediaElement
                    Extensions</a> <a href="#ref-for-dom-htmlmediaelement-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-htmlmediaelement-8" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-htmlmediaelement-9" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-htmlmediaelement-10" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-htmlmediaelement-11" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-12" title="§ 7.1 Attributes">§ 7.1 Attributes</a> <a
                    href="#ref-for-dom-htmlmediaelement-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-14" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§
                    7.5.1 Media Data May Contain Encrypted Blocks</a> <a href="#ref-for-dom-htmlmediaelement-15"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-16" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a> <a href="#ref-for-dom-htmlmediaelement-17"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-18" title="§ 7.5.3 Encrypted Block Encountered">§ 7.5.3 Encrypted
                    Block Encountered</a> <a href="#ref-for-dom-htmlmediaelement-19" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-20" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to
                    Decrypt</a> <a href="#ref-for-dom-htmlmediaelement-21" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-22" title="§ 7.5.5 Wait for Key">§ 7.5.5 Wait for Key</a> <a
                    href="#ref-for-dom-htmlmediaelement-23" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-htmlmediaelement-24" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-25" title="§ 7.5.6 Attempt to Resume Playback If Necessary">§
                    7.5.6 Attempt to Resume Playback If Necessary</a> <a href="#ref-for-dom-htmlmediaelement-26"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-htmlmediaelement-27" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-28" title="§ 8.9.1 Unencrypted Container">§ 8.9.1 Unencrypted
                    Container</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-29" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-mediakeys"
        aria-label="Links in this document to definition: mediaKeys">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-mediakeys"
                aria-label="Permalink for definition: mediaKeys. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-1" title="§ 6.6.2 Update Key Statuses">§ 6.6.2 Update
                    Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-2" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-3" title="§ 7.2 Methods">§ 7.2 Methods</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-htmlmediaelement-mediakeys-7" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-8"
                    title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1 Media Data May Contain Encrypted
                    Blocks</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-9" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt
                    to Decrypt</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-mediakeys-10" title="§ 11.3.2 Mitigations">§ 11.3.2
                    Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-onencrypted"
        aria-label="Links in this document to definition: onencrypted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-onencrypted"
                aria-label="Permalink for definition: onencrypted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-onencrypted-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-htmlmediaelement-onwaitingforkey"
        aria-label="Links in this document to definition: onwaitingforkey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-onwaitingforkey"
                aria-label="Permalink for definition: onwaitingforkey. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-onwaitingforkey-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-htmlmediaelement-setmediakeys"
        aria-label="Links in this document to definition: setMediaKeys()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlmediaelement-setmediakeys"
                aria-label="Permalink for definition: setMediaKeys(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1869224078">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-1" title="§ 5.1 Methods">§ 5.1 Methods</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-2" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-3"
                    title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1 Media Data May Contain Encrypted
                    Blocks</a> <a href="#ref-for-dom-htmlmediaelement-setmediakeys-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlmediaelement-setmediakeys-5" title="§ 9.1.1 Capabilities">§ 9.1.1
                    Capabilities</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediaencryptedevent"
        aria-label="Links in this document to definition: MediaEncryptedEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent"
                aria-label="Permalink for definition: MediaEncryptedEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-1" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-2" title="§ 7.4 Event Summary">§ 7.4 Event Summary</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-3" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a> <a href="#ref-for-dom-mediaencryptedevent-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedevent-initdatatype"
        aria-label="Links in this document to definition: initDataType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent-initdatatype"
                aria-label="Permalink for definition: initDataType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1395593112">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdatatype-1" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdatatype-2"
                    title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2 Initialization Data Encountered</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediaencryptedevent-initdata"
        aria-label="Links in this document to definition: initData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedevent-initdata"
                aria-label="Permalink for definition: initData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1395593112">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-2" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-3" title="§ 7.3.1 Attributes">§ 7.3.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedevent-initdata-4" title="§ 7.5.2 Initialization Data Encountered">§
                    7.5.2 Initialization Data Encountered</a> <a href="#ref-for-dom-mediaencryptedevent-initdata-5"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-mediaencryptedeventinit"
        aria-label="Links in this document to definition: MediaEncryptedEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedeventinit"
                aria-label="Permalink for definition: MediaEncryptedEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-51354785">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-1" title="§ 7.3 MediaEncryptedEvent">§ 7.3
                    MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-2" title="§ 7.3.2 MediaEncryptedEventInit">§ 7.3.2
                    MediaEncryptedEventInit</a>
            </li>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-3"
                    title="§ 7.3.2.1 Dictionary MediaEncryptedEventInit Members">§ 7.3.2.1 Dictionary
                    MediaEncryptedEventInit Members</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedeventinit-initdatatype"
        aria-label="Links in this document to definition: initDataType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedeventinit-initdatatype"
                aria-label="Permalink for definition: initDataType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-51354785">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-initdatatype-1" title="§ 7.3.2 MediaEncryptedEventInit">§
                    7.3.2 MediaEncryptedEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-mediaencryptedeventinit-initdata"
        aria-label="Links in this document to definition: initData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-mediaencryptedeventinit-initdata"
                aria-label="Permalink for definition: initData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-51354785">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-mediaencryptedeventinit-initdata-1" title="§ 7.3.2 MediaEncryptedEventInit">§
                    7.3.2 MediaEncryptedEventInit</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-encrypted"
        aria-label="Links in this document to definition: encrypted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-encrypted"
                aria-label="Permalink for definition: encrypted. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-encrypted-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-encrypted-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-encrypted-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-4" title="§ 7.1 Attributes">§ 7.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-5" title="§ 7.3 MediaEncryptedEvent">§ 7.3 MediaEncryptedEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-6" title="§ 7.5.2 Initialization Data Encountered">§ 7.5.2
                    Initialization Data Encountered</a> <a href="#ref-for-dfn-encrypted-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-waitingforkey"
        aria-label="Links in this document to definition: waitingforkey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-waitingforkey"
                aria-label="Permalink for definition: waitingforkey. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-waitingforkey-1" title="§ 7.1 Attributes">§ 7.1 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-waitingforkey-2" title="§ 7.5.5 Wait for Key">§ 7.5.5 Wait for Key</a> <a
                    href="#ref-for-dfn-waitingforkey-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-initialization-data-encountered"
        aria-label="Links in this document to definition: Initialization Data Encountered">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-initialization-data-encountered"
                aria-label="Permalink for definition: Initialization Data Encountered. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-initialization-data-encountered-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a> <a href="#ref-for-dfn-initialization-data-encountered-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-initialization-data-encountered-3" title="§ 8.9.1 Unencrypted Container">§ 8.9.1
                    Unencrypted Container</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-encrypted-block-encountered"
        aria-label="Links in this document to definition: Encrypted Block Encountered">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-encrypted-block-encountered"
                aria-label="Permalink for definition: Encrypted Block Encountered. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-encrypted-block-encountered-1" title="§ 7. HTMLMediaElement Extensions">§ 7.
                    HTMLMediaElement Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-encrypted-block-encountered-2" title="§ 8.9.1 Unencrypted Container">§ 8.9.1
                    Unencrypted Container</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-attempt-to-decrypt"
        aria-label="Links in this document to definition: Attempt to Decrypt">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-attempt-to-decrypt"
                aria-label="Permalink for definition: Attempt to Decrypt. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-attempt-to-decrypt-1" title="§ 7.5.3 Encrypted Block Encountered">§ 7.5.3
                    Encrypted Block Encountered</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attempt-to-decrypt-2" title="§ 7.5.6 Attempt to Resume Playback If Necessary">§
                    7.5.6 Attempt to Resume Playback If Necessary</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wait-for-key"
        aria-label="Links in this document to definition: Wait for Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-wait-for-key"
                aria-label="Permalink for definition: Wait for Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-wait-for-key-1" title="§ 7. HTMLMediaElement Extensions">§ 7. HTMLMediaElement
                    Extensions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wait-for-key-2" title="§ 7.5.1 Media Data May Contain Encrypted Blocks">§ 7.5.1
                    Media Data May Contain Encrypted Blocks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wait-for-key-3" title="§ 7.5.4 Attempt to Decrypt">§ 7.5.4 Attempt to Decrypt</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-attempt-to-resume-playback-if-necessary"
        aria-label="Links in this document to definition: Attempt to Resume Playback If Necessary">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-attempt-to-resume-playback-if-necessary"
                aria-label="Permalink for definition: Attempt to Resume Playback If Necessary. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-attempt-to-resume-playback-if-necessary-1" title="§ 6.6.2 Update Key Statuses">§
                    6.6.2 Update Key Statuses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-attempt-to-resume-playback-if-necessary-2" title="§ 7.2 Methods">§ 7.2 Methods</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-individualization"
        aria-label="Links in this document to definition: Individualization">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-individualization"
                aria-label="Permalink for definition: Individualization. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-individualization-1" title="§ 2. Definitions">§ 2. Definitions</a> <a
                    href="#ref-for-dfn-individualization-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-individualization-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-individualization-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-individualization-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-individualization-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-individualization-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-individualization-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-individualization-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-individualization-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-individualization-11" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-individualization-12" title="§ 8.5.2 Encrypt Identifiers">§ 8.5.2 Encrypt
                    Identifiers</a> <a href="#ref-for-dfn-individualization-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-individualization-14" title="§ 11.4.1 Concerns">§ 11.4.1 Concerns</a>
            </li>
            <li>
                <a href="#ref-for-dfn-individualization-15" title="§ 11.4.2 Mitigations">§ 11.4.2 Mitigations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-direct-individualization"
        aria-label="Links in this document to definition: Direct Individualization">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-direct-individualization"
                aria-label="Permalink for definition: Direct Individualization. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-direct-individualization-1" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
            <li>
                <a href="#ref-for-dfn-direct-individualization-2" title="§ 8.6.2 App-Assisted Individualization">§ 8.6.2
                    App-Assisted Individualization</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-app-assisted-individualization"
        aria-label="Links in this document to definition: App-Assisted Individualization">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-app-assisted-individualization"
                aria-label="Permalink for definition: App-Assisted Individualization. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-app-assisted-individualization-1" title="§ 6.4 MediaKeyMessageEvent">§ 6.4
                    MediaKeyMessageEvent</a>
            </li>
            <li>
                <a href="#ref-for-dfn-app-assisted-individualization-2" title="§ 8.6 Individualization">§ 8.6
                    Individualization</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-common-key-systems"
        aria-label="Links in this document to definition: Common Key Systems">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-common-key-systems"
                aria-label="Permalink for definition: Common Key Systems. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-common-key-systems-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-clear-key"
        aria-label="Links in this document to definition: Clear Key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-clear-key"
                aria-label="Permalink for definition: Clear Key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-clear-key-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dfn-clear-key-2" title="§ 9.1.1 Capabilities">§ 9.1.1 Capabilities</a>
            </li>
            <li>
                <a href="#ref-for-dfn-clear-key-3" title="§ 9.1.2 Behavior">§ 9.1.2 Behavior</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>