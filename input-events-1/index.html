<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 34.1.8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            color: #fff;
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            color: #000;
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>Input Events Level 1</title>

    <style>
        .invisible-table table {
            border: 0;
            border-spacing: 0px;
            border-collapse: collapse;
        }

        .invisible-table table td,
        .invisible-table table th {
            padding: 6px;
        }
    </style>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        :is(h1, h2, h3, h4, h5, h6, a) abbr {
            border: none
        }

        dfn {
            font-weight: 700
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        .toc a,
        .tof a {
            text-decoration: none
        }

        a .figno,
        a .secno {
            color: #000
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th a {
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th[scope=row] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff
        }

        .section dd>p:first-child {
            margin-top: 0
        }

        .section dd>p:last-child {
            margin-bottom: 0
        }

        .section dd {
            margin-bottom: 1em
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="description" content="This specification defines additions to events for text and related
            input to allow for the monitoring and manipulation of default browser
            behavior in the context of text editor applications and other
            applications that deal with text input and text formatting. This
            specification builds on the UI events spec [UI-EVENTS].">
    <link rel="canonical" href="https://www.w3.org/TR/input-events-1/">
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #000
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #000;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
      "specStatus": "DISC",
      "shortName": "input-events-1",
      "editors": [
        {
          "name": "Johannes Wilm",
          "mailto": "johannes@fiduswriter.org",
          "company": "Invited Expert",
          "w3cid": "75083",
          "url": "mailto:johannes@fiduswriter.org"
        }
      ],
      "formerEditors": [
        {
          "name": "Ben Peters",
          "mailto": "BenjamP@microsoft.com",
          "company": "Microsoft",
          "companyURL": "https://www.microsoft.com",
          "note": "until 23 February 2015",
          "w3cid": "69167",
          "url": "mailto:BenjamP@microsoft.com"
        }
      ],
      "group": "webediting",
      "github": "https://github.com/w3c/input-events/tree/v1",
      "otherLinks": [
        {
          "key": "Latest published version by level",
          "data": [
            {
              "value": "Level 1",
              "href": "https://www.w3.org/TR/input-events-1/"
            },
            {
              "value": "Level 2",
              "href": "https://www.w3.org/TR/input-events-2/"
            }
          ]
        },
        {
          "key": "Latest editor's draft by level",
          "data": [
            {
              "value": "Level 1",
              "href": "https://rawgit.com/w3c/input-events/v1/index.html"
            },
            {
              "value": "Level 2",
              "href": "https://w3c.github.io/input-events/"
            }
          ]
        }
      ],
      "xref": [
        "HTML"
      ],
      "publishISODate": "2023-09-27T00:00:00.000Z",
      "generatedSubtitle": "W3C Discontinued Draft 27 September 2023"
    }</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-DISC">
</head>

<body class="h-entry informative" data-cite="HTML">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Input Events Level 1</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#DISC">W3C Discontinued Draft</a> <time
                class="dt-published" datetime="2023-09-27">28 September 2023</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2023/DISC-input-events-1-20230928/">https://www.w3.org/TR/2023/DISC-input-events-1-20230928/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/">https://www.w3.org/TR/input-events-1/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/input-events/">https://w3c.github.io/input-events/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/input-events-1/">https://www.w3.org/standards/history/input-events-1/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/input-events/commits/">Commit history</a>
                </dd>





                <dt>Editor:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="75083">
                    <a class="ed_mailto u-email email p-name" href="mailto:johannes@fiduswriter.org">Johannes Wilm</a>
                    (<span class="p-org org h-org">Invited Expert</span>)
                </dd>
                <dt>
                    Former editor:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="69167">
                    <a class="ed_mailto u-email email p-name" href="mailto:BenjamP@microsoft.com">Ben Peters</a> (<a
                        class="p-org org h-org" href="https://www.microsoft.com">Microsoft</a>) (until 23 February 2015)
                </dd>

                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/input-events/tree/v1/">GitHub w3c/input-events</a>
                    (<a href="https://github.com/w3c/input-events/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/input-events/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/input-events/issues/">open issues</a>)
                </dd>

                <dt>Latest published version by level</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/">Level 1</a>
                </dd>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-2/">Level 2</a>
                </dd>
                <dt>Latest editor's draft by level</dt>
                <dd>
                    <a href="https://rawgit.com/w3c/input-events/v1/index.html">Level 1</a>
                </dd>
                <dd>
                    <a href="https://w3c.github.io/input-events/">Level 2</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
            ©
            2023

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2023/software-license"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        <p>
            This specification defines additions to events for text and related
            input to allow for the monitoring and manipulation of default browser
            behavior in the context of text editor applications and other
            applications that deal with text input and text formatting. This
            specification builds on the UI events spec [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>].
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
                    reports index</a> at
                https://www.w3.org/TR/.</em></p>
        <p>
            Input Events Level 1 is the first version of Input Events
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-input-events"
                    title="Input Events Level 1">INPUT-EVENTS</a></cite>].
        </p>
        <p>
            The <a href="https://github.com/web-platform-tests/wpt/tree/master/input-events">test
                suite</a> and <a href="https://w3c.github.io/test-results/input-events/">implementation
                reports</a> for the Input Events specification are still work in
            progress.
        </p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/webediting">Web Editing Working
                Group</a> as
            a Discontinued Draft using the
            <a href="https://www.w3.org/2023/Process-20230612/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Discontinued Draft does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p>
            Publication as a Discontinued Draft implies that this document is no
            longer intended to advance or to be maintained. It is inappropriate to
            cite this document as other than abandoned work.
        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webediting/ipr">public list of any patent
                disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/2023/Process-20230612/">12 June 2023 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    Introduction
                </a></li>
            <li class="tocline"><a class="tocxref" href="#definitions"><bdi class="secno">2. </bdi>
                    Definitions
                </a></li>
            <li class="tocline"><a class="tocxref" href="#problems-solved"><bdi class="secno">3. </bdi>
                    Problems solved
                </a></li>
            <li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">4. </bdi>
                    Use cases
                </a></li>
            <li class="tocline"><a class="tocxref" href="#events-inputevents"><bdi class="secno">5. </bdi>
                    Input Event Types
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#interface-InputEvent"><bdi class="secno">5.1 </bdi>
                            Interface InputEvent
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#overview"><bdi class="secno">5.1.1 </bdi>
                                    Overview
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interface-InputEvent-Attributes"><bdi
                                        class="secno">5.1.2 </bdi>
                                    Attributes
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interface-InputEvent-Methods"><bdi
                                        class="secno">5.1.3 </bdi>
                                    Methods
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#event-definitions"><bdi class="secno">5.2 </bdi>
                            Event definitions
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy-and-security-considerations"><bdi class="secno">6.
                    </bdi>
                    Privacy and security considerations
                </a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">7. </bdi>
                    Acknowledgements
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.1
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                Introduction
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>

        <p>
            This document describes editing related additions to 2 events -
            <a href="https://w3c.github.io/uievents/#event-type-input">input</a>
            and <a href="https://w3c.github.io/uievents/#beforeinput">beforeinput</a> which are
            described in the UI events spec [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                    title="UI Events">UI-EVENTS</a></cite>]. The goal of these events
            is to allow authors to understand and/or override default edit behavior
            both before and after editing occurs.
        </p>
    </section>
    <section id="definitions">
        <div class="header-wrapper">
            <h2 id="x2-definitions"><bdi class="secno">2. </bdi>
                Definitions
            </h2><a class="self-link" href="#definitions" aria-label="Permalink for Section 2."></a>
        </div>

        <dl>
            <dt>
                <code><dfn id="dfn-datatransfer" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer">DataTransfer</a></dfn></code>
            </dt>
            <dd>
                A <a href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer">
                    DataTransfer</a> object contains richtext and plaintext data for some
                inputtypes. [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                        title="HTML Standard">HTML</a></cite>]
            </dd>
            <dt>
                <dfn id="dfn-express-intention" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">express
                    intention</dfn>
            </dt>
            <dd>
                A user can <a data-lt="express intention" href="#dfn-express-intention" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-express-intention-1">express an intention</a> to
                execute a specific editing operation by means of keyboard, IME,
                speech, or similar method. Specific input actions are mapped to
                intentions following platform-specific conventions.
            </dd>
            <dt>
                <dfn id="dfn-kill-buffer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">kill buffer</dfn>
            </dt>
            <dd>
                <p>
                    <i>This definition is not normative.</i>
                </p>A <a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-kill-buffer-1">kill buffer</a> is a in-memory store of richtext content
                that is separate from the clipboard which allows for the temporal
                storage of content that was deleted using specific deletion commands.
                The user can replace the current selection with the content held in
                the kill buffer by indicating an intention to <dfn id="dfn-yank" tabindex="0" aria-haspopup="dialog"
                    class="respec-offending-element"
                    title="Found definition for &quot;yank&quot;, but nothing links to it. This is usually a spec bug!"
                    data-dfn-type="dfn">yank</dfn> the
                kill buffer.
            </dd>
            <dt>
                <dfn data-plurals="characters" id="dfn-character" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">character</dfn>
            </dt>
            <dd>
                A <a href="#dfn-character" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-character-1">character</a> is an <a
                    href="http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries">extended
                    grapheme cluster</a> . [<cite><a class="bibref" data-link-type="biblio" href="#bib-uax29"
                        title="Unicode Text Segmentation">UAX29</a></cite>]
            </dd>
        </dl>
    </section>
    <section id="problems-solved">
        <div class="header-wrapper">
            <h2 id="x3-problems-solved"><bdi class="secno">3. </bdi>
                Problems solved
            </h2><a class="self-link" href="#problems-solved" aria-label="Permalink for Section 3."></a>
        </div>

        <p>
            <i>This section is not normative.</i>
        </p>
        <p>
            Creating a webbased texteditor requires a considerable amount of
            JavaScript on top of the browser code, among other things because:
        </p>
        <ol>
            <li>Browsers do not handle all editing operations the same way.
            </li>
            <li>Browsers are often buggy in the way they handle certain editing
                operations.
            </li>
            <li>Individual sites may have custom preferences for how they want to
                handle certain editing operations.
            </li>
            <li>The development of high-level text editing features in browsers has
                not followed the principles laid out in the <a href="https://extensiblewebmanifesto.org/">Extensible Web
                    Manifesto</a> in
                that development of these features has not always been in coordination
                with the needs of the web developer community.
            </li>
        </ol>
        <p>
            This spec seeks to alleviate the problem by providing a simple way for
            web developers to both override browser handling of all user input
            related to text editing through the <a href="#dfn-beforeinput" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-beforeinput-1">beforeinput</a> event, and to
            monitor what browsers have changed in the DOM due to user input through
            the <a href="#dfn-input" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-1">input</a> event.
        </p>
    </section>
    <section id="use-cases">
        <div class="header-wrapper">
            <h2 id="x4-use-cases"><bdi class="secno">4. </bdi>
                Use cases
            </h2><a class="self-link" href="#use-cases" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <i>This section is not normative.</i>
        </p>
        <ol>
            <li>Creating a JavaScript text editor in which the &lt;strong&gt;-tag
                is used instead of the &lt;b&gt;-tag to mark text that the user marks
                as bold, using any browser-builtin way to mark a text as bold, without
                having access to all existing browsers.
            </li>
            <li>Creating a JavaScript text editor which works with a data model in
                the background where JavaScript takes care of rendering changes to the
                edited text to the DOM.
            </li>
            <li>Creating a JavaScript editor which only allows a subset of richtext
                editing (for example: bold is allowed, but italic not).
            </li>
            <li>Creating a collaborative editor in which JavaScript is used to
                render changes to the DOM, based on user intentions with users using
                different browsers with different ways of expressing specific
                intentions.
            </li>
            <li>Creating a JavaScript editor with different user access options,
                where some users only can add or delete text and other users only can
                add or remove certain types of formatting.
            </li>
        </ol>
    </section>
    <section id="events-inputevents">
        <div class="header-wrapper">
            <h2 id="x5-input-event-types"><bdi class="secno">5. </bdi>
                Input Event Types
            </h2><a class="self-link" href="#events-inputevents" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            Input events are sent before (beforeinput event) and after (input
            event) a user attempts to edit the markup. This includes insertion and
            deletion of content, and formatting changes.
        </p>
        <p>
            Input events are <a href="https://www.w3.org/TR/uievents/#dispatch">dispatched</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                    title="UI Events">UI-EVENTS</a></cite>] on elements that act as editing hosts, including elements
            with the contenteditable attribute set, <a data-link-type="element"
                href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element"><code>textarea</code></a>
            elements, and
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
            elements that
            permit text input.
        </p>
        <section id="interface-InputEvent">
            <div class="header-wrapper">
                <h3 id="x5-1-interface-inputevent"><bdi class="secno">5.1 </bdi>
                    Interface InputEvent
                </h3><a class="self-link" href="#interface-InputEvent" aria-label="Permalink for Section 5.1"></a>
            </div>

            <pre class="idl def" data-cite="WEBIDL HTML" id="webidl-827932857"><span class="idlHeader"><a class="self-link" href="#webidl-827932857">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-inputevent-partial-1" data-title="InputEvent">partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-inputevent"><code>InputEvent</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-inputevent-datatransfer" data-title="dataTransfer" data-dfn-for="InputEvent">
       readonly attribute<span class="idlType"> <a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-inputevent-datatransfer" id="ref-for-dom-inputevent-datatransfer-1"><code>dataTransfer</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-inputevent-gettargetranges" data-title="getTargetRanges" data-dfn-for="InputEvent"><span class="idlType">
       <a data-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRange</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-inputevent-gettargetranges" id="ref-for-dom-inputevent-gettargetranges-1"><code>getTargetRanges</code></a>();</span>
    };</span><span data-idl="" class="idlDictionary" id="idl-def-inputeventinit-partial-1" data-title="InputEventInit">
    
    partial dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-inputeventinit"><code>InputEventInit</code></a> {<span data-idl="" class="idlMember" id="idl-def-inputeventinit-datatransfer" data-title="dataTransfer" data-dfn-for="InputEventInit"><span class="idlType">
       <a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-inputeventinit-datatransfer" id="ref-for-dom-inputeventinit-datatransfer-1"><code>dataTransfer</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-inputeventinit-targetranges" data-title="targetRanges" data-dfn-for="InputEventInit"><span class="idlType">
       <a data-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRange</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-inputeventinit-targetranges" id="ref-for-dom-inputeventinit-targetranges-1"><code>targetRanges</code></a> = [];</span>
    };</span></code></pre>
            <p>
                The
                <code><dfn id="dom-inputevent" data-idl="interface" data-title="InputEvent" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/uievents/#interface-inputevent">InputEvent</a></dfn></code>
                and
                <code><dfn id="dom-inputeventinit" data-idl="dictionary" data-title="InputEventInit" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/uievents/#interface-inputevent">InputEventInit</a></dfn></code>
                objects
                are defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                        title="UI Events">UI-EVENTS</a></cite>].
            </p>
            <p data-dfn-for="InputEventInit">
                The attributes <dfn id="dfn-inputtype" tabindex="0" aria-haspopup="dialog"
                    class="respec-offending-element"
                    title="Found definition for &quot;inputType&quot;, but nothing links to it. This is usually a spec bug!"
                    data-dfn-type="dfn">inputType</dfn>, <dfn data-export="" data-dfn-type="dict-member"
                    id="dom-inputeventinit-datatransfer" data-idl="field" data-title="dataTransfer"
                    data-dfn-for="InputEventInit" data-type="DataTransfer" tabindex="0"
                    aria-haspopup="dialog"><code>dataTransfer</code></dfn> and
                <dfn data-export="" data-dfn-type="dict-member" id="dom-inputeventinit-targetranges" data-idl="field"
                    data-title="targetRanges" data-dfn-for="InputEventInit" data-type="sequence" tabindex="0"
                    aria-haspopup="dialog"><code>targetRanges</code></dfn> of <a data-link-type="idl"
                    href="https://www.w3.org/TR/uievents/#interface-inputevent"><code>InputEventInit</code></a>
                initialize the
                corresponding attributes of the <a data-link-type="idl"
                    href="https://www.w3.org/TR/uievents/#interface-inputevent"><code>InputEvent</code></a> object.
            </p>
            <section id="overview">
                <div class="header-wrapper">
                    <h4 id="x5-1-1-overview"><bdi class="secno">5.1.1 </bdi>
                        Overview
                    </h4><a class="self-link" href="#overview" aria-label="Permalink for Section 5.1.1"></a>
                </div>

                <p>
                    <i>This section is not normative.</i>
                </p>
                <p data-link-for="InputEvent">
                    The following table provides a summary of when the <a href="#dfn-data" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-data-1"><code>data</code></a> and
                    <a href="#dom-inputevent-datatransfer" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-inputevent-datatransfer-2"><code>dataTransfer</code></a> attributes contain
                    contents and when they are
                    null as well as when the <a href="#dom-inputevent-gettargetranges" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-inputevent-gettargetranges-2"><code>getTargetRanges()</code></a> method returns
                    an
                    empty or non-empty Array, based on the inputType.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                Editing host
                            </th>
                            <th>
                                inputType
                            </th>
                            <th>
                                data
                            </th>
                            <th>
                                dataTransfer
                            </th>
                            <th>
                                getTargetRanges()
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                <code>"insertText"</code>,
                                <code>"insertCompositionText"</code>,
                                <code>"formatSetBlockTextDirection"</code>,
                                <code>"formatSetInlineTextDirection"</code>,
                                <code>"formatBackColor"</code>,
                                <code>"formatFontColor"</code>,
                                <code>"formatFontName"</code>, <code>"insertLink"</code>
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Non-empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertReplacementText"</code>,
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Non-empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;textarea&gt;</code>, <code>&lt;input
                      type="text"&gt;</code>
                            </td>
                            <td>
                                <code>"insertText"</code>,
                                <code>"insertCompositionText"</code>,
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertReplacementText"</code>,
                                <code>"insertFromYank"</code>,
                                <code>"formatSetBlockTextDirection"</code>,
                                <code>"formatSetInlineTextDirection"</code>,
                                <code>"formatBackColor"</code>,
                                <code>"formatFontColor"</code>,
                                <code>"formatFontName"</code>, <code>"insertLink"</code>
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All
                            </td>
                            <td>
                                <code>"historyUndo"</code>, <code>"historyRedo"</code>
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                All Remaining
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Non-empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;textarea&gt;</code>, <code>&lt;input
                      type="text"&gt;</code>
                            </td>
                            <td>
                                All Remaining
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Empty Array
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="interface-InputEvent-Attributes" data-dfn-for="InputEvent">
                <div class="header-wrapper">
                    <h4 id="x5-1-2-attributes"><bdi class="secno">5.1.2 </bdi>
                        Attributes
                    </h4><a class="self-link" href="#interface-InputEvent-Attributes"
                        aria-label="Permalink for Section 5.1.2"></a>
                </div>

                <p>
                    The cancelability of the beforeinput event depends on the
                    inputType.
                </p>
                <p>
                    The inputType to be picked depends on the user's <a data-lt="express intention"
                        href="#dfn-express-intention" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-express-intention-2">expression of intention</a>, whether or not the
                    editing takes place during an IME composition and the state of the
                    selection.
                </p>
                <p>
                    This specification defines the <dfn id="dfn-inputtype-values" tabindex="0" aria-haspopup="dialog"
                        class="respec-offending-element"
                        title="Found definition for &quot;inputType values&quot;, but nothing links to it. This is usually a spec bug!"
                        data-dfn-type="dfn">inputType values</dfn> as the
                    values in the inputType column of the following table.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                User's expression of intention
                            </th>
                            <th>
                                Part of IME composition
                            </th>
                            <th>
                                beforeinput cancelable
                            </th>
                            <th>
                                State of selection
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertText"</code>
                            </td>
                            <td>
                                insert typed plain text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertReplacementText"</code>
                            </td>
                            <td>
                                replace existing text by means of a spell checker,
                                auto-correct or similar
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLineBreak"</code>
                            </td>
                            <td>
                                insert a line break
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertParagraph"</code>
                            </td>
                            <td>
                                insert a paragraph break
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertOrderedList"</code>
                            </td>
                            <td>
                                insert a numbered list
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertUnorderedList"</code>
                            </td>
                            <td>
                                insert a bulleted list
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertHorizontalRule"</code>
                            </td>
                            <td>
                                insert a horizontal rule
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                replace the current selection with content stored in a
                                <a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-kill-buffer-2">kill buffer</a>
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromDrop"</code>
                            </td>
                            <td>
                                insert content into the DOM by means of drop
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>
                            </td>
                            <td>
                                paste
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPasteAsQuotation"</code>
                            </td>
                            <td>
                                paste content as a quotation
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertTranspose"</code>
                            </td>
                            <td>
                                transpose the last two <a data-lt="character" href="#dfn-character" class="internalDFN"
                                    data-link-type="dfn" id="ref-for-dfn-character-2">characters</a>
                                that were entered
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertCompositionText"</code>
                            </td>
                            <td>
                                replace the current composition string
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLink"</code>
                            </td>
                            <td>
                                insert a link
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteWordBackward"</code>
                            </td>
                            <td>
                                delete a word directly before the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteWordForward"</code>
                            </td>
                            <td>
                                delete a word directly after the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteSoftLineBackward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest visual line break before
                                the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteSoftLineForward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest visual line break after
                                the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteEntireSoftLine"</code>
                            </td>
                            <td>
                                delete from to the nearest visual line break before the caret
                                position to the nearest visual line break after the caret
                                position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteHardLineBackward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest beginning of a block
                                element or
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-br-element">br</a></code>
                                element before the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteHardLineForward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest end of a block element
                                or
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-br-element">br</a></code>
                                element after the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteByDrag"</code>
                            </td>
                            <td>
                                remove content from the DOM by means of drag
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteByCut"</code>
                            </td>
                            <td>
                                remove the current selection as part of a cut
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContent"</code>
                            </td>
                            <td>
                                delete the selection without specifying the direction of the
                                deletion and this intention is not covered by another
                                inputType
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Non-collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContentBackward"</code>
                            </td>
                            <td>
                                delete the content directly before the caret position and
                                this intention is not covered by another inputType or delete
                                the selection with the selection collapsing to its start
                                after the deletion
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContentForward"</code>
                            </td>
                            <td>
                                delete the content directly after the caret position and this
                                intention is not covered by another inputType or delete the
                                selection with the selection collapsing to its end after the
                                deletion
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Undefined
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"historyUndo"</code>
                            </td>
                            <td>
                                undo the last editing action
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"historyRedo"</code>
                            </td>
                            <td>
                                to redo the last undone editing action
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBold"</code>
                            </td>
                            <td>
                                initiate bold text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatItalic"</code>
                            </td>
                            <td>
                                initiate italic text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatUnderline"</code>
                            </td>
                            <td>
                                initiate underline text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatStrikeThrough"</code>
                            </td>
                            <td>
                                initiate stricken through text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSuperscript"</code>
                            </td>
                            <td>
                                initiate superscript text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSubscript"</code>
                            </td>
                            <td>
                                initiate subscript text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyFull"</code>
                            </td>
                            <td>
                                make the current selection fully justified
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyCenter"</code>
                            </td>
                            <td>
                                center align the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyRight"</code>
                            </td>
                            <td>
                                right align the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyLeft"</code>
                            </td>
                            <td>
                                left align the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatIndent"</code>
                            </td>
                            <td>
                                indent the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatOutdent"</code>
                            </td>
                            <td>
                                outdent the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatRemove"</code>
                            </td>
                            <td>
                                remove all formatting from the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetBlockTextDirection"</code>
                            </td>
                            <td>
                                set the text block direction
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetInlineTextDirection"</code>
                            </td>
                            <td>
                                set the text inline direction
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBackColor"</code>
                            </td>
                            <td>
                                change the background color
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontColor"</code>
                            </td>
                            <td>
                                change the font color
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontName"</code>
                            </td>
                            <td>
                                change the font-family
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>Note</span></div>
                    <div class="">
                        Other specifications may expand on this definition.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>Note</span></div>
                    <div class="">
                        The existence of the above mentioned <code>inputTypes</code> does
                        not mean that any given implementation will support all of these.
                        But if a given browser supports an editing operation which
                        potentially leads to a change of the DOM, it <em class="rfc2119">MUST</em> <a
                            href="https://www.w3.org/TR/uievents/#dispatch">dispatch</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                                title="UI Events">UI-EVENTS</a></cite>] the corresponding <code>beforeinput</code> and
                        <code>input</code> events.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>Note</span></div>
                    <div class="">
                        If the selection is collapsed, <code>"deleteContentBackward"</code>
                        will be used both when the user asks for text deletion within a
                        text node, and when the user shows the intention to deletion of
                        more complex elements or merge paragraphs if the caret is at the
                        start of a text node.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="5"><span>Note</span></div>
                    <div class="">
                        If the selection is collapsed, <code>"deleteContentForward"</code>
                        will be used both when the user asks for text deletion within a
                        text node, and when the user shows the intention to deletion of
                        more complex elements or merge paragraphs if the caret is at the
                        end of a text node.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>Note</span></div>
                    <div class="" data-link-for="InputEvent">
                        <p>
                            <i>This note is not normative.</i>
                        </p>In some scripts on some platforms, backward deletion within a
                        text node with a collapsed selection will delete a single <a
                            href="https://infra.spec.whatwg.org/#code-points">code point</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra"
                                title="Infra Standard">INFRA</a></cite>] rather than a entire <a
                            href="http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries">grapheme
                            cluster</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-uax29"
                                title="Unicode Text Segmentation">UAX29</a></cite>]. The <a
                            href="#dom-inputevent-gettargetranges" class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-inputevent-gettargetranges-3"><code>getTargetRanges()</code></a> method can
                        be
                        used to find out how many <a href="https://infra.spec.whatwg.org/#code-points">code points</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra"
                                title="Infra Standard">INFRA</a></cite>] the browser will remove by default if deleting
                        within a
                        text node.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-4">
                    <div role="heading" class="note-title marker" id="h-note-4" aria-level="5"><span>Note</span></div>
                    <div class="" data-link-for="InputEvent">
                        <p>
                            <i>This note is not normative.</i>
                        </p>In some scripts on some platforms, forward deletion within a
                        text node with a collapsed selection will delete an entire <a
                            href="http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries">grapheme
                            cluster</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-uax29"
                                title="Unicode Text Segmentation">UAX29</a></cite>] rather than a single <a
                            href="https://infra.spec.whatwg.org/#code-points">code point</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra"
                                title="Infra Standard">INFRA</a></cite>]. The <a href="#dom-inputevent-gettargetranges"
                            class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-inputevent-gettargetranges-4"><code>getTargetRanges()</code></a> method can
                        be used to find
                        out how many <a href="https://infra.spec.whatwg.org/#code-points">code points</a>
                        [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra"
                                title="Infra Standard">INFRA</a></cite>] the browser will remove by default if deleting
                        within a
                        text node.
                    </div>
                </div>
                <p>
                    <dfn id="dfn-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>data</code></dfn>
                    holds information plaintext data
                    related to what is to be added to the document.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                Editing host
                            </th>
                            <th>
                                data
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertText"</code> or
                                <code>"insertCompositionText"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                the plain text string to be inserted
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertTranspose"</code>,
                                <code>"insertReplacementText"</code> or
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                <code><a href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
                                or
                                <code><a href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
                            </td>
                            <td>
                                the plain text string to be inserted
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetInlineTextDirection"</code> or
                                <code>"formatSetBlockTextDirection"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                <code>"ltr"</code>, <code>"rtl"</code>, <code>"auto"</code>
                                or <code>"null"</code>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBackColor"</code> or
                                <code>"formatFontColor"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                a string containing a <a
                                    href="https://www.w3.org/TR/cssom-1/#serialize-a-css-component-value">serialized CSS
                                    component value</a> [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-cssom" title="CSS Object Model (CSSOM)">CSSOM</a></cite>] of the
                                proposed color
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontName"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                the proposed value of the font-family CSS property
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLink"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                the url of the proposed link
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                null
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <dfn data-dfn-for="InputEvent" data-export="" data-dfn-type="attribute"
                        id="dom-inputevent-datatransfer" data-idl="attribute" data-title="dataTransfer"
                        data-type="DataTransfer" data-lt="dataTransfer" data-local-lt="InputEvent.dataTransfer"
                        tabindex="0" aria-haspopup="dialog"><code>dataTransfer</code></dfn> holds information
                    about richtext and plaintext data that is to be taken from or added
                    to the document in a <a data-link-type="idl" data-lt="DataTransfer"
                        href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code><code>DataTransfer</code></code></a>
                    object if there is relevant
                    data.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                Editing host
                            </th>
                            <th>
                                dataTransfer
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertTranspose"</code>,
                                <code>"insertReplacementText"</code> or
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                <code>contenteditable</code>
                            </td>
                            <td>
                                A prepopulated <a data-link-type="idl" data-lt="DataTransfer"
                                    href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code><code>DataTransfer</code></code></a>
                                object so that:
                                <ol>
                                    <li>The <a data-link-type="idl" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code><code>DataTransfer</code></code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#drag-data-store">drag
                                            data store</a> is in
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro">read-only</a>
                                        mode. [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>The <a data-link-type="idl" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code><code>DataTransfer</code></code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#drag-data-store-item-list">drag
                                            data store
                                            item list</a> contains one entry with the <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data
                                            item type string</a> <code>"text/html"</code>, whose
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">kind</a>
                                        is
                                        <i>Plain Unicode string</i>, and whose data is a HTML
                                        representation of the content that is in the clipboard, or
                                        in the <a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-kill-buffer-3">kill buffer</a>, to be dropped or otherwise
                                        the
                                        content that is to be added. [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>The <a data-link-type="idl" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code><code>DataTransfer</code></code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store
                                            item list</a> contains one entry with the <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data
                                            item type string</a> <code>"text/plain"</code>, whose
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">kind</a>
                                        is
                                        <i>Plain Unicode string</i>, and whose data is a plain text
                                        representation of the content that is to be pasted, dropped
                                        or otherwise added. [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                    </li>
                                </ol>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                null
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <dfn data-dfn-for="InputEvent" data-export="" data-dfn-type="method"
                        id="dom-inputevent-gettargetranges" data-idl="operation" data-title="getTargetRanges()"
                        data-type="sequence" data-lt="getTargetRanges()"
                        data-local-lt="InputEvent.getTargetRanges|InputEvent.getTargetRanges()|getTargetRanges"
                        tabindex="0" aria-haspopup="dialog"><code>getTargetRanges()</code></dfn> returns an
                    arrays <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a> that will be affected
                    by the event if it
                    is not cancelled.
                </p>
            </section>
            <section id="interface-InputEvent-Methods" data-dfn-for="InputEvent">
                <div class="header-wrapper">
                    <h4 id="x5-1-3-methods"><bdi class="secno">5.1.3 </bdi>
                        Methods
                    </h4><a class="self-link" href="#interface-InputEvent-Methods"
                        aria-label="Permalink for Section 5.1.3"></a>
                </div>

                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                Editing host
                            </th>
                            <th>
                                Response of <code>getTargetRanges()</code>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"historyUndo"</code> or <code>"historyRedo"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                <code>contenteditable</code>
                            </td>
                            <td>
                                an Array of <dfn data-lt="StaticRange" id="dfn-staticrange" class="externalDFN"
                                    data-no-export="" data-dfn-type="dfn"><a
                                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a></dfn>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-dom"
                                        title="DOM Standard">DOM</a></cite>]
                                associated with event
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
                                or
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
                            </td>
                            <td>
                                an empty Array
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    returns , unless the inputType is <code>"historyUndo"</code> or
                    <code>"historyRedo"</code> or the editing host is not a
                    contenteditable element, in which case it returns an empty Array.
                </p>
            </section>
        </section>
        <section id="event-definitions">
            <div class="header-wrapper">
                <h3 id="x5-2-event-definitions"><bdi class="secno">5.2 </bdi>
                    Event definitions
                </h3><a class="self-link" href="#event-definitions" aria-label="Permalink for Section 5.2"></a>
            </div>

            <div class="event-definition">
                <dl>
                    <dt id="event-type-beforeinput">
                        <dfn id="dfn-beforeinput" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a
                                class="eventtype" href="#event-type-beforeinput"><code>beforeinput</code></a></dfn>
                    </dt>
                    <dd>
                        <table class="invisible-table"
                            data-summary="This table contains information about the semantics of the given event type">
                            <tbody>
                                <tr>
                                    <th>
                                        Type
                                    </th>
                                    <td>
                                        <strong><code>beforeinput</code></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Interface
                                    </th>
                                    <td>
                                        <a href="#interface-InputEvent"><code>InputEvent</code></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Sync / Async
                                    </th>
                                    <td>
                                        Sync
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Bubbles
                                    </th>
                                    <td>
                                        Yes
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Trusted Targets
                                    </th>
                                    <td>
                                        Any <code>Element</code> with <code>contenteditable</code>
                                        attribute enabled.
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        <a href="https://www.w3.org/TR/uievents/#default-action">Default
                                            action</a> [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>]
                                    </th>
                                    <td>
                                        Varies: 'Update the DOM' for contentEditable=typing editing
                                        hosts for inputType <code>"insertCompositionText"</code>.
                                        'Update the DOM element' for
                                        <code>contentEditable="true"</code> editing hosts for all
                                        inputTypes. None otherwise.
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Context<br>
                                        (trusted events)
                                    </th>
                                    <td>
                                        <ul>
                                            <li>
                                                <a href="#dfn-data" id="ref-for-dfn-data-2"><code
                                                        class="attribute-name">InputEvent.data</code></a>: the string
                                                containing the data that was added to the element,
                                                which <em class="rfc2119">MAY</em> be null if it doesn't apply.
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-datatransfer"
                                                    id="ref-for-dom-inputevent-datatransfer-3"><code
                                                        class="attribute-name">InputEvent.dataTransfer</code></a>:
                                                richtext data added or removed from element, which <em
                                                    class="rfc2119">MAY</em>
                                                be null if it doesn't apply.
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-gettargetranges" class="internalDFN"
                                                    data-link-type="idl"
                                                    id="ref-for-dom-inputevent-gettargetranges-5"><code
                                                        class="methods-name">InputEvent.getTargetRanges()</code></a>:
                                                returns an arrays of <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a>
                                                which will be
                                                affected by the change to the DOM if it is not
                                                canceled.
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            A <a href="https://www.w3.org/TR/uievents/#user-agent">user
                                agent</a> <em class="rfc2119">MUST</em> agent <em class="rfc2119">MUST</em> <a
                                href="https://www.w3.org/TR/uievents/#dispatch">dispatch</a> [<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-ui-events"
                                    title="UI Events">UI-EVENTS</a></cite>] this event when
                            the user has attempted to input in a contenteditable element.
                            It does not necessarily mean the <a href="https://www.w3.org/TR/uievents/#user-agent">user
                                agent</a>
                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                                    title="UI Events">UI-EVENTS</a></cite>] will then update the DOM.
                        </p>
                        <p>
                            A <a href="https://www.w3.org/TR/uievents/#user-agent">user
                                agent</a> <em class="rfc2119">MUST NOT</em> <a
                                href="https://www.w3.org/TR/uievents/#dispatch">dispatch</a> [<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-ui-events"
                                    title="UI Events">UI-EVENTS</a></cite>] this event due
                            to events that are not caused by attempted user input, such as
                            system events.
                        </p>
                    </dd>
                </dl>
            </div>

            <div class="event-definition">
                <dl>
                    <dt id="event-type-input">
                        <dfn id="dfn-input" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a class="eventtype"
                                href="#event-type-input"><code>input</code></a></dfn>
                    </dt>
                    <dd>
                        <table class="invisible-table"
                            data-summary="This table contains information about the semantics of the given event type">
                            <tbody>
                                <tr>
                                    <th>
                                        Type
                                    </th>
                                    <td>
                                        <strong><code>input</code></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Interface
                                    </th>
                                    <td>
                                        <a href="#interface-InputEvent"><code>InputEvent</code></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Sync / Async
                                    </th>
                                    <td>
                                        Sync
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Bubbles
                                    </th>
                                    <td>
                                        Yes
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Trusted Targets
                                    </th>
                                    <td>
                                        Any <code>Element</code> with <code>contenteditable</code>
                                        attribute enabled.
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        <a href="https://www.w3.org/TR/uievents/#default-action">Default
                                            action</a> [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>]
                                    </th>
                                    <td>
                                        None
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Context<br>
                                        (trusted events)
                                    </th>
                                    <td>
                                        <ul>
                                            <li>
                                                <a href="#dfn-data" id="ref-for-dfn-data-3"><code
                                                        class="attribute-name">InputEvent.data</code></a>: the string
                                                containing the data that was added to the element,
                                                which <em class="rfc2119">MAY</em> be null if it doesn't apply.
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-datatransfer"
                                                    id="ref-for-dom-inputevent-datatransfer-4"><code
                                                        class="attribute-name">InputEvent.dataTransfer</code></a>:
                                                richtext data added or removed from element, which <em
                                                    class="rfc2119">MAY</em>
                                                be null if it doesn't apply.
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            A <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#user-agent">user
                                agent</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                                    title="UI Events">UI-EVENTS</a></cite>] <em class="rfc2119">MUST</em> <a
                                data-link-type="dfn" href="https://www.w3.org/TR/uievents/#dispatch">dispatch</a>
                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                                    title="UI Events">UI-EVENTS</a></cite>] this event
                            immediately after the DOM has been updated due to a user
                            expressed intention to change the document contents which the
                            browser has handled.
                        </p>
                    </dd>
                </dl>
            </div>
        </section>
    </section>
    <section id="privacy-and-security-considerations">
        <div class="header-wrapper">
            <h2 id="x6-privacy-and-security-considerations"><bdi class="secno">6. </bdi>
                Privacy and security considerations
            </h2><a class="self-link" href="#privacy-and-security-considerations"
                aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            <i>This section is not normative.</i>
        </p>
        <p>
            There are no known security or privacy impacts of this feature beyond
            <a data-link-type="dfn"
                href="https://www.w3.org/TR/fingerprinting-guidance/#dfn-browser-fingerprinting">fingerprinting</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-fingerprinting-guidance"
                    title="Mitigating Browser Fingerprinting in Web Specifications">fingerprinting-guidance</a></cite>]
            techniques that already are available
            through existing events, such as the <a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#keydown"><code>keydown</code></a> and <a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#keypress"><code>keypress</code></a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>]
            events.
        </p>
        <p>
            If this feature replaces existing events, it <em class="rfc2119">MAY</em> lead to a decline in
            available <a data-link-type="dfn"
                href="https://www.w3.org/TR/fingerprinting-guidance/#dfn-browser-fingerprinting">fingerprinting</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-fingerprinting-guidance"
                    title="Mitigating Browser Fingerprinting in Web Specifications">fingerprinting-guidance</a></cite>]
            techniques, as users' intentions are
            recorded, and not the particular type of hardware they used to
            <a data-lt="express intention" href="#dfn-express-intention" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-express-intention-3">express</a> this intention.
        </p>
    </section>
    <section id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="x7-acknowledgements"><bdi class="secno">7. </bdi>
                Acknowledgements
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            Thanks to: Michael Aufreiter, Adrian Bateman, Oliver Buchtala, Robin
            Berjon, Enrica Casucci, Bo Cupp, Domenic Denicola, Emil Eklund, Olivier
            Forget, Aryeh Gregor, Marijn Haverbeke, Yoshifumi Inoue, Koji Ishii,
            Gary Kacmarcik, Ian Kilpatrick, Frederico Caldeira Knabben, Takayoshi
            Kochi, Piotrek Koszuliński, Travis Leithead, Grisha Lyukshin, Miles
            Maxfield, Chaals McCathie Nevile, Masayuki Nakano, Ryosuke Niwa, Julie
            Parent, Ben Peters, Florian Rivoal, Morgan Smith, Hallvord R. M. Steen,
            Johan Sörlin, Cristian Talau, Dave Tapuska, Ojan Vafai, Léonie Watson,
            Xiaoqian Wu, Chong Zhang, Joanmarie, and everyone in the Editing
            Taskforce for their input and feedback.
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="a-1-informative-references"><bdi class="secno">A.1 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-cssom">[CSSOM]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS Object Model (CSSOM)</cite></a>. Daniel Glazman;
                    Emilio Cobos Álvarez. W3C. 26 August 2021. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
                </dd>
                <dt id="bib-dom">[DOM]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-fingerprinting-guidance">[fingerprinting-guidance]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/fingerprinting-guidance/"><cite>Mitigating Browser Fingerprinting in
                            Web Specifications</cite></a>. Nick Doty. W3C. 28 March 2019. W3C Working Group Note. URL:
                    <a
                        href="https://www.w3.org/TR/fingerprinting-guidance/">https://www.w3.org/TR/fingerprinting-guidance/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[INFRA]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. Living Standard. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-input-events">[INPUT-EVENTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/"><cite>Input Events Level 1</cite></a>. Johannes
                    Wilm; Ben Peters. W3C. 30 May 2019. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/input-events-1/">https://www.w3.org/TR/input-events-1/</a>
                </dd>
                <dt id="bib-uax29">[UAX29]</dt>
                <dd>
                    <a href="https://www.unicode.org/reports/tr29/tr29-43.html"><cite>Unicode Text
                            Segmentation</cite></a>. Josh Hadley. Unicode Consortium. 16 August 2023. Unicode Standard
                    Annex #29. URL: <a
                        href="https://www.unicode.org/reports/tr29/tr29-43.html">https://www.unicode.org/reports/tr29/tr29-43.html</a>
                </dd>
                <dt id="bib-ui-events">[UI-EVENTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/uievents/"><cite>UI Events</cite></a>. Gary Kacmarcik; Travis
                    Leithead. W3C. 15 September 2023. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-express-intention"
        aria-label="Links in this document to definition: express intention">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-express-intention"
                aria-label="Permalink for definition: express intention. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-express-intention-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-express-intention-2" title="§ 5.1.2 Attributes">§ 5.1.2 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-express-intention-3" title="§ 6. Privacy and security considerations">§ 6. Privacy
                    and security considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-kill-buffer"
        aria-label="Links in this document to definition: kill buffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-kill-buffer"
                aria-label="Permalink for definition: kill buffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-kill-buffer-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-kill-buffer-2" title="§ 5.1.2 Attributes">§ 5.1.2 Attributes</a> <a
                    href="#ref-for-dfn-kill-buffer-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-yank"
        aria-label="Links in this document to definition: yank">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-yank"
                aria-label="Permalink for definition: yank. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-character"
        aria-label="Links in this document to definition: character">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-character"
                aria-label="Permalink for definition: character. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-character-1" title="§ 2. Definitions">§ 2. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-character-2" title="§ 5.1.2 Attributes">§ 5.1.2 Attributes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-inputtype"
        aria-label="Links in this document to definition: inputType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-inputtype"
                aria-label="Permalink for definition: inputType. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputeventinit-datatransfer"
        aria-label="Links in this document to definition: dataTransfer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputeventinit-datatransfer"
                aria-label="Permalink for definition: dataTransfer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputeventinit-datatransfer-1" title="§ 5.1 Interface InputEvent">§ 5.1 Interface
                    InputEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputeventinit-targetranges"
        aria-label="Links in this document to definition: targetRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputeventinit-targetranges"
                aria-label="Permalink for definition: targetRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputeventinit-targetranges-1" title="§ 5.1 Interface InputEvent">§ 5.1 Interface
                    InputEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-inputtype-values"
        aria-label="Links in this document to definition: inputType values">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-inputtype-values"
                aria-label="Permalink for definition: inputType values. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-data-1" title="§ 5.1.1 Overview">§ 5.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dfn-data-2" title="§ 5.2 Event definitions">§ 5.2 Event definitions</a> <a
                    href="#ref-for-dfn-data-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputevent-datatransfer"
        aria-label="Links in this document to definition: dataTransfer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputevent-datatransfer"
                aria-label="Permalink for definition: dataTransfer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-1" title="§ 5.1 Interface InputEvent">§ 5.1 Interface
                    InputEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-2" title="§ 5.1.1 Overview">§ 5.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-3" title="§ 5.2 Event definitions">§ 5.2 Event
                    definitions</a> <a href="#ref-for-dom-inputevent-datatransfer-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputevent-gettargetranges"
        aria-label="Links in this document to definition: getTargetRanges()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputevent-gettargetranges"
                aria-label="Permalink for definition: getTargetRanges(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-1" title="§ 5.1 Interface InputEvent">§ 5.1 Interface
                    InputEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-2" title="§ 5.1.1 Overview">§ 5.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-3" title="§ 5.1.2 Attributes">§ 5.1.2 Attributes</a> <a
                    href="#ref-for-dom-inputevent-gettargetranges-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-5" title="§ 5.2 Event definitions">§ 5.2 Event
                    definitions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-beforeinput"
        aria-label="Links in this document to definition: beforeinput">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-beforeinput"
                aria-label="Permalink for definition: beforeinput. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-beforeinput-1" title="§ 3. Problems solved">§ 3. Problems solved</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-input"
        aria-label="Links in this document to definition: input">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-input"
                aria-label="Permalink for definition: input. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-input-1" title="§ 3. Problems solved">§ 3. Problems solved</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>