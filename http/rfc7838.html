<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="zh-hans">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 7838 - HTTP 替代服务</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = { "OWS": "imported.abnf", "delta-seconds": "imported.abnf", "port": "imported.abnf", "quoted-string": "imported.abnf", "token": "imported.abnf", "uri-host": "imported.abnf" };
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC7838">
    <meta property="og:description" content="HTTP Alternative Services">
    <meta property="og:url" content="https://httpwg.org/specs/rfc7838.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Alternative Services Concepts" href="#rfc.section.2">
    <link rel="Chapter" title="3 The Alt-Svc HTTP Header Field" href="#rfc.section.3">
    <link rel="Chapter" title="4 The ALTSVC HTTP/2 Frame" href="#rfc.section.4">
    <link rel="Chapter" title="5 The Alt-Used HTTP Header Field" href="#rfc.section.5">
    <link rel="Chapter" title="6 The 421 (Misdirected Request) HTTP Status Code" href="#rfc.section.6">
    <link rel="Chapter" title="7 IANA Considerations" href="#rfc.section.7">
    <link rel="Chapter" title="8 Internationalization Considerations" href="#rfc.section.8">
    <link rel="Chapter" title="9 Security Considerations" href="#rfc.section.9">
    <link rel="Chapter" title="10 References" href="#rfc.section.10">
    <link rel="Appendix" title="Acknowledgements" href="#rfc.section.unnumbered-1">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc7838.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="http://www.rfc-editor.org/info/rfc7838">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="HTTP, ALPN, Alternative Services">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Nottingham, M.">
    <meta name="dcterms.creator" content="McManus, P.">
    <meta name="dcterms.creator" content="Reschke, J. F.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:7838">
    <meta name="dcterms.issued" content="2016-04">
    <meta name="dcterms.abstract"
        content="This document specifies 'Alternative Services' for HTTP, which allow an origin's resources to be authoritatively available at a separate network location, possibly accessed with a different protocol configuration.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This document specifies 'Alternative Services' for HTTP, which allow an origin's resources to be authoritatively available at a separate network location, possibly accessed with a different protocol configuration.">
</head>

<body onload="getMeta(7838,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>7838</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">介绍</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">表示约定</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#alternative">替代服务概念</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#host_auth">主机认证</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#caching">替代服务缓存</a></li>
                                        <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#requiring-server-name-indication">要求 Server Name Indication</a>
                                        </li>
                                        <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#switching">使用替代服务</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">Alt-Svc HTTP
                                        头部字段</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#caching-alt-svc-header-field-values">缓存 Alt-Svc 头部字段值</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">ALTSVC HTTP/2
                                        帧</a></li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#indicator">Alt-Used HTTP
                                        头部字段</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#status">421（错误定向请求）HTTP
                                        状态码</a></li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                        注意事项</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.7.1">头部字段注册</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#alt-svc-frame-registration">ALTSVC HTTP/2 帧类型</a></li>
                                        <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana.parameters">Alt-Svc 参数注册表</a>
                                            <ul>
                                                <li><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parameter.registry.procedure">程序</a></li>
                                                <li><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parameter.registrations">注册</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#internationalization-considerations">国际化注意事项</a></li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">安全注意事项</a>
                                    <ul>
                                        <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#changing-ports">更改端口</a></li>
                                        <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#host_security">更改主机</a></li>
                                        <li><a href="#rfc.section.9.3">9.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#changing-protocols">更改协议</a></li>
                                        <li><a href="#rfc.section.9.4">9.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#tracking">使用替代服务跟踪客户端</a></li>
                                        <li><a href="#rfc.section.9.5">9.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#confusion-regarding-request-scheme">关于请求方案的混淆</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.1">规范性参考文献</a></li>
                                        <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">信息性参考文献</a></li>
                                    </ul>
                                </li>
                                <li><a href="#acknowledgements">致谢</a></li>
                                <li><a href="#rfc.authors">作者地址</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">互联网工程任务组 (IETF)</td>
                                <td class="text-right">M. Nottingham</td>
                            </tr>
                            <tr>
                                <td class="text-left">请求评注: 7838</td>
                                <td class="text-right">Akamai</td>
                            </tr>
                            <tr>
                                <td class="text-left">类别: 标准轨道</td>
                                <td class="text-right">P. McManus</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Mozilla</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">J. Reschke</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">greenbytes</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">2016年4月</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>HTTP 替代服务</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">摘要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本文档定义了 HTTP 的“替代服务”，允许某个源的资源在另一个经过授权的网络位置提供，可能使用不同的协议配置进行访问。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本备忘录状态</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>这是一个互联网标准轨道文档。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>本文档是互联网工程任务组 (IETF) 的产物，代表了 IETF 社区的共识。它已接受公开审查并已获得互联网工程指导组 (IESG) 批准发布。关于互联网标准的更多信息，请参阅 <a
                                href="https://www.rfc-editor.org/rfc/rfc5741.html#section-2">RFC 5741 的第 2 节</a>。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>有关本文档当前状态、任何勘误以及如何提供反馈的信息，可在 <a
                                href="http://www.rfc-editor.org/info/rfc7838">http://www.rfc-editor.org/info/rfc7838</a>
                            获取。</p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2016 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in
                            effect on the date of publication of this document. Please review these documents carefully,
                            as they describe your rights and restrictions with respect to this document. Code Components
                            extracted from this document must include Simplified BSD License text as described in
                            Section 4.e of the Trust Legal Provisions and are provided without warranty as described in
                            the Simplified BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">介绍</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">表示约定</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#alternative">替代服务概念</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#host_auth">主机认证</a>
                                </li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#caching">替代服务缓存</a>
                                </li>
                                <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#requiring-server-name-indication">要求服务器名称指示 (SNI)</a>
                                </li>
                                <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#switching">使用替代服务</a>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">Alt-Svc HTTP 头部字段</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#caching-alt-svc-header-field-values">缓存 Alt-Svc 头部字段值</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">ALTSVC HTTP/2 帧</a></li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#indicator">Alt-Used HTTP 头部字段</a>
                        </li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#status">421（错误定向请求）HTTP 状态码</a>
                        </li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                注意事项</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.7.1">头部字段注册</a></li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#alt-svc-frame-registration">ALTSVC HTTP/2 帧类型</a></li>
                                <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana.parameters">Alt-Svc 参数注册表</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parameter.registry.procedure">程序</a></li>
                                        <li><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parameter.registrations">注册</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#internationalization-considerations">国际化注意事项</a></li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#security-considerations">安全注意事项</a>
                            <ul>
                                <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#changing-ports">更改端口</a></li>
                                <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#host_security">更改主机</a></li>
                                <li><a href="#rfc.section.9.3">9.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#changing-protocols">更改协议</a></li>
                                <li><a href="#rfc.section.9.4">9.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#tracking">使用替代服务跟踪客户端</a></li>
                                <li><a href="#rfc.section.9.5">9.5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#confusion-regarding-request-scheme">关于请求方案的混淆</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.1">规范性参考文献</a></li>
                                <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">信息性参考文献</a></li>
                            </ul>
                        </li>
                        <li><a href="#acknowledgements">致谢</a></li>
                        <li><a href="#rfc.authors">作者地址</a></li>
                    </ul>
                </div>
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">介绍</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>HTTP <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            将资源的标识与其位置合并。换句话说，“http://” 和 “https://” 的 URI 同时用于命名和查找要交互的对象。</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>在某些情况下，将 HTTP 中的标识和位置分离是可取的；保留资源的相同标识符，但在网络上的不同位置与其交互。</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>例如：</p>
                        <ul>
                            <li>当源服务器负载较高时，可能希望将客户端重定向到不同的服务器，或找到一个更接近客户端位置的服务器。</li>
                            <li>源服务器可能希望使用一种新的协议提供对其资源的访问，例如 HTTP/2 <a href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>，或使用改进的安全性（例如传输层安全
                                TLS <a href="#RFC5246"><cite
                                        title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>）。
                            </li>
                            <li>出于运营目的，源服务器可能希望将其客户端划分为具有不同能力的组，例如支持服务器名称指示 (SNI) 的客户端（参见 <a href="#RFC6066"><cite
                                        title="Transport Layer Security (TLS) Extensions: Extension Definitions">[RFC6066]</cite></a>
                                第 3 节）。</li>
                        </ul>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>本规范在 HTTP 中定义了一个新概念“替代服务”（Alternative Services），允许源服务器指定在网络上与其交互的额外方式。它在 <a
                                href="#alternative" title="Alternative Services Concepts">第 2 节</a> 中定义了一个通用框架，以及使用 HTTP
                            头字段（<a href="#alt-svc" title="The Alt-Svc HTTP Header Field">第 3 节</a>）或 HTTP/2 帧（<a
                                href="#frame" title="The ALTSVC HTTP/2 Frame">第 4
                                节</a>）来通告其存在的具体机制，并提供了一种指示已使用替代服务的方法（<a href="#indicator"
                                title="The Alt-Used HTTP Header Field">第 5 节</a>）。</p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>它还认可状态码 421（错误定向请求）（<a href="#status"
                                title="The 421 (Misdirected Request) HTTP Status Code">第 6
                                节</a>），源服务器或其指定的替代服务器可在使用了错误位置的情况下用来表明它们并非对某个源具有权威性。</p>
                    </div>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#notational-conventions">表示约定</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>本文档中的关键词 "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
                                NOT", "RECOMMENDED", "MAY", 和 "OPTIONAL" 应按 <a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</cite></a>
                                的描述来解释。</p>
                        </div>
                        <div id="rfc.section.1.1.p.2" class="avoidbreakafter">
                            <p id="imported.abnf">本文档使用 <a href="#RFC5234"><cite
                                        title="Augmented BNF for Syntax Specifications: ABNF">[RFC5234]</cite></a> 中定义并由
                                <a href="#RFC7405"><cite
                                        title="Case-Sensitive String Support in ABNF">[RFC7405]</cite></a> 更新的扩展
                                BNF（ABNF），以及在 <a href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                                第 7 节中定义的 "#rule" 扩展。下面的规则在 <a href="#RFC5234"><cite
                                        title="Augmented BNF for Syntax Specifications: ABNF">[RFC5234]</cite></a>、<a
                                    href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                                和 <a href="#RFC7234"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>
                                中定义：
                            </p>
                        </div>
                        <div id="rfc.figure.u.1">
                            <div>
                                <pre class="inline">OWS           = &lt;OWS, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#whitespace" title="Whitespace">Section 3.2.3</a>&gt;
delta-seconds = &lt;delta-seconds; see <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#delta-seconds" title="Delta Seconds">Section 1.2.1</a>&gt;
port          = &lt;port, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#uri" title="Uniform Resource Identifiers">Section 2.7</a>&gt;
quoted-string = &lt;quoted-string, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components" title="Field Value Components">Section 3.2.6</a>&gt;
token         = &lt;token, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components" title="Field Value Components">Section 3.2.6</a>&gt;
uri-host      = &lt;uri-host, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#uri" title="Uniform Resource Identifiers">Section 2.7</a>&gt;
</pre>
                            </div>
                        </div>
                    </section>
                </section>
                <section id="alternative">
                    <h2 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#alternative">替代服务概念</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>本规范定义了 HTTP 中的一个新概念“替代服务”（"Alternative Service"）。当一个源（origin）<a href="#RFC6454"><cite
                                    title="The Web Origin Concept">[RFC6454]</cite></a>
                            的资源可通过不同的协议/主机/端口组合访问时，就称该源有可用的替代服务。</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>替代服务可用于在网络上的不同位置与源服务器的资源进行交互，可能使用不同的协议配置。替代服务在权威性上被视为对源资源具有权威性，按照 <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            中的定义（参见 <a
                                href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#establishing.authority"
                                title="Establishing Authority">第 9.1 节</a>）。</p>
                    </div>
                    <div id="rfc.figure.u.2">
                        <p>例如，一个源：</p>
                        <div>
                            <pre class="text">("http", "www.example.com", "80")
</pre>
                        </div>
                    </div>
                    <div id="rfc.figure.u.3">
                        <p>可能声明其资源也可通过以下替代服务访问：</p>
                        <div>
                            <pre class="text">("h2", "new.example.com", "81")
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>按其性质，替代服务明确以源为粒度；不能选择性地只对源内的某些资源应用替代服务。</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>替代服务并不替换或改变任何给定资源的源；通常，它们对位于访问机制“上层”的软件不可见。替代服务本质上是可用于到达源的替代路由信息，就像 DNS 的 CNAME 或 SRV
                            记录在名称解析级别定义路由信息一样。每个源映射到一组这些路由 —— 默认路由由源本身导出，其他路由则基于替代服务信息引入。</p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>此外，重要的是要注意，替代服务元组的第一个成员不同于源的 "scheme" 组件；它更具体，不仅标识所使用协议的主要版本，还可能标识该协议的通信选项。</p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>这意味着使用替代服务的客户端可以更改用于获取资源的主机、端口和协议，但这些更改 <em class="bcp14">MUST NOT</em> 被传播到使用 HTTP
                            的应用程序；从该角度来看，被访问的 URI 及从中派生的所有信息（scheme、host 和 port）与之前相同。</p>
                    </div>
                    <div id="rfc.section.2.p.7">
                        <p>重要的是，这也包括它的安全上下文；特别是，当使用 TLS <a href="#RFC5246"><cite
                                    title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>
                            进行认证时，替代服务需要为源的主机名出示证书，而不是替代主机的证书。同样，Host 头字段（<a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>）仍然从源派生，而不是从替代服务派生（就像使用
                            CNAME 时一样）。</p>
                    </div>
                    <div id="rfc.section.2.p.8">
                        <p>这些更改 <em class="bcp14">MAY</em> 在调试工具、控制台等中显示出来。</p>
                    </div>
                    <div id="rfc.section.2.p.9">
                        <p>形式上，替代服务由以下组合标识：</p>
                        <ul>
                            <li>应用层协议协商（ALPN）协议名称，参见 <a href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                            </li>
                            <li>主机，参见 <a href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> 第
                                3.2.2 节</li>
                            <li>端口，参见 <a href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> 第
                                3.2.3 节</li>
                        </ul>
                    </div>
                    <div id="rfc.section.2.p.10">
                        <p>ALPN 协议名称用于标识替代服务所使用的应用协议或协议套件。注意，对于本规范的目的，ALPN 协议名称隐含地在其所标识的协议套件中包含 TLS，除非在其定义中另有说明。特别地，ALPN
                            名称 "http/1.1"（在 <a href="#RFC7301"><cite
                                    title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                            第 6 节注册）标识在 TLS 之上的 HTTP/1.1。</p>
                    </div>
                    <div id="rfc.section.2.p.11">
                        <p>此外，每个替代服务 <em class="bcp14">MUST</em> 具有以秒为单位表示的有效期（见 <a href="#caching"
                                title="Alternative Service Caching">第 2.2 节</a>）。</p>
                    </div>
                    <div id="rfc.section.2.p.12">
                        <p>客户端可以通过多种方式发现与某个源关联的替代服务。本文档描述了两种此类机制：在响应中使用 Alt-Svc HTTP 头字段（<a href="#alt-svc"
                                title="The Alt-Svc HTTP Header Field">第 3 节</a>）和使用 ALTSVC HTTP/2 帧类型（<a href="#frame"
                                title="The ALTSVC HTTP/2 Frame">第 4 节</a>）。</p>
                    </div>
                    <div id="rfc.section.2.p.13">
                        <p>本节其余部分描述了与替代服务相关的通用要求，无论这些替代服务如何被发现。</p>
                    </div>
                    <section id="host_auth">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#host_auth">主机认证</a>
                        </h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>客户端 <em class="bcp14">MUST</em> 对替代服务受控并对整个源有效有合理的保证。这可以缓解在 <a href="#host_security"
                                    title="Changing Hosts">第 9.2 节</a> 描述的攻击。</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>为本文档目的，“合理的保证”可以通过使用基于 TLS 的协议并执行 <a href="#RFC2818"><cite
                                        title="HTTP Over TLS">[RFC2818]</cite></a> 中定义的证书检查来建立。客户端 <em
                                    class="bcp14">MAY</em> 强加额外的标准来建立合理的保证。</p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>例如，如果源的主机是 "www.example.com"，且在 "other.example.com" 上提供了使用 "h2" 协议的替代服务，并且该替代服务出示的证书对
                                "www.example.com" 有效，则客户端可以使用该替代服务。然而，如果任何一方使用的是 "h2c"
                                协议，则客户端不能使用它，因为在该协议中（在本规范发布时）没有机制来建立源与替代之间的关系。</p>
                        </div>
                    </section>
                    <section id="caching">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a href="#caching">替代服务缓存</a>
                        </h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>用于发现替代服务的机制也会为其关联一个有效期；例如，Alt-Svc 头字段使用 "ma" 参数。</p>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>当替代服务被认为是新鲜的时，客户端可以随时选择使用替代服务而不是源；有关具体建议，请参见 <a href="#switching"
                                    title="Using Alternative Services">第 2.4 节</a>。</p>
                        </div>
                        <div id="rfc.section.2.2.p.3">
                            <p>已经与替代服务建立连接的客户端在其有效期结束时不需要停止使用它；该缓存机制旨在限制替代服务用于建立新连接的时长，而不是限制已有连接的使用。</p>
                        </div>
                        <div id="rfc.section.2.2.p.4">
                            <p>替代服务对相关源完全具有权威性，包括清除或更新已缓存的替代服务条目、延长有效期，以及源服务器拥有的任何其他权限。</p>
                        </div>
                        <div id="rfc.section.2.2.p.5">
                            <p>当替代服务用于将客户端发送到最优服务器时，网络配置的变化可能导致缓存值变得不再最优。因此，当可用网络状态信息表明网络已改变时，客户端 <em
                                    class="bcp14">SHOULD</em> 从缓存中移除所有没有带有值 "1" 的 "persist" 标志的替代服务。</p>
                        </div>
                    </section>
                    <section id="requiring-server-name-indication">
                        <h3 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3.</a>&nbsp;<a
                                href="#requiring-server-name-indication">要求服务器名称指示</a></h3>
                        <div id="rfc.section.2.3.p.1">
                            <p>客户端 <em class="bcp14">MUST NOT</em> 使用基于 TLS 的替代服务，除非客户端支持 TLS
                                服务器名称指示（SNI）。这有助于节约替代服务主机上的 IP 地址。</p>
                        </div>
                        <div id="rfc.section.2.3.p.2">
                            <p>注意，客户端在 TLS 中提供的 SNI 信息将是源的主机名，而不是替代主机名（Host HTTP 头字段的值亦是如此）。</p>
                        </div>
                    </section>
                    <section id="switching">
                        <h3 id="rfc.section.2.4"><a href="#rfc.section.2.4">2.4.</a>&nbsp;<a
                                href="#switching">使用替代服务</a></h3>
                        <div id="rfc.section.2.4.p.1">
                            <p>按其性质，替代服务是 <em
                                    class="bcp14">可选的</em>：客户端并不必须使用它们。然而，当服务器使用替代服务时，客户端以可预测的方式进行处理是有利的，这有助于负载均衡等目的。
                            </p>
                        </div>
                        <div id="rfc.section.2.4.p.2">
                            <p>因此，如果支持本规范的客户端获知了某个替代服务，并且该替代服务信息是新鲜的（见 <a href="#caching"
                                    title="Alternative Service Caching">第 2.2 节</a>），且替代服务协议的安全特性相比现有连接是可取的，则客户端 <em
                                    class="bcp14">SHOULD</em> 在可用时立即对所有发往关联源的请求使用该替代服务。可行的替代服务在各方面都被视为源；这包括有能力公布替代服务。
                            </p>
                        </div>
                        <div id="rfc.section.2.4.p.3">
                            <p>如果客户端获知多个替代服务，它应根据自身标准选择最合适的，并考虑安全特性。例如，源可能会公布多个替代服务以通知客户端对多个 HTTP 版本的支持。</p>
                        </div>
                        <div id="rfc.section.2.4.p.4">
                            <p>被配置为为给定请求使用代理的客户端 <em class="bcp14">SHOULD NOT</em> 直接为该请求连接到替代服务，而应通过该代理路由请求。</p>
                        </div>
                        <div id="rfc.section.2.4.p.5">
                            <p>当客户端为请求使用替代服务时，它可以使用 Alt-Used 头字段（<a href="#indicator"
                                    title="The Alt-Used HTTP Header Field">第 5 节</a>）向服务器指示这一点。</p>
                        </div>
                        <div id="rfc.section.2.4.p.6">
                            <p>客户端不需要阻塞对任何现有连接的请求；可以继续使用该连接，直到替代连接建立为止。然而，如果现有连接的安全性较弱（例如明文的
                                HTTP/1.1），则可能有必要阻塞直到新连接完全可用以避免信息泄露。</p>
                        </div>
                        <div id="rfc.section.2.4.p.7">
                            <p>此外，如果与替代服务的连接失败或无响应，客户端 <em class="bcp14">MAY</em>
                                回退到使用源或另一个替代服务。但请注意，这可能成为降级攻击的基础，从而失去替代服务提供的任何增强安全属性。如果与替代服务的连接未协商出预期的协议（例如 ALPN 未协商出
                                h2，或对 h2c 的 Upgrade 请求未被接受），则该替代服务连接 <em class="bcp14">MUST</em> 被视为失败。</p>
                        </div>
                    </section>
                </section>
                <section id="alt-svc">
                    <h2 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#alt-svc">Alt-Svc HTTP 头部字段</a>
                    </h2>
                    <div id="rfc.section.3.p.1">
                        <p>HTTP(S) 源服务器可以通过在响应中添加 Alt-Svc 头字段来向客户端通告替代服务的可用性。</p>
                    </div>
                    <div id="rfc.figure.u.4">
                        <div>
                            <pre class="inline">Alt-Svc       = clear / 1#alt-value
clear         = %s"clear"; "clear", case-sensitive
alt-value     = alternative *( OWS ";" OWS parameter )
alternative   = protocol-id "=" alt-authority
protocol-id   = &lt;a href="#imported.abnf" class="smpl"&gt;token&lt;/a&gt; ; percent-encoded ALPN protocol name
alt-authority = &lt;a href="#imported.abnf" class="smpl"&gt;quoted-string&lt;/a&gt; ; containing [ &lt;a href="#imported.abnf" class="smpl"&gt;uri-host&lt;/a&gt; ] ":" &lt;a href="#imported.abnf" class="smpl"&gt;port&lt;/a&gt;
parameter     = &lt;a href="#imported.abnf" class="smpl"&gt;token&lt;/a&gt; "=" ( &lt;a href="#imported.abnf" class="smpl"&gt;token&lt;/a&gt; / &lt;a href="#imported.abnf" class="smpl"&gt;quoted-string&lt;/a&gt; )
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.3.p.2">
                        <p>字段值要么由一组值组成，每个值表示一个替代服务，要么为关键字 "clear"。</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <p>字段值包含特殊值 "clear" 表示源请求使得该源的所有替代项失效（包括在同一响应中同时包含 "clear" 和替代服务时，以防回复无效）。</p>
                    </div>
                    <div id="rfc.section.3.p.4">
                        <p>ALPN 协议名称是八位字节序列，对格式没有额外约束。对于 tokens 中不允许的八位字节（参见 <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            第 3.2.6 节），<em class="bcp14">MUST</em> 按照 <a href="#RFC3986"><cite
                                    title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> 第 2.1
                            节进行百分号编码。因此，表示百分号字符 "%"（十六进制 25）的八位字节也 <em class="bcp14">MUST</em> 进行百分号编码。</p>
                    </div>
                    <div id="rfc.section.3.p.5">
                        <p>为确保任何 ALPN 协议名称只有一种表示方式，适用以下附加约束：</p>
                        <ol>
                            <li>如果某个八位字节是有效的 token 字符（除了 "%" 之外），则该八位字节 <em class="bcp14">MUST NOT</em> 被百分号编码；</li>
                            <li>在使用百分号编码时，<em class="bcp14">MUST</em> 使用大写十六进制数字。</li>
                        </ol>
                    </div>
                    <div id="rfc.section.3.p.6">
                        <p>在这些约束下，接收方可以使用简单的字符串比较来匹配协议标识符。</p>
                    </div>
                    <div id="rfc.section.3.p.7">
                        <p>"alt-authority" 组件由一个 <em class="bcp14">可选的</em> uri-host（参见 <a href="#RFC3986"><cite
                                    title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> 第
                            3.2.2 节）、一个冒号 ":" 和一个端口号组成。</p>
                    </div>
                    <div id="rfc.figure.u.5">
                        <p>例如：</p>
                        <div>
                            <pre class="text">Alt-Svc: h2=":8000"
</pre>
                        </div>
                        <p>这表示在相同主机上使用 8000 端口的 "h2" 协议（<a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>）。</p>
                    </div>
                    <div id="rfc.figure.u.6">
                        <p>涉及更换主机的示例：</p>
                        <div>
                            <pre class="text">Alt-Svc: h2="new.example.org:80"
</pre>
                        </div>
                        <p>这表示在主机 "new.example.org" 上的 "h2" 协议，运行在端口 80。注意需要使用 "quoted-string" 语法，因为 ":" 在 "token"
                            中不是允许的字符。</p>
                    </div>
                    <div id="rfc.table.u.1" class="table table-condensed table-striped">
                        <p>协议名称转义示例：</p>
                        <table class="table table-condensed table-striped all tleft">
                            <thead>
                                <tr>
                                    <th>ALPN 协议名称</th>
                                    <th>protocol-id</th>
                                    <th>说明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left">h2</td>
                                    <td class="text-left">h2</td>
                                    <td class="text-left">无需转义</td>
                                </tr>
                                <tr>
                                    <td class="text-left">w=x:y#z</td>
                                    <td class="text-left">w%3Dx%3Ay#z</td>
                                    <td class="text-left">"=" 与 ":" 已转义</td>
                                </tr>
                                <tr>
                                    <td class="text-left">x%y</td>
                                    <td class="text-left">x%25y</td>
                                    <td class="text-left">"%" 需要转义</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="rfc.section.3.p.8">
                        <p>Alt-Svc <em class="bcp14">MAY</em> 出现在任何 HTTP 响应消息中，无论状态码如何。注意 Alt-Svc
                            的接收者可以忽略该头字段（在某些情况下必须忽略；参见 <a href="#host_auth" title="Host Authentication">第 2.1 节</a> 和 <a
                                href="#status" title="The 421 (Misdirected Request) HTTP Status Code">第 6 节</a>）。</p>
                    </div>
                    <div id="rfc.figure.u.7">
                        <p>Alt-Svc 字段值可以包含多个值：</p>
                        <div>
                            <pre class="text">Alt-Svc: h2="alt.example.com:8000", h2=":443"
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.3.p.9">
                        <p>当存在多个值时，值的顺序反映服务器的偏好（第一个值为最优先的替代项）。</p>
                    </div>
                    <div id="rfc.section.3.p.10">
                        <p>Alt-Svc 所通告的值可被客户端用于打开到替代服务的新连接。后续请求可以立即开始使用该新连接，或者在创建新连接的同时继续使用现有连接。</p>
                    </div>
                    <div id="rfc.section.3.p.11">
                        <p>在使用 HTTP/2 时（<a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>），服务器 <em
                                class="bcp14">SHOULD</em> 改为发送 ALTSVC 帧（见 <a href="#frame"
                                title="The ALTSVC HTTP/2 Frame">第 4 节</a>）。单个 ALTSVC 帧可为一个连接发送；不需要为每个请求都发送新的帧。尽管有此建议，通过
                            HTTP/2 传递的响应中仍然可以包含 Alt-Svc 头字段。</p>
                    </div>
                    <div id="rfc.section.3.p.12">
                        <p>每个 "alt-value" 后面可跟一个可选的以分号分隔的参数列表，每个 "parameter" 由一个名称和一个值组成。</p>
                    </div>
                    <div id="rfc.section.3.p.13">
                        <p>本规范定义了两个参数："ma" 与 "persist"，其定义见 <a href="#caching-alt-svc-header-field-values"
                                title="Caching Alt-Svc Header Field Values">第 3.1 节</a>。未知参数 <em class="bcp14">MUST</em>
                            被忽略。也就是说，出现未知参数的 alt-value 的处理 <em class="bcp14">MUST</em> 当作该未知参数不存在。</p>
                    </div>
                    <div id="rfc.section.3.p.14">
                        <p>新参数可以在扩展规范中定义（有关注册详情见 <a href="#iana.parameters" title="Alt-Svc Parameter Registry">第 7.3
                                节</a>）。</p>
                    </div>
                    <div id="rfc.section.3.p.15">
                        <p>注意，所有允许使用 "quoted-string" 语法的字段元素 <em class="bcp14">MUST</em> 按照 <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            第 3.2.6 节处理。</p>
                    </div>
                    <section id="caching-alt-svc-header-field-values">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a
                                href="#caching-alt-svc-header-field-values">缓存 Alt-Svc 头部字段值</a></h3>
                        <div id="rfc.section.3.1.p.1">
                            <p>当使用 Alt-Svc 通告替代服务时，该服务自消息生成之日起在默认情况下被认为在 24 小时内是新鲜的。可以使用 "ma"（最大年龄）参数修改此值。</p>
                        </div>
                        <div id="rfc.figure.u.8">
                            <p>语法：</p>
                            <div>
                                <pre class="inline">ma = &lt;a href="#imported.abnf" class="smpl"&gt;delta-seconds&lt;/a&gt;; see <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#delta-seconds" title="Delta Seconds">Section 1.2.1</a>
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <p>delta-seconds 值表示自响应生成起替代服务被视为新鲜的秒数。</p>
                        </div>
                        <div id="rfc.figure.u.9">
                            <div>
                                <pre class="text">Alt-Svc: h2=":443"; ma=3600
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.3">
                            <p>关于确定响应年龄的详细信息，请参见 <a href="#RFC7234"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a> 第
                                4.2.3 节。</p>
                        </div>
                        <div id="rfc.figure.u.10">
                            <p>例如，某个响应：</p>
                            <div>
                                <pre class="text">HTTP/1.1 200 OK
Content-Type: text/html
Cache-Control: max-age=600
Age: 30
Alt-Svc: h2=":8000"; ma=60
</pre>
                            </div>
                            <p>表示一个替代服务可用并在接下来的 60 秒内可用。然而，该响应已被缓存 30 秒（根据 Age 头字段值）；因此，该替代服务自接收响应时起仅新鲜 30 秒，减去估计的传输时间。
                            </p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <p>注意，用于 HTTP 缓存的新鲜期（此处为 600 秒）不影响 Alt-Svc 值的缓存。</p>
                        </div>
                        <div id="rfc.section.3.1.p.5">
                            <p>当从源接收到 Alt-Svc 响应头字段时，其值会使该源的所有已缓存替代服务无效并被替换。</p>
                        </div>
                        <div id="rfc.section.3.1.p.6">
                            <p>默认情况下，当客户端检测到网络变化时，已缓存的替代服务将被清除。那些预期更长寿命的替代服务（例如不针对客户端访问网络特定的服务）可以带有 "persist" 参数并设置为值
                                "1"，作为该服务可能在网络配置变化后仍有用的提示。</p>
                        </div>
                        <div id="rfc.figure.u.11">
                            <p>语法：</p>
                            <div>
                                <pre class="inline">persist = "1"
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.7" class="avoidbreakafter">
                            <p>例如：</p>
                        </div>
                        <div id="rfc.figure.u.12">
                            <div>
                                <pre class="text">Alt-Svc: h2=":443"; ma=2592000; persist=1
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.8">
                            <p>本规范仅为 "persist" 定义了单一值。客户端 <em class="bcp14">MUST</em> 忽略值不是 "1" 的 "persist" 参数。</p>
                        </div>
                        <div id="rfc.section.3.1.p.9">
                            <p>关于替代服务缓存的一般要求，请参见 <a href="#caching" title="Alternative Service Caching">第 2.2 节</a>。</p>
                        </div>
                    </section>
                </section>
                <section id="frame">
                    <h2 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#frame">ALTSVC HTTP/2 帧</a>
                    </h2>
                    <div id="rfc.section.4.p.1">
                        <p>ALTSVC HTTP/2 帧（参见 <a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a> 第 4 节）向 HTTP/2
                            客户端通告替代服务的可用性。</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <p>ALTSVC 帧是对 HTTP/2 的非关键扩展。不支持该帧的端点将根据 <a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a> 中定义的可扩展性规则忽略它。
                        </p>
                    </div>
                    <div id="rfc.section.4.p.3">
                        <p>服务器发送到流 0 以外的流的 ALTSVC 帧表示所传达的替代服务与该流的源关联。</p>
                    </div>
                    <div id="rfc.section.4.p.4">
                        <p>服务器发送到流 0 的 ALTSVC 帧表示所传达的替代服务与帧中 Origin 字段包含的源关联。与客户端当前连接不被视为该连接权威的源关联 <em
                                class="bcp14">MUST</em> 被忽略。</p>
                    </div>
                    <div id="rfc.section.4.p.5">
                        <p>ALTSVC 帧类型为 0xa（十进制 10）。</p>
                    </div>
                    <div id="rfc.figure.1">
                        <div>
                            <pre class="drawing"> +-------------------------------+-------------------------------+
 |         Origin-Len (16)       | Origin? (*)                 ...
 +-------------------------------+-------------------------------+
 |                   Alt-Svc-Field-Value (*)                   ...
 +---------------------------------------------------------------+
</pre>
                        </div>
                    </div>
                    <p class="figure">图 1：ALTSVC 帧有效载荷</p>
                    <div id="rfc.section.4.p.6">
                        <p>ALTSVC 帧包含以下字段：</p>
                        <dl>
                            <dt>Origin-Len:</dt>
                            <dd>一个无符号 16 位整数，指示 Origin 字段的长度（以八位字节计）。</dd>
                            <dt>Origin:</dt>
                            <dd>一个 <em class="bcp14">可选的</em> 字符序列，包含一个源的 ASCII 序列化形式（参见 <a href="#RFC6454"><cite
                                        title="The Web Origin Concept">[RFC6454]</cite></a> 第 6.2 节），该源是替代服务适用的对象。</dd>
                            <dt>Alt-Svc-Field-Value:</dt>
                            <dd>一序列八位字节（长度由从帧长度中减去所有前置字段的长度来确定），包含与 <a href="#alt-svc"
                                    title="The Alt-Svc HTTP Header Field">第 3 节</a> 中定义的 Alt-Svc 字段值相同的值（ABNF 生成式
                                "Alt-Svc"）。</dd>
                        </dl>
                    </div>
                    <div id="rfc.section.4.p.7">
                        <p>ALTSVC 帧未定义任何标志。</p>
                    </div>
                    <div id="rfc.section.4.p.8">
                        <p>ALTSVC 帧旨在由客户端接收。作为服务器的设备 <em class="bcp14">MUST</em> 忽略它。</p>
                    </div>
                    <div id="rfc.section.4.p.9">
                        <p>在流 0 上且 Origin 信息为空（长度为 0）的 ALTSVC 帧是无效的，<em class="bcp14">MUST</em> 被忽略。在流 0 以外的流上包含非空
                            Origin 信息的 ALTSVC 帧是无效的，<em class="bcp14">MUST</em> 被忽略。</p>
                    </div>
                    <div id="rfc.section.4.p.10">
                        <p>ALTSVC 帧按逐跳处理。中间节点 <em class="bcp14">MUST NOT</em> 转发 ALTSVC 帧，尽管它可以使用 ALTSVC
                            帧中包含的信息来生成并发送给其自身客户端的新 ALTSVC 帧。</p>
                    </div>
                    <div id="rfc.section.4.p.11">
                        <p>接收 ALTSVC 帧在语义上等同于接收 Alt-Svc 头字段。因此，ALTSVC 帧会导致对应源的替代服务被替换。注意，混合使用 Alt-Svc 头字段与 ALTSVC
                            帧并不是明智的做法，因为接收顺序可能难以预测。</p>
                    </div>
                </section>
                <section id="indicator">
                    <h2 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#indicator">Alt-Used HTTP
                            头部字段</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>Alt-Used 头字段用于请求中标识正在使用的替代服务，就像 Host 头字段用于标识源的主机和端口一样（参见 <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            第 5.4 节）。</p>
                    </div>
                    <div id="rfc.figure.u.13">
                        <div>
                            <pre class="inline">Alt-Used     = uri-host [ ":" port ]
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <p>Alt-Used 的目的是允许替代服务检测循环、区分用于负载均衡的流量，并确保可以识别流量的预期目的地，因为在协议使用后才引入此信息已被证明会导致问题。</p>
                    </div>
                    <div id="rfc.section.5.p.3">
                        <p>使用替代服务时，客户端 <em class="bcp14">SHOULD</em> 在所有请求中包含 Alt-Used 头字段。</p>
                    </div>
                    <div id="rfc.figure.u.14">
                        <p>例如：</p>
                        <div>
                            <pre class="text2">GET /thing HTTP/1.1
Host: origin.example.com
Alt-Used: alternate.example.net
</pre>
                        </div>
                    </div>
                </section>
                <section id="status">
                    <h2 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;<a href="#status">421（错误定向请求）HTTP
                            状态码</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>421（错误定向请求）状态码在 <a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a> 的第 9.1.2
                            节中定义，用于表明当前服务器实例并非请求资源的权威实体。这可以用来指示替代服务并非权威的情况（参见 <a href="#alternative"
                                title="Alternative Services Concepts">第 2 节</a>）。</p>
                    </div>
                    <div id="rfc.section.6.p.2">
                        <p>客户端从替代服务接收到 421（错误定向请求）时，<em class="bcp14">MUST</em> 从其替代服务缓存中移除对应源的条目（见 <a href="#caching"
                                title="Alternative Service Caching">第 2.2 节</a>）。无论请求方法是否幂等，客户端 <em
                                class="bcp14">MAY</em> 重试该请求，要么在另一个替代服务器上，要么在源上。</p>
                    </div>
                    <div id="rfc.section.6.p.3">
                        <p>在 421（错误定向请求）响应中的 Alt-Svc 头字段 <em class="bcp14">MUST</em> 被忽略。</p>
                    </div>
                </section>
                <section id="iana-considerations">
                    <h2 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#iana-considerations">IANA
                            注意事项</a></h2>
                    <section id="n-header-field-registrations">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#n-header-field-registrations">头部字段注册</a></h3>
                        <div id="rfc.section.7.1.p.1">
                            <p>HTTP 头部字段在 IANA 维护的 “Message Headers” 注册表中注册，地址为 &lt;<a
                                    href="https://www.iana.org/assignments/message-headers/">https://www.iana.org/assignments/message-headers/</a>&gt;。
                            </p>
                        </div>
                        <div id="rfc.section.7.1.p.2" class="avoidbreakafter">
                            <p>本文档定义了以下 HTTP 头字段，因此它们的关联注册条目已根据永久注册添加（参见 <a href="#BCP90"><cite
                                        title="Registration Procedures for Message Header Fields">BCP90</cite></a>）：</p>
                        </div>
                        <div id="rfc.table.1" class="table table-condensed table-striped">
                            <div id="iana.header.registration.table"></div>
                            <table class="table table-condensed table-striped full tleft">
                                <thead>
                                    <tr>
                                        <th>头字段名</th>
                                        <th>协议</th>
                                        <th>状态</th>
                                        <th>参考</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-left">Alt-Svc</td>
                                        <td class="text-left">http</td>
                                        <td class="text-left">standard</td>
                                        <td class="text-left"><a href="#alt-svc" title="The Alt-Svc HTTP Header Field">第
                                                3 节</a> </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Alt-Used</td>
                                        <td class="text-left">http</td>
                                        <td class="text-left">standard</td>
                                        <td class="text-left"><a href="#indicator"
                                                title="The Alt-Used HTTP Header Field">第 5 节</a> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="rfc.section.7.1.p.3">
                            <p>变更控制者为：“IETF (iesg@ietf.org) -- Internet Engineering Task Force”。</p>
                        </div>
                    </section>
                    <section id="alt-svc-frame-registration">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a
                                href="#alt-svc-frame-registration">ALTSVC HTTP/2 帧类型</a></h3>
                        <div id="rfc.section.7.2.p.1">
                            <p>本文档在 “HTTP/2 Frame Type” 注册表中注册了 ALTSVC 帧类型（参见 <a href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a> 第 11.2 节）。
                            </p>
                            <ul class="empty">
                                <li>帧类型：ALTSVC</li>
                                <li>代码：0xa</li>
                                <li>规范：本文件的 <a href="#frame" title="The ALTSVC HTTP/2 Frame">第 4 节</a></li>
                            </ul>
                        </div>
                    </section>
                    <section id="iana.parameters">
                        <h3 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3.</a>&nbsp;<a
                                href="#iana.parameters">Alt-Svc 参数注册表</a></h3>
                        <div id="rfc.section.7.3.p.1">
                            <p>“超文本传输协议 (HTTP) Alt-Svc 参数注册表”定义了参数名称空间。该注册表已创建并将在 &lt;<a
                                    href="http://www.iana.org/assignments/http-alt-svc-parameters">http://www.iana.org/assignments/http-alt-svc-parameters</a>&gt;
                                维护。</p>
                        </div>
                        <section id="parameter.registry.procedure">
                            <h4 id="rfc.section.7.3.1"><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;<a
                                    href="#parameter.registry.procedure">程序</a></h4>
                            <div id="rfc.section.7.3.1.p.1">
                                <p>注册 <em class="bcp14">MUST</em> 包含以下字段：</p>
                                <ul>
                                    <li>参数名称</li>
                                    <li>指向规范文本的指针</li>
                                </ul>
                            </div>
                            <div id="rfc.section.7.3.1.p.2">
                                <p>要添加到此名称空间的值需要专家审查（参见 <a href="#RFC5226"><cite
                                            title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC5226]</cite></a>
                                    第 4.1 节）。</p>
                            </div>
                        </section>
                        <section id="parameter.registrations">
                            <h4 id="rfc.section.7.3.2"><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;<a
                                    href="#parameter.registrations">注册</a></h4>
                            <div id="rfc.section.7.3.2.p.1" class="avoidbreakafter">
                                <p>“超文本传输协议 (HTTP) Alt-Svc 参数注册表”已用以下注册项填写：</p>
                            </div>
                            <div id="rfc.table.u.2" class="table table-condensed table-striped">
                                <table class="table table-condensed table-striped full tleft">
                                    <thead>
                                        <tr>
                                            <th>Alt-Svc 参数</th>
                                            <th>参考</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left">ma</td>
                                            <td class="text-left"><a href="#caching-alt-svc-header-field-values"
                                                    title="Caching Alt-Svc Header Field Values">第 3.1 节</a> </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">persist</td>
                                            <td class="text-left"><a href="#caching-alt-svc-header-field-values"
                                                    title="Caching Alt-Svc Header Field Values">第 3.1 节</a> </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </section>
                </section>
                <section id="internationalization-considerations">
                    <h2 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;<a
                            href="#internationalization-considerations">国际化注意事项</a></h2>
                    <div id="rfc.section.8.p.1">
                        <p>出现在头部字段（<a href="#alt-svc" title="The Alt-Svc HTTP Header Field">第 3 节</a>）或 HTTP/2 帧（<a
                                href="#frame" title="The ALTSVC HTTP/2 Frame">第 4 节</a>）中的国际化域名 <em
                                class="bcp14">MUST</em> 使用 A-label 表示（参见 <a href="#RFC5890"><cite
                                    title="Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework">[RFC5890]</cite></a>
                            第 2.3.2.1 节）。</p>
                    </div>
                </section>
                <section id="security-considerations">
                    <h2 id="rfc.section.9"><a href="#rfc.section.9">9.</a>&nbsp;<a
                            href="#security-considerations">安全注意事项</a></h2>
                    <section id="changing-ports">
                        <h3 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a>&nbsp;<a
                                href="#changing-ports">更改端口</a></h3>
                        <div id="rfc.section.9.1.p.1">
                            <p>使用替代服务至少意味着在替代端口上访问源的资源。因此，能够注入替代服务并在所通告端口上监听的攻击者能够劫持源。在某些服务器上，用户可以控制共享端口上一些个人页面，并且也可以在较低特权端口上接受请求，这是正常的。
                            </p>
                        </div>
                        <div id="rfc.section.9.1.p.2">
                            <p>例如，能够向某些页面添加 HTTP 响应头字段的攻击者可以使用 Alt-Svc 头字段将整个源的流量重定向到同一主机上的不同端口；如果该端口由攻击者控制，他们就可以冒充该
                                HTTP 服务器。</p>
                        </div>
                        <div id="rfc.section.9.1.p.3">
                            <p>此风险可通过第 <a href="#host_auth" title="Host Authentication">2.1 节</a> 中的要求来缓解。</p>
                        </div>
                        <div id="rfc.section.9.1.p.4">
                            <p>在服务器上，这种风险也可以通过限制通告替代服务的能力以及限制谁可以在该主机上打开监听端口来减轻。</p>
                        </div>
                    </section>
                    <section id="host_security">
                        <h3 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2.</a>&nbsp;<a
                                href="#host_security">更改主机</a></h3>
                        <div id="rfc.section.9.2.p.1">
                            <p>当由于使用替代服务而更改主机时，这为攻击者提供了劫持与源的通信的机会。</p>
                        </div>
                        <div id="rfc.section.9.2.p.2">
                            <p>例如，如果攻击者能说服用户代理将对 "innocent.example.org" 的所有流量发送到
                                "evil.example.com"（通过成功将其关联为替代服务），则他们可以冒充该源。这可以在本地完成（见第 9.1 节的缓解），也可以远程完成（例如作为中间人攻击）。
                            </p>
                        </div>
                        <div id="rfc.section.9.2.p.3">
                            <p>这就是第 <a href="#host_auth" title="Host Authentication">2.1 节</a>
                                要求客户端对替代服务有合理保证的原因；例如，出示给源的证书可以证明替代服务被授权为该源提供流量。</p>
                        </div>
                        <div id="rfc.section.9.2.p.4">
                            <p>请注意，这种保证的强度取决于用于验证替代服务的方法。特别是，当使用 TLS 认证时，存在众所周知的漏洞可以使攻击者的证书看起来合法。</p>
                        </div>
                        <div id="rfc.section.9.2.p.5">
                            <p>替代服务可能被用于维持此类攻击。例如，中间人可以对目标的 TLS
                                受保护通信进行中间人攻击，然后将所有流量指向具有较长有效期的替代服务，使得即使在不使用该中间人的情况下，用户代理仍将流量指向攻击者。</p>
                        </div>
                        <div id="rfc.section.9.2.p.6">
                            <p>实现必须像在直接连接到源时一样，对替代服务执行任何证书固定验证（例如 <a href="#RFC7469"><cite
                                        title="Public Key Pinning Extension for HTTP">[RFC7469]</cite></a>）。实现也可能选择为可接受的替代服务证书添加其他要求。
                            </p>
                        </div>
                    </section>
                    <section id="changing-protocols">
                        <h3 id="rfc.section.9.3"><a href="#rfc.section.9.3">9.3.</a>&nbsp;<a
                                href="#changing-protocols">更改协议</a></h3>
                        <div id="rfc.section.9.3.p.1">
                            <p>当由于使用替代服务而更改 ALPN 协议时，与源的新连接的安全属性可能与“正常”连接不同，因为协议标识本身就暗示了这一点。</p>
                        </div>
                        <div id="rfc.section.9.3.p.2">
                            <p>例如，如果对 "https://" URI 通告了不使用某种端到端加密形式（最可能是 TLS）的协议，则这违反了 URI
                                方案所暗示的安全期望。因此，客户端不能盲目使用替代服务，而应评估所提供的选项以确保满足规范、实现和最终用户对安全性的要求和期望。</p>
                        </div>
                    </section>
                    <section id="tracking">
                        <h3 id="rfc.section.9.4"><a href="#rfc.section.9.4">9.4.</a>&nbsp;<a
                                href="#tracking">使用替代服务跟踪客户端</a></h3>
                        <div id="rfc.section.9.4.p.1">
                            <p>选择替代服务意味着要连接到新的、由服务器提供的主机名。通过使用唯一名称，服务器可以设法跟踪客户端请求。当使用 "persist" 标志时，这种跟踪甚至可以跨多个网络跟踪用户。
                            </p>
                        </div>
                        <div id="rfc.section.9.4.p.2">
                            <p>希望防止请求被关联的客户端可以决定不对那些本不应被关联的多个请求使用替代服务。</p>
                        </div>
                        <div id="rfc.section.9.4.p.3">
                            <p>在用户代理中，当清除与源相关的数据时（通常在清除 cookie 时），任何替代服务信息 <em class="bcp14">MUST</em> 被移除（参见 <a
                                    href="#RFC6265"><cite title="HTTP State Management Mechanism">[RFC6265]</cite></a>）。
                            </p>
                        </div>
                    </section>
                    <section id="confusion-regarding-request-scheme">
                        <h3 id="rfc.section.9.5"><a href="#rfc.section.9.5">9.5.</a>&nbsp;<a
                                href="#confusion-regarding-request-scheme">关于请求方案的混淆</a></h3>
                        <div id="rfc.section.9.5.p.1">
                            <p>一些服务器端 HTTP 应用基于连接上下文对安全性作出假设；例如，将在端口 443 上提供服务等同于使用 "https://" URI 及其所暗示的各种安全属性。</p>
                        </div>
                        <div id="rfc.section.9.5.p.2">
                            <p>这不仅影响连接本身的安全属性，还影响另一端的客户端状态；例如，Web 浏览器在许多方面会区别对待 "https://" URI 与 "http://"
                                URI，不仅仅是协议处理方面。</p>
                        </div>
                        <div id="rfc.section.9.5.p.3">
                            <p>由于替代服务的用途之一是允许连接迁移到不同的协议和端口，这些应用可能会对给定连接的安全属性产生混淆，把为安全上下文（如 "https://" URI）准备的信息（例如
                                cookie 和内容）发送给未将其视为安全上下文的客户端。</p>
                        </div>
                        <div id="rfc.section.9.5.p.4">
                            <p>服务器可以通过使用协议显式携带的 URI 方案（例如 HTTP/2 中的 ":scheme" 或 HTTP/1.1
                                中的请求目标的“绝对形式”）作为安全上下文的指示来缓解此风险，而不是依赖其他连接属性（参见 <a href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a> 第 8.1.2.3 节 和
                                <a href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                                第 5.3.2 节）。
                            </p>
                        </div>
                        <div id="rfc.section.9.5.p.5">
                            <p>当协议不显式携带方案（通常为在 TLS 上的 HTTP/1.1）时，服务器可以通过假定所有请求处于不安全上下文，或通过避免为不安全方案（例如 HTTP）通告替代服务来缓解该风险。
                            </p>
                        </div>
                    </section>
                </section>
                <section id="rfc.references">
                    <h2 id="rfc.section.10"><a href="#rfc.section.10">10.</a> 参考文献</h2>
                    <section>
                        <div id="rfc.references.1">
                            <h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a> 规范性参考文献</h3>
                            <dl class="dl-horizontal">
                                <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words for
                                        use in RFCs to Indicate Requirement Levels</a>”, <a
                                        href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                        href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March 1997,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                </dd>
                                <dt id="RFC2818">[<a href="#RFC2818" class="smpl">RFC2818</a>]</dt>
                                <dd>Rescorla, E., “<a href="https://www.rfc-editor.org/rfc/rfc2818.html">HTTP Over
                                        TLS</a>”, RFC 2818, <a href="https://dx.doi.org/10.17487/RFC2818">DOI
                                        10.17487/RFC2818</a>, May 2000, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2818">http://www.rfc-editor.org/info/rfc2818</a>&gt;.
                                </dd>
                                <dt id="RFC3986">[<a href="#RFC3986" class="smpl">RFC3986</a>]</dt>
                                <dd>Berners-Lee, T., Fielding, R., and L. Masinter, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3986.html">Uniform Resource Identifier
                                        (URI): Generic Syntax</a>”, <a href="https://www.rfc-editor.org/info/std66">STD
                                        66</a>, RFC 3986, <a href="https://dx.doi.org/10.17487/RFC3986">DOI
                                        10.17487/RFC3986</a>, January 2005, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.
                                </dd>
                                <dt id="RFC5226">[<a href="#RFC5226" class="smpl">RFC5226</a>]</dt>
                                <dd>Narten, T. and H. Alvestrand, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5226.html">Guidelines for Writing an
                                        IANA Considerations Section in RFCs</a>”, <a
                                        href="https://www.rfc-editor.org/info/bcp26">BCP 26</a>, RFC 5226, <a
                                        href="https://dx.doi.org/10.17487/RFC5226">DOI 10.17487/RFC5226</a>, May 2008,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5226">http://www.rfc-editor.org/info/rfc5226</a>&gt;.
                                </dd>
                                <dt id="RFC5234">[<a href="#RFC5234" class="smpl">RFC5234</a>]</dt>
                                <dd>Crocker, D., Ed. and P. Overell, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5234.html">Augmented BNF for Syntax
                                        Specifications: ABNF</a>”, <a href="https://www.rfc-editor.org/info/std68">STD
                                        68</a>, RFC 5234, <a href="https://dx.doi.org/10.17487/RFC5234">DOI
                                        10.17487/RFC5234</a>, January 2008, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5234">http://www.rfc-editor.org/info/rfc5234</a>&gt;.
                                </dd>
                                <dt id="RFC5890">[<a href="#RFC5890" class="smpl">RFC5890</a>]</dt>
                                <dd>Klensin, J., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5890.html">Internationalized Domain
                                        Names for Applications (IDNA): Definitions and Document Framework</a>”, RFC
                                    5890, <a href="https://dx.doi.org/10.17487/RFC5890">DOI 10.17487/RFC5890</a>, August
                                    2010, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5890">http://www.rfc-editor.org/info/rfc5890</a>&gt;.
                                </dd>
                                <dt id="RFC6066">[<a href="#RFC6066" class="smpl">RFC6066</a>]</dt>
                                <dd>Eastlake, D., “<a href="https://www.rfc-editor.org/rfc/rfc6066.html">Transport Layer
                                        Security (TLS) Extensions: Extension Definitions</a>”, RFC 6066, <a
                                        href="https://dx.doi.org/10.17487/RFC6066">DOI 10.17487/RFC6066</a>, January
                                    2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6066">http://www.rfc-editor.org/info/rfc6066</a>&gt;.
                                </dd>
                                <dt id="RFC6454">[<a href="#RFC6454" class="smpl">RFC6454</a>]</dt>
                                <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6454.html">The Web Origin
                                        Concept</a>”, RFC 6454, <a href="https://dx.doi.org/10.17487/RFC6454">DOI
                                        10.17487/RFC6454</a>, December 2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6454">http://www.rfc-editor.org/info/rfc6454</a>&gt;.
                                </dd>
                                <dt id="RFC7230">[<a href="#RFC7230" class="smpl">RFC7230</a>]</dt>
                                <dd>Fielding, R., Ed. and J. Reschke, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7230.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Message Syntax and Routing</a>”, RFC 7230, <a
                                        href="https://dx.doi.org/10.17487/RFC7230">DOI 10.17487/RFC7230</a>, June 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.
                                </dd>
                                <dt id="RFC7234">[<a href="#RFC7234" class="smpl">RFC7234</a>]</dt>
                                <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7234.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Caching</a>”, RFC 7234, <a
                                        href="https://dx.doi.org/10.17487/RFC7234">DOI 10.17487/RFC7234</a>, June 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7234">http://www.rfc-editor.org/info/rfc7234</a>&gt;.
                                </dd>
                                <dt id="RFC7301">[<a href="#RFC7301" class="smpl">RFC7301</a>]</dt>
                                <dd>Friedl, S., Popov, A., Langley, A., and S. Emile, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7301.html">Transport Layer Security
                                        (TLS) Application-Layer Protocol Negotiation Extension</a>”, RFC 7301, <a
                                        href="https://dx.doi.org/10.17487/RFC7301">DOI 10.17487/RFC7301</a>, July 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7301">http://www.rfc-editor.org/info/rfc7301</a>&gt;.
                                </dd>
                                <dt id="RFC7405">[<a href="#RFC7405" class="smpl">RFC7405</a>]</dt>
                                <dd>Kyzivat, P., “<a href="https://www.rfc-editor.org/rfc/rfc7405.html">Case-Sensitive
                                        String Support in ABNF</a>”, RFC 7405, <a
                                        href="https://dx.doi.org/10.17487/RFC7405">DOI 10.17487/RFC7405</a>, December
                                    2014, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7405">http://www.rfc-editor.org/info/rfc7405</a>&gt;.
                                </dd>
                                <dt id="RFC7540">[<a href="#RFC7540" class="smpl">RFC7540</a>]</dt>
                                <dd>Belshe, M., Peon, R., and M. Thomson, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7540.html">Hypertext Transfer Protocol
                                        version 2</a>”, RFC 7540, <a href="https://dx.doi.org/10.17487/RFC7540">DOI
                                        10.17487/RFC7540</a>, May 2015, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7540">http://www.rfc-editor.org/info/rfc7540</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                    <section>
                        <div id="rfc.references.2">
                            <h3 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a> 信息性参考文献</h3>
                            <dl class="dl-horizontal">
                                <dt id="BCP90">[<a href="#BCP90" class="smpl">BCP90</a>]</dt>
                                <dd>Klyne, G., Nottingham, M., and J. Mogul, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3864.html">Registration Procedures for
                                        Message Header Fields</a>”, <a href="https://www.rfc-editor.org/info/bcp90">BCP
                                        90</a>, RFC 3864, September 2004, &lt;<a
                                        href="http://www.rfc-editor.org/info/bcp90">http://www.rfc-editor.org/info/bcp90</a>&gt;.
                                </dd>
                                <dt id="RFC5246">[<a href="#RFC5246" class="smpl">RFC5246</a>]</dt>
                                <dd>Dierks, T. and E. Rescorla, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5246.html">The Transport Layer Security
                                        (TLS) Protocol Version 1.2</a>”, RFC 5246, <a
                                        href="https://dx.doi.org/10.17487/RFC5246">DOI 10.17487/RFC5246</a>, August
                                    2008, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.
                                </dd>
                                <dt id="RFC6265">[<a href="#RFC6265" class="smpl">RFC6265</a>]</dt>
                                <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6265.html">HTTP State
                                        Management Mechanism</a>”, RFC 6265, <a
                                        href="https://dx.doi.org/10.17487/RFC6265">DOI 10.17487/RFC6265</a>, April 2011,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6265">http://www.rfc-editor.org/info/rfc6265</a>&gt;.
                                </dd>
                                <dt id="RFC7469">[<a href="#RFC7469" class="smpl">RFC7469</a>]</dt>
                                <dd>Evans, C., Palmer, C., and R. Sleevi, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7469.html">Public Key Pinning Extension
                                        for HTTP</a>”, RFC 7469, <a href="https://dx.doi.org/10.17487/RFC7469">DOI
                                        10.17487/RFC7469</a>, April 2015, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7469">http://www.rfc-editor.org/info/rfc7469</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                </section>
                <section id="acknowledgements">
                    <h2 id="rfc.section.unnumbered-1"><a href="#acknowledgements">致谢</a></h2>
                    <div id="rfc.section.unnumbered-1.p.1">
                        <p>感谢 Adam Langley、Bence Beky、Chris Lonvick、Eliot Lear、Erik Nygren、Guy Podjarny、Herve
                            Ruellan、Lucas Pardue、Martin Thomson、Matthew Kerwin、Mike Bishop、Paul Hoffman、Richard
                            Barnes、Richard Bradbury、Stephen Farrell、Stephen Ludin 和 Will Chan 的反馈和建议。</p>
                    </div>
                    <div id="rfc.section.unnumbered-1.p.2">
                        <p>Alt-Svc 头字段的设计受到了 SPDY 中 Alternate-Protocol 头字段设计的影响。</p>
                    </div>
                </section>
                <section id="rfc.authors" class="avoidbreakinside">
                    <h2><a href="#rfc.authors">作者地址</a></h2>
                    <address><b>Mark Nottingham</b><br>Akamai<br>Email: mnot@mnot.net<br>URI: <a
                            href="https://www.mnot.net/">https://www.mnot.net/</a></address>
                    <address><b>Patrick McManus</b><br>Mozilla<br>Email: mcmanus@ducksong.com<br>URI: <a
                            href="https://mozillians.org/u/pmcmanus/">https://mozillians.org/u/pmcmanus/</a></address>
                    <address><b>Julian F. Reschke</b><br>greenbytes GmbH<br>Email: julian.reschke@greenbytes.de<br>URI:
                        <a href="https://greenbytes.de/tech/webdav/">https://greenbytes.de/tech/webdav/</a>
                    </address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>