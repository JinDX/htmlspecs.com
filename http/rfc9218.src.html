<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 9218 - Extensible Prioritization Scheme for HTTP</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC9218">
    <meta property="og:description" content="Extensible Prioritization Scheme for HTTP">
    <meta property="og:url" content="https://httpwg.org/specs/rfc9218.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css" href="/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal: {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Motivation for Replacing RFC 7540 Stream Priorities" href="#rfc.section.2">
    <link rel="Chapter" title="3 Applicability of the Extensible Priority Scheme" href="#rfc.section.3">
    <link rel="Chapter" title="4 Priority Parameters" href="#rfc.section.4">
    <link rel="Chapter" title="5 The Priority HTTP Header Field" href="#rfc.section.5">
    <link rel="Chapter" title="6 Reprioritization" href="#rfc.section.6">
    <link rel="Chapter" title="7 The PRIORITY_UPDATE Frame" href="#rfc.section.7">
    <link rel="Chapter" title="8 Merging Client- and Server-Driven Priority Parameters" href="#rfc.section.8">
    <link rel="Chapter" title="9 Client Scheduling" href="#rfc.section.9">
    <link rel="Chapter" title="10 Server Scheduling" href="#rfc.section.10">
    <link rel="Chapter" title="11 Scheduling and the CONNECT Method" href="#rfc.section.11">
    <link rel="Chapter" title="12 Retransmission Scheduling" href="#rfc.section.12">
    <link rel="Chapter" title="13 Fairness" href="#rfc.section.13">
    <link rel="Chapter" title="14 Why Use an End-to-End Header Field?" href="#rfc.section.14">
    <link rel="Chapter" title="15 Security Considerations" href="#rfc.section.15">
    <link rel="Chapter" title="16 IANA Considerations" href="#rfc.section.16">
    <link rel="Chapter" title="17 References" href="#rfc.section.17">
    <link rel="Appendix" title="Acknowledgements" href="#rfc.section.unnumbered-4">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-priority-12" rel="prev">
    <link href="https://dx.doi.org/10.17487/rfc9218" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9218.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9218">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="Response priority, Stream multiplexing, Reprioritization, Server scheduling">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="一穂, 奥.">
    <meta name="dcterms.creator" content="Pardue, L.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:9218">
    <meta name="dcterms.issued" content="2022-06">
    <meta name="dcterms.abstract"
        content="This document describes a scheme that allows an HTTP client to communicate its preferences for how the upstream server prioritizes responses to its requests, and also allows a server to hint to a downstream intermediary how its responses should be prioritized when they are forwarded. This document defines the Priority header field for communicating the initial priority in an HTTP version-independent manner, as well as HTTP/2 and HTTP/3 frames for reprioritizing responses. These share a common format structure that is designed to provide future extensibility.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This document describes a scheme that allows an HTTP client to communicate its preferences for how the upstream server prioritizes responses to its requests, and also allows a server to hint to a downstream intermediary how its responses should be prioritized when they are forwarded. This document defines the Priority header field for communicating the initial priority in an HTTP version-independent manner, as well as HTTP/2 and HTTP/3 frames for reprioritizing responses. These share a common format structure that is designed to provide future extensibility.">
</head>

<body onload="getMeta(9218,&#34;rfc.meta&#34;);">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>9218</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#introduction">Introduction</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">Notational Conventions</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#motivation">Motivation
                                        for Replacing RFC 7540 Stream Priorities</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#disabling">Disabling RFC 7540 Stream Priorities</a>
                                            <ul>
                                                <li><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#advice-when-using-extensible-priorities-as-the-alternative">Advice
                                                        when Using Extensible Priorities as the Alternative</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#applicability-of-the-extensible-priority-scheme">Applicability of the
                                        Extensible Priority Scheme</a></li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#parameters">Priority
                                        Parameters</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#urgency">Urgency</a></li>
                                        <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#incremental">Incremental</a></li>
                                        <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#new-parameters">Defining New Priority Parameters</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#register">Registration</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#header-field">The
                                        Priority HTTP Header Field</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#reprioritization">Reprioritization</a></li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">The
                                        PRIORITY_UPDATE Frame</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h2-update-frame">HTTP/2 PRIORITY_UPDATE Frame</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h3-update-frame">HTTP/3 PRIORITY_UPDATE Frame</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#merging">Merging Client-
                                        and Server-Driven Priority Parameters</a></li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#client-scheduling">Client
                                        Scheduling</a></li>
                                <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#server-scheduling">Server Scheduling</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#intermediaries-with-multiple-backend-connections">Intermediaries
                                                with Multiple Backend Connections</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connect-scheduling">Scheduling and the CONNECT Method</a></li>
                                <li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#retransmission-scheduling">Retransmission Scheduling</a></li>
                                <li><a href="#rfc.section.13">13.</a>&nbsp;&nbsp;&nbsp;<a href="#fairness">Fairness</a>
                                    <ul>
                                        <li><a href="#rfc.section.13.1">13.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#coalescing">Coalescing Intermediaries</a></li>
                                        <li><a href="#rfc.section.13.2">13.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h1-backends">HTTP/1.x Back Ends</a></li>
                                        <li><a href="#rfc.section.13.3">13.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#intentional-unfairness">Intentional Introduction of
                                                Unfairness</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.14">14.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#header-field-rationale">Why Use an End-to-End Header Field?</a></li>
                                <li><a href="#rfc.section.15">15.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">Security Considerations</a></li>
                                <li><a href="#rfc.section.16">16.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana-considerations">IANA Considerations</a></li>
                                <li><a href="#rfc.section.17">17.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references">References</a>
                                    <ul>
                                        <li><a href="#rfc.section.17.1">17.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">Normative References</a></li>
                                        <li><a href="#rfc.section.17.2">17.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.3">Informative References</a></li>
                                    </ul>
                                </li>
                                <li><a href="#acknowledgements">Acknowledgements</a></li>
                                <li><a href="#rfc.authors">Authors' Addresses</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">Internet Engineering Task Force (IETF)</td>
                                <td class="text-right">奥. 一穂</td>
                            </tr>
                            <tr>
                                <td class="text-left">Request for Comments: 9218</td>
                                <td class="text-right">Fastly</td>
                            </tr>
                            <tr>
                                <td class="text-left">Category: Standards Track</td>
                                <td class="text-right">L. Pardue</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Cloudflare</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">June 2022</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>Extensible Prioritization Scheme for HTTP</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>This document describes a scheme that allows an HTTP client to communicate its preferences
                            for how the upstream server prioritizes responses to its requests, and also allows a server
                            to hint to a downstream intermediary how its responses should be prioritized when they are
                            forwarded. This document defines the Priority header field for communicating the initial
                            priority in an HTTP version-independent manner, as well as HTTP/2 and HTTP/3 frames for
                            reprioritizing responses. These share a common format structure that is designed to provide
                            future extensibility.</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">Status of This Memo</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>This is an Internet Standards Track document.</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>This document is a product of the Internet Engineering Task Force (IETF). It represents the
                            consensus of the IETF community. It has received public review and has been approved for
                            publication by the Internet Engineering Steering Group (IESG). Further information on
                            Internet Standards is available in <a
                                href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">Section 2 of RFC 7841</a>.
                        </p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>Information about the current status of this document, any errata, and how to provide
                            feedback on it may be obtained at <a
                                href="https://www.rfc-editor.org/info/rfc9218">https://www.rfc-editor.org/info/rfc9218</a>.
                        </p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>)
                            in effect on the date of publication of this document. Please review these documents
                            carefully, as they describe your rights and restrictions with respect to this document. Code
                            Components extracted from this document must include Revised BSD License text as described
                            in Section 4.e of the Trust Legal Provisions and are provided without warranty as described
                            in the Revised BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">Introduction</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">Notational Conventions</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#motivation">Motivation for
                                Replacing RFC 7540 Stream Priorities</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#disabling">Disabling
                                        RFC 7540 Stream Priorities</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#advice-when-using-extensible-priorities-as-the-alternative">Advice
                                                when Using Extensible Priorities as the Alternative</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#applicability-of-the-extensible-priority-scheme">Applicability of the Extensible
                                Priority Scheme</a></li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#parameters">Priority
                                Parameters</a>
                            <ul>
                                <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#urgency">Urgency</a>
                                </li>
                                <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#incremental">Incremental</a></li>
                                <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#new-parameters">Defining New Priority Parameters</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#register">Registration</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#header-field">The Priority HTTP
                                Header Field</a></li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#reprioritization">Reprioritization</a></li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">The PRIORITY_UPDATE
                                Frame</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h2-update-frame">HTTP/2 PRIORITY_UPDATE Frame</a></li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h3-update-frame">HTTP/3 PRIORITY_UPDATE Frame</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#merging">Merging Client- and
                                Server-Driven Priority Parameters</a></li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#client-scheduling">Client
                                Scheduling</a></li>
                        <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#server-scheduling">Server
                                Scheduling</a>
                            <ul>
                                <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#intermediaries-with-multiple-backend-connections">Intermediaries with
                                        Multiple Backend Connections</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a href="#connect-scheduling">Scheduling
                                and the CONNECT Method</a></li>
                        <li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#retransmission-scheduling">Retransmission Scheduling</a></li>
                        <li><a href="#rfc.section.13">13.</a>&nbsp;&nbsp;&nbsp;<a href="#fairness">Fairness</a>
                            <ul>
                                <li><a href="#rfc.section.13.1">13.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#coalescing">Coalescing Intermediaries</a></li>
                                <li><a href="#rfc.section.13.2">13.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h1-backends">HTTP/1.x Back Ends</a></li>
                                <li><a href="#rfc.section.13.3">13.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#intentional-unfairness">Intentional Introduction of Unfairness</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.14">14.</a>&nbsp;&nbsp;&nbsp;<a href="#header-field-rationale">Why Use
                                an End-to-End Header Field?</a></li>
                        <li><a href="#rfc.section.15">15.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#security-considerations">Security Considerations</a></li>
                        <li><a href="#rfc.section.16">16.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                Considerations</a></li>
                        <li><a href="#rfc.section.17">17.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a>
                            <ul>
                                <li><a href="#rfc.section.17.1">17.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">Normative References</a></li>
                                <li><a href="#rfc.section.17.2">17.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.3">Informative References</a></li>
                            </ul>
                        </li>
                        <li><a href="#acknowledgements">Acknowledgements</a></li>
                        <li><a href="#rfc.authors">Authors' Addresses</a></li>
                    </ul>
                </div>
                <hr class="hidden-print">
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">Introduction</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>It is common for representations of an HTTP <a href="#HTTP"><cite
                                    title="HTTP Semantics">[HTTP]</cite></a> resource to have relationships to one or
                            more other resources. Clients will often discover these relationships while processing a
                            retrieved representation, which may lead to further retrieval requests. Meanwhile, the
                            nature of the relationships determines whether a client is blocked from continuing to
                            process locally available resources. An example of this is the visual rendering of an HTML
                            document, which could be blocked by the retrieval of a Cascading Style Sheets (CSS) file
                            that the document refers to. In contrast, inline images do not block rendering and get drawn
                            incrementally as the chunks of the images arrive.</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>HTTP/2 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> and HTTP/3 <a
                                href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a> support multiplexing of requests
                            and responses in a single connection. An important feature of any implementation of a
                            protocol that provides multiplexing is the ability to prioritize the sending of information.
                            For example, to provide meaningful presentation of an HTML document at the earliest moment,
                            it is important for an HTTP server to prioritize the HTTP responses, or the chunks of those
                            HTTP responses, that it sends to a client.</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>HTTP/2 and HTTP/3 servers can schedule transmission of concurrent response data by any means
                            they choose. Servers can ignore client priority signals and still successfully serve HTTP
                            responses. However, servers that operate in ignorance of how clients issue requests and
                            consume responses can cause suboptimal client application performance. Priority signals
                            allow clients to communicate their view of request priority. Servers have their own needs
                            that are independent of client needs, so they often combine priority signals with other
                            available information in order to inform scheduling of response data.</p>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>RFC 7540 <a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol Version 2 (HTTP/2)">[RFC7540]</cite></a> stream
                            priority allowed a client to send a series of priority signals that communicate to the
                            server a "priority tree"; the structure of this tree represents the client's preferred
                            relative ordering and weighted distribution of the bandwidth among HTTP responses. Servers
                            could use these priority signals as input into prioritization decisions.</p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>The design and implementation of RFC 7540 stream priority were observed to have shortcomings,
                            as explained in <a href="#motivation"
                                title="Motivation for Replacing RFC 7540 Stream Priorities">Section 2</a>. HTTP/2 <a
                                href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> has consequently deprecated the
                            use of these stream priority signals. The prioritization scheme and priority signals defined
                            herein can act as a substitute for RFC 7540 stream priority.</p>
                    </div>
                    <div id="rfc.section.1.p.6">
                        <p>This document describes an extensible scheme for prioritizing HTTP responses that uses
                            absolute values. <a href="#parameters" title="Priority Parameters">Section 4</a> defines
                            priority parameters, which are a standardized and extensible format of priority information.
                            <a href="#header-field" title="The Priority HTTP Header Field">Section 5</a> defines the
                            Priority HTTP header field, which is an end-to-end priority signal that is independent of
                            protocol version. Clients can send this header field to signal their view of how responses
                            should be prioritized. Similarly, servers behind an intermediary can use it to signal
                            priority to the intermediary. After sending a request, a client can change their view of
                            response priority (see <a href="#reprioritization" title="Reprioritization">Section 6</a>)
                            by sending HTTP-version-specific frames as defined in <span class="nobr">Sections </span><a
                                href="#h2-update-frame" title="HTTP/2 PRIORITY_UPDATE Frame">7.1</a> and <a
                                href="#h3-update-frame" title="HTTP/3 PRIORITY_UPDATE Frame">7.2</a>.
                        </p>
                    </div>
                    <div id="rfc.section.1.p.7">
                        <p>Header field and frame priority signals are input to a server's response prioritization
                            process. They are only a suggestion and do not guarantee any particular processing or
                            transmission order for one response relative to any other response. <span
                                class="nobr">Sections </span><a href="#server-scheduling"
                                title="Server Scheduling">10</a> and <a href="#retransmission-scheduling"
                                title="Retransmission Scheduling">12</a> provide considerations and guidance about how
                            servers might act upon signals.</p>
                    </div>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#notational-conventions">Notational Conventions</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>The key words "<em class="bcp14">MUST</em>", "<em class="bcp14">MUST NOT</em>", "<em
                                    class="bcp14">REQUIRED</em>", "<em class="bcp14">SHALL</em>", "<em
                                    class="bcp14">SHALL NOT</em>", "<em class="bcp14">SHOULD</em>", "<em
                                    class="bcp14">SHOULD NOT</em>", "<em class="bcp14">RECOMMENDED</em>", "<em
                                    class="bcp14">NOT RECOMMENDED</em>", "<em class="bcp14">MAY</em>", and "<em
                                    class="bcp14">OPTIONAL</em>" in this document are to be interpreted as described in
                                <span class="nobr">BCP 14</span> <a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>
                                <a href="#RFC8174"><cite
                                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a>
                                when, and only when, they appear in all capitals, as shown here.
                            </p>
                        </div>
                        <div id="rfc.section.1.1.p.2">
                            <p>This document uses the following terminology from <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3">Section 3</a> of <a
                                    href="#STRUCTURED-FIELDS"><cite
                                        title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a> to
                                specify syntax and parsing: "Boolean", "Dictionary", and "Integer".</p>
                        </div>
                        <div id="rfc.section.1.1.p.3">
                            <p>Example HTTP requests and responses use the HTTP/2-style formatting from <a
                                    href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>.</p>
                        </div>
                        <div id="rfc.section.1.1.p.4">
                            <p>This document uses the variable-length integer encoding from <a href="#QUIC"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC]</cite></a>.
                            </p>
                        </div>
                        <div id="rfc.section.1.1.p.5">
                            <p>The term "control stream" is used to describe both the HTTP/2 stream with identifier 0x0
                                and the HTTP/3 control stream; see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9114.html#section-6.2.1">Section 6.2.1</a>
                                of <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>.</p>
                        </div>
                        <div id="rfc.section.1.1.p.6">
                            <p>The term "HTTP/2 priority signal" is used to describe the priority information sent from
                                clients to servers in HTTP/2 frames; see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">Section 5.3.2</a>
                                of <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>.</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="motivation">
                    <h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a
                            href="#motivation">Motivation for Replacing RFC 7540 Stream Priorities</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>RFC 7540 stream priority (see <a
                                href="https://www.rfc-editor.org/rfc/rfc7540.html#section-5.3">Section 5.3</a> of <a
                                href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol Version 2 (HTTP/2)">[RFC7540]</cite></a>) is a
                            complex system where clients signal stream dependencies and weights to describe an
                            unbalanced tree. It suffered from limited deployment and interoperability and has been
                            deprecated in a revision of HTTP/2 <a href="#HTTP2"><cite
                                    title="HTTP/2">[HTTP/2]</cite></a>. HTTP/2 retains these protocol elements in order
                            to maintain wire compatibility (see <a
                                href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">Section 5.3.2</a> of <a
                                href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>), which means that they might
                            still be used even in the presence of alternative signaling, such as the scheme this
                            document describes.</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>Many RFC 7540 server implementations do not act on HTTP/2 priority signals.</p>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>Prioritization can use information that servers have about resources or the order in which
                            requests are generated. For example, a server, with knowledge of an HTML document structure,
                            might want to prioritize the delivery of images that are critical to user experience above
                            other images. With RFC 7540, it is difficult for servers to interpret signals from clients
                            for prioritization, as the same conditions could result in very different signaling from
                            different clients. This document describes signaling that is simpler and more constrained,
                            requiring less interpretation and allowing less variation.</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>RFC 7540 does not define a method that can be used by a server to provide a priority signal
                            for intermediaries.</p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>RFC 7540 stream priority is expressed relative to other requests sharing the same connection
                            at the same time. It is difficult to incorporate such a design into applications that
                            generate requests without knowledge of how other requests might share a connection, or into
                            protocols that do not have strong ordering guarantees across streams, like HTTP/3 <a
                                href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>.</p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>Experiments from independent research <a href="#MARX"><cite
                                    title="Of the Utmost Importance: Resource Prioritization in HTTP/3 over QUIC">[MARX]</cite></a>
                            have shown that simpler schemes can reach at least equivalent performance characteristics
                            compared to the more complex RFC 7540 setups seen in practice, at least for the Web use
                            case.</p>
                    </div>
                    <section id="disabling">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#disabling">Disabling
                                RFC 7540 Stream Priorities</a></h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>The problems and insights set out above provided the motivation for an alternative to RFC
                                7540 stream priority (see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3">Section 5.3</a> of <a
                                    href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>).</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>The SETTINGS_NO_RFC7540_PRIORITIES HTTP/2 setting is defined by this document in order to
                                allow endpoints to omit or ignore HTTP/2 priority signals (see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">Section 5.3.2</a>
                                of <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>), as described below. The
                                value of SETTINGS_NO_RFC7540_PRIORITIES <em class="bcp14">MUST</em> be 0 or 1. Any value
                                other than 0 or 1 <em class="bcp14">MUST</em> be treated as a connection error (see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.4.1">Section 5.4.1</a>
                                of <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>) of type PROTOCOL_ERROR.
                                The initial value is 0.</p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>If endpoints use SETTINGS_NO_RFC7540_PRIORITIES, they <em class="bcp14">MUST</em> send it
                                in the first SETTINGS frame. Senders <em class="bcp14">MUST NOT</em> change the
                                SETTINGS_NO_RFC7540_PRIORITIES value after the first SETTINGS frame. Receivers that
                                detect a change <em class="bcp14">MAY</em> treat it as a connection error of type
                                PROTOCOL_ERROR.</p>
                        </div>
                        <div id="rfc.section.2.1.p.4">
                            <p>Clients can send SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 to indicate that they
                                are not using HTTP/2 priority signals. The SETTINGS frame precedes any HTTP/2 priority
                                signal sent from clients, so servers can determine whether they need to allocate any
                                resources to signal handling before signals arrive. A server that receives
                                SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 <em class="bcp14">MUST</em> ignore
                                HTTP/2 priority signals.</p>
                        </div>
                        <div id="rfc.section.2.1.p.5">
                            <p>Servers can send SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 to indicate that they
                                will ignore HTTP/2 priority signals sent by clients.</p>
                        </div>
                        <div id="rfc.section.2.1.p.6">
                            <p>Endpoints that send SETTINGS_NO_RFC7540_PRIORITIES are encouraged to use alternative
                                priority signals (for example, see <a href="#header-field"
                                    title="The Priority HTTP Header Field">Section 5</a> or <a href="#h2-update-frame"
                                    title="HTTP/2 PRIORITY_UPDATE Frame">Section 7.1</a>), but there is no requirement
                                to use a specific signal type.</p>
                        </div>
                        <section id="advice-when-using-extensible-priorities-as-the-alternative">
                            <h4 id="rfc.section.2.1.1"><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;<a
                                    href="#advice-when-using-extensible-priorities-as-the-alternative">Advice when Using
                                    Extensible Priorities as the Alternative</a></h4>
                            <div id="rfc.section.2.1.1.p.1">
                                <p>Before receiving a SETTINGS frame from a server, a client does not know if the server
                                    is ignoring HTTP/2 priority signals. Therefore, until the client receives the
                                    SETTINGS frame from the server, the client <em class="bcp14">SHOULD</em> send both
                                    the HTTP/2 priority signals and the signals of this prioritization scheme (see <span
                                        class="nobr">Sections </span><a href="#header-field"
                                        title="The Priority HTTP Header Field">5</a> and <a href="#h2-update-frame"
                                        title="HTTP/2 PRIORITY_UPDATE Frame">7.1</a>).</p>
                            </div>
                            <div id="rfc.section.2.1.1.p.2">
                                <p>Once the client receives the first SETTINGS frame that contains the
                                    SETTINGS_NO_RFC7540_PRIORITIES parameter with a value of 1, it <em
                                        class="bcp14">SHOULD</em> stop sending the HTTP/2 priority signals. This avoids
                                    sending redundant signals that are known to be ignored.</p>
                            </div>
                            <div id="rfc.section.2.1.1.p.3">
                                <p>Similarly, if the client receives SETTINGS_NO_RFC7540_PRIORITIES with a value of 0 or
                                    if the settings parameter was absent, it <em class="bcp14">SHOULD</em> stop sending
                                    PRIORITY_UPDATE frames (<a href="#h2-update-frame"
                                        title="HTTP/2 PRIORITY_UPDATE Frame">Section 7.1</a>), since those frames are
                                    likely to be ignored. However, the client <em class="bcp14">MAY</em> continue
                                    sending the Priority header field (<a href="#header-field"
                                        title="The Priority HTTP Header Field">Section 5</a>), as it is an end-to-end
                                    signal that might be useful to nodes behind the server that the client is directly
                                    connected to.</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="applicability-of-the-extensible-priority-scheme">
                    <h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a
                            href="#applicability-of-the-extensible-priority-scheme">Applicability of the Extensible
                            Priority Scheme</a></h2>
                    <div id="rfc.section.3.p.1">
                        <p>The priority scheme defined by this document is primarily focused on the prioritization of
                            HTTP response messages (see <a
                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-3.4">Section 3.4</a> of <a
                                href="#HTTP"><cite title="HTTP Semantics">[HTTP]</cite></a>). It defines new priority
                            parameters (<a href="#parameters" title="Priority Parameters">Section 4</a>) and a means of
                            conveying those parameters <span class="nobr">(Sections </span><a href="#header-field"
                                title="The Priority HTTP Header Field">5</a> and <a href="#frame"
                                title="The PRIORITY_UPDATE Frame">7</a>), which is intended to communicate the priority
                            of responses to a server that is responsible for prioritizing them. <a
                                href="#server-scheduling" title="Server Scheduling">Section 10</a> provides
                            considerations for servers about acting on those signals in combination with other inputs
                            and factors.</p>
                    </div>
                    <div id="rfc.section.3.p.2">
                        <p>The CONNECT method (see <a
                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.3.6">Section 9.3.6</a> of <a
                                href="#HTTP"><cite title="HTTP Semantics">[HTTP]</cite></a>) can be used to establish
                            tunnels. Signaling applies similarly to tunnels; additional considerations for server
                            prioritization are given in <a href="#connect-scheduling"
                                title="Scheduling and the CONNECT Method">Section 11</a>.</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <p><a href="#client-scheduling" title="Client Scheduling">Section 9</a> describes how clients
                            can optionally apply elements of this scheme locally to the request messages that they
                            generate.</p>
                    </div>
                    <div id="rfc.section.3.p.4">
                        <p>Some forms of HTTP extensions might change HTTP/2 or HTTP/3 stream behavior or define new
                            data carriage mechanisms. Such extensions can themselves define how this priority scheme is
                            to be applied.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="parameters">
                    <h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a
                            href="#parameters">Priority Parameters</a></h2>
                    <div id="rfc.section.4.p.1">
                        <p>The priority information is a sequence of key-value pairs, providing room for future
                            extensions. Each key-value pair represents a priority parameter.</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <p>The Priority HTTP header field (<a href="#header-field"
                                title="The Priority HTTP Header Field">Section 5</a>) is an end-to-end way to transmit
                            this set of priority parameters when a request or a response is issued. After sending a
                            request, a client can change their view of response priority (<a href="#reprioritization"
                                title="Reprioritization">Section 6</a>) by sending HTTP-version-specific PRIORITY_UPDATE
                            frames as defined in <span class="nobr">Sections </span><a href="#h2-update-frame"
                                title="HTTP/2 PRIORITY_UPDATE Frame">7.1</a> and <a href="#h3-update-frame"
                                title="HTTP/3 PRIORITY_UPDATE Frame">7.2</a>. Frames transmit priority parameters on a
                            single hop only.</p>
                    </div>
                    <div id="rfc.section.4.p.3">
                        <p>Intermediaries can consume and produce priority signals in a PRIORITY_UPDATE frame or
                            Priority header field. An intermediary that passes only the Priority request header field to
                            the next hop preserves the original end-to-end signal from the client; see <a
                                href="#header-field-rationale" title="Why Use an End-to-End Header Field?">Section
                                14</a>. An intermediary could pass the Priority header field and additionally send a
                            PRIORITY_UPDATE frame. This would have the effect of preserving the original client
                            end-to-end signal, while instructing the next hop to use a different priority, per the
                            guidance in <a href="#frame" title="The PRIORITY_UPDATE Frame">Section 7</a>. An
                            intermediary that replaces or adds a Priority request header field overrides the original
                            client end-to-end signal, which can affect prioritization for all subsequent recipients of
                            the request.</p>
                    </div>
                    <div id="rfc.section.4.p.4">
                        <p>For both the Priority header field and the PRIORITY_UPDATE frame, the set of priority
                            parameters is encoded as a Dictionary (see <a
                                href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.2">Section 3.2</a> of <a
                                href="#STRUCTURED-FIELDS"><cite
                                    title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a>).</p>
                    </div>
                    <div id="rfc.section.4.p.5">
                        <p>This document defines the urgency (<span class="tt">u</span>) and incremental (<span
                                class="tt">i</span>) priority parameters. When receiving an HTTP request that does not
                            carry these priority parameters, a server <em class="bcp14">SHOULD</em> act as if their
                            default values were specified.</p>
                    </div>
                    <div id="rfc.section.4.p.6">
                        <p>An intermediary can combine signals from requests and responses that it forwards. Note that
                            omission of priority parameters in responses is handled differently from omission in
                            requests; see <a href="#merging"
                                title="Merging Client- and Server-Driven Priority Parameters">Section 8</a>.</p>
                    </div>
                    <div id="rfc.section.4.p.7">
                        <p>Receivers parse the Dictionary as described in <a
                                href="https://www.rfc-editor.org/rfc/rfc8941.html#section-4.2">Section 4.2</a> of <a
                                href="#STRUCTURED-FIELDS"><cite
                                    title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a>. Where the
                            Dictionary is successfully parsed, this document places the additional requirement that
                            unknown priority parameters, priority parameters with out-of-range values, or values of
                            unexpected types <em class="bcp14">MUST</em> be ignored.</p>
                    </div>
                    <section id="urgency">
                        <h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a>&nbsp;<a href="#urgency">Urgency</a>
                        </h3>
                        <div id="rfc.section.4.1.p.1">
                            <p>The urgency (<span class="tt">u</span>) parameter value is Integer (see <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.1">Section 3.3.1</a>
                                of <a href="#STRUCTURED-FIELDS"><cite
                                        title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a>),
                                between 0 and 7 inclusive, in descending order of priority. The default is 3.</p>
                        </div>
                        <div id="rfc.section.4.1.p.2">
                            <p>Endpoints use this parameter to communicate their view of the precedence of HTTP
                                responses. The chosen value of urgency can be based on the expectation that servers
                                might use this information to transmit HTTP responses in the order of their urgency. The
                                smaller the value, the higher the precedence.</p>
                        </div>
                        <div id="rfc.section.4.1.p.3" class="avoidbreakafter">
                            <p>The following example shows a request for a CSS file with the urgency set to <span
                                    class="tt">0</span>:</p>
                        </div>
                        <div id="rfc.section.4.1.p.4">
                            <pre>
:method = GET
:scheme = https
:authority = example.net
:path = /style.css
priority = u=0
</pre>
                        </div>
                        <div id="rfc.section.4.1.p.5">
                            <p>A client that fetches a document that likely consists of multiple HTTP resources (e.g.,
                                HTML) <em class="bcp14">SHOULD</em> assign the default urgency level to the main
                                resource. This convention allows servers to refine the urgency using knowledge specific
                                to the website (see <a href="#merging"
                                    title="Merging Client- and Server-Driven Priority Parameters">Section 8</a>).</p>
                        </div>
                        <div id="rfc.section.4.1.p.6">
                            <p>The lowest urgency level (7) is reserved for background tasks such as delivery of
                                software updates. This urgency level <em class="bcp14">SHOULD NOT</em> be used for
                                fetching responses that have any impact on user interaction.</p>
                        </div>
                    </section>
                    <section id="incremental">
                        <h3 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a>&nbsp;<a
                                href="#incremental">Incremental</a></h3>
                        <div id="rfc.section.4.2.p.1">
                            <p>The incremental (<span class="tt">i</span>) parameter value is Boolean (see <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.6">Section 3.3.6</a>
                                of <a href="#STRUCTURED-FIELDS"><cite
                                        title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a>). It
                                indicates if an HTTP response can be processed incrementally, i.e., provide some
                                meaningful output as chunks of the response arrive.</p>
                        </div>
                        <div id="rfc.section.4.2.p.2">
                            <p>The default value of the incremental parameter is <span class="tt">false</span> (<span
                                    class="tt">0</span>).</p>
                        </div>
                        <div id="rfc.section.4.2.p.3">
                            <p>If a client makes concurrent requests with the incremental parameter set to <span
                                    class="tt">false</span>, there is no benefit in serving responses with the same
                                urgency concurrently because the client is not going to process those responses
                                incrementally. Serving non-incremental responses with the same urgency one by one, in
                                the order in which those requests were generated, is considered to be the best strategy.
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.4">
                            <p>If a client makes concurrent requests with the incremental parameter set to <span
                                    class="tt">true</span>, serving requests with the same urgency concurrently might be
                                beneficial. Doing this distributes the connection bandwidth, meaning that responses take
                                longer to complete. Incremental delivery is most useful where multiple partial responses
                                might provide some value to clients ahead of a complete response being available.</p>
                        </div>
                        <div id="rfc.section.4.2.p.5">
                            <p>The following example shows a request for a JPEG file with the urgency parameter set to
                                <span class="tt">5</span> and the incremental parameter set to <span
                                    class="tt">true</span>.
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.6">
                            <pre>
:method = GET
:scheme = https
:authority = example.net
:path = /image.jpg
priority = u=5, i
</pre>
                        </div>
                    </section>
                    <section id="new-parameters">
                        <h3 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a>&nbsp;<a
                                href="#new-parameters">Defining New Priority Parameters</a></h3>
                        <div id="rfc.section.4.3.p.1">
                            <p>When attempting to define new priority parameters, care must be taken so that they do not
                                adversely interfere with prioritization performed by existing endpoints or
                                intermediaries that do not understand the newly defined priority parameters. Since
                                unknown priority parameters are ignored, new priority parameters should not change the
                                interpretation of, or modify, the urgency (see <a href="#urgency"
                                    title="Urgency">Section 4.1</a>) or incremental (see <a href="#incremental"
                                    title="Incremental">Section 4.2</a>) priority parameters in a way that is not
                                backwards compatible or fallback safe.</p>
                        </div>
                        <div id="rfc.section.4.3.p.2">
                            <p>For example, if there is a need to provide more granularity than eight urgency levels, it
                                would be possible to subdivide the range using an additional priority parameter.
                                Implementations that do not recognize the parameter can safely continue to use the less
                                granular eight levels.</p>
                        </div>
                        <div id="rfc.section.4.3.p.3">
                            <p>Alternatively, the urgency can be augmented. For example, a graphical user agent could
                                send a <span class="tt">visible</span> priority parameter to indicate if the resource
                                being requested is within the viewport.</p>
                        </div>
                        <div id="rfc.section.4.3.p.4">
                            <p>Generic priority parameters are preferred over vendor-specific, application-specific, or
                                deployment-specific values. If a generic value cannot be agreed upon in the community,
                                the parameter's name should be correspondingly specific (e.g., with a prefix that
                                identifies the vendor, application, or deployment).</p>
                        </div>
                        <section id="register">
                            <h4 id="rfc.section.4.3.1"><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;<a
                                    href="#register">Registration</a></h4>
                            <div id="rfc.section.4.3.1.p.1">
                                <p>New priority parameters can be defined by registering them in the "HTTP Priority"
                                    registry. This registry governs the keys (short textual strings) used in the
                                    Dictionary (see <a
                                        href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.2">Section 3.2</a>
                                    of <a href="#STRUCTURED-FIELDS"><cite
                                            title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a>).
                                    Since each HTTP request can have associated priority signals, there is value in
                                    having short key lengths, especially single-character strings. In order to encourage
                                    extensions while avoiding unintended conflict among attractive key values, the "HTTP
                                    Priority" registry operates two registration policies, depending on key length.</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.2">
                                <ul>
                                    <li>Registration requests for priority parameters with a key length of one use the
                                        Specification Required policy, per <a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.6">Section
                                            4.6</a> of <a href="#RFC8126"><cite
                                                title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>.
                                    </li>
                                    <li>Registration requests for priority parameters with a key length greater than one
                                        use the Expert Review policy, per <a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.5">Section
                                            4.5</a> of <a href="#RFC8126"><cite
                                                title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>.
                                        A specification document is appreciated but not required.</li>
                                </ul>
                            </div>
                            <div id="rfc.section.4.3.1.p.3">
                                <p>When reviewing registration requests, the designated expert(s) can consider the
                                    additional guidance provided in <a href="#new-parameters"
                                        title="Defining New Priority Parameters">Section 4.3</a> but cannot use it as a
                                    basis for rejection.</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.4" class="avoidbreakafter">
                                <p>Registration requests should use the following template:</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.5">
                                <dl>
                                    <dt>Name:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>[a name for the priority parameter that matches the parameter key]</div>
                                    </dd>
                                    <dt>Description:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>[a description of the priority parameter semantics and value]</div>
                                    </dd>
                                    <dt>Reference:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>[to a specification defining this priority parameter]</div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.4.3.1.p.6">
                                <p>See the registry at &lt;<a
                                        href="https://www.iana.org/assignments/http-priority">https://www.iana.org/assignments/http-priority</a>&gt;
                                    for details on where to send registration requests.</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="header-field">
                    <h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#header-field">The
                            Priority HTTP Header Field</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>The Priority HTTP header field is a Dictionary that carries priority parameters (see <a
                                href="#parameters" title="Priority Parameters">Section 4</a>). It can appear in requests
                            and responses. It is an end-to-end signal that indicates the endpoint's view of how HTTP
                            responses should be prioritized. <a href="#merging"
                                title="Merging Client- and Server-Driven Priority Parameters">Section 8</a> describes
                            how intermediaries can combine the priority information sent from clients and servers.
                            Clients cannot interpret the appearance or omission of a Priority response header field as
                            acknowledgement that any prioritization has occurred. Guidance for how endpoints can act on
                            Priority header values is given in <span class="nobr">Sections </span><a
                                href="#client-scheduling" title="Client Scheduling">9</a> and <a
                                href="#server-scheduling" title="Server Scheduling">10</a>.</p>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <p>An HTTP request with a Priority header field might be cached and reused for subsequent
                            requests; see <a href="#CACHING"><cite title="HTTP Caching">[CACHING]</cite></a>. When an
                            origin server generates the Priority response header field based on properties of an HTTP
                            request it receives, the server is expected to control the cacheability or the applicability
                            of the cached response by using header fields that control the caching behavior (e.g.,
                            Cache-Control, Vary).</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="reprioritization">
                    <h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a>&nbsp;<a
                            href="#reprioritization">Reprioritization</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>After a client sends a request, it may be beneficial to change the priority of the response.
                            As an example, a web browser might issue a prefetch request for a JavaScript file with the
                            urgency parameter of the Priority request header field set to <span class="tt">u=7</span>
                            (background). Then, when the user navigates to a page that references the new JavaScript
                            file, while the prefetch is in progress, the browser would send a reprioritization signal
                            with the Priority Field Value set to <span class="tt">u=0</span>. The PRIORITY_UPDATE frame
                            (<a href="#frame" title="The PRIORITY_UPDATE Frame">Section 7</a>) can be used for such
                            reprioritization.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="frame">
                    <h2 id="rfc.section.7" class="np"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#frame">The
                            PRIORITY_UPDATE Frame</a></h2>
                    <div id="rfc.section.7.p.1">
                        <p>This document specifies a new PRIORITY_UPDATE frame for HTTP/2 <a href="#HTTP2"><cite
                                    title="HTTP/2">[HTTP/2]</cite></a> and HTTP/3 <a href="#HTTP3"><cite
                                    title="HTTP/3">[HTTP/3]</cite></a>. It carries priority parameters and references
                            the target of the prioritization based on a version-specific identifier. In HTTP/2, this
                            identifier is the stream ID; in HTTP/3, the identifier is either the stream ID or push ID.
                            Unlike the Priority header field, the PRIORITY_UPDATE frame is a hop-by-hop signal.</p>
                    </div>
                    <div id="rfc.section.7.p.2">
                        <p>PRIORITY_UPDATE frames are sent by clients on the control stream, allowing them to be sent
                            independently of the stream that carries the response. This means they can be used to
                            reprioritize a response or a push stream, or to signal the initial priority of a response
                            instead of the Priority header field.</p>
                    </div>
                    <div id="rfc.section.7.p.3">
                        <p>A PRIORITY_UPDATE frame communicates a complete set of all priority parameters in the
                            Priority Field Value field. Omitting a priority parameter is a signal to use its default
                            value. Failure to parse the Priority Field Value <em class="bcp14">MAY</em> be treated as a
                            connection error. In HTTP/2, the error is of type PROTOCOL_ERROR; in HTTP/3, the error is of
                            type H3_GENERAL_PROTOCOL_ERROR.</p>
                    </div>
                    <div id="rfc.section.7.p.4">
                        <p>A client <em class="bcp14">MAY</em> send a PRIORITY_UPDATE frame before the stream that it
                            references is open (except for HTTP/2 push streams; see <a href="#h2-update-frame"
                                title="HTTP/2 PRIORITY_UPDATE Frame">Section 7.1</a>). Furthermore, HTTP/3 offers no
                            guaranteed ordering across streams, which could cause the frame to be received earlier than
                            intended. Either case leads to a race condition where a server receives a PRIORITY_UPDATE
                            frame that references a request stream that is yet to be opened. To solve this condition,
                            for the purposes of scheduling, the most recently received PRIORITY_UPDATE frame can be
                            considered as the most up-to-date information that overrides any other signal. Servers <em
                                class="bcp14">SHOULD</em> buffer the most recently received PRIORITY_UPDATE frame and
                            apply it once the referenced stream is opened. Holding PRIORITY_UPDATE frames for each
                            stream requires server resources, which can be bounded by local implementation policy.
                            Although there is no limit to the number of PRIORITY_UPDATE frames that can be sent, storing
                            only the most recently received frame limits resource commitment.</p>
                    </div>
                    <section id="h2-update-frame">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#h2-update-frame">HTTP/2 PRIORITY_UPDATE Frame</a></h3>
                        <div id="rfc.section.7.1.p.1">
                            <p>The HTTP/2 PRIORITY_UPDATE frame (type=0x10) is used by clients to signal the initial
                                priority of a response, or to reprioritize a response or push stream. It carries the
                                stream ID of the response and the priority in ASCII text, using the same representation
                                as the Priority header field value.</p>
                        </div>
                        <div id="rfc.section.7.1.p.2">
                            <p>The Stream Identifier field (see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.1.1">Section 5.1.1</a>
                                of <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>) in the PRIORITY_UPDATE
                                frame header <em class="bcp14">MUST</em> be zero (0x0). Receiving a PRIORITY_UPDATE
                                frame with a field of any other value <em class="bcp14">MUST</em> be treated as a
                                connection error of type PROTOCOL_ERROR.</p>
                        </div>
                        <div id="fig-h2-reprioritization-frame"></div>
                        <div id="rfc.figure.1">
                            <div>
                                <pre>
HTTP/2 PRIORITY_UPDATE Frame {
  Length (24),
  Type (8) = 0x10,

  Unused Flags (8),

  Reserved (1),
  Stream Identifier (31),

  Reserved (1),
  Prioritized Stream ID (31),
  Priority Field Value (..),
}
</pre>
                            </div>
                        </div>
                        <p class="figure">Figure 1: HTTP/2 PRIORITY_UPDATE Frame Format</p>
                        <div id="rfc.section.7.1.p.3" class="avoidbreakafter">
                            <p>The Length, Type, Unused Flag(s), Reserved, and Stream Identifier fields are described in
                                <a href="https://www.rfc-editor.org/rfc/rfc9113.html#section-4">Section 4</a> of <a
                                    href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>. The PRIORITY_UPDATE frame
                                payload contains the following additional fields:
                            </p>
                        </div>
                        <div id="rfc.section.7.1.p.4">
                            <dl>
                                <dt>Prioritized Stream ID:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>A 31-bit stream identifier for the stream that is the target of the priority
                                        update.</div>
                                </dd>
                                <dt>Priority Field Value:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>The priority update value in ASCII text, encoded using Structured Fields. This
                                        is the same representation as the Priority header field value.</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.7.1.p.5">
                            <p>When the PRIORITY_UPDATE frame applies to a request stream, clients <em
                                    class="bcp14">SHOULD</em> provide a prioritized stream ID that refers to a stream in
                                the "open", "half-closed (local)", or "idle" state (i.e., streams where data might still
                                be received). Servers can discard frames where the prioritized stream ID refers to a
                                stream in the "half-closed (local)" or "closed" state (i.e., streams where no further
                                data will be sent). The number of streams that have been prioritized but remain in the
                                "idle" state plus the number of active streams (those in the "open" state or in either
                                of the "half-closed" states; see <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.1.2">Section 5.1.2</a>
                                of <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>) <em class="bcp14">MUST
                                    NOT</em> exceed the value of the SETTINGS_MAX_CONCURRENT_STREAMS parameter. Servers
                                that receive such a PRIORITY_UPDATE <em class="bcp14">MUST</em> respond with a
                                connection error of type PROTOCOL_ERROR.</p>
                        </div>
                        <div id="rfc.section.7.1.p.6">
                            <p>When the PRIORITY_UPDATE frame applies to a push stream, clients <em
                                    class="bcp14">SHOULD</em> provide a prioritized stream ID that refers to a stream in
                                the "reserved (remote)" or "half-closed (local)" state. Servers can discard frames where
                                the prioritized stream ID refers to a stream in the "closed" state. Clients <em
                                    class="bcp14">MUST NOT</em> provide a prioritized stream ID that refers to a push
                                stream in the "idle" state. Servers that receive a PRIORITY_UPDATE for a push stream in
                                the "idle" state <em class="bcp14">MUST</em> respond with a connection error of type
                                PROTOCOL_ERROR.</p>
                        </div>
                        <div id="rfc.section.7.1.p.7">
                            <p>If a PRIORITY_UPDATE frame is received with a prioritized stream ID of 0x0, the recipient
                                <em class="bcp14">MUST</em> respond with a connection error of type PROTOCOL_ERROR.
                            </p>
                        </div>
                        <div id="rfc.section.7.1.p.8">
                            <p>Servers <em class="bcp14">MUST NOT</em> send PRIORITY_UPDATE frames. If a client receives
                                a PRIORITY_UPDATE frame, it <em class="bcp14">MUST</em> respond with a connection error
                                of type PROTOCOL_ERROR.</p>
                        </div>
                    </section>
                    <section id="h3-update-frame">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a
                                href="#h3-update-frame">HTTP/3 PRIORITY_UPDATE Frame</a></h3>
                        <div id="rfc.section.7.2.p.1">
                            <p>The HTTP/3 PRIORITY_UPDATE frame (type=0xF0700 or 0xF0701) is used by clients to signal
                                the initial priority of a response, or to reprioritize a response or push stream. It
                                carries the identifier of the element that is being prioritized and the updated priority
                                in ASCII text that uses the same representation as that of the Priority header field
                                value. PRIORITY_UPDATE with a frame type of 0xF0700 is used for request streams, while
                                PRIORITY_UPDATE with a frame type of 0xF0701 is used for push streams.</p>
                        </div>
                        <div id="rfc.section.7.2.p.2">
                            <p>The PRIORITY_UPDATE frame <em class="bcp14">MUST</em> be sent on the client control
                                stream (see <a href="https://www.rfc-editor.org/rfc/rfc9114.html#section-6.2.1">Section
                                    6.2.1</a> of <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>). Receiving a
                                PRIORITY_UPDATE frame on a stream other than the client control stream <em
                                    class="bcp14">MUST</em> be treated as a connection error of type
                                H3_FRAME_UNEXPECTED.</p>
                        </div>
                        <div id="fig-h3-reprioritization-frame"></div>
                        <div id="rfc.figure.2">
                            <div>
                                <pre>
HTTP/3 PRIORITY_UPDATE Frame {
  Type (i) = 0xF0700..0xF0701,
  Length (i),
  Prioritized Element ID (i),
  Priority Field Value (..),
}
</pre>
                            </div>
                        </div>
                        <p class="figure">Figure 2: HTTP/3 PRIORITY_UPDATE Frame</p>
                        <div id="rfc.section.7.2.p.3" class="avoidbreakafter">
                            <p>The PRIORITY_UPDATE frame payload has the following fields:</p>
                        </div>
                        <div id="rfc.section.7.2.p.4">
                            <dl>
                                <dt>Prioritized Element ID:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>The stream ID or push ID that is the target of the priority update.</div>
                                </dd>
                                <dt>Priority Field Value:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>The priority update value in ASCII text, encoded using Structured Fields. This
                                        is the same representation as the Priority header field value.</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.7.2.p.5">
                            <p>The request-stream variant of PRIORITY_UPDATE (type=0xF0700) <em class="bcp14">MUST</em>
                                reference a request stream. If a server receives a PRIORITY_UPDATE (type=0xF0700) for a
                                stream ID that is not a request stream, this <em class="bcp14">MUST</em> be treated as a
                                connection error of type H3_ID_ERROR. The stream ID <em class="bcp14">MUST</em> be
                                within the client-initiated bidirectional stream limit. If a server receives a
                                PRIORITY_UPDATE (type=0xF0700) with a stream ID that is beyond the stream limits, this
                                <em class="bcp14">SHOULD</em> be treated as a connection error of type H3_ID_ERROR.
                                Generating an error is not mandatory because HTTP/3 implementations might have practical
                                barriers to determining the active stream concurrency limit that is applied by the QUIC
                                layer.
                            </p>
                        </div>
                        <div id="rfc.section.7.2.p.6">
                            <p>The push-stream variant of PRIORITY_UPDATE (type=0xF0701) <em class="bcp14">MUST</em>
                                reference a promised push stream. If a server receives a PRIORITY_UPDATE (type=0xF0701)
                                with a push ID that is greater than the maximum push ID or that has not yet been
                                promised, this <em class="bcp14">MUST</em> be treated as a connection error of type
                                H3_ID_ERROR.</p>
                        </div>
                        <div id="rfc.section.7.2.p.7">
                            <p>Servers <em class="bcp14">MUST NOT</em> send PRIORITY_UPDATE frames of either type. If a
                                client receives a PRIORITY_UPDATE frame, this <em class="bcp14">MUST</em> be treated as
                                a connection error of type H3_FRAME_UNEXPECTED.</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="merging">
                    <h2 id="rfc.section.8" class="np"><a href="#rfc.section.8">8.</a>&nbsp;<a href="#merging">Merging
                            Client- and Server-Driven Priority Parameters</a></h2>
                    <div id="rfc.section.8.p.1">
                        <p>It is not always the case that the client has the best understanding of how the HTTP
                            responses deserve to be prioritized. The server might have additional information that can
                            be combined with the client's indicated priority in order to improve the prioritization of
                            the response. For example, use of an HTML document might depend heavily on one of the inline
                            images; the existence of such dependencies is typically best known to the server. Or, a
                            server that receives requests for a font <a href="#RFC8081"><cite
                                    title="The &#34;font&#34; Top-Level Media Type">[RFC8081]</cite></a> and images with
                            the same urgency might give higher precedence to the font, so that a visual client can
                            render textual information at an early moment.</p>
                    </div>
                    <div id="rfc.section.8.p.2">
                        <p>An origin can use the Priority response header field to indicate its view on how an HTTP
                            response should be prioritized. An intermediary that forwards an HTTP response can use the
                            priority parameters found in the Priority response header field, in combination with the
                            client Priority request header field, as input to its prioritization process. No guidance is
                            provided for merging priorities; this is left as an implementation decision.</p>
                    </div>
                    <div id="rfc.section.8.p.3">
                        <p>The absence of a priority parameter in an HTTP response indicates the server's disinterest in
                            changing the client-provided value. This is different from the request header field, in
                            which omission of a priority parameter implies the use of its default value (see <a
                                href="#parameters" title="Priority Parameters">Section 4</a>).</p>
                    </div>
                    <div id="rfc.section.8.p.4">
                        <p>As a non-normative example, when the client sends an HTTP request with the urgency parameter
                            set to <span class="tt">5</span> and the incremental parameter set to <span
                                class="tt">true</span></p>
                    </div>
                    <div id="rfc.section.8.p.5">
                        <pre>
:method = GET
:scheme = https
:authority = example.net
:path = /menu.png
priority = u=5, i
</pre>
                    </div>
                    <div id="rfc.section.8.p.6">
                        <p>and the origin responds with</p>
                    </div>
                    <div id="rfc.section.8.p.7">
                        <pre>
:status = 200
content-type = image/png
priority = u=1
</pre>
                    </div>
                    <div id="rfc.section.8.p.8">
                        <p>the intermediary might alter its understanding of the urgency from <span class="tt">5</span>
                            to <span class="tt">1</span>, because it prefers the server-provided value over the
                            client's. The incremental value continues to be <span class="tt">true</span>, i.e., the
                            value specified by the client, as the server did not specify the incremental (<span
                                class="tt">i</span>) parameter.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="client-scheduling">
                    <h2 id="rfc.section.9" class="np"><a href="#rfc.section.9">9.</a>&nbsp;<a
                            href="#client-scheduling">Client Scheduling</a></h2>
                    <div id="rfc.section.9.p.1">
                        <p>A client <em class="bcp14">MAY</em> use priority values to make local processing or
                            scheduling choices about the requests it initiates.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="server-scheduling">
                    <h2 id="rfc.section.10" class="np"><a href="#rfc.section.10">10.</a>&nbsp;<a
                            href="#server-scheduling">Server Scheduling</a></h2>
                    <div id="rfc.section.10.p.1">
                        <p>It is generally beneficial for an HTTP server to send all responses as early as possible.
                            However, when serving multiple requests on a single connection, there could be competition
                            between the requests for resources such as connection bandwidth. This section describes
                            considerations regarding how servers can schedule the order in which the competing responses
                            will be sent when such competition exists.</p>
                    </div>
                    <div id="rfc.section.10.p.2">
                        <p>Server scheduling is a prioritization process based on many inputs, with priority signals
                            being only one form of input. Factors such as implementation choices or deployment
                            environment also play a role. Any given connection is likely to have many dynamic
                            permutations. For these reasons, it is not possible to describe a universal scheduling
                            algorithm. This document provides some basic, non-exhaustive recommendations for how servers
                            might act on priority parameters. It does not describe in detail how servers might combine
                            priority signals with other factors. Endpoints cannot depend on particular treatment based
                            on priority signals. Expressing priority is only a suggestion.</p>
                    </div>
                    <div id="rfc.section.10.p.3">
                        <p>It is <em class="bcp14">RECOMMENDED</em> that, when possible, servers respect the urgency
                            parameter (<a href="#urgency" title="Urgency">Section 4.1</a>), sending higher-urgency
                            responses before lower-urgency responses.</p>
                    </div>
                    <div id="rfc.section.10.p.4">
                        <p>The incremental parameter indicates how a client processes response bytes as they arrive. It
                            is <em class="bcp14">RECOMMENDED</em> that, when possible, servers respect the incremental
                            parameter (<a href="#incremental" title="Incremental">Section 4.2</a>).</p>
                    </div>
                    <div id="rfc.section.10.p.5">
                        <p>Non-incremental responses of the same urgency <em class="bcp14">SHOULD</em> be served by
                            prioritizing bandwidth allocation in ascending order of the stream ID, which corresponds to
                            the order in which clients make requests. Doing so ensures that clients can use request
                            ordering to influence response order.</p>
                    </div>
                    <div id="rfc.section.10.p.6">
                        <p>Incremental responses of the same urgency <em class="bcp14">SHOULD</em> be served by sharing
                            bandwidth among them. The message content of incremental responses is used as parts, or
                            chunks, are received. A client might benefit more from receiving a portion of all these
                            resources rather than the entirety of a single resource. How large a portion of the resource
                            is needed to be useful in improving performance varies. Some resource types place critical
                            elements early; others can use information progressively. This scheme provides no explicit
                            mandate about how a server should use size, type, or any other input to decide how to
                            prioritize.</p>
                    </div>
                    <div id="rfc.section.10.p.7" class="avoidbreakafter">
                        <p>There can be scenarios where a server will need to schedule multiple incremental and
                            non-incremental responses at the same urgency level. Strictly abiding by the scheduling
                            guidance based on urgency and request generation order might lead to suboptimal results at
                            the client, as early non-incremental responses might prevent the serving of incremental
                            responses issued later. The following are examples of such challenges:</p>
                    </div>
                    <div id="rfc.section.10.p.8">
                        <ol type="1">
                            <li>At the same urgency level, a non-incremental request for a large resource followed by an
                                incremental request for a small resource.</li>
                            <li>At the same urgency level, an incremental request of indeterminate length followed by a
                                non-incremental large resource.</li>
                        </ol>
                    </div>
                    <div id="rfc.section.10.p.9">
                        <p>It is <em class="bcp14">RECOMMENDED</em> that servers avoid such starvation where possible.
                            The method for doing so is an implementation decision. For example, a server might
                            preemptively send responses of a particular incremental type based on other information such
                            as content size.</p>
                    </div>
                    <div id="rfc.section.10.p.10">
                        <p>Optimal scheduling of server push is difficult, especially when pushed resources contend with
                            active concurrent requests. Servers can consider many factors when scheduling, such as the
                            type or size of resource being pushed, the priority of the request that triggered the push,
                            the count of active concurrent responses, the priority of other active concurrent responses,
                            etc. There is no general guidance on the best way to apply these. A server that is too
                            simple could easily push at too high a priority and block client requests, or push at too
                            low a priority and delay the response, negating intended goals of server push.</p>
                    </div>
                    <div id="rfc.section.10.p.11">
                        <p>Priority signals are a factor for server push scheduling. The concept of parameter value
                            defaults applies slightly differently because there is no explicit client-signaled initial
                            priority. A server can apply priority signals provided in an origin response; see the
                            merging guidance given in <a href="#merging"
                                title="Merging Client- and Server-Driven Priority Parameters">Section 8</a>. In the
                            absence of origin signals, applying default parameter values could be suboptimal. By
                            whatever means a server decides to schedule a pushed response, it can signal the intended
                            priority to the client by including the Priority field in a PUSH_PROMISE or HEADERS frame.
                        </p>
                    </div>
                    <section id="intermediaries-with-multiple-backend-connections">
                        <h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a>&nbsp;<a
                                href="#intermediaries-with-multiple-backend-connections">Intermediaries with Multiple
                                Backend Connections</a></h3>
                        <div id="rfc.section.10.1.p.1">
                            <p>An intermediary serving an HTTP connection might split requests over multiple backend
                                connections. When it applies prioritization rules strictly, low-priority requests cannot
                                make progress while requests with higher priorities are in flight. This blocking can
                                propagate to backend connections, which the peer might interpret as a connection stall.
                                Endpoints often implement protections against stalls, such as abruptly closing
                                connections after a certain time period. To reduce the possibility of this occurring,
                                intermediaries can avoid strictly following prioritization and instead allocate small
                                amounts of bandwidth for all the requests that they are forwarding, so that every
                                request can make some progress over time.</p>
                        </div>
                        <div id="rfc.section.10.1.p.2">
                            <p>Similarly, servers <em class="bcp14">SHOULD</em> allocate some amount of bandwidths to
                                streams acting as tunnels.</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="connect-scheduling">
                    <h2 id="rfc.section.11" class="np"><a href="#rfc.section.11">11.</a>&nbsp;<a
                            href="#connect-scheduling">Scheduling and the CONNECT Method</a></h2>
                    <div id="rfc.section.11.p.1">
                        <p>When a stream carries a CONNECT request, the scheduling guidance in this document applies to
                            the frames on the stream. A client that issues multiple CONNECT requests can set the
                            incremental parameter to <span class="tt">true</span>. Servers that implement the
                            recommendations for handling of the incremental parameter (<a href="#server-scheduling"
                                title="Server Scheduling">Section 10</a>) are likely to schedule these fairly,
                            preventing one CONNECT stream from blocking others.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="retransmission-scheduling">
                    <h2 id="rfc.section.12" class="np"><a href="#rfc.section.12">12.</a>&nbsp;<a
                            href="#retransmission-scheduling">Retransmission Scheduling</a></h2>
                    <div id="rfc.section.12.p.1">
                        <p>Transport protocols such as TCP and QUIC provide reliability by detecting packet losses and
                            retransmitting lost information. In addition to the considerations in <a
                                href="#server-scheduling" title="Server Scheduling">Section 10</a>, scheduling of
                            retransmission data could compete with new data. The remainder of this section discusses
                            considerations when using QUIC.</p>
                    </div>
                    <div id="rfc.section.12.p.2">
                        <p><a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-13.3">Section 13.3</a> of <a
                                href="#QUIC"><cite
                                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC]</cite></a> states
                            the following: "Endpoints <em class="bcp14">SHOULD</em> prioritize retransmission of data
                            over sending new data, unless priorities specified by the application indicate otherwise".
                            When an HTTP/3 application uses the priority scheme defined in this document and the QUIC
                            transport implementation supports application-indicated stream priority, a transport that
                            considers the relative priority of streams when scheduling both new data and retransmission
                            data might better match the expectations of the application. However, there are no
                            requirements on how a transport chooses to schedule based on this information because the
                            decision depends on several factors and trade-offs. It could prioritize new data for a
                            higher-urgency stream over retransmission data for a lower-priority stream, or it could
                            prioritize retransmission data over new data irrespective of urgencies.</p>
                    </div>
                    <div id="rfc.section.12.p.3">
                        <p><a href="https://www.rfc-editor.org/rfc/rfc9002.html#section-6.2.4">Section 6.2.4</a> of <a
                                href="#QUIC-RECOVERY"><cite
                                    title="QUIC Loss Detection and Congestion Control">[QUIC-RECOVERY]</cite></a> also
                            highlights considerations regarding application priorities when sending probe packets after
                            Probe Timeout timer expiration. A QUIC implementation supporting application-indicated
                            priorities might use the relative priority of streams when choosing probe data.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="fairness">
                    <h2 id="rfc.section.13" class="np"><a href="#rfc.section.13">13.</a>&nbsp;<a
                            href="#fairness">Fairness</a></h2>
                    <div id="rfc.section.13.p.1">
                        <p>Typically, HTTP implementations depend on the underlying transport to maintain fairness
                            between connections competing for bandwidth. When an intermediary receives HTTP requests on
                            client connections, it forwards them to backend connections. Depending on how the
                            intermediary coalesces or splits requests across different backend connections, different
                            clients might experience dissimilar performance. This dissimilarity might expand if the
                            intermediary also uses priority signals when forwarding requests. <span
                                class="nobr">Sections </span><a href="#coalescing"
                                title="Coalescing Intermediaries">13.1</a> and <a href="#h1-backends"
                                title="HTTP/1.x Back Ends">13.2</a> discuss mitigations of this expansion of unfairness.
                        </p>
                    </div>
                    <div id="rfc.section.13.p.2">
                        <p>Conversely, <a href="#intentional-unfairness"
                                title="Intentional Introduction of Unfairness">Section 13.3</a> discusses how servers
                            might intentionally allocate unequal bandwidth to some connections, depending on the
                            priority signals.</p>
                    </div>
                    <section id="coalescing">
                        <h3 id="rfc.section.13.1"><a href="#rfc.section.13.1">13.1.</a>&nbsp;<a
                                href="#coalescing">Coalescing Intermediaries</a></h3>
                        <div id="rfc.section.13.1.p.1">
                            <p>When an intermediary coalesces HTTP requests coming from multiple clients into one HTTP/2
                                or HTTP/3 connection going to the backend server, requests that originate from one
                                client might carry signals indicating higher priority than those coming from others.</p>
                        </div>
                        <div id="rfc.section.13.1.p.2">
                            <p>It is sometimes beneficial for the server running behind an intermediary to obey Priority
                                header field values. As an example, a resource-constrained server might defer the
                                transmission of software update files that have the background urgency level (7).
                                However, in the worst case, the asymmetry between the priority declared by multiple
                                clients might cause all responses going to one user agent to be delayed until all
                                responses going to another user agent have been sent.</p>
                        </div>
                        <div id="rfc.section.13.1.p.3">
                            <p>In order to mitigate this fairness problem, a server could use knowledge about the
                                intermediary as another input in its prioritization decisions. For instance, if a server
                                knows the intermediary is coalescing requests, then it could avoid serving the responses
                                in their entirety and instead distribute bandwidth (for example, in a round-robin
                                manner). This can work if the constrained resource is network capacity between the
                                intermediary and the user agent, as the intermediary buffers responses and forwards the
                                chunks based on the prioritization scheme it implements.</p>
                        </div>
                        <div id="rfc.section.13.1.p.4" class="avoidbreakafter">
                            <p>A server can determine if a request came from an intermediary through configuration or
                                can check to see if the request contains one of the following header fields:</p>
                        </div>
                        <div id="rfc.section.13.1.p.5">
                            <ul>
                                <li>Forwarded <a href="#FORWARDED"><cite
                                            title="Forwarded HTTP Extension">[FORWARDED]</cite></a>, X-Forwarded-For
                                </li>
                                <li>Via (see <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.6.3">Section
                                        7.6.3</a> of <a href="#HTTP"><cite title="HTTP Semantics">[HTTP]</cite></a>)
                                </li>
                            </ul>
                        </div>
                    </section>
                    <section id="h1-backends">
                        <h3 id="rfc.section.13.2"><a href="#rfc.section.13.2">13.2.</a>&nbsp;<a
                                href="#h1-backends">HTTP/1.x Back Ends</a></h3>
                        <div id="rfc.section.13.2.p.1">
                            <p>It is common for Content Delivery Network (CDN) infrastructure to support different HTTP
                                versions on the front end and back end. For instance, the client-facing edge might
                                support HTTP/2 and HTTP/3 while communication to backend servers is done using HTTP/1.1.
                                Unlike connection coalescing, the CDN will "demux" requests into discrete connections to
                                the back end. Response multiplexing in a single connection is not supported by HTTP/1.1
                                (or older), so there is not a fairness problem. However, backend servers <em
                                    class="bcp14">MAY</em> still use client headers for request scheduling. Backend
                                servers <em class="bcp14">SHOULD</em> only schedule based on client priority information
                                where that information can be scoped to individual end clients. Authentication and other
                                session information might provide this linkability.</p>
                        </div>
                    </section>
                    <section id="intentional-unfairness">
                        <h3 id="rfc.section.13.3"><a href="#rfc.section.13.3">13.3.</a>&nbsp;<a
                                href="#intentional-unfairness">Intentional Introduction of Unfairness</a></h3>
                        <div id="rfc.section.13.3.p.1">
                            <p>It is sometimes beneficial to deprioritize the transmission of one connection over
                                others, knowing that doing so introduces a certain amount of unfairness between the
                                connections and therefore between the requests served on those connections.</p>
                        </div>
                        <div id="rfc.section.13.3.p.2">
                            <p>For example, a server might use a scavenging congestion controller on connections that
                                only convey background priority responses such as software update images. Doing so
                                improves responsiveness of other connections at the cost of delaying the delivery of
                                updates.</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="header-field-rationale">
                    <h2 id="rfc.section.14" class="np"><a href="#rfc.section.14">14.</a>&nbsp;<a
                            href="#header-field-rationale">Why Use an End-to-End Header Field?</a></h2>
                    <div id="rfc.section.14.p.1">
                        <p>In contrast to the prioritization scheme of HTTP/2, which uses a hop-by-hop frame, the
                            Priority header field is defined as "end-to-end".</p>
                    </div>
                    <div id="rfc.section.14.p.2">
                        <p>The way that a client processes a response is a property associated with the client
                            generating that request, not that of an intermediary. Therefore, it is an end-to-end
                            property. How these end-to-end properties carried by the Priority header field affect the
                            prioritization between the responses that share a connection is a hop-by-hop issue.</p>
                    </div>
                    <div id="rfc.section.14.p.3">
                        <p>Having the Priority header field defined as end-to-end is important for caching
                            intermediaries. Such intermediaries can cache the value of the Priority header field along
                            with the response and utilize the value of the cached header field when serving the cached
                            response, only because the header field is defined as end-to-end rather than hop-by-hop.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="security-considerations">
                    <h2 id="rfc.section.15" class="np"><a href="#rfc.section.15">15.</a>&nbsp;<a
                            href="#security-considerations">Security Considerations</a></h2>
                    <div id="rfc.section.15.p.1">
                        <p><a href="#frame" title="The PRIORITY_UPDATE Frame">Section 7</a> describes considerations for
                            server buffering of PRIORITY_UPDATE frames.</p>
                    </div>
                    <div id="rfc.section.15.p.2">
                        <p><a href="#server-scheduling" title="Server Scheduling">Section 10</a> presents examples where
                            servers that prioritize responses in a certain way might be starved of the ability to
                            transmit responses.</p>
                    </div>
                    <div id="rfc.section.15.p.3">
                        <p>The security considerations from <a href="#STRUCTURED-FIELDS"><cite
                                    title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a> apply to the
                            processing of priority parameters defined in <a href="#parameters"
                                title="Priority Parameters">Section 4</a>.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="iana-considerations">
                    <h2 id="rfc.section.16" class="np"><a href="#rfc.section.16">16.</a>&nbsp;<a
                            href="#iana-considerations">IANA Considerations</a></h2>
                    <div id="rfc.section.16.p.1" class="avoidbreakafter">
                        <p>This specification registers the following entry in the "Hypertext Transfer Protocol (HTTP)
                            Field Name Registry" defined in <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>:
                        </p>
                    </div>
                    <div id="rfc.section.16.p.2">
                        <dl class="compact">
                            <dt>Field Name:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>Priority</div>
                            </dd>
                            <dt>Status:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>permanent</div>
                            </dd>
                            <dt>Reference:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>This document</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.3" class="avoidbreakafter">
                        <p>This specification registers the following entry in the "HTTP/2 Settings" registry defined in
                            <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>:
                        </p>
                    </div>
                    <div id="rfc.section.16.p.4">
                        <dl class="compact">
                            <dt>Code:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0x9</div>
                            </dd>
                            <dt>Name:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>SETTINGS_NO_RFC7540_PRIORITIES</div>
                            </dd>
                            <dt>Initial Value:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0</div>
                            </dd>
                            <dt>Reference:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>This document</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.5" class="avoidbreakafter">
                        <p>This specification registers the following entry in the "HTTP/2 Frame Type" registry defined
                            in <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>:</p>
                    </div>
                    <div id="rfc.section.16.p.6">
                        <dl class="compact">
                            <dt>Code:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0x10</div>
                            </dd>
                            <dt>Frame Type:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>PRIORITY_UPDATE</div>
                            </dd>
                            <dt>Reference:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>This document</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.7" class="avoidbreakafter">
                        <p>This specification registers the following entry in the "HTTP/3 Frame Types" registry
                            established by <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>:</p>
                    </div>
                    <div id="rfc.section.16.p.8">
                        <dl class="compact">
                            <dt>Value:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0xF0700-0xF0701</div>
                            </dd>
                            <dt>Frame Type:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>PRIORITY_UPDATE</div>
                            </dd>
                            <dt>Status:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>permanent</div>
                            </dd>
                            <dt>Reference:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>This document</div>
                            </dd>
                            <dt>Change Controller:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>IETF</div>
                            </dd>
                            <dt>Contact:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>ietf-http-wg@w3.org</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.9">
                        <p>IANA has created the "Hypertext Transfer Protocol (HTTP) Priority" registry at &lt;<a
                                href="https://www.iana.org/assignments/http-priority">https://www.iana.org/assignments/http-priority</a>&gt;
                            and has populated it with the entries in <a href="#iana-parameter-table"
                                title="Initial Priority Parameters">Table 1</a>; see <a href="#register"
                                title="Registration">Section 4.3.1</a> for its associated procedures.</p>
                    </div>
                    <div class="table table-condensed table-striped" id="iana-parameter-table">
                        <table class="v3 text-center">
                            <caption>Table 1: Initial Priority Parameters</caption>
                            <thead>
                                <tr>
                                    <th class="text-left" colspan="1" rowspan="1">Name</th>
                                    <th class="center" colspan="1" rowspan="1">Description</th>
                                    <th class="text-left" colspan="1" rowspan="1">Reference</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">u</td>
                                    <td class="center" colspan="1" rowspan="1">The urgency of an HTTP response.</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#urgency"
                                            title="Urgency">Section 4.1</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">i</td>
                                    <td class="center" colspan="1" rowspan="1">Whether an HTTP response can be processed
                                        incrementally.</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#incremental"
                                            title="Incremental">Section 4.2</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <section class="np">
                    <div id="rfc.references">
                        <h2 id="rfc.section.17"><a href="#rfc.section.17">17.</a> References</h2>
                        <section>
                            <div id="rfc.references.2">
                                <h3 id="rfc.section.17.1"><a href="#rfc.section.17.1">17.1.</a> Normative References
                                </h3>
                                <dl class="dl-horizontal">
                                    <dt id="HTTP">[<a href="#HTTP" class="smpl">HTTP</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP Semantics</a>”, <a
                                            href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a
                                            href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;.
                                    </dd>
                                    <dt id="HTTP2">[<a href="#HTTP2" class="smpl">HTTP/2</a>]</dt>
                                    <dd>Thomson, M., Ed. and C. Benfield, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9113.html">HTTP/2</a>”, RFC 9113, <a
                                            href="https://dx.doi.org/10.17487/RFC9113">DOI 10.17487/RFC9113</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;.
                                    </dd>
                                    <dt id="HTTP3">[<a href="#HTTP3" class="smpl">HTTP/3</a>]</dt>
                                    <dd>Bishop, M., Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9114.html">HTTP/3</a>”, RFC 9114, <a
                                            href="https://dx.doi.org/10.17487/RFC9114">DOI 10.17487/RFC9114</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>&gt;.
                                    </dd>
                                    <dt id="QUIC">[<a href="#QUIC" class="smpl">QUIC</a>]</dt>
                                    <dd>Iyengar, J., Ed. and M. Thomson, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9000.html">QUIC: A UDP-Based
                                            Multiplexed and Secure Transport</a>”, RFC 9000, <a
                                            href="https://dx.doi.org/10.17487/RFC9000">DOI 10.17487/RFC9000</a>, May
                                        2021, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;.
                                    </dd>
                                    <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                    <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words
                                            for use in RFCs to Indicate Requirement Levels</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                            href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March
                                        1997, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                    </dd>
                                    <dt id="RFC8126">[<a href="#RFC8126" class="smpl">RFC8126</a>]</dt>
                                    <dd>Cotton, M., Leiba, B., and T. Narten, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html">Guidelines for Writing an
                                            IANA Considerations Section in RFCs</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp26">BCP 26</a>, RFC 8126, <a
                                            href="https://dx.doi.org/10.17487/RFC8126">DOI 10.17487/RFC8126</a>, June
                                        2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;.
                                    </dd>
                                    <dt id="RFC8174">[<a href="#RFC8174" class="smpl">RFC8174</a>]</dt>
                                    <dd>Leiba, B., “<a href="https://www.rfc-editor.org/rfc/rfc8174.html">Ambiguity of
                                            Uppercase vs Lowercase in RFC 2119 Key Words</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a
                                            href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>, May
                                        2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.
                                    </dd>
                                    <dt id="STRUCTURED-FIELDS">[<a href="#STRUCTURED-FIELDS"
                                            class="smpl">STRUCTURED-FIELDS</a>]</dt>
                                    <dd>Nottingham, M. and P-H. Kamp, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8941.html">Structured Field Values
                                            for HTTP</a>”, RFC 8941, <a href="https://dx.doi.org/10.17487/RFC8941">DOI
                                            10.17487/RFC8941</a>, February 2021, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8941">https://www.rfc-editor.org/info/rfc8941</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                        <section>
                            <div id="rfc.references.3">
                                <h3 id="rfc.section.17.2"><a href="#rfc.section.17.2">17.2.</a> Informative References
                                </h3>
                                <dl class="dl-horizontal">
                                    <dt id="CACHING">[<a href="#CACHING" class="smpl">CACHING</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9111.html">HTTP Caching</a>”, <a
                                            href="https://www.rfc-editor.org/info/std98">STD 98</a>, RFC 9111, <a
                                            href="https://dx.doi.org/10.17487/RFC9111">DOI 10.17487/RFC9111</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9111">https://www.rfc-editor.org/info/rfc9111</a>&gt;.
                                    </dd>
                                    <dt id="FORWARDED">[<a href="#FORWARDED" class="smpl">FORWARDED</a>]</dt>
                                    <dd>Petersson, A. and M. Nilsson, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7239.html">Forwarded HTTP
                                            Extension</a>”, RFC 7239, <a href="https://dx.doi.org/10.17487/RFC7239">DOI
                                            10.17487/RFC7239</a>, June 2014, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7239">https://www.rfc-editor.org/info/rfc7239</a>&gt;.
                                    </dd>
                                    <dt id="MARX">[<a href="#MARX" class="smpl">MARX</a>]</dt>
                                    <dd>Marx, R., De Decker, T., Quax, P., and W. Lamotte, “<a
                                            href="https://www.doi.org/10.5220/0008191701300143">Of the Utmost
                                            Importance: Resource Prioritization in HTTP/3 over QUIC</a>”, <a
                                            href="https://dx.doi.org/10.5220/0008191701300143">DOI
                                            10.5220/0008191701300143</a>, SCITEPRESS Proceedings of the 15th
                                        International Conference on Web Information Systems and Technologies (pages
                                        130-143), September 2019, &lt;<a
                                            href="https://www.doi.org/10.5220/0008191701300143">https://www.doi.org/10.5220/0008191701300143</a>&gt;.
                                    </dd>
                                    <dt id="I-D.lassey-priority-setting">[<a href="#I-D.lassey-priority-setting"
                                            class="smpl">PRIORITY-SETTING</a>]</dt>
                                    <dd>Lassey, B. and L. , “<a
                                            href="https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00">Declaring
                                            Support for HTTP/2 Priorities</a>”, <a
                                            href="https://datatracker.ietf.org/doc/draft-lassey-priority-setting">Work
                                            in Progress</a>, draft-lassey-priority-setting-00, Work in Progress, July
                                        2019, &lt;<a
                                            href="https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00">https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00</a>&gt;.
                                    </dd>
                                    <dt id="QUIC-RECOVERY">[<a href="#QUIC-RECOVERY" class="smpl">QUIC-RECOVERY</a>]
                                    </dt>
                                    <dd>Iyengar, J., Ed. and I. Swett, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9002.html">QUIC Loss Detection and
                                            Congestion Control</a>”, RFC 9002, <a
                                            href="https://dx.doi.org/10.17487/RFC9002">DOI 10.17487/RFC9002</a>, May
                                        2021, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9002">https://www.rfc-editor.org/info/rfc9002</a>&gt;.
                                    </dd>
                                    <dt id="RFC7540">[<a href="#RFC7540" class="smpl">RFC7540</a>]</dt>
                                    <dd>Belshe, M., Peon, R., and M. Thomson, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7540.html">Hypertext Transfer
                                            Protocol Version 2 (HTTP/2)</a>”, RFC 7540, <a
                                            href="https://dx.doi.org/10.17487/RFC7540">DOI 10.17487/RFC7540</a>, May
                                        2015, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;.
                                    </dd>
                                    <dt id="RFC8081">[<a href="#RFC8081" class="smpl">RFC8081</a>]</dt>
                                    <dd>Lilley, C., “<a href="https://www.rfc-editor.org/rfc/rfc8081.html">The "font"
                                            Top-Level Media Type</a>”, RFC 8081, <a
                                            href="https://dx.doi.org/10.17487/RFC8081">DOI 10.17487/RFC8081</a>,
                                        February 2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8081">https://www.rfc-editor.org/info/rfc8081</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="acknowledgements">
                    <h2 id="rfc.section.unnumbered-4" class="np"><a href="#acknowledgements">Acknowledgements</a></h2>
                    <div id="rfc.section.unnumbered-4.p.1">
                        <p>Roy Fielding presented the idea of using a header field for representing priorities in &lt;<a
                                href="https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-5.pdf">https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-5.pdf</a>&gt;.
                            In &lt;<a
                                href="https://github.com/pmeenan/http3-prioritization-proposal">https://github.com/pmeenan/http3-prioritization-proposal</a>&gt;,
                            Patrick Meenan advocated for representing the priorities using a tuple of urgency and
                            concurrency. The ability to disable HTTP/2 prioritization is inspired by <a
                                href="#I-D.lassey-priority-setting"><cite
                                    title="Declaring Support for HTTP/2 Priorities">[PRIORITY-SETTING]</cite></a>,
                            authored by Brad Lassey and Lucas Pardue, with modifications based on feedback that was not
                            incorporated into an update to that document.</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.2">
                        <p>The motivation for defining an alternative to HTTP/2 priorities is drawn from discussion
                            within the broad HTTP community. Special thanks to Roberto Peon, Martin Thomson, and Netflix
                            for text that was incorporated explicitly in this document.</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.3">
                        <p>In addition to the people above, this document owes a lot to the extensive discussion in the
                            HTTP priority design team, consisting of Alan Frindell, Andrew Galloni, Craig Taylor, Ian
                            Swett, Matthew Cox, Mike Bishop, Roberto Peon, Robin Marx, Roy Fielding, and the authors of
                            this document.</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.4">
                        <p>Yang Chi contributed the section on retransmission scheduling.</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.authors" class="np">
                    <h2><a href="#rfc.authors">Authors' Addresses</a></h2>
                    <address><b>Kazuho Oku</b><br>Fastly<br>EMail: <a
                            href="mailto:kazuhooku@gmail.com">kazuhooku@gmail.com</a><br><br><em>Additional contact
                            information:</em><br><b>奥 一穂</b><br>Fastly<br>EMail: <a
                            href="mailto:kazuhooku@gmail.com">kazuhooku@gmail.com</a></address>
                    <address><b>Lucas Pardue</b><br>Cloudflare<br>EMail: <a
                            href="mailto:lucaspardue.24.7@gmail.com">lucaspardue.24.7@gmail.com</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
</body>

</html>