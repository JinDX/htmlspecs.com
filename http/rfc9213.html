<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="zh-hans">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 9213 - 定向 HTTP 缓存控制</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC9213">
    <meta property="og:description" content="Targeted HTTP Cache Control">
    <meta property="og:url" content="https://httpwg.org/specs/rfc9213.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Targeted Cache-Control Header Fields" href="#rfc.section.2">
    <link rel="Chapter" title="3 The CDN-Cache-Control Targeted Field" href="#rfc.section.3">
    <link rel="Chapter" title="4 IANA Considerations" href="#rfc.section.4">
    <link rel="Chapter" title="5 Security Considerations" href="#rfc.section.5">
    <link rel="Chapter" title="6 References" href="#rfc.section.6">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-targeted-cache-control-04" rel="prev">
    <link href="https://dx.doi.org/10.17487/rfc9213" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9213.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9213">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="CDN, Content Delivery Network, Caching">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Ludin, S.">
    <meta name="dcterms.creator" content="Nottingham, M.">
    <meta name="dcterms.creator" content="Wu, Y.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:9213">
    <meta name="dcterms.issued" content="2022-06">
    <meta name="dcterms.abstract"
        content="This specification defines a convention for HTTP response header fields that allow cache directives to be targeted at specific caches or classes of caches. It also defines one such header field, the CDN-Cache-Control response header field, which is targeted at content delivery network (CDN) caches.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This specification defines a convention for HTTP response header fields that allow cache directives to be targeted at specific caches or classes of caches. It also defines one such header field, the CDN-Cache-Control response header field, which is targeted at content delivery network (CDN) caches.">
</head>

<body onload="getMeta(9213,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>9213</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">符号约定</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#targeted">定向
                                        Cache-Control 头字段</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#syntax">语法</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#cache-behavior">缓存行为</a></li>
                                        <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#interaction-with-http-freshness">与 HTTP 新鲜度的交互</a></li>
                                        <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#defining-targeted-fields">定义定向字段</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#cdn-cache-control">CDN-Cache-Control 定向字段</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#examples">示例</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                        注意事项</a></li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">安全性注意事项</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.6.1">6.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">规范性引用</a></li>
                                        <li><a href="#rfc.section.6.2">6.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.3">补充性引用</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.authors">作者地址</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">互联网工程任务组 (IETF)</td>
                                <td class="text-right">S. Ludin</td>
                            </tr>
                            <tr>
                                <td class="text-left">请求评议：9213</td>
                                <td class="text-right">Akamai</td>
                            </tr>
                            <tr>
                                <td class="text-left">类别：标准轨道</td>
                                <td class="text-right">M. Nottingham</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Fastly</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">Y. Wu</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">Cloudflare</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">June 2022</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>定向 HTTP 缓存控制</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">摘要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本规范定义了一种约定，用于在 HTTP 响应头字段中允许将缓存指令定向到特定缓存或某类缓存。它还定义了其中一个此类头字段 —— 面向内容分发网络 (CDN) 缓存的
                            CDN-Cache-Control 响应头字段。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本备忘录的状态</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>这是一个互联网标准轨道文档。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>本文件是互联网工程任务组 (IETF) 的成果，代表 IETF 社区的共识。它已获得公开评审，并由互联网工程指导小组 (IESG) 批准发布。关于互联网标准的更多信息请参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">RFC 7841 第2节</a>。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>关于本文档当前状态、勘误及如何反馈信息，可访问 <a
                                href="https://www.rfc-editor.org/info/rfc9213">https://www.rfc-editor.org/info/rfc9213</a>
                            获取。</p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>)
                            in effect on the date of publication of this document. Please review these documents
                            carefully, as they describe your rights and restrictions with respect to this document. Code
                            Components extracted from this document must include Revised BSD License text as described
                            in Section 4.e of the Trust Legal Provisions and are provided without warranty as described
                            in the Revised BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">符号约定</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#targeted">定向 Cache-Control
                                头字段</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#syntax">语法</a>
                                </li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#cache-behavior">缓存
                                        行为</a></li>
                                <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#interaction-with-http-freshness">与 HTTP 新鲜度的交互</a></li>
                                <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#defining-targeted-fields">定义定向字段</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#cdn-cache-control">CDN-Cache-Control 定向字段</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#examples">示例</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                注意事项</a></li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#security-considerations">安全
                                注意事项</a></li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.6.1">6.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">规范性引用</a></li>
                                <li><a href="#rfc.section.6.2">6.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.3">补充性引用</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.authors">作者地址</a></li>
                    </ul>
                </div>
                <hr class="hidden-print">
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">引言</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>现代的 HTTP 部署通常使用多层缓存。例如，网站可能在源服务器本身使用缓存；可能在与源服务器相同的网络中部署一个缓存层；可能使用一个或多个分布在互联网上的
                            CDN；也可能受益于浏览器缓存。</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>由于通常希望分别控制这些不同类别的缓存，因此需要某种将缓存指令定向到它们的手段。例如，如果发布者具有使其相关缓存（如 CDN
                            缓存）内容失效的机制，他们可能会更愿意为该缓存分配更宽松的缓存策略，同时仍希望限制其他缓存的行为。</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>HTTP 的 Cache-Control 响应头字段（定义见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2">Section 5.2</a> of <a
                                href="#HTTP-CACHING"><cite
                                    title="HTTP Caching">[HTTP-CACHING]</cite></a>）被广泛用于指导缓存行为。但它相对不具区分性；虽然某些缓存指令（例如
                            s-maxage）针对特定类别的缓存（如共享缓存），但并非所有现有缓存指令都能一致地进行定向（例如
                            stale-while-revalidate）。随着缓存扩展数量和潜在目标数量的增长，这会带来问题。</p>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>一些实现已经定义了临时的控制机制来克服此问题，但它们的互操作性较低。<a href="#targeted"
                                title="Targeted Cache-Control Header Fields">第 2 节</a> 定义了一个使用 HTTP 响应头进行定向缓存控制的标准框架，而
                            <a href="#cdn-cache-control" title="The CDN-Cache-Control Targeted Field">第 3 节</a>
                            定义了其中的一个头字段：CDN-Cache-Control 响应头字段。
                        </p>
                    </div>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#notational-conventions">符号约定</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>文中关键词 "<em class="bcp14">MUST</em>", "<em class="bcp14">MUST NOT</em>", "<em
                                    class="bcp14">REQUIRED</em>", "<em class="bcp14">SHALL</em>", "<em
                                    class="bcp14">SHALL NOT</em>", "<em class="bcp14">SHOULD</em>", "<em
                                    class="bcp14">SHOULD NOT</em>", "<em class="bcp14">RECOMMENDED</em>", "<em
                                    class="bcp14">NOT RECOMMENDED</em>", "<em class="bcp14">MAY</em>", 和 "<em
                                    class="bcp14">OPTIONAL</em>" 应按 BCP 14 <a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>
                                和 <a href="#RFC8174"><cite
                                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a>
                                的说明来解释，仅在这些词以全大写形式出现时适用。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="targeted">
                    <h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#targeted">定向
                            Cache-Control 头字段</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>Targeted Cache-Control Header Field（下称“定向字段”）是一个具有与 Cache-Control 响应头字段相同语义的 HTTP 响应头字段（见 <a
                                href="#HTTP-CACHING"><cite title="HTTP Caching">[HTTP-CACHING]</cite></a>，<a
                                href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2">Section
                                5.2</a>）。然而，它具有一个不同的字段名，用以指示其缓存指令的目标。</p>
                    </div>
                    <div id="rfc.section.2.p.2" class="avoidbreakafter">
                        <p>例如：</p>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <pre class="text">
CDN-Cache-Control: max-age=60
</pre>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>是一个针对 CDN 的定向字段，如 <a href="#cdn-cache-control" title="The CDN-Cache-Control Targeted Field">第
                                3 节</a> 所定义。</p>
                    </div>
                    <section id="syntax">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#syntax">语法</a>
                        </h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>定向字段是 Dictionary Structured Fields（<a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.2">RFC8941 第 3.2
                                    节</a>）。字典的每个成员都是一个 HTTP 缓存响应指令（见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.2">RFC9111 第 5.2.2
                                    节</a>），包括扩展响应指令（见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.3">RFC9111 第 5.2.3
                                    节</a>）。注意，尽管定向字段通常具有与 Cache-Control 字段相同的语法，但错误处理差异意味着使用 Cache-Control 解析器而不是
                                Structured Fields 解析器可能会引入互操作性问题。</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>由于缓存指令未以结构化数据类型定义，必须将其值映射到适当的类型。<a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2">RFC9111 第 5.2 节</a>
                                定义了缓存指令值可以是缺省、带引号字符串或 token。</p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>这意味着没有值的缓存指令将映射为 Boolean（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.6">RFC8941 第 3.3.6
                                    节</a>）。当值为带引号字符串时，映射为 String（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.3">RFC8941 第 3.3.3
                                    节</a>）；当值为 token 时，根据内容可映射为 Token、Integer（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.1">RFC8941 第 3.3.1
                                    节</a>）或 Decimal（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.2">RFC8941 第 3.3.2
                                    节</a>）。</p>
                        </div>
                        <div id="rfc.section.2.1.p.4">
                            <p>例如，max-age 指令（见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.2.1">RFC9111 第 5.2.2.1
                                    节</a>）具有整数值；no-store（见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.2.5">RFC9111 第 5.2.2.5
                                    节</a>）始终为 Boolean true；no-cache（见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.2.4">RFC9111 第 5.2.2.4
                                    节</a>）的值可以是 Boolean true 或包含以逗号分隔的字段名列表的字符串。</p>
                        </div>
                        <div id="rfc.section.2.1.p.5">
                            <p>实现 <em class="bcp14">不得</em> 生成违反这些推断约束的缓存指令值。特别地，若字符串值的首字符不是字母或 "*"，则 <em
                                    class="bcp14">必须</em> 作为 Strings 生成，以免被误判为其他类型。</p>
                        </div>
                        <div id="rfc.section.2.1.p.6">
                            <p>实现 <em class="bcp14">不应</em> 消费违反这些推断约束的值。例如，将带小数的 max-age
                                强制转换为整数的消费实现，会与其他实现行为不同，可能引发互操作性问题。</p>
                        </div>
                        <div id="rfc.section.2.1.p.7">
                            <p>在缓存指令上收到的参数应被忽略，除非另有明确规定。</p>
                        </div>
                        <div id="rfc.section.2.1.p.8">
                            <p>如果响应中的定向字段为空，或在解析时遇到错误，则该字段 <em class="bcp14">必须</em> 被缓存忽略（即表现得好像该字段不存在，通常回退到响应中存在的其他
                                cache-control 机制）。</p>
                        </div>
                    </section>
                    <section id="cache-behavior">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a
                                href="#cache-behavior">缓存行为</a></h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>实现本规范的缓存维护一个目标列表。目标列表是一个有序的定向字段名列表，缓存使用该列表来决定缓存策略，列表顺序表示从最适用到最不适用的优先级。目标列表可以是固定的、用户可配置的，或按请求生成，取决于实现。
                            </p>
                        </div>
                        <div id="rfc.section.2.2.p.2" class="avoidbreakafter">
                            <p>例如，某个 CDN 缓存可能同时支持 CDN-Cache-Control 和 针对该 CDN 的头字段
                                ExampleCDN-Cache-Control，后者覆盖前者。其目标列表可能是：</p>
                        </div>
                        <div id="rfc.section.2.2.p.3">
                            <pre>
  [ExampleCDN-Cache-Control, CDN-Cache-Control]
  </pre>
                        </div>
                        <div id="rfc.section.2.2.p.4">
                            <p>当实现本规范的缓存收到包含其目标列表中一个或多个头字段名的响应时，缓存 <em class="bcp14">必须</em>
                                选择目标列表中第一个（按顺序）具有有效且非空值的字段，并使用其值来确定该响应的缓存策略；并且缓存 <em class="bcp14">必须</em> 忽略响应中的
                                Cache-Control 和 Expires 头字段，除非在列出的头字段中没有可用的有效非空值。</p>
                        </div>
                        <div id="rfc.section.2.2.p.5">
                            <p>注意这是逐响应发生的；如果缓存的目标列表中没有任何成员存在、有效且非空，则缓存按照 HTTP 的要求回退到其他缓存控制机制（见 <a
                                    href="#HTTP-CACHING"><cite title="HTTP Caching">[HTTP-CACHING]</cite></a>）。</p>
                        </div>
                        <div id="rfc.section.2.2.p.6">
                            <p>不在缓存目标列表内的定向字段 <em class="bcp14">不得</em> 改变该缓存的行为，且 <em class="bcp14">必须</em> 被透传。</p>
                        </div>
                        <div id="rfc.section.2.2.p.7" class="avoidbreakafter">
                            <p>使用定向字段的缓存 <em class="bcp14">必须</em> 实现下列缓存指令的语义：</p>
                        </div>
                        <div id="rfc.section.2.2.p.8">
                            <ul>
                                <li>max-age</li>
                                <li>must-revalidate</li>
                                <li>no-store</li>
                                <li>no-cache</li>
                                <li>private</li>
                            </ul>
                        </div>
                        <div id="rfc.section.2.2.p.9">
                            <p>此外，它们 <em class="bcp14">应</em> 实现它们在 Cache-Control 响应头字段中支持的其他缓存指令（包括扩展缓存指令）。</p>
                        </div>
                        <div id="rfc.section.2.2.p.10">
                            <p>定向字段中缓存指令的语义和优先级与 Cache-Control 中相同。特别地，no-store 和 no-cache 会使 max-age 无效，未识别的扩展指令将被忽略。
                            </p>
                        </div>
                    </section>
                    <section id="interaction-with-http-freshness">
                        <h3 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3.</a>&nbsp;<a
                                href="#interaction-with-http-freshness">与 HTTP 新鲜度的交互</a></h3>
                        <div id="rfc.section.2.3.p.1">
                            <p>HTTP 缓存具有端到端的新鲜度模型，定义见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-4.2">RFC9111 第 4.2
                                    节</a>。当某些缓存路径上的缓存只有针对它们可用的额外新鲜度机制（例如使用定向字段）时，需要谨慎考虑它们的交互。特别地，定向缓存可能具有比其他缓存更长的新鲜期，导致它向下游缓存或客户端提供的响应对其他缓存来说显得过早（甚至立即）过期，从而负面影响缓存效率。
                            </p>
                        </div>
                        <div id="rfc.section.2.3.p.2" class="avoidbreakafter">
                            <p>例如，某个 CDN 缓存存储的响应可能带有如下头字段：</p>
                        </div>
                        <div id="rfc.section.2.3.p.3">
                            <pre class="text">
Age: 1800
Cache-Control: max-age=600
CDN-Cache-Control: max-age=3600
</pre>
                        </div>
                        <div id="rfc.section.2.3.p.4">
                            <p>从 CDN 的角度看，该响应在缓存 30 分钟后仍然是新鲜的，而从其他缓存的角度，该响应已经是陈旧的。有关更多讨论，请参见 <a
                                    href="#AGE-PENALTY"><cite
                                        title="The age penalty and its effect on cache performance">[AGE-PENALTY]</cite></a>。
                            </p>
                        </div>
                        <div id="rfc.section.2.3.p.5" class="avoidbreakafter">
                            <p>当定向缓存具有强一致性机制（例如源服务器能够主动使缓存失效）时，通常希望缓解这些影响。部署中见到的一些技术包括：</p>
                        </div>
                        <div id="rfc.section.2.3.p.6">
                            <ul>
                                <li>移除 Age 首部字段</li>
                                <li>将 Date 首部字段更新为当前时间</li>
                                <li>将 Expires 首部字段更新为当前时间，加上任何 Cache-Control: max-age 值</li>
                            </ul>
                        </div>
                        <div id="rfc.section.2.3.p.7">
                            <p>本规范对实现缓解这些影响不作具体要求，但定向字段的定义可以包含此类要求。</p>
                        </div>
                    </section>
                    <section id="defining-targeted-fields">
                        <h3 id="rfc.section.2.4"><a href="#rfc.section.2.4">2.4.</a>&nbsp;<a
                                href="#defining-targeted-fields">定义定向字段</a></h3>
                        <div id="rfc.section.2.4.p.1">
                            <p>针对特定缓存类别的定向字段可以通过在 "Hypertext Transfer Protocol (HTTP) Field Name Registry"（&lt;<a
                                    href="https://www.iana.org/assignments/http-fields/">https://www.iana.org/assignments/http-fields/</a>&gt;）中请求注册来定义。
                            </p>
                        </div>
                        <div id="rfc.section.2.4.p.2">
                            <p>注册请求可以使用本文档作为规范文档；在这种情况下，Comments 字段应明确定义该定向字段适用的缓存类别。或者，如果已有其他文档定义该字段，也可使用该文档作为规范文档。</p>
                        </div>
                        <div id="rfc.section.2.4.p.3">
                            <p>按惯例，定向字段带有后缀 "-Cache-Control"，例如 "ExampleCDN-Cache-Control"。然而，该后缀 <em
                                    class="bcp14">不得</em> 单独用来识别定向字段；它仅为一种惯例。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="cdn-cache-control">
                    <h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a
                            href="#cdn-cache-control">CDN-Cache-Control 定向字段</a></h2>
                    <div id="rfc.section.3.p.1">
                        <p>CDN-Cache-Control 响应头字段是一个定向字段（见 <a href="#targeted"
                                title="Targeted Cache-Control Header Fields">第 2 节</a>），它允许源服务器单独控制插入在源与客户端之间的 CDN
                            缓存的行为，而不影响可能处理该响应的其他缓存。</p>
                    </div>
                    <div id="rfc.section.3.p.2">
                        <p>它适用于作为分布式网络一部分、代表源服务器运行的缓存（通常称为 CDN）。</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <p>使用 CDN-Cache-Control 的 CDN 缓存通常会转发该头，以便下游的 CDN 缓存也能使用它。但在不希望转发的情况下（例如已配置为下游不会使用时），它们 <em
                                class="bcp14">可以</em> 将其移除。</p>
                    </div>
                    <section id="examples">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a href="#examples">示例</a>
                        </h3>
                        <div id="rfc.section.3.1.p.1" class="avoidbreakafter">
                            <p>例如，以下头字段会指示 CDN 缓存（即目标列表为 <span class="tt">[CDN-Cache-Control]</span> 的缓存）将响应视为 600
                                秒内新鲜，其他共享缓存将视为 120 秒新鲜，其余缓存视为 60 秒新鲜：</p>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <pre class="text">
Cache-Control: max-age=60, s-maxage=120
CDN-Cache-Control: max-age=600
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.3" class="avoidbreakafter">
                            <p>这些头字段会指示 CDN 缓存将响应视为 600 秒新鲜，而所有其他缓存则被阻止存储该响应：</p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <pre class="text">
CDN-Cache-Control: max-age=600
Cache-Control: no-store
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.5" class="avoidbreakafter">
                            <p>如果不存在 CDN-Cache-Control，则以下头字段会阻止所有缓存存储该响应：</p>
                        </div>
                        <div id="rfc.section.3.1.p.6">
                            <pre class="text">
Cache-Control: no-store
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.7" class="avoidbreakafter">
                            <p>而下面这些会阻止除 CDN 缓存之外的所有缓存存储该响应：</p>
                        </div>
                        <div id="rfc.section.3.1.p.8">
                            <pre class="text">
Cache-Control: no-store
CDN-Cache-Control: none
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.9">
                            <p>（注意 'none' 不是注册的缓存指令；此处使用它是为了避免发送空值的头字段，因为空值的头字段会被忽略。）</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="iana-considerations">
                    <h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a
                            href="#iana-considerations">IANA 注意事项</a></h2>
                    <div id="rfc.section.4.p.1" class="avoidbreakafter">
                        <p>IANA 已在 <a href="#HTTP"><cite title="HTTP Semantics">[HTTP]</cite></a> 定义的 "Hypertext
                            Transfer Protocol (HTTP) Field Name Registry" 中注册了以下条目：</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <dl class="compact">
                            <dt>Field Name:</dt>
                            <dd style="margin-left: 1.5em">CDN-Cache-Control</dd>
                            <dt>Status:</dt>
                            <dd style="margin-left: 1.5em">permanent</dd>
                            <dt>Specification Document:</dt>
                            <dd style="margin-left: 1.5em">RFC 9213</dd>
                            <dt>Comments:</dt>
                            <dd style="margin-left: 1.5em">针对内容分发网络的缓存指令</dd>
                        </dl>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="security-considerations">
                    <h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a
                            href="#security-considerations">安全性注意事项</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>适用于 HTTP 缓存的安全性注意事项仍然适用（见 <a href="#HTTP-CACHING"><cite
                                    title="HTTP Caching">[HTTP-CACHING]</cite></a>）。</p>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <p>在响应上携带多种缓存策略的能力可能会导致关于响应在不同系统中如何被缓存的混淆，可能导致包含敏感信息的响应被无意间重用。因此必须谨慎处理。</p>
                    </div>
                </section>
                <section class="np">
                    <div id="rfc.references">
                        <h2 id="rfc.section.6"><a href="#rfc.section.6">6.</a> 参考文献</h2>
                        <section>
                            <div id="rfc.references.2">
                                <h3 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1.</a> 规范性引用</h3>
                                <dl class="dl-horizontal">
                                    <dt id="HTTP">[<a href="#HTTP" class="smpl">HTTP</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP Semantics</a>”, <a
                                            href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a
                                            href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;.
                                    </dd>
                                    <dt id="HTTP-CACHING">[<a href="#HTTP-CACHING" class="smpl">HTTP-CACHING</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9111.html">HTTP Caching</a>”, <a
                                            href="https://www.rfc-editor.org/info/std98">STD 98</a>, RFC 9111, <a
                                            href="https://dx.doi.org/10.17487/RFC9111">DOI 10.17487/RFC9111</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9111">https://www.rfc-editor.org/info/rfc9111</a>&gt;.
                                    </dd>
                                    <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                    <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words
                                            for use in RFCs to Indicate Requirement Levels</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                            href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March
                                        1997, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                    </dd>
                                    <dt id="RFC8174">[<a href="#RFC8174" class="smpl">RFC8174</a>]</dt>
                                    <dd>Leiba, B., “<a href="https://www.rfc-editor.org/rfc/rfc8174.html">Ambiguity of
                                            Uppercase vs Lowercase in RFC 2119 Key Words</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a
                                            href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>, May
                                        2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.
                                    </dd>
                                    <dt id="RFC8941">[<a href="#RFC8941" class="smpl">STRUCTURED-FIELDS</a>]</dt>
                                    <dd>Nottingham, M. and P-H. Kamp, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8941.html">Structured Field Values
                                            for HTTP</a>”, RFC 8941, <a href="https://dx.doi.org/10.17487/RFC8941">DOI
                                            10.17487/RFC8941</a>, February 2021, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8941">https://www.rfc-editor.org/info/rfc8941</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                        <section>
                            <div id="rfc.references.3">
                                <h3 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2.</a> 补充性引用</h3>
                                <dl class="dl-horizontal">
                                    <dt id="AGE-PENALTY">[<a href="#AGE-PENALTY" class="smpl">AGE-PENALTY</a>]</dt>
                                    <dd>Cohen, E. and H. Kaplan, “<a
                                            href="https://dl.acm.org/doi/10.5555/1251440.1251447">The age penalty and
                                            its effect on cache performance</a>”, March 2001, &lt;<a
                                            href="https://dl.acm.org/doi/10.5555/1251440.1251447">https://dl.acm.org/doi/10.5555/1251440.1251447</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.authors" class="np">
                    <h2><a href="#rfc.authors">作者地址</a></h2>
                    <address><b>Stephen Ludin</b><br>Akamai<br>EMail: <a
                            href="mailto:sludin@ludin.org">sludin@ludin.org</a></address>
                    <address><b>Mark Nottingham</b><br>Fastly<br>Prahran<br>Australia<br>EMail: <a
                            href="mailto:mnot@mnot.net">mnot@mnot.net</a><br>URI: <a
                            href="https://www.mnot.net/">https://www.mnot.net/</a></address>
                    <address><b>Yuchen Wu</b><br>Cloudflare<br>EMail: <a
                            href="mailto:me@yuchenwu.net">me@yuchenwu.net</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>