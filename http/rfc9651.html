<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="zh-hans">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 9651 - HTTP 的结构化字段值</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC9651">
    <meta property="og:description" content="Structured Field Values for HTTP">
    <meta property="og:url" content="https://httpwg.org/specs/rfc9651.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Defining New Structured Fields" href="#rfc.section.2">
    <link rel="Chapter" title="3 Structured Data Types" href="#rfc.section.3">
    <link rel="Chapter" title="4 Working with Structured Fields in HTTP" href="#rfc.section.4">
    <link rel="Chapter" title="5 IANA Considerations" href="#rfc.section.5">
    <link rel="Chapter" title="6 Security Considerations" href="#rfc.section.6">
    <link rel="Chapter" title="7 References" href="#rfc.section.7">
    <link rel="Appendix" title="A Frequently Asked Questions" href="#rfc.section.A">
    <link rel="Appendix" title="B Implementation Notes" href="#rfc.section.B">
    <link rel="Appendix" title="C ABNF" href="#rfc.section.C">
    <link rel="Appendix" title="D Changes from RFC 8941" href="#rfc.section.D">
    <link rel="Appendix" title="Acknowledgements" href="#rfc.section.unnumbered-4">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-sfbis-06" rel="prev">
    <link href="https://dx.doi.org/10.17487/rfc9651" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9651.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9651">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="trailer, header">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Nottingham, M.">
    <meta name="dcterms.creator" content="Kamp, P-H.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:9651">
    <meta name="dcterms.issued" content="2024-09">
    <meta name="dct.replaces" content="urn:ietf:rfc:8941">
    <meta name="dcterms.abstract"
        content="This document describes a set of data types and associated algorithms that are intended to make it easier and safer to define and handle HTTP header and trailer fields, known as &#34;Structured Fields&#34;, &#34;Structured Headers&#34;, or &#34;Structured Trailers&#34;. It is intended for use by specifications of new HTTP fields.This document obsoletes RFC 8941.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This document describes a set of data types and associated algorithms that are intended to make it easier and safer to define and handle HTTP header and trailer fields, known as &#34;Structured Fields&#34;, &#34;Structured Headers&#34;, or &#34;Structured Trailers&#34;. It is intended for use by specifications of new HTTP fields.This document obsoletes RFC 8941.">
</head>

<body onload="getMeta(9651,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>9651</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#strict">有意的严格处理</a></li>
                                        <li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">符号约定</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#specify">定义新的结构化字段</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#example">示例</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#error-handling">错误处理</a></li>
                                        <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#preserving-extensibility">保持可扩展性</a></li>
                                        <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#using-new-structured-types-in-extensions">在扩展中使用新的结构化类型</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#types">结构化数据类型</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#list">列表</a>
                                            <ul>
                                                <li><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#inner-list">内层列表</a></li>
                                                <li><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#param">参数</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#dictionary">字典</a></li>
                                        <li><a href="#rfc.section.3.3">3.3.</a>&nbsp;&nbsp;&nbsp;<a href="#item">项</a>
                                            <ul>
                                                <li><a href="#rfc.section.3.3.1">3.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#integer">整数</a></li>
                                                <li><a href="#rfc.section.3.3.2">3.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#decimal">小数</a></li>
                                                <li><a href="#rfc.section.3.3.3">3.3.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#string">字符串</a></li>
                                                <li><a href="#rfc.section.3.3.4">3.3.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#token">标记</a></li>
                                                <li><a href="#rfc.section.3.3.5">3.3.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#binary">字节序列</a></li>
                                                <li><a href="#rfc.section.3.3.6">3.3.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#boolean">布尔值</a></li>
                                                <li><a href="#rfc.section.3.3.7">3.3.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#date">日期</a></li>
                                                <li><a href="#rfc.section.3.3.8">3.3.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#displaystring">显示字符串</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#text">在 HTTP 中使用结构化字段</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#text-serialize">结构化字段的序列化</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-list">序列化列表</a></li>
                                                <li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-dictionary">序列化字典</a></li>
                                                <li><a href="#rfc.section.4.1.3">4.1.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-item">序列化项</a></li>
                                                <li><a href="#rfc.section.4.1.4">4.1.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-integer">序列化整数</a></li>
                                                <li><a href="#rfc.section.4.1.5">4.1.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-decimal">序列化小数</a></li>
                                                <li><a href="#rfc.section.4.1.6">4.1.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-string">序列化字符串</a></li>
                                                <li><a href="#rfc.section.4.1.7">4.1.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-token">序列化标记</a></li>
                                                <li><a href="#rfc.section.4.1.8">4.1.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-binary">序列化字节序列</a></li>
                                                <li><a href="#rfc.section.4.1.9">4.1.9.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-boolean">序列化布尔值</a></li>
                                                <li><a href="#rfc.section.4.1.10">4.1.10.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-date">序列化日期</a></li>
                                                <li><a href="#rfc.section.4.1.11">4.1.11.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#ser-display">序列化显示字符串</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#text-parse">结构化字段的解析</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-list">解析列表</a></li>
                                                <li><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-dictionary">解析字典</a></li>
                                                <li><a href="#rfc.section.4.2.3">4.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-item">解析项</a></li>
                                                <li><a href="#rfc.section.4.2.4">4.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-number">解析整数或小数</a></li>
                                                <li><a href="#rfc.section.4.2.5">4.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-string">解析字符串</a></li>
                                                <li><a href="#rfc.section.4.2.6">4.2.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-token">解析标记</a></li>
                                                <li><a href="#rfc.section.4.2.7">4.2.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-binary">解析字节序列</a></li>
                                                <li><a href="#rfc.section.4.2.8">4.2.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-boolean">解析布尔值</a></li>
                                                <li><a href="#rfc.section.4.2.9">4.2.9.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-date">解析日期</a></li>
                                                <li><a href="#rfc.section.4.2.10">4.2.10.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parse-display">解析显示字符串</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#iana">IANA 注意事项</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#security">安全注意事项</a></li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">规范性参考文献</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.3">信息性参考文献</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a href="#faq">常见问题</a>
                                    <ul>
                                        <li><a href="#rfc.section.A.1">A.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#why-not-json">为什么不使用 JSON？</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.B">Appendix B.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#implementation-notes">附录 B. 实现说明</a></li>
                                <li><a href="#rfc.section.C">Appendix C.</a>&nbsp;&nbsp;&nbsp;<a href="#abnf">附录 C.
                                        ABNF</a>
                                </li>
                                <li><a href="#rfc.section.D">Appendix D.</a>&nbsp;&nbsp;&nbsp;<a href="#changes">附录 D.
                                        相对于 RFC 8941 的更改</a></li>
                                <li><a href="#acknowledgements">致谢</a></li>
                                <li><a href="#rfc.authors">作者地址</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">互联网工程任务组 (IETF)</td>
                                <td class="text-right">M. Nottingham</td>
                            </tr>
                            <tr>
                                <td class="text-left">请求评注： 9651</td>
                                <td class="text-right">Cloudflare</td>
                            </tr>
                            <tr>
                                <td class="text-left">废弃： <a href="https://www.rfc-editor.org/rfc/rfc8941.html">8941</a>
                                </td>
                                <td class="text-right">P-H. Kamp</td>
                            </tr>
                            <tr>
                                <td class="text-left">类别： 标准轨道</td>
                                <td class="text-right">The Varnish Cache Project</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN： 2070-1721</td>
                                <td class="text-right">2024年9月</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>HTTP 的结构化字段值</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">摘要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本文件描述了一组数据类型和相关算法，旨在使定义和处理 HTTP 报头与尾部字段（称为“结构化字段”、“结构化报头”或“结构化尾部”）更容易且更安全。供新 HTTP 字段的规范使用。
                        </p>
                    </div>
                    <div id="rfc.abstract.p.2">
                        <p>本文件废弃 RFC 8941。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本备忘录的状态</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>这是一个互联网标准路线文件。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>本文件由互联网工程任务组 (IETF) 制作。它代表了 IETF 社区的共识。它已接受公开审查并已被互联网工程指导小组 (IESG) 批准发表。有关互联网标准的更多信息，请参阅 <a
                                href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">RFC 7841 第 2 节</a>。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>有关本文件当前状态、任何勘误表以及如何对其提供反馈的信息，可在 <a
                                href="https://www.rfc-editor.org/info/rfc9651">https://www.rfc-editor.org/info/rfc9651</a>
                            获得。</p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2024 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>)
                            in effect on the date of publication of this document. Please review these documents
                            carefully, as they describe your rights and restrictions with respect to this document. Code
                            Components extracted from this document must include Revised BSD License text as described
                            in Section 4.e of the Trust Legal Provisions and are provided without warranty as described
                            in the Revised BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a href="#strict">有意的严格处理</a>
                                </li>
                                <li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">符号约定</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#specify">定义新的结构化字段</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#example">示例</a>
                                </li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#error-handling">错误处理</a></li>
                                <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#preserving-extensibility">保持可扩展性</a></li>
                                <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#using-new-structured-types-in-extensions">在扩展中使用新的结构化类型</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#types">结构化数据类型</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#list">列表</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#inner-list">内层列表</a></li>
                                        <li><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#param">参数</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a href="#dictionary">字典</a>
                                </li>
                                <li><a href="#rfc.section.3.3">3.3.</a>&nbsp;&nbsp;&nbsp;<a href="#item">项</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.3.1">3.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#integer">整数</a></li>
                                        <li><a href="#rfc.section.3.3.2">3.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#decimal">小数</a></li>
                                        <li><a href="#rfc.section.3.3.3">3.3.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#string">字符串</a></li>
                                        <li><a href="#rfc.section.3.3.4">3.3.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#token">标记</a></li>
                                        <li><a href="#rfc.section.3.3.5">3.3.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#binary">字节序列</a></li>
                                        <li><a href="#rfc.section.3.3.6">3.3.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#boolean">布尔值</a></li>
                                        <li><a href="#rfc.section.3.3.7">3.3.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#date">日期</a></li>
                                        <li><a href="#rfc.section.3.3.8">3.3.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#displaystring">显示字符串</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#text">在 HTTP 中使用结构化字段</a>
                            <ul>
                                <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#text-serialize">结构化字段的序列化</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-list">序列化列表</a></li>
                                        <li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-dictionary">序列化字典</a></li>
                                        <li><a href="#rfc.section.4.1.3">4.1.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-item">序列化项</a></li>
                                        <li><a href="#rfc.section.4.1.4">4.1.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-integer">序列化整数</a></li>
                                        <li><a href="#rfc.section.4.1.5">4.1.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-decimal">序列化小数</a></li>
                                        <li><a href="#rfc.section.4.1.6">4.1.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-string">序列化字符串</a></li>
                                        <li><a href="#rfc.section.4.1.7">4.1.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-token">序列化标记</a></li>
                                        <li><a href="#rfc.section.4.1.8">4.1.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-binary">序列化字节序列</a></li>
                                        <li><a href="#rfc.section.4.1.9">4.1.9.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-boolean">序列化布尔值</a></li>
                                        <li><a href="#rfc.section.4.1.10">4.1.10.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-date">序列化日期</a></li>
                                        <li><a href="#rfc.section.4.1.11">4.1.11.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#ser-display">序列化显示字符串</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#text-parse">结构化字段的解析</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-list">解析列表</a></li>
                                        <li><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-dictionary">解析字典</a></li>
                                        <li><a href="#rfc.section.4.2.3">4.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-item">解析项</a></li>
                                        <li><a href="#rfc.section.4.2.4">4.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-number">解析整数或小数</a></li>
                                        <li><a href="#rfc.section.4.2.5">4.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-string">解析字符串</a></li>
                                        <li><a href="#rfc.section.4.2.6">4.2.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-token">解析标记</a></li>
                                        <li><a href="#rfc.section.4.2.7">4.2.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-binary">解析字节序列</a></li>
                                        <li><a href="#rfc.section.4.2.8">4.2.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-boolean">解析布尔值</a></li>
                                        <li><a href="#rfc.section.4.2.9">4.2.9.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-date">解析日期</a></li>
                                        <li><a href="#rfc.section.4.2.10">4.2.10.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parse-display">解析显示字符串</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#iana">IANA 注意事项</a>
                        </li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#security">安全注意事项</a></li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">规范性参考文献</a></li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.3">信息性参考文献</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a href="#faq">常见问题</a>
                            <ul>
                                <li><a href="#rfc.section.A.1">A.1.</a>&nbsp;&nbsp;&nbsp;<a href="#why-not-json">为什么不使用
                                        JSON？</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.B">Appendix B.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#implementation-notes">实现说明</a></li>
                        <li><a href="#rfc.section.C">Appendix C.</a>&nbsp;&nbsp;&nbsp;<a href="#abnf">ABNF</a></li>
                        <li><a href="#rfc.section.D">Appendix D.</a>&nbsp;&nbsp;&nbsp;<a href="#changes">相对于 RFC 8941
                                的更改</a></li>
                        <li><a href="#acknowledgements">致谢</a></li>
                        <li><a href="#rfc.authors">作者地址</a></li>
                    </ul>
                </div>
                <hr class="hidden-print">
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">引言</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>为新的 HTTP 报头（和尾部）字段指定语法是一项繁重的工作；即使有 <a
                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-16.3.2">第 16.3.2 节</a>
                            的指导，也存在许多决定和陷阱，可能让拟定 HTTP 字段的作者犯错。</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>一旦字段被定义，通常需要编写定制的解析器和序列化器，因为每个字段值对看似通用的语法有略微不同的处理方式。</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>本文件引入了一组用于在新 HTTP 字段值定义中使用的通用数据结构，以解决这些问题。具体来说，它为这些结构定义了一个通用的抽象模型，以及用于在 HTTP <a
                                href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a> 报头和尾部字段中表达该模型的具体序列化方式。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>如果某个 HTTP
                            字段被定义为“结构化报头”或“结构化尾部”（如果字段既可用于报头又可用于尾部，则称为“结构化字段”），则该字段使用本规范中定义的类型来定义其语法和基本处理规则，从而简化规范作者的定义工作和实现方的处理工作。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>此外，未来的 HTTP 版本可以为这些结构的抽象模型定义替代序列化方法，允许使用该模型的字段更高效地传输而无需重新定义。</p>
                    </div>
                    <div id="rfc.section.1.p.6">
                        <p>请注意，本文件的目标不是重新定义现有 HTTP 字段的语法；此处描述的机制仅打算用于明确选择采用它们的字段。</p>
                    </div>
                    <div id="rfc.section.1.p.7">
                        <p><a href="#specify" title="Defining New Structured Fields">第 2 节</a> 描述了如何指定一个结构化字段。</p>
                    </div>
                    <div id="rfc.section.1.p.8">
                        <p><a href="#types" title="Structured Data Types">第 3 节</a> 定义了可在结构化字段中使用的若干抽象数据类型。</p>
                    </div>
                    <div id="rfc.section.1.p.9">
                        <p>这些抽象类型可以使用 <a href="#text" title="Working with Structured Fields in HTTP">第 4 节</a>
                            中描述的算法序列化为 HTTP 字段值或从中解析。</p>
                    </div>
                    <section id="strict">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a href="#strict">有意的严格处理</a>
                        </h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>本规范有意使用逐步算法定义严格的解析和序列化行为；唯一定义的错误处理是完全失败并终止整个操作。</p>
                        </div>
                        <div id="rfc.section.1.1.p.2">
                            <p>这样设计是为了鼓励忠实实现和良好互操作性。因此，一个试图通过更容错来“帮忙”的实现会使互操作性变差，因为这会对其他实现施加压力，促使它们也实现类似但可能微妙不同的变通方式。
                            </p>
                        </div>
                        <div id="rfc.section.1.1.p.3">
                            <p>换句话说，严格处理是本规范的一个有意特性；它允许尽早发现并由生产者修正不合规的输入，从而避免可能出现的互操作性和安全问题。</p>
                        </div>
                        <div id="rfc.section.1.1.p.4">
                            <p>请注意，由于这种严格性，如果字段由多个方追加（例如中间件或发送方的不同组件），某一方的值中的错误很可能导致整个字段值解析失败。</p>
                        </div>
                    </section>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.2"><a href="#rfc.section.1.2">1.2.</a>&nbsp;<a
                                href="#notational-conventions">符号约定</a></h3>
                        <div id="rfc.section.1.2.p.1">
                            <p>本文档中关键字 “<em class="bcp14">MUST</em>”、“<em class="bcp14">MUST NOT</em>”、“<em
                                    class="bcp14">REQUIRED</em>”、“<em class="bcp14">SHALL</em>”、“<em class="bcp14">SHALL
                                    NOT</em>”、“<em class="bcp14">SHOULD</em>”、“<em class="bcp14">SHOULD NOT</em>”、“<em
                                    class="bcp14">RECOMMENDED</em>”、“<em class="bcp14">NOT RECOMMENDED</em>”、“<em
                                    class="bcp14">MAY</em>” 和 “<em class="bcp14">OPTIONAL</em>” 按照 <span
                                    class="nobr">BCP 14</span> 的定义进行解释，仅当它们全部大写时才适用，详见 <a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>
                                和 <a href="#RFC8174"><cite
                                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a>。
                            </p>
                        </div>
                        <div id="rfc.section.1.2.p.2">
                            <p>本文档使用来自 <a href="#RFC5234"><cite
                                        title="Augmented BNF for Syntax Specifications: ABNF">[RFC5234]</cite></a> 的
                                VCHAR、SP、DIGIT、ALPHA 和 DQUOTE 规则来指定字符和/或它们对应的 ASCII 字节，具体取决于上下文。它还使用来自 <a
                                    href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a> 的 tchar 和 OWS
                                规则来达到相同目的。</p>
                        </div>
                        <div id="rfc.section.1.2.p.3">
                            <p>本文档使用算法来指定解析和序列化行为。从 HTTP 字段解析时，实现方 <em class="bcp14">MUST</em> 的行为应与遵循这些算法不可区分。</p>
                        </div>
                        <div id="rfc.section.1.2.p.4">
                            <p>对于序列化到 HTTP 字段，算法定义了推荐的生成方式。实现方 <em class="bcp14">MAY</em> 在不影响第 <a href="#text-parse"
                                    title="Parsing Structured Fields">4.2 节</a> 中描述的解析算法正确处理输出的前提下，偏离指定行为。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="specify">
                    <h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a
                            href="#specify">定义新的结构化字段</a></h2>
                    <div id="rfc.section.2.p.1" class="avoidbreakafter">
                        <p>要将某个 HTTP 字段指定为结构化字段，其作者需要：</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <ul>
                            <li>
                                <div>
                                    <p>在规范中规范性地引用本规范。字段的接收者和生成者需要知道本文件的要求正在生效。</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>指出该字段是结构化报头（即仅可用于报头部分——常见情况）、结构化尾部（仅用于尾部）还是结构化字段（两者皆可）。</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>指定字段值的类型；可以是 列表 (<a href="#list" title="Lists">第 3.1 节</a>)、字典 (<a
                                            href="#dictionary" title="Dictionaries">第 3.2 节</a>) 或 项 (<a href="#item"
                                            title="Items">第 3.3 节</a>)。</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>定义字段值的语义。</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>指定对字段值的任何额外约束，以及在这些约束被违反时的后果。</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>通常，这意味着字段定义将指定顶层类型——列表、字典或项——然后定义其允许的类型及对它们的约束。例如，一个被定义为列表的报头其成员可能全为整数，或是混合类型；被定义为项的报头可能只允许字符串，并且额外要求只以字母
                            “Q” 开头，或全部为小写。同样，只有在字段定义明确允许的情况下，内层列表 (<a href="#inner-list" title="Inner Lists">第 3.1.1
                                节</a>) 才是有效的。</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>使用显示字符串类型的字段建议仔细指定其允许的 Unicode 代码点；例如，指定使用来自 <a href="#RFC8264"><cite
                                    title="PRECIS Framework: Preparation, Enforcement, and Comparison of Internationalized Strings in Application Protocols">[PRECIS]</cite></a>
                            的某个配置文件。</p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>字段定义只能对整个字段值使用本规范，而不能只用于字段值的一部分。</p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>规范可以在适当时将字段名称为“结构化报头名”、“结构化尾部名”或“结构化字段名”。同样，也可以根据需要将其字段值称为“结构化报头值”、“结构化尾部值”或“结构化字段值”。</p>
                    </div>
                    <div id="rfc.section.2.p.7">
                        <p>本规范定义了实现方应支持的各种结构的最小长度或数量。它在大多数情况下不指定最大大小，但作者应注意 HTTP
                            实现确实对单个字段的大小、字段的总数和/或整个报头或尾部部分的大小施加各种限制。</p>
                    </div>
                    <section id="example">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#example">示例</a>
                        </h3>
                        <div id="rfc.section.2.1.p.1" class="avoidbreakafter">
                            <p>一个虚构的 Foo-Example 报头字段可能被指定为：</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <blockquote>
                                <div id="rfc.section.2.1.p.2.1">
                                    <p>42. Foo-Example Header Field</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.2">
                                    <p>Foo-Example HTTP 报头字段传达有关消息中有多少 Foo 的信息。</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.3">
                                    <p>Foo-Example 是一个项（Item）结构化报头字段 [RFC9651]。其值<em
                                            class="bcp14">MUST</em>为整数（[RFC9651] 的第 3.3.1 节）。</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.4">
                                    <p>其值表示消息中 Foo 的数量，且其值<em class="bcp14">MUST</em>在 0 到 10（包含）之间；其他值<em
                                            class="bcp14">MUST</em>导致整个报头字段被忽略。</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.5" class="avoidbreakafter">
                                    <p>定义了以下参数：</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.6">
                                    <ul>
                                        <li>一个键为 "foourl" 的参数，其值为字符串（[RFC9651] 的第 3.3.3 节），用于传达该消息的 Foo URL。见下文的处理要求。
                                        </li>
                                    </ul>
                                </div>
                                <div id="rfc.section.2.1.p.2.7">
                                    <p>"foourl" 包含一个 URI-引用（[RFC3986] 的第 4.1 节）。如果其值不是有效的 URI-引用，则整个报头字段<em
                                            class="bcp14">MUST</em>被忽略。如果其值是相对引用（[RFC3986] 的第 4.2 节），则在使用之前<em
                                            class="bcp14">MUST</em>进行解析（[RFC3986] 第 5 节）。</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.8" class="avoidbreakafter">
                                    <p>例如：</p>
                                </div>
                                <div id="rfc.section.2.1.p.2.9">
                                    <pre>
  Foo-Example: 2; foourl="https://foo.example.com/"
</pre>
                                </div>
                            </blockquote>
                        </div>
                    </section>
                    <section id="error-handling">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a
                                href="#error-handling">错误处理</a></h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>当解析失败时，整个字段将被忽略（参见 <a href="#text-parse" title="Parsing Structured Fields">第 4.2
                                    节</a>）。字段定义不能覆盖此行为，因为那样会阻止通用软件的处理；它们只能添加额外约束（例如整数和小数的数值范围、字符串和标记的格式、字典值允许的类型，或列表中项的数量）。
                            </p>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>当违反字段特定约束时，整个字段也将被忽略，除非字段定义明确规定了其他处理要求。例如，如果某个报头字段被定义为项且要求为整数，但接收到的是字符串，则应将其忽略，除非该字段的定义另有明确说明。
                            </p>
                        </div>
                    </section>
                    <section id="preserving-extensibility">
                        <h3 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3.</a>&nbsp;<a
                                href="#preserving-extensibility">保持可扩展性</a></h3>
                        <div id="rfc.section.2.3.p.1">
                            <p>结构化字段被设计为可扩展的，因为经验表明，即使未预见到，也常常需要以受控方式修改和添加字段的允许语法和语义。</p>
                        </div>
                        <div id="rfc.section.2.3.p.2">
                            <p>项和内层列表均允许参数作为扩展机制；这意味着它们的值以后可以扩展以容纳更多信息（如有需要）。为了保持向前兼容，建议字段规范不要将未识别参数的存在定义为错误条件。</p>
                        </div>
                        <div id="rfc.section.2.3.p.3">
                            <p>字段规范被要求为项、列表或字典之一以保留可扩展性。错误地定义为其他类型（例如整数）的字段被假定为项（即它们允许参数）。</p>
                        </div>
                        <div id="rfc.section.2.3.p.4">
                            <p>为进一步确保未来可用此类扩展，并鼓励消费者使用完整的解析器实现，字段定义可以指定发送方添加“grease”（润滑）参数。规范可以规定所有符合某一定义模式的参数保留用于此用途，并鼓励在某些请求中发送它们。这有助于阻止接收方编写不考虑参数的解析器。
                            </p>
                        </div>
                        <div id="rfc.section.2.3.p.5">
                            <p>使用字典的规范还可以通过要求忽略未知键的存在——以及与之关联的值和类型——来允许向前兼容。后续规范可以添加额外的键，并在适当时对它们指定约束。</p>
                        </div>
                        <div id="rfc.section.2.3.p.6">
                            <p>对结构化字段的扩展可以要求理解该扩展的接收方在其定义的值约束不满足时忽略整个字段值。</p>
                        </div>
                    </section>
                    <section id="using-new-structured-types-in-extensions">
                        <h3 id="rfc.section.2.4"><a href="#rfc.section.2.4">2.4.</a>&nbsp;<a
                                href="#using-new-structured-types-in-extensions">在扩展中使用新的结构化类型</a></h3>
                        <div id="rfc.section.2.4.p.1">
                            <p>因为字段定义需要引用某个特定的用于结构化字段的 RFC，所以其值中可用的类型受限于该 RFC 中定义的类型。例如，引用本文件的字段可以使用日期类型（<a href="#date"
                                    title="Dates">第 3.3.7 节</a>），而引用 RFC 8941 的字段则不能，因为实现该规范的解析器会将其视为无效（因此丢弃）。</p>
                        </div>
                        <div id="rfc.section.2.4.p.2">
                            <p>此限制也适用于字段的未来扩展；例如，用 RFC 8941 引用定义的字段不能使用日期类型，因为某些接收方仍可能使用基于 RFC 8941 的解析器来处理它。</p>
                        </div>
                        <div id="rfc.section.2.4.p.3">
                            <p>然而，本文件被设计为与 RFC 8941 向后兼容；实现了此处要求的解析器也可以解析引用 RFC 8941 的有效结构化字段。</p>
                        </div>
                        <div id="rfc.section.2.4.p.4">
                            <p>将结构化字段实现升级为支持规范的较新修订（例如本文件）带来了这样的可能性：某些根据早期 RFC 无效的字段值在处理后可能变为有效。</p>
                        </div>
                        <div id="rfc.section.2.4.p.5">
                            <p>例如，某个字段实例可能包含语法上有效的日期（<a href="#date" title="Dates">第 3.3.7 节</a>），尽管该字段的定义不支持日期。基于 RFC
                                8941
                                的实现会因该实例未在规范中定义而解析失败。如果该实现升级到本规范，解析可能成功。在某些情况下，所得的日期值会被字段特定逻辑拒绝，但在那些本来会被忽略的字段（例如扩展参数）中，可能不会被检测到，从而该字段随后可能被接受和处理。
                            </p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="types">
                    <h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#types">结构化数据类型</a>
                    </h2>
                    <div id="rfc.section.3.p.1">
                        <p>本节概述了结构化字段使用的抽象类型，并简要描述以及示例说明每种类型如何序列化为文本形式的 HTTP 字段。<a href="#text"
                                title="Working with Structured Fields in HTTP">第 4 节</a> 指定了如何从文本 HTTP 字段解析以及序列化到文本 HTTP
                            字段的详细算法。</p>
                    </div>
                    <div id="rfc.section.3.p.2" class="avoidbreakafter">
                        <p>概括如下：</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <ul>
                            <li>
                                <div>
                                    <p>HTTP 字段可以被定义为三种顶层类型之一：列表（Lists）、字典（Dictionaries）和项（Items）。</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>列表和字典是容器；它们的成员可以是项（Items）或内层列表（Inner Lists，内层列表本身是项的数组）。</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>项和内层列表都可以带有参数（Parameters）。</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <section id="list">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a href="#list">列表</a></h3>
                        <div id="rfc.section.3.1.p.1">
                            <p>列表是由零个或多个成员构成的数组，每个成员可以是一个项（<a href="#item" title="Items">第 3.3 节</a>）或一个内层列表（<a
                                    href="#inner-list" title="Inner Lists">第 3.1.1 节</a>），两者都可以带参数（<a href="#param"
                                    title="Parameters">第 3.1.2 节</a>）。</p>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <p>空列表通过完全不序列化该字段来表示。这意味着被定义为列表的字段具有默认的空值。</p>
                        </div>
                        <div id="rfc.section.3.1.p.3" class="avoidbreakafter">
                            <p>当序列化为文本 HTTP 字段时，每个成员由逗号和可选空白分隔。例如，一个其值被定义为 Token 列表的字段可能如下所示：</p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <pre class="text">
Example-List: sugar, tea, rum
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.5" class="avoidbreakafter">
                            <p>注意，根据 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.3">[HTTP] 第 5.3
                                    节</a>，列表可以将其成员分布在同一报头或尾部节的多行上；例如，下列形式等价：</p>
                        </div>
                        <div id="rfc.section.3.1.p.6">
                            <pre class="text">
Example-List: sugar, tea, rum
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.7">
                            <p>以及</p>
                        </div>
                        <div id="rfc.section.3.1.p.8">
                            <pre class="text">
Example-List: sugar, tea
Example-List: rum
</pre>
                        </div>
                        <div id="rfc.section.3.1.p.9">
                            <p>但是，列表的单个成员不能安全地拆分到多行；详情见 <a href="#text-parse" title="Parsing Structured Fields">第 4.2
                                    节</a>。</p>
                        </div>
                        <div id="rfc.section.3.1.p.10">
                            <p>解析器<em class="bcp14">MUST</em> 支持包含至少 1024 个成员的列表。字段规范可以根据需要约束各个列表成员的类型和基数。</p>
                        </div>
                        <section id="inner-list">
                            <h4 id="rfc.section.3.1.1"><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;<a
                                    href="#inner-list">内层列表</a></h4>
                            <div id="rfc.section.3.1.1.p.1">
                                <p>内层列表是由零个或多个项（<a href="#item" title="Items">第 3.3 节</a>）构成的数组。单个项以及内层列表本身都可以带参数（<a
                                        href="#param" title="Parameters">第 3.1.2 节</a>）。</p>
                            </div>
                            <div id="rfc.section.3.1.1.p.2" class="avoidbreakafter">
                                <p>当在文本 HTTP 字段中序列化时，内层列表用圆括号表示，内部的值由一个或多个空格分隔。一个其值被定义为字符串内层列表的字段可能如下所示：</p>
                            </div>
                            <div id="rfc.section.3.1.1.p.3">
                                <pre class="text">
Example-List: ("foo" "bar"), ("baz"), ("bat" "one"), ()
</pre>
                            </div>
                            <div id="rfc.section.3.1.1.p.4">
                                <p>注意此示例中的最后一个成员是一个空的内层列表。</p>
                            </div>
                            <div id="rfc.section.3.1.1.p.5" class="avoidbreakafter">
                                <p>一个其值被定义为在两个层级上都带参数的内层列表的报头字段可能如下：</p>
                            </div>
                            <div id="rfc.section.3.1.1.p.6">
                                <pre class="text">
Example-List: ("foo"; a=1;b=2);lvl=5, ("bar" "baz");lvl=1
</pre>
                            </div>
                            <div id="rfc.section.3.1.1.p.7">
                                <p>解析器<em class="bcp14">MUST</em> 支持包含至少 256 个成员的内层列表。字段规范可以根据需要约束内层列表单个成员的类型和基数。</p>
                            </div>
                        </section>
                        <section id="param">
                            <h4 id="rfc.section.3.1.2"><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;<a
                                    href="#param">参数</a></h4>
                            <div id="rfc.section.3.1.2.p.1">
                                <p>参数是与某个项（<a href="#item" title="Items">第 3.3 节</a>）或内层列表（<a href="#inner-list"
                                        title="Inner Lists">第 3.1.1
                                        节</a>）相关联的有序键-值映射。键在其所处的参数范围内是唯一的，值为裸项（即这些值自身不能带参数；参见 <a href="#item"
                                        title="Items">第 3.3 节</a>）。</p>
                            </div>
                            <div id="rfc.section.3.1.2.p.2">
                                <p>实现方<em class="bcp14">MUST</em> 提供按索引和按键访问参数的能力。规范<em class="bcp14">MAY</em> 使用任一访问方式。
                                </p>
                            </div>
                            <div id="rfc.section.3.1.2.p.3">
                                <p>注意参数是有序的，且参数键不能包含大写字母。</p>
                            </div>
                            <div id="rfc.section.3.1.2.p.4" class="avoidbreakafter">
                                <p>当在文本 HTTP 字段中序列化时，参数与其所属的项或内层列表以及其他参数之间用分号分隔。例如：</p>
                            </div>
                            <div id="rfc.section.3.1.2.p.5">
                                <pre class="text">
Example-List: abc;a=1;b=2; cde_456, (ghi;jk=4 l);q="9";r=w
</pre>
                            </div>
                            <div id="rfc.section.3.1.2.p.6" class="avoidbreakafter">
                                <p>当参数的值是布尔值（参见 <a href="#boolean" title="Booleans">第 3.3.6 节</a>）且为 true 时，序列化时<em
                                        class="bcp14">MUST</em> 省略该值。例如，下例中的 "a" 参数为 true，而 "b" 参数为 false：</p>
                            </div>
                            <div id="rfc.section.3.1.2.p.7">
                                <pre class="text">
Example-Integer: 1; a; b=?0
</pre>
                            </div>
                            <div id="rfc.section.3.1.2.p.8">
                                <p>注意该要求仅适用于序列化；解析器仍然必须在参数中出现 true 值时正确处理该值。</p>
                            </div>
                            <div id="rfc.section.3.1.2.p.9">
                                <p>解析器<em class="bcp14">MUST</em> 支持项或内层列表上至少 256 个参数，并支持参数键长度至少为 64
                                    个字符。字段规范可以按需要约束单个参数的顺序以及它们值的类型。</p>
                            </div>
                        </section>
                    </section>
                    <section id="dictionary">
                        <h3 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a>&nbsp;<a href="#dictionary">字典</a>
                        </h3>
                        <div id="rfc.section.3.2.p.1">
                            <p>字典是有序的键-值对映射，其中键为短的文本字符串，值为项（<a href="#item" title="Items">第 3.3 节</a>）或项数组，两者都可以带参数（<a
                                    href="#param" title="Parameters">第 3.1.2 节</a>）。成员可以有零个或多个，且其键在所属字典范围内唯一。</p>
                        </div>
                        <div id="rfc.section.3.2.p.2">
                            <p>实现方<em class="bcp14">MUST</em> 提供按索引和按键访问字典的能力。规范<em class="bcp14">MAY</em>
                                使用任一访问方式来访问成员。</p>
                        </div>
                        <div id="rfc.section.3.2.p.3">
                            <p>与列表类似，空字典通过省略整个字段来表示。这意味着被定义为字典的字段具有默认的空值。</p>
                        </div>
                        <div id="rfc.section.3.2.p.4">
                            <p>通常，字段规范通过按键指定单个成员允许的类型以及它们是否为必需或可选，从而定义字典的语义。接收方<em class="bcp14">MUST</em>
                                忽略键未定义或未知的成员，除非字段规范明确不允许它们存在。</p>
                        </div>
                        <div id="rfc.section.3.2.p.5" class="avoidbreakafter">
                            <p>当序列化为文本 HTTP 字段时，成员按序序列化并由逗号与可选空白分隔。成员键不能包含大写字符。键和值之间用 "=" 分隔（无空白）。例如：</p>
                        </div>
                        <div id="rfc.section.3.2.p.6">
                            <pre class="text">
Example-Dict: en="Applepie", da=:w4ZibGV0w6ZydGU=:
</pre>
                        </div>
                        <div id="rfc.section.3.2.p.7">
                            <p>注意在此示例中，末尾的 "=" 是由于包含了字节序列；参见 <a href="#binary" title="Byte Sequences">第 3.3.5 节</a>。</p>
                        </div>
                        <div id="rfc.section.3.2.p.8" class="avoidbreakafter">
                            <p>当成员的值为布尔 true（参见 <a href="#boolean" title="Booleans">第 3.3.6 节</a>）时，序列化时<em
                                    class="bcp14">MUST</em> 省略该值。例如，这里 "b" 和 "c" 都为 true：</p>
                        </div>
                        <div id="rfc.section.3.2.p.9">
                            <pre class="text">
Example-Dict: a=?0, b, c; foo=bar
</pre>
                        </div>
                        <div id="rfc.section.3.2.p.10">
                            <p>注意该要求仅适用于序列化；解析器仍然必须在字典值中出现 true 布尔值时正确处理该值。</p>
                        </div>
                        <div id="rfc.section.3.2.p.11" class="avoidbreakafter">
                            <p>一个其成员值为 Token 内层列表的字典：</p>
                        </div>
                        <div id="rfc.section.3.2.p.12">
                            <pre class="text">
Example-Dict: rating=1.5, feelings=(joy sadness)
</pre>
                        </div>
                        <div id="rfc.section.3.2.p.13" class="avoidbreakafter">
                            <p>一个混合了项与内层列表（有些带参数）的字典：</p>
                        </div>
                        <div id="rfc.section.3.2.p.14">
                            <pre class="text">
Example-Dict: a=(1 2), b=3, c=4;aa=bb, d=(5 6);valid
</pre>
                        </div>
                        <div id="rfc.section.3.2.p.15" class="avoidbreakafter">
                            <p>注意字典的成员也可以分布在同一报头或尾部节的多行上；例如，下列形式等价：</p>
                        </div>
                        <div id="rfc.section.3.2.p.16">
                            <pre class="text">
Example-Dict: foo=1, bar=2
</pre>
                        </div>
                        <div id="rfc.section.3.2.p.17">
                            <p>以及</p>
                        </div>
                        <div id="rfc.section.3.2.p.18">
                            <pre class="text">
Example-Dict: foo=1
Example-Dict: bar=2
</pre>
                        </div>
                        <div id="rfc.section.3.2.p.19">
                            <p>但是，字典的单个成员不能安全地拆分到多行；详情见 <a href="#text-parse" title="Parsing Structured Fields">第 4.2
                                    节</a>。</p>
                        </div>
                        <div id="rfc.section.3.2.p.20">
                            <p>解析器<em class="bcp14">MUST</em> 支持包含至少 1024 个键/值对的字典以及键长度至少为 64
                                个字符。字段规范可以按需要约束字典中单个成员的顺序以及它们值的类型。</p>
                        </div>
                    </section>
                    <section id="item">
                        <h3 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a>&nbsp;<a href="#item">项</a></h3>
                        <div id="rfc.section.3.3.p.1">
                            <p>项可以是整数（<a href="#integer" title="Integers">第 3.3.1 节</a>）、小数（<a href="#decimal"
                                    title="Decimals">第 3.3.2 节</a>）、字符串（<a href="#string" title="Strings">第 3.3.3
                                    节</a>）、标记（<a href="#token" title="Tokens">第 3.3.4 节</a>）、字节序列（<a href="#binary"
                                    title="Byte Sequences">第 3.3.5 节</a>）、布尔值（<a href="#boolean" title="Booleans">第
                                    3.3.6 节</a>）或日期（<a href="#date" title="Dates">第 3.3.7 节</a>）。项可以带有相关联的参数（<a
                                    href="#param" title="Parameters">第 3.1.2 节</a>）。</p>
                        </div>
                        <div id="rfc.section.3.3.p.2" class="avoidbreakafter">
                            <p>例如，一个被定义为整数项的报头字段可能如下：</p>
                        </div>
                        <div id="rfc.section.3.3.p.3">
                            <pre class="text">
Example-Integer: 5
</pre>
                        </div>
                        <div id="rfc.section.3.3.p.4" class="avoidbreakafter">
                            <p>或者带参数：</p>
                        </div>
                        <div id="rfc.section.3.3.p.5">
                            <pre class="text">
Example-Integer: 5; foo=bar
</pre>
                        </div>
                        <section id="integer">
                            <h4 id="rfc.section.3.3.1"><a href="#rfc.section.3.3.1">3.3.1.</a>&nbsp;<a
                                    href="#integer">整数</a></h4>
                            <div id="rfc.section.3.3.1.p.1">
                                <p>整数的取值范围为 -999,999,999,999,999 到 999,999,999,999,999（含），即最多十五位数字并允许符号，以与 IEEE 754 兼容
                                    <a href="#IEEE754"><cite
                                            title="IEEE Standard for Floating-Point Arithmetic">[IEEE754]</cite></a>。
                                </p>
                            </div>
                            <div id="rfc.section.3.3.1.p.2" class="avoidbreakafter">
                                <p>例如：</p>
                            </div>
                            <div id="rfc.section.3.3.1.p.3">
                                <pre class="text">
Example-Integer: 42
</pre>
                            </div>
                            <div id="rfc.section.3.3.1.p.4">
                                <p>对于超过 15 位的整数，可以通过多种方式支持，例如使用字符串（<a href="#string" title="Strings">第 3.3.3
                                        节</a>）、字节序列（<a href="#binary" title="Byte Sequences">第 3.3.5
                                        节</a>）或作为整数的参数来表示一个缩放因子。</p>
                            </div>
                            <div id="rfc.section.3.3.1.p.5">
                                <p>虽然可以序列化带前导零的整数（例如 "0002", "-01"）以及带符号的零（"-0"），但这些区分可能不会被实现保留。</p>
                            </div>
                            <div id="rfc.section.3.3.1.p.6">
                                <p>注意，本节文字中整数内使用的逗号仅用于可读性；它们在传输格式中并不合法。</p>
                            </div>
                        </section>
                        <section id="decimal">
                            <h4 id="rfc.section.3.3.2"><a href="#rfc.section.3.3.2">3.3.2.</a>&nbsp;<a
                                    href="#decimal">小数</a></h4>
                            <div id="rfc.section.3.3.2.p.1">
                                <p>小数由整数部分和小数部分组成。整数部分最多 12 位数字；小数部分最多 3 位数字。</p>
                            </div>
                            <div id="rfc.section.3.3.2.p.2" class="avoidbreakafter">
                                <p>例如，一个其值被定义为小数的报头可能如下：</p>
                            </div>
                            <div id="rfc.section.3.3.2.p.3">
                                <pre class="text">
Example-Decimal: 4.5
</pre>
                            </div>
                            <div id="rfc.section.3.3.2.p.4">
                                <p>虽然可以序列化带前导零的小数（例如 "0002.5", "-01.334"），带尾随零的（例如 "5.230", "-0.40"）以及带符号的零（例如
                                    "-0.0"），但这些区分可能不会被实现保留。</p>
                            </div>
                            <div id="rfc.section.3.3.2.p.5">
                                <p>注意序列化算法（<a href="#ser-decimal" title="Serializing a Decimal">第 4.1.5
                                        节</a>）会对小数部分精度超过三位的输入进行舍入。如果需要不同的舍入策略，应由字段定义在序列化之前指定。</p>
                            </div>
                        </section>
                        <section id="string">
                            <h4 id="rfc.section.3.3.3"><a href="#rfc.section.3.3.3">3.3.3.</a>&nbsp;<a
                                    href="#string">字符串</a></h4>
                            <div id="rfc.section.3.3.3.p.1">
                                <p>字符串由零个或多个可打印的 ASCII 字符（参见 <a href="#RFC0020"><cite
                                            title="ASCII format for network interchange">[RFC0020]</cite></a>，即代码点范围
                                    %x20 到 %x7E）组成。注意这排除了制表符、换行、回车等字符。</p>
                            </div>
                            <div id="rfc.section.3.3.3.p.2">
                                <p>字符串不直接支持非 ASCII 字符，因为这会引发许多互操作性问题，而且在大多数情况下字段值并不需要它们。</p>
                            </div>
                            <div id="rfc.section.3.3.3.p.3">
                                <p>当需要在字段值中传递非 ASCII 内容时，可以指定显示字符串（<a href="#displaystring" title="Display Strings">第
                                        3.3.8 节</a>）。</p>
                            </div>
                            <div id="rfc.section.3.3.3.p.4" class="avoidbreakafter">
                                <p>在文本 HTTP 字段中序列化时，字符串用双引号界定，并使用反斜杠（"\"）对双引号和反斜杠进行转义。例如：</p>
                            </div>
                            <div id="rfc.section.3.3.3.p.5">
                                <pre class="text">
Example-String: "hello world"
</pre>
                            </div>
                            <div id="rfc.section.3.3.3.p.6">
                                <p>注意字符串仅使用 DQUOTE 作为定界符；单引号不用于定界字符串。此外，只有 DQUOTE 和 "\" 可以被转义；遇到 "\" 之后的其它字符会导致解析失败，<em
                                        class="bcp14">MUST</em> 如此处理。</p>
                            </div>
                            <div id="rfc.section.3.3.3.p.7">
                                <p>解析器<em class="bcp14">MUST</em> 支持（在任何解码之后）至少 1024 字符的字符串。</p>
                            </div>
                        </section>
                        <section id="token">
                            <h4 id="rfc.section.3.3.4"><a href="#rfc.section.3.3.4">3.3.4.</a>&nbsp;<a
                                    href="#token">标记</a></h4>
                            <div id="rfc.section.3.3.4.p.1">
                                <p>标记是以字母字符或 "*" 开始的短文本单词，后面跟零个或多个 token 字符。token 字符与 <a href="#RFC9110"><cite
                                            title="HTTP Semantics">[HTTP]</cite></a> 中定义的 "token" ABNF 规则允许的字符相同，并额外允许
                                    ":" 和 "/" 字符。</p>
                            </div>
                            <div id="rfc.section.3.3.4.p.2" class="avoidbreakafter">
                                <p>例如：</p>
                            </div>
                            <div id="rfc.section.3.3.4.p.3">
                                <pre class="text">
Example-Token: foo123/456
</pre>
                            </div>
                            <div id="rfc.section.3.3.4.p.4">
                                <p>解析器<em class="bcp14">MUST</em> 支持至少 512 字符的标记。</p>
                            </div>
                            <div id="rfc.section.3.3.4.p.5">
                                <p>注意标记主要为与现有 HTTP 字段的数据模型兼容而定义，可能在某些实现中需要额外处理步骤。因此鼓励新字段使用字符串。</p>
                            </div>
                        </section>
                        <section id="binary">
                            <h4 id="rfc.section.3.3.5"><a href="#rfc.section.3.3.5">3.3.5.</a>&nbsp;<a
                                    href="#binary">字节序列</a></h4>
                            <div id="rfc.section.3.3.5.p.1">
                                <p>字节序列可以在结构化字段中传输。</p>
                            </div>
                            <div id="rfc.section.3.3.5.p.2" class="avoidbreakafter">
                                <p>在文本 HTTP 字段中序列化时，字节序列用冒号界定，并使用 base64 编码（参见 <a href="#RFC4648"><cite
                                            title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a>，<a
                                        href="https://www.rfc-editor.org/rfc/rfc4648.html#section-4">第 4 节</a>）。例如：</p>
                            </div>
                            <div id="rfc.section.3.3.5.p.3">
                                <pre class="text">
Example-ByteSequence: :cHJldGVuZCB0aGlzIGlzIGJpbmFyeSBjb250ZW50Lg==:
</pre>
                            </div>
                            <div id="rfc.section.3.3.5.p.4">
                                <p>解析器<em class="bcp14">MUST</em> 支持解码后至少 16384 字节的字节序列。</p>
                            </div>
                        </section>
                        <section id="boolean">
                            <h4 id="rfc.section.3.3.6"><a href="#rfc.section.3.3.6">3.3.6.</a>&nbsp;<a
                                    href="#boolean">布尔值</a></h4>
                            <div id="rfc.section.3.3.6.p.1">
                                <p>布尔值可以在结构化字段中传递。</p>
                            </div>
                            <div id="rfc.section.3.3.6.p.2" class="avoidbreakafter">
                                <p>在文本 HTTP 字段中序列化时，布尔值以前导字符 "?" 表示，随后用 "1" 表示 true，"0" 表示 false。例如：</p>
                            </div>
                            <div id="rfc.section.3.3.6.p.3">
                                <pre class="text">
Example-Boolean: ?1
</pre>
                            </div>
                            <div id="rfc.section.3.3.6.p.4">
                                <p>注意在字典（<a href="#dictionary" title="Dictionaries">第 3.2 节</a>）和参数（<a href="#param"
                                        title="Parameters">第 3.1.2 节</a>）的值中，布尔 true 通过省略值来表示。</p>
                            </div>
                        </section>
                        <section id="date">
                            <h4 id="rfc.section.3.3.7"><a href="#rfc.section.3.3.7">3.3.7.</a>&nbsp;<a
                                    href="#date">日期</a></h4>
                            <div id="rfc.section.3.3.7.p.1">
                                <p>日期值可以在结构化字段中传递。</p>
                            </div>
                            <div id="rfc.section.3.3.7.p.2">
                                <p>日期的数据模型类似于整数，表示自 1970-01-01T00:00:00Z 起（不含闰秒）的秒数增量（可能为负）。因此，它们在文本 HTTP
                                    字段中的序列化类似于整数，但以前导 "@" 与之区分。</p>
                            </div>
                            <div id="rfc.section.3.3.7.p.3" class="avoidbreakafter">
                                <p>例如：</p>
                            </div>
                            <div id="rfc.section.3.3.7.p.4">
                                <pre class="text">
Example-Date: @1659578233
</pre>
                            </div>
                            <div id="rfc.section.3.3.7.p.5">
                                <p>解析器<em class="bcp14">MUST</em> 支持其值覆盖公元 1 年至 9999 年所有天数的日期（即从 1970-01-01T00:00:00Z
                                    的增量秒范围为 -62,135,596,800 到 253,402,214,400）。</p>
                            </div>
                        </section>
                        <section id="displaystring">
                            <h4 id="rfc.section.3.3.8"><a href="#rfc.section.3.3.8">3.3.8.</a>&nbsp;<a
                                    href="#displaystring">显示字符串</a></h4>
                            <div id="rfc.section.3.3.8.p.1">
                                <p>显示字符串类似于字符串，由零个或多个字符组成，但它们允许 Unicode 标量值（即除代理项之外的所有 Unicode 代码点），这与字符串不同。</p>
                            </div>
                            <div id="rfc.section.3.3.8.p.2">
                                <p>显示字符串旨在用于需要向最终用户显示的值，因此可能需要承载非 ASCII 内容。除非字符串（<a href="#string" title="Strings">第
                                        3.3.3 节</a>）或标记（<a href="#token" title="Tokens">第 3.3.4 节</a>）不足以满足需求，否则<em
                                        class="bcp14">NOT RECOMMENDED</em> 使用显示字符串，因为 Unicode
                                    存在规范化等处理问题以及诸如同形异义攻击等安全考虑，使得正确处理更为困难。</p>
                            </div>
                            <div id="rfc.section.3.3.8.p.3">
                                <p>注意显示字符串并不表示其所使用的语言；如有必要，可以另行指示语言（例如通过参数）。</p>
                            </div>
                            <div id="rfc.section.3.3.8.p.4">
                                <p>在文本 HTTP 字段中，显示字符串的表示方式类似于字符串，但非 ASCII 字符会进行百分号编码；并以前导 "%" 与字符串区分。</p>
                            </div>
                            <div id="rfc.section.3.3.8.p.5" class="avoidbreakafter">
                                <p>例如：</p>
                            </div>
                            <div id="rfc.section.3.3.8.p.6">
                                <pre class="text">
Example-DisplayString: %"This is intended for display to %c3%bcsers."
</pre>
                            </div>
                            <div id="rfc.section.3.3.8.p.7">
                                <p>关于处理显示字符串的额外安全注意事项，请参见 <a href="#security" title="Security Considerations">第 6 节</a>。
                                </p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="text">
                    <h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#text">在 HTTP
                            中使用结构化字段</a></h2>
                    <div id="rfc.section.4.p.1">
                        <p>本节定义了如何将第 <a href="#types" title="Structured Data Types">3 节</a> 所定义的抽象类型序列化和解析为文本形式的 HTTP
                            字段值以及与之兼容的其他编码（例如，在 HTTP/2 <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> 中在使用
                            HPACK <a href="#RFC7541"><cite
                                    title="HPACK: Header Compression for HTTP/2">[HPACK]</cite></a> 压缩之前）。</p>
                    </div>
                    <section id="text-serialize">
                        <h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a>&nbsp;<a
                                href="#text-serialize">结构化字段的序列化</a></h3>
                        <div id="rfc.section.4.1.p.1">
                            <p>给定本规范中定义的结构，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                        </div>
                        <div id="rfc.section.4.1.p.2">
                            <ol type="1">
                                <li>
                                    <div>
                                        <p>如果该结构是 Dictionary 或 List 并且其值为空（即没有成员），则不要序列化该字段（即省略 field-name 和
                                            field-value）。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>如果该结构是 List，则令 output_string 为对该结构运行 "Serializing a List"（<a href="#ser-list"
                                                title="Serializing a List">第 4.1.1 节</a>）的结果。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>否则，如果该结构是 Dictionary，则令 output_string 为对该结构运行 "Serializing a Dictionary"（<a
                                                href="#ser-dictionary" title="Serializing a Dictionary">第 4.1.2
                                                节</a>）的结果。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>否则，如果该结构是 Item，则令 output_string 为对该结构运行 "Serializing an Item"（<a
                                                href="#ser-item" title="Serializing an Item">第 4.1.3 节</a>）的结果。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>否则，序列化失败。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>返回将 output_string 转换为字节数组后的结果，使用 ASCII 编码（<a href="#RFC0020"><cite
                                                    title="ASCII format for network interchange">[RFC0020]</cite></a>）。
                                        </p>
                                    </div>
                                </li>
                            </ol>
                        </div>
                        <section id="ser-list">
                            <h4 id="rfc.section.4.1.1"><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;<a
                                    href="#ser-list">序列化列表</a></h4>
                            <div id="rfc.section.4.1.1.p.1">
                                <p>给定一个由 (member_value, parameters) 元组组成的数组 input_list，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.1.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>对于 input_list 中的每个 (member_value, parameters)：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>如果 member_value 是数组，则将对 (member_value, parameters) 运行
                                                            "Serializing an Inner List"（<a href="#ser-innerlist"
                                                                title="Serializing an Inner List">第 4.1.1.1 节</a>）的结果追加到
                                                            output。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，将对 (member_value, parameters) 运行 "Serializing an Item"（<a
                                                                href="#ser-item" title="Serializing an Item">第 4.1.3
                                                                节</a>）的结果追加到 output。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 input_list 中还有更多 member_values：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>向 output 追加 ","。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>向 output 追加一个 SP。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <section id="ser-innerlist">
                                <h5 id="rfc.section.4.1.1.1"><a href="#rfc.section.4.1.1.1">4.1.1.1.</a>&nbsp;<a
                                        href="#ser-innerlist">序列化内层列表</a></h5>
                                <div id="rfc.section.4.1.1.1.p.1">
                                    <p>给定一个由 (member_value, parameters) 元组组成的数组 inner_list，以及 list_parameters，返回适用于 HTTP
                                        字段值的 ASCII 字符串。</p>
                                </div>
                                <div id="rfc.section.4.1.1.1.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>令 output 为字符串 "("。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="avoidbreakafter">
                                                <p>对于 inner_list 中的每个 (member_value, parameters)：</p>
                                            </div>
                                            <div>
                                                <ol type="1">
                                                    <li>
                                                        <div>
                                                            <p>将对 (member_value, parameters) 运行 "Serializing an Item"（<a
                                                                    href="#ser-item" title="Serializing an Item">第 4.1.3
                                                                    节</a>）的结果追加到 output。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>如果 inner_list 中还有更多值，则向 output 追加一个 SP。</p>
                                                        </div>
                                                    </li>
                                                </ol>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>向 output 追加 ")"。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>将对 list_parameters 运行 "Serializing Parameters"（<a href="#ser-params"
                                                        title="Serializing Parameters">第 4.1.1.2 节</a>）的结果追加到 output。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>返回 output。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                            <section id="ser-params">
                                <h5 id="rfc.section.4.1.1.2"><a href="#rfc.section.4.1.1.2">4.1.1.2.</a>&nbsp;<a
                                        href="#ser-params">序列化参数</a></h5>
                                <div id="rfc.section.4.1.1.2.p.1">
                                    <p>给定一个有序的 Dictionary 作为 input_parameters（每个成员有 param_key 和 param_value），返回适用于 HTTP
                                        字段值的 ASCII 字符串。</p>
                                </div>
                                <div id="rfc.section.4.1.1.2.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>令 output 为空字符串。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="avoidbreakafter">
                                                <p>对于 input_parameters 中的每个 param_key 及其 param_value：</p>
                                            </div>
                                            <div>
                                                <ol type="1">
                                                    <li>
                                                        <div>
                                                            <p>向 output 追加 ";"。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>将对 param_key 运行 "Serializing a Key"（<a href="#ser-key"
                                                                    title="Serializing a Key">第 4.1.1.3 节</a>）的结果追加到
                                                                output。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="avoidbreakafter">
                                                            <p>如果 param_value 不是布尔 true：</p>
                                                        </div>
                                                        <div>
                                                            <ol type="1">
                                                                <li>
                                                                    <div>
                                                                        <p>向 output 追加 "="。</p>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <div>
                                                                        <p>将对 param_value 运行 "Serializing a bare
                                                                            Item"（<a href="#ser-bare-item"
                                                                                title="Serializing a Bare Item">第
                                                                                4.1.3.1 节</a>）的结果追加到 output。</p>
                                                                    </div>
                                                                </li>
                                                            </ol>
                                                        </div>
                                                    </li>
                                                </ol>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>返回 output。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                            <section id="ser-key">
                                <h5 id="rfc.section.4.1.1.3"><a href="#rfc.section.4.1.1.3">4.1.1.3.</a>&nbsp;<a
                                        href="#ser-key">序列化键</a></h5>
                                <div id="rfc.section.4.1.1.3.p.1">
                                    <p>给定一个键作为 input_key，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                                </div>
                                <div id="rfc.section.4.1.1.3.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>将 input_key 转换为 ASCII 字符序列；如果转换失败，则序列化失败。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_key 包含不在 lcalpha、DIGIT、"_"、"-"、"." 或 "*" 的字符，则序列化失败。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_key 的第一个字符不是 lcalpha 或 "*"，则序列化失败。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>令 output 为空字符串。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>将 input_key 追加到 output。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>返回 output。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                        </section>
                        <section id="ser-dictionary">
                            <h4 id="rfc.section.4.1.2"><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;<a
                                    href="#ser-dictionary">序列化字典</a></h4>
                            <div id="rfc.section.4.1.2.p.1">
                                <p>给定一个有序的 Dictionary 作为 input_dictionary（每个成员具有 member_key 和值为 (member_value,
                                    parameters) 的元组），返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.2.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>对于 input_dictionary 中的每个 member_key 及其 (member_value, parameters)：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>将对 member 的 member_key 运行 "Serializing a Key"（<a
                                                                href="#ser-key" title="Serializing a Key">第 4.1.1.3
                                                                节</a>）的结果追加到 output。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 member_value 是布尔 true：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>将对 parameters 运行 "Serializing Parameters"（<a
                                                                            href="#ser-params"
                                                                            title="Serializing Parameters">第 4.1.1.2
                                                                            节</a>）的结果追加到 output。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>否则：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>向 output 追加 "="。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>如果 member_value 是数组，则将对 (member_value,
                                                                        parameters) 运行 "Serializing an Inner List"（<a
                                                                            href="#ser-innerlist"
                                                                            title="Serializing an Inner List">第 4.1.1.1
                                                                            节</a>）的结果追加到 output。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>否则，将对 (member_value, parameters) 运行 "Serializing
                                                                        an Item"（<a href="#ser-item"
                                                                            title="Serializing an Item">第 4.1.3
                                                                            节</a>）的结果追加到 output。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 input_dictionary 中还有更多成员：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>向 output 追加 ","。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>向 output 追加一个 SP。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-item">
                            <h4 id="rfc.section.4.1.3"><a href="#rfc.section.4.1.3">4.1.3.</a>&nbsp;<a
                                    href="#ser-item">序列化项</a></h4>
                            <div id="rfc.section.4.1.3.p.1">
                                <p>给定一个 Item 作为 bare_item 和参数作为 item_parameters，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.3.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将对 bare_item 运行 "Serializing a Bare Item"（<a href="#ser-bare-item"
                                                    title="Serializing a Bare Item">第 4.1.3.1 节</a>）的结果追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将对 item_parameters 运行 "Serializing Parameters"（<a href="#ser-params"
                                                    title="Serializing Parameters">第 4.1.1.2 节</a>）的结果追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <section id="ser-bare-item">
                                <h5 id="rfc.section.4.1.3.1"><a href="#rfc.section.4.1.3.1">4.1.3.1.</a>&nbsp;<a
                                        href="#ser-bare-item">序列化裸项</a></h5>
                                <div id="rfc.section.4.1.3.1.p.1">
                                    <p>给定一个 Item 作为 input_item，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                                </div>
                                <div id="rfc.section.4.1.3.1.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Integer，返回对 input_item 运行 "Serializing an Integer"（<a
                                                        href="#ser-integer" title="Serializing an Integer">第 4.1.4
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Decimal，返回对 input_item 运行 "Serializing a Decimal"（<a
                                                        href="#ser-decimal" title="Serializing a Decimal">第 4.1.5
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 String，返回对 input_item 运行 "Serializing a String"（<a
                                                        href="#ser-string" title="Serializing a String">第 4.1.6
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Token，返回对 input_item 运行 "Serializing a Token"（<a
                                                        href="#ser-token" title="Serializing a Token">第 4.1.7 节</a>）的结果。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Byte Sequence，返回对 input_item 运行 "Serializing a Byte
                                                    Sequence"（<a href="#ser-binary"
                                                        title="Serializing a Byte Sequence">第 4.1.8 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Boolean，返回对 input_item 运行 "Serializing a Boolean"（<a
                                                        href="#ser-boolean" title="Serializing a Boolean">第 4.1.9
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Date，返回对 input_item 运行 "Serializing a Date"（<a
                                                        href="#ser-date" title="Serializing a Date">第 4.1.10 节</a>）的结果。
                                                </p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_item 是 Display String，返回对 input_item 运行 "Serializing a
                                                    Display String"（<a href="#ser-display"
                                                        title="Serializing a Display String">第 4.1.11 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>否则，序列化失败。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                        </section>
                        <section id="ser-integer">
                            <h4 id="rfc.section.4.1.4"><a href="#rfc.section.4.1.4">4.1.4.</a>&nbsp;<a
                                    href="#ser-integer">序列化整数</a></h4>
                            <div id="rfc.section.4.1.4.p.1">
                                <p>给定一个 Integer 作为 input_integer，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.4.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_integer 不是在 -999,999,999,999,999 到
                                                999,999,999,999,999（含）范围内的整数，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_integer 小于（但不等于）0，则向 output 追加 "-"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将 input_integer 的十进制数字表示（仅使用十进制数字）追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-decimal">
                            <h4 id="rfc.section.4.1.5"><a href="#rfc.section.4.1.5">4.1.5.</a>&nbsp;<a
                                    href="#ser-decimal">序列化小数</a></h4>
                            <div id="rfc.section.4.1.5.p.1">
                                <p>给定一个小数作为 input_decimal，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.5.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_decimal 不是小数，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_decimal 在小数点右侧具有超过三位有效数字，则将其四舍五入到三位小数，最后一位按四舍五入到最接近值，若正好中间则取偶数。
                                            </p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果在舍入之后 input_decimal 在小数点左侧具有超过 12 位有效数字，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_decimal 小于（但不等于）0，则向 output 追加 "-"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将 input_decimal 的整数部分（以十进制数字表示；若为零则追加 "0"）追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>向 output 追加 "."。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_decimal 的小数部分为零，则向 output 追加 "0"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>否则，将 input_decimal 小数部分的有效数字（以十进制数字表示）追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-string">
                            <h4 id="rfc.section.4.1.6"><a href="#rfc.section.4.1.6">4.1.6.</a>&nbsp;<a
                                    href="#ser-string">序列化字符串</a></h4>
                            <div id="rfc.section.4.1.6.p.1">
                                <p>给定一个 String 作为 input_string，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.6.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>将 input_string 转换为 ASCII 字符序列；如果转换失败，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 包含 %x00-1f 或 %x7f-ff 范围内的字符（即不在 VCHAR 或 SP 中），则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output 为字符串 DQUOTE。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>对于 input_string 中的每个字符 char：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 char 为 "\" 或 DQUOTE：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>向 output 追加 "\"。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>将 char 追加到 output。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>向 output 追加 DQUOTE。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-token">
                            <h4 id="rfc.section.4.1.7"><a href="#rfc.section.4.1.7">4.1.7.</a>&nbsp;<a
                                    href="#ser-token">序列化标记</a></h4>
                            <div id="rfc.section.4.1.7.p.1">
                                <p>给定一个 Token 作为 input_token，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.7.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>将 input_token 转换为 ASCII 字符序列；如果转换失败，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_token 的第一个字符不是 ALPHA 或 "*"，或其余部分包含不在 tchar、":" 或 "/"
                                                中的字符，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将 input_token 追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-binary">
                            <h4 id="rfc.section.4.1.8"><a href="#rfc.section.4.1.8">4.1.8.</a>&nbsp;<a
                                    href="#ser-binary">序列化字节序列</a></h4>
                            <div id="rfc.section.4.1.8.p.1">
                                <p>给定一个 Byte Sequence 作为 input_bytes，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.8.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_bytes 不是字节序列，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>向 output 追加 ":"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将按 <a href="#RFC4648"><cite
                                                        title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a>
                                                第 4 节对 input_bytes 进行 base64 编码的结果追加到 output（并符合下述要求）。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>向 output 追加 ":"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <div id="rfc.section.4.1.8.p.3">
                                <p>编码数据必须按 <a href="#RFC4648"><cite
                                            title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a> 第
                                    3.2 节 的要求使用 "=" 进行填充。</p>
                            </div>
                            <div id="rfc.section.4.1.8.p.4">
                                <p>同样，根据 <a href="#RFC4648"><cite
                                            title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a> 第
                                    3.5 节 的规定，除非由于实现限制而无法做到，否则编码数据应将填充位设为零，<em class="bcp14">SHOULD</em> 如此处理。</p>
                            </div>
                        </section>
                        <section id="ser-boolean">
                            <h4 id="rfc.section.4.1.9"><a href="#rfc.section.4.1.9">4.1.9.</a>&nbsp;<a
                                    href="#ser-boolean">序列化布尔值</a></h4>
                            <div id="rfc.section.4.1.9.p.1">
                                <p>给定一个 Boolean 作为 input_boolean，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.9.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_boolean 不是布尔值，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>向 output 追加 "?"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_boolean 为 true，则向 output 追加 "1"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_boolean 为 false，则向 output 追加 "0"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-date">
                            <h4 id="rfc.section.4.1.10"><a href="#rfc.section.4.1.10">4.1.10.</a>&nbsp;<a
                                    href="#ser-date">序列化日期</a></h4>
                            <div id="rfc.section.4.1.10.p.1">
                                <p>给定一个 Date 作为 input_date，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.10.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 output 为 "@"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>将对 input_date 运行 "Serializing an Integer"（<a href="#ser-integer"
                                                    title="Serializing an Integer">第 4.1.4 节</a>）的结果追加到 output。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="ser-display">
                            <h4 id="rfc.section.4.1.11"><a href="#rfc.section.4.1.11">4.1.11.</a>&nbsp;<a
                                    href="#ser-display">序列化显示字符串</a></h4>
                            <div id="rfc.section.4.1.11.p.1">
                                <p>给定一个 Unicode 代码点序列作为 input_sequence，返回适用于 HTTP 字段值的 ASCII 字符串。</p>
                            </div>
                            <div id="rfc.section.4.1.11.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_sequence 不是 Unicode 代码点序列，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 byte_array 为对 input_sequence 应用 UTF-8 编码（参见 <a
                                                    href="https://www.rfc-editor.org/rfc/rfc3629.html#section-3">[UTF8]
                                                    第 3 节</a>）的结果；如果编码失败，则序列化失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 encoded_string 为包含 "%" 后接 DQUOTE 的字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>对于 byte_array 中的每个字节：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果字节是 %x25 ("%")、%x22 (DQUOTE)，或属于 %x00-1f 或 %x7f-ff 范围：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>向 encoded_string 追加 "%"。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>令 encoded_byte 为对字节进行 base16 编码（参见 <a
                                                                            href="https://www.rfc-editor.org/rfc/rfc4648.html#section-8">[RFC4648]
                                                                            第 8 节</a>）的结果，并将任何字母字符转换为小写。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>将 encoded_byte 追加到 encoded_string。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，将字节解码为 ASCII 字符并将结果追加到 encoded_string。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>向 encoded_string 追加 DQUOTE。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 encoded_string。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <div id="rfc.section.4.1.11.p.3">
                                <p>注意，<a href="#RFC3629"><cite
                                            title="UTF-8, a transformation format of ISO 10646">[UTF8]</cite></a> 禁止对
                                    U+D800 到 U+DFFF（代理项）之间的代码点进行编码；如果它们出现在 input_sequence 中，则序列化将失败。</p>
                            </div>
                        </section>
                    </section>
                    <section id="text-parse">
                        <h3 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a>&nbsp;<a
                                href="#text-parse">解析结构化字段</a></h3>
                        <div id="rfc.section.4.2.p.1">
                            <p>当接收方实现解析已知为结构化字段的 HTTP 字段时，必须谨慎，因为存在许多边缘情况可能导致互操作性甚至安全问题。本节指定了执行该操作的算法。</p>
                        </div>
                        <div id="rfc.section.4.2.p.2">
                            <p>给定表示所选字段的 field-value 的字节数组 input_bytes（如果该字段不存在则为空）和 field_type（"dictionary"、"list" 或
                                "item" 之一），返回解析后的字段值。</p>
                        </div>
                        <div id="rfc.section.4.2.p.3">
                            <ol type="1">
                                <li>
                                    <div>
                                        <p>将 input_bytes 转换为 ASCII 字符串 input_string；如果转换失败，解析失败。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>丢弃 input_string 的任何前导 SP 字符。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>如果 field_type 为 "list"，令 output 为对 input_string 运行 "Parsing a List"（<a
                                                href="#parse-list" title="Parsing a List">第 4.2.1 节</a>）的结果。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>如果 field_type 为 "dictionary"，令 output 为对 input_string 运行 "Parsing a
                                            Dictionary"（<a href="#parse-dictionary" title="Parsing a Dictionary">第 4.2.2
                                                节</a>）的结果。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>如果 field_type 为 "item"，令 output 为对 input_string 运行 "Parsing an Item"（<a
                                                href="#parse-item" title="Parsing an Item">第 4.2.3 节</a>）的结果。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>丢弃 input_string 的任何前导 SP 字符。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>如果 input_string 非空，则解析失败。</p>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <p>否则，返回 output。</p>
                                    </div>
                                </li>
                            </ol>
                        </div>
                        <div id="rfc.section.4.2.p.4">
                            <p>在生成 input_bytes 时，解析器<em class="bcp14">MUST</em>
                                将同一节（头部或尾部）中所有与字段名大小写不敏感匹配的字段行合并为一个以逗号分隔的 field-value（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.2">[HTTP] 第 5.2
                                    节</a>）；这可确保整个字段值被正确处理。</p>
                        </div>
                        <div id="rfc.section.4.2.p.5">
                            <p>对于 Lists 和
                                Dictionaries，这会在不将顶层结构的单个成员拆分到多个字段实例的情况下正确地连接该字段的所有行。两种类型的解析算法都允许制表符字符，因为某些实现可能使用制表符来合并字段行。
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.6">
                            <p>跨多个字段行拆分的 Strings
                                将产生不可预测的结果，因为一个或多个逗号（及可选空白）将成为解析器输出字符串的一部分。由于连接可能由上游中间件执行，结果不受序列化器或解析器的控制，即使它们都由同一方控制也一样。
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.7">
                            <p>Tokens、Integers、Decimals 和 Byte Sequences 不能跨多个字段行拆分，因为插入的逗号将导致解析失败。</p>
                        </div>
                        <div id="rfc.section.4.2.p.8" class="avoidbreakafter">
                            <p>当某条字段行无法作为该字段解析时，解析器<em class="bcp14">MAY</em> 在处理分布在多行的字段值时失败。例如，处理被定义为 sf-string 的
                                Example-String 字段的解析器在处理下列字段节时被允许失败：</p>
                        </div>
                        <div id="rfc.section.4.2.p.9">
                            <pre class="text">
Example-String: "foo
Example-String: bar"
</pre>
                        </div>
                        <div id="rfc.section.4.2.p.10">
                            <p>如果解析失败，则整个字段值<em class="bcp14">MUST</em> 被忽略（即视为该节中不存在该字段），或者整个 HTTP 消息<em
                                    class="bcp14">MUST</em> 被视为格式错误。这种严格性是有意为之，以提高互操作性和安全性，使用结构化字段的字段规范不得放宽此要求。</p>
                        </div>
                        <div id="rfc.section.4.2.p.11">
                            <p>注意，该要求不适用于未解析该字段的实现；例如，中间件不要求在转发消息之前剥离解析失败的字段。</p>
                        </div>
                        <section id="parse-list">
                            <h4 id="rfc.section.4.2.1"><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;<a
                                    href="#parse-list">解析列表</a></h4>
                            <div id="rfc.section.4.2.1.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回由 (item_or_inner_list, parameters)
                                    元组组成的数组。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.1.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 members 为一个空数组。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>当 input_string 非空时：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>将对 input_string 运行 "Parsing an Item or Inner List"（<a
                                                                href="#parse-item-or-list"
                                                                title="Parsing an Item or Inner List">第 4.2.1.1
                                                                节</a>）的结果追加到 members。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>从 input_string 丢弃任何前导 OWS 字符。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 input_string 为空，则返回 members。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>消费 input_string 的第一个字符；如果不是 ","，则解析失败。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>从 input_string 丢弃任何前导 OWS 字符。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 input_string 为空，则存在尾随逗号；解析失败。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>未找到任何结构化数据；返回 members（此时为空）。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <section id="parse-item-or-list">
                                <h5 id="rfc.section.4.2.1.1"><a href="#rfc.section.4.2.1.1">4.2.1.1.</a>&nbsp;<a
                                        href="#parse-item-or-list">解析项或内层列表</a></h5>
                                <div id="rfc.section.4.2.1.1.p.1">
                                    <p>给定一个 ASCII 字符串作为 input_string，返回元组 (item_or_inner_list, parameters)，其中
                                        item_or_inner_list 可以是单个裸项或由 (bare_item, parameters) 元组组成的数组。input_string
                                        在解析后会被修改以移除已解析的值。</p>
                                </div>
                                <div id="rfc.section.4.2.1.1.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 "("：返回对 input_string 运行 "Parsing an Inner
                                                    List"（<a href="#parse-innerlist" title="Parsing an Inner List">第
                                                        4.2.1.2 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>返回对 input_string 运行 "Parsing an Item"（<a href="#parse-item"
                                                        title="Parsing an Item">第 4.2.3 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                            <section id="parse-innerlist">
                                <h5 id="rfc.section.4.2.1.2"><a href="#rfc.section.4.2.1.2">4.2.1.2.</a>&nbsp;<a
                                        href="#parse-innerlist">解析内层列表</a></h5>
                                <div id="rfc.section.4.2.1.2.p.1">
                                    <p>给定一个 ASCII 字符串作为 input_string，返回元组 (inner_list, parameters)，其中 inner_list 是由
                                        (bare_item, parameters) 元组组成的数组。input_string 在解析后会被修改以移除已解析的值。</p>
                                </div>
                                <div id="rfc.section.4.2.1.2.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>消费 input_string 的第一个字符；如果不是 "(", 则解析失败。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>令 inner_list 为空数组。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="avoidbreakafter">
                                                <p>当 input_string 非空时：</p>
                                            </div>
                                            <div>
                                                <ol type="1">
                                                    <li>
                                                        <div>
                                                            <p>从 input_string 丢弃任何前导 SP 字符。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="avoidbreakafter">
                                                            <p>如果 input_string 的第一个字符是 ")":</p>
                                                        </div>
                                                        <div>
                                                            <ol type="1">
                                                                <li>
                                                                    <div>
                                                                        <p>消费 input_string 的第一个字符。</p>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <div>
                                                                        <p>令 parameters 为对 input_string 运行 "Parsing
                                                                            Parameters"（<a href="#parse-param"
                                                                                title="Parsing Parameters">第 4.2.3.2
                                                                                节</a>）的结果。</p>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <div>
                                                                        <p>返回元组 (inner_list, parameters)。</p>
                                                                    </div>
                                                                </li>
                                                            </ol>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>令 item 为对 input_string 运行 "Parsing an Item"（<a
                                                                    href="#parse-item" title="Parsing an Item">第 4.2.3
                                                                    节</a>）的结果。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>将 item 追加到 inner_list。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>如果 input_string 的第一个字符既不是 SP 也不是 ")"，则解析失败。</p>
                                                        </div>
                                                    </li>
                                                </ol>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>未找到内层列表的结束；解析失败。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                        </section>
                        <section id="parse-dictionary">
                            <h4 id="rfc.section.4.2.2"><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;<a
                                    href="#parse-dictionary">解析字典</a></h4>
                            <div id="rfc.section.4.2.2.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个有序映射，其值为 (item_or_inner_list, parameters)
                                    元组。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.2.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 dictionary 为一个空的、有序的映射。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>当 input_string 非空时：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>令 this_key 为对 input_string 运行 "Parsing a Key"（<a
                                                                href="#parse-key" title="Parsing a Key">第 4.2.3.3
                                                                节</a>）的结果。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 input_string 的第一个字符是 "="：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>消费 input_string 的第一个字符。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>令 member 为对 input_string 运行 "Parsing an Item or
                                                                        Inner List"（<a href="#parse-item-or-list"
                                                                            title="Parsing an Item or Inner List">第
                                                                            4.2.1.1 节</a>）的结果。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>否则：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>令 value 为布尔 true。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>令 parameters 为对 input_string 运行 "Parsing
                                                                        Parameters"（<a href="#parse-param"
                                                                            title="Parsing Parameters">第 4.2.3.2
                                                                            节</a>）的结果。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>令 member 为元组 (value, parameters)。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 dictionary 已包含键 this_key（逐字符比较），则用 member 覆盖其值。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，将键 this_key 及其值 member 追加到 dictionary。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>从 input_string 丢弃任何前导 OWS 字符。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 input_string 为空，则返回 dictionary。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>消费 input_string 的第一个字符；如果不是 ","，则解析失败。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>从 input_string 丢弃任何前导 OWS 字符。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 input_string 为空，则存在尾随逗号；解析失败。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>未找到结构化数据；返回 dictionary（此时为空）。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <div id="rfc.section.4.2.2.p.3">
                                <p>注意，当遇到重复的字典键时，除最后一次出现之外的所有实例都被忽略。</p>
                            </div>
                        </section>
                        <section id="parse-item">
                            <h4 id="rfc.section.4.2.3"><a href="#rfc.section.4.2.3">4.2.3.</a>&nbsp;<a
                                    href="#parse-item">解析项</a></h4>
                            <div id="rfc.section.4.2.3.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 (bare_item, parameters) 元组。input_string
                                    在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.3.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 bare_item 为对 input_string 运行 "Parsing a Bare Item"（<a
                                                    href="#parse-bare-item" title="Parsing a Bare Item">第 4.2.3.1
                                                    节</a>）的结果。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 parameters 为对 input_string 运行 "Parsing Parameters"（<a
                                                    href="#parse-param" title="Parsing Parameters">第 4.2.3.2 节</a>）的结果。
                                            </p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回元组 (bare_item, parameters)。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <section id="parse-bare-item">
                                <h5 id="rfc.section.4.2.3.1"><a href="#rfc.section.4.2.3.1">4.2.3.1.</a>&nbsp;<a
                                        href="#parse-bare-item">解析裸项</a></h5>
                                <div id="rfc.section.4.2.3.1.p.1">
                                    <p>给定一个 ASCII 字符串作为 input_string，返回一个裸项。input_string 在解析后会被修改以移除已解析的值。</p>
                                </div>
                                <div id="rfc.section.4.2.3.1.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 "-" 或 DIGIT，则返回对 input_string 运行 "Parsing an
                                                    Integer or Decimal"（<a href="#parse-number"
                                                        title="Parsing an Integer or Decimal">第 4.2.4 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 DQUOTE，则返回对 input_string 运行 "Parsing a
                                                    String"（<a href="#parse-string" title="Parsing a String">第 4.2.5
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 ALPHA 或 "*"，则返回对 input_string 运行 "Parsing a
                                                    Token"（<a href="#parse-token" title="Parsing a Token">第 4.2.6
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 ":", 则返回对 input_string 运行 "Parsing a Byte
                                                    Sequence"（<a href="#parse-binary" title="Parsing a Byte Sequence">第
                                                        4.2.7 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 "?", 则返回对 input_string 运行 "Parsing a
                                                    Boolean"（<a href="#parse-boolean" title="Parsing a Boolean">第 4.2.8
                                                        节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 "@", 则返回对 input_string 运行 "Parsing a Date"（<a
                                                        href="#parse-date" title="Parsing a Date">第 4.2.9 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符是 "%", 则返回对 input_string 运行 "Parsing a Display
                                                    String"（<a href="#parse-display" title="Parsing a Display String">第
                                                        4.2.10 节</a>）的结果。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>否则，项类型无法识别；解析失败。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                            <section id="parse-param">
                                <h5 id="rfc.section.4.2.3.2"><a href="#rfc.section.4.2.3.2">4.2.3.2.</a>&nbsp;<a
                                        href="#parse-param">解析参数</a></h5>
                                <div id="rfc.section.4.2.3.2.p.1">
                                    <p>给定一个 ASCII 字符串作为 input_string，返回一个值为裸项的有序映射。input_string 在解析后会被修改以移除已解析的值。</p>
                                </div>
                                <div id="rfc.section.4.2.3.2.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>令 parameters 为一个空的、有序的映射。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="avoidbreakafter">
                                                <p>当 input_string 非空时：</p>
                                            </div>
                                            <div>
                                                <ol type="1">
                                                    <li>
                                                        <div>
                                                            <p>如果 input_string 的第一个字符不是 ";"，则退出循环。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>从 input_string 开头消费 ";" 字符。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>从 input_string 丢弃任何前导 SP 字符。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>令 param_key 为对 input_string 运行 "Parsing a Key"（<a
                                                                    href="#parse-key" title="Parsing a Key">第 4.2.3.3
                                                                    节</a>）的结果。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>令 param_value 为布尔 true。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div class="avoidbreakafter">
                                                            <p>如果 input_string 的第一个字符是 "="：</p>
                                                        </div>
                                                        <div>
                                                            <ol type="1">
                                                                <li>
                                                                    <div>
                                                                        <p>消费 input_string 开头的 "=" 字符。</p>
                                                                    </div>
                                                                </li>
                                                                <li>
                                                                    <div>
                                                                        <p>令 param_value 为对 input_string 运行 "Parsing a
                                                                            Bare Item"（<a href="#parse-bare-item"
                                                                                title="Parsing a Bare Item">第 4.2.3.1
                                                                                节</a>）的结果。</p>
                                                                    </div>
                                                                </li>
                                                            </ol>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>如果 parameters 已包含键 param_key（逐字符比较），则用 param_value 覆盖其值。
                                                            </p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>否则，将键 param_key 及其值 param_value 追加到 parameters。</p>
                                                        </div>
                                                    </li>
                                                </ol>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>返回 parameters。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                                <div id="rfc.section.4.2.3.2.p.3">
                                    <p>注意，当遇到重复的参数键时，除最后一次出现之外的所有实例都被忽略。</p>
                                </div>
                            </section>
                            <section id="parse-key">
                                <h5 id="rfc.section.4.2.3.3"><a href="#rfc.section.4.2.3.3">4.2.3.3.</a>&nbsp;<a
                                        href="#parse-key">解析键</a></h5>
                                <div id="rfc.section.4.2.3.3.p.1">
                                    <p>给定一个 ASCII 字符串作为 input_string，返回一个键。input_string 在解析后会被修改以移除已解析的值。</p>
                                </div>
                                <div id="rfc.section.4.2.3.3.p.2">
                                    <ol type="1">
                                        <li>
                                            <div>
                                                <p>如果 input_string 的第一个字符不是 lcalpha 或 "*"，则解析失败。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>令 output_string 为空字符串。</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="avoidbreakafter">
                                                <p>当 input_string 非空时：</p>
                                            </div>
                                            <div>
                                                <ol type="1">
                                                    <li>
                                                        <div>
                                                            <p>如果 input_string 的第一个字符不是 lcalpha、DIGIT、"_"、"-"、"." 或
                                                                "*"，则返回 output_string。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>令 char 为消费 input_string 的第一个字符的结果。</p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <div>
                                                            <p>将 char 追加到 output_string。</p>
                                                        </div>
                                                    </li>
                                                </ol>
                                            </div>
                                        </li>
                                        <li>
                                            <div>
                                                <p>返回 output_string。</p>
                                            </div>
                                        </li>
                                    </ol>
                                </div>
                            </section>
                        </section>
                        <section id="parse-number">
                            <h4 id="rfc.section.4.2.4"><a href="#rfc.section.4.2.4">4.2.4.</a>&nbsp;<a
                                    href="#parse-number">解析整数或小数</a></h4>
                            <div id="rfc.section.4.2.4.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 Integer 或 Decimal。input_string 在解析后会被修改以移除已解析的值。
                                </p>
                            </div>
                            <div id="rfc.section.4.2.4.p.2">
                                <p>注意：该算法既解析整数（<a href="#integer" title="Integers">第 3.3.1 节</a>）也解析小数（<a
                                        href="#decimal" title="Decimals">第 3.3.2 节</a>），并返回相应的结构。</p>
                            </div>
                            <div id="rfc.section.4.2.4.p.3">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 type 为 "integer"。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 sign 为 1。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 input_number 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符是 "-"，则消费它并将 sign 设为 -1。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 为空，则存在空整数；解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符不是 DIGIT，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>当 input_string 非空时：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>令 char 为消费 input_string 的第一个字符的结果。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 char 是 DIGIT，则将其追加到 input_number。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>否则，如果 type 为 "integer" 并且 char 是 "."：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>如果 input_number 包含超过 12 个字符，则解析失败。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>否则，将 char 追加到 input_number 并将 type 设为 "decimal"。
                                                                    </p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，将 char 放回 input_string 前端，并退出循环。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 type 为 "integer" 并且 input_number 包含超过 15 个字符，则解析失败。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 type 为 "decimal" 并且 input_number 包含超过 16 个字符，则解析失败。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>如果 type 为 "integer"：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>令 output_number 为将 input_number 解析为整数后的 Integer。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>否则：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>如果 input_number 的最后一个字符是 "."，则解析失败。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 input_number 中 "." 之后的字符数大于三，则解析失败。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>令 output_number 为将 input_number 解析为小数后的 Decimal。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output_number 为 output_number 与 sign 的乘积。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output_number。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="parse-string">
                            <h4 id="rfc.section.4.2.5"><a href="#rfc.section.4.2.5">4.2.5.</a>&nbsp;<a
                                    href="#parse-string">解析字符串</a></h4>
                            <div id="rfc.section.4.2.5.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个去引号的 String。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.5.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>令 output_string 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符不是 DQUOTE，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>丢弃 input_string 的第一个字符。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>当 input_string 非空时：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>令 char 为消费 input_string 的第一个字符的结果。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 char 是反斜杠 ("\")：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>如果此时 input_string 为空，则解析失败。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>令 next_char 为消费 input_string 的第一个字符的结果。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>如果 next_char 不是 DQUOTE 或 "\"，则解析失败。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>将 next_char 追加到 output_string。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，如果 char 是 DQUOTE，则返回 output_string。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，如果 char 属于 %x00-1f 或 %x7f-ff 范围（即不在 VCHAR 或 SP 中），则解析失败。
                                                        </p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>否则，将 char 追加到 output_string。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>到达 input_string 结尾但未找到闭合的 DQUOTE；解析失败。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="parse-token">
                            <h4 id="rfc.section.4.2.6"><a href="#rfc.section.4.2.6">4.2.6.</a>&nbsp;<a
                                    href="#parse-token">解析标记</a></h4>
                            <div id="rfc.section.4.2.6.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 Token。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.6.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符不是 ALPHA 或 "*"，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output_string 为空字符串。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>当 input_string 非空时：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>如果 input_string 的第一个字符不在 tchar、":" 或 "/" 中，则返回 output_string。
                                                        </p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>令 char 为消费 input_string 的第一个字符的结果。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>将 char 追加到 output_string。</p>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output_string。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="parse-binary">
                            <h4 id="rfc.section.4.2.7"><a href="#rfc.section.4.2.7">4.2.7.</a>&nbsp;<a
                                    href="#parse-binary">解析字节序列</a></h4>
                            <div id="rfc.section.4.2.7.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 Byte Sequence。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.7.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符不是 ":"，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>丢弃 input_string 的第一个字符。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果在 input_string 结束之前没有 ":" 字符，解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 b64_content 为消费 input_string 中直到但不包括第一个 ":" 字符的内容的结果。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>消费 input_string 开头的 ":" 字符。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 b64_content 包含不在 ALPHA、DIGIT、"+"、"/" 和 "=" 中的字符，解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 binary_content 为对 b64_content 按 <a href="#RFC4648"><cite
                                                        title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a>
                                                进行 base64 解码的结果，必要时合成填充（注意下文关于接收方行为的要求）。如果 base64 解码失败，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 binary_content。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                            <div id="rfc.section.4.2.7.p.3">
                                <p>由于某些 base64 实现不允许拒绝未正确使用 "=" 填充的编码数据（参见 <a href="#RFC4648"><cite
                                            title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a> 第
                                    3.2 节），解析器<em class="bcp14">SHOULD NOT</em> 在缺少 "=" 填充时失败，除非无法配置为不这样做。</p>
                            </div>
                            <div id="rfc.section.4.2.7.p.4">
                                <p>由于某些 base64 实现不允许拒绝具有非零填充位的编码数据（参见 <a href="#RFC4648"><cite
                                            title="The Base16, Base32, and Base64 Data Encodings">[RFC4648]</cite></a> 第
                                    3.5 节），解析器<em class="bcp14">SHOULD NOT</em> 在存在非零填充位时失败，除非无法配置为不这样做。</p>
                            </div>
                            <div id="rfc.section.4.2.7.p.5">
                                <p>本规范并未放宽 <a href="https://www.rfc-editor.org/rfc/rfc4648.html#section-3.1">[RFC4648] 第
                                        3.1 节</a> 和 <a href="https://www.rfc-editor.org/rfc/rfc4648.html#section-3.3">第
                                        3.3 节</a> 的要求；因此，解析器<em class="bcp14">MUST</em> 在遇到 base64
                                    字母表之外的字符或编码数据中的换行符时失败。</p>
                            </div>
                        </section>
                        <section id="parse-boolean">
                            <h4 id="rfc.section.4.2.8"><a href="#rfc.section.4.2.8">4.2.8.</a>&nbsp;<a
                                    href="#parse-boolean">解析布尔值</a></h4>
                            <div id="rfc.section.4.2.8.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 Boolean。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.8.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符不是 "?"，解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>丢弃 input_string 的第一个字符。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符是 "1"，则消费该字符并返回 true。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符是 "0"，则消费该字符并返回 false。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>没有匹配的值；解析失败。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="parse-date">
                            <h4 id="rfc.section.4.2.9"><a href="#rfc.section.4.2.9">4.2.9.</a>&nbsp;<a
                                    href="#parse-date">解析日期</a></h4>
                            <div id="rfc.section.4.2.9.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 Date。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.9.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_string 的第一个字符不是 "@", 则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>丢弃 input_string 的第一个字符。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 output_date 为对 input_string 运行 "Parsing an Integer or Decimal"（<a
                                                    href="#parse-number" title="Parsing an Integer or Decimal">第 4.2.4
                                                    节</a>）的结果。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>如果 output_date 是 Decimal，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>返回 output_date。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                        <section id="parse-display">
                            <h4 id="rfc.section.4.2.10"><a href="#rfc.section.4.2.10">4.2.10.</a>&nbsp;<a
                                    href="#parse-display">解析显示字符串</a></h4>
                            <div id="rfc.section.4.2.10.p.1">
                                <p>给定一个 ASCII 字符串作为 input_string，返回一个 Unicode 代码点序列。input_string 在解析后会被修改以移除已解析的值。</p>
                            </div>
                            <div id="rfc.section.4.2.10.p.2">
                                <ol type="1">
                                    <li>
                                        <div>
                                            <p>如果 input_string 的前两个字符不是 "%" 后接 DQUOTE，则解析失败。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>丢弃 input_string 的前两个字符。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>令 byte_array 为空字节数组。</p>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="avoidbreakafter">
                                            <p>当 input_string 非空时：</p>
                                        </div>
                                        <div>
                                            <ol type="1">
                                                <li>
                                                    <div>
                                                        <p>令 char 为消费 input_string 的第一个字符的结果。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div>
                                                        <p>如果 char 属于 %x00-1f 或 %x7f-ff 范围（即不在 VCHAR 或 SP 中），则解析失败。</p>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 char 是 "%":</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>令 octet_hex 为从 input_string
                                                                        消费两个字符的结果；如果不足两个字符，则解析失败。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>如果 octet_hex 包含不在 %x30-39 或 %x61-66 范围内的字符（即不是
                                                                        0-9 或小写 a-f），则解析失败。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>令 octet 为对 octet_hex 进行十六进制解码（参见 <a
                                                                            href="https://www.rfc-editor.org/rfc/rfc4648.html#section-8">[RFC4648]
                                                                            第 8 节</a>）的结果。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>将 octet 追加到 byte_array。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>如果 char 是 DQUOTE：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>令 unicode_sequence 为将 byte_array 解码为 UTF-8 字符串（参见
                                                                        <a
                                                                            href="https://www.rfc-editor.org/rfc/rfc3629.html#section-3">[UTF8]
                                                                            第 3 节</a>）的结果；如果解码失败，则解析失败。
                                                                    </p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>返回 unicode_sequence。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="avoidbreakafter">
                                                        <p>否则，如果 char 既不是 "%" 也不是 DQUOTE：</p>
                                                    </div>
                                                    <div>
                                                        <ol type="1">
                                                            <li>
                                                                <div>
                                                                    <p>令 byte 为对 char 应用 ASCII 编码的结果。</p>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div>
                                                                    <p>将 byte 追加到 byte_array。</p>
                                                                </div>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </li>
                                            </ol>
                                        </div>
                                    </li>
                                    <li>
                                        <div>
                                            <p>到达 input_string 结尾但未找到闭合的 DQUOTE；解析失败。</p>
                                        </div>
                                    </li>
                                </ol>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="iana">
                    <h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#iana">IANA 注意事项</a>
                    </h2>
                    <div id="rfc.section.5.p.1" class="avoidbreakafter">
                        <p>IANA 已向“超文本传输协议（HTTP）字段名称注册表”添加了以下说明：</p>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <blockquote>
                            <div id="rfc.section.5.p.2.1">
                                <p>“Structured Type” 列指示字段的类型（依据 RFC 9651），如果有的话，可能为 “Dictionary”、 “List” 或 “Item”。</p>
                            </div>
                            <div id="rfc.section.5.p.2.2">
                                <p>注意，以非 ALPHA 或 "*" 字符开头的字段名将无法表示为 Structured Fields Token，因此可能与映射到引用该字段的字段值不兼容。</p>
                            </div>
                        </blockquote>
                    </div>
                    <div id="rfc.section.5.p.3">
                        <p>注册表中新增了一列 “Structured Type”。</p>
                    </div>
                    <div id="rfc.section.5.p.4">
                        <p>表 1（<a href="#existing-fields" title="Existing Fields">Existing Fields</a>）中列出的每个现有注册表条目的指示
                            Structured Type 也已被添加。</p>
                    </div>
                    <div class="table table-condensed table-striped" id="existing-fields">
                        <table class="v3 text-center">
                            <caption>Table 1: 现有字段</caption>
                            <thead>
                                <tr>
                                    <th class="text-left" colspan="1" rowspan="1">Field Name</th>
                                    <th class="text-left" colspan="1" rowspan="1">Structured Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Accept-CH</td>
                                    <td class="text-left" colspan="1" rowspan="1">List</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Cache-Status</td>
                                    <td class="text-left" colspan="1" rowspan="1">List</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">CDN-Cache-Control</td>
                                    <td class="text-left" colspan="1" rowspan="1">Dictionary</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Cross-Origin-Embedder-Policy</td>
                                    <td class="text-left" colspan="1" rowspan="1">Item</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">
                                        Cross-Origin-Embedder-Policy-Report-Only</td>
                                    <td class="text-left" colspan="1" rowspan="1">Item</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Cross-Origin-Opener-Policy</td>
                                    <td class="text-left" colspan="1" rowspan="1">Item</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Cross-Origin-Opener-Policy-Report-Only
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">Item</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Origin-Agent-Cluster</td>
                                    <td class="text-left" colspan="1" rowspan="1">Item</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Priority</td>
                                    <td class="text-left" colspan="1" rowspan="1">Dictionary</td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Proxy-Status</td>
                                    <td class="text-left" colspan="1" rowspan="1">List</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="security">
                    <h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a>&nbsp;<a
                            href="#security">安全注意事项</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>结构化字段定义的大多数类型并未限制大小；因此，极大的字段可能成为一种攻击向量（例如用于消耗资源）。大多数 HTTP 实现对单个字段以及整体报头或尾部节的大小施加限制以缓解此类攻击。
                        </p>
                    </div>
                    <div id="rfc.section.6.p.2">
                        <p>具有注入新 HTTP 字段能力的各方可能会改变结构化字段的含义。在某些情况下，这会导致解析失败，但并不可能在所有此类情况中可靠地导致失败。</p>
                    </div>
                    <div id="rfc.section.6.p.3">
                        <p>显示字符串（Display String）类型可以在未经清理的情况下传递任意 Unicode 代码点；例如，可能包含未分配的代码点、控制点（包括
                            NUL）或非字符。因此，使用显示字符串的应用在向终端用户显示之前需要考虑过滤或转义不受信任的内容等策略。参见 <a href="#RFC8264"><cite
                                    title="PRECIS Framework: Preparation, Enforcement, and Comparison of Internationalized Strings in Application Protocols">[PRECIS]</cite></a>
                            和 <a href="#UNICODE-SECURITY"><cite
                                    title="Unicode Security Considerations">[UNICODE-SECURITY]</cite></a>。</p>
                    </div>
                </section>
                <section class="np">
                    <div id="rfc.references">
                        <h2 id="rfc.section.7"><a href="#rfc.section.7">7.</a> 参考文献</h2>
                        <section id="sec-normative-references">
                            <div id="rfc.references.2">
                                <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a> 规范性参考文献</h3>
                                <dl class="dl-horizontal">
                                    <dt id="RFC9110">[<a href="#RFC9110" class="smpl">HTTP</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP Semantics</a>”, <a
                                            href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a
                                            href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;.
                                    </dd>
                                    <dt id="RFC0020">[<a href="#RFC0020" class="smpl">RFC0020</a>]</dt>
                                    <dd>Cerf, V., “<a href="https://www.rfc-editor.org/rfc/rfc20.html">ASCII format for
                                            network interchange</a>”, <a
                                            href="https://www.rfc-editor.org/info/std80">STD 80</a>, RFC 20, <a
                                            href="https://dx.doi.org/10.17487/RFC0020">DOI 10.17487/RFC0020</a>, October
                                        1969, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc20">https://www.rfc-editor.org/info/rfc20</a>&gt;.
                                    </dd>
                                    <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                    <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words
                                            for use in RFCs to Indicate Requirement Levels</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                            href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March
                                        1997, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                    </dd>
                                    <dt id="RFC4648">[<a href="#RFC4648" class="smpl">RFC4648</a>]</dt>
                                    <dd>Josefsson, S., “<a href="https://www.rfc-editor.org/rfc/rfc4648.html">The
                                            Base16, Base32, and Base64 Data Encodings</a>”, RFC 4648, <a
                                            href="https://dx.doi.org/10.17487/RFC4648">DOI 10.17487/RFC4648</a>, October
                                        2006, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc4648">https://www.rfc-editor.org/info/rfc4648</a>&gt;.
                                    </dd>
                                    <dt id="RFC8174">[<a href="#RFC8174" class="smpl">RFC8174</a>]</dt>
                                    <dd>Leiba, B., “<a href="https://www.rfc-editor.org/rfc/rfc8174.html">Ambiguity of
                                            Uppercase vs Lowercase in RFC 2119 Key Words</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a
                                            href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>, May
                                        2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.
                                    </dd>
                                    <dt id="RFC3629">[<a href="#RFC3629" class="smpl">UTF8</a>]</dt>
                                    <dd>Yergeau, F., “<a href="https://www.rfc-editor.org/rfc/rfc3629.html">UTF-8, a
                                            transformation format of ISO 10646</a>”, <a
                                            href="https://www.rfc-editor.org/info/std63">STD 63</a>, RFC 3629, <a
                                            href="https://dx.doi.org/10.17487/RFC3629">DOI 10.17487/RFC3629</a>,
                                        November 2003, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc3629">https://www.rfc-editor.org/info/rfc3629</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                        <section id="sec-informative-references">
                            <div id="rfc.references.3">
                                <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a> 参考资料（信息性）</h3>
                                <dl class="dl-horizontal">
                                    <dt id="RFC7541">[<a href="#RFC7541" class="smpl">HPACK</a>]</dt>
                                    <dd>Peon, R. and H. Ruellan, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7541.html">HPACK: Header Compression
                                            for HTTP/2</a>”, RFC 7541, <a href="https://dx.doi.org/10.17487/RFC7541">DOI
                                            10.17487/RFC7541</a>, May 2015, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7541">https://www.rfc-editor.org/info/rfc7541</a>&gt;.
                                    </dd>
                                    <dt id="RFC9113">[<a href="#RFC9113" class="smpl">HTTP/2</a>]</dt>
                                    <dd>Thomson, M., Ed. and C. Benfield, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9113.html">HTTP/2</a>”, RFC 9113, <a
                                            href="https://dx.doi.org/10.17487/RFC9113">DOI 10.17487/RFC9113</a>, June
                                        2022, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;.
                                    </dd>
                                    <dt id="IEEE754">[<a href="#IEEE754" class="smpl">IEEE754</a>]</dt>
                                    <dd>IEEE, “<a href="https://ieeexplore.ieee.org/document/8766229">IEEE Standard for
                                            Floating-Point Arithmetic</a>”, IEEE Std 754-2019, <a
                                            href="https://dx.doi.org/10.1109/IEEESTD.2019.8766229">DOI
                                            10.1109/IEEESTD.2019.8766229</a>, <a
                                            href="https://www.worldcat.org/search?q=isbn:9781504459242">ISBN
                                            978-1-5044-5924-2</a>, July 2019, &lt;<a
                                            href="https://ieeexplore.ieee.org/document/8766229">https://ieeexplore.ieee.org/document/8766229</a>&gt;.
                                    </dd>
                                    <dt id="RFC8264">[<a href="#RFC8264" class="smpl">PRECIS</a>]</dt>
                                    <dd>Saint-Andre, P. and M. Blanchet, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8264.html">PRECIS Framework:
                                            Preparation, Enforcement, and Comparison of Internationalized Strings in
                                            Application Protocols</a>”, RFC 8264, <a
                                            href="https://dx.doi.org/10.17487/RFC8264">DOI 10.17487/RFC8264</a>, October
                                        2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8264">https://www.rfc-editor.org/info/rfc8264</a>&gt;.
                                    </dd>
                                    <dt id="RFC5234">[<a href="#RFC5234" class="smpl">RFC5234</a>]</dt>
                                    <dd>Crocker, D., Ed. and P. Overell, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc5234.html">Augmented BNF for Syntax
                                            Specifications: ABNF</a>”, <a
                                            href="https://www.rfc-editor.org/info/std68">STD 68</a>, RFC 5234, <a
                                            href="https://dx.doi.org/10.17487/RFC5234">DOI 10.17487/RFC5234</a>, January
                                        2008, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;.
                                    </dd>
                                    <dt id="RFC7493">[<a href="#RFC7493" class="smpl">RFC7493</a>]</dt>
                                    <dd>Bray, T., Ed., “<a href="https://www.rfc-editor.org/rfc/rfc7493.html">The I-JSON
                                            Message Format</a>”, RFC 7493, <a
                                            href="https://dx.doi.org/10.17487/RFC7493">DOI 10.17487/RFC7493</a>, March
                                        2015, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7493">https://www.rfc-editor.org/info/rfc7493</a>&gt;.
                                    </dd>
                                    <dt id="RFC8259">[<a href="#RFC8259" class="smpl">RFC8259</a>]</dt>
                                    <dd>Bray, T., Ed., “<a href="https://www.rfc-editor.org/rfc/rfc8259.html">The
                                            JavaScript Object Notation (JSON) Data Interchange Format</a>”, <a
                                            href="https://www.rfc-editor.org/info/std90">STD 90</a>, RFC 8259, <a
                                            href="https://dx.doi.org/10.17487/RFC8259">DOI 10.17487/RFC8259</a>,
                                        December 2017, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a>&gt;.
                                    </dd>
                                    <dt id="UNICODE-SECURITY">[<a href="#UNICODE-SECURITY"
                                            class="smpl">UNICODE-SECURITY</a>]</dt>
                                    <dd>Davis, M. and M. Suignard, “<a
                                            href="https://www.unicode.org/reports/tr36/tr36-15.html">Unicode Security
                                            Considerations</a>”, Unicode Technical Report #36, September 2014, &lt;<a
                                            href="https://www.unicode.org/reports/tr36/tr36-15.html">https://www.unicode.org/reports/tr36/tr36-15.html</a>&gt;.<br>最新版本见
                                        &lt;<a
                                            href="https://www.unicode.org/reports/tr36/">https://www.unicode.org/reports/tr36/</a>&gt;。
                                    </dd>
                                </dl>
                            </div>
                        </section>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="faq">
                    <h2 id="rfc.section.A" class="np"><a href="#rfc.section.A">附录 A.</a>&nbsp;<a href="#faq">常见问题</a>
                    </h2>
                    <section id="why-not-json">
                        <h3 id="rfc.section.A.1"><a href="#rfc.section.A.1">A.1.</a>&nbsp;<a href="#why-not-json">为什么不使用
                                JSON？</a></h3>
                        <div id="rfc.section.A.1.p.1">
                            <p>早期关于结构化字段的提案基于 JSON <a href="#RFC8259"><cite
                                        title="The JavaScript Object Notation (JSON) Data Interchange Format">[RFC8259]</cite></a>。
                                然而，为使其适用于 HTTP 字段而对其使用加以约束，要求发送方和接收方实现特定的额外处理。</p>
                        </div>
                        <div id="rfc.section.A.1.p.2">
                            <p>例如，JSON 在大整数和具有重复成员的对象方面存在规范问题。尽管有避免这些问题的建议（例如 <a href="#RFC7493"><cite
                                        title="The I-JSON Message Format">[RFC7493]</cite></a>），但不能完全依赖这些建议。</p>
                        </div>
                        <div id="rfc.section.A.1.p.3">
                            <p>同样，JSON 字符串默认是 Unicode 字符串，这会带来许多潜在的互操作性问题（例如比较操作）。尽管可以建议实现者在不必要时避免非 ASCII 内容，但这很难强制执行。
                            </p>
                        </div>
                        <div id="rfc.section.A.1.p.4">
                            <p>另一个例子是 JSON 能够任意深度嵌套内容。由于由此产生的内存占用可能不适合嵌入式或其他受限的服务器部署，因此有必要以某种方式对其进行限制；然而，现有的 JSON
                                实现没有此类限制，即使指定了限制，也可能会有字段定义需要突破它。</p>
                        </div>
                        <div id="rfc.section.A.1.p.5">
                            <p>由于 JSON 被广泛采用并已有大量实现，很难在所有实现中施加此类额外约束；某些部署将无法强制执行这些约束，从而损害互操作性。简而言之，如果长得像
                                JSON，人们会倾向于对字段值使用 JSON 解析器/序列化器。</p>
                        </div>
                        <div id="rfc.section.A.1.p.6">
                            <p>鉴于结构化字段的主要目标是改善互操作性并简化实现，这些担忧促使采用需要专用解析器和序列化器的格式。</p>
                        </div>
                        <div id="rfc.section.A.1.p.7">
                            <p>此外，普遍存在的观点认为 JSON 在 HTTP 字段中“看起来不合适”。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="implementation-notes">
                    <h2 id="rfc.section.B" class="np"><a href="#rfc.section.B">附录 B.</a>&nbsp;<a
                            href="#implementation-notes">实现说明</a></h2>
                    <div id="rfc.section.B.p.1">
                        <p>本规范的通用实现应暴露顶层的 serialize（<a href="#text-serialize" title="Serializing Structured Fields">第
                                4.1 节</a>）和 parse（<a href="#text-parse" title="Parsing Structured Fields">第 4.2
                                节</a>）函数。它们不必是函数；例如，可以将其实现为一个对象，为每种不同的顶层类型提供方法。</p>
                    </div>
                    <div id="rfc.section.B.p.2">
                        <p>为实现互操作性，通用实现应尽可能完整并严格遵循算法；参见 <a href="#strict" title="Intentionally Strict Processing">第 1.1
                                节</a>。为此，社区正在维护一个通用测试套件，见 &lt;https://github.com/httpwg/structured-field-tests&gt;。</p>
                    </div>
                    <div id="rfc.section.B.p.3">
                        <p>实现者应注意字典（Dictionaries）和参数（Parameters）是保持顺序的映射。有些字段在这些数据类型的顺序上可能不传达语义，但仍应暴露该顺序，以便需要使用它的应用可以访问。
                        </p>
                    </div>
                    <div id="rfc.section.B.p.4">
                        <p>同样，实现在区分 Token 和 String
                            的区别时应保持注意。虽然大多数编程语言具有与其他类型很好映射的内置类型，但可能需要创建一个包装的“token”对象或在函数上使用参数以确保这些类型保持分离。</p>
                    </div>
                    <div id="rfc.section.B.p.5">
                        <p>序列化算法的定义并非在每种情况下严格限制于第 <a href="#types" title="Structured Data Types">3 节</a>
                            中定义的数据类型。例如，小数（Decimals）被设计为接受更广泛的输入并舍入到允许的值。</p>
                    </div>
                    <div id="rfc.section.B.p.6">
                        <p>实现允许对不同结构的大小设置限制，但须遵守为每种类型定义的最小值。当结构超过实现的限制时，该结构的解析或序列化将失败。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="abnf">
                    <h2 id="rfc.section.C" class="np"><a href="#rfc.section.C">附录 C.</a>&nbsp;<a href="#abnf">ABNF</a>
                    </h2>
                    <div id="rfc.section.C.p.1">
                        <p>本节使用扩展巴科斯-诺尔范式（ABNF）表示法 <a href="#RFC5234"><cite
                                    title="Augmented BNF for Syntax Specifications: ABNF">[RFC5234]</cite></a>
                            来示例结构化字段的期望语法。然而，它不能用于验证其语法，因为它未涵盖所有要求。</p>
                    </div>
                    <div id="rfc.section.C.p.2">
                        <p>本节为非规范性。如果解析算法与 ABNF 有分歧，以所指定的算法为准。</p>
                    </div>
                    <div id="rfc.section.C.p.3">
                        <pre class="inline">
sf-list       = list-member *( OWS "," OWS list-member )
list-member   = sf-item / inner-list

inner-list    = "(" *SP [ sf-item *( 1*SP sf-item ) *SP ] ")"
                parameters

parameters    = *( ";" *SP parameter )
parameter     = param-key [ "=" param-value ]
param-key     = key
key           = ( lcalpha / "*" )
                *( lcalpha / DIGIT / "_" / "-" / "." / "*" )
lcalpha       = %x61-7A ; a-z
param-value   = bare-item

sf-dictionary = dict-member *( OWS "," OWS dict-member )
dict-member   = member-key ( parameters / ( "=" member-value ))
member-key    = key
member-value  = sf-item / inner-list

sf-item   = bare-item parameters
bare-item = sf-integer / sf-decimal / sf-string / sf-token
            / sf-binary / sf-boolean / sf-date / sf-displaystring

sf-integer       = ["-"] 1*15DIGIT
sf-decimal       = ["-"] 1*12DIGIT "." 1*3DIGIT
sf-string        = DQUOTE *( unescaped / "%" / bs-escaped ) DQUOTE
sf-token         = ( ALPHA / "*" ) *( tchar / ":" / "/" )
sf-binary        = ":" base64 ":"
sf-boolean       = "?" ( "0" / "1" )
sf-date          = "@" sf-integer
sf-displaystring = "%" DQUOTE *( unescaped / "\" / pct-encoded )
                   DQUOTE

base64       = *( ALPHA / DIGIT / "+" / "/" ) *"="

unescaped    = %x20-21 / %x23-24 / %x26-5B / %x5D-7E
bs-escaped   = "\" ( DQUOTE / "\" )

pct-encoded  = "%" lc-hexdig lc-hexdig
lc-hexdig = DIGIT / %x61-66 ; 0-9, a-f
</pre>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="changes">
                    <h2 id="rfc.section.D" class="np"><a href="#rfc.section.D">附录 D.</a>&nbsp;<a href="#changes">相对于 RFC
                            8941 的更改</a></h2>
                    <div id="rfc.section.D.p.1" class="avoidbreakafter">
                        <p>本次对“HTTP 的结构化字段值”规范的修订做出了如下更改：</p>
                    </div>
                    <div id="rfc.section.D.p.2">
                        <ul>
                            <li>
                                <div>
                                    <p>新增了 Date 结构化类型。（<a href="#date" title="Dates">第 3.3.7 节</a>）</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>不再鼓励在新结构化字段定义中使用 ABNF。（<a href="#specify"
                                            title="Defining New Structured Fields">第 2 节</a>）</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>将 ABNF 移至信息性附录。（<a href="#abnf" title="ABNF">附录 C</a>）</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>在“超文本传输协议（HTTP）字段名称注册表”中添加了“Structured Type”列。（<a href="#iana"
                                            title="IANA Considerations">第 5 节</a>）</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>改进了解析失败处理。（<a href="#text-parse" title="Parsing Structured Fields">第 4.2 节</a>）
                                    </p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>新增了显示字符串（Display String）结构化类型。（<a href="#displaystring" title="Display Strings">第
                                            3.3.8 节</a>）</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="acknowledgements">
                    <h2 id="rfc.section.unnumbered-4" class="np"><a href="#acknowledgements">致谢</a></h2>
                    <div id="rfc.section.unnumbered-4.p.1">
                        <p>非常感谢 Matthew Kerwin 在本规范开发过程中提供的详细反馈和审慎考虑。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.2">
                        <p>同时感谢 Ian Clelland、Roy Fielding、Anne van Kesteren、Kazuho Oku、Evert Pot、Julian
                            Reschke、Martin Thomson、Mike West 和 Jeffrey Yasskin 的贡献。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.authors" class="np">
                    <h2><a href="#rfc.authors">作者地址</a></h2>
                    <address><b>Mark Nottingham</b><br>Cloudflare<br>Prahran, VIC<br>Australia<br>EMail: <a
                            href="mailto:mnot@mnot.net">mnot@mnot.net</a><br>URI: <a
                            href="https://www.mnot.net/">https://www.mnot.net/</a></address>
                    <address><b>Poul-Henning Kamp</b><br>The Varnish Cache Project<br>EMail: <a
                            href="mailto:phk@varnish-cache.org">phk@varnish-cache.org</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>