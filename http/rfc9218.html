<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="zh-hans">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 9218 - HTTP 可扩展优先级方案</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC9218">
    <meta property="og:description" content="Extensible Prioritization Scheme for HTTP">
    <meta property="og:url" content="https://httpwg.org/specs/rfc9218.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Motivation for Replacing RFC 7540 Stream Priorities" href="#rfc.section.2">
    <link rel="Chapter" title="3 Applicability of the Extensible Priority Scheme" href="#rfc.section.3">
    <link rel="Chapter" title="4 Priority Parameters" href="#rfc.section.4">
    <link rel="Chapter" title="5 The Priority HTTP Header Field" href="#rfc.section.5">
    <link rel="Chapter" title="6 Reprioritization" href="#rfc.section.6">
    <link rel="Chapter" title="7 The PRIORITY_UPDATE Frame" href="#rfc.section.7">
    <link rel="Chapter" title="8 Merging Client- and Server-Driven Priority Parameters" href="#rfc.section.8">
    <link rel="Chapter" title="9 Client Scheduling" href="#rfc.section.9">
    <link rel="Chapter" title="10 Server Scheduling" href="#rfc.section.10">
    <link rel="Chapter" title="11 Scheduling and the CONNECT Method" href="#rfc.section.11">
    <link rel="Chapter" title="12 Retransmission Scheduling" href="#rfc.section.12">
    <link rel="Chapter" title="13 Fairness" href="#rfc.section.13">
    <link rel="Chapter" title="14 Why Use an End-to-End Header Field?" href="#rfc.section.14">
    <link rel="Chapter" title="15 Security Considerations" href="#rfc.section.15">
    <link rel="Chapter" title="16 IANA Considerations" href="#rfc.section.16">
    <link rel="Chapter" title="17 References" href="#rfc.section.17">
    <link rel="Appendix" title="Acknowledgements" href="#rfc.section.unnumbered-4">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-priority-12" rel="prev">
    <link href="https://dx.doi.org/10.17487/rfc9218" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9218.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9218">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="Response priority, Stream multiplexing, Reprioritization, Server scheduling">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="一穂, 奥.">
    <meta name="dcterms.creator" content="Pardue, L.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:9218">
    <meta name="dcterms.issued" content="2022-06">
    <meta name="dcterms.abstract"
        content="This document describes a scheme that allows an HTTP client to communicate its preferences for how the upstream server prioritizes responses to its requests, and also allows a server to hint to a downstream intermediary how its responses should be prioritized when they are forwarded. This document defines the Priority header field for communicating the initial priority in an HTTP version-independent manner, as well as HTTP/2 and HTTP/3 frames for reprioritizing responses. These share a common format structure that is designed to provide future extensibility.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This document describes a scheme that allows an HTTP client to communicate its preferences for how the upstream server prioritizes responses to its requests, and also allows a server to hint to a downstream intermediary how its responses should be prioritized when they are forwarded. This document defines the Priority header field for communicating the initial priority in an HTTP version-independent manner, as well as HTTP/2 and HTTP/3 frames for reprioritizing responses. These share a common format structure that is designed to provide future extensibility.">
</head>

<body onload="getMeta(9218,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>9218</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">符号约定</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#motivation">替代 RFC 7540
                                        流优先级 的动机</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#disabling">禁用
                                                RFC 7540 流优先级</a>
                                            <ul>
                                                <li><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#advice-when-using-extensible-priorities-as-the-alternative">在将可扩展优先级用作替代方案时的建议</a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#applicability-of-the-extensible-priority-scheme">可扩展优先级方案的适用性</a></li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#parameters">优先级参数</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#urgency">紧急度</a></li>
                                        <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#incremental">递增</a></li>
                                        <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#new-parameters">定义新的优先级参数</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#register">注册</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#header-field">Priority
                                        HTTP 头字段</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#reprioritization">重新优先级设置</a></li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">PRIORITY_UPDATE
                                        帧</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h2-update-frame">HTTP/2 PRIORITY_UPDATE 帧</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h3-update-frame">HTTP/3 PRIORITY_UPDATE 帧</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#merging">合并客户端和服务器驱动的优先级参数</a></li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#client-scheduling">客户端调度</a></li>
                                <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#server-scheduling">服务器调度</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#intermediaries-with-multiple-backend-connections">具有多个后端连接的中介</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connect-scheduling">CONNECT 方法的调度</a></li>
                                <li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#retransmission-scheduling">重传调度</a></li>
                                <li><a href="#rfc.section.13">13.</a>&nbsp;&nbsp;&nbsp;<a href="#fairness">公平性</a>
                                    <ul>
                                        <li><a href="#rfc.section.13.1">13.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#coalescing">合并中介</a></li>
                                        <li><a href="#rfc.section.13.2">13.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h1-backends">HTTP/1.x 后端</a></li>
                                        <li><a href="#rfc.section.13.3">13.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#intentional-unfairness">故意引入不公平性</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.14">14.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#header-field-rationale">为什么使用端到端头字段？</a></li>
                                <li><a href="#rfc.section.15">15.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">安全性考虑</a></li>
                                <li><a href="#rfc.section.16">16.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana-considerations">IANA 考量</a></li>
                                <li><a href="#rfc.section.17">17.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.17.1">17.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">规范性参考文献</a></li>
                                        <li><a href="#rfc.section.17.2">17.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.3">信息性参考文献</a></li>
                                    </ul>
                                </li>
                                <li><a href="#acknowledgements">致谢</a></li>
                                <li><a href="#rfc.authors">作者地址</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">互联网工程任务组（IETF）</td>
                                <td class="text-right">奥. 一穂</td>
                            </tr>
                            <tr>
                                <td class="text-left">请求注释: 9218</td>
                                <td class="text-right">Fastly</td>
                            </tr>
                            <tr>
                                <td class="text-left">类别: 标准轨道</td>
                                <td class="text-right">L. Pardue</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Cloudflare</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">June 2022</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>HTTP 可扩展优先级方案</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">摘要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>本文档描述了一种方案，允许 HTTP
                            客户端传达其关于上游服务器如何对其请求的响应进行优先级排序的偏好，同时也允许服务器向下游中介提示其响应在转发时应该如何被优先排序。本文档定义了用于以与 HTTP
                            版本无关的方式传达初始优先级的 Priority 头字段，以及用于重新优先级设置响应的 HTTP/2 和 HTTP/3 帧。它们共享一种通用的格式结构，旨在提供未来的可扩展性。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本备忘录状态</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>这是一个互联网标准轨道文档。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>本文档是互联网工程任务组 (IETF) 的产物。它代表了 IETF 社区的共识。该文档已接受公开评审并已获得互联网工程指导组 (IESG) 批准发布。有关互联网标准的更多信息，请参阅
                            <a href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">RFC 7841 第 2 节</a>。
                        </p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>有关本文件当前状态、任何勘误以及如何提供反馈的信息，可在 <a
                                href="https://www.rfc-editor.org/info/rfc9218">https://www.rfc-editor.org/info/rfc9218</a>
                            获得。</p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>)
                            in effect on the date of publication of this document. Please review these documents
                            carefully, as they describe your rights and restrictions with respect to this document. Code
                            Components extracted from this document must include Revised BSD License text as described
                            in Section 4.e of the Trust Legal Provisions and are provided without warranty as described
                            in the Revised BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">符号约定</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#motivation">替代 RFC 7540 流优先级
                                的动机</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#disabling">禁用 RFC
                                        7540 流优先级</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#advice-when-using-extensible-priorities-as-the-alternative">在将可扩展优先级用作替代方案时的建议</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#applicability-of-the-extensible-priority-scheme">可扩展优先级方案的适用性</a></li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#parameters">优先级参数</a>
                            <ul>
                                <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a href="#urgency">紧急度</a>
                                </li>
                                <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#incremental">是否可增量处理</a></li>
                                <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#new-parameters">定义新的优先级参数</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#register">注册</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#header-field">Priority HTTP
                                头字段</a></li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#reprioritization">重新优先级设置</a>
                        </li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">PRIORITY_UPDATE 帧</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h2-update-frame">HTTP/2 PRIORITY_UPDATE 帧</a></li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h3-update-frame">HTTP/3 PRIORITY_UPDATE 帧</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#merging">合并客户端和服务器驱动的优先级参数</a>
                        </li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#client-scheduling">客户端调度</a></li>
                        <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#server-scheduling">服务器调度</a>
                            <ul>
                                <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#intermediaries-with-multiple-backend-connections">具有多个后端连接的中介</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a href="#connect-scheduling">CONNECT
                                方法的调度</a></li>
                        <li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#retransmission-scheduling">重传调度</a></li>
                        <li><a href="#rfc.section.13">13.</a>&nbsp;&nbsp;&nbsp;<a href="#fairness">公平性</a>
                            <ul>
                                <li><a href="#rfc.section.13.1">13.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#coalescing">合并中介</a></li>
                                <li><a href="#rfc.section.13.2">13.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h1-backends">HTTP/1.x 后端</a></li>
                                <li><a href="#rfc.section.13.3">13.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#intentional-unfairness">有意引入不公平性</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.14">14.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#header-field-rationale">为什么使用端到端头字段？</a></li>
                        <li><a href="#rfc.section.15">15.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#security-considerations">安全性考虑</a></li>
                        <li><a href="#rfc.section.16">16.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                考量</a></li>
                        <li><a href="#rfc.section.17">17.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.17.1">17.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">规范性参考文献</a></li>
                                <li><a href="#rfc.section.17.2">17.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.3">信息性参考文献</a></li>
                            </ul>
                        </li>
                        <li><a href="#acknowledgements">致谢</a></li>
                        <li><a href="#rfc.authors">作者地址</a></li>
                    </ul>
                </div>
                <hr class="hidden-print">
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">引言</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>HTTP <a href="#HTTP"><cite title="HTTP Semantics">[HTTP]</cite></a>
                            资源的表示通常与一个或多个其他资源存在关系。客户端经常在处理已检索的表示时发现这些关系，这可能导致进一步的检索请求。同时，这些关系的性质决定了客户端是否会被阻塞而无法继续处理本地可用资源。一个示例是
                            HTML 文档的可视化呈现，文档引用的级联样式表（CSS）文件的检索可能会阻塞渲染。相比之下，内联图像不会阻塞渲染，会在图像数据块到达时增量绘制。</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>HTTP/2 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> 和 HTTP/3 <a
                                href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a>
                            支持在单个连接上复用请求和响应。任何提供复用的协议实现的一个重要功能是能够对发送的信息进行优先级排序。例如，为了尽早为客户端提供有意义的 HTML 文档呈现，HTTP
                            服务器应当优先发送那些对呈现最重要的 HTTP 响应，或这些响应的分块。</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>HTTP/2 和 HTTP/3 服务器可以通过任意方式对并发响应数据的传输进行调度。服务器可以忽略客户端的优先级信号仍然成功提供 HTTP
                            响应。然而，不了解客户端如何发出请求和消费响应的服务器可能会导致客户端应用性能不佳。优先级信号允许客户端传达它们对请求优先级的看法。服务器有其自身的需求，这些需求独立于客户端，因此服务器通常将优先级信号与其他可用信息结合起来，以指导响应数据的调度。
                        </p>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>RFC 7540 <a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol Version 2 (HTTP/2)">[RFC7540]</cite></a>
                            的流优先级允许客户端发送一系列优先级信号来向服务器传达一个“优先级树”；该树的结构表示客户端偏好的相对排序和带权带宽分配。服务器可以将这些优先级信号用作优先级决策的输入。</p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>RFC 7540 流优先级的设计与实现被观察到存在不足，具体说明见 <a href="#motivation"
                                title="Motivation for Replacing RFC 7540 Stream Priorities">第 2 节</a>。因此，HTTP/2 <a
                                href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>
                            在其修订中弃用使用这些流优先级信号。为了保持线上的兼容性，HTTP/2 保留了这些协议元素（参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">HTTP/2 第 5.3.2
                                节</a>），这意味着即使存在替代信号（例如本文档描述的方案），这些元素仍可能被使用。</p>
                    </div>
                    <div id="rfc.section.1.p.6">
                        <p>本文档描述了一种使用绝对值的可扩展 HTTP 响应优先级方案。<a href="#parameters" title="Priority Parameters">第 4 节</a>
                            定义了优先级参数，这是一种标准化且可扩展的优先级信息格式。<a href="#header-field"
                                title="The Priority HTTP Header Field">第 5 节</a> 定义了 Priority HTTP 头字段，用于以与 HTTP
                            版本无关的方式传达初始优先级。客户端可以发送该头字段以指示它们对响应优先级的看法。同样，位于中介之后的服务器可以使用该字段向中介提示优先级。在发送请求之后，客户端可以通过发送对应于
                            HTTP 版本的帧来改变它们对响应优先级的看法（参见 <a href="#reprioritization" title="Reprioritization">第 6
                                节</a>），这些帧如 <a href="#h2-update-frame" title="HTTP/2 PRIORITY_UPDATE Frame">第 7.1 节</a>
                            和 <a href="#h3-update-frame" title="HTTP/3 PRIORITY_UPDATE Frame">第 7.2 节</a> 所定义。</p>
                    </div>
                    <div id="rfc.section.1.p.7">
                        <p>头字段和帧的优先级信号是服务器响应优先级处理的输入。它们仅为建议，并不保证某一响应相对于其他响应在处理或传输顺序上的具体行为。<a href="#server-scheduling"
                                title="Server Scheduling">第 10 节</a> 和 <a href="#retransmission-scheduling"
                                title="Retransmission Scheduling">第 12 节</a> 提供了关于服务器可能如何基于这些信号采取行动的考虑和指导。</p>
                    </div>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#notational-conventions">符号约定</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>本文件中出现的关键字 "<em class="bcp14">MUST</em>", "<em class="bcp14">MUST NOT</em>", "<em
                                    class="bcp14">REQUIRED</em>", "<em class="bcp14">SHALL</em>", "<em
                                    class="bcp14">SHALL NOT</em>", "<em class="bcp14">SHOULD</em>", "<em
                                    class="bcp14">SHOULD NOT</em>", "<em class="bcp14">RECOMMENDED</em>", "<em
                                    class="bcp14">NOT RECOMMENDED</em>", "<em class="bcp14">MAY</em>", 和 "<em
                                    class="bcp14">OPTIONAL</em>" 应按 <span class="nobr">BCP 14</span> <a
                                    href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>
                                与 <a href="#RFC8174"><cite
                                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a>
                                中的定义来解释，且仅当这些词以全部大写形式出现时适用。</p>
                        </div>
                        <div id="rfc.section.1.1.p.2">
                            <p>本文件使用 <a href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3">[STRUCTURED-FIELDS]
                                    第 3 节</a> 中的术语来指定语法和解析："Boolean"、"Dictionary" 和 "Integer"。</p>
                        </div>
                        <div id="rfc.section.1.1.p.3">
                            <p>示例 HTTP 请求和响应采用来自 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> 的 HTTP/2
                                风格格式。</p>
                        </div>
                        <div id="rfc.section.1.1.p.4">
                            <p>本文件使用来自 <a href="#QUIC"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC]</cite></a>
                                的可变长度整数编码。</p>
                        </div>
                        <div id="rfc.section.1.1.p.5">
                            <p>术语 "control stream" 用于描述 HTTP/2 标识符为 0x0 的流和 HTTP/3 控制流；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9114.html#section-6.2.1">HTTP/3 第 6.2.1
                                    节</a>。</p>
                        </div>
                        <div id="rfc.section.1.1.p.6">
                            <p>术语 "HTTP/2 priority signal" 用于描述客户端在 HTTP/2 帧中发送给服务器的优先级信息；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">HTTP/2 第 5.3.2
                                    节</a>。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="motivation">
                    <h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#motivation">替代 RFC
                            7540 流优先级 的动机</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>RFC 7540 流优先级（参见 <a href="https://www.rfc-editor.org/rfc/rfc7540.html#section-5.3">RFC7540 第
                                5.3 节</a>）是一个复杂的系统，客户端通过信号流的依赖关系和权重来描述一个不平衡树。它在部署和互操作性方面存在限制，并已在 HTTP/2
                            的修订中被弃用。为了保持线上的兼容性，HTTP/2 保留了这些元素（见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">HTTP/2 第 5.3.2
                                节</a>），这意味着即使存在替代信号（例如本文档描述的方案），这些元素仍可能被使用。</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>许多 RFC 7540 的服务器实现并不根据 HTTP/2 优先级信号采取行动。</p>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>优先级决策可以使用服务器关于资源的信息或请求生成顺序的信息。例如，了解 HTML 文档结构的服务器可能希望优先传送对用户体验至关重要的图像而不是其他图像。在 RFC 7540
                            中，服务器难以解释客户端发送的优先级信号，因为相同的条件可能导致不同客户端发出非常不同的信号。本文档描述的信号更简单且更受限，需要更少的解释并减少差异。</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>RFC 7540 未定义服务器可用于向中介提供优先级信号的方法。</p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>RFC 7540 流优先级是相对于在同一连接上同时存在的其他请求表达的。在不清楚其他请求如何共享连接的应用中，或在像 HTTP/3 这样跨流没有强顺序保证的协议中，难以将此设计融入应用。
                        </p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>独立研究的实验 <a href="#MARX"><cite
                                    title="Of the Utmost Importance: Resource Prioritization in HTTP/3 over QUIC">[MARX]</cite></a>
                            表明，对于 Web 使用场景，较简单的方案在性能特性上至少可以达到与实践中复杂的 RFC 7540 方案相当的表现。</p>
                    </div>
                    <section id="disabling">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#disabling">禁用 RFC
                                7540 流优先级</a></h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>上述问题和洞见促使提出 RFC 7540 流优先级 的替代方案（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3">HTTP/2 第 5.3 节</a>）。
                            </p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>本文档定义了 SETTINGS_NO_RFC7540_PRIORITIES HTTP/2 设置，以允许端点省略或忽略 HTTP/2 优先级信号（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.3.2">HTTP/2 第 5.3.2
                                    节</a>）。SETTINGS_NO_RFC7540_PRIORITIES 的值 <em class="bcp14">MUST</em> 为 0 或 1。任何非 0 或
                                1 的值 <em class="bcp14">MUST</em> 被视为类型为 PROTOCOL_ERROR 的连接错误（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.4.1">HTTP/2 第 5.4.1
                                    节</a>）。初始值为 0。</p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>如果端点使用 SETTINGS_NO_RFC7540_PRIORITIES，它们 <em class="bcp14">MUST</em> 在第一个 SETTINGS
                                帧中发送该设置。发送者 <em class="bcp14">MUST NOT</em> 在第一个 SETTINGS 帧之后更改
                                SETTINGS_NO_RFC7540_PRIORITIES 的值。检测到更改的接收者 <em class="bcp14">MAY</em> 将其视为类型为
                                PROTOCOL_ERROR 的连接错误。</p>
                        </div>
                        <div id="rfc.section.2.1.p.4">
                            <p>客户端可以通过将 SETTINGS_NO_RFC7540_PRIORITIES 的值设置为 1 来指示它们不使用 HTTP/2 优先级信号。SETTINGS
                                帧先于客户端发送的任何 HTTP/2 优先级信号到达，因此服务器可以在信号到达之前确定是否需要为信号处理分配资源。收到
                                SETTINGS_NO_RFC7540_PRIORITIES 值为 1 的服务器 <em class="bcp14">MUST</em> 忽略 HTTP/2 优先级信号。
                            </p>
                        </div>
                        <div id="rfc.section.2.1.p.5">
                            <p>服务器可以通过发送 SETTINGS_NO_RFC7540_PRIORITIES 值为 1 来指示它们将忽略客户端发送的 HTTP/2 优先级信号。</p>
                        </div>
                        <div id="rfc.section.2.1.p.6">
                            <p>发送 SETTINGS_NO_RFC7540_PRIORITIES 的端点被鼓励使用替代的优先级信号（例如参见 <a href="#header-field"
                                    title="The Priority HTTP Header Field">第 5 节</a> 或 <a href="#h2-update-frame"
                                    title="HTTP/2 PRIORITY_UPDATE Frame">第 7.1 节</a>），但并不要求使用特定的信号类型。</p>
                        </div>
                        <section id="advice-when-using-extensible-priorities-as-the-alternative">
                            <h4 id="rfc.section.2.1.1"><a href="#rfc.section.2.1.1">2.1.1.</a>&nbsp;<a
                                    href="#advice-when-using-extensible-priorities-as-the-alternative">在将可扩展优先级用作替代方案时的建议</a>
                            </h4>
                            <div id="rfc.section.2.1.1.p.1">
                                <p>在从服务器接收到 SETTINGS 帧之前，客户端不知道服务器是否在忽略 HTTP/2 优先级信号。因此，在客户端接收到来自服务器的 SETTINGS 帧之前，客户端
                                    <em class="bcp14">SHOULD</em> 同时发送 HTTP/2 优先级信号和本文优先级方案的信号（参见 <a
                                        href="#header-field" title="The Priority HTTP Header Field">第 5 节</a> 与 <a
                                        href="#h2-update-frame" title="HTTP/2 PRIORITY_UPDATE Frame">第 7.1 节</a>）。
                                </p>
                            </div>
                            <div id="rfc.section.2.1.1.p.2">
                                <p>一旦客户端收到包含 SETTINGS_NO_RFC7540_PRIORITIES 参数且其值为 1 的第一个 SETTINGS 帧，它 <em
                                        class="bcp14">SHOULD</em> 停止发送 HTTP/2 优先级信号。这可以避免发送已知会被忽略的冗余信号。</p>
                            </div>
                            <div id="rfc.section.2.1.1.p.3">
                                <p>类似地，如果客户端收到 SETTINGS_NO_RFC7540_PRIORITIES 值为 0，或该设置参数不存在，则客户端 <em
                                        class="bcp14">SHOULD</em> 停止发送 PRIORITY_UPDATE 帧（<a href="#h2-update-frame"
                                        title="HTTP/2 PRIORITY_UPDATE Frame">第 7.1 节</a>），因为这些帧很可能会被忽略。然而，客户端 <em
                                        class="bcp14">MAY</em> 继续发送 Priority 头字段（<a href="#header-field"
                                        title="The Priority HTTP Header Field">第 5
                                        节</a>），因为它是一个端到端信号，可能对位于服务器后方且与客户端直接连接的节点有用。</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="applicability-of-the-extensible-priority-scheme">
                    <h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a
                            href="#applicability-of-the-extensible-priority-scheme">可扩展优先级方案的适用性</a></h2>
                    <div id="rfc.section.3.p.1">
                        <p>本文档定义的优先级方案主要关注 HTTP 响应消息的优先级（参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-3.4">HTTP Semantics 第 3.4
                                节</a>）。它定义了新的优先级参数（<a href="#parameters" title="Priority Parameters">第 4
                                节</a>）以及传达这些参数的方法（<a href="#header-field" title="The Priority HTTP Header Field">第 5
                                节</a> 与 <a href="#frame" title="The PRIORITY_UPDATE Frame">第 7
                                节</a>），用于将响应的优先级传达给负责对它们进行优先级排序的服务器。<a href="#server-scheduling"
                                title="Server Scheduling">第 10 节</a> 为服务器在结合其他输入和因素时如何依据这些信号采取行动提供了考虑。</p>
                    </div>
                    <div id="rfc.section.3.p.2">
                        <p>CONNECT 方法（参见 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.3.6">HTTP
                                Semantics 第 9.3.6 节</a>）可用于建立隧道。对隧道的信号传递也类似适用；关于服务器端优先级的额外考虑见 <a
                                href="#connect-scheduling" title="Scheduling and the CONNECT Method">第 11 节</a>。</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <p><a href="#client-scheduling" title="Client Scheduling">第 9 节</a>
                            描述了客户端如何可选地将本方案的元素应用于它们生成的请求消息的本地处理。</p>
                    </div>
                    <div id="rfc.section.3.p.4">
                        <p>某些形式的 HTTP 扩展可能会改变 HTTP/2 或 HTTP/3 的流行为或定义新的数据承载机制。这类扩展可以自行定义如何应用本优先级方案。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="parameters">
                    <h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a
                            href="#parameters">优先级参数</a></h2>
                    <div id="rfc.section.4.p.1">
                        <p>优先级信息是一系列键值对，为将来的扩展留出空间。每个键值对表示一个优先级参数。</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <p>Priority HTTP 头字段（<a href="#header-field" title="The Priority HTTP Header Field">第 5
                                节</a>）是在发出请求或响应时以端到端方式传输这组优先级参数的方法。发送请求后，客户端可以通过发送对应 HTTP 版本的 PRIORITY_UPDATE
                            帧来改变其对响应优先级的看法（<a href="#reprioritization" title="Reprioritization">第 6 节</a>），这些帧如 <a
                                href="#h2-update-frame" title="HTTP/2 PRIORITY_UPDATE Frame">第 7.1 节</a> 与 <a
                                href="#h3-update-frame" title="HTTP/3 PRIORITY_UPDATE Frame">第 7.2 节</a>
                            所定义。帧仅在单跳上传输优先级参数。</p>
                    </div>
                    <div id="rfc.section.4.p.3">
                        <p>中介可以在 PRIORITY_UPDATE 帧或 Priority 头字段中消费并产生优先级信号。仅将 Priority 请求头字段传递到下一跳的中介会保留来自客户端的原始端到端信号；见
                            <a href="#header-field-rationale" title="Why Use an End-to-End Header Field?">第 14
                                节</a>。中介可以既转发 Priority 头字段，又额外发送 PRIORITY_UPDATE 帧。这将既保留客户端的端到端信号，又按 <a href="#frame"
                                title="The PRIORITY_UPDATE Frame">第 7 节</a> 的指导指示下一跳使用不同的优先级。替换或添加 Priority
                            请求头字段的中介会覆盖客户端的原始端到端信号，这可能影响请求随后所有接收者的优先级处理。
                        </p>
                    </div>
                    <div id="rfc.section.4.p.4">
                        <p>对于 Priority 头字段和 PRIORITY_UPDATE 帧，优先级参数集合被编码为 Dictionary（参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.2">[STRUCTURED-FIELDS] 第 3.2
                                节</a>）。</p>
                    </div>
                    <div id="rfc.section.4.p.5">
                        <p>本文档定义了紧急度（<span class="tt">u</span>）和是否可增量处理（<span class="tt">i</span>）优先级参数。当接收到不携带这些优先级参数的
                            HTTP 请求时，服务器 <em class="bcp14">SHOULD</em> 视为指定了它们的默认值。</p>
                    </div>
                    <div id="rfc.section.4.p.6">
                        <p>中介可以组合其转发的请求和响应中的信号。注意，响应中省略优先级参数的处理方式与请求中省略时不同；见 <a href="#merging"
                                title="Merging Client- and Server-Driven Priority Parameters">第 8 节</a>。</p>
                    </div>
                    <div id="rfc.section.4.p.7">
                        <p>接收者按 <a href="https://www.rfc-editor.org/rfc/rfc8941.html#section-4.2">[STRUCTURED-FIELDS] 第
                                4.2 节</a> 中描述的方式解析 Dictionary。当 Dictionary 成功解析时，本文档额外要求：未知的优先级参数、取值超出范围的优先级参数，或类型不符的值
                            <em class="bcp14">MUST</em> 被忽略。
                        </p>
                    </div>
                    <section id="urgency">
                        <h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a>&nbsp;<a href="#urgency">紧急度</a>
                        </h3>
                        <div id="rfc.section.4.1.p.1">
                            <p>紧急度（<span class="tt">u</span>）参数值为 Integer（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.1">[STRUCTURED-FIELDS]
                                    第 3.3.1 节</a>），取值范围为 0 到 7（含），按优先级递减排序。默认值为 3。</p>
                        </div>
                        <div id="rfc.section.4.1.p.2">
                            <p>端点使用此参数来传达它们对 HTTP 响应先后顺序的看法。选择的紧急度值可以基于对服务器可能使用该信息按紧急度顺序传输 HTTP 响应的预期。值越小，优先级越高。</p>
                        </div>
                        <div id="rfc.section.4.1.p.3" class="avoidbreakafter">
                            <p>下面的示例展示了一个将紧急度设为 <span class="tt">0</span> 的 CSS 文件请求：</p>
                        </div>
                        <div id="rfc.section.4.1.p.4">
                            <pre>
:method = GET
:scheme = https
:authority = example.net
:path = /style.css
priority = u=0
</pre>
                        </div>
                        <div id="rfc.section.4.1.p.5">
                            <p>获取可能由多个 HTTP 资源组成的文档（例如 HTML）的客户端 <em class="bcp14">SHOULD</em>
                                将主资源分配为默认紧急度级别。该约定允许服务器使用特定于网站的知识来细化紧急度（见 <a href="#merging"
                                    title="Merging Client- and Server-Driven Priority Parameters">第 8 节</a>）。</p>
                        </div>
                        <div id="rfc.section.4.1.p.6">
                            <p>最低紧急度级别（7）保留用于后台任务，例如软件更新的传送。此紧急度级别 <em class="bcp14">SHOULD NOT</em> 用于获取对用户交互有任何影响的响应。
                            </p>
                        </div>
                    </section>
                    <section id="incremental">
                        <h3 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a>&nbsp;<a
                                href="#incremental">是否可增量处理</a></h3>
                        <div id="rfc.section.4.2.p.1">
                            <p>是否可增量处理（<span class="tt">i</span>）参数值为 Boolean（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc8941.html#section-3.3.6">[STRUCTURED-FIELDS]
                                    第 3.3.6 节</a>）。它表明 HTTP 响应是否可以被增量处理，即当响应的分块到达时是否能提供有意义的部分输出。</p>
                        </div>
                        <div id="rfc.section.4.2.p.2">
                            <p>是否可增量处理参数的默认值为 <span class="tt">false</span>（<span class="tt">0</span>）。</p>
                        </div>
                        <div id="rfc.section.4.2.p.3">
                            <p>如果客户端对多个并发请求将是否可增量处理参数设为 <span
                                    class="tt">false</span>，则同时为这些响应提供相同紧急度的并发服务没有好处，因为客户端不会对这些响应进行增量处理。按请求生成的顺序逐一提供非增量响应被认为是最佳策略。
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.4">
                            <p>如果客户端对多个并发请求将是否可增量处理参数设为 <span
                                    class="tt">true</span>，则并发提供具有相同紧急度的请求可能是有益的。这样做会分配连接带宽，这意味着每个响应完成的时间会更长。增量交付在多个部分响应在完整响应可用之前可以为客户端提供一些价值时最为有用。
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.5">
                            <p>下面的示例展示了一个对 JPEG 文件的请求，其紧急度参数设为 <span class="tt">5</span>，且是否可增量处理参数设为 <span
                                    class="tt">true</span>。</p>
                        </div>
                        <div id="rfc.section.4.2.p.6">
                            <pre>
:method = GET
:scheme = https
:authority = example.net
:path = /image.jpg
priority = u=5, i
</pre>
                        </div>
                    </section>
                    <section id="new-parameters">
                        <h3 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a>&nbsp;<a
                                href="#new-parameters">定义新的优先级参数</a></h3>
                        <div id="rfc.section.4.3.p.1">
                            <p>在试图定义新的优先级参数时，必须注意不要对不理解这些新参数的现有端点或中介的优先级行为造成不利干扰。由于未知的优先级参数会被忽略，新的优先级参数不应以不向后兼容或不可回退安全的方式更改或修改紧急度（见
                                <a href="#urgency" title="Urgency">第 4.1 节</a>）或是否可增量处理（见 <a href="#incremental"
                                    title="Incremental">第 4.2 节</a>）。
                            </p>
                        </div>
                        <div id="rfc.section.4.3.p.2">
                            <p>例如，如果需要比八个紧急度级别提供更细粒度，可以使用额外的优先级参数对范围进行细分。不识别该参数的实现仍可以安全地继续使用较粗粒度的八个级别。</p>
                        </div>
                        <div id="rfc.section.4.3.p.3">
                            <p>或者，可以增强紧急度。例如，图形用户代理可以发送一个 <span class="tt">visible</span> 优先级参数来指示所请求的资源是否在视口内。</p>
                        </div>
                        <div id="rfc.section.4.3.p.4">
                            <p>通用优先级参数优于供应商特定、应用特定或部署特定的值。如果社区无法就通用值达成一致，则参数名称应相应地更具体（例如，使用标识供应商、应用或部署的前缀）。</p>
                        </div>
                        <section id="register">
                            <h4 id="rfc.section.4.3.1"><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;<a
                                    href="#register">注册</a></h4>
                            <div id="rfc.section.4.3.1.p.1">
                                <p>新的优先级参数可以通过在 “HTTP Priority” 注册表中注册来定义。该注册表管理用于 Dictionary 中的键（短文本字符串）。由于每个 HTTP
                                    请求都可能具有相关的优先级信号，因此短键长度（尤其是单字符字符串）是有价值的。为鼓励扩展同时避免对有吸引力的键值发生意外冲突，“HTTP Priority”
                                    注册表依据键长度采用两种注册策略。</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.2">
                                <ul>
                                    <li>键长度为单个字符的优先级参数的注册请求使用 Specification Required 策略，依据 <a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.6">RFC8126 第 4.6
                                            节</a>。</li>
                                    <li>键长度大于一个字符的优先级参数的注册请求使用 Expert Review 策略，依据 <a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.5">RFC8126 第 4.5
                                            节</a>。规范性文档是受欢迎的但非必需。</li>
                                </ul>
                            </div>
                            <div id="rfc.section.4.3.1.p.3">
                                <p>在审查注册请求时，指定的专家可以考虑 <a href="#new-parameters"
                                        title="Defining New Priority Parameters">第 4.3 节</a> 中提供的额外指导，但不得以此作为拒绝的依据。</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.4" class="avoidbreakafter">
                                <p>注册请求应使用以下模板：</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.5">
                                <dl>
                                    <dt>Name:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>[与参数键匹配的优先级参数名称]</div>
                                    </dd>
                                    <dt>Description:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>[关于优先级参数语义和值的描述]</div>
                                    </dd>
                                    <dt>Reference:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>[定义此优先级参数的规范文档]</div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.4.3.1.p.6">
                                <p>有关将注册请求发送到何处的详细信息，请参阅注册表 &lt;<a
                                        href="https://www.iana.org/assignments/http-priority">https://www.iana.org/assignments/http-priority</a>&gt;。
                                </p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="header-field">
                    <h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a
                            href="#header-field">Priority HTTP 头字段</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>Priority HTTP 头字段是一个承载优先级参数的 Dictionary（参见 <a href="#parameters"
                                title="Priority Parameters">第 4 节</a>）。它可以出现在请求和响应中。它是一个端到端的信号，用来表示端点关于 HTTP
                            响应应如何被优先处理的观点。<a href="#merging"
                                title="Merging Client- and Server-Driven Priority Parameters">第 8 节</a>
                            描述了中介如何合并来自客户端和服务器的优先级信息。客户端不能将 Priority 响应头字段的出现或省略解释为任何优先级处理已发生的确认。关于端点如何基于 Priority
                            头字段值采取动作的指导见 <span class="nobr">第 </span><a href="#client-scheduling"
                                title="Client Scheduling">9 节</a> 和 <a href="#server-scheduling"
                                title="Server Scheduling">10 节</a>。</p>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <p>带有 Priority 头字段的 HTTP 请求可能会被缓存并在后续请求中重用；参见 <a href="#CACHING"><cite
                                    title="HTTP Caching">[CACHING]</cite></a>。当源服务器基于收到的 HTTP 请求的属性生成 Priority
                            响应头字段时，服务器应通过使用控制缓存行为的头字段（例如 Cache-Control、Vary）来控制缓存响应的可缓存性或适用性。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="reprioritization">
                    <h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a>&nbsp;<a
                            href="#reprioritization">重新优先级</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>在客户端发送请求之后，改变响应的优先级可能是有益的。例如，浏览器可能会为一个 JavaScript 文件发出预取请求，并在 Priority 请求头字段中将紧急度参数设置为 <span
                                class="tt">u=7</span>（后台）。然后，当用户导航到引用该 JavaScript 文件的页面时，在预取进行中，浏览器可以发送一个
                            reprioritization 信号，将 Priority 字段值设置为 <span class="tt">u=0</span>。PRIORITY_UPDATE 帧（<a
                                href="#frame" title="The PRIORITY_UPDATE Frame">第 7 节</a>）可以用于此类重新优先级设置。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="frame">
                    <h2 id="rfc.section.7" class="np"><a href="#rfc.section.7">7.</a>&nbsp;<a
                            href="#frame">PRIORITY_UPDATE 帧</a></h2>
                    <div id="rfc.section.7.p.1">
                        <p>本文档为 HTTP/2 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> 和 HTTP/3 <a
                                href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a> 指定了一种新的 PRIORITY_UPDATE
                            帧。该帧携带优先级参数并基于版本特定的标识符引用被优先化的目标。在 HTTP/2 中，此标识符为 stream ID；在 HTTP/3 中，标识符可以是 stream ID 或
                            push ID。与 Priority 头字段不同，PRIORITY_UPDATE 帧是按跳（hop-by-hop）的信号。</p>
                    </div>
                    <div id="rfc.section.7.p.2">
                        <p>客户端在控制流上发送 PRIORITY_UPDATE 帧，使其可以独立于承载响应的流而发送。这意味着它们可用于对响应或推送流重新优先级，或在替代 Priority
                            头字段的情况下指示响应的初始优先级。</p>
                    </div>
                    <div id="rfc.section.7.p.3">
                        <p>PRIORITY_UPDATE 帧在 Priority Field Value 字段中传达完整的一组优先级参数。省略某个优先级参数表示使用其默认值。无法解析 Priority Field
                            Value <em class="bcp14">MAY</em> 被视为连接错误。在 HTTP/2 中，该错误类型为 PROTOCOL_ERROR；在 HTTP/3 中，该错误类型为
                            H3_GENERAL_PROTOCOL_ERROR。</p>
                    </div>
                    <div id="rfc.section.7.p.4">
                        <p>客户端 <em class="bcp14">MAY</em> 在其引用的流打开之前发送 PRIORITY_UPDATE 帧（HTTP/2 推送流除外；参见 <a
                                href="#h2-update-frame" title="HTTP/2 PRIORITY_UPDATE Frame">第 7.1 节</a>）。此外，HTTP/3
                            在流之间不提供保证的 ordering，这可能导致帧被比预期更早接收。无论哪种情况都会导致竞争条件，即服务器接收到引用尚未打开的请求流的 PRIORITY_UPDATE
                            帧。为了解决此类情况，就调度而言，最近接收到的 PRIORITY_UPDATE 帧可以被视为最新信息并覆盖任何其他信号。服务器 <em
                                class="bcp14">SHOULD</em> 缓冲最近接收到的 PRIORITY_UPDATE 帧，并在所引用的流打开后应用它。为每个流保存
                            PRIORITY_UPDATE 帧会消耗服务器资源，服务器可以通过本地实现策略对其进行限制。尽管可以发送任意数量的 PRIORITY_UPDATE
                            帧，但仅存储最近接收到的帧可以限制资源占用。</p>
                    </div>
                    <section id="h2-update-frame">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#h2-update-frame">HTTP/2 PRIORITY_UPDATE 帧</a></h3>
                        <div id="rfc.section.7.1.p.1">
                            <p>HTTP/2 PRIORITY_UPDATE 帧（type=0x10）由客户端用于指示响应的初始优先级，或对响应或推送流重新优先级。它携带响应的 stream ID 以及以
                                ASCII 文本表示的优先级，使用与 Priority 头字段值相同的表示方法。</p>
                        </div>
                        <div id="rfc.section.7.1.p.2">
                            <p>PRIORITY_UPDATE 帧头部中的 Stream Identifier 字段（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.1.1">HTTP/2 第 5.1.1
                                    节</a>）<em class="bcp14">MUST</em> 为零（0x0）。接收到具有其他值的 PRIORITY_UPDATE 帧 <em
                                    class="bcp14">MUST</em> 被视为类型为 PROTOCOL_ERROR 的连接错误。</p>
                        </div>
                        <div id="fig-h2-reprioritization-frame"></div>
                        <div id="rfc.figure.1">
                            <div>
                                <pre>
HTTP/2 PRIORITY_UPDATE Frame {
  Length (24),
  Type (8) = 0x10,

  Unused Flags (8),

  Reserved (1),
  Stream Identifier (31),

  Reserved (1),
  Prioritized Stream ID (31),
  Priority Field Value (..),
}
</pre>
                            </div>
                        </div>
                        <p class="figure">图 1：HTTP/2 PRIORITY_UPDATE 帧格式</p>
                        <div id="rfc.section.7.1.p.3" class="avoidbreakafter">
                            <p>Length、Type、Unused Flag(s)、Reserved 和 Stream Identifier 字段在 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-4">HTTP/2 第 4 节</a>
                                中有描述。PRIORITY_UPDATE 帧的负载包含以下附加字段：</p>
                        </div>
                        <div id="rfc.section.7.1.p.4">
                            <dl>
                                <dt>Prioritized Stream ID:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>用于指示被优先更新目标的 31 位流标识符。</div>
                                </dd>
                                <dt>Priority Field Value:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>以 ASCII 文本表示、使用 Structured Fields 编码的优先级更新值。此表示方法与 Priority 头字段值相同。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.7.1.p.5">
                            <p>当 PRIORITY_UPDATE 帧应用于请求流时，客户端 <em class="bcp14">SHOULD</em> 提供一个指向处于 "open"、"half-closed
                                (local)" 或 "idle" 状态的流的 prioritized stream ID（即可能仍会接收数据的流）。服务器可以丢弃那些其 prioritized stream
                                ID 指向 "half-closed (local)" 或 "closed" 状态的帧（即不会再发送更多数据的流）。已被优先但仍处于 "idle"
                                状态的流的数量，加上处于活动状态的流的数量（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-5.1.2">HTTP/2 第 5.1.2
                                    节</a>），<em class="bcp14">MUST NOT</em> 超过 SETTINGS_MAX_CONCURRENT_STREAMS 参数的值。收到此类
                                PRIORITY_UPDATE 的服务器 <em class="bcp14">MUST</em> 使用类型为 PROTOCOL_ERROR 的连接错误进行响应。</p>
                        </div>
                        <div id="rfc.section.7.1.p.6">
                            <p>当 PRIORITY_UPDATE 帧应用于推送流时，客户端 <em class="bcp14">SHOULD</em> 提供一个指向处于 "reserved (remote)"
                                或 "half-closed (local)" 状态的流的 prioritized stream ID。服务器可以丢弃那些其 prioritized stream ID 指向
                                "closed" 状态的帧。客户端 <em class="bcp14">MUST NOT</em> 提供指向处于 "idle" 状态的推送流的 prioritized
                                stream ID。收到针对处于 "idle" 状态的推送流的 PRIORITY_UPDATE 的服务器 <em class="bcp14">MUST</em> 使用类型为
                                PROTOCOL_ERROR 的连接错误进行响应。</p>
                        </div>
                        <div id="rfc.section.7.1.p.7">
                            <p>如果接收到的 PRIORITY_UPDATE 帧的 prioritized stream ID 为 0x0，接收方 <em class="bcp14">MUST</em>
                                使用类型为 PROTOCOL_ERROR 的连接错误进行响应。</p>
                        </div>
                        <div id="rfc.section.7.1.p.8">
                            <p>服务器 <em class="bcp14">MUST NOT</em> 发送 PRIORITY_UPDATE 帧。如果客户端接收到 PRIORITY_UPDATE 帧，则其
                                <em class="bcp14">MUST</em> 使用类型为 PROTOCOL_ERROR 的连接错误进行响应。
                            </p>
                        </div>
                    </section>
                    <section id="h3-update-frame">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a
                                href="#h3-update-frame">HTTP/3 PRIORITY_UPDATE 帧</a></h3>
                        <div id="rfc.section.7.2.p.1">
                            <p>HTTP/3 PRIORITY_UPDATE 帧（type=0xF0700 或
                                0xF0701）由客户端用于指示响应的初始优先级，或对响应或推送流重新优先级。它携带被优先化元素的标识符以及以 ASCII 文本表示的更新优先级，使用与 Priority
                                头字段值相同的表示方法。type=0xF0700 的 PRIORITY_UPDATE 用于请求流，而 type=0xF0701 的 PRIORITY_UPDATE 用于推送流。
                            </p>
                        </div>
                        <div id="rfc.section.7.2.p.2">
                            <p>PRIORITY_UPDATE 帧 <em class="bcp14">MUST</em> 在客户端控制流上发送（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9114.html#section-6.2.1">HTTP/3 第 6.2.1
                                    节</a>）。在客户端控制流以外的流上接收到 PRIORITY_UPDATE 帧 <em class="bcp14">MUST</em> 被视为类型为
                                H3_FRAME_UNEXPECTED 的连接错误。</p>
                        </div>
                        <div id="fig-h3-reprioritization-frame"></div>
                        <div id="rfc.figure.2">
                            <div>
                                <pre>
HTTP/3 PRIORITY_UPDATE Frame {
  Type (i) = 0xF0700..0xF0701,
  Length (i),
  Prioritized Element ID (i),
  Priority Field Value (..),
}
</pre>
                            </div>
                        </div>
                        <p class="figure">图 2：HTTP/3 PRIORITY_UPDATE 帧</p>
                        <div id="rfc.section.7.2.p.3" class="avoidbreakafter">
                            <p>PRIORITY_UPDATE 帧的负载具有以下字段：</p>
                        </div>
                        <div id="rfc.section.7.2.p.4">
                            <dl>
                                <dt>Prioritized Element ID:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>作为优先级更新目标的 stream ID 或 push ID。</div>
                                </dd>
                                <dt>Priority Field Value:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>以 ASCII 文本表示、使用 Structured Fields 编码的优先级更新值。此表示方法与 Priority 头字段值相同。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.7.2.p.5">
                            <p>请求流变体的 PRIORITY_UPDATE（type=0xF0700）<em class="bcp14">MUST</em> 引用一个请求流。如果服务器收到对非请求流的
                                PRIORITY_UPDATE（type=0xF0700），则 <em class="bcp14">MUST</em> 将其视为类型为 H3_ID_ERROR 的连接错误。该
                                stream ID <em class="bcp14">MUST</em> 在客户端发起的双向流限制内。如果服务器收到对超出流限制的 stream ID 的
                                PRIORITY_UPDATE（type=0xF0700），则 <em class="bcp14">SHOULD</em> 将其视为类型为 H3_ID_ERROR
                                的连接错误。生成错误并非强制性要求，因为 HTTP/3 实现可能在确定 QUIC 层施加的活动流并发限制时存在实际障碍。</p>
                        </div>
                        <div id="rfc.section.7.2.p.6">
                            <p>推送流变体的 PRIORITY_UPDATE（type=0xF0701）<em class="bcp14">MUST</em> 引用一个已承诺的推送流。如果服务器收到带有大于最大
                                push ID 或尚未被承诺的 push ID 的 PRIORITY_UPDATE（type=0xF0701），则 <em class="bcp14">MUST</em>
                                将其视为类型为 H3_ID_ERROR 的连接错误。</p>
                        </div>
                        <div id="rfc.section.7.2.p.7">
                            <p>服务器 <em class="bcp14">MUST NOT</em> 发送任一类型的 PRIORITY_UPDATE 帧。如果客户端接收到 PRIORITY_UPDATE
                                帧，则 <em class="bcp14">MUST</em> 将其视为类型为 H3_FRAME_UNEXPECTED 的连接错误。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="merging">
                    <h2 id="rfc.section.8" class="np"><a href="#rfc.section.8">8.</a>&nbsp;<a
                            href="#merging">合并客户端和服务器驱动的优先级参数</a></h2>
                    <div id="rfc.section.8.p.1">
                        <p>客户端并不总是最清楚哪些 HTTP 响应应被优先处理。服务器可能掌握额外的信息，可以与客户端表明的优先级相结合，以改进响应的优先级排序。例如，HTML
                            文档的使用可能非常依赖某个内联图像；此类依赖关系通常由服务器最清楚。或者，当服务器收到对字体 <a href="#RFC8081"><cite
                                    title="The 'font' Top-Level Media Type">[RFC8081]</cite></a>
                            和图像具有相同紧急度的请求时，服务器可能会优先传送字体，以便可视客户端能尽早呈现文本信息。</p>
                    </div>
                    <div id="rfc.section.8.p.2">
                        <p>源可以使用 Priority 响应头字段来指示其关于 HTTP 响应应如何被优先处理的观点。转发 HTTP 响应的中介可以将 Priority 响应头字段中发现的优先级参数与客户端的
                            Priority 请求头字段结合，作为其优先级处理过程的输入。对于如何合并优先级不提供具体指导；这由实现决定。</p>
                    </div>
                    <div id="rfc.section.8.p.3">
                        <p>HTTP 响应中缺少优先级参数表示服务器不希望更改客户端提供的值。这与请求头字段不同：在请求头字段中省略优先级参数表示使用其默认值（参见 <a href="#parameters"
                                title="Priority Parameters">第 4 节</a>）。</p>
                    </div>
                    <div id="rfc.section.8.p.4">
                        <p>作为一个非规范性示例，当客户端发送一个紧急度参数为 <span class="tt">5</span>、是否可增量处理参数为 <span class="tt">true</span> 的
                            HTTP 请求时：</p>
                    </div>
                    <div id="rfc.section.8.p.5">
                        <pre>
:method = GET
:scheme = https
:authority = example.net
:path = /menu.png
priority = u=5, i
</pre>
                    </div>
                    <div id="rfc.section.8.p.6">
                        <p>并且源响应为</p>
                    </div>
                    <div id="rfc.section.8.p.7">
                        <pre>
:status = 200
content-type = image/png
priority = u=1
</pre>
                    </div>
                    <div id="rfc.section.8.p.8">
                        <p>中介可能会将其对紧急度的理解从 <span class="tt">5</span> 更改为 <span
                                class="tt">1</span>，因为它更倾向于使用服务器提供的值。增量值继续为 <span
                                class="tt">true</span>，即客户端指定的值，因为服务器未指定增量参数（<span class="tt">i</span>）。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="client-scheduling">
                    <h2 id="rfc.section.9" class="np"><a href="#rfc.section.9">9.</a>&nbsp;<a
                            href="#client-scheduling">客户端调度</a></h2>
                    <div id="rfc.section.9.p.1">
                        <p>客户端 <em class="bcp14">MAY</em> 使用优先级值对其发起的请求在本地进行处理或调度选择。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="server-scheduling">
                    <h2 id="rfc.section.10" class="np"><a href="#rfc.section.10">10.</a>&nbsp;<a
                            href="#server-scheduling">服务器调度</a></h2>
                    <div id="rfc.section.10.p.1">
                        <p>通常，HTTP
                            服务器尽可能提前发送所有响应是有益的。然而，当在单个连接上为多个请求提供服务时，请求之间可能会为诸如连接带宽等资源发生竞争。本节描述了在存在此类竞争时，服务器可如何调度竞争响应的发送顺序的考虑事项。
                        </p>
                    </div>
                    <div id="rfc.section.10.p.2">
                        <p>服务器调度是一个基于多种输入的优先级过程，优先级信号只是输入的一种形式。实现选择或部署环境等因素也会起作用。任何给定连接很可能具有许多动态变化。出于这些原因，不可能描述通用的调度算法。本文档为服务器可能如何基于优先级参数采取行动提供了一些基本的、非详尽的建议，但并未详细描述服务器如何将优先级信号与其他因素结合。端点不能依赖于基于优先级信号的特定处理。表达优先级仅为建议。
                        </p>
                    </div>
                    <div id="rfc.section.10.p.3">
                        <p>在可行时，建议服务器尊重紧急度参数（<a href="#urgency" title="Urgency">第 4.1 节</a>），在可能时先发送更高紧急度的响应。</p>
                    </div>
                    <div id="rfc.section.10.p.4">
                        <p>增量参数指示客户端如何在字节到达时处理响应。建议在可行时，服务器尊重增量参数（<a href="#incremental" title="Incremental">第 4.2
                                节</a>）。</p>
                    </div>
                    <div id="rfc.section.10.p.5">
                        <p>具有相同紧急度的非增量响应 <em class="bcp14">SHOULD</em> 通过按照流 ID
                            的升序优先分配带宽来提供，这对应于客户端发出请求的顺序。这样做可确保客户端可以使用请求顺序来影响响应顺序。</p>
                    </div>
                    <div id="rfc.section.10.p.6">
                        <p>具有相同紧急度的增量响应 <em class="bcp14">SHOULD</em>
                            通过在它们之间共享带宽来提供。增量响应的消息内容会随着部分或分块的接收被使用。客户端可能更受益于接收所有这些资源的一部分，而不是单个资源的全部。对于提高性能所需的资源部分大小因资源类型而异：有些资源类型在较早位置包含关键元素；有些资源可以渐进使用。该方案未对服务器应如何使用大小、类型或任何其他输入来决定优先级进行明确要求。
                        </p>
                    </div>
                    <div id="rfc.section.10.p.7" class="avoidbreakafter">
                        <p>在某些情形下，服务器需要在相同紧急度级别下调度多个增量和非增量响应。严格遵守基于紧急度和请求生成顺序的调度指导可能会导致客户端的次优结果，因为早期的非增量响应可能阻止随后发出的增量响应被提供。以下为此类挑战的示例：
                        </p>
                    </div>
                    <div id="rfc.section.10.p.8">
                        <ol type="1">
                            <li>在相同紧急度级别下，先有一个对大型资源的非增量请求，随后是对小资源的增量请求。</li>
                            <li>在相同紧急度级别下，先有一个长度不确定的增量请求，随后是对大型资源的非增量请求。</li>
                        </ol>
                    </div>
                    <div id="rfc.section.10.p.9">
                        <p>建议服务器在可能的情况下避免此类饥饿。实现避免的方法由实现者决定。例如，服务器可以基于内容大小等信息预先发送特定增量类型的响应。</p>
                    </div>
                    <div id="rfc.section.10.p.10">
                        <p>服务器推送的最佳调度很难确定，尤其是在被推送的资源与活动并发请求发生竞争时。服务器在调度时可以考虑多种因素，例如被推送资源的类型或大小、触发推送的请求的优先级、活动并发响应的计数、其他活动并发响应的优先级等。对于如何最好地应用这些因素没有通用指导。过于简单的服务器很容易以过高的优先级推送并阻塞客户端请求，或以过低的优先级推送并延迟响应，从而抵消服务器推送的预期目标。
                        </p>
                    </div>
                    <div id="rfc.section.10.p.11">
                        <p>优先级信号是服务器推送调度的一个因素。参数默认值的概念在此略有不同，因为没有明确的客户端信号初始优先级。服务器可以应用源响应中提供的优先级信号；见 <a href="#merging"
                                title="Merging Client- and Server-Driven Priority Parameters">第 8 节</a>
                            中关于合并的指导。在缺少源信号的情况下，应用默认参数值可能并非最佳。无论服务器以何种方式决定调度被推送的响应，它都可以通过在 PUSH_PROMISE 或 HEADERS 帧中包含
                            Priority 字段向客户端指示预期优先级。</p>
                    </div>
                    <section id="intermediaries-with-multiple-backend-connections">
                        <h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a>&nbsp;<a
                                href="#intermediaries-with-multiple-backend-connections">具有多个后端连接的中介</a></h3>
                        <div id="rfc.section.10.1.p.1">
                            <p>为一个 HTTP
                                连接提供服务的中介可能会将请求分散到多个后端连接。当其严格应用优先级规则时，低优先级请求在高优先级请求在飞行中的情况下无法取得进展。此类阻塞可能会传播到后端连接，对端可能将其解释为连接停滞。端点通常会实施防止停滞的保护措施，例如在一定时间后突然关闭连接。为减少发生此类情况的可能性，中介可以避免严格遵循优先级，而是为所有正在转发的请求分配少量带宽，以便每个请求都能随时间取得一些进展。
                            </p>
                        </div>
                        <div id="rfc.section.10.1.p.2">
                            <p>同样，服务器 <em class="bcp14">SHOULD</em> 为作为隧道的流分配一定量的带宽。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="connect-scheduling">
                    <h2 id="rfc.section.11" class="np"><a href="#rfc.section.11">11.</a>&nbsp;<a
                            href="#connect-scheduling">CONNECT 方法的调度</a></h2>
                    <div id="rfc.section.11.p.1">
                        <p>当流承载 CONNECT 请求时，本文档中的调度指导适用于该流上的帧。发出多个 CONNECT 请求的客户端可以将增量参数设置为 <span
                                class="tt">true</span>。实现了增量参数处理建议的服务器（<a href="#server-scheduling"
                                title="Server Scheduling">第 10 节</a>）很可能会公平地调度这些请求，防止一个 CONNECT 流阻塞其他流。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="retransmission-scheduling">
                    <h2 id="rfc.section.12" class="np"><a href="#rfc.section.12">12.</a>&nbsp;<a
                            href="#retransmission-scheduling">重传调度</a></h2>
                    <div id="rfc.section.12.p.1">
                        <p>诸如 TCP 和 QUIC 的传输协议通过检测分组丢失并重传丢失的信息来提供可靠性。除了 <a href="#server-scheduling"
                                title="Server Scheduling">第 10 节</a> 中的考虑外，重传数据的调度可能会与新数据竞争。本节余下部分讨论在使用 QUIC 时的有关考虑。</p>
                    </div>
                    <div id="rfc.section.12.p.2">
                        <p><a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-13.3">QUIC 第 13.3 节</a> 说明：“端点
                            <em class="bcp14">SHOULD</em> 优先重传数据而不是发送新数据，除非应用指定的优先级另有指示”。当 HTTP/3 应用使用本文档定义的优先级方案并且 QUIC
                            传输实现支持应用指示的流优先级时，一个在调度新数据和重传数据时考虑流的相对优先级的传输实现可能更符合应用的预期。然而，对于传输如何基于这些信息选择调度并没有要求，因为该决定取决于若干因素和权衡。传输可能会优先为高紧急度流发送新数据而不是为低优先级流重传数据，或者无论紧急度如何都优先重传数据。
                        </p>
                    </div>
                    <div id="rfc.section.12.p.3">
                        <p><a href="https://www.rfc-editor.org/rfc/rfc9002.html#section-6.2.4">QUIC-RECOVERY 第 6.2.4
                                节</a> 还强调在探测超时（Probe Timeout）计时器到期后发送探测分组时关于应用优先级的考虑。支持应用指示优先级的 QUIC
                            实现可能会在选择探测数据时使用流的相对优先级。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="fairness">
                    <h2 id="rfc.section.13" class="np"><a href="#rfc.section.13">13.</a>&nbsp;<a
                            href="#fairness">公平性</a></h2>
                    <div id="rfc.section.13.p.1">
                        <p>通常，HTTP 实现依赖底层传输在竞争带宽的连接之间维持公平性。当中介在客户端连接上接收 HTTP
                            请求时，会将它们转发到后端连接。根据中介如何将请求合并或拆分到不同的后端连接，不同的客户端可能会体验到不同的性能。如果中介在转发请求时也使用优先级信号，这种差异可能会扩大。<span
                                class="nobr">第 </span><a href="#coalescing" title="Coalescing Intermediaries">13.1 节</a>
                            和 <a href="#h1-backends" title="HTTP/1.x Back Ends">13.2 节</a> 讨论了减缓此类不公平扩大的措施。</p>
                    </div>
                    <div id="rfc.section.13.p.2">
                        <p>相反，<a href="#intentional-unfairness" title="Intentional Introduction of Unfairness">第 13.3
                                节</a> 讨论了服务器如何可能根据优先级信号有意地对某些连接分配不等的带宽。</p>
                    </div>
                    <section id="coalescing">
                        <h3 id="rfc.section.13.1"><a href="#rfc.section.13.1">13.1.</a>&nbsp;<a
                                href="#coalescing">合并中介</a></h3>
                        <div id="rfc.section.13.1.p.1">
                            <p>当中介将来自多个客户端的 HTTP 请求合并为到后端服务器的一条 HTTP/2 或 HTTP/3 连接时，来自某一客户端的请求可能携带表明比其他客户端更高优先级的信号。</p>
                        </div>
                        <div id="rfc.section.13.1.p.2">
                            <p>在某些情况下，位于中介后的服务器遵从 Priority
                                头字段值是有益的。例如，资源受限的服务器可能会延迟传输具有后台紧急度级别（7）的软件更新文件。然而，在最坏情况下，多个客户端声明的优先级不对称可能导致发往一个用户代理的所有响应都被延迟，直到发往另一个用户代理的所有响应发送完毕。
                            </p>
                        </div>
                        <div id="rfc.section.13.1.p.3">
                            <p>为缓解这种公平性问题，服务器可以将关于中介的知识作为其优先级决策的另一个输入。例如，如果服务器知道中介正在合并请求，则它可以避免一次性完整传送响应，而是分配带宽（例如以轮询方式）进行分发。如果受限资源是中介与用户代理之间的网络容量，这种方法可行，因为中介会缓冲响应并基于其实现的优先级方案转发分块。
                            </p>
                        </div>
                        <div id="rfc.section.13.1.p.4" class="avoidbreakafter">
                            <p>服务器可以通过配置确定请求是否来自中介，或检查请求是否包含以下某个头字段：</p>
                        </div>
                        <div id="rfc.section.13.1.p.5">
                            <ul>
                                <li>Forwarded <a href="#FORWARDED"><cite
                                            title="Forwarded HTTP Extension">[FORWARDED]</cite></a>, X-Forwarded-For
                                </li>
                                <li>Via（参见 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.6.3">HTTP 第
                                        7.6.3 节</a>）</li>
                            </ul>
                        </div>
                    </section>
                    <section id="h1-backends">
                        <h3 id="rfc.section.13.2"><a href="#rfc.section.13.2">13.2.</a>&nbsp;<a
                                href="#h1-backends">HTTP/1.x 后端</a></h3>
                        <div id="rfc.section.13.2.p.1">
                            <p>内容分发网络（CDN）基础设施通常在前端和后端支持不同的 HTTP 版本。例如，面向客户端的边缘可能支持 HTTP/2 和 HTTP/3，而与后端服务器的通信则使用
                                HTTP/1.1。与连接合并不同，CDN 会将请求“拆分”为到后端的独立连接。HTTP/1.1（或更早版本）不支持在单一连接内的响应复用，因此不存在公平性问题。然而，后端服务器
                                <em class="bcp14">MAY</em> 仍然可能使用客户端头字段进行请求调度。后端服务器 <em class="bcp14">SHOULD</em>
                                仅在该信息可以限定到单个终端客户端时，基于客户端优先级信息进行调度。认证和其他会话信息可能提供这种可关联性。
                            </p>
                        </div>
                    </section>
                    <section id="intentional-unfairness">
                        <h3 id="rfc.section.13.3"><a href="#rfc.section.13.3">13.3.</a>&nbsp;<a
                                href="#intentional-unfairness">有意引入不公平性</a></h3>
                        <div id="rfc.section.13.3.p.1">
                            <p>有时将某个连接的传输优先级降低以优先处理其他连接是有利的，但需要知道这样做会在连接之间以及这些连接上提供的请求之间引入一定程度的不公平性。</p>
                        </div>
                        <div id="rfc.section.13.3.p.2">
                            <p>例如，服务器可能会在仅传输后台优先级响应（例如软件更新镜像）的连接上使用回收式拥塞控制器。这样可以提高其他连接的响应性，但代价是延迟更新的交付。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="header-field-rationale">
                    <h2 id="rfc.section.14" class="np"><a href="#rfc.section.14">14.</a>&nbsp;<a
                            href="#header-field-rationale">为什么使用端到端头字段？</a></h2>
                    <div id="rfc.section.14.p.1">
                        <p>与使用按跳（hop-by-hop）帧的 HTTP/2 优先级方案相反，Priority 头字段被定义为“端到端”。</p>
                    </div>
                    <div id="rfc.section.14.p.2">
                        <p>客户端如何处理响应是与生成该请求的客户端相关的属性，而不是中介的属性。因此，这是一个端到端属性。由 Priority
                            头字段携带的这些端到端属性如何影响共享连接的响应之间的优先级，是一个按跳处理的问题。</p>
                    </div>
                    <div id="rfc.section.14.p.3">
                        <p>将 Priority 头字段定义为端到端对缓存中介很重要。此类中介可以将 Priority
                            头字段的值与响应一同缓存，并在提供缓存响应时使用缓存的头字段值，之所以可以这样做，正是因为该头字段被定义为端到端而非按跳。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="security-considerations">
                    <h2 id="rfc.section.15" class="np"><a href="#rfc.section.15">15.</a>&nbsp;<a
                            href="#security-considerations">安全性考虑</a></h2>
                    <div id="rfc.section.15.p.1">
                        <p><a href="#frame" title="The PRIORITY_UPDATE Frame">第 7 节</a> 介绍了服务器对 PRIORITY_UPDATE
                            帧进行缓冲时的考虑事项。</p>
                    </div>
                    <div id="rfc.section.15.p.2">
                        <p><a href="#server-scheduling" title="Server Scheduling">第 10 节</a>
                            给出了示例，说明以某种方式优先处理响应的服务器可能会陷入无法传输响应的饥饿状态。</p>
                    </div>
                    <div id="rfc.section.15.p.3">
                        <p>来自 <a href="#STRUCTURED-FIELDS"><cite
                                    title="Structured Field Values for HTTP">[STRUCTURED-FIELDS]</cite></a> 的安全性考虑适用于对
                            <a href="#parameters" title="Priority Parameters">第 4 节</a> 中定义的优先级参数的处理。
                        </p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="iana-considerations">
                    <h2 id="rfc.section.16" class="np"><a href="#rfc.section.16">16.</a>&nbsp;<a
                            href="#iana-considerations">IANA 考量</a></h2>
                    <div id="rfc.section.16.p.1" class="avoidbreakafter">
                        <p>本规范在 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a>
                            定义的“超文本传输协议（HTTP）字段名注册表”中登记了以下条目：</p>
                    </div>
                    <div id="rfc.section.16.p.2">
                        <dl class="compact">
                            <dt>字段名:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>Priority</div>
                            </dd>
                            <dt>状态:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>permanent</div>
                            </dd>
                            <dt>参考:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>本文件</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.3" class="avoidbreakafter">
                        <p>本规范在 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> 定义的“HTTP/2 设置”注册表中登记了以下条目：</p>
                    </div>
                    <div id="rfc.section.16.p.4">
                        <dl class="compact">
                            <dt>代码:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0x9</div>
                            </dd>
                            <dt>名称:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>SETTINGS_NO_RFC7540_PRIORITIES</div>
                            </dd>
                            <dt>初始值:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0</div>
                            </dd>
                            <dt>参考:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>本文件</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.5" class="avoidbreakafter">
                        <p>本规范在 <a href="#HTTP2"><cite title="HTTP/2">[HTTP/2]</cite></a> 定义的“HTTP/2 帧类型”注册表中登记了以下条目：
                        </p>
                    </div>
                    <div id="rfc.section.16.p.6">
                        <dl class="compact">
                            <dt>代码:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0x10</div>
                            </dd>
                            <dt>帧类型:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>PRIORITY_UPDATE</div>
                            </dd>
                            <dt>参考:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>本文件</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.7" class="avoidbreakafter">
                        <p>本规范在由 <a href="#HTTP3"><cite title="HTTP/3">[HTTP/3]</cite></a> 建立的“HTTP/3 帧类型”注册表中登记了以下条目：
                        </p>
                    </div>
                    <div id="rfc.section.16.p.8">
                        <dl class="compact">
                            <dt>值:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>0xF0700-0xF0701</div>
                            </dd>
                            <dt>帧类型:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>PRIORITY_UPDATE</div>
                            </dd>
                            <dt>状态:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>permanent</div>
                            </dd>
                            <dt>参考:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>本文件</div>
                            </dd>
                            <dt>变更控制者:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>IETF</div>
                            </dd>
                            <dt>联系人:</dt>
                            <dd style="margin-left: 1.5em">
                                <div>ietf-http-wg@w3.org</div>
                            </dd>
                        </dl>
                    </div>
                    <div id="rfc.section.16.p.9">
                        <p>IANA 已在 &lt;<a
                                href="https://www.iana.org/assignments/http-priority">https://www.iana.org/assignments/http-priority</a>&gt;
                            创建了“超文本传输协议（HTTP）优先级”注册表，并已使用 <a href="#iana-parameter-table"
                                title="Initial Priority Parameters">表 1</a> 中的条目对其进行了填充；有关其相关程序，请参见 <a href="#register"
                                title="Registration">第 4.3.1 节</a>。</p>
                    </div>
                    <div class="table table-condensed table-striped" id="iana-parameter-table">
                        <table class="v3 text-center">
                            <caption>表 1：初始优先级参数</caption>
                            <thead>
                                <tr>
                                    <th class="text-left" colspan="1" rowspan="1">名称</th>
                                    <th class="center" colspan="1" rowspan="1">描述</th>
                                    <th class="text-left" colspan="1" rowspan="1">参考</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">u</td>
                                    <td class="center" colspan="1" rowspan="1">HTTP 响应的紧急度。</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#urgency" title="Urgency">第
                                            4.1 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">i</td>
                                    <td class="center" colspan="1" rowspan="1">HTTP 响应是否可以被增量处理。</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#incremental"
                                            title="Incremental">第 4.2 节</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <section class="np">
                    <div id="rfc.references">
                        <h2 id="rfc.section.17"><a href="#rfc.section.17">17.</a> 参考文献</h2>
                        <section>
                            <div id="rfc.references.2">
                                <h3 id="rfc.section.17.1"><a href="#rfc.section.17.1">17.1.</a> 规范性参考文献
                                </h3>
                                <dl class="dl-horizontal">
                                    <dt id="HTTP">[<a href="#HTTP" class="smpl">HTTP</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP Semantics</a>”, <a
                                            href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a
                                            href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>, 2022 年
                                        6 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;。
                                    </dd>
                                    <dt id="HTTP2">[<a href="#HTTP2" class="smpl">HTTP/2</a>]</dt>
                                    <dd>Thomson, M., Ed. and C. Benfield, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9113.html">HTTP/2</a>”, RFC 9113, <a
                                            href="https://dx.doi.org/10.17487/RFC9113">DOI 10.17487/RFC9113</a>, 2022 年
                                        6 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;。
                                    </dd>
                                    <dt id="HTTP3">[<a href="#HTTP3" class="smpl">HTTP/3</a>]</dt>
                                    <dd>Bishop, M., Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9114.html">HTTP/3</a>”, RFC 9114, <a
                                            href="https://dx.doi.org/10.17487/RFC9114">DOI 10.17487/RFC9114</a>, 2022 年
                                        6 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>&gt;。
                                    </dd>
                                    <dt id="QUIC">[<a href="#QUIC" class="smpl">QUIC</a>]</dt>
                                    <dd>Iyengar, J., Ed. and M. Thomson, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9000.html">QUIC: A UDP-Based
                                            Multiplexed and Secure Transport</a>”, RFC 9000, <a
                                            href="https://dx.doi.org/10.17487/RFC9000">DOI 10.17487/RFC9000</a>, 2021 年
                                        5 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;。
                                    </dd>
                                    <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                    <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words
                                            for use in RFCs to Indicate Requirement Levels</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                            href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, 1997 年
                                        3 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;。
                                    </dd>
                                    <dt id="RFC8126">[<a href="#RFC8126" class="smpl">RFC8126</a>]</dt>
                                    <dd>Cotton, M., Leiba, B., and T. Narten, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html">Guidelines for Writing an
                                            IANA Considerations Section in RFCs</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp26">BCP 26</a>, RFC 8126, <a
                                            href="https://dx.doi.org/10.17487/RFC8126">DOI 10.17487/RFC8126</a>, 2017 年
                                        6 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;。
                                    </dd>
                                    <dt id="RFC8174">[<a href="#RFC8174" class="smpl">RFC8174</a>]</dt>
                                    <dd>Leiba, B., “<a href="https://www.rfc-editor.org/rfc/rfc8174.html">Ambiguity of
                                            Uppercase vs Lowercase in RFC 2119 Key Words</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a
                                            href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>, 2017 年
                                        5 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;。
                                    </dd>
                                    <dt id="STRUCTURED-FIELDS">[<a href="#STRUCTURED-FIELDS"
                                            class="smpl">STRUCTURED-FIELDS</a>]</dt>
                                    <dd>Nottingham, M. and P-H. Kamp, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8941.html">Structured Field Values
                                            for HTTP</a>”, RFC 8941, <a href="https://dx.doi.org/10.17487/RFC8941">DOI
                                            10.17487/RFC8941</a>, 2021 年 2 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8941">https://www.rfc-editor.org/info/rfc8941</a>&gt;。
                                    </dd>
                                </dl>
                            </div>
                        </section>
                        <section>
                            <div id="rfc.references.3">
                                <h3 id="rfc.section.17.2"><a href="#rfc.section.17.2">17.2.</a> 信息性参考文献
                                </h3>
                                <dl class="dl-horizontal">
                                    <dt id="CACHING">[<a href="#CACHING" class="smpl">CACHING</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9111.html">HTTP Caching</a>”, <a
                                            href="https://www.rfc-editor.org/info/std98">STD 98</a>, RFC 9111, <a
                                            href="https://dx.doi.org/10.17487/RFC9111">DOI 10.17487/RFC9111</a>, 2022 年
                                        6 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9111">https://www.rfc-editor.org/info/rfc9111</a>&gt;。
                                    </dd>
                                    <dt id="FORWARDED">[<a href="#FORWARDED" class="smpl">FORWARDED</a>]</dt>
                                    <dd>Petersson, A. and M. Nilsson, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7239.html">Forwarded HTTP
                                            Extension</a>”, RFC 7239, <a href="https://dx.doi.org/10.17487/RFC7239">DOI
                                            10.17487/RFC7239</a>, 2014 年 6 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7239">https://www.rfc-editor.org/info/rfc7239</a>&gt;。
                                    </dd>
                                    <dt id="MARX">[<a href="#MARX" class="smpl">MARX</a>]</dt>
                                    <dd>Marx, R., De Decker, T., Quax, P., and W. Lamotte, “<a
                                            href="https://www.doi.org/10.5220/0008191701300143">Of the Utmost
                                            Importance: Resource Prioritization in HTTP/3 over QUIC</a>”, <a
                                            href="https://dx.doi.org/10.5220/0008191701300143">DOI
                                            10.5220/0008191701300143</a>, SCITEPRESS 第 15 届国际 Web 信息系统与技术会议论文集（第 130-143
                                        页）, 2019 年 9 月, &lt;<a
                                            href="https://www.doi.org/10.5220/0008191701300143">https://www.doi.org/10.5220/0008191701300143</a>&gt;。
                                    </dd>
                                    <dt id="I-D.lassey-priority-setting">[<a href="#I-D.lassey-priority-setting"
                                            class="smpl">PRIORITY-SETTING</a>]</dt>
                                    <dd>Lassey, B. and L. , “<a
                                            href="https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00">Declaring
                                            Support for HTTP/2 Priorities</a>”, <a
                                            href="https://datatracker.ietf.org/doc/draft-lassey-priority-setting">进行中的工作</a>,
                                        draft-lassey-priority-setting-00, 2019 年 7 月, &lt;<a
                                            href="https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00">https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00</a>&gt;。
                                    </dd>
                                    <dt id="QUIC-RECOVERY">[<a href="#QUIC-RECOVERY" class="smpl">QUIC-RECOVERY</a>]
                                    </dt>
                                    <dd>Iyengar, J., Ed. and I. Swett, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9002.html">QUIC Loss Detection and
                                            Congestion Control</a>”, RFC 9002, <a
                                            href="https://dx.doi.org/10.17487/RFC9002">DOI 10.17487/RFC9002</a>, 2021 年
                                        5 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9002">https://www.rfc-editor.org/info/rfc9002</a>&gt;。
                                    </dd>
                                    <dt id="RFC7540">[<a href="#RFC7540" class="smpl">RFC7540</a>]</dt>
                                    <dd>Belshe, M., Peon, R., and M. Thomson, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7540.html">Hypertext Transfer
                                            Protocol Version 2 (HTTP/2)</a>”, RFC 7540, <a
                                            href="https://dx.doi.org/10.17487/RFC7540">DOI 10.17487/RFC7540</a>, 2015 年
                                        5 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;。
                                    </dd>
                                    <dt id="RFC8081">[<a href="#RFC8081" class="smpl">RFC8081</a>]</dt>
                                    <dd>Lilley, C., “<a href="https://www.rfc-editor.org/rfc/rfc8081.html">The "font"
                                            Top-Level Media Type</a>”, RFC 8081, <a
                                            href="https://dx.doi.org/10.17487/RFC8081">DOI 10.17487/RFC8081</a>, 2017 年
                                        2 月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8081">https://www.rfc-editor.org/info/rfc8081</a>&gt;。
                                    </dd>
                                </dl>
                            </div>
                        </section>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="acknowledgements">
                    <h2 id="rfc.section.unnumbered-4" class="np"><a href="#acknowledgements">致谢</a></h2>
                    <div id="rfc.section.unnumbered-4.p.1">
                        <p>Roy Fielding 在 &lt;<a
                                href="https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-5.pdf">https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-5.pdf</a>&gt;
                            提出了使用头字段表示优先级的想法。在 &lt;<a
                                href="https://github.com/pmeenan/http3-prioritization-proposal">https://github.com/pmeenan/http3-prioritization-proposal</a>&gt;
                            中，
                            Patrick Meenan 主张使用紧急度和并发性的元组来表示优先级。禁用 HTTP/2 优先级的能力受 <a
                                href="#I-D.lassey-priority-setting"><cite
                                    title="Declaring Support for HTTP/2 Priorities">[PRIORITY-SETTING]</cite></a>
                            的启发，该草案由 Brad Lassey 和 Lucas Pardue 撰写，本文根据未并入该文档更新的反馈对其进行了修改。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.2">
                        <p>定义替代 HTTP/2 优先级方案的动机来自广泛的 HTTP 社区讨论。特别感谢 Roberto Peon、Martin Thomson 和 Netflix 提供的已明确并入本文的文本。
                        </p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.3">
                        <p>除上述人员外，本文档还受益于 HTTP 优先级设计团队的广泛讨论，团队成员包括 Alan Frindell、Andrew Galloni、Craig Taylor、Ian
                            Swett、Matthew Cox、Mike Bishop、Roberto Peon、Robin Marx、Roy Fielding 以及本文档的作者。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.4">
                        <p>Yang Chi 为重传调度部分做出了贡献。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.authors" class="np">
                    <h2><a href="#rfc.authors">作者地址</a></h2>
                    <address><b>Kazuho Oku</b><br>Fastly<br>EMail: <a
                            href="mailto:kazuhooku@gmail.com">kazuhooku@gmail.com</a><br><br><em>附加联系方式：</em><br><b>奥
                            一穂</b><br>Fastly<br>EMail: <a href="mailto:kazuhooku@gmail.com">kazuhooku@gmail.com</a>
                    </address>
                    <address><b>Lucas Pardue</b><br>Cloudflare<br>EMail: <a
                            href="mailto:lucaspardue.24.7@gmail.com">lucaspardue.24.7@gmail.com</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>