<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="zh-hans">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 9114 - HTTP/3</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = {};
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC9114">
    <meta property="og:description" content="HTTP/3">
    <meta property="og:url" content="https://httpwg.org/specs/rfc9114.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css"
        href="https://httpwg.org/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://httpwg.org/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Index" href="#rfc.index">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 HTTP/3 Protocol Overview" href="#rfc.section.2">
    <link rel="Chapter" title="3 Connection Setup and Management" href="#rfc.section.3">
    <link rel="Chapter" title="4 Expressing HTTP Semantics in HTTP/3" href="#rfc.section.4">
    <link rel="Chapter" title="5 Connection Closure" href="#rfc.section.5">
    <link rel="Chapter" title="6 Stream Mapping and Usage" href="#rfc.section.6">
    <link rel="Chapter" title="7 HTTP Framing Layer" href="#rfc.section.7">
    <link rel="Chapter" title="8 Error Handling" href="#rfc.section.8">
    <link rel="Chapter" title="9 Extensions to HTTP/3" href="#rfc.section.9">
    <link rel="Chapter" title="10 Security Considerations" href="#rfc.section.10">
    <link rel="Chapter" title="11 IANA Considerations" href="#rfc.section.11">
    <link rel="Chapter" title="12 References" href="#rfc.section.12">
    <link rel="Appendix" title="A Considerations for Transitioning from HTTP/2" href="#rfc.section.A">
    <link rel="Appendix" title="Acknowledgments" href="#rfc.section.unnumbered-4">
    <link href="https://dx.doi.org/10.17487/rfc9114" rel="alternate">
    <link href="urn:issn:2070-1721" rel="alternate">
    <link href="https://datatracker.ietf.org/doc/draft-ietf-quic-http-latest" rel="prev">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc9114.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="https://www.rfc-editor.org/info/rfc9114">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="HTTP/2, HPACK, QPACK, Web">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Bishop, M.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:9114">
    <meta name="dcterms.issued" content="2022-06">
    <meta name="dcterms.abstract"
        content="The QUIC transport protocol has several features that are desirable in a transport for HTTP, such as stream multiplexing, per-stream flow control, and low-latency connection establishment. This document describes a mapping of HTTP semantics over QUIC. This document also identifies HTTP/2 features that are subsumed by QUIC and describes how HTTP/2 extensions can be ported to HTTP/3.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="The QUIC transport protocol has several features that are desirable in a transport for HTTP, such as stream multiplexing, per-stream flow control, and low-latency connection establishment. This document describes a mapping of HTTP semantics over QUIC. This document also identifies HTTP/2 features that are subsumed by QUIC and describes how HTTP/2 extensions can be ported to HTTP/3.">
</head>

<body onload="getMeta(9114,'rfc.meta');">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>9114</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#prior-versions-of-http">HTTP 的先前版本</a></li>
                                        <li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#delegation-to-quic">委托给 QUIC</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#http3-protocol-overview">HTTP/3 协议概述</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#document-organization">文档结构</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#conventions-and-terminology">约定与术语</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connection-setup">连接建立与管理</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#discovery">发现
                                                HTTP/3 端点</a>
                                            <ul>
                                                <li><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#alt-svc">HTTP 替代服务</a></li>
                                                <li><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#other-schemes">其他方案</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#connection-establishment">连接建立</a></li>
                                        <li><a href="#rfc.section.3.3">3.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#connection-reuse">连接重用</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#http-request-lifecycle">在
                                        HTTP/3 中表达 HTTP 语义</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#request-response">HTTP 消息分帧</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#request-cancellation">请求取消与拒绝</a></li>
                                                <li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#malformed">格式错误的请求与响应</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#header-formatting">HTTP 字段</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#field-compression">字段压缩</a></li>
                                                <li><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#header-size-constraints">首部大小限制</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#http-control-data">HTTP 控制数据</a>
                                            <ul>
                                                <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#request-pseudo-header-fields">请求伪首部字段</a></li>
                                                <li><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#response-pseudo-header-fields">响应伪首部字段</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.4.4">4.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#connect">CONNECT 方法</a></li>
                                        <li><a href="#rfc.section.4.5">4.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#http-upgrade">HTTP 升级</a></li>
                                        <li><a href="#rfc.section.4.6">4.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#server-push">服务器推送</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connection-closure">连接关闭</a>
                                    <ul>
                                        <li><a href="#rfc.section.5.1">5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#idle-connections">空闲连接</a></li>
                                        <li><a href="#rfc.section.5.2">5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#connection-shutdown">连接终止</a></li>
                                        <li><a href="#rfc.section.5.3">5.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#immediate-application-closure">立即的应用关闭</a>
                                        </li>
                                        <li><a href="#rfc.section.5.4">5.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#transport-closure">传输关闭</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#stream-mapping">流映射与使用</a>
                                    <ul>
                                        <li><a href="#rfc.section.6.1">6.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#request-streams">双向流</a></li>
                                        <li><a href="#rfc.section.6.2">6.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#unidirectional-streams">单向流</a>
                                            <ul>
                                                <li><a href="#rfc.section.6.2.1">6.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#control-streams">控制流</a></li>
                                                <li><a href="#rfc.section.6.2.2">6.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#push-streams">推送流</a></li>
                                                <li><a href="#rfc.section.6.2.3">6.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#stream-grease">保留的流类型</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#http-framing-layer">HTTP
                                        分帧层</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-layout">帧布局</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frames">帧定义</a>
                                            <ul>
                                                <li><a href="#rfc.section.7.2.1">7.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-data">DATA</a></li>
                                                <li><a href="#rfc.section.7.2.2">7.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-headers">HEADERS</a></li>
                                                <li><a href="#rfc.section.7.2.3">7.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-cancel-push">CANCEL_PUSH</a></li>
                                                <li><a href="#rfc.section.7.2.4">7.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-settings">SETTINGS</a></li>
                                                <li><a href="#rfc.section.7.2.5">7.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-push-promise">PUSH_PROMISE</a></li>
                                                <li><a href="#rfc.section.7.2.6">7.2.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-goaway">GOAWAY</a></li>
                                                <li><a href="#rfc.section.7.2.7">7.2.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-max-push-id">MAX_PUSH_ID</a></li>
                                                <li><a href="#rfc.section.7.2.8">7.2.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#frame-reserved">Reserved Frame Types</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#errors">错误处理</a>
                                    <ul>
                                        <li><a href="#rfc.section.8.1">8.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#http-error-codes">HTTP/3 错误代码</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#extensions">HTTP/3
                                        的扩展</a></li>
                                <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">安全性考虑</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#server-authority">服务器权限</a></li>
                                        <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#cross-protocol-attacks">跨协议攻击</a></li>
                                        <li><a href="#rfc.section.10.3">10.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#intermediary-encapsulation-attacks">中介封装攻击</a></li>
                                        <li><a href="#rfc.section.10.4">10.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#cacheability-of-pushed-responses">推送响应的可缓存性</a></li>
                                        <li><a href="#rfc.section.10.5">10.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#denial-of-service-considerations">拒绝服务（DoS）考虑</a>
                                            <ul>
                                                <li><a href="#rfc.section.10.5.1">10.5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#limits-on-field-section-size">字段部分大小的限制</a></li>
                                                <li><a href="#rfc.section.10.5.2">10.5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#connect-issues">CONNECT 问题</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.10.6">10.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#use-of-compression">压缩的使用</a></li>
                                        <li><a href="#rfc.section.10.7">10.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#padding-and-traffic-analysis">填充与流量分析</a>
                                        </li>
                                        <li><a href="#rfc.section.10.8">10.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-parsing">帧解析</a></li>
                                        <li><a href="#rfc.section.10.9">10.9.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#early-data">早期数据</a></li>
                                        <li><a href="#rfc.section.10.10">10.10.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#migration">迁移</a></li>
                                        <li><a href="#rfc.section.10.11">10.11.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#privacy-considerations">隐私考虑</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana-considerations">IANA 考虑事项</a>
                                    <ul>
                                        <li><a href="#rfc.section.11.1">11.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana-alpn">HTTP/3 标识字符串的注册</a></li>
                                        <li><a href="#rfc.section.11.2">11.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana-policy">新注册表</a>
                                            <ul>
                                                <li><a href="#rfc.section.11.2.1">11.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#iana-frames">帧类型</a></li>
                                                <li><a href="#rfc.section.11.2.2">11.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#iana-settings">设置参数</a></li>
                                                <li><a href="#rfc.section.11.2.3">11.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#iana-error-codes">错误代码</a></li>
                                                <li><a href="#rfc.section.11.2.4">11.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#iana-stream-types">流类型</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references">参考文献</a>
                                    <ul>
                                        <li><a href="#rfc.section.12.1">12.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">规范性参考文献</a></li>
                                        <li><a href="#rfc.section.12.2">12.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.3">说明性参考文献</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#h2-considerations">从 HTTP/2 过渡的考虑</a>
                                    <ul>
                                        <li><a href="#rfc.section.A.1">A.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h2-streams">流</a></li>
                                        <li><a href="#rfc.section.A.2">A.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h2-frames">HTTP 帧类型</a>
                                            <ul>
                                                <li><a href="#rfc.section.A.2.1">A.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#h2-diff-priority">优先级差异</a></li>
                                                <li><a href="#rfc.section.A.2.2">A.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#field-compression-differences">字段压缩差异</a></li>
                                                <li><a href="#rfc.section.A.2.3">A.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#flow-control-differences">流量控制差异</a>
                                                </li>
                                                <li><a href="#rfc.section.A.2.4">A.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#guidance-for-new-frame-type-definitions">新帧类型定义指南</a>
                                                </li>
                                                <li><a href="#rfc.section.A.2.5">A.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#comparison-of-http2-and-http3-frame-types">HTTP/2 与
                                                        HTTP/3 帧类型比较</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#rfc.section.A.3">A.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h2-settings">HTTP/2 SETTINGS 参数</a></li>
                                        <li><a href="#rfc.section.A.4">A.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#http2-error-codes">HTTP/2 错误代码</a>
                                            <ul>
                                                <li><a href="#rfc.section.A.4.1">A.4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#mapping-between-http2-and-http3-errors">HTTP/2 与 HTTP/3
                                                        错误的映射</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#acknowledgments">致谢</a></li>
                                <li><a href="#rfc.index">索引</a></li>
                                <li><a href="#rfc.authors">作者地址</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">Internet 工程任务组 (IETF)</td>
                                <td class="text-right">M. Bishop，编辑</td>
                            </tr>
                            <tr>
                                <td class="text-left">请求评论：9114</td>
                                <td class="text-right">Akamai</td>
                            </tr>
                            <tr>
                                <td class="text-left">类别：标准轨道</td>
                                <td class="text-right">2022年6月</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN：2070-1721</td>
                                <td class="text-right"></td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>HTTP/3</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">摘要</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>QUIC 传输协议具备若干在 HTTP 传输中理想的特性，例如流复用、每流流量控制以及低延迟的连接建立。本文档描述了在 QUIC 上映射 HTTP 语义的方法。本文档还指出被 QUIC
                            吸收的 HTTP/2 特性，并描述如何将 HTTP/2 的扩展移植到 HTTP/3。</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">本备忘录的状态</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>这是一个互联网标准轨道文档。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>本文档是 Internet 工程任务组 (IETF) 的产物，代表 IETF 社区的共识。它已接受公开审查，并已获 Internet Engineering Steering Group
                            (IESG) 批准发布。有关互联网标准的更多信息，请参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc7841.html#section-2">RFC 7841 的第 2 节</a>。</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>有关本文档当前状态、任何勘误以及如何提供反馈的信息，可在 <a
                                href="https://www.rfc-editor.org/info/rfc9114">https://www.rfc-editor.org/info/rfc9114</a>
                            获取。</p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2022 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a>)
                            in effect on the date of publication of this document. Please review these documents
                            carefully, as they describe your rights and restrictions with respect to this document. Code
                            Components extracted from this document must include Revised BSD License text as described
                            in Section 4.e of the Trust Legal Provisions and are provided without warranty as described
                            in the Revised BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">引言</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#prior-versions-of-http">HTTP 的先前版本</a></li>
                                <li><a href="#rfc.section.1.2">1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#delegation-to-quic">委托给 QUIC</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#http3-protocol-overview">HTTP/3
                                协议概述</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#document-organization">文档结构</a></li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#conventions-and-terminology">约定与术语</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-setup">连接建立与管理</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a href="#discovery">发现 HTTP/3
                                        端点</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#alt-svc">HTTP 替代服务</a></li>
                                        <li><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#other-schemes">其他方案</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3.2">3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connection-establishment">连接建立</a></li>
                                <li><a href="#rfc.section.3.3">3.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connection-reuse">连接重用</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#http-request-lifecycle">在 HTTP/3
                                中表达 HTTP 语义</a>
                            <ul>
                                <li><a href="#rfc.section.4.1">4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#request-response">HTTP 消息分帧</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#request-cancellation">请求取消与拒绝</a></li>
                                        <li><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#malformed">格式错误的请求与响应</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.2">4.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#header-formatting">HTTP 字段</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#field-compression">字段压缩</a></li>
                                        <li><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#header-size-constraints">首部大小限制</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.3">4.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#http-control-data">HTTP 控制数据</a>
                                    <ul>
                                        <li><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#request-pseudo-header-fields">请求伪首部字段</a>
                                        </li>
                                        <li><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#response-pseudo-header-fields">响应伪首部字段</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4.4">4.4.</a>&nbsp;&nbsp;&nbsp;<a href="#connect">CONNECT
                                        方法</a></li>
                                <li><a href="#rfc.section.4.5">4.5.</a>&nbsp;&nbsp;&nbsp;<a href="#http-upgrade">HTTP
                                        升级</a></li>
                                <li><a href="#rfc.section.4.6">4.6.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#server-push">服务器推送</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#connection-closure">连接关闭</a>
                            <ul>
                                <li><a href="#rfc.section.5.1">5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#idle-connections">空闲连接</a></li>
                                <li><a href="#rfc.section.5.2">5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#connection-shutdown">连接终止</a></li>
                                <li><a href="#rfc.section.5.3">5.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#immediate-application-closure">立即的应用关闭</a></li>
                                <li><a href="#rfc.section.5.4">5.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#transport-closure">传输关闭</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#stream-mapping">流映射与使用</a>
                            <ul>
                                <li><a href="#rfc.section.6.1">6.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#request-streams">双向流</a></li>
                                <li><a href="#rfc.section.6.2">6.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#unidirectional-streams">单向流</a>
                                    <ul>
                                        <li><a href="#rfc.section.6.2.1">6.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#control-streams">控制流</a></li>
                                        <li><a href="#rfc.section.6.2.2">6.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#push-streams">推送流</a></li>
                                        <li><a href="#rfc.section.6.2.3">6.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#stream-grease">保留的流类型</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#http-framing-layer">HTTP 分帧层</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a href="#frame-layout">帧布局</a>
                                </li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a href="#frames">帧定义</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.2.1">7.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-data">DATA</a></li>
                                        <li><a href="#rfc.section.7.2.2">7.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-headers">HEADERS</a></li>
                                        <li><a href="#rfc.section.7.2.3">7.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-cancel-push">CANCEL_PUSH</a></li>
                                        <li><a href="#rfc.section.7.2.4">7.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-settings">SETTINGS</a></li>
                                        <li><a href="#rfc.section.7.2.5">7.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-push-promise">PUSH_PROMISE</a></li>
                                        <li><a href="#rfc.section.7.2.6">7.2.6.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-goaway">GOAWAY</a></li>
                                        <li><a href="#rfc.section.7.2.7">7.2.7.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-max-push-id">MAX_PUSH_ID</a></li>
                                        <li><a href="#rfc.section.7.2.8">7.2.8.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#frame-reserved">Reserved Frame Types</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#errors">错误处理</a>
                            <ul>
                                <li><a href="#rfc.section.8.1">8.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#http-error-codes">HTTP/3 错误代码</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#extensions">HTTP/3 的扩展</a></li>
                        <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#security-considerations">安全性考虑</a>
                            <ul>
                                <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#server-authority">服务器权限</a></li>
                                <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#cross-protocol-attacks">跨协议攻击</a></li>
                                <li><a href="#rfc.section.10.3">10.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#intermediary-encapsulation-attacks">中介封装攻击</a></li>
                                <li><a href="#rfc.section.10.4">10.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#cacheability-of-pushed-responses">推送响应的可缓存性</a>
                                </li>
                                <li><a href="#rfc.section.10.5">10.5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#denial-of-service-considerations">拒绝服务（DoS）考虑</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.5.1">10.5.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#limits-on-field-section-size">字段部分大小的限制</a>
                                        </li>
                                        <li><a href="#rfc.section.10.5.2">10.5.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#connect-issues">CONNECT 问题</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.10.6">10.6.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#use-of-compression">压缩的使用</a></li>
                                <li><a href="#rfc.section.10.7">10.7.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#padding-and-traffic-analysis">填充与流量分析</a></li>
                                <li><a href="#rfc.section.10.8">10.8.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#frame-parsing">帧解析</a></li>
                                <li><a href="#rfc.section.10.9">10.9.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#early-data">早期数据</a></li>
                                <li><a href="#rfc.section.10.10">10.10.</a>&nbsp;&nbsp;&nbsp;<a href="#migration">迁移</a>
                                </li>
                                <li><a href="#rfc.section.10.11">10.11.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#privacy-considerations">隐私考虑</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.11">11.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                考虑事项</a>
                            <ul>
                                <li><a href="#rfc.section.11.1">11.1.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-alpn">HTTP/3
                                        标识字符串的注册</a></li>
                                <li><a href="#rfc.section.11.2">11.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana-policy">新注册表</a>
                                    <ul>
                                        <li><a href="#rfc.section.11.2.1">11.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana-frames">帧类型</a></li>
                                        <li><a href="#rfc.section.11.2.2">11.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana-settings">设置参数</a></li>
                                        <li><a href="#rfc.section.11.2.3">11.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana-error-codes">错误代码</a></li>
                                        <li><a href="#rfc.section.11.2.4">11.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana-stream-types">流类型</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.12">12.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">参考文献</a>
                            <ul>
                                <li><a href="#rfc.section.12.1">12.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">规范性参考文献</a></li>
                                <li><a href="#rfc.section.12.2">12.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.3">说明性参考文献</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.A">Appendix A.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-considerations">从
                                HTTP/2 过渡的考虑</a>
                            <ul>
                                <li><a href="#rfc.section.A.1">A.1.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-streams">流</a>
                                </li>
                                <li><a href="#rfc.section.A.2">A.2.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-frames">HTTP
                                        帧类型</a>
                                    <ul>
                                        <li><a href="#rfc.section.A.2.1">A.2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#h2-diff-priority">优先级差异</a></li>
                                        <li><a href="#rfc.section.A.2.2">A.2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#field-compression-differences">字段压缩差异</a>
                                        </li>
                                        <li><a href="#rfc.section.A.2.3">A.2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#flow-control-differences">流量控制差异</a></li>
                                        <li><a href="#rfc.section.A.2.4">A.2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#guidance-for-new-frame-type-definitions">新帧类型定义指南</a></li>
                                        <li><a href="#rfc.section.A.2.5">A.2.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#comparison-of-http2-and-http3-frame-types">HTTP/2 与 HTTP/3
                                                帧类型比较</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.A.3">A.3.</a>&nbsp;&nbsp;&nbsp;<a href="#h2-settings">HTTP/2
                                        SETTINGS 参数</a></li>
                                <li><a href="#rfc.section.A.4">A.4.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#http2-error-codes">HTTP/2 错误代码</a>
                                    <ul>
                                        <li><a href="#rfc.section.A.4.1">A.4.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#mapping-between-http2-and-http3-errors">HTTP/2 与 HTTP/3 错误的映射</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#acknowledgments">致谢</a></li>
                        <li><a href="#rfc.index">索引</a></li>
                        <li><a href="#rfc.authors">作者地址</a></li>
                    </ul>
                </div>
                <hr class="hidden-print">
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">引言</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>HTTP 语义 (<a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>)
                            被用于互联网上的广泛服务。这些语义最常与 HTTP/1.1 和 HTTP/2 一起使用。HTTP/1.1 已在多种传输和会话层上使用，而 HTTP/2 主要在基于 TCP 的 TLS
                            上使用。HTTP/3 在一个新的传输协议 QUIC 上支持相同的语义。</p>
                    </div>
                    <section id="prior-versions-of-http">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#prior-versions-of-http">HTTP 的先前版本</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>HTTP/1.1 (<a href="#RFC9112"><cite title="HTTP/1.1">[HTTP/1.1]</cite></a>)
                                使用以空白分隔的文本字段来传递 HTTP 消息。尽管这些交换是可读的，但使用空白进行消息格式化会导致解析复杂性并对变体行为过度容忍。</p>
                        </div>
                        <div id="rfc.section.1.1.p.2">
                            <p>由于 HTTP/1.1 不包含复用层，通常使用多个 TCP 连接并行处理请求。然而，这对拥塞控制和网络效率有负面影响，因为 TCP 不会在多个连接之间共享拥塞控制。</p>
                        </div>
                        <div id="rfc.section.1.1.p.3">
                            <p>HTTP/2 (<a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>)
                                引入了二进制分帧和复用层，以在不修改传输层的情况下改善延迟。然而，由于 HTTP/2 的复用并行性对于 TCP
                                的丢包恢复机制不可见，丢失或重排序的数据包会导致所有活动事务出现停顿，而不管该事务是否直接受到该丢失数据包的影响。</p>
                        </div>
                    </section>
                    <section id="delegation-to-quic">
                        <h3 id="rfc.section.1.2"><a href="#rfc.section.1.2">1.2.</a>&nbsp;<a
                                href="#delegation-to-quic">委托给 QUIC</a></h3>
                        <div id="rfc.section.1.2.p.1">
                            <p>QUIC 传输协议整合了流复用和每流流量控制，类似于 HTTP/2 分帧层提供的功能。通过在流级别提供可靠性并在整个连接上提供拥塞控制，QUIC 有能力相比于基于 TCP
                                的映射提升 HTTP 的性能。QUIC 还在传输层整合了 TLS 1.3 (<a href="#TLS"><cite
                                        title="The Transport Layer Security (TLS) Protocol Version 1.3">[TLS]</cite></a>)，提供了与在
                                TCP 上运行 TLS 相当的机密性和完整性，同时具有比 TCP Fast Open (<a href="#TFO"><cite
                                        title="TCP Fast Open">[TFO]</cite></a>) 更低的连接建立延迟。</p>
                        </div>
                        <div id="rfc.section.1.2.p.2">
                            <p>本文档定义了 HTTP/3：即在 QUIC 传输协议上映射 HTTP 语义，设计上大量借鉴了 HTTP/2。HTTP/3 依赖 QUIC
                                来提供数据的机密性和完整性保护；对等方认证；以及可靠的、按序的、按流交付。在将流生命周期和流量控制问题委托给 QUIC 的同时，在每个流上使用类似于 HTTP/2
                                的二进制分帧。某些 HTTP/2 特性被 QUIC 吸收，而其他特性则在 QUIC 之上实现。</p>
                        </div>
                        <div id="rfc.section.1.2.p.3">
                            <p>QUIC 在 <a href="#QUIC-TRANSPORT"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>
                                中描述。有关 HTTP/2 的完整描述，请参见 <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="http3-protocol-overview">
                    <h2 id="rfc.section.2" class="np"><a href="#rfc.section.2">2.</a>&nbsp;<a
                            href="#http3-protocol-overview">HTTP/3 协议概述</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>HTTP/3 使用 QUIC 传输协议和类似于 HTTP/2 的内部分帧层，为 HTTP 语义提供传输。</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>一旦客户端知道某个端点存在 HTTP/3 服务器，它就会打开一个 QUIC 连接。QUIC 提供协议协商、基于流的复用以及流量控制。HTTP/3 端点的发现在 <a
                                href="#discovery" title="Discovering an HTTP/3 Endpoint">第 3.1 节</a> 中描述。</p>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>在每个流内，HTTP/3 通信的基本单位是帧（<a href="#frames" title="Frame Definitions">第 7.2
                                节</a>）。每种帧类型都有不同的用途。例如，<a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                id="rfc.iref.h.1"></span> 和 <a href="#frame-data" title="DATA">DATA</a><span
                                id="rfc.iref.d.1"></span> 帧构成了 HTTP 请求和响应的基础（<a href="#request-response"
                                title="HTTP Message Framing">第 4.1 节</a>）。适用于整个连接的帧通过专用的 <a href="#control-streams"
                                title="Control Streams">控制流</a><span id="rfc.iref.c.1"></span> 进行传输。</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>请求的复用通过 QUIC 的流抽象执行，详见 <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2">第 2
                                节</a> 的 <a href="#QUIC-TRANSPORT"><cite
                                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>。每一对请求-响应消耗一个单独的
                            QUIC 流。流彼此独立，因此一个流被阻塞或遭遇数据包丢失不会阻止其他流的进展。</p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>服务器推送是 HTTP/2 (<a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>)
                            引入的一种交互模式，允许服务器在预期客户端将发出指定请求时将一个请求-响应交换推送给客户端。这在网络使用与潜在的延迟收益之间进行权衡。若干 HTTP/3 帧用于管理服务器推送，例如
                            <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                id="rfc.iref.p.1"></span>、<a href="#frame-max-push-id"
                                title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.1"></span> 和 <a
                                href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span
                                id="rfc.iref.c.2"></span>。
                        </p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>与 HTTP/2 一样，请求和响应字段在传输时会被压缩。由于 HPACK (<a href="#HPACK"><cite
                                    title="HPACK: Header Compression for HTTP/2">[HPACK]</cite></a>)
                            依赖于压缩字段节的按序传输（这是 QUIC 不保证的），HTTP/3 用 QPACK (<a href="#RFC9204"><cite
                                    title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>) 取代了 HPACK。QPACK
                            使用单独的单向流来修改和跟踪字段表状态，而编码的字段节在引用表状态时不修改表。</p>
                    </div>
                    <section id="document-organization">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a
                                href="#document-organization">文档组织</a></h3>
                        <div id="rfc.section.2.1.p.1" class="avoidbreakafter">
                            <p>下面的各节提供了 HTTP/3 连接生命周期的详细概述：</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <ul>
                                <li>"<a href="#connection-setup" title="Connection Setup and Management">连接建立与管理</a>"
                                    (<a href="#connection-setup" title="Connection Setup and Management">第 3 节</a>)
                                    介绍了如何发现 HTTP/3 端点以及如何建立 HTTP/3 连接。</li>
                                <li>"<a href="#http-request-lifecycle" title="Expressing HTTP Semantics in HTTP/3">在
                                        HTTP/3 中表达 HTTP 语义</a>" (<a href="#http-request-lifecycle"
                                        title="Expressing HTTP Semantics in HTTP/3">第 4 节</a>) 描述了如何使用帧来表达 HTTP 语义。</li>
                                <li>"<a href="#connection-closure" title="Connection Closure">连接关闭</a>" (<a
                                        href="#connection-closure" title="Connection Closure">第 5 节</a>) 描述了 HTTP/3
                                    连接如何优雅或突然地终止。</li>
                            </ul>
                        </div>
                        <div id="rfc.section.2.1.p.3" class="avoidbreakafter">
                            <p>线协议细节和与传输的交互在后续各节中描述：</p>
                        </div>
                        <div id="rfc.section.2.1.p.4">
                            <ul>
                                <li>"<a href="#stream-mapping" title="Stream Mapping and Usage">流映射与使用</a>" (<a
                                        href="#stream-mapping" title="Stream Mapping and Usage">第 6 节</a>) 描述了 QUIC
                                    流的使用方式。</li>
                                <li>"<a href="#http-framing-layer" title="HTTP Framing Layer">HTTP 分帧层</a>" (<a
                                        href="#http-framing-layer" title="HTTP Framing Layer">第 7 节</a>) 描述了大多数字段上使用的帧。
                                </li>
                                <li>"<a href="#errors" title="Error Handling">错误处理</a>" (<a href="#errors"
                                        title="Error Handling">第 8 节</a>) 描述了如何处理并表达错误条件，无论是在特定流上还是针对整个连接。</li>
                            </ul>
                        </div>
                        <div id="rfc.section.2.1.p.5" class="avoidbreakafter">
                            <p>附录部分提供了其他资源：</p>
                        </div>
                        <div id="rfc.section.2.1.p.6">
                            <ul>
                                <li>"<a href="#extensions" title="Extensions to HTTP/3">HTTP/3 的扩展</a>" (<a
                                        href="#extensions" title="Extensions to HTTP/3">第 9 节</a>) 描述了如何在将来的文档中添加新功能。
                                </li>
                                <li>有关 HTTP/2 与 HTTP/3 之间更详细的比较，请参见 <a href="#h2-considerations"
                                        title="Considerations for Transitioning from HTTP/2">附录 A</a>。</li>
                            </ul>
                        </div>
                    </section>
                    <section id="conventions-and-terminology">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a
                                href="#conventions-and-terminology">约定与术语</a></h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>本文档中关键词 "<em class="bcp14">MUST</em>"、"<em class="bcp14">MUST NOT</em>"、"<em
                                    class="bcp14">REQUIRED</em>"、"<em class="bcp14">SHALL</em>"、"<em class="bcp14">SHALL
                                    NOT</em>"、"<em class="bcp14">SHOULD</em>"、"<em class="bcp14">SHOULD NOT</em>"、"<em
                                    class="bcp14">RECOMMENDED</em>"、"<em class="bcp14">NOT RECOMMENDED</em>"、"<em
                                    class="bcp14">MAY</em>" 和 "<em class="bcp14">OPTIONAL</em>" 应按 BCP 14
                                中的描述进行解释（仅当且仅当这些词以全大写形式出现，如此处所示）。<a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>
                                <a href="#RFC8174"><cite
                                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">[RFC8174]</cite></a>
                            </p>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>本文档使用来自 <a href="#QUIC-TRANSPORT"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>
                                的可变长度整数编码。</p>
                        </div>
                        <div id="rfc.section.2.2.p.3" class="avoidbreakafter">
                            <p>下列术语将被使用：</p>
                        </div>
                        <div id="rfc.section.2.2.p.4">
                            <dl>
                                <dt>abort:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>连接或流的突然终止，可能由于错误条件引起。</div>
                                </dd>
                                <dt>client:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>发起 HTTP/3 连接的端点。客户端发送 HTTP 请求并接收 HTTP 响应。</div>
                                </dd>
                                <dt>connection:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>使用 QUIC 作为传输协议的两个端点之间的传输层连接。</div>
                                </dd>
                                <dt><a href="#errors" title="Error Handling">connection error</a>
                                    <div id="rfc.iref.c.3"></div>:
                                </dt>
                                <dd style="margin-left: 1.5em">
                                    <div>影响整个 HTTP/3 连接的错误。</div>
                                </dd>
                                <dt>endpoint:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>连接的任一端：客户端或服务器。</div>
                                </dd>
                                <dt>frame:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>HTTP/3 中流上通信的最小单位，由一个头和根据帧类型结构化的可变长度字节序列组成。</div>
                                    <div>在本文档和 <a href="#QUIC-TRANSPORT"><cite
                                                title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>
                                        中均存在称为“帧”的协议元素。当引用来自 <a href="#QUIC-TRANSPORT"><cite
                                                title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>
                                        的帧时，帧名称前会加上 "QUIC" 前缀。例如，“QUIC CONNECTION_CLOSE frames”。未加此前缀的引用指的是在 <a
                                            href="#frames" title="Frame Definitions">第 7.2 节</a> 中定义的帧。</div>
                                </dd>
                                <dt>HTTP/3 connection:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>协商的应用层协议为 HTTP/3 的 QUIC 连接。</div>
                                </dd>
                                <dt>peer:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>一个端点。当讨论特定端点时，“peer” 指相对于主要讨论主体的远端端点。</div>
                                </dd>
                                <dt>receiver:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>接收帧的端点。</div>
                                </dd>
                                <dt>sender:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>发送帧的端点。</div>
                                </dd>
                                <dt>server:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>接受 HTTP/3 连接的端点。服务器接收 HTTP 请求并发送 HTTP 响应。</div>
                                </dd>
                                <dt>stream:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>由 QUIC 传输提供的双向或单向字节流。HTTP/3 连接内的所有流都可视为“HTTP/3 流”，但在 HTTP/3 中定义了多种流类型。</div>
                                </dd>
                                <dt><a href="#errors" title="Error Handling">stream error</a>
                                    <div id="rfc.iref.s.1"></div>:
                                </dt>
                                <dd style="margin-left: 1.5em">
                                    <div>单个流上的应用层错误。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.2.2.p.5">
                            <p>术语 “content” 在 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.4">RFC 9110
                                    的第 6.4 节</a> 中定义，参见 <a href="#RFC9110"><cite
                                        title="HTTP Semantics">[HTTP]</cite></a>。</p>
                        </div>
                        <div id="rfc.section.2.2.p.6">
                            <p>最后，术语“resource”、“message”、“user agent”、“origin server”、“gateway”、“intermediary”、“proxy” 和
                                “tunnel” 在 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-3">RFC 9110 的第 3
                                    节</a> 中定义，参见 <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>。</p>
                        </div>
                        <div id="rfc.section.2.2.p.7">
                            <p>本文档中的数据包图使用 <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-1.3">RFC 9000 第
                                    1.3 节</a> 中定义的格式来说明字段的顺序和大小，参见 <a href="#QUIC-TRANSPORT"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>。
                            </p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="connection-setup">
                    <h2 id="rfc.section.3" class="np"><a href="#rfc.section.3">3.</a>&nbsp;<a
                            href="#connection-setup">连接建立与管理</a></h2>
                    <section id="discovery">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a href="#discovery">发现 HTTP/3
                                端点</a></h3>
                        <div id="rfc.section.3.1.p.1">
                            <p>HTTP 依赖权威响应的概念：也就是在响应消息生成时（由 origin server 或在其指示下）已确定为对该请求最合适的响应，基于目标资源的状态。定位 HTTP URI
                                的权威服务器在 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-4.3">RFC 9110 的第
                                    4.3 节</a> 中讨论，参见 <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>。
                            </p>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <p>“https” 方案将权威性与客户端认为对 URI 的 authority 组件中标识的主机可被信任的证书的拥有权相关联。在 TLS 握手中接收到服务器证书后，客户端 <em
                                    class="bcp14">MUST</em> 使用 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-4.3.4">RFC 9110 第 4.3.4
                                    节</a> 中描述的过程验证该证书是否可接受地匹配 URI 的 origin server。如果证书无法相对于 URI 的 origin server 进行验证，客户端
                                <em class="bcp14">MUST NOT</em> 将该服务器视为该 origin 的权威服务器。
                            </p>
                        </div>
                        <div id="rfc.section.3.1.p.3">
                            <p>客户端 <em class="bcp14">MAY</em> 通过将主机标识符解析为 IP 地址、在指示的端口上与该地址建立 QUIC
                                连接（包括按上文所述验证服务器证书），并在该受保护连接上向服务器发送针对该 URI 的 HTTP/3 请求消息，来尝试访问带有 “https” URI
                                的资源。除非使用其他机制选择 HTTP/3，否则在 TLS 握手期间的应用层协议协商（ALPN；见 <a href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>）扩展中使用令牌
                                "h3"。</p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <p>连接性问题（例如，UDP 被阻塞）可能导致无法建立 QUIC 连接；在这种情况下，客户端 <em class="bcp14">SHOULD</em> 尝试使用基于 TCP 的
                                HTTP 版本。</p>
                        </div>
                        <div id="rfc.section.3.1.p.5">
                            <p>服务器 <em class="bcp14">MAY</em> 在任何 UDP 端口上提供 HTTP/3；备用服务通告总是包含显式端口，并且 URI
                                包含显式端口或与该方案相关联的默认端口。</p>
                        </div>
                        <section id="alt-svc">
                            <h4 id="rfc.section.3.1.1"><a href="#rfc.section.3.1.1">3.1.1.</a>&nbsp;<a
                                    href="#alt-svc">HTTP 替代服务</a></h4>
                            <div id="rfc.section.3.1.1.p.1">
                                <p>HTTP origin 可以通过 Alt-Svc HTTP 响应首部字段或 HTTP/2 的 ALTSVC 帧 (<a href="#ALTSVC"><cite
                                            title="HTTP Alternative Services">[ALTSVC]</cite></a>) 使用 "h3" ALPN 令牌来通告等效的
                                    HTTP/3 端点的可用性。</p>
                            </div>
                            <div id="rfc.section.3.1.1.p.2" class="avoidbreakafter">
                                <p>例如，一个 origin 可以在 HTTP 响应中包含如下首部字段，指示在相同主机名的 UDP 端口 50781 上提供 HTTP/3：</p>
                            </div>
                            <div id="rfc.section.3.1.1.p.3">
                                <pre class="text">
    Alt-Svc: h3=":50781"
    </pre>
                            </div>
                            <div id="rfc.section.3.1.1.p.4">
                                <p>在收到指示 HTTP/3 支持的 Alt-Svc 记录时，客户端 <em class="bcp14">MAY</em> 尝试与指示的主机和端口建立 QUIC
                                    连接；如果该连接成功，客户端即可使用本文档中描述的映射发送 HTTP 请求。</p>
                            </div>
                        </section>
                        <section id="other-schemes">
                            <h4 id="rfc.section.3.1.2"><a href="#rfc.section.3.1.2">3.1.2.</a>&nbsp;<a
                                    href="#other-schemes">其他方案</a></h4>
                            <div id="rfc.section.3.1.2.p.1">
                                <p>尽管 HTTP 与传输协议无关，但 "http" 方案将权威性与能够在所示端口上接受 TCP 连接的能力相关联，因为该端口属于 authority 组件中标识的主机。因为
                                    HTTP/3 不使用 TCP，HTTP/3 不能用于直接访问由 "http" URI 标识的资源的权威服务器。然而，诸如 <a href="#ALTSVC"><cite
                                            title="HTTP Alternative Services">[ALTSVC]</cite></a>
                                    之类的协议扩展允许权威服务器识别其他同样具有权威性的服务，这些服务可能可通过 HTTP/3 到达。</p>
                            </div>
                            <div id="rfc.section.3.1.2.p.2">
                                <p>在对方案不是 "https" 的 origin 发起请求之前，客户端 <em class="bcp14">MUST</em> 确保服务器愿意为该方案提供服务。对于方案为
                                    "http" 的 origin，一种实验性方法在 <a href="#RFC8164"><cite
                                            title="Opportunistic Security for HTTP/2">[RFC8164]</cite></a>
                                    中有所描述。将来可能会为各种方案定义其他机制。</p>
                            </div>
                        </section>
                    </section>
                    <section id="connection-establishment">
                        <h3 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a>&nbsp;<a
                                href="#connection-establishment">连接建立</a></h3>
                        <div id="rfc.section.3.2.p.1">
                            <p>HTTP/3 依赖于 QUIC 版本 1 作为底层传输。未来规范 <em class="bcp14">MAY</em> 定义其他 QUIC 传输版本与 HTTP/3 的配合使用。
                            </p>
                        </div>
                        <div id="rfc.section.3.2.p.2">
                            <p>QUIC 版本 1 使用 TLS 1.3 或更高版本作为其握手协议。HTTP/3 客户端 <em class="bcp14">MUST</em> 支持在 TLS
                                握手期间向服务器指示目标主机的机制。如果服务器由域名标识（见 <a href="#DNS-TERMS"><cite
                                        title="DNS Terminology">[DNS-TERMS]</cite></a>），客户端 <em class="bcp14">MUST</em>
                                发送 Server Name Indication (SNI；<a href="#RFC6066"><cite
                                        title="Transport Layer Security (TLS) Extensions: Extension Definitions">[RFC6066]</cite></a>)
                                TLS 扩展，除非使用了指示目标主机的替代机制。</p>
                        </div>
                        <div id="rfc.section.3.2.p.3">
                            <p>QUIC 连接按 <a href="#QUIC-TRANSPORT"><cite
                                        title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>
                                中描述的方式建立。在连接建立期间，通过在 TLS 握手中选择 ALPN 令牌 "h3" 来指示对 HTTP/3 的支持。握手中也 <em
                                    class="bcp14">MAY</em> 提供对其他应用层协议的支持。</p>
                        </div>
                        <div id="rfc.section.3.2.p.4">
                            <p>尽管与核心 QUIC 协议相关的连接级选项在初始加密握手中设置，特定于 HTTP/3 的设置则在 <a href="#frame-settings"
                                    title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.2"></span> 帧中传递。QUIC 连接建立后，每一端点 <a
                                    href="#frame-settings" title="SETTINGS">MUST</a> 在其相应的 HTTP <a
                                    href="#control-streams" title="Control Streams">控制流</a><span
                                    id="rfc.iref.c.4"></span> 的初始帧中发送一个 <a href="#frame-settings"
                                    title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.3"></span> 帧。</p>
                        </div>
                    </section>
                    <section id="connection-reuse">
                        <h3 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a>&nbsp;<a
                                href="#connection-reuse">连接重用</a></h3>
                        <div id="rfc.section.3.3.p.1">
                            <p>HTTP/3 连接在多个请求间保持持久。为了获得最佳性能，期望客户端不会在确定与服务器不再需要进一步通信之前关闭连接（例如，当用户离开某个网页时），或者直到服务器关闭连接。
                            </p>
                        </div>
                        <div id="rfc.section.3.3.p.2">
                            <p>一旦与服务器端点的连接存在，该连接 <em class="bcp14">MAY</em> 被重用于具有多个不同 URI authority 组件的请求。要将现有连接用于新的
                                origin，客户端 <em class="bcp14">MUST</em> 使用 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-4.3.4">RFC 9110 第 4.3.4
                                    节</a> 中描述的过程验证服务器为新 origin
                                提供的证书。这意味着客户端需要保留服务器证书以及验证该证书所需的任何附加信息；不这样做的客户端将无法重用连接以用于其他 origin。</p>
                        </div>
                        <div id="rfc.section.3.3.p.3">
                            <p>如果证书在任何方面对新 origin 不可接受，则该连接 <em class="bcp14">MUST NOT</em> 被重用，并且应为新 origin 建立一个新连接（<em
                                    class="bcp14">SHOULD</em>）。如果证书无法验证的原因可能也适用于已与该连接关联的其他 origin，客户端 <em
                                    class="bcp14">SHOULD</em> 重新验证这些 origin
                                的服务器证书。例如，如果证书验证失败是由于证书已过期或被吊销，这可能会用于使所有其他使用该证书建立权威性的 origin 失效。</p>
                        </div>
                        <div id="rfc.section.3.3.p.4">
                            <p>客户端 <em class="bcp14">SHOULD NOT</em> 打开多个到给定 IP 地址和 UDP 端口的 HTTP/3 连接，该 IP 地址和端口可能来自
                                URI、选定的备用服务 (<a href="#ALTSVC"><cite
                                        title="HTTP Alternative Services">[ALTSVC]</cite></a>)、配置的代理，或对上述任何项的名称解析。客户端
                                <em class="bcp14">MAY</em> 使用不同的传输或 TLS 配置向相同的 IP 地址和 UDP 端口打开多个 HTTP/3 连接，但 <em
                                    class="bcp14">SHOULD</em> 避免使用相同配置创建多个连接。
                            </p>
                        </div>
                        <div id="rfc.section.3.3.p.5">
                            <p>鼓励服务器尽可能长时间保持打开的 HTTP/3 连接，但在必要时允许终止空闲连接。当任一端点选择关闭 HTTP/3 连接时，终止端点 <em
                                    class="bcp14">SHOULD</em> 首先发送一个 <a href="#frame-goaway"
                                    title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.1"></span> 帧（见 <a
                                    href="#connection-shutdown" title="Connection Shutdown">第 5.2
                                    节</a>），以便双方能够可靠地确定先前发送的帧是否已被处理并优雅地完成或终止任何必要的剩余任务。</p>
                        </div>
                        <div id="rfc.section.3.3.p.6">
                            <p>不希望客户端为特定 origin 重用 HTTP/3 连接的服务器可以通过在响应请求时发送 421（Misdirected
                                Request，错误定向请求）状态码来表明其对该请求不具权威性；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.4">RFC 9110 的第 7.4
                                    节</a>。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="http-request-lifecycle">
                    <h2 id="rfc.section.4" class="np"><a href="#rfc.section.4">4.</a>&nbsp;<a
                            href="#http-request-lifecycle">在 HTTP/3 中表达 HTTP 语义</a></h2>
                    <section id="request-response">
                        <h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a>&nbsp;<a
                                href="#request-response">HTTP 消息分帧</a></h3>
                        <div id="rfc.section.4.1.p.1">
                            <p>客户端在 <a href="#request-streams" title="Bidirectional Streams">请求流</a><span
                                    id="rfc.iref.r.1"></span> 上发送 HTTP 请求，
                                该流是由客户端发起的双向 QUIC 流；参见 <a href="#request-streams" title="Bidirectional Streams">第 6.1
                                    节</a>。客户端 <em class="bcp14">MUST</em>
                                只在给定流上发送单个请求。服务器在与请求相同的流上发送零个或多个中间 HTTP 响应，随后发送单个最终 HTTP 响应，具体如下所述。关于中间和最终 HTTP
                                响应的描述，请参见 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15">第 15 节</a> 的
                                <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>。
                            </p>
                        </div>
                        <div id="rfc.section.4.1.p.2">
                            <p>被推送的响应在服务器发起的单向 QUIC 流上发送；参见 <a href="#push-streams" title="Push Streams">第 6.2.2
                                    节</a>。服务器按标准响应的相同方式发送零个或多个中间 HTTP 响应，随后发送单个最终 HTTP 响应。有关推送的更多细节，请参见 <a
                                    href="#server-push" title="Server Push">第 4.6 节</a>。</p>
                        </div>
                        <div id="rfc.section.4.1.p.3">
                            <p>在给定流上，接收多个请求或在最终 HTTP 响应之后再接收额外的 HTTP 响应 <em class="bcp14">MUST</em> 被视为 <a
                                    href="#malformed" title="Malformed Requests and Responses">格式错误</a><span
                                    id="rfc.iref.m.2"></span>。</p>
                        </div>
                        <div id="rfc.section.4.1.p.4" class="avoidbreakafter">
                            <p>一个 HTTP 消息（请求或响应）由下列部分组成：</p>
                        </div>
                        <div id="rfc.section.4.1.p.5">
                            <ol type="1">
                                <li>头部节，包括消息控制数据，作为单个 <a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                        id="rfc.iref.h.2"></span>
                                    帧发送，</li>
                                <li>可选的内容（若存在），作为一系列 <a href="#frame-data" title="DATA">DATA</a><span
                                        id="rfc.iref.d.2"></span>
                                    帧发送，和</li>
                                <li>可选的尾部节（若存在），作为单个 <a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                        id="rfc.iref.h.3"></span>
                                    帧发送。</li>
                            </ol>
                        </div>
                        <div id="rfc.section.4.1.p.6">
                            <p>头部和尾部节在 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.3">第 6.3 节</a> 和
                                <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.5">第 6.5 节</a> 的 <a
                                    href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a> 中描述；内容在 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.4">第 6.4 节</a> 中描述。
                            </p>
                        </div>
                        <div id="rfc.section.4.1.p.7">
                            <p>接收无效的帧序列 <em class="bcp14">MUST</em> 被视为一种 <a href="#errors"
                                    title="Error Handling">连接错误</a><span id="rfc.iref.c.5"></span>，类型为 <a
                                    href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.4"></span>。
                                特别地，在任何 <a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                    id="rfc.iref.h.5"></span>
                                帧之前出现 <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.3"></span> 帧，或在尾部
                                <a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.7"></span>
                                帧之后出现 <a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                    id="rfc.iref.h.6"></span>
                                或 <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.4"></span>
                                帧，均被视为无效。其他帧类型，尤其是未知帧类型，可能在遵守其自身规则的前提下被允许；参见 <a href="#extensions"
                                    title="Extensions to HTTP/3">第 9 节</a>。
                            </p>
                        </div>
                        <div id="rfc.section.4.1.p.8">
                            <p>服务器 <em class="bcp14">MAY</em> 在响应消息的帧之前、之后或与之交错地发送一个或多个 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.2"></span> 帧。这些 <a
                                    href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.3"></span> 帧并非响应的一部分；详见 <a href="#server-push" title="Server Push">第
                                    4.6 节</a>。在 <a href="#push-streams" title="Push Streams">推送流</a><span
                                    id="rfc.iref.p.5"></span> 上不允许出现 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.4"></span> 帧；如果推送的响应包含此类帧，
                                则 <em class="bcp14">MUST</em> 将其视为类型为 <a
                                    href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.8"></span> 的
                                <a href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.6"></span>。
                            </p>
                        </div>
                        <div id="rfc.section.4.1.p.9">
                            <p>未知类型的帧（参见 <a href="#extensions" title="Extensions to HTTP/3">第 9 节</a>），包括保留帧（参见 <a
                                    href="#frame-reserved" title="Reserved Frame Types">第 7.2.8 节</a>）<em
                                    class="bcp14">MAY</em>
                                在请求流或 <a href="#push-streams" title="Push Streams">推送流</a><span
                                    id="rfc.iref.p.7"></span> 上发送，且可以在本节描述的其他帧之前、之后或与之交错发送。</p>
                        </div>
                        <div id="rfc.section.4.1.p.10">
                            <p><a href="#frame-headers" title="HEADERS">HEADERS</a><span id="rfc.iref.h.9"></span> 和 <a
                                    href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.8"></span> 帧可能引用对 QPACK
                                动态表的更新。尽管这些更新不直接属于消息交换的一部分，但它们必须在消息可被消费之前被接收和处理。详见 <a href="#header-formatting"
                                    title="HTTP Fields">第 4.2 节</a>。</p>
                        </div>
                        <div id="rfc.section.4.1.p.11">
                            <p>传输编码（参见 <a href="https://www.rfc-editor.org/rfc/rfc9112.html#section-7">RFC 9112 第 7
                                    节</a>）未在 HTTP/3 中定义；不得使用 Transfer-Encoding 头字段（<em class="bcp14">MUST NOT</em>）。</p>
                        </div>
                        <div id="rfc.section.4.1.p.12">
                            <p>当且仅当一个或多个中间响应（1xx；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15.2">RFC 9110 第 15.2
                                    节</a>）在对同一请求的最终响应之前出现时，响应 <em class="bcp14">MAY</em> 由多个消息组成。中间响应不包含内容或尾部节。</p>
                        </div>
                        <div id="rfc.section.4.1.p.13">
                            <p>一次 HTTP 请求/响应交换完全占用一个客户端发起的双向 QUIC 流。发送请求后，客户端 <em class="bcp14">MUST</em> 关闭该流的发送方向。除非使用
                                CONNECT 方法（参见 <a href="#connect" title="The CONNECT Method">第 4.4 节</a>），客户端 <em
                                    class="bcp14">MUST NOT</em> 在收到响应之前将流关闭与接收响应相依。服务器在发送最终响应后 <em
                                    class="bcp14">MUST</em> 关闭流的发送方向。此时，QUIC 流完全关闭。</p>
                        </div>
                        <div id="rfc.section.4.1.p.14">
                            <p>当流被关闭时，表示最终 HTTP 消息的结束。因为有些消息很大或长度不确定，端点 <em class="bcp14">SHOULD</em>
                                一旦接收到足够多的消息以便进行处理就开始处理部分 HTTP 消息。如果客户端发起的流在未接收到足够以提供完整响应的 HTTP 消息时终止，服务器 <em
                                    class="bcp14">SHOULD</em> 使用错误码 <a
                                    href="#H3_REQUEST_INCOMPLETE">H3_REQUEST_INCOMPLETE</a><span
                                    id="rfc.iref.h.10"></span> 中止其响应流。</p>
                        </div>
                        <div id="rfc.section.4.1.p.15">
                            <p>如果响应不依赖于请求中尚未发送和接收的任何部分，服务器可以在客户端发送完整请求之前发送完整响应。当服务器不需要接收请求的其余部分时，服务器 <em
                                    class="bcp14">MAY</em> 中止读取 <a href="#request-streams"
                                    title="Bidirectional Streams">请求流</a><span id="rfc.iref.r.2"></span>，
                                发送完整响应，并干净地关闭流的发送部分。在请求客户端停止在 <a href="#request-streams"
                                    title="Bidirectional Streams">请求流</a><span id="rfc.iref.r.3"></span> 上发送时，请求使用 <a
                                    href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.11"></span> 错误码 <em
                                    class="bcp14">SHOULD</em>。客户端 <em class="bcp14">MUST NOT</em>
                                因其请求被突然终止而丢弃完整响应，尽管客户端可因其他原因自行决定丢弃响应。如果服务器发送部分或完整响应但并未中止读取请求，客户端 <em
                                    class="bcp14">SHOULD</em> 继续发送请求内容并正常关闭流。</p>
                        </div>
                        <section id="request-cancellation">
                            <h4 id="rfc.section.4.1.1"><a href="#rfc.section.4.1.1">4.1.1.</a>&nbsp;<a
                                    href="#request-cancellation">请求取消与拒绝</a></h4>
                            <div id="rfc.section.4.1.1.p.1">
                                <p>一旦打开了 <a href="#request-streams" title="Bidirectional Streams">请求流</a><span
                                        id="rfc.iref.r.4"></span>，任一端点 <em class="bcp14">MAY</em>
                                    取消该请求。客户端在不再感兴趣时取消请求；服务器在无法或选择不响应时取消请求。若可能，建议服务器发送带适当状态码的 HTTP 响应，而不是取消已开始处理的请求（<em
                                        class="bcp14">RECOMMENDED</em>）。</p>
                            </div>
                            <div id="rfc.section.4.1.1.p.2">
                                <p>实现 <em class="bcp14">SHOULD</em> 通过突然终止仍然打开的流方向来取消请求。为此，实现会重置流的发送部分并中止读取流的接收部分；参见 <a
                                        href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2.4">RFC 9000 第 2.4
                                        节</a> 的描述。</p>
                            </div>
                            <div id="rfc.section.4.1.1.p.3">
                                <p>当服务器在未进行任何应用处理的情况下取消请求时，该请求被视为“被拒绝”。服务器 <em class="bcp14">SHOULD</em> 使用错误码 <a
                                        href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span
                                        id="rfc.iref.h.12"></span>
                                    中止其响应流。在此上下文中，“已处理”意为流中的某些数据已被传递到可能基于该数据采取某些操作的更高层软件。客户端可以将服务器拒绝的请求视为从未发送，从而允许稍后重试这些请求。
                                </p>
                            </div>
                            <div id="rfc.section.4.1.1.p.4">
                                <p>服务器 <em class="bcp14">MUST NOT</em> 对部分或全部已处理的请求使用 <a
                                        href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span
                                        id="rfc.iref.h.13"></span> 错误码。当服务器在部分处理之后放弃响应时，<em class="bcp14">SHOULD</em>
                                    使用错误码 <a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                        id="rfc.iref.h.14"></span> 中止其响应流。</p>
                            </div>
                            <div id="rfc.section.4.1.1.p.5">
                                <p>客户端 <em class="bcp14">SHOULD</em> 使用错误码 <a
                                        href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                        id="rfc.iref.h.15"></span> 来取消请求。收到该错误码后，服务器 <em class="bcp14">MAY</em>
                                    如果未执行任何处理则使用错误码 <a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span
                                        id="rfc.iref.h.16"></span> 突然终止响应。客户端 <em class="bcp14">MUST NOT</em> 使用 <a
                                        href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span
                                        id="rfc.iref.h.17"></span> 错误码，除非服务器已使用该错误码请求关闭 <a href="#request-streams"
                                        title="Bidirectional Streams">请求流</a><span id="rfc.iref.r.5"></span>。</p>
                            </div>
                            <div id="rfc.section.4.1.1.p.6">
                                <p>如果在接收完整响应后流被取消，客户端 <em class="bcp14">MAY</em> 忽略取消并使用该响应。但是，如果在接收部分响应后流被取消，则 <em
                                        class="bcp14">SHOULD NOT</em> 使用该响应。只有幂等操作（例如 GET、PUT 或 DELETE）可以安全重试；客户端 <em
                                        class="bcp14">SHOULD NOT</em>
                                    自动重试非幂等方法的请求，除非它有某种方式确定请求语义独立于方法是幂等的，或有某种方式检测原始请求从未被应用。有关更多细节，请参见 <a
                                        href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.2.2">RFC 9110 第
                                        9.2.2 节</a>。</p>
                            </div>
                        </section>
                        <section id="malformed">
                            <h4 id="rfc.section.4.1.2"><a href="#rfc.section.4.1.2">4.1.2.</a>&nbsp;<a
                                    href="#malformed">格式错误的请求与响应</a></h4>
                            <div id="rfc.section.4.1.2.p.1" class="avoidbreakafter">
                                <p>格式错误的请求或响应是指帧序列在语法上可能有效但由于下列原因而无效的情况：</p>
                            </div>
                            <div id="rfc.section.4.1.2.p.2">
                                <ul>
                                    <li>存在被禁止的字段或伪首部字段，</li>
                                    <li>缺少强制的伪首部字段，</li>
                                    <li>伪首部字段具有无效的值，</li>
                                    <li>伪首部字段出现在常规字段之后，</li>
                                    <li>HTTP 消息的序列无效，</li>
                                    <li>包含大写的字段名，或</li>
                                    <li>字段名或值中包含无效字符。</li>
                                </ul>
                            </div>
                            <div id="rfc.section.4.1.2.p.3">
                                <p>当请求或响应在包含 Content-Length 头字段时被定义为具有内容（参见 <a
                                        href="https://www.rfc-editor.org/rfc/rfc9110.html#section-8.6">RFC 9110 第 8.6
                                        节</a>）且所接收的 <a href="#frame-data" title="DATA">DATA</a><span
                                        id="rfc.iref.d.5"></span>
                                    帧长度之和不等于 Content-Length 头字段值，则该请求或响应为格式错误。被定义为永远不包含内容的响应，即使存在
                                    Content-Length，也可以具有非零的 Content-Length 头字段，尽管没有在 <a href="#frame-data"
                                        title="DATA">DATA</a><span id="rfc.iref.d.6"></span> 帧中包含内容。</p>
                            </div>
                            <div id="rfc.section.4.1.2.p.4">
                                <p>处理 HTTP 请求或响应的中介（即不作为隧道的任何中介） <em class="bcp14">MUST NOT</em>
                                    转发格式错误的请求或响应。检测到的格式错误请求或响应 <em class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_MESSAGE_ERROR">H3_MESSAGE_ERROR</a><span id="rfc.iref.h.18"></span> 的
                                    <a href="#errors" title="Error Handling">流错误</a><span id="rfc.iref.s.4"></span>。
                                </p>
                            </div>
                            <div id="rfc.section.4.1.2.p.5">
                                <p>对于格式错误的请求，服务器 <em class="bcp14">MAY</em> 在关闭或重置流之前发送一个指示错误的 HTTP 响应。客户端 <em
                                        class="bcp14">MUST NOT</em> 接受格式错误的响应。请注意，这些要求旨在防护针对 HTTP
                                    的几类常见攻击；它们刻意严格，因为宽松的处理可能使实现面临这些漏洞的风险。</p>
                            </div>
                        </section>
                    </section>
                    <section id="header-formatting">
                        <h3 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2.</a>&nbsp;<a
                                href="#header-formatting">HTTP 字段</a></h3>
                        <div id="rfc.section.4.2.p.1">
                            <p>HTTP 消息将元数据作为一系列称为“HTTP 字段”的键值对来承载；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.3">第 6.3 节</a> 和 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.5">第 6.5 节</a> 的 <a
                                    href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>。有关已注册 HTTP 字段的列表，请参见由
                                IANA 维护的“Hypertext Transfer Protocol (HTTP) Field Name Registry”（&lt;<a
                                    href="https://www.iana.org/assignments/http-fields/">https://www.iana.org/assignments/http-fields/</a>&gt;）。与
                                HTTP/2 类似，HTTP/3 在字段名中字符的使用、Connection 头字段以及伪首部字段的使用上有额外的考虑。</p>
                        </div>
                        <div id="rfc.section.4.2.p.2">
                            <p>字段名是包含 ASCII 子集字符的字符串。HTTP 字段名和字段值的属性在 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.1">RFC 9110 第 5.1 节</a>
                                中有更详细讨论。字段名中的字符 <em class="bcp14">MUST</em> 在编码之前转换为小写。包含大写字符的请求或响应头字段名 <em
                                    class="bcp14">MUST</em> 被视为 <a href="#malformed"
                                    title="Malformed Requests and Responses">格式错误</a><span id="rfc.iref.m.3"></span>。
                            </p>
                        </div>
                        <div id="rfc.section.4.2.p.3">
                            <p>HTTP/3 不使用 Connection 头字段来指示连接特定字段；在此协议中，连接特定的元数据通过其他方式传递。端点 <em class="bcp14">MUST
                                    NOT</em> 生成包含连接特定字段的 HTTP/3 字段节；任何包含连接特定字段的消息 <em class="bcp14">MUST</em> 被视为 <a
                                    href="#malformed" title="Malformed Requests and Responses">格式错误</a><span
                                    id="rfc.iref.m.4"></span>。</p>
                        </div>
                        <div id="rfc.section.4.2.p.4">
                            <p>唯一的例外是 TE 头字段，它 <em class="bcp14">MAY</em> 出现在 HTTP/3 请求头中；当存在时，<em class="bcp14">MUST
                                    NOT</em> 包含除 "trailers" 之外的任何值。</p>
                        </div>
                        <div id="rfc.section.4.2.p.5">
                            <p>将 HTTP/1.x 消息转换为 HTTP/3 的中介 <em class="bcp14">MUST</em> 删除连接特定的头字段，如 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.6.1">RFC 9110 第 7.6.1
                                    节</a> 所讨论的，否则它们的消息将被其他 HTTP/3 端点视为 <a href="#malformed"
                                    title="Malformed Requests and Responses">格式错误</a><span id="rfc.iref.m.5"></span>。
                            </p>
                        </div>
                        <section id="field-compression">
                            <h4 id="rfc.section.4.2.1"><a href="#rfc.section.4.2.1">4.2.1.</a>&nbsp;<a
                                    href="#field-compression">字段压缩</a></h4>
                            <div id="rfc.section.4.2.1.p.1">
                                <p><a href="#RFC9204"><cite
                                            title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> 描述了 HPACK
                                    的一种变体，使编码器可以在引起多少首部阻塞方面拥有一定控制权。这允许编码器在压缩效率和延迟之间进行权衡。HTTP/3 使用 QPACK
                                    来压缩头部和尾部节，包括头部节中存在的控制数据。</p>
                            </div>
                            <div id="rfc.section.4.2.1.p.2">
                                <p>为提高压缩效率，Cookie 头字段（<a href="#COOKIES"><cite
                                            title="HTTP State Management Mechanism">[COOKIES]</cite></a>）<em
                                        class="bcp14">MAY</em> 在压缩之前拆分为单独的字段行，每行包含一个或多个 cookie-pair。如果解压后的字段节包含多个 cookie
                                    字段行，则在将其传入除 HTTP/2 或 HTTP/3 之外的上下文（例如 HTTP/1.1 连接或通用 HTTP 服务器应用程序）之前，<em
                                        class="bcp14">MUST</em> 使用两字节定界符 "<span class="tt"><span class="nobr">;
                                        </span></span>"（ASCII 0x3b, 0x20）将它们连接成单个字节串。</p>
                            </div>
                        </section>
                        <section id="header-size-constraints">
                            <h4 id="rfc.section.4.2.2"><a href="#rfc.section.4.2.2">4.2.2.</a>&nbsp;<a
                                    href="#header-size-constraints">首部大小约束</a></h4>
                            <div id="rfc.section.4.2.2.p.1">
                                <p>HTTP/3 实现 <em class="bcp14">MAY</em> 对其在单个 HTTP
                                    消息上接受的最大消息头大小施加限制。接收比其愿意处理的更大头部节的服务器可以发送 HTTP 431（Request Header Fields Too
                                    Large）状态码（参见 <a href="#RFC6585"><cite
                                            title="Additional HTTP Status Codes">[RFC6585]</cite></a>）。客户端可以丢弃无法处理的响应。字段列表的大小基于字段的未压缩大小计算，包括名称和值的字节长度加上每个字段
                                    32 字节的开销。</p>
                            </div>
                            <div id="rfc.section.4.2.2.p.2">
                                <p>如果实现希望告知其对等方该限制，它可以作为字节数通过 <a
                                        href="#SETTINGS_MAX_FIELD_SECTION_SIZE">SETTINGS_MAX_FIELD_SECTION_SIZE</a><span
                                        id="rfc.iref.s.5"></span>
                                    参数传达。接收此参数的实现 <em class="bcp14">SHOULD NOT</em> 发送超过所指示大小的 HTTP
                                    消息头，因为对等方很可能拒绝处理它。然而，HTTP 消息可能在到达原始服务器之前经过一个或多个中介；参见 <a
                                        href="https://www.rfc-editor.org/rfc/rfc9110.html#section-3.7">RFC 9110 第 3.7
                                        节</a>。由于该限制由处理消息的每个实现分别应用，低于此限制的消息并不保证会被接受。</p>
                            </div>
                        </section>
                    </section>
                    <section id="http-control-data">
                        <h3 id="rfc.section.4.3"><a href="#rfc.section.4.3">4.3.</a>&nbsp;<a
                                href="#http-control-data">HTTP 控制数据</a></h3>
                        <div id="rfc.section.4.3.p.1">
                            <p>与 HTTP/2 类似，HTTP/3 使用一系列伪首部字段，其字段名以字符 <span class="tt">:</span>（ASCII
                                0x3a）开头。这些伪首部字段传递消息控制数据；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-6.2">RFC 9110 第 6.2 节</a>。
                            </p>
                        </div>
                        <div id="rfc.section.4.3.p.2">
                            <p>伪首部字段不是 HTTP 字段。端点 <em class="bcp14">MUST NOT</em> 生成本文件未定义的伪首部字段。但是，扩展可以协商修改此限制；参见 <a
                                    href="#extensions" title="Extensions to HTTP/3">第 9 节</a>。</p>
                        </div>
                        <div id="rfc.section.4.3.p.3">
                            <p>伪首部字段仅在其定义的上下文中有效。为请求定义的伪首部字段 <em class="bcp14">MUST NOT</em> 出现在响应中；为响应定义的伪首部字段 <em
                                    class="bcp14">MUST NOT</em> 出现在请求中。伪首部字段 <em class="bcp14">MUST NOT</em> 出现在尾部节中。端点
                                <em class="bcp14">MUST</em> 将包含未定义或无效伪首部字段的请求或响应视为 <a href="#malformed"
                                    title="Malformed Requests and Responses">格式错误</a><span id="rfc.iref.m.6"></span>。
                            </p>
                        </div>
                        <div id="rfc.section.4.3.p.4">
                            <p>所有伪首部字段 <em class="bcp14">MUST</em> 在头部节中出现在常规头字段之前。任何包含在常规头字段之后出现的伪首部字段的请求或响应 <em
                                    class="bcp14">MUST</em> 被视为 <a href="#malformed"
                                    title="Malformed Requests and Responses">格式错误</a><span id="rfc.iref.m.7"></span>。
                            </p>
                        </div>
                        <section id="request-pseudo-header-fields">
                            <h4 id="rfc.section.4.3.1"><a href="#rfc.section.4.3.1">4.3.1.</a>&nbsp;<a
                                    href="#request-pseudo-header-fields">请求伪首部字段</a></h4>
                            <div id="rfc.section.4.3.1.p.1" class="avoidbreakafter">
                                <p>下列伪首部字段为请求所定义：</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.2">
                                <dl>
                                    <dt>":method":</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>包含 HTTP 方法（参见 <a
                                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9">RFC 9110 第
                                                9 节</a>）</div>
                                    </dd>
                                    <dt>":scheme":</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>包含目标 URI 的 scheme 部分（参见 <a
                                                href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.1">RFC 3986
                                                第 3.1 节</a>）。</div>
                                    </dd>
                                    <dt></dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>:scheme 伪首部不限于 "http" 和 "https" 的 URI。代理或网关可以为非 HTTP 的方案翻译请求，从而使 HTTP 能与非
                                            HTTP 服务交互。</div>
                                    </dd>
                                    <dt></dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>关于使用非 "https" 方案的指导，请参见 <a href="#other-schemes" title="Other Schemes">第
                                                3.1.2 节</a>。</div>
                                    </dd>
                                    <dt>":authority":</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>包含目标 URI 的 authority 部分（参见 <a
                                                href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.2">RFC 3986
                                                第 3.2 节</a>）。对于 "http" 或 "https" 方案的 URI，authority <em
                                                class="bcp14">MUST NOT</em> 包含已弃用的 userinfo 子组件。</div>
                                    </dd>
                                    <dt></dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>为确保能准确重现 HTTP/1.1 请求行，当从具有方法特定形式请求目标的 HTTP/1.1 请求转换时，该伪首部字段 <em
                                                class="bcp14">MUST</em> 被省略；参见 <a
                                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.1">RFC 9110
                                                第 7.1 节</a>。直接生成 HTTP/3 请求的客户端 <em class="bcp14">SHOULD</em> 使用
                                            :authority 伪首部字段而非 Host 头字段。将 HTTP/3 请求转换为 HTTP/1.1 的中介 <em
                                                class="bcp14">MUST</em> 在请求中没有 Host 字段时通过复制 :authority 伪首部字段的值来创建 Host
                                            字段。</div>
                                    </dd>
                                    <dt>":path":</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>包含目标 URI 的路径和查询部分（"path-absolute" 生成式及可选的一个 <span class="tt">?</span>
                                            字符（ASCII 0x3f）后跟 "query" 生成式；参见 RFC 3986 的第 3.3 和第 3.4 节）。</div>
                                    </dd>
                                    <dt></dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>对于 "http" 或 "https" URI，该伪首部字段 <em class="bcp14">MUST NOT</em> 为空；对于不含路径组件的
                                            "http" 或 "https" URI，<em class="bcp14">MUST</em> 包含值 <span
                                                class="tt">/</span>（ASCII 0x2f）。不包含路径组件的 OPTIONS 请求在 :path 伪首部字段中包含值
                                            <span class="tt">*</span>（ASCII 0x2a）；参见 <a
                                                href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.1">RFC 9110
                                                第 7.1 节</a>。
                                        </div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.4.3.1.p.3">
                                <p>所有 HTTP/3 请求 <em class="bcp14">MUST</em> 对 :method、:scheme 和 :path
                                    伪首部字段各包含且仅包含一个值，除非请求为 CONNECT 请求；参见 <a href="#connect" title="The CONNECT Method">第
                                        4.4 节</a>。</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.4">
                                <p>如果 :scheme 伪首部字段标识了具有强制 authority 组件的方案（包括 "http" 和 "https"），则请求 <em
                                        class="bcp14">MUST</em> 包含 :authority 伪首部字段或 Host 头字段之一。若这些字段存在，则 <em
                                        class="bcp14">MUST NOT</em> 为空。如果两者都存在，则 <em class="bcp14">MUST</em>
                                    包含相同的值。如果该方案不具有强制 authority 组件且请求目标未提供 authority，则请求 <em class="bcp14">MUST NOT</em>
                                    包含 :authority 伪首部或 Host 头字段。</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.5">
                                <p>省略强制伪首部字段或包含无效伪首部字段值的 HTTP 请求为 <a href="#malformed"
                                        title="Malformed Requests and Responses">格式错误</a><span
                                        id="rfc.iref.m.8"></span>。</p>
                            </div>
                            <div id="rfc.section.4.3.1.p.6">
                                <p>HTTP/3 未定义携带包含在 HTTP/1.1 请求行中的版本标识的方法。HTTP/3 请求隐含协议版本为 "3.0"。</p>
                            </div>
                        </section>
                        <section id="response-pseudo-header-fields">
                            <h4 id="rfc.section.4.3.2"><a href="#rfc.section.4.3.2">4.3.2.</a>&nbsp;<a
                                    href="#response-pseudo-header-fields">响应伪首部字段</a></h4>
                            <div id="rfc.section.4.3.2.p.1">
                                <p>对于响应，定义了单个 ":status" 伪首部字段，用于承载 HTTP 状态码；参见 <a
                                        href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15">RFC 9110 第 15
                                        节</a>。该伪首部字段 <em class="bcp14">MUST</em> 包含在所有响应中；否则响应为 <a href="#malformed"
                                        title="Malformed Requests and Responses">格式错误</a><span
                                        id="rfc.iref.m.9"></span>（参见 <a href="#malformed"
                                        title="Malformed Requests and Responses">第 4.1.2 节</a>）。</p>
                            </div>
                            <div id="rfc.section.4.3.2.p.2">
                                <p>HTTP/3 未定义携带包含在 HTTP/1.1 状态行中的版本或原因短语的方法。HTTP/3 响应隐含协议版本为 "3.0"。</p>
                            </div>
                        </section>
                    </section>
                    <section id="connect">
                        <h3 id="rfc.section.4.4"><a href="#rfc.section.4.4">4.4.</a>&nbsp;<a href="#connect">CONNECT
                                方法</a></h3>
                        <div id="rfc.section.4.4.p.1">
                            <p>CONNECT 方法请求接收方建立到请求目标所标识的目标原点服务器的隧道；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.3.6">RFC 9110 第 9.3.6
                                    节</a>。它主要与 HTTP 代理一起使用，以便为与原点服务器建立 TLS 会话从而与 "https" 资源交互。</p>
                        </div>
                        <div id="rfc.section.4.4.p.2">
                            <p>在 HTTP/1.x 中，CONNECT 用于将整个 HTTP 连接转换为到远程主机的隧道。在 HTTP/2 和 HTTP/3 中，CONNECT 方法用于在单个流上建立隧道。
                            </p>
                        </div>
                        <div id="rfc.section.4.4.p.3" class="avoidbreakafter">
                            <p>CONNECT 请求 <em class="bcp14">MUST</em> 按如下方式构造：</p>
                        </div>
                        <div id="rfc.section.4.4.p.4">
                            <ul>
                                <li>:method 伪首部字段设置为 "CONNECT"</li>
                                <li>:scheme 和 :path 伪首部字段被省略</li>
                                <li>:authority 伪首部字段包含要连接的主机和端口（等同于 CONNECT 请求目标的 authority-form；参见 <a
                                        href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.1">RFC 9110 第 7.1
                                        节</a>）。</li>
                            </ul>
                        </div>
                        <div id="rfc.section.4.4.p.5">
                            <p><a href="#request-streams" title="Bidirectional Streams">请求流</a><span
                                    id="rfc.iref.r.6"></span> 在请求结束时保持打开以承载要传输的数据。与这些限制不符的 CONNECT 请求为 <a
                                    href="#malformed" title="Malformed Requests and Responses">格式错误</a><span
                                    id="rfc.iref.m.10"></span>。</p>
                        </div>
                        <div id="rfc.section.4.4.p.6">
                            <p>支持 CONNECT 的代理建立到 :authority 伪首部字段所标识服务器的 TCP 连接（参见 <a href="#RFC0793"><cite
                                        title="Transmission Control Protocol">[RFC0793]</cite></a>）。一旦该连接成功建立，代理向客户端发送包含
                                2xx 系列状态码的 <a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                    id="rfc.iref.h.19"></span> 帧，如 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15.3">RFC 9110 第 15.3
                                    节</a> 所定义。</p>
                        </div>
                        <div id="rfc.section.4.4.p.7">
                            <p>流上的所有 <a href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.7"></span> 帧对应于在
                                TCP 连接上发送或接收的数据。由客户端发送的任何 <a href="#frame-data" title="DATA">DATA</a><span
                                    id="rfc.iref.d.8"></span> 帧的载荷由代理转发到 TCP 服务器；从 TCP 服务器接收的数据由代理打包到 <a
                                    href="#frame-data" title="DATA">DATA</a><span id="rfc.iref.d.9"></span>
                                帧中发送给客户端。请注意，TCP 段的大小和数量不保证可预测地映射到 HTTP <a href="#frame-data" title="DATA">DATA</a><span
                                    id="rfc.iref.d.10"></span> 或 QUIC STREAM 帧的大小和数量。</p>
                        </div>
                        <div id="rfc.section.4.4.p.8">
                            <p>一旦 CONNECT 方法完成，只允许在该流上发送 <a href="#frame-data" title="DATA">DATA</a><span
                                    id="rfc.iref.d.11"></span> 帧。如果扩展的定义明确允许，可使用扩展帧（<em
                                    class="bcp14">MAY</em>）。接收任何其他已知帧类型 <em class="bcp14">MUST</em> 被视为类型为 <a
                                    href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span id="rfc.iref.h.20"></span>
                                的 <a href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.7"></span>。</p>
                        </div>
                        <div id="rfc.section.4.4.p.9">
                            <p>TCP 连接可由任一对等方关闭。当客户端结束 <a href="#request-streams"
                                    title="Bidirectional Streams">请求流</a><span id="rfc.iref.r.7"></span>（即代理的接收流进入 "Data
                                Recvd" 状态）时，代理将对其与 TCP 服务器的连接设置 FIN 位。当代理接收到带 FIN 位的数据包时，它将关闭其发送给客户端的发送流。TCP
                                连接在单方向保持半关闭并非无效，但服务器通常对此处理不佳，因此客户端 <em class="bcp14">SHOULD NOT</em> 在仍期望从 CONNECT
                                目标接收数据时关闭发送方向的流。</p>
                        </div>
                        <div id="rfc.section.4.4.p.10">
                            <p>TCP <a href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.8"></span>
                                由突然终止流来表示。代理将 TCP 连接中的任何错误（包括接收到带 RST 位的 TCP 段）视为类型为 <a
                                    href="#H3_CONNECT_ERROR">H3_CONNECT_ERROR</a><span id="rfc.iref.h.21"></span> 的 <a
                                    href="#errors" title="Error Handling">流错误</a><span id="rfc.iref.s.6"></span>。</p>
                        </div>
                        <div id="rfc.section.4.4.p.11">
                            <p>相应地，如果代理检测到流或 QUIC 连接的错误，它 <em class="bcp14">MUST</em> 关闭 TCP 连接。如果代理检测到客户端已重置流或中止读取流，它
                                <em class="bcp14">MUST</em> 关闭 TCP 连接。如果流被客户端重置或读取被中止，代理 <em class="bcp14">SHOULD</em>
                                在另一方向上执行相同操作以确保流的两个方向都被取消。在所有这些情况下，如果底层 TCP 实现允许，代理 <em class="bcp14">SHOULD</em> 发送带
                                RST 位的 TCP 段。
                            </p>
                        </div>
                        <div id="rfc.section.4.4.p.12">
                            <p>由于 CONNECT 会创建到任意服务器的隧道，支持 CONNECT 的代理 <em class="bcp14">SHOULD</em>
                                将其使用限制在一组已知端口或一列安全请求目标上；更多细节请参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.3.6">RFC 9110 第 9.3.6
                                    节</a>。</p>
                        </div>
                    </section>
                    <section id="http-upgrade">
                        <h3 id="rfc.section.4.5"><a href="#rfc.section.4.5">4.5.</a>&nbsp;<a href="#http-upgrade">HTTP
                                升级</a></h3>
                        <div id="rfc.section.4.5.p.1">
                            <p>HTTP/3 不支持 HTTP Upgrade 机制（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-7.8">RFC 9110 第 7.8
                                    节</a>）或 101（Switching Protocols）信息性状态码（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-15.2.2">RFC 9110 第 15.2.2
                                    节</a>）。</p>
                        </div>
                    </section>
                    <section id="server-push">
                        <h3 id="rfc.section.4.6"><a href="#rfc.section.4.6">4.6.</a>&nbsp;<a
                                href="#server-push">服务器推送</a></h3>
                        <div id="rfc.section.4.6.p.1">
                            <p>服务器推送是一种交互模式，允许服务器在预期客户端将发出指定请求时将一个请求-响应交换推送给客户端。这在网络使用与潜在延迟收益之间进行权衡。HTTP/3 的服务器推送与 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9113.html#section-8.2">RFC 9113 第 8.2 节</a>
                                中描述的类似，但使用了不同的机制。</p>
                        </div>
                        <div id="rfc.section.4.6.p.2">
                            <p>每个服务器推送由服务器分配一个唯一的 push ID。push ID 在整个 HTTP/3 连接的生命周期内在各种上下文中用于引用该推送。</p>
                        </div>
                        <div id="rfc.section.4.6.p.3">
                            <p>push ID 空间从零开始，到由 <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span
                                    id="rfc.iref.m.11"></span>
                                帧设置的最大值结束。特别地，服务器在客户端发送 <a href="#frame-max-push-id"
                                    title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.12"></span>
                                帧之前无法进行推送。客户端通过发送 <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span
                                    id="rfc.iref.m.13"></span>
                                帧来控制服务器可以承诺的推送数量。服务器 <em class="bcp14">SHOULD</em> 顺序使用 push ID，从零开始。客户端 <em
                                    class="bcp14">MUST</em> 在未发送任何 <a href="#frame-max-push-id"
                                    title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.14"></span>
                                帧或当流引用的 push ID 大于最大 push ID 时，将接收到的 <a href="#push-streams"
                                    title="Push Streams">推送流</a><span id="rfc.iref.p.9"></span> 视为类型为 <a
                                    href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.22"></span> 的 <a
                                    href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.9"></span>。</p>
                        </div>
                        <div id="rfc.section.4.6.p.4">
                            <p>push ID 用于一个或多个承载请求消息控制数据和头字段的 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.10"></span>
                                帧。这些帧在产生推送的 <a href="#request-streams" title="Bidirectional Streams">请求流</a><span
                                    id="rfc.iref.r.8"></span> 上发送。这样可以将服务器推送与客户端请求关联。当同一 push ID 在多个 <a
                                    href="#request-streams" title="Bidirectional Streams">请求流</a><span
                                    id="rfc.iref.r.9"></span> 上被承诺时，解压后的请求字段节 <em class="bcp14">MUST</em>
                                包含相同的字段且顺序相同，且每个字段的名称和值均 <em class="bcp14">MUST</em> 完全相同。</p>
                        </div>
                        <div id="rfc.section.4.6.p.5">
                            <p>随后，push ID 会包含在最终实现这些承诺的 <a href="#push-streams" title="Push Streams">push
                                    stream</a><span id="rfc.iref.p.11"></span> 中。该 <a href="#push-streams"
                                    title="Push Streams">push stream</a><span id="rfc.iref.p.12"></span>
                                标识它所实现的承诺的 push ID，然后按照 <a href="#request-response" title="HTTP Message Framing">第 4.1
                                    节</a> 所述包含对承诺请求的响应。</p>
                        </div>
                        <div id="rfc.section.4.6.p.6">
                            <p>最后，push ID 可以用于 <a href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span
                                    id="rfc.iref.c.10"></span> 帧；参见 <a href="#frame-cancel-push" title="CANCEL_PUSH">第
                                    7.2.3 节</a>。客户端使用该帧表示它不希望接收承诺的资源。服务器使用该帧表示它不会实现先前的承诺。</p>
                        </div>
                        <div id="rfc.section.4.6.p.7" class="avoidbreakafter">
                            <p>并非所有请求都可以被推送。服务器 <em class="bcp14">MAY</em> 推送具有以下属性的请求：</p>
                        </div>
                        <div id="rfc.section.4.6.p.8">
                            <ul>
                                <li>可缓存；参见 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.2.3">RFC 9110
                                        第 9.2.3 节</a></li>
                                <li>安全（safe）；参见 <a href="https://www.rfc-editor.org/rfc/rfc9110.html#section-9.2.1">RFC
                                        9110 第 9.2.1 节</a></li>
                                <li>不包含请求内容或尾部节</li>
                            </ul>
                        </div>
                        <div id="rfc.section.4.6.p.9">
                            <p>服务器 <em class="bcp14">MUST</em> 在 :authority
                                伪首部字段中包含一个其具有权威性的值。如果客户端尚未为被推送请求所指示的原点验证该连接，它 <em class="bcp14">MUST</em>
                                在在连接上为该原点发送请求之前执行相同的验证过程；参见 <a href="#connection-reuse" title="Connection Reuse">第 3.3
                                    节</a>。如果该验证失败，客户端 <em class="bcp14">MUST NOT</em> 将服务器视为该原点的权威服务器。</p>
                        </div>
                        <div id="rfc.section.4.6.p.10">
                            <p>客户端 <em class="bcp14">SHOULD</em> 在收到承载不可缓存、未知为安全、指示存在请求内容的请求，或客户端不认为服务器对该请求具有权威性的 <a
                                    href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.13"></span> 帧时发送 <a href="#frame-cancel-push"
                                    title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.11"></span> 帧。任何相应的响应 <em
                                    class="bcp14">MUST NOT</em> 被使用或缓存。</p>
                        </div>
                        <div id="rfc.section.4.6.p.11">
                            <p>每个被推送的响应与一个或多个客户端请求相关联。该推送与在其上收到 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.14"></span> 帧的 <a
                                    href="#request-streams" title="Bidirectional Streams">请求流</a><span
                                    id="rfc.iref.r.10"></span> 相关联。同一服务器推送可以通过在多个 <a href="#request-streams"
                                    title="Bidirectional Streams">请求流</a><span id="rfc.iref.r.11"></span> 上使用相同 push ID
                                的 <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.15"></span> 帧与额外的客户端请求相关联。这些关联不影响协议的运行，但用户代理在决定如何使用被推送资源时 <em
                                    class="bcp14">MAY</em> 考虑这些关联。</p>
                        </div>
                        <div id="rfc.section.4.6.p.12">
                            <p><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.16"></span> 帧相对于响应某些部分的排序很重要。服务器 <em class="bcp14">SHOULD</em>
                                在发送引用承诺响应的 <a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                    id="rfc.iref.h.23"></span> 或 <a href="#frame-data" title="DATA">DATA</a><span
                                    id="rfc.iref.d.12"></span> 帧之前发送 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.17"></span>
                                帧。这样可以降低客户端请求将被服务器推送资源所覆盖的可能性。</p>
                        </div>
                        <div id="rfc.section.4.6.p.13">
                            <p>由于重排序，<a href="#push-streams" title="Push Streams">推送流</a><span
                                    id="rfc.iref.p.18"></span> 的数据可能在对应的 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.19"></span>
                                帧之前到达。当客户端收到带尚未知 push ID 的新 <a href="#push-streams" title="Push Streams">推送流</a><span
                                    id="rfc.iref.p.20"></span> 时，关联的客户端请求和被推送的请求头字段均是未知的。客户端可以缓冲该流的数据以等待匹配的 <a
                                    href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.21"></span> 帧。客户端可以使用流流量控制（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9000.html#section-4.1">RFC 9000 第 4.1
                                    节</a>）来限制服务器可对被推送流提交的数据量。如果在合理时间内未处理任何对应的 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.23"></span> 帧，客户端 <em
                                    class="bcp14">SHOULD</em> 中止读取并丢弃已从 <a href="#push-streams"
                                    title="Push Streams">推送流</a><span id="rfc.iref.p.22"></span> 读取的数据。</p>
                        </div>
                        <div id="rfc.section.4.6.p.14">
                            <p>推送流数据也可能在客户端已取消推送之后到达。在这种情况下，客户端可以使用错误码 <a
                                    href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                    id="rfc.iref.h.24"></span> 中止读取该流。此操作请求服务器不要传输额外数据，并表明接收到的数据将被丢弃。</p>
                        </div>
                        <div id="rfc.section.4.6.p.15">
                            <p>可缓存的被推送响应（参见 <a href="https://www.rfc-editor.org/rfc/rfc9111.html#section-3">RFC 9111 第 3
                                    节</a>）可以由实现了 HTTP 缓存的客户端存储。被推送的响应在接收时被视为已在原点服务器上成功验证（例如，如果存在 "no-cache" 缓存响应指令；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9111.html#section-5.2.2.4">RFC 9111 第
                                    5.2.2.4 节</a>）。</p>
                        </div>
                        <div id="rfc.section.4.6.p.16">
                            <p>不可缓存的被推送响应 <em class="bcp14">MUST NOT</em> 被任何 HTTP 缓存存储。它们 <em class="bcp14">MAY</em>
                                单独向应用程序提供。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="connection-closure">
                    <h2 id="rfc.section.5" class="np"><a href="#rfc.section.5">5.</a>&nbsp;<a
                            href="#connection-closure">连接关闭</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>一旦建立，HTTP/3 连接可以随时间用于多个请求和响应，直到连接被关闭。连接关闭可以通过几种不同的方式发生。</p>
                    </div>
                    <section id="idle-connections">
                        <h3 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1.</a>&nbsp;<a
                                href="#idle-connections">空闲连接</a></h3>
                        <div id="rfc.section.5.1.p.1">
                            <p>每个 QUIC 端点在握手期间声明一个空闲超时。如果 QUIC 连接在该时长内保持空闲（未接收数据包），对等方将假定连接已被关闭。如果现有连接的空闲时间超过在 QUIC
                                握手期间协商的空闲超时，HTTP/3 实现在发起新请求时需要为新的请求打开一个新的 HTTP/3 连接，并且在接近空闲超时时 <em
                                    class="bcp14">SHOULD</em> 这样做；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9000.html#section-10.1">RFC 9000 第 10.1
                                    节</a>。</p>
                        </div>
                        <div id="rfc.section.5.1.p.2">
                            <p>当有请求的响应或服务器推送尚未完成时（如 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9000.html#section-10.1.2">RFC 9000 第 10.1.2
                                    节</a> 所述），HTTP 客户端应请求传输层保持连接打开。如果客户端不期望来自服务器的响应，则允许空闲连接超时优于维持可能不需要的连接以节省资源。网关 <em
                                    class="bcp14">MAY</em> 为了预期需要而维持连接，以避免建立连接的延迟成本。服务器 <em class="bcp14">SHOULD
                                    NOT</em> 主动保持连接打开。</p>
                        </div>
                    </section>
                    <section id="connection-shutdown">
                        <h3 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2.</a>&nbsp;<a
                                href="#connection-shutdown">连接终止</a></h3>
                        <div id="rfc.section.5.2.p.1">
                            <p>即使连接未空闲，任一端点也可以决定停止使用该连接并发起优雅的连接关闭。端点通过发送一个 <a href="#frame-goaway"
                                    title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.2"></span> 帧来启动 HTTP/3 连接的优雅关闭。<a
                                    href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.3"></span>
                                帧包含一个标识符，用以指示接收方该连接上已处理或可能已处理的请求或推送的范围。服务器发送客户端发起的双向流 ID；客户端发送一个 <a href="#server-push"
                                    title="Server Push">push ID</a><span
                                    id="rfc.iref.p.24"></span>。具有该标识符或更大的请求或推送将被发送方拒绝（参见 <a href="#request-cancellation"
                                    title="Request Cancellation and Rejection">第 4.1.1 节</a>）。如果未处理任何请求或推送，此标识符 <em
                                    class="bcp14">MAY</em> 为零。</p>
                        </div>
                        <div id="rfc.section.5.2.p.2">
                            <p><a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.5"></span>
                                帧中的信息使客户端和服务器能够就哪些请求或推送在 HTTP/3 连接关闭前被接受达成一致。在发送 <a href="#frame-goaway"
                                    title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.6"></span> 帧后，端点 <em
                                    class="bcp14">SHOULD</em> 明确取消（见第 <a href="#request-cancellation"
                                    title="Request Cancellation and Rejection">4.1.1 节</a> 和 <a
                                    href="#frame-cancel-push" title="CANCEL_PUSH">7.2.3
                                    节</a>）任何标识符大于等于所示值的请求或推送，以便为受影响的流清理传输状态。随着更多请求或推送到达，端点 <em class="bcp14">SHOULD</em>
                                继续这样做。</p>
                        </div>
                        <div id="rfc.section.5.2.p.3">
                            <p>在收到对端发送的 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.7"></span>
                                帧后，端点 <em class="bcp14">MUST NOT</em> 在该连接上发起新的请求或承诺新的推送。客户端 <em class="bcp14">MAY</em>
                                建立新的连接以发送额外的请求。</p>
                        </div>
                        <div id="rfc.section.5.2.p.4" class="avoidbreakafter">
                            <p>有些请求或推送可能已经在传输中：</p>
                        </div>
                        <div id="rfc.section.5.2.p.5">
                            <ul>
                                <li>
                                    <div>
                                        <p>在收到 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                                id="rfc.iref.g.8"></span> 帧后，如果客户端已经发送了流 ID 大于或等于 <a
                                                href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                                id="rfc.iref.g.9"></span> 帧中包含的标识符的请求，则这些请求将不会被处理。客户端可以安全地在另一个 HTTP
                                            连接上重试未被处理的请求。无法重试请求的客户端在服务器关闭连接时会丢失所有在途请求。</p>
                                    </div>
                                    <div>
                                        <p>服务器在 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                                id="rfc.iref.g.10"></span> 帧中指定的流 ID
                                            之前的流上的请求可能已被处理；在收到响应、单独重置该流、收到另一个对该请求具有更低流 ID 的 <a href="#frame-goaway"
                                                title="GOAWAY">GOAWAY</a><span
                                                id="rfc.iref.g.11"></span>，或连接终止之前，其状态无法确定。</p>
                                    </div>
                                    <div>
                                        <p>如果这些流上的请求未被处理，服务器 <em class="bcp14">MAY</em> 拒绝这些低于指示 ID 的单个请求。</p>
                                    </div>
                                </li>
                                <li>如果服务器在已经承诺了 push ID 大于或等于 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                        id="rfc.iref.g.13"></span> 帧中包含的标识符的推送之后收到该 <a href="#frame-goaway"
                                        title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.12"></span> 帧，那么这些推送将不被接受。</li>
                            </ul>
                        </div>
                        <div id="rfc.section.5.2.p.6">
                            <p>当已知连接将被关闭时，即便提前通知时间很短，服务器 <em class="bcp14">SHOULD</em> 发送 <a href="#frame-goaway"
                                    title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.14"></span>
                                帧，以便远端对等方能知道某个请求是否已被部分处理。例如，如果 HTTP 客户端在服务器关闭 QUIC 连接的同时发送了 POST 请求，如果服务器未发送 <a
                                    href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.15"></span>
                                帧来指示它可能已作用的流，客户端无法知道服务器是否开始处理该 POST 请求。</p>
                        </div>
                        <div id="rfc.section.5.2.p.7">
                            <p>端点 <em class="bcp14">MAY</em> 发送多个表示不同标识符的 <a href="#frame-goaway"
                                    title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.16"></span> 帧，但每个帧中的标识符 <em
                                    class="bcp14">MUST NOT</em> 大于任何先前帧中的标识符，因为客户端可能已经在另一个 HTTP
                                连接上重试了未处理的请求。接收包含大于此前接收的标识符的 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                    id="rfc.iref.g.17"></span> 应被视为类型为 <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span
                                    id="rfc.iref.h.25"></span> 的 <a href="#errors" title="Error Handling">连接错误</a><span
                                    id="rfc.iref.c.12"></span>。</p>
                        </div>
                        <div id="rfc.section.5.2.p.8">
                            <p>试图优雅关闭连接的端点可以发送一个值设置为最大可能值的 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                    id="rfc.iref.g.18"></span> 帧（服务器为 2<sup>62</sup>-4，客户端为
                                2<sup>62</sup>-1）。这可确保对等方停止创建新的请求或推送。在允许足够时间以便在途请求或推送到达后，端点可以发送另一个 <a
                                    href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.19"></span>
                                帧以指明在连接结束前它可能接受哪些请求或推送。这样可以在不丢失请求的情况下干净地关闭连接。</p>
                        </div>
                        <div id="rfc.section.5.2.p.9">
                            <p>客户端在其发送的 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                    id="rfc.iref.g.20"></span> 中为 Push ID 字段选择值时具有更大的灵活性。值 2<sup>62</sup>-1
                                表示服务器可以继续完成已经承诺的推送。较小的值表示客户端将拒绝具有大于或等于该值的推送。像服务器一样，客户端 <em class="bcp14">MAY</em> 发送后续的
                                <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.21"></span>
                                帧，只要所指示的 <a href="#server-push" title="Server Push">push ID</a><span
                                    id="rfc.iref.p.26"></span> 不大于先前发送的任何值。
                            </p>
                        </div>
                        <div id="rfc.section.5.2.p.10">
                            <p>即使 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.22"></span>
                                指示给定请求或推送在接收时不会被处理或接受，底层传输资源仍然存在。发起这些请求的端点可以取消它们以清理传输状态。</p>
                        </div>
                        <div id="rfc.section.5.2.p.11">
                            <p>一旦所有被接受的请求和推送都被处理完毕，端点可以允许连接变为空闲，或者它 <em class="bcp14">MAY</em> 发起立即关闭连接的操作。完成优雅关闭的端点 <em
                                    class="bcp14">SHOULD</em> 在关闭连接时使用 <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span
                                    id="rfc.iref.h.26"></span> 错误码。</p>
                        </div>
                        <div id="rfc.section.5.2.p.12">
                            <p>如果客户端已使用完可用的双向流 ID 来发起请求，则服务器无需发送 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                    id="rfc.iref.g.23"></span> 帧，因为客户端无法发起更多请求。</p>
                        </div>
                    </section>
                    <section id="immediate-application-closure">
                        <h3 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3.</a>&nbsp;<a
                                href="#immediate-application-closure">立即的应用关闭</a></h3>
                        <div id="rfc.section.5.3.p.1">
                            <p>HTTP/3 实现可以在任何时候立即关闭 QUIC 连接。这将向对等方发送一个 QUIC CONNECTION_CLOSE
                                帧，表明应用层已经终止连接。该帧中的应用错误码向对等方指示为何连接被关闭。有关在 HTTP/3 中关闭连接时可使用的错误码，请参见 <a href="#errors"
                                    title="Error Handling">第 8 节</a>。</p>
                        </div>
                        <div id="rfc.section.5.3.p.2">
                            <p>在关闭连接之前，<a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.24"></span>
                                帧 <em class="bcp14">MAY</em> 被发送，以允许客户端重试某些请求。将 <a href="#frame-goaway"
                                    title="GOAWAY">GOAWAY</a><span id="rfc.iref.g.25"></span> 帧包含在与 QUIC
                                CONNECTION_CLOSE 帧相同的数据包中，会提高客户端接收到该帧的几率。</p>
                        </div>
                        <div id="rfc.section.5.3.p.3">
                            <p>如果存在未显式关闭的打开流，则在连接关闭时这些流将被隐式关闭；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9000.html#section-10.2">RFC 9000 第 10.2
                                    节</a>。</p>
                        </div>
                    </section>
                    <section id="transport-closure">
                        <h3 id="rfc.section.5.4"><a href="#rfc.section.5.4">5.4.</a>&nbsp;<a
                                href="#transport-closure">传输关闭</a></h3>
                        <div id="rfc.section.5.4.p.1">
                            <p>由于各种原因，QUIC 传输层可能会向应用层指示连接已终止。这可能是由于对等方的明确关闭、传输级别错误，或中断连通性的网络拓扑变化导致的。</p>
                        </div>
                        <div id="rfc.section.5.4.p.2">
                            <p>如果连接在没有发送 <a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                    id="rfc.iref.g.26"></span> 帧的情况下终止，客户端 <em class="bcp14">MUST</em>
                                假定任何已发送的请求（无论全部还是部分）都可能已经被处理。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="stream-mapping">
                    <h2 id="rfc.section.6" class="np"><a href="#rfc.section.6">6.</a>&nbsp;<a
                            href="#stream-mapping">流映射与使用</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>QUIC 流提供可靠的按序字节传递，但不对其他流上的字节传递顺序作出保证。在 QUIC 的第 1 版中，包含 HTTP 帧的流数据由 QUIC STREAM 帧承载，但该分层对 HTTP
                            分帧层是不可见的。传输层对接收到的流数据进行缓冲和排序，向应用暴露可靠的字节流。尽管 QUIC 允许在流内无序交付，但 HTTP/3 并不使用该特性。</p>
                    </div>
                    <div id="rfc.section.6.p.2">
                        <p>QUIC 流可以是单向的（仅从发起方到接收方传输数据）或双向的（在两个方向传输数据）。流可以由客户端或服务器发起。有关 QUIC 流的更多细节，参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2">RFC 9000 第 2 节</a>。</p>
                    </div>
                    <div id="rfc.section.6.p.3">
                        <p>当 HTTP 字段和数据在 QUIC 上传输时，QUIC 层处理大部分流管理。当使用 QUIC 时，HTTP 无需做任何额外的复用：发送到某个 QUIC 流的数据始终映射到特定的
                            HTTP 事务或整个 HTTP/3 连接上下文。</p>
                    </div>
                    <section id="request-streams">
                        <h3 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1.</a>&nbsp;<a
                                href="#request-streams">双向流</a></h3>
                        <div id="rfc.section.6.1.p.1">
                            <p>所有客户端发起的双向流都用于 HTTP 请求和响应。双向流确保响应可以方便地与请求相关联。这些流称为请求流。</p>
                        </div>
                        <div id="rfc.section.6.1.p.2">
                            <p>这意味着客户端的第一个请求发生在 QUIC 流 0 上，后续请求发生在流 4、8 等上。为了允许这些流被打开，HTTP/3 服务器 <em
                                    class="bcp14">SHOULD</em> 为允许的流数和初始流量控制窗口配置非零的最小值。为了不不必要地限制并行性，至少应允许同时存在 100
                                个请求流（<em class="bcp14">SHOULD</em>）。</p>
                        </div>
                        <div id="rfc.section.6.1.p.3">
                            <p>HTTP/3 不使用服务器发起的双向流，尽管扩展可以为这些流定义用途。除非已协商此类扩展，客户端 <em class="bcp14">MUST</em>
                                将接收服务器发起的双向流视为类型为 <a href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span
                                    id="rfc.iref.h.27"></span> 的 <a href="#errors" title="Error Handling">连接错误</a><span
                                    id="rfc.iref.c.13"></span>。</p>
                        </div>
                    </section>
                    <section id="unidirectional-streams">
                        <h3 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2.</a>&nbsp;<a
                                href="#unidirectional-streams">单向流</a></h3>
                        <div id="rfc.section.6.2.p.1">
                            <p>单向流（任一方向）用于多种用途。用途由流类型指示，该类型作为可变长度整数在流开始处发送。随后数据的格式和结构由该流类型决定。</p>
                        </div>
                        <div id="rfc.figure.1">
                            <div>
                                <pre>
    Unidirectional Stream Header {
    Stream Type (i),
    }
    </pre>
                            </div>
                        </div>
                        <p class="figure">图 1: 单向流头</p>
                        <div id="rfc.section.6.2.p.2">
                            <p>本文档中定义了两种流类型：<a href="#control-streams" title="Control Streams">control streams</a><span
                                    id="rfc.iref.c.14"></span>（见第 <a href="#control-streams"
                                    title="Control Streams">6.2.1 节</a>）和 <a href="#push-streams"
                                    title="Push Streams">push streams</a><span id="rfc.iref.p.27"></span>（见第 <a
                                    href="#push-streams" title="Push Streams">6.2.2 节</a>）。<a href="#RFC9204"><cite
                                        title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>
                                定义了另外两种流类型。其他流类型可以通过 HTTP/3 扩展定义；有关详细信息，参见 <a href="#extensions"
                                    title="Extensions to HTTP/3">第 9 节</a>。某些流类型被保留（参见 <a href="#stream-grease"
                                    title="Reserved Stream Types">第 6.2.3 节</a>）。</p>
                        </div>
                        <div id="rfc.section.6.2.p.3">
                            <p>HTTP/3
                                连接在生命周期早期阶段的性能对单向流的创建和数据交换非常敏感。过度限制流的数量或这些流的流量控制窗口的端点会增加远端对等方过早达到限制并被阻塞的概率。具体而言，实现应考虑到远端对等方可能希望对其允许使用的一些单向流行使保留流行为（参见
                                <a href="#stream-grease" title="Reserved Stream Types">第 6.2.3 节</a>）。
                            </p>
                        </div>
                        <div id="rfc.section.6.2.p.4">
                            <p>每个端点需要至少为 HTTP <a href="#control-streams" title="Control Streams">control stream</a><span
                                    id="rfc.iref.c.15"></span> 创建一个单向流。QPACK 需要另外两个单向流，其他扩展可能需要更多流。因此，客户端和服务器发送的传输参数 <em
                                    class="bcp14">MUST</em> 允许对等方创建至少三个单向流。这些传输参数 <em class="bcp14">SHOULD</em>
                                还为每个单向流提供至少 1,024 字节的流量控制额度。</p>
                        </div>
                        <div id="rfc.section.6.2.p.5">
                            <p>请注意，如果其对等方在创建关键单向流之前消耗了所有初始额度，端点并不需要授予额外额度以创建更多单向流。端点 <em class="bcp14">SHOULD</em> 先创建
                                HTTP <a href="#control-streams" title="Control Streams">control stream</a><span
                                    id="rfc.iref.c.16"></span> 以及必需扩展（例如 QPACK 编码器和解码器流）所需的单向流，然后在对等方允许时创建其他流。</p>
                        </div>
                        <div id="rfc.section.6.2.p.6">
                            <p>如果流头指示的流类型不被接收方支持，则该流的其余部分无法被消费，因为语义未知。接收到未知流类型的接收方 <em class="bcp14">MUST</em>
                                要么中止读取该流，要么丢弃到达的数据而不作进一步处理。如果中止读取，接收方 <em class="bcp14">SHOULD</em> 使用 <a
                                    href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span
                                    id="rfc.iref.h.28"></span> 错误码或保留错误码（见 <a href="#http-error-codes"
                                    title="HTTP/3 Error Codes">第 8.1 节</a>）。接收方 <em class="bcp14">MUST NOT</em>
                                将未知流类型视为任何形式的 <a href="#errors" title="Error Handling">连接错误</a><span
                                    id="rfc.iref.c.17"></span>。</p>
                        </div>
                        <div id="rfc.section.6.2.p.7">
                            <p>由于某些流类型可能影响连接状态，接收方 <em class="bcp14">SHOULD NOT</em> 在读取流类型之前丢弃来自传入单向流的数据。</p>
                        </div>
                        <div id="rfc.section.6.2.p.8">
                            <p>实现 <em class="bcp14">MAY</em> 在尚不确定对等方是否支持它们的情况下发送流类型。然而，可能修改现有协议组件状态或语义的流类型，包括 QPACK
                                或其他扩展，<em class="bcp14">MUST NOT</em> 在确认对等方支持之前发送。</p>
                        </div>
                        <div id="rfc.section.6.2.p.9">
                            <p>除非另有规定，发送方可以关闭或重置单向流。接收方 <em class="bcp14">MUST</em> 容忍在接收到单向流头之前该流被关闭或重置。</p>
                        </div>
                        <section id="control-streams">
                            <h4 id="rfc.section.6.2.1"><a href="#rfc.section.6.2.1">6.2.1.</a>&nbsp;<a
                                    href="#control-streams">控制流</a></h4>
                            <div id="rfc.section.6.2.1.p.1">
                                <p>控制流由流类型 0x00 指示。该流上的数据由 HTTP/3 帧组成，如 <a href="#frames" title="Frame Definitions">第
                                        7.2 节</a> 定义。</p>
                            </div>
                            <div id="rfc.section.6.2.1.p.2">
                                <p>每一方 <em class="bcp14">MUST</em> 在连接开始时发起单个控制流，并在该流上将其 <a href="#frame-settings"
                                        title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.7"></span>
                                    帧作为该流的第一个帧发送。如果控制流的第一个帧是任何其他帧类型，则此情形 <em class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_MISSING_SETTINGS">H3_MISSING_SETTINGS</a><span
                                        id="rfc.iref.h.29"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span
                                        id="rfc.iref.c.18"></span>。每个对等方仅允许一个控制流；接收第二个宣称为控制流的流 <em
                                        class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span
                                        id="rfc.iref.h.30"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.19"></span>。发送方 <em
                                        class="bcp14">MUST NOT</em> 关闭控制流，接收方 <em class="bcp14">MUST NOT</em>
                                    请求发送方关闭控制流。如果任一控制流在任何时间被关闭，此情形 <em class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_CLOSED_CRITICAL_STREAM">H3_CLOSED_CRITICAL_STREAM</a><span
                                        id="rfc.iref.h.31"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.20"></span>。连接错误在 <a
                                        href="#errors" title="Error Handling">第 8 节</a> 中有描述。</p>
                            </div>
                            <div id="rfc.section.6.2.1.p.3">
                                <p>因为控制流的内容被用来管理其他流的行为，端点 <em class="bcp14">SHOULD</em> 提供足够的流量控制额度，以防止对等方的控制流被阻塞。</p>
                            </div>
                            <div id="rfc.section.6.2.1.p.4">
                                <p>使用一对单向流而不是单个双向流。这允许任一对等方在可发送数据时立即发送数据。根据 QUIC 连接是否可用 0-RTT，客户端或服务器中的任一方可能先发送流数据。</p>
                            </div>
                        </section>
                        <section id="push-streams">
                            <h4 id="rfc.section.6.2.2"><a href="#rfc.section.6.2.2">6.2.2.</a>&nbsp;<a
                                    href="#push-streams">推送流</a></h4>
                            <div id="rfc.section.6.2.2.p.1">
                                <p>服务器推送是 HTTP/2 引入的可选特性，允许服务器在未收到请求前发起响应。有关更多细节，见 <a href="#server-push"
                                        title="Server Push">第 4.6 节</a>。</p>
                            </div>
                            <div id="rfc.section.6.2.2.p.2">
                                <p>推送流由流类型 0x01 指示，其后跟随以可变长度整数编码的满足承诺的 <a href="#server-push" title="Server Push">push
                                        ID</a><span id="rfc.iref.p.28"></span>。该流上剩余的数据由 HTTP/3 帧组成（见 <a href="#frames"
                                        title="Frame Definitions">第 7.2 节</a>），并通过零个或多个中间 HTTP 响应随后一个最终 HTTP
                                    响应来满足被承诺的服务器推送（见 <a href="#request-response" title="HTTP Message Framing">第 4.1
                                        节</a>）。服务器推送和 push ID 在 <a href="#server-push" title="Server Push">第 4.6 节</a>
                                    中有说明。</p>
                            </div>
                            <div id="rfc.section.6.2.2.p.3">
                                <p>只有服务器可以进行推送；如果服务器接收到客户端发起的推送流，此情形 <em class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a><span
                                        id="rfc.iref.h.32"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.21"></span>。</p>
                            </div>
                            <div id="rfc.figure.2">
                                <div>
                                    <pre>
    Push Stream Header {
    Stream Type (i) = 0x01,
    Push ID (i),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 2: 推送流头</p>
                            <div id="rfc.section.6.2.2.p.4">
                                <p>客户端 <em class="bcp14">SHOULD NOT</em> 在读取推送流头之前中止对推送流的读取，因为这可能导致客户端和服务器之间就哪些 push ID
                                    已被消耗产生分歧。</p>
                            </div>
                            <div id="rfc.section.6.2.2.p.5">
                                <p>每个 <a href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.29"></span> <em class="bcp14">MUST</em>
                                    仅在推送流头中使用一次。如果客户端检测到推送流头中包含曾在另一个推送流头中使用过的 <a href="#server-push"
                                        title="Server Push">push ID</a><span id="rfc.iref.p.30"></span>，客户端 <em
                                        class="bcp14">MUST</em> 将其视为类型为 <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span
                                        id="rfc.iref.h.33"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.22"></span>。</p>
                            </div>
                        </section>
                        <section id="stream-grease">
                            <h4 id="rfc.section.6.2.3"><a href="#rfc.section.6.2.3">6.2.3.</a>&nbsp;<a
                                    href="#stream-grease">保留的流类型</a></h4>
                            <div id="rfc.section.6.2.3.p.1">
                                <p>格式为 <span class="tt">0x1f * N + 0x21</span> 的流类型（N
                                    为非负整数）被保留以行使对未知类型应被忽略要求的检验。这些流没有语义，可在需要应用层填充时发送。它们 <em class="bcp14">MAY</em>
                                    也可在当前没有数据传输的连接上发送。端点 <em class="bcp14">MUST NOT</em> 将这些流视为接收时具有任何含义。</p>
                            </div>
                            <div id="rfc.section.6.2.3.p.2">
                                <p>流的有效载荷和长度由发送实现以任意方式选择。发送保留流类型时，实现 <em class="bcp14">MAY</em> 干净地终止该流或重置它。重置流时，应使用 <a
                                        href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.34"></span> 错误码或保留错误码（见
                                    <a href="#http-error-codes" title="HTTP/3 Error Codes">第 8.1 节</a>）。
                                </p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="http-framing-layer">
                    <h2 id="rfc.section.7" class="np"><a href="#rfc.section.7">7.</a>&nbsp;<a
                            href="#http-framing-layer">HTTP 分帧层</a></h2>
                    <div id="rfc.section.7.p.1">
                        <p>HTTP 帧在 QUIC 流上承载，如 <a href="#stream-mapping" title="Stream Mapping and Usage">第 6 节</a>
                            所述。HTTP/3 定义了三种流类型：<a href="#control-streams" title="Control Streams">control
                                stream</a><span id="rfc.iref.c.23"></span>、<a href="#request-streams"
                                title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.12"></span> 和 <a
                                href="#push-streams" title="Push Streams">push stream</a><span
                                id="rfc.iref.p.31"></span>。本节描述 HTTP/3 帧格式及其允许的流类型；参见 <a href="#stream-frame-mapping"
                                title="HTTP/3 Frames and Stream Type Overview">表 1</a> 以获取概览。附录 A.2 提供了 HTTP/2 与 HTTP/3
                            帧的比较。</p>
                    </div>
                    <div class="table table-condensed table-striped" id="stream-frame-mapping">
                        <table class="v3 text-center">
                            <caption>表 1：HTTP/3 帧与流类型概览</caption>
                            <thead>
                                <tr>
                                    <th class="text-left" colspan="1" rowspan="1">Frame</th>
                                    <th class="text-left" colspan="1" rowspan="1">Control Stream</th>
                                    <th class="text-left" colspan="1" rowspan="1">Request Stream</th>
                                    <th class="text-left" colspan="1" rowspan="1">Push Stream</th>
                                    <th class="text-left" colspan="1" rowspan="1">Section</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-data"
                                            title="DATA">DATA</a>
                                        <div id="rfc.iref.d.13"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-data" title="DATA">第
                                            7.2.1 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers"
                                            title="HEADERS">HEADERS</a>
                                        <div id="rfc.iref.h.35"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers"
                                            title="HEADERS">第 7.2.2 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push"
                                            title="CANCEL_PUSH">CANCEL_PUSH</a>
                                        <div id="rfc.iref.c.24"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push"
                                            title="CANCEL_PUSH">第 7.2.3 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings"
                                            title="SETTINGS">SETTINGS</a>
                                        <div id="rfc.iref.s.8"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes (1)</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings"
                                            title="SETTINGS">第 7.2.4 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise"
                                            title="PUSH_PROMISE">PUSH_PROMISE</a>
                                        <div id="rfc.iref.p.32"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise"
                                            title="PUSH_PROMISE">第 7.2.5 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway"
                                            title="GOAWAY">GOAWAY</a>
                                        <div id="rfc.iref.g.27"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway"
                                            title="GOAWAY">第 7.2.6 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id"
                                            title="MAX_PUSH_ID">MAX_PUSH_ID</a>
                                        <div id="rfc.iref.m.15"></div>
                                    </td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1">No</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id"
                                            title="MAX_PUSH_ID">第 7.2.7 节</a></td>
                                </tr>
                                <tr>
                                    <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1">Yes</td>
                                    <td class="text-left" colspan="1" rowspan="1"><a href="#frame-reserved"
                                            title="Reserved Frame Types">第 7.2.8 节</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="rfc.section.7.p.2">
                        <p><a href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.9"></span>
                            帧只能作为控制流的第一个帧出现；在 <a href="#stream-frame-mapping"
                                title="HTTP/3 Frames and Stream Type Overview">表 1</a> 中用 (1) 标示。相关节中提供了具体的指导。</p>
                    </div>
                    <div id="rfc.section.7.p.3">
                        <p>注意，与 QUIC 帧不同，HTTP/3 帧可以跨越多个数据包。</p>
                    </div>
                    <section id="frame-layout">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#frame-layout">帧布局</a></h3>
                        <div id="rfc.section.7.1.p.1" class="avoidbreakafter">
                            <p>所有帧具有以下格式：</p>
                        </div>
                        <div id="rfc.figure.3">
                            <div>
                                <pre>
    HTTP/3 Frame Format {
    Type (i),
    Length (i),
    Frame Payload (..),
    }
    </pre>
                            </div>
                        </div>
                        <p class="figure">图 3: HTTP/3 帧格式</p>
                        <div id="rfc.section.7.1.p.2" class="avoidbreakafter">
                            <p>帧包含下列字段：</p>
                        </div>
                        <div id="rfc.section.7.1.p.3">
                            <dl>
                                <dt>Type:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>标识帧类型的可变长度整数。</div>
                                </dd>
                                <dt>Length:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>描述帧负载字节长度的可变长度整数。</div>
                                </dd>
                                <dt>Frame Payload:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>由 Type 字段决定语义的负载。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.7.1.p.4">
                            <p>每个帧的负载 <em class="bcp14">MUST</em> 精确包含其描述中标识的字段。包含额外字节的帧负载或在标识字段结束之前终止的帧负载 <em
                                    class="bcp14">MUST</em> 被视为类型为 <a href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><span
                                    id="rfc.iref.h.36"></span> 的 <a href="#errors" title="Error Handling">连接错误</a><span
                                    id="rfc.iref.c.25"></span>。特别地，冗余的长度编码 <em class="bcp14">MUST</em> 被验证为自洽；参见 <a
                                    href="#frame-parsing" title="Frame Parsing">第 10.8 节</a>。</p>
                        </div>
                        <div id="rfc.section.7.1.p.5">
                            <p>当流被干净地终止时，如果该流上的最后一个帧被截断，则此情形 <em class="bcp14">MUST</em> 被视为类型为 <a
                                    href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><span id="rfc.iref.h.37"></span> 的 <a
                                    href="#errors" title="Error Handling">连接错误</a><span
                                    id="rfc.iref.c.26"></span>。在任意点突然终止的流可能在帧的任何位置被重置。</p>
                        </div>
                    </section>
                    <section id="frames">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a href="#frames">帧定义</a></h3>
                        <section id="frame-data">
                            <h4 id="rfc.section.7.2.1"><a href="#rfc.section.7.2.1">7.2.1.</a>&nbsp;<a
                                    href="#frame-data">DATA</a></h4>
                            <div id="rfc.section.7.2.1.p.1">
                                <p>DATA 帧（type=0x00）传输与 HTTP 请求或响应内容关联的任意可变长度字节序列。</p>
                            </div>
                            <div id="rfc.section.7.2.1.p.2">
                                <p>DATA 帧 <em class="bcp14">MUST</em> 与 HTTP 请求或响应关联。如果在 <a href="#control-streams"
                                        title="Control Streams">control stream</a><span id="rfc.iref.c.27"></span> 上接收到
                                    DATA 帧，接收方 <em class="bcp14">MUST</em> 使用类型为 <a
                                        href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.38"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.28"></span> 响应。</p>
                            </div>
                            <div id="rfc.figure.4">
                                <div>
                                    <pre>
    DATA Frame {
    Type (i) = 0x00,
    Length (i),
    Data (..),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 4: DATA 帧</p>
                        </section>
                        <section id="frame-headers">
                            <h4 id="rfc.section.7.2.2"><a href="#rfc.section.7.2.2">7.2.2.</a>&nbsp;<a
                                    href="#frame-headers">HEADERS</a></h4>
                            <div id="rfc.section.7.2.2.p.1">
                                <p>HEADERS 帧（type=0x01）用于承载使用 QPACK 编码的 HTTP 字段节。详见 <a href="#RFC9204"><cite
                                            title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>。</p>
                            </div>
                            <div id="rfc.figure.5">
                                <div>
                                    <pre>
    HEADERS Frame {
    Type (i) = 0x01,
    Length (i),
    Encoded Field Section (..),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 5: HEADERS 帧</p>
                            <div id="rfc.section.7.2.2.p.2">
                                <p>HEADERS 帧只能在 <a href="#request-streams" title="Bidirectional Streams">request
                                        streams</a><span id="rfc.iref.r.13"></span> 或 <a href="#push-streams"
                                        title="Push Streams">push streams</a><span id="rfc.iref.p.33"></span> 上发送。如果在 <a
                                        href="#control-streams" title="Control Streams">control stream</a><span
                                        id="rfc.iref.c.29"></span> 上接收到 HEADERS 帧，接收方 <em class="bcp14">MUST</em> 使用类型为
                                    <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.39"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.30"></span> 响应。
                                </p>
                            </div>
                        </section>
                        <section id="frame-cancel-push">
                            <h4 id="rfc.section.7.2.3"><a href="#rfc.section.7.2.3">7.2.3.</a>&nbsp;<a
                                    href="#frame-cancel-push">CANCEL_PUSH</a></h4>
                            <div id="rfc.section.7.2.3.p.1">
                                <p>CANCEL_PUSH 帧（type=0x03）用于在接收到 <a href="#push-streams" title="Push Streams">push
                                        stream</a><span id="rfc.iref.p.34"></span> 之前请求取消服务器推送。CANCEL_PUSH 帧通过以可变长度整数编码的
                                    <a href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.35"></span> 来标识服务器推送（见第 <a href="#server-push"
                                        title="Server Push">4.6 节</a>）。
                                </p>
                            </div>
                            <div id="rfc.section.7.2.3.p.2">
                                <p>当客户端发送 CANCEL_PUSH 帧时，表示它不希望接收所承诺的资源。服务器 <em class="bcp14">SHOULD</em>
                                    中止发送该资源，但具体机制取决于相应 <a href="#push-streams" title="Push Streams">push stream</a><span
                                        id="rfc.iref.p.36"></span> 的状态。如果服务器尚未创建 <a href="#push-streams"
                                        title="Push Streams">push stream</a><span id="rfc.iref.p.37"></span>，则它不会创建。如果
                                    <a href="#push-streams" title="Push Streams">push stream</a><span
                                        id="rfc.iref.p.38"></span> 已打开，服务器 <em class="bcp14">SHOULD</em> 突然终止该流。如果该 <a
                                        href="#push-streams" title="Push Streams">push stream</a><span
                                        id="rfc.iref.p.39"></span> 已经结束，服务器 <em class="bcp14">MAY</em> 仍可突然终止该流或 <em
                                        class="bcp14">MAY</em> 不采取任何操作。
                                </p>
                            </div>
                            <div id="rfc.section.7.2.3.p.3">
                                <p>服务器发送 CANCEL_PUSH 帧以表明它将不会实现先前发送的承诺。除非客户端已收到并处理了被承诺的响应，否则客户端不能期望相应的承诺会被实现。无论是否已打开 <a
                                        href="#push-streams" title="Push Streams">push stream</a><span
                                        id="rfc.iref.p.40"></span>，一旦服务器确定某个承诺不会被实现，服务器 <em class="bcp14">SHOULD</em> 发送
                                    CANCEL_PUSH 帧。如果流已被打开，服务器可以使用错误码 <a
                                        href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                        id="rfc.iref.h.40"></span> 中止该流的发送。</p>
                            </div>
                            <div id="rfc.section.7.2.3.p.4">
                                <p>发送 CANCEL_PUSH 帧对现有的 <a href="#push-streams" title="Push Streams">push
                                        streams</a><span id="rfc.iref.p.41"></span> 状态没有直接影响。当客户端已经接收到相应的 <a
                                        href="#push-streams" title="Push Streams">push stream</a><span
                                        id="rfc.iref.p.42"></span> 时，客户端 <em class="bcp14">SHOULD NOT</em> 发送
                                    CANCEL_PUSH 帧。由于服务器可能尚未处理 CANCEL_PUSH，<a href="#push-streams"
                                        title="Push Streams">push stream</a><span id="rfc.iref.p.43"></span> 仍可能在客户端发送
                                    CANCEL_PUSH 帧之后到达。客户端 <em class="bcp14">SHOULD</em> 使用错误码 <a
                                        href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                        id="rfc.iref.h.41"></span> 中止读取该流。</p>
                            </div>
                            <div id="rfc.section.7.2.3.p.5">
                                <p>CANCEL_PUSH 帧在 <a href="#control-streams" title="Control Streams">control
                                        stream</a><span id="rfc.iref.c.31"></span> 上发送。在控制流以外的流上接收到 CANCEL_PUSH 帧 <em
                                        class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.42"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.33"></span>。</p>
                            </div>
                            <div id="rfc.figure.6">
                                <div>
                                    <pre>
    CANCEL_PUSH Frame {
    Type (i) = 0x03,
    Length (i),
    Push ID (i),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 6: CANCEL_PUSH 帧</p>
                            <div id="rfc.section.7.2.3.p.6">
                                <p>CANCEL_PUSH 帧携带以可变长度整数编码的 <a href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.44"></span>。Push ID 字段标识被取消的服务器推送；见 <a href="#server-push"
                                        title="Server Push">第 4.6 节</a>。如果收到的 CANCEL_PUSH 帧引用了在连接上当前允许范围之外的 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.45"></span>，则此情形 <em class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.43"></span> 的 <a
                                        href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.34"></span>。
                                </p>
                            </div>
                            <div id="rfc.section.7.2.3.p.7">
                                <p>如果客户端收到 CANCEL_PUSH 帧，该帧可能指示一个由于重排序而尚未由 <a href="#frame-push-promise"
                                        title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.47"></span> 帧提及的 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.46"></span>。如果服务器收到对尚未由 <a href="#frame-push-promise"
                                        title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.49"></span> 帧提及的 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.48"></span> 的 CANCEL_PUSH 帧，则此情形 <em class="bcp14">MUST</em>
                                    被视为类型为 <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.44"></span> 的 <a
                                        href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.35"></span>。
                                </p>
                            </div>
                        </section>
                        <section id="frame-settings">
                            <h4 id="rfc.section.7.2.4"><a href="#rfc.section.7.2.4">7.2.4.</a>&nbsp;<a
                                    href="#frame-settings">SETTINGS</a></h4>
                            <div id="rfc.section.7.2.4.p.1">
                                <p>SETTINGS 帧（type=0x04）传达影响端点通信方式的配置参数，例如偏好和对等方行为的约束。单独地，SETTINGS
                                    参数也可被称为“setting”；每个设置参数的标识符和值可分别称为“setting identifier”和“setting value”。</p>
                            </div>
                            <div id="rfc.section.7.2.4.p.2">
                                <p>SETTINGS 帧总是适用于整个 HTTP/3 连接，而不是单个流。每一端点 <em class="bcp14">MUST</em> 在其 <a
                                        href="#control-streams" title="Control Streams">control stream</a><span
                                        id="rfc.iref.c.36"></span> 的第一个帧上发送一个 SETTINGS 帧（见第 <a href="#control-streams"
                                        title="Control Streams">6.2.1 节</a>），并且 <em class="bcp14">MUST NOT</em>
                                    随后再次发送。如果端点在控制流上收到第二个 SETTINGS 帧，端点 <em class="bcp14">MUST</em> 对等方发送类型为 <a
                                        href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.45"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.38"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.4.p.3">
                                <p>SETTINGS 帧 <em class="bcp14">MUST NOT</em> 在除 <a href="#control-streams"
                                        title="Control Streams">control stream</a><span id="rfc.iref.c.39"></span>
                                    之外的任何流上发送。如果端点在不同流上收到 SETTINGS 帧，端点 <em class="bcp14">MUST</em> 向对等方发送类型为 <a
                                        href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.46"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.40"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.4.p.4">
                                <p>SETTINGS 参数不是协商的；它们描述发送端点的特征，接收端点可以利用这些特征。但可以通过 SETTINGS 的使用隐含协商：每个对等方使用 SETTINGS
                                    来通告一组支持的值。设置的定义会描述每个对等方如何组合这两组值以得出将被使用的选项。SETTINGS 不提供识别该选项何时生效的机制。</p>
                            </div>
                            <div id="rfc.section.7.2.4.p.5">
                                <p>每个对等方可以为同一参数通告不同的值。例如，客户端可能愿意消费非常大的响应字段节，而服务器对请求大小更为谨慎。</p>
                            </div>
                            <div id="rfc.section.7.2.4.p.6">
                                <p>同一设置标识符 <em class="bcp14">MUST NOT</em> 在 SETTINGS 帧中出现多次。接收方 <em
                                        class="bcp14">MAY</em> 将重复设置标识符的存在视为类型为 <a
                                        href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span id="rfc.iref.h.47"></span>
                                    的 <a href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.41"></span>。
                                </p>
                            </div>
                            <div id="rfc.section.7.2.4.p.7">
                                <p>SETTINGS 帧的负载由零个或多个参数组成。每个参数包含一个设置标识符和一个值，两者均以 QUIC 可变长度整数编码。</p>
                            </div>
                            <div id="rfc.figure.7">
                                <div>
                                    <pre>
    Setting {
    Identifier (i),
    Value (i),
    }

    SETTINGS Frame {
    Type (i) = 0x04,
    Length (i),
    Setting (..) ...,
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 7: SETTINGS 帧</p>
                            <div id="rfc.section.7.2.4.p.8">
                                <p>实现 <em class="bcp14">MUST</em> 忽略任何其不理解标识符的参数。</p>
                            </div>
                            <section id="settings-parameters">
                                <h5 id="rfc.section.7.2.4.1"><a href="#rfc.section.7.2.4.1">7.2.4.1.</a>&nbsp;<a
                                        href="#settings-parameters">定义的 SETTINGS 参数</a></h5>
                                <div id="rfc.section.7.2.4.1.p.1" class="avoidbreakafter">
                                    <p>HTTP/3 中定义了下列设置：</p>
                                </div>
                                <div id="rfc.section.7.2.4.1.p.2">
                                    <dl>
                                        <dt>SETTINGS_MAX_FIELD_SECTION_SIZE (0x06)<div id="rfc.iref.s.10"></div>:</dt>
                                        <dd style="margin-left: 1.5em">
                                            <div id="SETTINGS_MAX_FIELD_SECTION_SIZE">默认值为无限。使用请参见 <a
                                                    href="#header-size-constraints" title="Header Size Constraints">第
                                                    4.2.2 节</a>。</div>
                                        </dd>
                                    </dl>
                                </div>
                                <div id="rfc.section.7.2.4.1.p.3">
                                    <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N
                                        为非负整数）的设置标识符被保留以行使对未知标识符应被忽略的要求。这类设置没有定义的含义。端点 <em class="bcp14">SHOULD</em> 在其
                                        SETTINGS 帧中至少包含一个此类设置。端点 <em class="bcp14">MUST NOT</em> 将此类设置在接收时视为具有任何含义。</p>
                                </div>
                                <div id="rfc.section.7.2.4.1.p.4">
                                    <p>由于该设置没有定义的含义，设置的值可以是实现选择的任意值。</p>
                                </div>
                                <div id="rfc.section.7.2.4.1.p.5">
                                    <p>那些在 <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> 中定义但在 HTTP/3
                                        中没有对应设置的设置标识符也已被保留（见 <a href="#iana-settings" title="Settings Parameters">第
                                            11.2.2 节</a>）。这些被保留的设置 <em class="bcp14">MUST NOT</em> 被发送，且其被接收时 <em
                                            class="bcp14">MUST</em> 被视为类型为 <a
                                            href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span
                                            id="rfc.iref.h.48"></span> 的 <a href="#errors"
                                            title="Error Handling">连接错误</a><span id="rfc.iref.c.42"></span>。</p>
                                </div>
                                <div id="rfc.section.7.2.4.1.p.6">
                                    <p>其他设置可以通过 HTTP/3 扩展定义；有关详细信息，参见 <a href="#extensions"
                                            title="Extensions to HTTP/3">第 9 节</a>。</p>
                                </div>
                            </section>
                            <section id="settings-initialization">
                                <h5 id="rfc.section.7.2.4.2"><a href="#rfc.section.7.2.4.2">7.2.4.2.</a>&nbsp;<a
                                        href="#settings-initialization">初始化</a></h5>
                                <div id="rfc.section.7.2.4.2.p.1">
                                    <p>HTTP 实现 <em class="bcp14">MUST NOT</em> 发送基于其当前对对等方设置理解而无效的帧或请求。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.2">
                                    <p>所有设置从初始值开始。每个端点 <em class="bcp14">SHOULD</em> 在对等方的 SETTINGS
                                        帧到达之前使用这些初始值发送消息，因为携带设置的数据包可能丢失或延迟。当 SETTINGS 帧到达时，任何设置被更改为其新值。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.3">
                                    <p>这消除了在发送消息之前等待 SETTINGS 帧的需要。端点 <em class="bcp14">MUST NOT</em> 在发送 SETTINGS
                                        帧之前要求先接收对等方的任何数据；设置 <em class="bcp14">MUST</em> 在传输准备好发送数据时尽快发送。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.4">
                                    <p>对于服务器，客户端设置的初始值为默认值。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.5">
                                    <p>对于使用 1-RTT QUIC 连接的客户端，服务器设置的初始值为默认值。即使服务器立即发送 SETTINGS，1-RTT 密钥也总会在处理包含 SETTINGS
                                        的数据包之前可用。客户端 <em class="bcp14">SHOULD NOT</em> 无限制地等待 SETTINGS 到达再发送请求，但它们 <em
                                            class="bcp14">SHOULD</em> 按顺序处理接收到的数据报以增加在发送第一个请求之前处理 SETTINGS 的可能性。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.6">
                                    <p>在使用 0-RTT QUIC 连接时，服务器设置的初始值为上次会话中使用的值。客户端 <em class="bcp14">SHOULD</em>
                                        存储服务器在提供恢复信息的 HTTP/3 连接中提供的设置，但在某些情况下（例如会话票据在 SETTINGS 帧之前收到）它们 <em
                                            class="bcp14">MAY</em> 选择不存储设置。客户端 <em class="bcp14">MUST</em> 在尝试 0-RTT
                                        时遵守存储的设置——如果未存储值则遵守默认值。一旦服务器提供了新的设置，客户端 <em class="bcp14">MUST</em> 遵从这些值。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.7">
                                    <p>服务器可以记住它通告的设置或在票据中存储经完整性保护的值副本，并在接受 0-RTT 数据时恢复这些信息。服务器在决定是否接受 0-RTT 数据时使用 HTTP/3
                                        设置值。如果服务器无法确定客户端记住的设置与其当前设置兼容，则它 <em class="bcp14">MUST NOT</em> 接受 0-RTT
                                        数据。若客户端遵守这些记住的设置不会违反服务器当前设置，则这些记住的设置被视为兼容。</p>
                                </div>
                                <div id="rfc.section.7.2.4.2.p.8">
                                    <p>服务器 <em class="bcp14">MAY</em> 接受 0-RTT 并随后在其 SETTINGS 帧中提供不同的设置。如果服务器接受了 0-RTT
                                        而后发送了会导致客户端使用其 0-RTT 数据违反设置的设置，则此情形 <em class="bcp14">MUST</em> 被视为类型为 <a
                                            href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span
                                            id="rfc.iref.h.49"></span> 的 <a href="#errors"
                                            title="Error Handling">连接错误</a><span id="rfc.iref.c.43"></span>。如果服务器接受
                                        0-RTT 但随后发送的 SETTINGS 帧遗漏了客户端已理解并且先前被指定为非默认值的设置（除保留标识符外），则此情形 <em
                                            class="bcp14">MUST</em> 被视为类型为 <a
                                            href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a><span
                                            id="rfc.iref.h.50"></span> 的 <a href="#errors"
                                            title="Error Handling">连接错误</a><span id="rfc.iref.c.44"></span>。</p>
                                </div>
                            </section>
                        </section>
                        <section id="frame-push-promise">
                            <h4 id="rfc.section.7.2.5"><a href="#rfc.section.7.2.5">7.2.5.</a>&nbsp;<a
                                    href="#frame-push-promise">PUSH_PROMISE</a></h4>
                            <div id="rfc.section.7.2.5.p.1">
                                <p>PUSH_PROMISE 帧（type=0x05）用于在 <a href="#request-streams"
                                        title="Bidirectional Streams">request stream</a><span id="rfc.iref.r.14"></span>
                                    上从服务器向客户端传送被承诺的请求头节。</p>
                            </div>
                            <div id="rfc.figure.8">
                                <div>
                                    <pre>
    PUSH_PROMISE Frame {
    Type (i) = 0x05,
    Length (i),
    Push ID (i),
    Encoded Field Section (..),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 8: PUSH_PROMISE 帧</p>
                            <div id="rfc.section.7.2.5.p.2" class="avoidbreakafter">
                                <p>其负载由下列部分组成：</p>
                            </div>
                            <div id="rfc.section.7.2.5.p.3">
                                <dl>
                                    <dt>Push ID:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>标识服务器推送操作的可变长度整数。<a href="#server-push" title="Server Push">push
                                                ID</a><span id="rfc.iref.p.50"></span> 在 <a href="#push-streams"
                                                title="Push Streams">push stream</a><span id="rfc.iref.p.51"></span>
                                            的头部（第 <a href="#server-push" title="Server Push">4.6 节</a>）和 <a
                                                href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span
                                                id="rfc.iref.c.45"></span> 帧中使用。</div>
                                    </dd>
                                    <dt>Encoded Field Section:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>用于被承诺响应的 QPACK 编码请求头字段。详见 <a href="#RFC9204"><cite
                                                    title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>。
                                        </div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.7.2.5.p.4">
                                <p>服务器 <em class="bcp14">MUST NOT</em> 在没有客户端在 <a href="#frame-max-push-id"
                                        title="MAX_PUSH_ID">MAX_PUSH_ID</a><span id="rfc.iref.m.16"></span>
                                    帧中提供的最大值范围内使用 <a href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.52"></span>（见第 <a href="#frame-max-push-id"
                                        title="MAX_PUSH_ID">7.2.7 节</a>）。客户端 <em class="bcp14">MUST</em> 将收到的包含大于其通告的 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.53"></span> 的 PUSH_PROMISE 帧视为类型为 <a
                                        href="#H3_ID_ERROR">H3_ID_ERROR</a><span id="rfc.iref.h.51"></span> 的 <a
                                        href="#errors" title="Error Handling">连接错误</a><span id="rfc.iref.c.46"></span>。
                                </p>
                            </div>
                            <div id="rfc.section.7.2.5.p.5">
                                <p>服务器 <em class="bcp14">MAY</em> 在多个 PUSH_PROMISE 帧中使用相同的 <a href="#server-push"
                                        title="Server Push">push ID</a><span id="rfc.iref.p.54"></span>。如果如此，解压后的请求头集
                                    <em class="bcp14">MUST</em> 包含相同字段且顺序相同，且每个字段的名称和值 <em class="bcp14">MUST</em>
                                    完全匹配。客户端 <em class="bcp14">SHOULD</em> 比较多次承诺同一资源的请求头节。如果客户端接收到已经被承诺的 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.55"></span> 并发现不匹配，则 <em class="bcp14">MUST</em> 使用类型为 <a
                                        href="#H3_GENERAL_PROTOCOL_ERROR">H3_GENERAL_PROTOCOL_ERROR</a><span
                                        id="rfc.iref.h.52"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.47"></span>
                                    响应。如果解压后的字段节完全匹配，客户端 <em class="bcp14">SHOULD</em> 将被推送的内容与在其上收到 PUSH_PROMISE
                                    帧的每个流关联。
                                </p>
                            </div>
                            <div id="rfc.section.7.2.5.p.6">
                                <p>允许对同一 <a href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.56"></span> 的重复引用主要是为了减少并发请求导致的重复。服务器 <em
                                        class="bcp14">SHOULD</em> 避免长时间重用同一 <a href="#server-push"
                                        title="Server Push">push ID</a><span
                                        id="rfc.iref.p.57"></span>。客户端可能会消费服务器推送的响应并不会长期保留以供重用。看到使用其已消费并丢弃的 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.58"></span> 的 PUSH_PROMISE 帧的客户端将被迫忽略该承诺。</p>
                            </div>
                            <div id="rfc.section.7.2.5.p.7">
                                <p>如果在 <a href="#control-streams" title="Control Streams">control stream</a><span
                                        id="rfc.iref.c.48"></span> 上接收到 PUSH_PROMISE 帧，客户端 <em class="bcp14">MUST</em>
                                    使用类型为 <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.53"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.49"></span> 响应。</p>
                            </div>
                            <div id="rfc.section.7.2.5.p.8">
                                <p>客户端 <em class="bcp14">MUST NOT</em> 发送 PUSH_PROMISE 帧。服务器 <em class="bcp14">MUST</em>
                                    将接收到 PUSH_PROMISE 帧视为类型为 <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.54"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.50"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.5.p.9">
                                <p>有关整体服务器推送机制的描述，请参见 <a href="#server-push" title="Server Push">第 4.6 节</a>。</p>
                            </div>
                        </section>
                        <section id="frame-goaway">
                            <h4 id="rfc.section.7.2.6"><a href="#rfc.section.7.2.6">7.2.6.</a>&nbsp;<a
                                    href="#frame-goaway">GOAWAY</a></h4>
                            <div id="rfc.section.7.2.6.p.1">
                                <p>GOAWAY 帧（type=0x07）用于由任一端点启动 HTTP/3 连接的优雅关闭。GOAWAY
                                    允许端点停止接受新请求或推送，同时仍完成对先前接收的请求和推送的处理。这支持诸如服务器维护之类的管理操作。仅发送 GOAWAY 本身并不会关闭连接。</p>
                            </div>
                            <div id="rfc.figure.9">
                                <div>
                                    <pre>
    GOAWAY Frame {
    Type (i) = 0x07,
    Length (i),
    Stream ID/Push ID (i),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 9: GOAWAY 帧</p>
                            <div id="rfc.section.7.2.6.p.2">
                                <p>GOAWAY 帧总是在 <a href="#control-streams" title="Control Streams">control
                                        stream</a><span id="rfc.iref.c.51"></span>
                                    上发送。在服务器到客户端方向，它携带一个以可变长度整数编码的客户端发起的双向 QUIC 流 ID。客户端 <em class="bcp14">MUST</em>
                                    将包含任何其他类型流 ID 的 GOAWAY 帧视为类型为 <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span
                                        id="rfc.iref.h.55"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.52"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.6.p.3">
                                <p>在客户端到服务器方向，GOAWAY 帧携带一个以可变长度整数编码的 <a href="#server-push" title="Server Push">push
                                        ID</a><span id="rfc.iref.p.59"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.6.p.4">
                                <p>GOAWAY 帧适用于整个连接，而不是特定流。客户端 <em class="bcp14">MUST</em> 将在非 <a href="#control-streams"
                                        title="Control Streams">control stream</a><span id="rfc.iref.c.53"></span> 上的
                                    GOAWAY 帧视为类型为 <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.56"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.54"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.6.p.5">
                                <p>关于 GOAWAY 帧的更多信息，请参见 <a href="#connection-shutdown" title="Connection Shutdown">第 5.2
                                        节</a>。</p>
                            </div>
                        </section>
                        <section id="frame-max-push-id">
                            <h4 id="rfc.section.7.2.7"><a href="#rfc.section.7.2.7">7.2.7.</a>&nbsp;<a
                                    href="#frame-max-push-id">MAX_PUSH_ID</a></h4>
                            <div id="rfc.section.7.2.7.p.1">
                                <p>MAX_PUSH_ID 帧（type=0x0d）由客户端用于控制服务器可以发起的服务器推送数量。它设置服务器可在 <a
                                        href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                        id="rfc.iref.p.61"></span> 和 <a href="#frame-cancel-push"
                                        title="CANCEL_PUSH">CANCEL_PUSH</a><span id="rfc.iref.c.55"></span> 帧中使用的最大 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.60"></span>。因此，这也限制了服务器在 QUIC 传输维持的限制之外可以启动的 <a
                                        href="#push-streams" title="Push Streams">push streams</a><span
                                        id="rfc.iref.p.62"></span> 数量。</p>
                            </div>
                            <div id="rfc.section.7.2.7.p.2">
                                <p>MAX_PUSH_ID 帧总是在 <a href="#control-streams" title="Control Streams">control
                                        stream</a><span id="rfc.iref.c.56"></span> 上发送。在任何其他流上接收到 MAX_PUSH_ID 帧 <em
                                        class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.57"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.57"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.7.p.3">
                                <p>服务器 <em class="bcp14">MUST NOT</em> 发送 MAX_PUSH_ID 帧。客户端 <em class="bcp14">MUST</em>
                                    将接收到 MAX_PUSH_ID 帧视为类型为 <a href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.58"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.58"></span>。</p>
                            </div>
                            <div id="rfc.section.7.2.7.p.4">
                                <p>创建 HTTP/3 连接时，最大 <a href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.63"></span> 未设置，这意味着服务器在接收到 MAX_PUSH_ID
                                    帧之前无法进行推送。希望管理承诺服务器推送数量的客户端可以在服务器完成或取消服务器推送时通过发送 MAX_PUSH_ID 帧来增加服务器可使用的最大 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.64"></span>。</p>
                            </div>
                            <div id="rfc.figure.10">
                                <div>
                                    <pre>
    MAX_PUSH_ID Frame {
    Type (i) = 0x0d,
    Length (i),
    Push ID (i),
    }
    </pre>
                                </div>
                            </div>
                            <p class="figure">图 10: MAX_PUSH_ID 帧</p>
                            <div id="rfc.section.7.2.7.p.5">
                                <p>MAX_PUSH_ID 帧携带一个可变长度整数，该整数标识服务器可使用的最大 <a href="#server-push"
                                        title="Server Push">push ID</a><span id="rfc.iref.p.65"></span>；见 <a
                                        href="#server-push" title="Server Push">第 4.6 节</a>。MAX_PUSH_ID 帧不能减少最大 <a
                                        href="#server-push" title="Server Push">push ID</a><span
                                        id="rfc.iref.p.66"></span>；接收到包含比先前接收值更小值的 MAX_PUSH_ID 帧 <em
                                        class="bcp14">MUST</em> 被视为类型为 <a href="#H3_ID_ERROR">H3_ID_ERROR</a><span
                                        id="rfc.iref.h.59"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.59"></span>。</p>
                            </div>
                        </section>
                        <section id="frame-reserved">
                            <h4 id="rfc.section.7.2.8"><a href="#rfc.section.7.2.8">7.2.8.</a>&nbsp;<a
                                    href="#frame-reserved">保留的帧类型</a></h4>
                            <div id="rfc.section.7.2.8.p.1">
                                <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N 为非负整数）的帧类型被保留以行使对未知类型应被忽略的要求（参见 <a
                                        href="#extensions" title="Extensions to HTTP/3">第 9 节</a>）。这些帧没有语义，且它们 <em
                                        class="bcp14">MAY</em> 在允许发送帧的任何流上发送。这使其可用于应用层填充。端点 <em class="bcp14">MUST
                                        NOT</em> 将这些帧在接收时视为具有任何含义。</p>
                            </div>
                            <div id="rfc.section.7.2.8.p.2">
                                <p>帧的有效载荷和长度由实现以任意方式选择。</p>
                            </div>
                            <div id="rfc.section.7.2.8.p.3">
                                <p>那些在 HTTP/2 中使用但在 HTTP/3 中没有对应帧的帧类型也被保留（见 <a href="#iana-frames" title="Frame Types">第
                                        11.2.1 节</a>）。这些帧类型 <em class="bcp14">MUST NOT</em> 被发送，其接收 <em
                                        class="bcp14">MUST</em> 被视为类型为 <a
                                        href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                        id="rfc.iref.h.60"></span> 的 <a href="#errors"
                                        title="Error Handling">连接错误</a><span id="rfc.iref.c.60"></span>。</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="errors">
                    <h2 id="rfc.section.8" class="np"><a href="#rfc.section.8">8.</a>&nbsp;<a href="#errors">错误处理</a>
                    </h2>
                    <div id="rfc.section.8.p.1">
                        <p>当某个流无法成功完成时，QUIC 允许应用程序突然终止（重置）该流并传达原因；参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9000.html#section-2.4">Section 2.4</a> 的 <a
                                href="#QUIC-TRANSPORT"><cite
                                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>。这称为“流错误”。HTTP/3
                            实现可以决定关闭 QUIC 流并传达错误类型。错误代码的线编码在 <a href="#http-error-codes" title="HTTP/3 Error Codes">第
                                8.1 节</a> 中定义。流错误不同于表示错误情况的 HTTP 状态码。流错误表示发送方未传输或消费完整的请求或响应，而 HTTP 状态码表示已成功接收请求后的处理结果。
                        </p>
                    </div>
                    <div id="rfc.section.8.p.2">
                        <p>如果需要终止整个连接，QUIC 同样提供了传达原因的机制；参见 <a
                                href="https://www.rfc-editor.org/rfc/rfc9000.html#section-5.3">Section 5.3</a> 的 <a
                                href="#QUIC-TRANSPORT"><cite
                                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>。这称为“连接错误”。与流错误类似，HTTP/3
                            实现可以终止 QUIC 连接并使用来自 <a href="#http-error-codes" title="HTTP/3 Error Codes">第 8.1 节</a>
                            的错误代码来传达原因。</p>
                    </div>
                    <div id="rfc.section.8.p.3">
                        <p>尽管关闭流和连接的原因被称为“错误”，但这些操作不一定表示连接或任一实现存在问题。例如，当所请求的资源不再需要时，可以重置流。</p>
                    </div>
                    <div id="rfc.section.8.p.4">
                        <p>在某些情况下，端点 <em class="bcp14">MAY</em> 选择将流错误视为连接错误，在单个流出现问题时关闭整个连接。实现需要在做出此选择之前考虑对未完成请求的影响。
                        </p>
                    </div>
                    <div id="rfc.section.8.p.5">
                        <p>因为可以在无需协商的情况下定义新的错误代码（参见 <a href="#extensions" title="Extensions to HTTP/3">第 9
                                节</a>），在意外上下文中使用某个错误代码或收到未知错误代码时，<em class="bcp14">MUST</em> 将其视为等同于 <a
                                href="#H3_NO_ERROR">H3_NO_ERROR</a><span
                                id="rfc.iref.h.61"></span>。不过，无论错误代码为何，关闭流可能仍会产生其它影响；例如，参见 <a href="#request-response"
                                title="HTTP Message Framing">第 4.1 节</a>。</p>
                    </div>
                    <section id="http-error-codes">
                        <h3 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1.</a>&nbsp;<a
                                href="#http-error-codes">HTTP/3 错误代码</a></h3>
                        <div id="rfc.section.8.1.p.1">
                            <p>下列错误代码被定义用于在突然终止流、终止读取流或立即关闭 HTTP/3 连接时使用。</p>
                        </div>
                        <div id="rfc.section.8.1.p.2">
                            <dl>
                                <dt>H3_NO_ERROR (0x0100)<div id="rfc.iref.h.62"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_NO_ERROR">无错误。当需要关闭连接或流但无需报告错误时使用。</div>
                                </dd>
                                <dt>H3_GENERAL_PROTOCOL_ERROR (0x0101)<div id="rfc.iref.h.63"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_GENERAL_PROTOCOL_ERROR">对等方以不符合更具体错误代码的方式违反了协议要求，或端点拒绝使用更具体的错误代码。</div>
                                </dd>
                                <dt>H3_INTERNAL_ERROR (0x0102)<div id="rfc.iref.h.64"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_INTERNAL_ERROR">HTTP 堆栈中发生了内部错误。</div>
                                </dd>
                                <dt>H3_STREAM_CREATION_ERROR (0x0103)<div id="rfc.iref.h.65"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_STREAM_CREATION_ERROR">端点检测到其对端创建了一个其不会接受的流。</div>
                                </dd>
                                <dt>H3_CLOSED_CRITICAL_STREAM (0x0104)<div id="rfc.iref.h.66"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_CLOSED_CRITICAL_STREAM">HTTP/3 连接所需的某个流被关闭或重置。</div>
                                </dd>
                                <dt>H3_FRAME_UNEXPECTED (0x0105)<div id="rfc.iref.h.67"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_FRAME_UNEXPECTED">在当前状态或当前流上接收到了不被允许的帧。</div>
                                </dd>
                                <dt>H3_FRAME_ERROR (0x0106)<div id="rfc.iref.h.68"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_FRAME_ERROR">接收到不满足布局要求或大小无效的帧。</div>
                                </dd>
                                <dt>H3_EXCESSIVE_LOAD (0x0107)<div id="rfc.iref.h.69"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_EXCESSIVE_LOAD">端点检测到其对端表现出可能引起过度负载的行为。</div>
                                </dd>
                                <dt>H3_ID_ERROR (0x0108)<div id="rfc.iref.h.70"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_ID_ERROR">流 ID 或 <a href="#server-push" title="Server Push">push
                                            ID</a><span id="rfc.iref.p.67"></span> 被错误使用，例如超出限制、减少限制或被重用。</div>
                                </dd>
                                <dt>H3_SETTINGS_ERROR (0x0109)<div id="rfc.iref.h.71"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_SETTINGS_ERROR">端点检测到 <a href="#frame-settings"
                                            title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.11"></span> 帧的负载有错误。</div>
                                </dd>
                                <dt>H3_MISSING_SETTINGS (0x010a)<div id="rfc.iref.h.72"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_MISSING_SETTINGS">在 <a href="#control-streams"
                                            title="Control Streams">control stream</a><span id="rfc.iref.c.61"></span>
                                        的开始处未收到 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span
                                            id="rfc.iref.s.12"></span> 帧。</div>
                                </dd>
                                <dt>H3_REQUEST_REJECTED (0x010b)<div id="rfc.iref.h.73"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_REQUEST_REJECTED">服务器在未执行任何应用处理的情况下拒绝了请求。</div>
                                </dd>
                                <dt>H3_REQUEST_CANCELLED (0x010c)<div id="rfc.iref.h.74"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_REQUEST_CANCELLED">请求或其响应（包括被推送的响应）被取消。</div>
                                </dd>
                                <dt>H3_REQUEST_INCOMPLETE (0x010d)<div id="rfc.iref.h.75"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_REQUEST_INCOMPLETE">客户端的流在未包含完整请求的情况下终止。</div>
                                </dd>
                                <dt>H3_MESSAGE_ERROR (0x010e)<div id="rfc.iref.h.76"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_MESSAGE_ERROR">HTTP 消息为 <a href="#malformed"
                                            title="Malformed Requests and Responses">格式错误</a><span
                                            id="rfc.iref.m.17"></span>，无法被处理。</div>
                                </dd>
                                <dt>H3_CONNECT_ERROR (0x010f)<div id="rfc.iref.h.77"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_CONNECT_ERROR">对 CONNECT 请求建立的 TCP 连接被重置或异常关闭。</div>
                                </dd>
                                <dt>H3_VERSION_FALLBACK (0x0110)<div id="rfc.iref.h.78"></div>:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div id="H3_VERSION_FALLBACK">请求的操作不能通过 HTTP/3 提供服务。对端应重试使用 HTTP/1.1。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.8.1.p.3">
                            <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N 为非负整数）的错误代码空间被保留，用以检验对未知错误代码应被视为等同于 <a
                                    href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.79"></span> 的要求（参见 <a
                                    href="#extensions" title="Extensions to HTTP/3">第 9 节</a>）。实现 <em
                                    class="bcp14">SHOULD</em> 在本应发送 <a href="#H3_NO_ERROR">H3_NO_ERROR</a><span
                                    id="rfc.iref.h.80"></span> 的情况下，以一定概率从该空间中选择一个错误代码。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="extensions">
                    <h2 id="rfc.section.9" class="np"><a href="#rfc.section.9">9.</a>&nbsp;<a href="#extensions">HTTP/3
                            的扩展</a></h2>
                    <div id="rfc.section.9.p.1">
                        <p>HTTP/3 允许对协议进行扩展。在本节所述的限制范围内，协议扩展可用于提供附加服务或改变协议的任何方面。扩展仅在单个 HTTP/3 连接的范围内生效。</p>
                    </div>
                    <div id="rfc.section.9.p.2">
                        <p>这适用于本文档中定义的协议元素。这并不影响现有的扩展 HTTP 的选项，例如定义新的方法、状态码或字段。</p>
                    </div>
                    <div id="rfc.section.9.p.3">
                        <p>扩展可以使用新的帧类型（<a href="#frames" title="Frame Definitions">第 7.2 节</a>）、新的设置（<a
                                href="#settings-parameters" title="Defined SETTINGS Parameters">第 7.2.4.1
                                节</a>）、新的错误代码（<a href="#errors" title="Error Handling">第 8 节</a>）或新的单向流类型（<a
                                href="#unidirectional-streams" title="Unidirectional Streams">第 6.2
                                节</a>）。为管理这些扩展点建立了注册表：帧类型（<a href="#iana-frames" title="Frame Types">第 11.2.1
                                节</a>）、设置（<a href="#iana-settings" title="Settings Parameters">第 11.2.2 节</a>）、错误代码（<a
                                href="#iana-error-codes" title="Error Codes">第 11.2.3 节</a>）和流类型（<a
                                href="#iana-stream-types" title="Stream Types">第 11.2.4 节</a>）。</p>
                    </div>
                    <div id="rfc.section.9.p.4">
                        <p>实现 <em class="bcp14">MUST</em> 忽略所有可扩展协议元素中未知或不受支持的值。实现 <em class="bcp14">MUST</em>
                            丢弃具有未知或不受支持类型的单向流上的数据或中止读取。这意味着可以在无需事先协商的情况下安全地使用这些扩展点。不过，当已知的帧类型被要求位于特定位置（例如 <a
                                href="#frame-settings" title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.13"></span> 帧作为
                            <a href="#control-streams" title="Control Streams">control stream</a><span
                                id="rfc.iref.c.62"></span> 的第一个帧，见 <a href="#control-streams" title="Control Streams">第
                                6.2.1 节</a>）时，未知帧类型不能满足该要求，且 <em class="bcp14">SHOULD</em> 被视为错误。
                        </p>
                    </div>
                    <div id="rfc.section.9.p.5">
                        <p>可能改变已有协议组件语义的扩展 <em class="bcp14">MUST</em> 在使用前进行协商。例如，改变 <a href="#frame-headers"
                                title="HEADERS">HEADERS</a><span id="rfc.iref.h.81"></span>
                            帧布局的扩展在对端给出正面信号之前不得使用。协调何时使修订的布局生效可能很复杂。因此，为现有协议元素的新定义分配新的标识符通常更有效。</p>
                    </div>
                    <div id="rfc.section.9.p.6">
                        <p>本文档未规定协商扩展使用的具体方法，但指出可以使用一个设置（<a href="#settings-parameters"
                                title="Defined SETTINGS Parameters">第 7.2.4.1
                                节</a>）来实现该目的。如果双方都设置了表示愿意使用扩展的值，则可使用该扩展。如果使用设置来协商扩展，则默认值 <em class="bcp14">MUST</em>
                            以在省略该设置时禁用扩展的方式定义。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="security-considerations">
                    <h2 id="rfc.section.10" class="np"><a href="#rfc.section.10">10.</a>&nbsp;<a
                            href="#security-considerations">安全性考虑</a></h2>
                    <div id="rfc.section.10.p.1">
                        <p>HTTP/3 的安全性考虑应与使用 TLS 的 HTTP/2 相当。然而，许多来自 <a
                                href="https://www.rfc-editor.org/rfc/rfc9113.html#section-10">RFC 9113 第 10 节</a>
                            的考虑同样适用于 <a href="#QUIC-TRANSPORT"><cite
                                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[QUIC-TRANSPORT]</cite></a>，并在该文档中讨论。
                        </p>
                    </div>
                    <section id="server-authority">
                        <h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a>&nbsp;<a
                                href="#server-authority">服务器权限</a></h3>
                        <div id="rfc.section.10.1.p.1">
                            <p>HTTP/3 依赖于 HTTP 对权限的定义。建立权限的安全性考虑在 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-17.1">RFC 9110 第 17.1
                                    节</a> 中讨论，参见 <a href="#RFC9110"><cite title="HTTP Semantics">[HTTP]</cite></a>。</p>
                        </div>
                    </section>
                    <section id="cross-protocol-attacks">
                        <h3 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a>&nbsp;<a
                                href="#cross-protocol-attacks">跨协议攻击</a></h3>
                        <div id="rfc.section.10.2.p.1">
                            <p>在 TLS 和 QUIC 握手中使用 ALPN 在处理应用层字节之前确定目标应用协议。这确保了端点有强有力的保证，表明对端正在使用相同的协议。</p>
                        </div>
                        <div id="rfc.section.10.2.p.2">
                            <p>这并不能保证免受所有跨协议攻击。<a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-21.5">RFC
                                    9000 第 21.5 节</a> 描述了明文 QUIC 数据包如何被用来对不使用认证传输的端点进行请求伪造的若干方式。</p>
                        </div>
                    </section>
                    <section id="intermediary-encapsulation-attacks">
                        <h3 id="rfc.section.10.3"><a href="#rfc.section.10.3">10.3.</a>&nbsp;<a
                                href="#intermediary-encapsulation-attacks">中介封装攻击</a></h3>
                        <div id="rfc.section.10.3.p.1">
                            <p>HTTP/3 的字段编码允许表达在 HTTP 语法中并非有效字段名的名称（参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.1">RFC 9110 第 5.1
                                    节</a>）。包含无效字段名的请求或响应 <em class="bcp14">MUST</em> 被视为 <a href="#malformed"
                                    title="Malformed Requests and Responses">格式错误</a><span
                                    id="rfc.iref.m.18"></span>。因此，中介不能将包含无效字段名的 HTTP/3 请求或响应转换为 HTTP/1.1 消息。</p>
                        </div>
                        <div id="rfc.section.10.3.p.2">
                            <p>同样，HTTP/3 可以传输并非总是有效的字段值。尽管大多数可编码的值不会改变字段解析，但回车（ASCII 0x0d）、换行（ASCII 0x0a）和空字符（ASCII
                                0x00）在被逐字翻译时可能会被攻击者利用。如果请求或响应包含字段值中不允许的字符，该请求或响应 <em class="bcp14">MUST</em> 被视为 <a
                                    href="#malformed" title="Malformed Requests and Responses">格式错误</a><span
                                    id="rfc.iref.m.19"></span>。有效字符由 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-5.5">RFC 9110 第 5.5 节</a>
                                中的 "field-content" ABNF 规则定义。</p>
                        </div>
                    </section>
                    <section id="cacheability-of-pushed-responses">
                        <h3 id="rfc.section.10.4"><a href="#rfc.section.10.4">10.4.</a>&nbsp;<a
                                href="#cacheability-of-pushed-responses">被推送响应的可缓存性</a></h3>
                        <div id="rfc.section.10.4.p.1">
                            <p>被推送的响应没有来自客户端的显式请求；请求由服务器在 <a href="#frame-push-promise"
                                    title="PUSH_PROMISE">PUSH_PROMISE</a><span id="rfc.iref.p.68"></span> 帧中提供。</p>
                        </div>
                        <div id="rfc.section.10.4.p.2">
                            <p>是否缓存被推送的响应可以依据原点服务器在 Cache-Control
                                头字段中提供的指导来决定。然而，如果单个服务器托管多个租户，这可能引发问题。例如，服务器可能为多个用户各自提供其 URI 空间的一小部分。</p>
                        </div>
                        <div id="rfc.section.10.4.p.3">
                            <p>当多个租户共享同一服务器空间时，该服务器 <em class="bcp14">MUST</em>
                                确保租户不能推送其无权代表的资源的表示。未能强制执行此类限制将允许某一租户提供一个表示并使其被缓存，从而覆盖权威租户提供的实际表示。</p>
                        </div>
                        <div id="rfc.section.10.4.p.4">
                            <p>客户端必须拒绝对其原点服务器不具权威性的被推送响应；参见 <a href="#server-push" title="Server Push">第 4.6 节</a>。</p>
                        </div>
                    </section>
                    <section id="denial-of-service-considerations">
                        <h3 id="rfc.section.10.5"><a href="#rfc.section.10.5">10.5.</a>&nbsp;<a
                                href="#denial-of-service-considerations">拒绝服务（DoS）考虑</a></h3>
                        <div id="rfc.section.10.5.p.1">
                            <p>HTTP/3 连接所需的资源承诺可能比 HTTP/1.1 或 HTTP/2
                                更大。字段压缩和流量控制的使用依赖于为存储更多状态而作出的资源承诺。针对这些特性的设置确保了对这些特性所需内存的严格界定。</p>
                        </div>
                        <div id="rfc.section.10.5.p.2">
                            <p><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                    id="rfc.iref.p.69"></span> 帧的数量也以类似方式受限。接受服务器推送的客户端 <em class="bcp14">SHOULD</em>
                                限制其一次发出的 push ID 数量。</p>
                        </div>
                        <div id="rfc.section.10.5.p.3">
                            <p>处理能力不能像状态容量那样有效地受到保护。</p>
                        </div>
                        <div id="rfc.section.10.5.p.4">
                            <p>发送对等方被要求忽略的未定义协议元素的能力可能被滥用以使对等方消耗额外处理时间。这可能通过设置多个未定义的 <a href="#frame-settings"
                                    title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.14"></span>
                                参数、未知帧类型或未知流类型来实现。但需注意，有些用途是完全合法的，例如可选理解的扩展和用于增加对流量分析抗性的填充。</p>
                        </div>
                        <div id="rfc.section.10.5.p.5">
                            <p>字段节的压缩也提供了浪费处理资源的机会；有关潜在滥用的更多细节，请参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9204.html#section-7">RFC 9204 第 7
                                    节</a>（QPACK）。</p>
                        </div>
                        <div id="rfc.section.10.5.p.6">
                            <p>所有这些特性——即服务器推送、未知协议元素、字段压缩——都有合法用途。只有在不必要或过度使用时，这些特性才成为负担。</p>
                        </div>
                        <div id="rfc.section.10.5.p.7">
                            <p>不监控此类行为的端点会暴露于拒绝服务攻击的风险之中。实现 <em class="bcp14">SHOULD</em> 跟踪这些特性的使用并对其使用设置限制。端点 <em
                                    class="bcp14">MAY</em> 将可疑活动视为类型为 <a
                                    href="#H3_EXCESSIVE_LOAD">H3_EXCESSIVE_LOAD</a><span id="rfc.iref.h.82"></span> 的 <a
                                    href="#errors" title="Error Handling">连接错误</a><span
                                    id="rfc.iref.c.63"></span>，但误报会导致中断合法连接和请求。</p>
                        </div>
                        <section id="limits-on-field-section-size">
                            <h4 id="rfc.section.10.5.1"><a href="#rfc.section.10.5.1">10.5.1.</a>&nbsp;<a
                                    href="#limits-on-field-section-size">字段节大小的限制</a></h4>
                            <div id="rfc.section.10.5.1.p.1">
                                <p>大的字段节（参见 <a href="#request-response" title="HTTP Message Framing">第 4.1
                                        节</a>）可能导致实现提交大量状态。用于路由的关键首部字段可能出现在首部节的末尾，这会阻止将首部节流式传输到最终目的地。出于该排序以及其它原因（比如确保缓存正确性），端点很可能需要缓冲整个首部节。由于字段节大小没有硬上限，有些端点可能被迫为首部字段占用大量可用内存。
                                </p>
                            </div>
                            <div id="rfc.section.10.5.1.p.2">
                                <p>端点可以使用 <a
                                        href="#SETTINGS_MAX_FIELD_SECTION_SIZE">SETTINGS_MAX_FIELD_SECTION_SIZE</a><span
                                        id="rfc.iref.s.15"></span>（见 <a href="#header-size-constraints"
                                        title="Header Size Constraints">第 4.2.2
                                        节</a>）设置来告知对等方可能适用的字段节大小限制。该设置仅为建议性的，因此端点 <em class="bcp14">MAY</em>
                                    选择发送超过该限制的字段节，并承担该请求或响应被视为 <a href="#malformed"
                                        title="Malformed Requests and Responses">格式错误</a><span
                                        id="rfc.iref.m.20"></span> 的风险。该设置特定于某个 HTTP/3
                                    连接，因此任何请求或响应都可能遇到具有更低未知限制的跃点。中介可以尝试通过传递不同对等方提出的值来避免该问题，但它们没有义务这样做。</p>
                            </div>
                            <div id="rfc.section.10.5.1.p.3">
                                <p>接收比其愿意处理的更大字段节的服务器可以发送 HTTP 431（Request Header Fields Too Large）状态码（参见 <a
                                        href="#RFC6585"><cite
                                            title="Additional HTTP Status Codes">[RFC6585]</cite></a>）。客户端可以丢弃无法处理的响应。
                                </p>
                            </div>
                        </section>
                        <section id="connect-issues">
                            <h4 id="rfc.section.10.5.2"><a href="#rfc.section.10.5.2">10.5.2.</a>&nbsp;<a
                                    href="#connect-issues">CONNECT 的问题</a></h4>
                            <div id="rfc.section.10.5.2.p.1">
                                <p>CONNECT 方法可能对代理造成不成比例的负载，因为与创建和维护 TCP 连接相比，创建流的开销相对较小。因此，支持 CONNECT
                                    的代理在接受的并发请求数量上可能会更为保守。</p>
                            </div>
                            <div id="rfc.section.10.5.2.p.2">
                                <p>代理也可能在携带 CONNECT 请求的流关闭之后为 TCP 连接保留某些资源，因为外发的 TCP 连接可能处于 TIME_WAIT 状态。为此，代理可能会在 TCP
                                    连接终止后一段时间延迟增加 QUIC 流限制。</p>
                            </div>
                        </section>
                    </section>
                    <section id="use-of-compression">
                        <h3 id="rfc.section.10.6"><a href="#rfc.section.10.6">10.6.</a>&nbsp;<a
                                href="#use-of-compression">压缩的使用</a></h3>
                        <div id="rfc.section.10.6.p.1">
                            <p>当秘密数据与攻击者可控的数据在相同上下文中被压缩时，压缩可能使攻击者恢复秘密数据。HTTP/3 支持字段压缩（参见 <a href="#header-formatting"
                                    title="HTTP Fields">第 4.2 节</a>）；下列关注点也适用于 HTTP 压缩内容编码的使用；参见 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9110.html#section-8.4.1">RFC 9110 第 8.4.1
                                    节</a>。</p>
                        </div>
                        <div id="rfc.section.10.6.p.2">
                            <p>针对压缩的可验证攻击利用了 Web 的特性（例如 <a href="#BREACH"><cite
                                        title="BREACH: Reviving the CRIME Attack">[BREACH]</cite></a>）。攻击者诱导包含不同明文的多次请求，通过观察每次产生的密文长度，当对秘密的猜测正确时会显现出更短的长度。
                            </p>
                        </div>
                        <div id="rfc.section.10.6.p.3">
                            <p>在安全通道上通信的实现 <em class="bcp14">MUST NOT</em>
                                压缩同时包含机密数据和攻击者可控数据的内容，除非对每个数据来源使用独立的压缩上下文。如果无法可靠确定数据来源，则 <em class="bcp14">MUST NOT</em>
                                使用压缩。</p>
                        </div>
                        <div id="rfc.section.10.6.p.4">
                            <p>关于字段节压缩的更多考虑见 <a href="#RFC9204"><cite
                                        title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>。</p>
                        </div>
                    </section>
                    <section id="padding-and-traffic-analysis">
                        <h3 id="rfc.section.10.7"><a href="#rfc.section.10.7">10.7.</a>&nbsp;<a
                                href="#padding-and-traffic-analysis">填充与流量分析</a></h3>
                        <div id="rfc.section.10.7.p.1">
                            <p>填充可用于模糊帧内容的精确大小，并用于缓解 HTTP 内的特定攻击，例如当压缩内容同时包含攻击者控制的明文和秘密数据时的攻击（例如 <a href="#BREACH"><cite
                                        title="BREACH: Reviving the CRIME Attack">[BREACH]</cite></a>）。</p>
                        </div>
                        <div id="rfc.section.10.7.p.2">
                            <p>当 HTTP/2 使用 PADDING 帧和其它帧中的 Padding 字段来增强对流量分析的抗性时，HTTP/3 可以依赖传输层填充或采用第 <a
                                    href="#frame-reserved" title="Reserved Frame Types">7.2.8 节</a> 和 <a
                                    href="#stream-grease" title="Reserved Stream Types">6.2.3 节</a>
                                中讨论的保留帧和流类型。这些填充方法在填充的粒度、填充与被保护信息的排列、在丢包情况下是否应用填充以及实现如何控制填充等方面产生不同的结果。</p>
                        </div>
                        <div id="rfc.section.10.7.p.3">
                            <p>保留流类型可用于在连接空闲时制造看似存在的流量。由于 HTTP
                                流量通常呈突发性出现，表面流量可用于模糊这种突发的时序或持续时间，甚至看起来像持续发送数据的恒定流。然而，由于此类流仍受接收方的流量控制，未能及时清除这些流并提供额外的流量控制额度会限制发送方发送真实流量的能力。
                            </p>
                        </div>
                        <div id="rfc.section.10.7.p.4">
                            <p>为缓解依赖压缩的攻击，禁用或限制压缩可能比填充更合适作为对策。</p>
                        </div>
                        <div id="rfc.section.10.7.p.5">
                            <p>使用填充可能并不比表面上看起来的更能提供保护。冗余填充甚至可能适得其反。充其量，填充只是通过增加攻击者必须观察的帧数量来使攻击者更难推断长度信息。错误实现的填充方案容易被攻破。特别是，可预测分布的随机填充提供的保护很少；同样，将有效载荷填充到固定尺寸会在有效载荷跨越固定边界时泄露信息，如果攻击者能控制明文，则可能利用这一点。
                            </p>
                        </div>
                    </section>
                    <section id="frame-parsing">
                        <h3 id="rfc.section.10.8"><a href="#rfc.section.10.8">10.8.</a>&nbsp;<a
                                href="#frame-parsing">帧解析</a></h3>
                        <div id="rfc.section.10.8.p.1">
                            <p>若干协议元素包含嵌套长度元素，通常表现为包含可变长度整数的显式长度的帧。这可能对粗心的实现者构成安全风险。实现 <em class="bcp14">MUST</em>
                                确保帧的长度与其所包含字段的长度精确匹配。</p>
                        </div>
                    </section>
                    <section id="early-data">
                        <h3 id="rfc.section.10.9"><a href="#rfc.section.10.9">10.9.</a>&nbsp;<a
                                href="#early-data">早期数据</a></h3>
                        <div id="rfc.section.10.9.p.1">
                            <p>在 HTTP/3 中使用 0-RTT 会带来重放攻击的风险。在使用 HTTP/3 的 0-RTT 时，必须采用 <a href="#HTTP-REPLAY"><cite
                                        title="Using Early Data in HTTP">[HTTP-REPLAY]</cite></a> 中的防重放缓解措施。将 <a
                                    href="#HTTP-REPLAY"><cite title="Using Early Data in HTTP">[HTTP-REPLAY]</cite></a>
                                应用于 HTTP/3 时，对 TLS 层的引用指代在 QUIC 中执行的握手，而对应用数据的所有引用指代流的内容。</p>
                        </div>
                    </section>
                    <section id="migration">
                        <h3 id="rfc.section.10.10"><a href="#rfc.section.10.10">10.10.</a>&nbsp;<a
                                href="#migration">迁移</a></h3>
                        <div id="rfc.section.10.10.p.1">
                            <p>某些 HTTP 实现使用客户端地址进行日志记录或访问控制。由于 QUIC
                                客户端的地址可能在连接期间发生变化（未来版本可能支持同时使用多个地址），此类实现需要在相关时刻主动检索客户端的当前地址或地址列表，或明确接受原始地址可能会改变的事实。</p>
                        </div>
                    </section>
                    <section id="privacy-considerations">
                        <h3 id="rfc.section.10.11"><a href="#rfc.section.10.11">10.11.</a>&nbsp;<a
                                href="#privacy-considerations">隐私考虑</a></h3>
                        <div id="rfc.section.10.11.p.1">
                            <p>HTTP/3 的若干特性为观察者提供了随时间关联单一客户端或服务器动作的机会。这些包括设置的值、对刺激的响应时序以及对任何由设置控制的特性的处理方式。</p>
                        </div>
                        <div id="rfc.section.10.11.p.2">
                            <p>只要这些在行为上产生可观察的差异，它们就可能被用来对特定客户端进行指纹识别。</p>
                        </div>
                        <div id="rfc.section.10.11.p.3">
                            <p>HTTP/3 倾向于对单一 QUIC 连接的重用允许对用户在站点上的活动进行关联。为不同原点重用连接允许跨这些原点关联活动。</p>
                        </div>
                        <div id="rfc.section.10.11.p.4">
                            <p>QUIC 的若干特性会立即触发响应，端点可用于测量与其对端的延迟；在某些场景下，这可能具有隐私影响。</p>
                        </div>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="iana-considerations">
                    <h2 id="rfc.section.11" class="np"><a href="#rfc.section.11">11.</a>&nbsp;<a
                            href="#iana-considerations">IANA 注意事项</a></h2>
                    <div id="rfc.section.11.p.1">
                        <p>本文档在 ALPN 协议标识符注册表中登记了一个新的 ALPN 协议 ID（<a href="#iana-alpn"
                                title="Registration of HTTP/3 Identification String">第 11.1 节</a>），并创建了若干用于管理 HTTP/3
                            中码点分配的新注册表。</p>
                    </div>
                    <section id="iana-alpn">
                        <h3 id="rfc.section.11.1"><a href="#rfc.section.11.1">11.1.</a>&nbsp;<a href="#iana-alpn">注册
                                HTTP/3 标识字符串</a></h3>
                        <div id="rfc.section.11.1.p.1">
                            <p>本文档在由 <a href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                                建立的“TLS 应用层协议协商 (ALPN) 协议 ID”注册表中创建了一个用于标识 HTTP/3 的新注册。</p>
                        </div>
                        <div id="rfc.section.11.1.p.2" class="avoidbreakafter">
                            <p>字符串 "h3" 用于标识 HTTP/3：</p>
                        </div>
                        <div id="rfc.section.11.1.p.3">
                            <dl>
                                <dt>Protocol:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>HTTP/3</div>
                                </dd>
                                <dt>Identification Sequence:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>0x68 0x33 ("h3")</div>
                                </dd>
                                <dt>Specification:</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>本文件</div>
                                </dd>
                            </dl>
                        </div>
                    </section>
                    <section id="iana-policy">
                        <h3 id="rfc.section.11.2"><a href="#rfc.section.11.2">11.2.</a>&nbsp;<a
                                href="#iana-policy">新注册表</a></h3>
                        <div id="rfc.section.11.2.p.1">
                            <p>本文档中创建的新注册表根据 <a href="https://www.rfc-editor.org/rfc/rfc9000.html#section-22.1">RFC 9000
                                    第 22.1 节</a> 中记录的 QUIC 注册策略运行。这些注册表均包含 <a
                                    href="https://www.rfc-editor.org/rfc/rfc9000.html#section-22.1.1">RFC 9000 第 22.1.1
                                    节</a> 所列的通用字段集合。这些注册表汇总在“Hypertext Transfer Protocol version 3 (HTTP/3)”标题下。</p>
                        </div>
                        <div id="rfc.section.11.2.p.2">
                            <p>这些注册表中的初始分配均被赋予永久状态，并列出 IETF 作为变更控制者以及 HTTP 工作组（ietf-http-wg@w3.org）作为联系人。</p>
                        </div>
                        <section id="iana-frames">
                            <h4 id="rfc.section.11.2.1"><a href="#rfc.section.11.2.1">11.2.1.</a>&nbsp;<a
                                    href="#iana-frames">帧类型</a></h4>
                            <div id="rfc.section.11.2.1.p.1">
                                <p>本文档为 HTTP/3 帧类型码建立了一个注册表。“HTTP/3 帧类型”注册表管理一个 62 位的空间。该注册表遵循 QUIC 的注册策略；参见 <a
                                        href="#iana-policy" title="New Registries">第 11.2 节</a>。此注册表中的永久注册使用
                                    Specification Required 策略分配（参见 <a href="#RFC8126"><cite
                                            title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>），但对于
                                    0x00 到 0x3f（含）之间的值，则按 <a
                                        href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">RFC 8126 第 4.9
                                        节</a> 和 <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">第
                                        4.10 节</a> 中定义的 Standards Action 或 IESG 批准方式分配。</p>
                            </div>
                            <div id="rfc.section.11.2.1.p.2">
                                <p>虽然此注册表与在 <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> 中定义的 “HTTP/2
                                    Frame Type”
                                    注册表是分离的，但在重叠的编码空间中，最好使分配相互对应。如果某个注册条目仅存在于一个注册表中，应尽一切努力避免将相应值分配给不相关的操作。专家审查者 <em
                                        class="bcp14">MAY</em> 拒绝会与对应注册表中相同值冲突的不相关注册。</p>
                            </div>
                            <div id="rfc.section.11.2.1.p.3" class="avoidbreakafter">
                                <p>除了在 <a href="#iana-policy" title="New Registries">第 11.2 节</a> 中描述的通用字段外，该注册表中的永久注册
                                    <em class="bcp14">MUST</em> 包含下列字段：
                                </p>
                            </div>
                            <div id="rfc.section.11.2.1.p.4">
                                <dl>
                                    <dt>Frame Type:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>帧类型的名称或标签。</div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.11.2.1.p.5">
                                <p>帧类型的规范 <em class="bcp14">MUST</em> 包含对帧布局及其语义的描述，包括任何有条件存在的帧部分。</p>
                            </div>
                            <div id="rfc.section.11.2.1.p.6">
                                <p><a href="#iana-frame-table" title="Initial HTTP/3 Frame Types">表 2</a> 中的条目由本文档注册。
                                </p>
                            </div>
                            <div class="table table-condensed table-striped" id="iana-frame-table">
                                <table class="v3 text-center">
                                    <caption>表 2：初始 HTTP/3 帧类型</caption>
                                    <thead>
                                        <tr>
                                            <th class="text-left" colspan="1" rowspan="1">帧类型</th>
                                            <th class="center" colspan="1" rowspan="1">值</th>
                                            <th class="text-left" colspan="1" rowspan="1">规范</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-data"
                                                    title="DATA">DATA</a>
                                                <div id="rfc.iref.d.14"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x00</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-data"
                                                    title="DATA">第 7.2.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers"
                                                    title="HEADERS">HEADERS</a>
                                                <div id="rfc.iref.h.83"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x01</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-headers"
                                                    title="HEADERS">第 7.2.2 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x02</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push"
                                                    title="CANCEL_PUSH">CANCEL_PUSH</a>
                                                <div id="rfc.iref.c.64"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x03</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-cancel-push"
                                                    title="CANCEL_PUSH">第 7.2.3 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings"
                                                    title="SETTINGS">SETTINGS</a>
                                                <div id="rfc.iref.s.16"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x04</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings"
                                                    title="SETTINGS">第 7.2.4 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise"
                                                    title="PUSH_PROMISE">PUSH_PROMISE</a>
                                                <div id="rfc.iref.p.70"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x05</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-push-promise"
                                                    title="PUSH_PROMISE">第 7.2.5 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x06</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway"
                                                    title="GOAWAY">GOAWAY</a>
                                                <div id="rfc.iref.g.28"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x07</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-goaway"
                                                    title="GOAWAY">第 7.2.6 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x08</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x09</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id"
                                                    title="MAX_PUSH_ID">MAX_PUSH_ID</a>
                                                <div id="rfc.iref.m.21"></div>
                                            </td>
                                            <td class="center" colspan="1" rowspan="1">0x0d</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-max-push-id"
                                                    title="MAX_PUSH_ID">第 7.2.7 节</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="rfc.section.11.2.1.p.7">
                                <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N 为非负整数）的每个码值（即 0x21、0x40、……直到
                                    0x3ffffffffffffffe）<em class="bcp14">MUST NOT</em> 由 IANA 分配，且 <em
                                        class="bcp14">MUST NOT</em> 出现在分配值列表中。</p>
                            </div>
                        </section>
                        <section id="iana-settings">
                            <h4 id="rfc.section.11.2.2"><a href="#rfc.section.11.2.2">11.2.2.</a>&nbsp;<a
                                    href="#iana-settings">设置参数</a></h4>
                            <div id="rfc.section.11.2.2.p.1">
                                <p>本文档为 HTTP/3 设置建立了一个注册表。“HTTP/3 设置”注册表管理一个 62 位的空间。该注册表遵循 QUIC 的注册策略；参见 <a
                                        href="#iana-policy" title="New Registries">第 11.2 节</a>。此注册表中的永久注册使用
                                    Specification Required 策略分配（参见 <a href="#RFC8126"><cite
                                            title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>），但对于
                                    0x00 到 0x3f（含）之间的值，则按 <a
                                        href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">RFC 8126 第 4.9
                                        节</a> 和 <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">第
                                        4.10 节</a> 中定义的 Standards Action 或 IESG 批准方式分配。</p>
                            </div>
                            <div id="rfc.section.11.2.2.p.2">
                                <p>虽然该注册表与在 <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a> 中定义的“HTTP/2
                                    Settings”注册表是分离的，但最好使分配相互对应。如果某个条目仅存在于一个注册表中，应尽一切努力避免将相应值分配给不相关的操作。专家审查者 <em
                                        class="bcp14">MAY</em> 拒绝会与对应注册表中相同值冲突的不相关注册。</p>
                            </div>
                            <div id="rfc.section.11.2.2.p.3" class="avoidbreakafter">
                                <p>除了在 <a href="#iana-policy" title="New Registries">第 11.2 节</a> 中描述的通用字段外，该注册表中的永久注册
                                    <em class="bcp14">MUST</em> 包含下列字段：
                                </p>
                            </div>
                            <div id="rfc.section.11.2.2.p.4">
                                <dl>
                                    <dt>Setting Name:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>设置的符号名称。指定设置名称为可选。</div>
                                    </dd>
                                    <dt>Default:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>除非另有指示，该设置的默认值。默认值 <em class="bcp14">SHOULD</em> 取最保守（限制性最大）的可能值。</div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.11.2.2.p.5">
                                <p><a href="#iana-setting-table" title="Initial HTTP/3 Settings">表 3</a> 中的条目由本文档注册。</p>
                            </div>
                            <div class="table table-condensed table-striped" id="iana-setting-table">
                                <table class="v3 text-center">
                                    <caption>表 3：初始 HTTP/3 设置</caption>
                                    <thead>
                                        <tr>
                                            <th class="text-left" colspan="1" rowspan="1">设置名称</th>
                                            <th class="center" colspan="1" rowspan="1">值</th>
                                            <th class="text-left" colspan="1" rowspan="1">规范</th>
                                            <th class="text-left" colspan="1" rowspan="1">默认值</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x00</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                            <td class="text-left" colspan="1" rowspan="1">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x02</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                            <td class="text-left" colspan="1" rowspan="1">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x03</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                            <td class="text-left" colspan="1" rowspan="1">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x04</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                            <td class="text-left" colspan="1" rowspan="1">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Reserved</td>
                                            <td class="center" colspan="1" rowspan="1">0x05</td>
                                            <td class="text-left" colspan="1" rowspan="1">本文件</td>
                                            <td class="text-left" colspan="1" rowspan="1">N/A</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">MAX_FIELD_SECTION_SIZE</td>
                                            <td class="center" colspan="1" rowspan="1">0x06</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#settings-parameters"
                                                    title="Defined SETTINGS Parameters">第 7.2.4.1 节</a></td>
                                            <td class="text-left" colspan="1" rowspan="1">无限制</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="rfc.section.11.2.2.p.6">
                                <p>出于格式考虑，设置名称可以通过移除 'SETTINGS_' 前缀来缩写。</p>
                            </div>
                            <div id="rfc.section.11.2.2.p.7">
                                <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N 为非负整数）的每个码值（即 0x21、0x40、……直到
                                    0x3ffffffffffffffe）<em class="bcp14">MUST NOT</em> 由 IANA 分配，且 <em
                                        class="bcp14">MUST NOT</em> 出现在分配值列表中。</p>
                            </div>
                        </section>
                        <section id="iana-error-codes">
                            <h4 id="rfc.section.11.2.3"><a href="#rfc.section.11.2.3">11.2.3.</a>&nbsp;<a
                                    href="#iana-error-codes">错误代码</a></h4>
                            <div id="rfc.section.11.2.3.p.1">
                                <p>本文档为 HTTP/3 错误代码建立了一个注册表。“HTTP/3 错误代码”注册表管理一个 62 位的空间。该注册表遵循 QUIC 的注册策略；参见 <a
                                        href="#iana-policy" title="New Registries">第 11.2 节</a>。此注册表中的永久注册使用
                                    Specification Required 策略分配（参见 <a href="#RFC8126"><cite
                                            title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>），但对于
                                    0x00 到 0x3f（含）之间的值，则按 <a
                                        href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">RFC 8126 第 4.9
                                        节</a> 和 <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">第
                                        4.10 节</a> 中定义的 Standards Action 或 IESG 批准方式分配。</p>
                            </div>
                            <div id="rfc.section.11.2.3.p.2">
                                <p>错误代码的注册要求包含该错误代码的描述。专家审查者应审查新注册以查找与现有错误代码的可能重复。鼓励使用现有注册，但不强制。建议避免使用在“HTTP/2 Error
                                    Code”注册表中已注册的值，专家审查者 <em class="bcp14">MAY</em> 拒绝此类注册。</p>
                            </div>
                            <div id="rfc.section.11.2.3.p.3" class="avoidbreakafter">
                                <p>除了在 <a href="#iana-policy" title="New Registries">第 11.2 节</a>
                                    中描述的通用字段外，该注册表包含两个附加字段。此注册表中的永久注册 <em class="bcp14">MUST</em> 包含下列字段：</p>
                            </div>
                            <div id="rfc.section.11.2.3.p.4">
                                <dl>
                                    <dt>Name:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>错误代码的名称。</div>
                                    </dd>
                                    <dt>Description:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>错误代码语义的简要描述。</div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.11.2.3.p.5">
                                <p><a href="#iana-error-table" title="Initial HTTP/3 Error Codes">表 4</a>
                                    中的条目由本文档注册。为避免与 HTTP/2 错误代码冲突，这些错误代码从采用 Specification Required 策略的范围中选取。</p>
                            </div>
                            <div class="table table-condensed table-striped" id="iana-error-table">
                                <table class="v3 text-center">
                                    <caption>表 4：初始 HTTP/3 错误代码</caption>
                                    <thead>
                                        <tr>
                                            <th class="text-left" colspan="1" rowspan="1">名称</th>
                                            <th class="text-left" colspan="1" rowspan="1">值</th>
                                            <th class="text-left" colspan="1" rowspan="1">描述</th>
                                            <th class="text-left" colspan="1" rowspan="1">规范</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_NO_ERROR">H3_NO_ERROR</a>
                                                <div id="rfc.iref.h.84"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0100</td>
                                            <td class="text-left" colspan="1" rowspan="1">无错误</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_GENERAL_PROTOCOL_ERROR">H3_GENERAL_PROTOCOL_ERROR</a>
                                                <div id="rfc.iref.h.85"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0101</td>
                                            <td class="text-left" colspan="1" rowspan="1">一般协议错误</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_INTERNAL_ERROR">H3_INTERNAL_ERROR</a>
                                                <div id="rfc.iref.h.86"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0102</td>
                                            <td class="text-left" colspan="1" rowspan="1">内部错误</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_STREAM_CREATION_ERROR">H3_STREAM_CREATION_ERROR</a>
                                                <div id="rfc.iref.h.87"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0103</td>
                                            <td class="text-left" colspan="1" rowspan="1">流创建错误</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_CLOSED_CRITICAL_STREAM">H3_CLOSED_CRITICAL_STREAM</a>
                                                <div id="rfc.iref.h.88"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0104</td>
                                            <td class="text-left" colspan="1" rowspan="1">关键流已关闭</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a>
                                                <div id="rfc.iref.h.89"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0105</td>
                                            <td class="text-left" colspan="1" rowspan="1">当前状态下不允许的帧</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a>
                                                <div id="rfc.iref.h.90"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0106</td>
                                            <td class="text-left" colspan="1" rowspan="1">帧违反布局或大小规则</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_EXCESSIVE_LOAD">H3_EXCESSIVE_LOAD</a>
                                                <div id="rfc.iref.h.91"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0107</td>
                                            <td class="text-left" colspan="1" rowspan="1">对端产生过度负载</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_ID_ERROR">H3_ID_ERROR</a>
                                                <div id="rfc.iref.h.92"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0108</td>
                                            <td class="text-left" colspan="1" rowspan="1">标识符被错误使用</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_SETTINGS_ERROR">H3_SETTINGS_ERROR</a>
                                                <div id="rfc.iref.h.93"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0109</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#frame-settings"
                                                    title="SETTINGS">SETTINGS</a>
                                                <div id="rfc.iref.s.17"></div> 帧包含无效值
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_MISSING_SETTINGS">H3_MISSING_SETTINGS</a>
                                                <div id="rfc.iref.h.94"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x010a</td>
                                            <td class="text-left" colspan="1" rowspan="1">未接收到 <a href="#frame-settings"
                                                    title="SETTINGS">SETTINGS</a>
                                                <div id="rfc.iref.s.18"></div> 帧
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a>
                                                <div id="rfc.iref.h.95"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x010b</td>
                                            <td class="text-left" colspan="1" rowspan="1">请求未处理</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a>
                                                <div id="rfc.iref.h.96"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x010c</td>
                                            <td class="text-left" colspan="1" rowspan="1">数据不再需要</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_REQUEST_INCOMPLETE">H3_REQUEST_INCOMPLETE</a>
                                                <div id="rfc.iref.h.97"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x010d</td>
                                            <td class="text-left" colspan="1" rowspan="1">流提前终止</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_MESSAGE_ERROR">H3_MESSAGE_ERROR</a>
                                                <div id="rfc.iref.h.98"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x010e</td>
                                            <td class="text-left" colspan="1" rowspan="1">消息格式错误</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_CONNECT_ERROR">H3_CONNECT_ERROR</a>
                                                <div id="rfc.iref.h.99"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x010f</td>
                                            <td class="text-left" colspan="1" rowspan="1">CONNECT 请求上的 TCP 重置或错误</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1"><a
                                                    href="#H3_VERSION_FALLBACK">H3_VERSION_FALLBACK</a>
                                                <div id="rfc.iref.h.100"></div>
                                            </td>
                                            <td class="text-left" colspan="1" rowspan="1">0x0110</td>
                                            <td class="text-left" colspan="1" rowspan="1">请改为通过 HTTP/1.1 重试</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#http-error-codes"
                                                    title="HTTP/3 Error Codes">第 8.1 节</a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="rfc.section.11.2.3.p.6">
                                <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N 为非负整数）的每个码值（即 0x21、0x40、……直到
                                    0x3ffffffffffffffe）<em class="bcp14">MUST NOT</em> 由 IANA 分配，且 <em
                                        class="bcp14">MUST NOT</em> 出现在分配值列表中。</p>
                            </div>
                        </section>
                        <section id="iana-stream-types">
                            <h4 id="rfc.section.11.2.4"><a href="#rfc.section.11.2.4">11.2.4.</a>&nbsp;<a
                                    href="#iana-stream-types">流类型</a></h4>
                            <div id="rfc.section.11.2.4.p.1">
                                <p>本文档为 HTTP/3 单向流类型建立了一个注册表。“HTTP/3 Stream Types” 注册表管理一个 62 位的空间。该注册表遵循 QUIC 的注册策略；参见
                                    <a href="#iana-policy" title="New Registries">第 11.2 节</a>。此注册表中的永久注册使用
                                    Specification Required 策略分配（参见 <a href="#RFC8126"><cite
                                            title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC8126]</cite></a>），但对于
                                    0x00 到 0x3f（含）之间的值，则按 <a
                                        href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.9">RFC 8126 第 4.9
                                        节</a> 和 <a href="https://www.rfc-editor.org/rfc/rfc8126.html#section-4.10">第
                                        4.10 节</a> 中定义的 Standards Action 或 IESG 批准方式分配。
                                </p>
                            </div>
                            <div id="rfc.section.11.2.4.p.2" class="avoidbreakafter">
                                <p>除了在 <a href="#iana-policy" title="New Registries">第 11.2 节</a> 中描述的通用字段外，该注册表中的永久注册
                                    <em class="bcp14">MUST</em> 包含下列字段：
                                </p>
                            </div>
                            <div id="rfc.section.11.2.4.p.3">
                                <dl>
                                    <dt>Stream Type:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>流类型的名称或标签。</div>
                                    </dd>
                                    <dt>Sender:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>哪个端点可在 HTTP/3 连接上启动此类型的流。取值为 "Client"、"Server" 或 "Both"。</div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.11.2.4.p.4">
                                <p>永久注册的规范 <em class="bcp14">MUST</em> 包含对流类型的描述，包括流内容的布局和语义。</p>
                            </div>
                            <div id="rfc.section.11.2.4.p.5">
                                <p><a href="#iana-stream-type-table" title="Initial Stream Types">表 5</a> 中的条目由本文档注册。
                                </p>
                            </div>
                            <div class="table table-condensed table-striped" id="iana-stream-type-table">
                                <table class="v3 text-center">
                                    <caption>表 5：初始流类型</caption>
                                    <thead>
                                        <tr>
                                            <th class="text-left" colspan="1" rowspan="1">流类型</th>
                                            <th class="center" colspan="1" rowspan="1">值</th>
                                            <th class="text-left" colspan="1" rowspan="1">规范</th>
                                            <th class="text-left" colspan="1" rowspan="1">发送者</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Control Stream</td>
                                            <td class="center" colspan="1" rowspan="1">0x00</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#control-streams"
                                                    title="Control Streams">第 6.2.1 节</a></td>
                                            <td class="text-left" colspan="1" rowspan="1">Both</td>
                                        </tr>
                                        <tr>
                                            <td class="text-left" colspan="1" rowspan="1">Push Stream</td>
                                            <td class="center" colspan="1" rowspan="1">0x01</td>
                                            <td class="text-left" colspan="1" rowspan="1"><a href="#server-push"
                                                    title="Server Push">第 4.6 节</a></td>
                                            <td class="text-left" colspan="1" rowspan="1">Server</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="rfc.section.11.2.4.p.6">
                                <p>格式为 <span class="tt">0x1f * N + 0x21</span>（N 为非负整数）的每个码值（即 0x21、0x40、……直到
                                    0x3ffffffffffffffe）<em class="bcp14">MUST NOT</em> 由 IANA 分配，且 <em
                                        class="bcp14">MUST NOT</em> 出现在分配值列表中。</p>
                            </div>
                        </section>
                    </section>
                </section>
                <section class="np">
                    <div id="rfc.references">
                        <h2 id="rfc.section.12"><a href="#rfc.section.12">12.</a> 参考资料</h2>
                        <section>
                            <div id="rfc.references.2">
                                <h3 id="rfc.section.12.1"><a href="#rfc.section.12.1">12.1.</a> 规范性引用
                                </h3>
                                <dl class="dl-horizontal">
                                    <dt id="ALTSVC">[<a href="#ALTSVC" class="smpl">ALTSVC</a>]</dt>
                                    <dd>Nottingham, M., McManus, P., and J. Reschke, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7838.html">HTTP Alternative
                                            Services</a>”, RFC 7838, <a href="https://dx.doi.org/10.17487/RFC7838">DOI
                                            10.17487/RFC7838</a>, 2016年4月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7838">https://www.rfc-editor.org/info/rfc7838</a>&gt;.
                                    </dd>
                                    <dt id="COOKIES">[<a href="#COOKIES" class="smpl">COOKIES</a>]</dt>
                                    <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6265.html">HTTP State
                                            Management Mechanism</a>”, RFC 6265, <a
                                            href="https://dx.doi.org/10.17487/RFC6265">DOI 10.17487/RFC6265</a>,
                                        2011年4月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc6265">https://www.rfc-editor.org/info/rfc6265</a>&gt;.
                                    </dd>
                                    <dt id="RFC9111">[<a href="#RFC9111" class="smpl">HTTP-CACHING</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9111.html">HTTP Caching</a>”, <a
                                            href="https://www.rfc-editor.org/info/std98">STD 98</a>, RFC 9111, <a
                                            href="https://dx.doi.org/10.17487/RFC9111">DOI 10.17487/RFC9111</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9111">https://www.rfc-editor.org/info/rfc9111</a>&gt;.
                                    </dd>
                                    <dt id="HTTP-REPLAY">[<a href="#HTTP-REPLAY" class="smpl">HTTP-REPLAY</a>]</dt>
                                    <dd>Thomson, M., Nottingham, M., and W. Tarreau, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8470.html">Using Early Data in
                                            HTTP</a>”, RFC 8470, <a href="https://dx.doi.org/10.17487/RFC8470">DOI
                                            10.17487/RFC8470</a>, 2018年9月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8470">https://www.rfc-editor.org/info/rfc8470</a>&gt;.
                                    </dd>
                                    <dt id="RFC9110">[<a href="#RFC9110" class="smpl">HTTP</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9110.html">HTTP Semantics</a>”, <a
                                            href="https://www.rfc-editor.org/info/std97">STD 97</a>, RFC 9110, <a
                                            href="https://dx.doi.org/10.17487/RFC9110">DOI 10.17487/RFC9110</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9110">https://www.rfc-editor.org/info/rfc9110</a>&gt;.
                                    </dd>
                                    <dt id="RFC9204">[<a href="#RFC9204" class="smpl">QPACK</a>]</dt>
                                    <dd>Krasic, C., Bishop, M., and A. Frindell, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9204.html">QPACK: Field Compression
                                            for HTTP/3</a>”, RFC 9204, <a href="https://dx.doi.org/10.17487/RFC9204">DOI
                                            10.17487/RFC9204</a>, 2022年6月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9204">https://www.rfc-editor.org/info/rfc9204</a>&gt;.
                                    </dd>
                                    <dt id="QUIC-TRANSPORT">[<a href="#QUIC-TRANSPORT" class="smpl">QUIC-TRANSPORT</a>]
                                    </dt>
                                    <dd>Iyengar, J., Ed. and M. Thomson, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9000.html">QUIC: A UDP-Based
                                            Multiplexed and Secure Transport</a>”, RFC 9000, <a
                                            href="https://dx.doi.org/10.17487/RFC9000">DOI 10.17487/RFC9000</a>,
                                        2021年5月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;.
                                    </dd>
                                    <dt id="RFC0793">[<a href="#RFC0793" class="smpl">RFC0793</a>]</dt>
                                    <dd>Postel, J., “<a href="https://www.rfc-editor.org/rfc/rfc793.html">Transmission
                                            Control Protocol</a>”, <a href="https://www.rfc-editor.org/info/std7">STD
                                            7</a>, RFC 793, <a href="https://dx.doi.org/10.17487/RFC0793">DOI
                                            10.17487/RFC0793</a>, 1981年9月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc793">https://www.rfc-editor.org/info/rfc793</a>&gt;.
                                    </dd>
                                    <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                    <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words
                                            for use in RFCs to Indicate Requirement Levels</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                            href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>,
                                        1997年3月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                    </dd>
                                    <dt id="RFC6066">[<a href="#RFC6066" class="smpl">RFC6066</a>]</dt>
                                    <dd>Eastlake 3rd, D., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc6066.html">Transport Layer Security
                                            (TLS) Extensions: Extension Definitions</a>”, RFC 6066, <a
                                            href="https://dx.doi.org/10.17487/RFC6066">DOI 10.17487/RFC6066</a>,
                                        2011年1月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc6066">https://www.rfc-editor.org/info/rfc6066</a>&gt;.
                                    </dd>
                                    <dt id="RFC7301">[<a href="#RFC7301" class="smpl">RFC7301</a>]</dt>
                                    <dd>Friedl, S., Popov, A., Langley, A., and E. Stephan, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7301.html">Transport Layer Security
                                            (TLS) Application-Layer Protocol Negotiation Extension</a>”, RFC 7301, <a
                                            href="https://dx.doi.org/10.17487/RFC7301">DOI 10.17487/RFC7301</a>,
                                        2014年7月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7301">https://www.rfc-editor.org/info/rfc7301</a>&gt;.
                                    </dd>
                                    <dt id="RFC8126">[<a href="#RFC8126" class="smpl">RFC8126</a>]</dt>
                                    <dd>Cotton, M., Leiba, B., and T. Narten, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8126.html">Guidelines for Writing an
                                            IANA Considerations Section in RFCs</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp26">BCP 26</a>, RFC 8126, <a
                                            href="https://dx.doi.org/10.17487/RFC8126">DOI 10.17487/RFC8126</a>,
                                        2017年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;.
                                    </dd>
                                    <dt id="RFC8174">[<a href="#RFC8174" class="smpl">RFC8174</a>]</dt>
                                    <dd>Leiba, B., “<a href="https://www.rfc-editor.org/rfc/rfc8174.html">Ambiguity of
                                            Uppercase vs Lowercase in RFC 2119 Key Words</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 8174, <a
                                            href="https://dx.doi.org/10.17487/RFC8174">DOI 10.17487/RFC8174</a>,
                                        2017年5月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;.
                                    </dd>
                                    <dt id="URI">[<a href="#URI" class="smpl">URI</a>]</dt>
                                    <dd>Berners-Lee, T., Fielding, R., and L. Masinter, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc3986.html">Uniform Resource
                                            Identifier (URI): Generic Syntax</a>”, <a
                                            href="https://www.rfc-editor.org/info/std66">STD 66</a>, RFC 3986, <a
                                            href="https://dx.doi.org/10.17487/RFC3986">DOI 10.17487/RFC3986</a>,
                                        2005年1月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                        <section>
                            <div id="rfc.references.3">
                                <h3 id="rfc.section.12.2"><a href="#rfc.section.12.2">12.2.</a> 信息性引用
                                </h3>
                                <dl class="dl-horizontal">
                                    <dt id="BREACH">[<a href="#BREACH" class="smpl">BREACH</a>]</dt>
                                    <dd>Gluck, Y., Harris, N., and A. Prado, “<a
                                            href="http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf">BREACH:
                                            Reviving the CRIME Attack</a>”, 2013年7月, &lt;<a
                                            href="http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf">http://breachattack.com/resources/BREACH%20-%20SSL,%20gone%20in%2030%20seconds.pdf</a>&gt;.
                                    </dd>
                                    <dt id="DNS-TERMS">[<a href="#DNS-TERMS" class="smpl">DNS-TERMS</a>]</dt>
                                    <dd>Hoffman, P., Sullivan, A., and K. Fujiwara, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8499.html">DNS Terminology</a>”, <a
                                            href="https://www.rfc-editor.org/info/bcp219">BCP 219</a>, RFC 8499, <a
                                            href="https://dx.doi.org/10.17487/RFC8499">DOI 10.17487/RFC8499</a>,
                                        2019年1月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8499">https://www.rfc-editor.org/info/rfc8499</a>&gt;.
                                    </dd>
                                    <dt id="HPACK">[<a href="#HPACK" class="smpl">HPACK</a>]</dt>
                                    <dd>Peon, R. and H. Ruellan, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7541.html">HPACK: Header Compression
                                            for HTTP/2</a>”, RFC 7541, <a href="https://dx.doi.org/10.17487/RFC7541">DOI
                                            10.17487/RFC7541</a>, 2015年5月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7541">https://www.rfc-editor.org/info/rfc7541</a>&gt;.
                                    </dd>
                                    <dt id="RFC9112">[<a href="#RFC9112" class="smpl">HTTP/1.1</a>]</dt>
                                    <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9112.html">HTTP/1.1</a>”, <a
                                            href="https://www.rfc-editor.org/info/std99">STD 99</a>, RFC 9112, <a
                                            href="https://dx.doi.org/10.17487/RFC9112">DOI 10.17487/RFC9112</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9112">https://www.rfc-editor.org/info/rfc9112</a>&gt;.
                                    </dd>
                                    <dt id="RFC9113">[<a href="#RFC9113" class="smpl">HTTP/2</a>]</dt>
                                    <dd>Thomson, M., Ed. and C. Benfield, Ed., “<a
                                            href="https://www.rfc-editor.org/rfc/rfc9113.html">HTTP/2</a>”, RFC 9113, <a
                                            href="https://dx.doi.org/10.17487/RFC9113">DOI 10.17487/RFC9113</a>,
                                        2022年6月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc9113">https://www.rfc-editor.org/info/rfc9113</a>&gt;.
                                    </dd>
                                    <dt id="RFC6585">[<a href="#RFC6585" class="smpl">RFC6585</a>]</dt>
                                    <dd>Nottingham, M. and R. Fielding, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc6585.html">Additional HTTP Status
                                            Codes</a>”, RFC 6585, <a href="https://dx.doi.org/10.17487/RFC6585">DOI
                                            10.17487/RFC6585</a>, 2012年4月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc6585">https://www.rfc-editor.org/info/rfc6585</a>&gt;.
                                    </dd>
                                    <dt id="RFC8164">[<a href="#RFC8164" class="smpl">RFC8164</a>]</dt>
                                    <dd>Nottingham, M. and M. Thomson, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc8164.html">Opportunistic Security
                                            for HTTP/2</a>”, RFC 8164, <a href="https://dx.doi.org/10.17487/RFC8164">DOI
                                            10.17487/RFC8164</a>, 2017年5月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8164">https://www.rfc-editor.org/info/rfc8164</a>&gt;.
                                    </dd>
                                    <dt id="TFO">[<a href="#TFO" class="smpl">TFO</a>]</dt>
                                    <dd>Cheng, Y., Chu, J., Radhakrishnan, S., and A. Jain, “<a
                                            href="https://www.rfc-editor.org/rfc/rfc7413.html">TCP Fast Open</a>”, RFC
                                        7413, <a href="https://dx.doi.org/10.17487/RFC7413">DOI 10.17487/RFC7413</a>,
                                        2014年12月, &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc7413">https://www.rfc-editor.org/info/rfc7413</a>&gt;.
                                    </dd>
                                    <dt id="TLS">[<a href="#TLS" class="smpl">TLS</a>]</dt>
                                    <dd>Rescorla, E., “<a href="https://www.rfc-editor.org/rfc/rfc8446.html">The
                                            Transport Layer Security (TLS) Protocol Version 1.3</a>”, RFC 8446, <a
                                            href="https://dx.doi.org/10.17487/RFC8446">DOI 10.17487/RFC8446</a>,
                                        2018年8月,
                                        &lt;<a
                                            href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;.
                                    </dd>
                                </dl>
                            </div>
                        </section>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="h2-considerations">
                    <h2 id="rfc.section.A" class="np"><a href="#rfc.section.A">Appendix A.</a>&nbsp;<a
                            href="#h2-considerations">从 HTTP/2 过渡的考虑</a></h2>
                    <div id="rfc.section.A.p.1">
                        <p>HTTP/3 在很大程度上受 HTTP/2 的启发，并且有许多相似之处。本节描述了 HTTP/3 的设计方法，指出与 HTTP/2 的重要差异，并说明如何将 HTTP/2 扩展映射到
                            HTTP/3。</p>
                    </div>
                    <div id="rfc.section.A.p.2">
                        <p>HTTP/3 的出发点是与 HTTP/2 的相似性是可取的，但并非强制要求。当 QUIC 与 TCP 有差异时，HTTP/3 会偏离 HTTP/2，既为了利用 QUIC
                            的特性（如流），也为了解决重要的缺陷（例如缺乏全局排序）。虽然 HTTP/3 在关键方面与 HTTP/2 相似，例如请求与响应与流的关系，但 HTTP/3 的设计细节与 HTTP/2
                            有实质性差别。</p>
                    </div>
                    <div id="rfc.section.A.p.3">
                        <p>本节指出了一些重要的不同之处。</p>
                    </div>
                    <section id="h2-streams">
                        <h3 id="rfc.section.A.1"><a href="#rfc.section.A.1">A.1.</a>&nbsp;<a href="#h2-streams">流</a>
                        </h3>
                        <div id="rfc.section.A.1.p.1">
                            <p>HTTP/3 允许使用比 HTTP/2 更大的流数量（2<sup>62</sup>-1）。与流标识符空间耗尽相关的相同考虑仍然适用，但空间要大得多，因此更可能先遇到 QUIC
                                的其他限制，例如连接流量控制窗口的限制。</p>
                        </div>
                        <div id="rfc.section.A.1.p.2">
                            <p>与 HTTP/2 相比，HTTP/3 中的流并发由 QUIC 管理。QUIC 在接收了所有数据并且发送的数据被对端确认后将流视为已关闭。HTTP/2 在包含 END_STREAM
                                位的帧被提交到传输时将流视为已关闭。因此，对于等价的交换，HTTP/3 中的流可能保持“活动”状态更长时间。HTTP/3
                                服务器可能会选择允许更多的客户端发起的并发双向流以达到与 HTTP/2 相当的并发性，具体取决于预期的使用模式。</p>
                        </div>
                        <div id="rfc.section.A.1.p.3">
                            <p>在 HTTP/2 中，只有请求和响应主体（<a href="#frame-data" title="DATA">DATA</a><span
                                    id="rfc.iref.d.15"></span> 帧的负载）受流量控制。所有 HTTP/3 帧都在 QUIC 流上发送，因此在 HTTP/3
                                中所有流上的所有帧都受流量控制。</p>
                        </div>
                        <div id="rfc.section.A.1.p.4">
                            <p>由于存在其它单向流类型，HTTP/3 不再仅依赖并发单向流的数量来控制并发正在进行的推送数。相反，HTTP/3 客户端使用 <a
                                    href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span
                                    id="rfc.iref.m.22"></span> 帧来控制从服务器接收的推送数量。</p>
                        </div>
                    </section>
                    <section id="h2-frames">
                        <h3 id="rfc.section.A.2"><a href="#rfc.section.A.2">A.2.</a>&nbsp;<a href="#h2-frames">HTTP
                                帧类型</a></h3>
                        <div id="rfc.section.A.2.p.1">
                            <p>许多来自 HTTP/2 的分帧概念在 QUIC 上可以省略，因为传输层已经处理了这些问题。因为帧已经位于某个流上，它们可以省略流编号。因为帧不会阻塞复用（QUIC
                                的复用在本层之下），可以移除对可变最大长度包的支持。因为流终止由 QUIC 处理，所以不需要 END_STREAM 标志。这允许从通用帧布局中移除 Flags 字段。</p>
                        </div>
                        <div id="rfc.section.A.2.p.2">
                            <p>帧负载大多借鉴自 <a href="#RFC9113"><cite title="HTTP/2">[HTTP/2]</cite></a>。然而，QUIC
                                包含许多特性（例如流量控制）也出现在 HTTP/2 中。在这些情况下，HTTP 映射不会重新实现它们。因此，若干 HTTP/2 帧类型在 HTTP/3
                                中不再需要。对于不再使用的 HTTP/2 定义的帧，其帧 ID 已被保留以最大化 HTTP/2 与 HTTP/3
                                实现之间的可移植性。但即使在两者映射都存在的帧类型，其语义也不完全相同。</p>
                        </div>
                        <div id="rfc.section.A.2.p.3">
                            <p>许多差异源于这样一个事实：HTTP/2 在所有流之间提供绝对的帧顺序，而 QUIC 仅在每个流内提供此保证。因此，如果某个帧类型假定来自不同流的帧仍将以发送顺序接收，HTTP/3
                                将会破坏该假定。</p>
                        </div>
                        <div id="rfc.section.A.2.p.4">
                            <p>下面描述了一些特性适配的示例，以及将 HTTP/2 扩展转换为 HTTP/3 时对扩展帧实现者的一般指导。</p>
                        </div>
                        <section id="h2-diff-priority">
                            <h4 id="rfc.section.A.2.1"><a href="#rfc.section.A.2.1">A.2.1.</a>&nbsp;<a
                                    href="#h2-diff-priority">优先级差异</a></h4>
                            <div id="rfc.section.A.2.1.p.1">
                                <p>HTTP/2 在 PRIORITY 帧中以及（可选地）在 <a href="#frame-headers"
                                        title="HEADERS">HEADERS</a><span id="rfc.iref.h.101"></span> 帧中指定优先级分配。HTTP/3
                                    不提供信号优先级的方式。</p>
                            </div>
                            <div id="rfc.section.A.2.1.p.2">
                                <p>注意，尽管没有显式的优先级信号，但这并不意味着优先级对实现良好性能不重要。</p>
                            </div>
                        </section>
                        <section id="field-compression-differences">
                            <h4 id="rfc.section.A.2.2"><a href="#rfc.section.A.2.2">A.2.2.</a>&nbsp;<a
                                    href="#field-compression-differences">字段压缩差异</a></h4>
                            <div id="rfc.section.A.2.2.p.1">
                                <p>HPACK 的设计假定按序交付。编码的字段节序列必须以编码时的相同顺序到达（并在端点处解码），这确保了两端的动态状态保持同步。</p>
                            </div>
                            <div id="rfc.section.A.2.2.p.2">
                                <p>由于 QUIC 不提供这种全局排序，HTTP/3 使用 HPACK 的修改版本，称为 QPACK。QPACK
                                    使用单个单向流来对动态表的所有修改进行排序，确保更新的全序。所有包含编码字段的帧仅引用特定时间的表状态而不修改它。</p>
                            </div>
                            <div id="rfc.section.A.2.2.p.3">
                                <p><a href="#RFC9204"><cite
                                            title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> 提供了更多细节。</p>
                            </div>
                        </section>
                        <section id="flow-control-differences">
                            <h4 id="rfc.section.A.2.3"><a href="#rfc.section.A.2.3">A.2.3.</a>&nbsp;<a
                                    href="#flow-control-differences">流量控制差异</a></h4>
                            <div id="rfc.section.A.2.3.p.1">
                                <p>HTTP/2 指定了流的流量控制机制。尽管所有 HTTP/2 帧都是在流上传送，但只有 <a href="#frame-data"
                                        title="DATA">DATA</a><span id="rfc.iref.d.16"></span> 帧的负载受流量控制。QUIC
                                    为流数据提供流量控制，而本文档定义的所有 HTTP/3 帧类型都在流上发送。因此，所有帧头和负载都受流量控制。</p>
                            </div>
                        </section>
                        <section id="guidance-for-new-frame-type-definitions">
                            <h4 id="rfc.section.A.2.4"><a href="#rfc.section.A.2.4">A.2.4.</a>&nbsp;<a
                                    href="#guidance-for-new-frame-type-definitions">新帧类型定义的指导</a></h4>
                            <div id="rfc.section.A.2.4.p.1">
                                <p>HTTP/3 中的帧类型定义通常使用 QUIC 的可变长度整数编码。特别地，流 ID 使用该编码，这允许比 HTTP/2 使用的编码更大的值范围。HTTP/3
                                    中的一些帧使用除了流 ID 之外的标识符（例如 push ID）。如果扩展帧类型的编码包含流 ID，则可能需要重新定义扩展帧类型编码。</p>
                            </div>
                            <div id="rfc.section.A.2.4.p.2">
                                <p>由于通用 HTTP/3 帧中没有 Flags 字段，依赖标志存在的那些帧需要在其帧负载中为标志分配空间。</p>
                            </div>
                            <div id="rfc.section.A.2.4.p.3">
                                <p>除这些问题外，HTTP/2 的帧类型扩展通常可以通过在 HTTP/3 中将 HTTP/2 中的流 0 替换为 <a href="#control-streams"
                                        title="Control Streams">control stream</a><span id="rfc.iref.c.65"></span>
                                    来简单移植。HTTP/3 扩展不会假定顺序，但不会因有序而受到损害，并预计可以移植到 HTTP/2。</p>
                            </div>
                        </section>
                        <section id="comparison-of-http2-and-http3-frame-types">
                            <h4 id="rfc.section.A.2.5"><a href="#rfc.section.A.2.5">A.2.5.</a>&nbsp;<a
                                    href="#comparison-of-http2-and-http3-frame-types">HTTP/2 与 HTTP/3 帧类型的比较</a></h4>
                            <div id="rfc.section.A.2.5.p.1">
                                <dl>
                                    <dt><a href="#frame-data" title="DATA">DATA</a> (0x00)<div id="rfc.iref.d.17"></div>
                                        :</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>在 HTTP/3 帧中未定义填充。参见 <a href="#frame-data" title="DATA">第 7.2.1 节</a>。</div>
                                    </dd>
                                    <dt><a href="#frame-headers" title="HEADERS">HEADERS</a> (0x01)<div
                                            id="rfc.iref.h.102"></div>:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div><a href="#frame-headers" title="HEADERS">HEADERS</a><span
                                                id="rfc.iref.h.103"></span> 的 PRIORITY 区域在 HTTP/3 帧中未定义。HTTP/3
                                            帧中未定义填充。参见 <a href="#frame-headers" title="HEADERS">第 7.2.2 节</a>。</div>
                                    </dd>
                                    <dt>PRIORITY (0x02):</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>如 <a href="#h2-diff-priority" title="Prioritization Differences">附录
                                                A.2.1</a> 所述，HTTP/3 不提供优先级信号的手段。</div>
                                    </dd>
                                    <dt>RST_STREAM (0x03):</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>HTTP/3 中不存在 RST_STREAM 帧，因为 QUIC 提供了流生命周期管理。相同的码位用于 <a
                                                href="#frame-cancel-push" title="CANCEL_PUSH">CANCEL_PUSH</a><span
                                                id="rfc.iref.c.66"></span> 帧（参见 <a href="#frame-cancel-push"
                                                title="CANCEL_PUSH">第 7.2.3 节</a>）。</div>
                                    </dd>
                                    <dt><a href="#frame-settings" title="SETTINGS">SETTINGS</a> (0x04)<div
                                            id="rfc.iref.s.19"></div>:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div><a href="#frame-settings" title="SETTINGS">SETTINGS</a><span
                                                id="rfc.iref.s.20"></span> 帧仅在连接开始时发送。参见 <a href="#frame-settings"
                                                title="SETTINGS">第 7.2.4 节</a> 和 <a href="#h2-settings"
                                                title="HTTP/2 SETTINGS Parameters">附录 A.3</a>。</div>
                                    </dd>
                                    <dt><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a> (0x05)<div
                                            id="rfc.iref.p.71"></div>:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div><a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                                id="rfc.iref.p.72"></span>
                                            帧不引用流；相反，<a href="#push-streams" title="Push Streams">push stream</a><span
                                                id="rfc.iref.p.73"></span>
                                            使用 <a href="#server-push" title="Server Push">push ID</a><span
                                                id="rfc.iref.p.75"></span>
                                            引用 <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                                id="rfc.iref.p.74"></span> 帧。参见 <a href="#frame-push-promise"
                                                title="PUSH_PROMISE">第 7.2.5 节</a>。</div>
                                    </dd>
                                    <dt>PING (0x06):</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>HTTP/3 中不存在 PING 帧，因为 QUIC 提供了等价的功能。</div>
                                    </dd>
                                    <dt><a href="#frame-goaway" title="GOAWAY">GOAWAY</a> (0x07)<div id="rfc.iref.g.29">
                                        </div>:</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div><a href="#frame-goaway" title="GOAWAY">GOAWAY</a><span
                                                id="rfc.iref.g.30"></span> 不包含错误代码。在客户端到服务器方向，它携带 <a href="#server-push"
                                                title="Server Push">push ID</a><span
                                                id="rfc.iref.p.76"></span>，而不是服务器发起的流 ID。参见 <a href="#frame-goaway"
                                                title="GOAWAY">第 7.2.6 节</a>。</div>
                                    </dd>
                                    <dt>WINDOW_UPDATE (0x08):</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>WINDOW_UPDATE 帧在 HTTP/3 中不存在，因为 QUIC 提供了流量控制。</div>
                                    </dd>
                                    <dt>CONTINUATION (0x09):</dt>
                                    <dd style="margin-left: 1.5em">
                                        <div>CONTINUATION 帧在 HTTP/3 中不存在；相反，允许比 HTTP/2 更大的 <a href="#frame-headers"
                                                title="HEADERS">HEADERS</a><span id="rfc.iref.h.104"></span>/
                                            <a href="#frame-push-promise" title="PUSH_PROMISE">PUSH_PROMISE</a><span
                                                id="rfc.iref.p.77"></span> 帧。
                                        </div>
                                    </dd>
                                </dl>
                            </div>
                            <div id="rfc.section.A.2.5.p.2">
                                <p>由 HTTP/2 扩展定义的帧类型如果仍适用，需要为 HTTP/3 单独注册。为简便起见，HTTP/2 中定义的帧 ID 已被保留。注意 HTTP/3
                                    的帧类型空间大得多（62 位对比 8 位），因此许多 HTTP/3 帧类型在 HTTP/2 中没有等价的码点。参见 <a href="#iana-frames"
                                        title="Frame Types">第 11.2.1 节</a>。</p>
                            </div>
                        </section>
                    </section>
                    <section id="h2-settings">
                        <h3 id="rfc.section.A.3"><a href="#rfc.section.A.3">A.3.</a>&nbsp;<a href="#h2-settings">HTTP/2
                                SETTINGS 参数</a></h3>
                        <div id="rfc.section.A.3.p.1">
                            <p>与 HTTP/2 的一个重要区别是设置在作为 <a href="#control-streams" title="Control Streams">control
                                    stream</a><span id="rfc.iref.c.67"></span> 的第一个帧中发送一次，之后不能更改。这消除了许多关于变更同步的边缘情况。</p>
                        </div>
                        <div id="rfc.section.A.3.p.2">
                            <p>HTTP/2 通过 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span
                                    id="rfc.iref.s.21"></span> 帧指定的一些传输级选项在 HTTP/3 中被 QUIC 传输参数取代。保留在 HTTP/3 中的 HTTP
                                级设置与 HTTP/2 中的值相同。被取代的设置被保留，其接收被视为错误。有关保留和值的讨论，见 <a href="#settings-parameters"
                                    title="Defined SETTINGS Parameters">第 7.2.4.1 节</a>。</p>
                        </div>
                        <div id="rfc.section.A.3.p.3" class="avoidbreakafter">
                            <p>下面列出每个 HTTP/2 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span
                                    id="rfc.iref.s.22"></span> 参数的映射：</p>
                        </div>
                        <div id="rfc.section.A.3.p.4">
                            <dl>
                                <dt>SETTINGS_HEADER_TABLE_SIZE (0x01):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>参见 <a href="#RFC9204"><cite
                                                title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a>。</div>
                                </dd>
                                <dt>SETTINGS_ENABLE_PUSH (0x02):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>此项已被替换为 <a href="#frame-max-push-id" title="MAX_PUSH_ID">MAX_PUSH_ID</a><span
                                            id="rfc.iref.m.23"></span> 帧，后者提供了对服务器推送的更细粒度控制。在 HTTP/3 的 <a
                                            href="#frame-settings" title="SETTINGS">SETTINGS</a><span
                                            id="rfc.iref.s.23"></span> 帧中指定标识符为 0x02 的设置（对应于 SETTINGS_ENABLE_PUSH
                                        参数）是错误的。</div>
                                </dd>
                                <dt>SETTINGS_MAX_CONCURRENT_STREAMS (0x03):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>QUIC 在其流量控制逻辑中控制最大的打开流 ID。在 HTTP/3 的 <a href="#frame-settings"
                                            title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.24"></span> 帧中指定标识符为
                                        0x03（对应于 SETTINGS_MAX_CONCURRENT_STREAMS 参数）的设置是错误的。</div>
                                </dd>
                                <dt>SETTINGS_INITIAL_WINDOW_SIZE (0x04):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>QUIC 要求在初始传输握手中指定流和连接的流量控制窗口大小。在 HTTP/3 的 <a href="#frame-settings"
                                            title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.25"></span> 帧中指定标识符为
                                        0x04（对应于 SETTINGS_INITIAL_WINDOW_SIZE 参数）的设置是错误的。</div>
                                </dd>
                                <dt>SETTINGS_MAX_FRAME_SIZE (0x05):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>此设置在 HTTP/3 中没有等价项。在 HTTP/3 的 <a href="#frame-settings"
                                            title="SETTINGS">SETTINGS</a><span id="rfc.iref.s.26"></span> 帧中指定标识符为
                                        0x05（对应于 SETTINGS_MAX_FRAME_SIZE 参数）的设置是错误的。</div>
                                </dd>
                                <dt>SETTINGS_MAX_HEADER_LIST_SIZE (0x06):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>此设置标识符已重命名为 <a
                                            href="#SETTINGS_MAX_FIELD_SECTION_SIZE">SETTINGS_MAX_FIELD_SECTION_SIZE</a><span
                                            id="rfc.iref.s.27"></span>。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.A.3.p.5">
                            <p>在 HTTP/3 中，设置值为可变长度整数（6、14、30 或 62 位），而不是 HTTP/2 中的固定 32 位字段。这通常会产生更短的编码，但对于使用完整 32
                                位空间的设置可能产生更长的编码。从 HTTP/2 移植的设置可以选择重新定义其值以限制为 30 位以获得更高效的编码，或者如果需要超过 30 位可以利用 62 位空间。</p>
                        </div>
                        <div id="rfc.section.A.3.p.6">
                            <p>需要为 HTTP/2 和 HTTP/3 分别定义设置。为简便起见，在 <a href="#RFC9113"><cite
                                        title="HTTP/2">[HTTP/2]</cite></a> 中定义的设置标识符已被保留。注意 HTTP/3 的设置标识符空间明显更大（62 位对比
                                16 位），因此许多 HTTP/3 设置在 HTTP/2 中没有等价的码点。参见 <a href="#iana-settings"
                                    title="Settings Parameters">第 11.2.2 节</a>。</p>
                        </div>
                        <div id="rfc.section.A.3.p.7">
                            <p>由于 QUIC 流可能无序到达，建议端点不要在等待对等方的设置到达后再对其它流做出响应。参见 <a href="#settings-initialization"
                                    title="Initialization">第 7.2.4.2 节</a>。</p>
                        </div>
                    </section>
                    <section id="http2-error-codes">
                        <h3 id="rfc.section.A.4"><a href="#rfc.section.A.4">A.4.</a>&nbsp;<a
                                href="#http2-error-codes">HTTP/2 错误代码</a></h3>
                        <div id="rfc.section.A.4.p.1">
                            <p>QUIC 拥有与 HTTP/2 相同的“流”和“连接”错误的概念。然而，HTTP/2 与 HTTP/3 之间的差异意味着错误代码不能直接在版本之间移植。</p>
                        </div>
                        <div id="rfc.section.A.4.p.2" class="avoidbreakafter">
                            <p>在 <a href="https://www.rfc-editor.org/rfc/rfc9113.html#section-7">RFC 9113 第 7 节</a> 中定义的
                                HTTP/2 错误代码在逻辑上与 HTTP/3 错误代码的映射如下：</p>
                        </div>
                        <div id="rfc.section.A.4.p.3">
                            <dl>
                                <dt>NO_ERROR (0x00):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_NO_ERROR">H3_NO_ERROR</a><span id="rfc.iref.h.105"></span>，见 <a
                                            href="#http-error-codes" title="HTTP/3 Error Codes">第 8.1 节</a>。</div>
                                </dd>
                                <dt>PROTOCOL_ERROR (0x01):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>映射为 <a href="#H3_GENERAL_PROTOCOL_ERROR">H3_GENERAL_PROTOCOL_ERROR</a><span
                                            id="rfc.iref.h.106"></span>，除非已定义更具体的错误代码。例如包括 <a
                                            href="#H3_FRAME_UNEXPECTED">H3_FRAME_UNEXPECTED</a><span
                                            id="rfc.iref.h.107"></span>、<a
                                            href="#H3_MESSAGE_ERROR">H3_MESSAGE_ERROR</a><span
                                            id="rfc.iref.h.108"></span> 和 <a
                                            href="#H3_CLOSED_CRITICAL_STREAM">H3_CLOSED_CRITICAL_STREAM</a><span
                                            id="rfc.iref.h.109"></span>，这些都在 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a> 中定义。</div>
                                </dd>
                                <dt>INTERNAL_ERROR (0x02):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_INTERNAL_ERROR">H3_INTERNAL_ERROR</a><span
                                            id="rfc.iref.h.110"></span>，见 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a>。</div>
                                </dd>
                                <dt>FLOW_CONTROL_ERROR (0x03):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>不适用，因为 QUIC 处理流量控制。</div>
                                </dd>
                                <dt>SETTINGS_TIMEOUT (0x04):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>不适用，因为没有定义对 <a href="#frame-settings" title="SETTINGS">SETTINGS</a><span
                                            id="rfc.iref.s.28"></span> 的确认。</div>
                                </dd>
                                <dt>STREAM_CLOSED (0x05):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>不适用，因为 QUIC 处理流管理。</div>
                                </dd>
                                <dt>FRAME_SIZE_ERROR (0x06):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_FRAME_ERROR">H3_FRAME_ERROR</a><span id="rfc.iref.h.111"></span>，见
                                        <a href="#http-error-codes" title="HTTP/3 Error Codes">第 8.1 节</a>。
                                    </div>
                                </dd>
                                <dt>REFUSED_STREAM (0x07):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span
                                            id="rfc.iref.h.112"></span>（见 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a>）用于指示请求未被处理。其他情况不适用，因为 QUIC 处理流管理。
                                    </div>
                                </dd>
                                <dt>CANCEL (0x08):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                            id="rfc.iref.h.113"></span>，见 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a>。</div>
                                </dd>
                                <dt>COMPRESSION_ERROR (0x09):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>多个错误代码在 <a href="#RFC9204"><cite
                                                title="QPACK: Field Compression for HTTP/3">[QPACK]</cite></a> 中定义。
                                    </div>
                                </dd>
                                <dt>CONNECT_ERROR (0x0a):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_CONNECT_ERROR">H3_CONNECT_ERROR</a><span
                                            id="rfc.iref.h.114"></span>，见 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a>。</div>
                                </dd>
                                <dt>ENHANCE_YOUR_CALM (0x0b):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_EXCESSIVE_LOAD">H3_EXCESSIVE_LOAD</a><span
                                            id="rfc.iref.h.115"></span>，见 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a>。</div>
                                </dd>
                                <dt>INADEQUATE_SECURITY (0x0c):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div>不适用，因为假设 QUIC 在所有连接上提供足够的安全性。</div>
                                </dd>
                                <dt>HTTP_1_1_REQUIRED (0x0d):</dt>
                                <dd style="margin-left: 1.5em">
                                    <div><a href="#H3_VERSION_FALLBACK">H3_VERSION_FALLBACK</a><span
                                            id="rfc.iref.h.116"></span>，见 <a href="#http-error-codes"
                                            title="HTTP/3 Error Codes">第 8.1 节</a>。</div>
                                </dd>
                            </dl>
                        </div>
                        <div id="rfc.section.A.4.p.4">
                            <p>需要为 HTTP/2 和 HTTP/3 分别定义错误代码。参见 <a href="#iana-error-codes" title="Error Codes">第 11.2.3
                                    节</a>。</p>
                        </div>
                        <section id="mapping-between-http2-and-http3-errors">
                            <h4 id="rfc.section.A.4.1"><a href="#rfc.section.A.4.1">A.4.1.</a>&nbsp;<a
                                    href="#mapping-between-http2-and-http3-errors">HTTP/2 与 HTTP/3 错误之间的映射</a></h4>
                            <div id="rfc.section.A.4.1.p.1">
                                <p>在 HTTP/2 与 HTTP/3
                                    之间转换的中介可能会遇到来自任一上游的错误条件。向下游传达错误的发生是有用的，但错误代码在很大程度上反映了连接本地的问题，通常不适合传播。</p>
                            </div>
                            <div id="rfc.section.A.4.1.p.2">
                                <p>遇到来自上游源的错误的中介可以通过发送 HTTP 状态码（例如 502 Bad Gateway）来表示这种情况，这对一类广泛的错误是合适的。</p>
                            </div>
                            <div id="rfc.section.A.4.1.p.3">
                                <p>在某些罕见情况下，将错误映射为接收方的最接近匹配错误类型并传播它是有益的。例如，中介从源接收到 HTTP/2 的 REFUSED_STREAM 类型的 <a
                                        href="#errors" title="Error Handling">流错误</a><span id="rfc.iref.s.29"></span>
                                    时，能明确地得到请求未被处理并且可以安全重试的信号。将该错误条件传播给客户端，作为 HTTP/3 类型为 <a
                                        href="#H3_REQUEST_REJECTED">H3_REQUEST_REJECTED</a><span
                                        id="rfc.iref.h.117"></span> 的 <a href="#errors"
                                        title="Error Handling">流错误</a><span
                                        id="rfc.iref.s.30"></span>，允许客户端采取其认为最合适的操作。反方向上，中介也可能认为传递客户端通过以 <a
                                        href="#H3_REQUEST_CANCELLED">H3_REQUEST_CANCELLED</a><span
                                        id="rfc.iref.h.118"></span> 终止流所示的取消请求是有益的；参见 <a href="#request-cancellation"
                                        title="Request Cancellation and Rejection">第 4.1.1 节</a>。</p>
                            </div>
                            <div id="rfc.section.A.4.1.p.4">
                                <p>错误之间的转换在逻辑映射中有描述。错误代码在不重叠的空间中定义，以防止意外转换导致在目标版本中使用不适当或未知的错误代码。中介可以将 <a href="#errors"
                                        title="Error Handling">流错误</a><span id="rfc.iref.s.31"></span> 升级为 <a
                                        href="#errors" title="Error Handling">连接错误</a><span
                                        id="rfc.iref.c.68"></span>，但在这样做时应注意这可能对 HTTP/3 连接造成的代价，尤其当错误可能是暂时或间歇性时。</p>
                            </div>
                        </section>
                    </section>
                </section>
                <hr class="hidden-print">
                <section id="acknowledgments">
                    <h2 id="rfc.section.unnumbered-4" class="np"><a href="#acknowledgments">致谢</a></h2>
                    <div id="rfc.section.unnumbered-4.p.1">
                        <p>Robbie Shade 和 Mike Warres 是 draft-shade-quic-http2-mapping 草案的作者，该草案是本文档的先驱。</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.2" class="avoidbreakafter">
                        <p>IETF QUIC 工作组得到了许多人的大量支持。下列人员（按姓氏字母顺序，部分列出）对本文档做出了大量贡献：</p>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.3">
                        <ul>
                            <li>
                                <div>
                                    <p>Bence Beky</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Daan De Meyer</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Martin Duke</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Roy Fielding</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Alan Frindell</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Alessandro Ghedini</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Nick Harper</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Ryan Hamilton</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Christian Huitema</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Subodh Iyengar</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Robin Marx</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Patrick McManus</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Luca Niccolini</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>奥 一穂 (Kazuho Oku)</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Lucas Pardue</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Roberto Peon</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Julian Reschke</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Eric Rescorla</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Martin Seemann</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Ben Schwartz</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Ian Swett</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Willy Taureau</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Martin Thomson</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Dmitri Tikhonov</p>
                                </div>
                            </li>
                            <li>
                                <div>
                                    <p>Tatsuhiro Tsujikawa</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="rfc.section.unnumbered-4.p.4">
                        <p>Mike Bishop 的部分贡献在他受雇于 Microsoft 时得到了 Microsoft 的资助支持。</p>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.index" class="np">
                    <h2><a href="#rfc.index">索引</a></h2>
                    <p class="hidden-print"><a href="#rfc.index.C">C</a> <a href="#rfc.index.D">D</a> <a
                            href="#rfc.index.G">G</a> <a href="#rfc.index.H">H</a> <a href="#rfc.index.M">M</a> <a
                            href="#rfc.index.P">P</a> <a href="#rfc.index.R">R</a> <a href="#rfc.index.S">S</a> </p>
                    <div class="print2col">
                        <ul class="ind">
                            <li><a id="rfc.index.C" href="#rfc.index.C"><b>C</b></a>
                                <ul>
                                    <li>CANCEL_PUSH&nbsp;&nbsp;<a href="#rfc.iref.c.2">2</a>, <a
                                            href="#rfc.iref.c.10">4.6</a>, <a href="#rfc.iref.c.11">4.6</a>, <a
                                            href="#rfc.iref.c.24">7</a>, <a href="#rfc.section.7.2.3"><b>7.2.3</b></a>,
                                        <a href="#rfc.iref.c.45">7.2.5</a>, <a href="#rfc.iref.c.55">7.2.7</a>, <a
                                            href="#rfc.iref.c.64">11.2.1</a>, <a href="#rfc.iref.c.66">A.2.5</a>
                                    </li>
                                    <li>connection error&nbsp;&nbsp;<a href="#rfc.iref.c.3">2.2</a>, <a
                                            href="#rfc.iref.c.5">4.1</a>, <a href="#rfc.iref.c.6">4.1</a>, <a
                                            href="#rfc.iref.c.7">4.4</a>, <a href="#rfc.iref.c.8">4.4</a>, <a
                                            href="#rfc.iref.c.9">4.6</a>, <a href="#rfc.iref.c.12">5.2</a>, <a
                                            href="#rfc.iref.c.13">6.1</a>, <a href="#rfc.iref.c.17">6.2</a>, <a
                                            href="#rfc.iref.c.18">6.2.1</a>, <a href="#rfc.iref.c.19">6.2.1</a>, <a
                                            href="#rfc.iref.c.20">6.2.1</a>, <a href="#rfc.iref.c.21">6.2.2</a>, <a
                                            href="#rfc.iref.c.22">6.2.2</a>, <a href="#rfc.iref.c.25">7.1</a>, <a
                                            href="#rfc.iref.c.26">7.1</a>, <a href="#rfc.iref.c.28">7.2.1</a>, <a
                                            href="#rfc.iref.c.30">7.2.2</a>, <a href="#rfc.iref.c.33">7.2.3</a>, <a
                                            href="#rfc.iref.c.34">7.2.3</a>, <a href="#rfc.iref.c.35">7.2.3</a>, <a
                                            href="#rfc.iref.c.38">7.2.4</a>, <a href="#rfc.iref.c.40">7.2.4</a>, <a
                                            href="#rfc.iref.c.41">7.2.4</a>, <a href="#rfc.iref.c.42">7.2.4.1</a>, <a
                                            href="#rfc.iref.c.43">7.2.4.2</a>, <a href="#rfc.iref.c.44">7.2.4.2</a>, <a
                                            href="#rfc.iref.c.46">7.2.5</a>, <a href="#rfc.iref.c.47">7.2.5</a>, <a
                                            href="#rfc.iref.c.49">7.2.5</a>, <a href="#rfc.iref.c.50">7.2.5</a>, <a
                                            href="#rfc.iref.c.52">7.2.6</a>, <a href="#rfc.iref.c.54">7.2.6</a>, <a
                                            href="#rfc.iref.c.57">7.2.7</a>, <a href="#rfc.iref.c.58">7.2.7</a>, <a
                                            href="#rfc.iref.c.59">7.2.7</a>, <a href="#rfc.iref.c.60">7.2.8</a>, <a
                                            href="#rfc.section.8"><b>8</b></a>, <a href="#rfc.iref.c.63">10.5</a>, <a
                                            href="#rfc.iref.c.68">A.4.1</a></li>
                                    <li>control stream&nbsp;&nbsp;<a href="#rfc.iref.c.1">2</a>, <a
                                            href="#rfc.iref.c.4">3.2</a>, <a href="#rfc.iref.c.14">6.2</a>, <a
                                            href="#rfc.iref.c.15">6.2</a>, <a href="#rfc.iref.c.16">6.2</a>, <a
                                            href="#rfc.section.6.2.1"><b>6.2.1</b></a>, <a href="#rfc.iref.c.23">7</a>,
                                        <a href="#rfc.iref.c.27">7.2.1</a>, <a href="#rfc.iref.c.29">7.2.2</a>, <a
                                            href="#rfc.iref.c.31">7.2.3</a>, <a href="#rfc.iref.c.32">7.2.3</a>, <a
                                            href="#rfc.iref.c.36">7.2.4</a>, <a href="#rfc.iref.c.37">7.2.4</a>, <a
                                            href="#rfc.iref.c.39">7.2.4</a>, <a href="#rfc.iref.c.48">7.2.5</a>, <a
                                            href="#rfc.iref.c.51">7.2.6</a>, <a href="#rfc.iref.c.53">7.2.6</a>, <a
                                            href="#rfc.iref.c.56">7.2.7</a>, <a href="#rfc.iref.c.61">8.1</a>, <a
                                            href="#rfc.iref.c.62">9</a>, <a href="#rfc.iref.c.65">A.2.4</a>, <a
                                            href="#rfc.iref.c.67">A.3</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.D" href="#rfc.index.D"><b>D</b></a>
                                <ul>
                                    <li>DATA&nbsp;&nbsp;<a href="#rfc.iref.d.1">2</a>, <a href="#rfc.iref.d.2">4.1</a>,
                                        <a href="#rfc.iref.d.3">4.1</a>, <a href="#rfc.iref.d.4">4.1</a>, <a
                                            href="#rfc.iref.d.5">4.1.2</a>, <a href="#rfc.iref.d.6">4.1.2</a>, <a
                                            href="#rfc.iref.d.7">4.4</a>, <a href="#rfc.iref.d.8">4.4</a>, <a
                                            href="#rfc.iref.d.9">4.4</a>, <a href="#rfc.iref.d.10">4.4</a>, <a
                                            href="#rfc.iref.d.11">4.4</a>, <a href="#rfc.iref.d.12">4.6</a>, <a
                                            href="#rfc.iref.d.13">7</a>, <a href="#rfc.section.7.2.1"><b>7.2.1</b></a>,
                                        <a href="#rfc.iref.d.14">11.2.1</a>, <a href="#rfc.iref.d.15">A.1</a>, <a
                                            href="#rfc.iref.d.16">A.2.3</a>, <a href="#rfc.iref.d.17">A.2.5</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.G" href="#rfc.index.G"><b>G</b></a>
                                <ul>
                                    <li>GOAWAY&nbsp;&nbsp;<a href="#rfc.iref.g.1">3.3</a>, <a
                                            href="#rfc.iref.g.2">5.2</a>, <a href="#rfc.iref.g.3">5.2</a>, <a
                                            href="#rfc.iref.g.4">5.2</a>, <a href="#rfc.iref.g.5">5.2</a>, <a
                                            href="#rfc.iref.g.6">5.2</a>, <a href="#rfc.iref.g.7">5.2</a>, <a
                                            href="#rfc.iref.g.8">5.2</a>, <a href="#rfc.iref.g.9">5.2</a>, <a
                                            href="#rfc.iref.g.10">5.2</a>, <a href="#rfc.iref.g.11">5.2</a>, <a
                                            href="#rfc.iref.g.12">5.2</a>, <a href="#rfc.iref.g.13">5.2</a>, <a
                                            href="#rfc.iref.g.14">5.2</a>, <a href="#rfc.iref.g.15">5.2</a>, <a
                                            href="#rfc.iref.g.16">5.2</a>, <a href="#rfc.iref.g.17">5.2</a>, <a
                                            href="#rfc.iref.g.18">5.2</a>, <a href="#rfc.iref.g.19">5.2</a>, <a
                                            href="#rfc.iref.g.20">5.2</a>, <a href="#rfc.iref.g.21">5.2</a>, <a
                                            href="#rfc.iref.g.22">5.2</a>, <a href="#rfc.iref.g.23">5.2</a>, <a
                                            href="#rfc.iref.g.24">5.3</a>, <a href="#rfc.iref.g.25">5.3</a>, <a
                                            href="#rfc.iref.g.26">5.4</a>, <a href="#rfc.iref.g.27">7</a>, <a
                                            href="#rfc.section.7.2.6"><b>7.2.6</b></a>, <a
                                            href="#rfc.iref.g.28">11.2.1</a>, <a href="#rfc.iref.g.29">A.2.5</a>, <a
                                            href="#rfc.iref.g.30">A.2.5</a></li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.H" href="#rfc.index.H"><b>H</b></a>
                                <ul>
                                    <li>H3_CLOSED_CRITICAL_STREAM&nbsp;&nbsp;<a href="#rfc.iref.h.31">6.2.1</a>, <a
                                            href="#rfc.iref.h.66">8.1</a>, <a href="#rfc.iref.h.88">11.2.3</a>, <a
                                            href="#rfc.iref.h.109">A.4</a></li>
                                    <li>H3_CONNECT_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.21">4.4</a>, <a
                                            href="#rfc.iref.h.77">8.1</a>, <a href="#rfc.iref.h.99">11.2.3</a>, <a
                                            href="#rfc.iref.h.114">A.4</a></li>
                                    <li>H3_EXCESSIVE_LOAD&nbsp;&nbsp;<a href="#rfc.iref.h.69">8.1</a>, <a
                                            href="#rfc.iref.h.82">10.5</a>, <a href="#rfc.iref.h.91">11.2.3</a>, <a
                                            href="#rfc.iref.h.115">A.4</a></li>
                                    <li>H3_FRAME_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.36">7.1</a>, <a
                                            href="#rfc.iref.h.37">7.1</a>, <a href="#rfc.iref.h.68">8.1</a>, <a
                                            href="#rfc.iref.h.90">11.2.3</a>, <a href="#rfc.iref.h.111">A.4</a></li>
                                    <li>H3_FRAME_UNEXPECTED&nbsp;&nbsp;<a href="#rfc.iref.h.4">4.1</a>, <a
                                            href="#rfc.iref.h.8">4.1</a>, <a href="#rfc.iref.h.20">4.4</a>, <a
                                            href="#rfc.iref.h.38">7.2.1</a>, <a href="#rfc.iref.h.39">7.2.2</a>, <a
                                            href="#rfc.iref.h.42">7.2.3</a>, <a href="#rfc.iref.h.45">7.2.4</a>, <a
                                            href="#rfc.iref.h.46">7.2.4</a>, <a href="#rfc.iref.h.53">7.2.5</a>, <a
                                            href="#rfc.iref.h.54">7.2.5</a>, <a href="#rfc.iref.h.56">7.2.6</a>, <a
                                            href="#rfc.iref.h.57">7.2.7</a>, <a href="#rfc.iref.h.58">7.2.7</a>, <a
                                            href="#rfc.iref.h.60">7.2.8</a>, <a href="#rfc.iref.h.67">8.1</a>, <a
                                            href="#rfc.iref.h.89">11.2.3</a>, <a href="#rfc.iref.h.107">A.4</a></li>
                                    <li>H3_GENERAL_PROTOCOL_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.52">7.2.5</a>, <a
                                            href="#rfc.iref.h.63">8.1</a>, <a href="#rfc.iref.h.85">11.2.3</a>, <a
                                            href="#rfc.iref.h.106">A.4</a></li>
                                    <li>H3_ID_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.22">4.6</a>, <a
                                            href="#rfc.iref.h.25">5.2</a>, <a href="#rfc.iref.h.33">6.2.2</a>, <a
                                            href="#rfc.iref.h.43">7.2.3</a>, <a href="#rfc.iref.h.44">7.2.3</a>, <a
                                            href="#rfc.iref.h.51">7.2.5</a>, <a href="#rfc.iref.h.55">7.2.6</a>, <a
                                            href="#rfc.iref.h.59">7.2.7</a>, <a href="#rfc.iref.h.70">8.1</a>, <a
                                            href="#rfc.iref.h.92">11.2.3</a></li>
                                    <li>H3_INTERNAL_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.64">8.1</a>, <a
                                            href="#rfc.iref.h.86">11.2.3</a>, <a href="#rfc.iref.h.110">A.4</a></li>
                                    <li>H3_MESSAGE_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.18">4.1.2</a>, <a
                                            href="#rfc.iref.h.76">8.1</a>, <a href="#rfc.iref.h.98">11.2.3</a>, <a
                                            href="#rfc.iref.h.108">A.4</a></li>
                                    <li>H3_MISSING_SETTINGS&nbsp;&nbsp;<a href="#rfc.iref.h.29">6.2.1</a>, <a
                                            href="#rfc.iref.h.72">8.1</a>, <a href="#rfc.iref.h.94">11.2.3</a></li>
                                    <li>H3_NO_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.11">4.1</a>, <a
                                            href="#rfc.iref.h.26">5.2</a>, <a href="#rfc.iref.h.34">6.2.3</a>, <a
                                            href="#rfc.iref.h.61">8</a>, <a href="#rfc.iref.h.62">8.1</a>, <a
                                            href="#rfc.iref.h.79">8.1</a>, <a href="#rfc.iref.h.80">8.1</a>, <a
                                            href="#rfc.iref.h.84">11.2.3</a>, <a href="#rfc.iref.h.105">A.4</a></li>
                                    <li>H3_REQUEST_CANCELLED&nbsp;&nbsp;<a href="#rfc.iref.h.14">4.1.1</a>, <a
                                            href="#rfc.iref.h.15">4.1.1</a>, <a href="#rfc.iref.h.24">4.6</a>, <a
                                            href="#rfc.iref.h.40">7.2.3</a>, <a href="#rfc.iref.h.41">7.2.3</a>, <a
                                            href="#rfc.iref.h.74">8.1</a>, <a href="#rfc.iref.h.96">11.2.3</a>, <a
                                            href="#rfc.iref.h.113">A.4</a>, <a href="#rfc.iref.h.118">A.4.1</a></li>
                                    <li>H3_REQUEST_INCOMPLETE&nbsp;&nbsp;<a href="#rfc.iref.h.10">4.1</a>, <a
                                            href="#rfc.iref.h.75">8.1</a>, <a href="#rfc.iref.h.97">11.2.3</a></li>
                                    <li>H3_REQUEST_REJECTED&nbsp;&nbsp;<a href="#rfc.iref.h.12">4.1.1</a>, <a
                                            href="#rfc.iref.h.13">4.1.1</a>, <a href="#rfc.iref.h.16">4.1.1</a>, <a
                                            href="#rfc.iref.h.17">4.1.1</a>, <a href="#rfc.iref.h.73">8.1</a>, <a
                                            href="#rfc.iref.h.95">11.2.3</a>, <a href="#rfc.iref.h.112">A.4</a>, <a
                                            href="#rfc.iref.h.117">A.4.1</a></li>
                                    <li>H3_SETTINGS_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.47">7.2.4</a>, <a
                                            href="#rfc.iref.h.48">7.2.4.1</a>, <a href="#rfc.iref.h.49">7.2.4.2</a>, <a
                                            href="#rfc.iref.h.50">7.2.4.2</a>, <a href="#rfc.iref.h.71">8.1</a>, <a
                                            href="#rfc.iref.h.93">11.2.3</a></li>
                                    <li>H3_STREAM_CREATION_ERROR&nbsp;&nbsp;<a href="#rfc.iref.h.27">6.1</a>, <a
                                            href="#rfc.iref.h.28">6.2</a>, <a href="#rfc.iref.h.30">6.2.1</a>, <a
                                            href="#rfc.iref.h.32">6.2.2</a>, <a href="#rfc.iref.h.65">8.1</a>, <a
                                            href="#rfc.iref.h.87">11.2.3</a></li>
                                    <li>H3_VERSION_FALLBACK&nbsp;&nbsp;<a href="#rfc.iref.h.78">8.1</a>, <a
                                            href="#rfc.iref.h.100">11.2.3</a>, <a href="#rfc.iref.h.116">A.4</a></li>
                                    <li>HEADERS&nbsp;&nbsp;<a href="#rfc.iref.h.1">2</a>, <a
                                            href="#rfc.iref.h.2">4.1</a>, <a href="#rfc.iref.h.3">4.1</a>, <a
                                            href="#rfc.iref.h.5">4.1</a>, <a href="#rfc.iref.h.6">4.1</a>, <a
                                            href="#rfc.iref.h.7">4.1</a>, <a href="#rfc.iref.h.9">4.1</a>, <a
                                            href="#rfc.iref.h.19">4.4</a>, <a href="#rfc.iref.h.23">4.6</a>, <a
                                            href="#rfc.iref.h.35">7</a>, <a href="#rfc.section.7.2.2"><b>7.2.2</b></a>,
                                        <a href="#rfc.iref.h.81">9</a>, <a href="#rfc.iref.h.83">11.2.1</a>, <a
                                            href="#rfc.iref.h.101">A.2.1</a>, <a href="#rfc.iref.h.102">A.2.5</a>, <a
                                            href="#rfc.iref.h.103">A.2.5</a>, <a href="#rfc.iref.h.104">A.2.5</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.M" href="#rfc.index.M"><b>M</b></a>
                                <ul>
                                    <li>malformed&nbsp;&nbsp;<a href="#rfc.iref.m.2">4.1</a>, <a
                                            href="#rfc.section.4.1.2"><b>4.1.2</b></a>, <a href="#rfc.iref.m.3">4.2</a>,
                                        <a href="#rfc.iref.m.4">4.2</a>, <a href="#rfc.iref.m.5">4.2</a>, <a
                                            href="#rfc.iref.m.6">4.3</a>, <a href="#rfc.iref.m.7">4.3</a>, <a
                                            href="#rfc.iref.m.8">4.3.1</a>, <a href="#rfc.iref.m.9">4.3.2</a>, <a
                                            href="#rfc.iref.m.10">4.4</a>, <a href="#rfc.iref.m.17">8.1</a>, <a
                                            href="#rfc.iref.m.18">10.3</a>, <a href="#rfc.iref.m.19">10.3</a>, <a
                                            href="#rfc.iref.m.20">10.5.1</a>
                                    </li>
                                    <li>MAX_PUSH_ID&nbsp;&nbsp;<a href="#rfc.iref.m.1">2</a>, <a
                                            href="#rfc.iref.m.11">4.6</a>, <a href="#rfc.iref.m.12">4.6</a>, <a
                                            href="#rfc.iref.m.13">4.6</a>, <a href="#rfc.iref.m.14">4.6</a>, <a
                                            href="#rfc.iref.m.15">7</a>, <a href="#rfc.iref.m.16">7.2.5</a>, <a
                                            href="#rfc.section.7.2.7"><b>7.2.7</b></a>, <a
                                            href="#rfc.iref.m.21">11.2.1</a>, <a href="#rfc.iref.m.22">A.1</a>, <a
                                            href="#rfc.iref.m.23">A.3</a></li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.P" href="#rfc.index.P"><b>P</b></a>
                                <ul>
                                    <li>push ID&nbsp;&nbsp;<a href="#rfc.section.4.6"><b>4.6</b></a>, <a
                                            href="#rfc.iref.p.24">5.2</a>, <a href="#rfc.iref.p.25">5.2</a>, <a
                                            href="#rfc.iref.p.26">5.2</a>, <a href="#rfc.iref.p.28">6.2.2</a>, <a
                                            href="#rfc.iref.p.29">6.2.2</a>, <a href="#rfc.iref.p.30">6.2.2</a>, <a
                                            href="#rfc.iref.p.35">7.2.3</a>, <a href="#rfc.iref.p.44">7.2.3</a>, <a
                                            href="#rfc.iref.p.45">7.2.3</a>, <a href="#rfc.iref.p.46">7.2.3</a>, <a
                                            href="#rfc.iref.p.48">7.2.3</a>, <a href="#rfc.iref.p.50">7.2.5</a>, <a
                                            href="#rfc.iref.p.52">7.2.5</a>, <a href="#rfc.iref.p.53">7.2.5</a>, <a
                                            href="#rfc.iref.p.54">7.2.5</a>, <a href="#rfc.iref.p.55">7.2.5</a>, <a
                                            href="#rfc.iref.p.56">7.2.5</a>, <a href="#rfc.iref.p.57">7.2.5</a>, <a
                                            href="#rfc.iref.p.58">7.2.5</a>, <a href="#rfc.iref.p.59">7.2.6</a>, <a
                                            href="#rfc.iref.p.60">7.2.7</a>, <a href="#rfc.iref.p.63">7.2.7</a>, <a
                                            href="#rfc.iref.p.64">7.2.7</a>, <a href="#rfc.iref.p.65">7.2.7</a>, <a
                                            href="#rfc.iref.p.66">7.2.7</a>, <a href="#rfc.iref.p.67">8.1</a>, <a
                                            href="#rfc.iref.p.75">A.2.5</a>, <a href="#rfc.iref.p.76">A.2.5</a></li>
                                    <li>push stream&nbsp;&nbsp;<a href="#rfc.iref.p.5">4.1</a>, <a
                                            href="#rfc.iref.p.7">4.1</a>, <a href="#rfc.iref.p.9">4.6</a>, <a
                                            href="#rfc.iref.p.11">4.6</a>, <a href="#rfc.iref.p.12">4.6</a>, <a
                                            href="#rfc.iref.p.18">4.6</a>, <a href="#rfc.iref.p.20">4.6</a>, <a
                                            href="#rfc.iref.p.22">4.6</a>, <a href="#rfc.iref.p.27">6.2</a>, <a
                                            href="#rfc.section.6.2.2"><b>6.2.2</b></a>, <a href="#rfc.iref.p.31">7</a>,
                                        <a href="#rfc.iref.p.33">7.2.2</a>, <a href="#rfc.iref.p.34">7.2.3</a>, <a
                                            href="#rfc.iref.p.36">7.2.3</a>, <a href="#rfc.iref.p.37">7.2.3</a>, <a
                                            href="#rfc.iref.p.38">7.2.3</a>, <a href="#rfc.iref.p.39">7.2.3</a>, <a
                                            href="#rfc.iref.p.40">7.2.3</a>, <a href="#rfc.iref.p.41">7.2.3</a>, <a
                                            href="#rfc.iref.p.42">7.2.3</a>, <a href="#rfc.iref.p.43">7.2.3</a>, <a
                                            href="#rfc.iref.p.51">7.2.5</a>, <a href="#rfc.iref.p.62">7.2.7</a>, <a
                                            href="#rfc.iref.p.73">A.2.5</a>
                                    </li>
                                    <li>PUSH_PROMISE&nbsp;&nbsp;<a href="#rfc.iref.p.1">2</a>, <a
                                            href="#rfc.iref.p.2">4.1</a>, <a href="#rfc.iref.p.3">4.1</a>, <a
                                            href="#rfc.iref.p.4">4.1</a>, <a href="#rfc.iref.p.6">4.1</a>, <a
                                            href="#rfc.iref.p.8">4.1</a>, <a href="#rfc.iref.p.10">4.6</a>, <a
                                            href="#rfc.iref.p.13">4.6</a>, <a href="#rfc.iref.p.14">4.6</a>, <a
                                            href="#rfc.iref.p.15">4.6</a>, <a href="#rfc.iref.p.16">4.6</a>, <a
                                            href="#rfc.iref.p.17">4.6</a>, <a href="#rfc.iref.p.19">4.6</a>, <a
                                            href="#rfc.iref.p.21">4.6</a>, <a href="#rfc.iref.p.23">4.6</a>, <a
                                            href="#rfc.iref.p.32">7</a>, <a href="#rfc.iref.p.47">7.2.3</a>, <a
                                            href="#rfc.iref.p.49">7.2.3</a>, <a
                                            href="#rfc.section.7.2.5"><b>7.2.5</b></a>, <a
                                            href="#rfc.iref.p.61">7.2.7</a>, <a href="#rfc.iref.p.68">10.4</a>, <a
                                            href="#rfc.iref.p.69">10.5</a>, <a href="#rfc.iref.p.70">11.2.1</a>, <a
                                            href="#rfc.iref.p.71">A.2.5</a>, <a href="#rfc.iref.p.72">A.2.5</a>, <a
                                            href="#rfc.iref.p.74">A.2.5</a>, <a href="#rfc.iref.p.77">A.2.5</a></li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.R" href="#rfc.index.R"><b>R</b></a>
                                <ul>
                                    <li>request stream&nbsp;&nbsp;<a href="#rfc.iref.r.1">4.1</a>, <a
                                            href="#rfc.iref.r.2">4.1</a>, <a href="#rfc.iref.r.3">4.1</a>, <a
                                            href="#rfc.iref.r.4">4.1.1</a>, <a href="#rfc.iref.r.5">4.1.1</a>, <a
                                            href="#rfc.iref.r.6">4.4</a>, <a href="#rfc.iref.r.7">4.4</a>, <a
                                            href="#rfc.iref.r.8">4.6</a>, <a href="#rfc.iref.r.9">4.6</a>, <a
                                            href="#rfc.iref.r.10">4.6</a>, <a href="#rfc.iref.r.11">4.6</a>, <a
                                            href="#rfc.section.6.1"><b>6.1</b></a>, <a href="#rfc.iref.r.12">7</a>, <a
                                            href="#rfc.iref.r.13">7.2.2</a>, <a href="#rfc.iref.r.14">7.2.5</a></li>
                                </ul>
                            </li>
                            <li><a id="rfc.index.S" href="#rfc.index.S"><b>S</b></a>
                                <ul>
                                    <li>SETTINGS&nbsp;&nbsp;<a href="#rfc.iref.s.2">3.2</a>, <a
                                            href="#rfc.iref.s.3">3.2</a>, <a href="#rfc.iref.s.7">6.2.1</a>, <a
                                            href="#rfc.iref.s.8">7</a>, <a href="#rfc.iref.s.9">7</a>, <a
                                            href="#rfc.section.7.2.4"><b>7.2.4</b></a>, <a
                                            href="#rfc.iref.s.11">8.1</a>, <a href="#rfc.iref.s.12">8.1</a>, <a
                                            href="#rfc.iref.s.13">9</a>, <a href="#rfc.iref.s.14">10.5</a>, <a
                                            href="#rfc.iref.s.16">11.2.1</a>, <a href="#rfc.iref.s.17">11.2.3</a>, <a
                                            href="#rfc.iref.s.18">11.2.3</a>, <a href="#rfc.iref.s.19">A.2.5</a>, <a
                                            href="#rfc.iref.s.20">A.2.5</a>, <a href="#rfc.iref.s.21">A.3</a>, <a
                                            href="#rfc.iref.s.22">A.3</a>, <a href="#rfc.iref.s.23">A.3</a>, <a
                                            href="#rfc.iref.s.24">A.3</a>, <a href="#rfc.iref.s.25">A.3</a>, <a
                                            href="#rfc.iref.s.26">A.3</a>, <a href="#rfc.iref.s.28">A.4</a></li>
                                    <li>SETTINGS_MAX_FIELD_SECTION_SIZE&nbsp;&nbsp;<a href="#rfc.iref.s.5">4.2.2</a>, <a
                                            href="#rfc.iref.s.10">7.2.4.1</a>, <a href="#rfc.iref.s.15">10.5.1</a>, <a
                                            href="#rfc.iref.s.27">A.3</a></li>
                                    <li>stream error&nbsp;&nbsp;<a href="#rfc.iref.s.1">2.2</a>, <a
                                            href="#rfc.iref.s.4">4.1.2</a>, <a href="#rfc.iref.s.6">4.4</a>, <a
                                            href="#rfc.section.8"><b>8</b></a>, <a href="#rfc.iref.s.29">A.4.1</a>, <a
                                            href="#rfc.iref.s.30">A.4.1</a>, <a href="#rfc.iref.s.31">A.4.1</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </section>
                <hr class="hidden-print">
                <section id="rfc.authors" class="np">
                    <h2><a href="#rfc.authors">作者地址</a></h2>
                    <address><b>Mike Bishop</b> (editor)<br>Akamai<br>EMail: <a
                            href="mailto:mbishop@evequefou.be">mbishop@evequefou.be</a></address>
                </section>
            </div>
        </div>
    </div>
    <script src="https://httpwg.org/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="https://httpwg.org/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>