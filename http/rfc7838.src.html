<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>RFC 7838 - HTTP Alternative Services</title>
    <script>
        function getMeta(rfcno, container) {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "https://www.rfc-editor.org/rfc/rfc" + rfcno + ".json", true);
            xhr.onload = function (e) {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        var data = JSON.parse(xhr.response);

                        var cont = document.getElementById(container);
                        // empty the container
                        while (cont.firstChild) {
                            cont.removeChild(myNode.firstChild);
                        }

                        var c = data.status;
                        if (c) {
                            var bld = newElementWithText("b", c);
                            cont.appendChild(bld);
                        } else {
                            cont.appendChild(newElementWithText("i", "(document status unknown)"));
                        }

                        c = data.updated_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Updated by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.obsoleted_by;
                        if (c && c.length > 0 && c[0] !== null && c[0].length > 0) {
                            cont.appendChild(newElement("br"));
                            cont.appendChild(newText("Obsoleted by: "));
                            appendRfcLinks(cont, c);
                        }

                        c = data.errata_url;
                        if (c) {
                            cont.appendChild(newElement("br"));
                            var link = newElementWithText("a", "errata");
                            link.setAttribute("href", c);
                            var errata = newElementWithText("i", "This document has ");
                            errata.appendChild(link);
                            errata.appendChild(newText("."));
                            cont.appendChild(errata);
                        }

                        cont.style.display = "block";
                    } else {
                        console.error(xhr.statusText);
                    }
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.status + " " + xhr.statusText);
            };
            xhr.send(null);
        }
        function appendRfcLinks(parent, updates) {
            var template = "https://www.rfc-editor.org/rfc/rfc{rfc}.html";
            for (var i = 0; i < updates.length; i++) {
                var rfc = updates[i].trim().toLowerCase();
                if (rfc.substring(0, 3) == "rfc") {
                    var no = parseInt(rfc.substring(3), 10);

                    var link = newElement("a");
                    link.setAttribute("href", template.replace("{rfc}", no));
                    link.appendChild(newText(no));
                    parent.appendChild(link);
                } else {
                    parent.appendChild(newText(rfc));
                }
                if (i != updates.length - 1) {
                    parent.appendChild(newText(", "));
                }
            }
        }

        // DOM helpers
        function newElement(name) {
            return document.createElement(name);
        }
        function newElementWithText(name, txt) {
            var e = document.createElement(name);
            e.appendChild(newText(txt));
            return e;
        }
        function newText(text) {
            return document.createTextNode(text);
        }
    </script>
    <script>
        function anchorRewrite() {
            map = { "OWS": "imported.abnf", "delta-seconds": "imported.abnf", "port": "imported.abnf", "quoted-string": "imported.abnf", "token": "imported.abnf", "uri-host": "imported.abnf" };
            if (window.location.hash.length >= 1) {
                var fragid = window.location.hash.substr(1);
                if (fragid) {
                    if (!document.getElementById(fragid)) {
                        var prefix = "rfc.";
                        var mapped = map[fragid];
                        if (mapped) {
                            window.location.hash = mapped;
                        } else if (fragid.indexOf("section-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(8).replace("-", ".p.");
                        } else if (fragid.indexOf("appendix-") == 0) {
                            window.location.hash = prefix + "section." + fragid.substring(9).replace("-", ".p.");
                        } else if (fragid.indexOf("s-") == 0) {
                            var postfix = fragid.substring(2);
                            if (postfix.startsWith("abstract")) {
                                window.location.hash = prefix + postfix;
                            } else if (postfix.startsWith("note-")) {
                                window.location.hash = prefix + "note." + postfix.substring(5).replace("-", ".p.");
                            } else {
                                window.location.hash = prefix + "section." + postfix.replace("-", ".p.");
                            }
                        } else if (fragid.indexOf("p-") == 0) {
                            var r = fragid.substring(2);
                            var p = r.indexOf("-");
                            if (p >= 0) {
                                window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
                            }
                        }
                    }
                }
            }
        }
        window.addEventListener('hashchange', anchorRewrite);
        window.addEventListener('DOMContentLoaded', anchorRewrite);
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article">
    <meta property="og:title" content="RFC7838">
    <meta property="og:description" content="HTTP Alternative Services">
    <meta property="og:url" content="https://httpwg.org/specs/rfc7838.html">
    <meta property="og:site_name" content="IETF HTTP Working Group Specifications">
    <meta property="og:image" content="https://httpwg.org/assets/favicon/apple-icon-180x180.png">
    <link rel="stylesheet" type="text/css" href="/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <style type="text/css">
        body {
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
        }

        .table.header th,
        .table.header td {
            border-top: none;
            padding: 0;
        }

        #sidebar {
            margin-top: -10px;
            height: 90%;
            overflow-y: auto;
            font-size: 90%;
        }

        #rfc\.meta {
            width: 40%;
            float: right
        }

        .toc ul {
            list-style: none;
        }

        .filename {
            color: rgb(119, 119, 119);
            font-size: 23px;
            font-weight: normal;
            height: auto;
            line-height: 23px;
        }

        dl {
            margin-left: 1em;
        }

        dl.dl-horizontal: {
            margin-left: 0;
        }

        dl>dt {
            float: left;
            margin-right: 1em;
        }

        dl.nohang>dt {
            float: none;
        }

        dl>dd {
            margin-bottom: .5em;
        }

        dl.compact>dd {
            margin-bottom: 0em;
        }

        dl>dd>dl {
            margin-top: 0.5em;
            margin-bottom: 0em;
        }

        ul.empty {
            list-style-type: none;
        }

        ul.empty li {
            margin-top: .5em;
        }

        td.reference {
            padding-right: 1em;
            vertical-align: top;
        }

        .feedback {
            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        .fbbutton {
            margin-left: 5px;
        }

        h1 a,
        h2 a,
        h3 a,
        h4 a,
        h5 a,
        h6 a {
            color: rgb(51, 51, 51);
        }

        span.tt {
            font: 11pt consolas, monospace;
            font-size-adjust: none;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="/assets/site.css">
    <link rel="Contents" href="#rfc.toc">
    <link rel="Author" href="#rfc.authors">
    <link rel="License" href="#rfc.copyrightnotice">
    <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
    <link rel="Chapter" title="2 Alternative Services Concepts" href="#rfc.section.2">
    <link rel="Chapter" title="3 The Alt-Svc HTTP Header Field" href="#rfc.section.3">
    <link rel="Chapter" title="4 The ALTSVC HTTP/2 Frame" href="#rfc.section.4">
    <link rel="Chapter" title="5 The Alt-Used HTTP Header Field" href="#rfc.section.5">
    <link rel="Chapter" title="6 The 421 (Misdirected Request) HTTP Status Code" href="#rfc.section.6">
    <link rel="Chapter" title="7 IANA Considerations" href="#rfc.section.7">
    <link rel="Chapter" title="8 Internationalization Considerations" href="#rfc.section.8">
    <link rel="Chapter" title="9 Security Considerations" href="#rfc.section.9">
    <link rel="Chapter" title="10 References" href="#rfc.section.10">
    <link rel="Appendix" title="Acknowledgements" href="#rfc.section.unnumbered-1">
    <link rel="Alternate" title="Plain Text Version" href="http://www.ietf.org/rfc/rfc7838.txt">
    <link rel="Help" title="RFC-Editor's Status Page" href="http://www.rfc-editor.org/info/rfc7838">
    <meta name="viewport" content="initial-scale=1">
    <meta name="generator"
        content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/">
    <meta name="keywords" content="HTTP, ALPN, Alternative Services">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.creator" content="Nottingham, M.">
    <meta name="dcterms.creator" content="McManus, P.">
    <meta name="dcterms.creator" content="Reschke, J. F.">
    <meta name="dcterms.identifier" content="urn:ietf:rfc:7838">
    <meta name="dcterms.issued" content="2016-04">
    <meta name="dcterms.abstract"
        content="This document specifies &#34;Alternative Services&#34; for HTTP, which allow an origin's resources to be authoritatively available at a separate network location, possibly accessed with a different protocol configuration.">
    <meta name="dcterms.isPartOf" content="urn:issn:2070-1721">
    <meta name="description"
        content="This document specifies &#34;Alternative Services&#34; for HTTP, which allow an origin's resources to be authoritatively available at a separate network location, possibly accessed with a different protocol configuration.">
</head>

<body onload="getMeta(7838,&#34;rfc.meta&#34;);">
    <nav class="navbar navbar-dark bg-dark d-print-none navbar-expand-lg fixed-top ps-3 pe-3" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapse"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <a class="navbar-brand" href="https://httpwg.org/"><img src="https://httpwg.org/assets/http.svg"
                    height="23"></a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse">

            <div class="navbar-nav me-auto">

                <a class="nav-item ms-1 text-white" href="https://httpwg.org/specs/">📄 Documentation</a>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Work in
                        Progress</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/http-extensions/">HTTP Extensions</a></li>
                        <li class="dropdown-item"><a
                                href="https://github.com/httpwg/admin/issues?q=is%3Aissue+is%3Aopen+label%3Aadoption">Future
                                Work</a></li>
                    </ul>
                </div>

                <div class="dropdown ms-4">
                    <a href="#" class="nav-item dropdown-toggle text-white" data-bs-toggle="dropdown">Participate</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item"><a href="https://httpwg.org/about/">About the HTTP Working Group</a>
                        </li>
                        <li class="divider"></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/CONTRIBUTING.html">Contribution Policy</a>
                        </li>
                        <li class="dropdown-item"><a href="http://datatracker.ietf.org/wg/httpbis/charter/">WG
                                Charter</a></li>
                        <li class="dropdown-item"><a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">Group
                                Mailing List 📨</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/wg-materials/">Meeting Materials</a></li>
                        <li class="dropdown-item"><a href="https://httpwg.org/admin/editors/">Document Editor
                                Resources</a></li>
                    </ul>
                </div>
            </div>

        </div>
    </nav>
    <div class="container" id="top">
        <div class="row">
            <div class="col-lg-4 order-last d-none d-lg-block" id="sidebar" role="navigation">
                <div class="navbar">
                    <div class="navbar-brand"><a href="#top"><strong>RFC </strong>7838</a></div><br clear="all">
                    <div class="">
                        <div class="toc ">
                            <ul>
                                <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#introduction">Introduction</a>
                                    <ul>
                                        <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#notational-conventions">Notational Conventions</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#alternative">Alternative
                                        Services Concepts</a>
                                    <ul>
                                        <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#host_auth">Host Authentication</a></li>
                                        <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#caching">Alternative Service Caching</a></li>
                                        <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#requiring-server-name-indication">Requiring Server Name
                                                Indication</a></li>
                                        <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#switching">Using Alternative Services</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">The Alt-Svc HTTP
                                        Header Field</a>
                                    <ul>
                                        <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#caching-alt-svc-header-field-values">Caching Alt-Svc Header Field
                                                Values</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">The ALTSVC HTTP/2
                                        Frame</a></li>
                                <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#indicator">The Alt-Used
                                        HTTP Header Field</a></li>
                                <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#status">The 421
                                        (Misdirected Request) HTTP Status Code</a></li>
                                <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                        Considerations</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.section.7.1">Header Field Registrations</a></li>
                                        <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#alt-svc-frame-registration">The ALTSVC HTTP/2 Frame Type</a></li>
                                        <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#iana.parameters">Alt-Svc Parameter Registry</a>
                                            <ul>
                                                <li><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parameter.registry.procedure">Procedure</a></li>
                                                <li><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                        href="#parameter.registrations">Registrations</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#internationalization-considerations">Internationalization
                                        Considerations</a></li>
                                <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#security-considerations">Security Considerations</a>
                                    <ul>
                                        <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#changing-ports">Changing Ports</a></li>
                                        <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#host_security">Changing Hosts</a></li>
                                        <li><a href="#rfc.section.9.3">9.3.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#changing-protocols">Changing Protocols</a></li>
                                        <li><a href="#rfc.section.9.4">9.4.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#tracking">Tracking Clients Using Alternative Services</a></li>
                                        <li><a href="#rfc.section.9.5">9.5.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#confusion-regarding-request-scheme">Confusion regarding Request
                                                Scheme</a></li>
                                    </ul>
                                </li>
                                <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references">References</a>
                                    <ul>
                                        <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.1">Normative References</a></li>
                                        <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#rfc.references.2">Informative References</a></li>
                                    </ul>
                                </li>
                                <li><a href="#acknowledgements">Acknowledgements</a></li>
                                <li><a href="#rfc.authors">Authors' Addresses</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 order-first main" role="main">
                <header>
                    <table class="table table-condensed header" id="rfc.headerblock">
                        <tbody>
                            <tr>
                                <td class="text-left">Internet Engineering Task Force (IETF)</td>
                                <td class="text-right">M. Nottingham</td>
                            </tr>
                            <tr>
                                <td class="text-left">Request for Comments: 7838</td>
                                <td class="text-right">Akamai</td>
                            </tr>
                            <tr>
                                <td class="text-left">Category: Standards Track</td>
                                <td class="text-right">P. McManus</td>
                            </tr>
                            <tr>
                                <td class="text-left">ISSN: 2070-1721</td>
                                <td class="text-right">Mozilla</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">J. Reschke</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">greenbytes</td>
                            </tr>
                            <tr>
                                <td class="text-left"></td>
                                <td class="text-right">April 2016</td>
                            </tr>
                        </tbody>
                    </table>
                    <div id="rfc.title">
                        <h1>HTTP Alternative Services</h1>
                    </div>
                </header>
                <hr>
                <h2 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h2>
                <div class="lead">
                    <div id="rfc.abstract.p.1">
                        <p>This document specifies "Alternative Services" for HTTP, which allow an origin's resources to
                            be authoritatively available at a separate network location, possibly accessed with a
                            different protocol configuration.</p>
                    </div>
                </div>
                <aside id="rfc.meta" class="alert alert-info"></aside>
                <section id="rfc.status">
                    <h2><a href="#rfc.status">Status of This Memo</a></h2>
                    <div id="rfc.boilerplate.1.p.1">
                        <p>This is an Internet Standards Track document.</p>
                    </div>
                    <div id="rfc.boilerplate.1.p.2">
                        <p>This document is a product of the Internet Engineering Task Force (IETF). It represents the
                            consensus of the IETF community. It has received public review and has been approved for
                            publication by the Internet Engineering Steering Group (IESG). Further information on
                            Internet Standards is available in <a
                                href="https://www.rfc-editor.org/rfc/rfc5741.html#section-2">Section 2 of RFC 5741</a>.
                        </p>
                    </div>
                    <div id="rfc.boilerplate.1.p.3">
                        <p>Information about the current status of this document, any errata, and how to provide
                            feedback on it may be obtained at <a
                                href="http://www.rfc-editor.org/info/rfc7838">http://www.rfc-editor.org/info/rfc7838</a>.
                        </p>
                    </div>
                </section>
                <section id="rfc.copyrightnotice">
                    <h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2>
                    <div id="rfc.boilerplate.2.p.1">
                        <p>Copyright (c) 2016 IETF Trust and the persons identified as the document authors. All rights
                            reserved.</p>
                    </div>
                    <div id="rfc.boilerplate.2.p.2">
                        <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF
                            Documents (<a
                                href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in
                            effect on the date of publication of this document. Please review these documents carefully,
                            as they describe your rights and restrictions with respect to this document. Code Components
                            extracted from this document must include Simplified BSD License text as described in
                            Section 4.e of the Trust Legal Provisions and are provided without warranty as described in
                            the Simplified BSD License.</p>
                    </div>
                </section>
                <div class="toc d-lg-none">
                    <ul>
                        <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">Introduction</a>
                            <ul>
                                <li><a href="#rfc.section.1.1">1.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#notational-conventions">Notational Conventions</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#alternative">Alternative Services
                                Concepts</a>
                            <ul>
                                <li><a href="#rfc.section.2.1">2.1.</a>&nbsp;&nbsp;&nbsp;<a href="#host_auth">Host
                                        Authentication</a></li>
                                <li><a href="#rfc.section.2.2">2.2.</a>&nbsp;&nbsp;&nbsp;<a href="#caching">Alternative
                                        Service Caching</a></li>
                                <li><a href="#rfc.section.2.3">2.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#requiring-server-name-indication">Requiring Server Name Indication</a>
                                </li>
                                <li><a href="#rfc.section.2.4">2.4.</a>&nbsp;&nbsp;&nbsp;<a href="#switching">Using
                                        Alternative Services</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#alt-svc">The Alt-Svc HTTP Header
                                Field</a>
                            <ul>
                                <li><a href="#rfc.section.3.1">3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#caching-alt-svc-header-field-values">Caching Alt-Svc Header Field
                                        Values</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#frame">The ALTSVC HTTP/2
                                Frame</a></li>
                        <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#indicator">The Alt-Used HTTP
                                Header Field</a></li>
                        <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#status">The 421 (Misdirected
                                Request) HTTP Status Code</a></li>
                        <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA
                                Considerations</a>
                            <ul>
                                <li><a href="#rfc.section.7.1">7.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.section.7.1">Header Field Registrations</a></li>
                                <li><a href="#rfc.section.7.2">7.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#alt-svc-frame-registration">The ALTSVC HTTP/2 Frame Type</a></li>
                                <li><a href="#rfc.section.7.3">7.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#iana.parameters">Alt-Svc Parameter Registry</a>
                                    <ul>
                                        <li><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parameter.registry.procedure">Procedure</a></li>
                                        <li><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;&nbsp;&nbsp;<a
                                                href="#parameter.registrations">Registrations</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a
                                href="#internationalization-considerations">Internationalization Considerations</a></li>
                        <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#security-considerations">Security
                                Considerations</a>
                            <ul>
                                <li><a href="#rfc.section.9.1">9.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#changing-ports">Changing Ports</a></li>
                                <li><a href="#rfc.section.9.2">9.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#host_security">Changing Hosts</a></li>
                                <li><a href="#rfc.section.9.3">9.3.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#changing-protocols">Changing Protocols</a></li>
                                <li><a href="#rfc.section.9.4">9.4.</a>&nbsp;&nbsp;&nbsp;<a href="#tracking">Tracking
                                        Clients Using Alternative Services</a></li>
                                <li><a href="#rfc.section.9.5">9.5.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#confusion-regarding-request-scheme">Confusion regarding Request
                                        Scheme</a></li>
                            </ul>
                        </li>
                        <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a>
                            <ul>
                                <li><a href="#rfc.section.10.1">10.1.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.1">Normative References</a></li>
                                <li><a href="#rfc.section.10.2">10.2.</a>&nbsp;&nbsp;&nbsp;<a
                                        href="#rfc.references.2">Informative References</a></li>
                            </ul>
                        </li>
                        <li><a href="#acknowledgements">Acknowledgements</a></li>
                        <li><a href="#rfc.authors">Authors' Addresses</a></li>
                    </ul>
                </div>
                <section id="introduction">
                    <h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a
                            href="#introduction">Introduction</a></h2>
                    <div id="rfc.section.1.p.1">
                        <p>HTTP <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>
                            conflates the identification of resources with their location. In other words, "http://" and
                            "https://" URIs are used to both name and find things to interact with.</p>
                    </div>
                    <div id="rfc.section.1.p.2">
                        <p>In some cases, it is desirable to separate identification and location in HTTP; keeping the
                            same identifier for a resource, but interacting with it at a different location on the
                            network.</p>
                    </div>
                    <div id="rfc.section.1.p.3">
                        <p>For example: </p>
                        <ul>
                            <li>An origin server might wish to redirect a client to a different server when it is under
                                load, or it has found a server in a location that is more local to the client.</li>
                            <li>An origin server might wish to offer access to its resources using a new protocol, such
                                as HTTP/2 <a href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>, or one using
                                improved security, such as Transport Layer Security (TLS) <a href="#RFC5246"><cite
                                        title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>.
                            </li>
                            <li>An origin server might wish to segment its clients into groups of capabilities, such as
                                those supporting Server Name Indication (SNI) (<a
                                    href="https://www.rfc-editor.org/rfc/rfc6066.html#section-3">Section 3</a> of <a
                                    href="#RFC6066"><cite
                                        title="Transport Layer Security (TLS) Extensions: Extension Definitions">[RFC6066]</cite></a>),
                                for operational purposes.</li>
                        </ul>
                    </div>
                    <div id="rfc.section.1.p.4">
                        <p>This specification defines a new concept in HTTP, "Alternative Services", that allows an
                            origin server to nominate additional means of interacting with it on the network. It defines
                            a general framework for this in <a href="#alternative"
                                title="Alternative Services Concepts">Section 2</a>, along with specific mechanisms for
                            advertising their existence using HTTP header fields (<a href="#alt-svc"
                                title="The Alt-Svc HTTP Header Field">Section 3</a>) or HTTP/2 frames (<a href="#frame"
                                title="The ALTSVC HTTP/2 Frame">Section 4</a>), plus a way to indicate that an
                            alternative service was used (<a href="#indicator"
                                title="The Alt-Used HTTP Header Field">Section 5</a>).</p>
                    </div>
                    <div id="rfc.section.1.p.5">
                        <p>It also endorses the status code 421 (Misdirected Request) (<a href="#status"
                                title="The 421 (Misdirected Request) HTTP Status Code">Section 6</a>) that origin
                            servers or their nominated alternatives can use to indicate that they are not authoritative
                            for a given origin, in cases where the wrong location is used.</p>
                    </div>
                    <section id="notational-conventions">
                        <h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a>&nbsp;<a
                                href="#notational-conventions">Notational Conventions</a></h3>
                        <div id="rfc.section.1.1.p.1">
                            <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
                                NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as
                                described in <a href="#RFC2119"><cite
                                        title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>.
                            </p>
                        </div>
                        <div id="rfc.section.1.1.p.2" class="avoidbreakafter">
                            <p id="imported.abnf">This document uses the Augmented BNF defined in <a
                                    href="#RFC5234"><cite
                                        title="Augmented BNF for Syntax Specifications: ABNF">[RFC5234]</cite></a> and
                                updated by <a href="#RFC7405"><cite
                                        title="Case-Sensitive String Support in ABNF">[RFC7405]</cite></a> along with
                                the "#rule" extension defined in <a
                                    href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#abnf.extension"
                                    title="ABNF List Extension: #rule">Section 7</a> of <a href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>.
                                The rules below are defined in <a href="#RFC5234"><cite
                                        title="Augmented BNF for Syntax Specifications: ABNF">[RFC5234]</cite></a>, <a
                                    href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>,
                                and <a href="#RFC7234"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>:
                            </p>
                        </div>
                        <div id="rfc.figure.u.1">
                            <div>
                                <pre class="inline">OWS           = &lt;OWS, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#whitespace" title="Whitespace">Section 3.2.3</a>&gt;
delta-seconds = &lt;delta-seconds; see <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#delta-seconds" title="Delta Seconds">Section 1.2.1</a>&gt;
port          = &lt;port, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#uri" title="Uniform Resource Identifiers">Section 2.7</a>&gt;
quoted-string = &lt;quoted-string, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components" title="Field Value Components">Section 3.2.6</a>&gt;
token         = &lt;token, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components" title="Field Value Components">Section 3.2.6</a>&gt;
uri-host      = &lt;uri-host, see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#uri" title="Uniform Resource Identifiers">Section 2.7</a>&gt;
</pre>
                            </div>
                        </div>
                    </section>
                </section>
                <section id="alternative">
                    <h2 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#alternative">Alternative
                            Services Concepts</a></h2>
                    <div id="rfc.section.2.p.1">
                        <p>This specification defines a new concept in HTTP, the "<dfn>Alternative Service</dfn>". When
                            an origin <a href="#RFC6454"><cite title="The Web Origin Concept">[RFC6454]</cite></a> has
                            resources that are accessible through a different protocol/host/port combination, it is said
                            to have an alternative service available.</p>
                    </div>
                    <div id="rfc.section.2.p.2">
                        <p>An alternative service can be used to interact with the resources on an origin server at a
                            separate location on the network, possibly using a different protocol configuration.
                            Alternative services are considered authoritative for an origin's resources, in the sense of
                            <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>,
                            <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#establishing.authority"
                                title="Establishing Authority">Section 9.1</a>.
                        </p>
                    </div>
                    <div id="rfc.figure.u.2">
                        <p>For example, an origin:</p>
                        <div>
                            <pre class="text">("http", "www.example.com", "80")
</pre>
                        </div>
                    </div>
                    <div id="rfc.figure.u.3">
                        <p>might declare that its resources are also accessible at the alternative service:</p>
                        <div>
                            <pre class="text">("h2", "new.example.com", "81")
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.2.p.3">
                        <p>By their nature, alternative services are explicitly at the granularity of an origin; they
                            cannot be selectively applied to resources within an origin.</p>
                    </div>
                    <div id="rfc.section.2.p.4">
                        <p>Alternative services do not replace or change the origin for any given resource; in general,
                            they are not visible to the software "above" the access mechanism. The alternative service
                            is essentially alternative routing information that can also be used to reach the origin in
                            the same way that DNS CNAME or SRV records define routing information at the name resolution
                            level. Each origin maps to a set of these routes — the default route is derived from the
                            origin itself and the other routes are introduced based on alternative-service information.
                        </p>
                    </div>
                    <div id="rfc.section.2.p.5">
                        <p>Furthermore, it is important to note that the first member of an alternative service tuple is
                            different from the "scheme" component of an origin; it is more specific, identifying not
                            only the major version of the protocol being used, but potentially the communication options
                            for that protocol as well.</p>
                    </div>
                    <div id="rfc.section.2.p.6">
                        <p>This means that clients using an alternative service can change the host, port, and protocol
                            that they are using to fetch resources, but these changes <em class="bcp14">MUST NOT</em> be
                            propagated to the application that is using HTTP; from that standpoint, the URI being
                            accessed and all information derived from it (scheme, host, and port) are the same as
                            before.</p>
                    </div>
                    <div id="rfc.section.2.p.7">
                        <p>Importantly, this includes its security context; in particular, when TLS <a
                                href="#RFC5246"><cite
                                    title="The Transport Layer Security (TLS) Protocol Version 1.2">[RFC5246]</cite></a>
                            is used to authenticate, the alternative service will need to present a certificate for the
                            origin's host name, not that of the alternative. Likewise, the Host header field (<a
                                href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>,
                            <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#header.host"
                                title="Host">Section 5.4</a>) is still derived from the origin, not the alternative
                            service (just as it would if a CNAME were being used).
                        </p>
                    </div>
                    <div id="rfc.section.2.p.8">
                        <p>The changes <em class="bcp14">MAY</em>, however, be made visible in debugging tools,
                            consoles, etc.</p>
                    </div>
                    <div id="rfc.section.2.p.9">
                        <p>Formally, an alternative service is identified by the combination of: </p>
                        <ul>
                            <li>An Application Layer Protocol Negotiation (ALPN) protocol name, as per <a
                                    href="#RFC7301"><cite
                                        title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>
                            </li>
                            <li>A host, as per <a href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>,
                                <a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.2.2">Section 3.2.2</a>
                            </li>
                            <li>A port, as per <a href="#RFC3986"><cite
                                        title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>,
                                <a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.2.3">Section 3.2.3</a>
                            </li>
                        </ul>
                    </div>
                    <div id="rfc.section.2.p.10">
                        <p>The ALPN protocol name is used to identify the application protocol or suite of protocols
                            used by the alternative service. Note that for the purpose of this specification, an ALPN
                            protocol name implicitly includes TLS in the suite of protocols it identifies, unless
                            specified otherwise in its definition. In particular, the ALPN name "http/1.1", registered
                            by <a href="https://www.rfc-editor.org/rfc/rfc7301.html#section-6">Section 6</a> of <a
                                href="#RFC7301"><cite
                                    title="Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension">[RFC7301]</cite></a>,
                            identifies HTTP/1.1 over TLS.</p>
                    </div>
                    <div id="rfc.section.2.p.11">
                        <p>Additionally, each alternative service <em class="bcp14">MUST</em> have a freshness lifetime,
                            expressed in seconds (see <a href="#caching" title="Alternative Service Caching">Section
                                2.2</a>).</p>
                    </div>
                    <div id="rfc.section.2.p.12">
                        <p>There are many ways that a client could discover the alternative service(s) associated with
                            an origin. This document describes two such mechanisms: the "Alt-Svc" HTTP header field (<a
                                href="#alt-svc" title="The Alt-Svc HTTP Header Field">Section 3</a>) and the "ALTSVC"
                            HTTP/2 frame type (<a href="#frame" title="The ALTSVC HTTP/2 Frame">Section 4</a>).</p>
                    </div>
                    <div id="rfc.section.2.p.13">
                        <p>The remainder of this section describes requirements that are common to alternative services,
                            regardless of how they are discovered.</p>
                    </div>
                    <section id="host_auth">
                        <h3 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a>&nbsp;<a href="#host_auth">Host
                                Authentication</a></h3>
                        <div id="rfc.section.2.1.p.1">
                            <p>Clients <em class="bcp14">MUST</em> have reasonable assurances that the alternative
                                service is under control of and valid for the whole origin. This mitigates the attack
                                described in <a href="#host_security" title="Changing Hosts">Section 9.2</a>.</p>
                        </div>
                        <div id="rfc.section.2.1.p.2">
                            <p>For the purposes of this document, "reasonable assurances" can be established through use
                                of a TLS-based protocol with the certificate checks defined in <a href="#RFC2818"><cite
                                        title="HTTP Over TLS">[RFC2818]</cite></a>. Clients <em class="bcp14">MAY</em>
                                impose additional criteria for establishing reasonable assurances.</p>
                        </div>
                        <div id="rfc.section.2.1.p.3">
                            <p>For example, if the origin's host is "www.example.com" and an alternative is offered on
                                "other.example.com" with the "h2" protocol, and the certificate offered is valid for
                                "www.example.com", the client can use the alternative. However, if either is offered
                                with the "h2c" protocol, the client cannot use it, because there is no mechanism (at the
                                time of the publication of this specification) in that protocol to establish the
                                relationship between the origin and the alternative.</p>
                        </div>
                    </section>
                    <section id="caching">
                        <h3 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a>&nbsp;<a href="#caching">Alternative
                                Service Caching</a></h3>
                        <div id="rfc.section.2.2.p.1">
                            <p>Mechanisms for discovering alternative services also associate a freshness lifetime with
                                them; for example, the Alt-Svc header field uses the "ma" parameter.</p>
                        </div>
                        <div id="rfc.section.2.2.p.2">
                            <p>Clients can choose to use an alternative service instead of the origin at any time when
                                it is considered fresh; see <a href="#switching"
                                    title="Using Alternative Services">Section 2.4</a> for specific recommendations.</p>
                        </div>
                        <div id="rfc.section.2.2.p.3">
                            <p>Clients with existing connections to an alternative service do not need to stop using it
                                when its freshness lifetime ends; the caching mechanism is intended for limiting how
                                long an alternative service can be used for establishing new connections, not limiting
                                the use of existing ones.</p>
                        </div>
                        <div id="rfc.section.2.2.p.4">
                            <p>Alternative services are fully authoritative for the origin in question, including the
                                ability to clear or update cached alternative service entries, extend freshness
                                lifetimes, and any other authority the origin server would have.</p>
                        </div>
                        <div id="rfc.section.2.2.p.5">
                            <p>When alternative services are used to send a client to the most optimal server, a change
                                in network configuration can result in cached values becoming suboptimal. Therefore,
                                clients <em class="bcp14">SHOULD</em> remove from cache all alternative services that
                                lack the "persist" flag with the value "1" when they detect such a change, when
                                information about network state is available.</p>
                        </div>
                    </section>
                    <section id="requiring-server-name-indication">
                        <h3 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3.</a>&nbsp;<a
                                href="#requiring-server-name-indication">Requiring Server Name Indication</a></h3>
                        <div id="rfc.section.2.3.p.1">
                            <p>A client <em class="bcp14">MUST NOT</em> use a TLS-based alternative service unless the
                                client supports TLS Server Name Indication (SNI). This supports the conservation of IP
                                addresses on the alternative service host.</p>
                        </div>
                        <div id="rfc.section.2.3.p.2">
                            <p>Note that the SNI information provided in TLS by the client will be that of the origin,
                                not the alternative (as will the Host HTTP header field value).</p>
                        </div>
                    </section>
                    <section id="switching">
                        <h3 id="rfc.section.2.4"><a href="#rfc.section.2.4">2.4.</a>&nbsp;<a href="#switching">Using
                                Alternative Services</a></h3>
                        <div id="rfc.section.2.4.p.1">
                            <p>By their nature, alternative services are <em class="bcp14">OPTIONAL</em>: clients do not
                                need to use them. However, it is advantageous for clients to behave in a predictable way
                                when alternative services are used by servers, to aid in purposes like load balancing.
                            </p>
                        </div>
                        <div id="rfc.section.2.4.p.2">
                            <p>Therefore, if a client supporting this specification becomes aware of an alternative
                                service, the client <em class="bcp14">SHOULD</em> use that alternative service for all
                                requests to the associated origin as soon as it is available, provided the alternative
                                service information is fresh (<a href="#caching"
                                    title="Alternative Service Caching">Section 2.2</a>) and the security properties of
                                the alternative service protocol are desirable, as compared to the existing connection.
                                A viable alternative service is then treated in every way as the origin; this includes
                                the ability to advertise alternative services.</p>
                        </div>
                        <div id="rfc.section.2.4.p.3">
                            <p>If a client becomes aware of multiple alternative services, it chooses the most suitable
                                according to its own criteria, keeping security properties in mind. For example, an
                                origin might advertise multiple alternative services to notify clients of support for
                                multiple versions of HTTP.</p>
                        </div>
                        <div id="rfc.section.2.4.p.4">
                            <p>A client configured to use a proxy for a given request <em class="bcp14">SHOULD NOT</em>
                                directly connect to an alternative service for this request, but instead route it
                                through that proxy.</p>
                        </div>
                        <div id="rfc.section.2.4.p.5">
                            <p>When a client uses an alternative service for a request, it can indicate this to the
                                server using the Alt-Used header field (<a href="#indicator"
                                    title="The Alt-Used HTTP Header Field">Section 5</a>).</p>
                        </div>
                        <div id="rfc.section.2.4.p.6">
                            <p>The client does not need to block requests on any existing connection; it can be used
                                until the alternative connection is established. However, if the security properties of
                                the existing connection are weak (for example, cleartext HTTP/1.1), then it might make
                                sense to block until the new connection is fully available in order to avoid information
                                leakage.</p>
                        </div>
                        <div id="rfc.section.2.4.p.7">
                            <p>Furthermore, if the connection to the alternative service fails or is unresponsive, the
                                client <em class="bcp14">MAY</em> fall back to using the origin or another alternative
                                service. Note, however, that this could be the basis of a downgrade attack, thus losing
                                any enhanced security properties of the alternative service. If the connection to the
                                alternative service does not negotiate the expected protocol (for example, ALPN fails to
                                negotiate h2, or an Upgrade request to h2c is not accepted), the connection to the
                                alternative service <em class="bcp14">MUST</em> be considered to have failed.</p>
                        </div>
                    </section>
                </section>
                <section id="alt-svc">
                    <h2 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#alt-svc">The Alt-Svc HTTP
                            Header Field</a></h2>
                    <div id="rfc.section.3.p.1">
                        <p>An HTTP(S) origin server can advertise the availability of alternative services to clients by
                            adding an Alt-Svc header field to responses.</p>
                    </div>
                    <div id="rfc.figure.u.4">
                        <div>
                            <pre class="inline">Alt-Svc       = clear / 1#alt-value
clear         = %s"clear"; "clear", case-sensitive
alt-value     = alternative *( OWS ";" OWS parameter )
alternative   = protocol-id "=" alt-authority
protocol-id   = <a href="#imported.abnf" class="smpl">token</a> ; percent-encoded ALPN protocol name
alt-authority = <a href="#imported.abnf" class="smpl">quoted-string</a> ; containing [ <a href="#imported.abnf" class="smpl">uri-host</a> ] ":" <a href="#imported.abnf" class="smpl">port</a>
parameter     = <a href="#imported.abnf" class="smpl">token</a> "=" ( <a href="#imported.abnf" class="smpl">token</a> / <a href="#imported.abnf" class="smpl">quoted-string</a> )
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.3.p.2">
                        <p>The field value consists either of a list of values, each of which indicates one alternative
                            service, or the keyword "clear".</p>
                    </div>
                    <div id="rfc.section.3.p.3">
                        <p>A field value containing the special value "clear" indicates that the origin requests all
                            alternatives for that origin to be invalidated (including those specified in the same
                            response, in case of an invalid reply containing both "clear" and alternative services).</p>
                    </div>
                    <div id="rfc.section.3.p.4">
                        <p>ALPN protocol names are octet sequences with no additional constraints on format. Octets not
                            allowed in tokens (<a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>,
                            <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components"
                                title="Field Value Components">Section 3.2.6</a>) <em class="bcp14">MUST</em> be
                            percent-encoded as per <a
                                href="https://www.rfc-editor.org/rfc/rfc3986.html#section-2.1">Section 2.1</a> of <a
                                href="#RFC3986"><cite
                                    title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>.
                            Consequently, the octet representing the percent character "%" (hex 25) <em
                                class="bcp14">MUST</em> be percent-encoded as well.
                        </p>
                    </div>
                    <div id="rfc.section.3.p.5">
                        <p>In order to have precisely one way to represent any ALPN protocol name, the following
                            additional constraints apply: </p>
                        <ol>
                            <li>Octets in the ALPN protocol name <em class="bcp14">MUST NOT</em> be percent-encoded if
                                they are valid token characters except "%", and</li>
                            <li>When using percent-encoding, uppercase hex digits <em class="bcp14">MUST</em> be used.
                            </li>
                        </ol>
                    </div>
                    <div id="rfc.section.3.p.6">
                        <p>With these constraints, recipients can apply simple string comparison to match protocol
                            identifiers.</p>
                    </div>
                    <div id="rfc.section.3.p.7">
                        <p>The "alt-authority" component consists of an <em class="bcp14">OPTIONAL</em> uri-host ("host"
                            in <a href="https://www.rfc-editor.org/rfc/rfc3986.html#section-3.2.2">Section 3.2.2</a> of
                            <a href="#RFC3986"><cite
                                    title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>), a
                            colon (":"), and a port number.
                        </p>
                    </div>
                    <div id="rfc.figure.u.5">
                        <p>For example:</p>
                        <div>
                            <pre class="text">Alt-Svc: h2=":8000"
</pre>
                        </div>
                        <p>This indicates the "h2" protocol (<a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>) on the same host
                            using the indicated port 8000.</p>
                    </div>
                    <div id="rfc.figure.u.6">
                        <p>An example involving a change of host:</p>
                        <div>
                            <pre class="text">Alt-Svc: h2="new.example.org:80"
</pre>
                        </div>
                        <p>This indicates the "h2" protocol on the host "new.example.org", running on port 80. Note that
                            the "quoted-string" syntax needs to be used because ":" is not an allowed character in
                            "token".</p>
                    </div>
                    <div id="rfc.table.u.1" class="table table-condensed table-striped">
                        <p>Examples for protocol name escaping:</p>
                        <table class="table table-condensed table-striped all tleft">
                            <thead>
                                <tr>
                                    <th>ALPN protocol name</th>
                                    <th>protocol-id</th>
                                    <th>Note</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-left">h2</td>
                                    <td class="text-left">h2</td>
                                    <td class="text-left">No escaping needed</td>
                                </tr>
                                <tr>
                                    <td class="text-left">w=x:y#z</td>
                                    <td class="text-left">w%3Dx%3Ay#z</td>
                                    <td class="text-left">"=" and ":" escaped</td>
                                </tr>
                                <tr>
                                    <td class="text-left">x%y</td>
                                    <td class="text-left">x%25y</td>
                                    <td class="text-left">"%" needs escaping</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="rfc.section.3.p.8">
                        <p>Alt-Svc <em class="bcp14">MAY</em> occur in any HTTP response message, regardless of the
                            status code. Note that recipients of Alt-Svc can ignore the header field (and are required
                            to in some situations; see Sections <a href="#host_auth" title="Host Authentication">2.1</a>
                            and <a href="#status" title="The 421 (Misdirected Request) HTTP Status Code">6</a>).</p>
                    </div>
                    <div id="rfc.figure.u.7">
                        <p>The Alt-Svc field value can have multiple values:</p>
                        <div>
                            <pre class="text">Alt-Svc: h2="alt.example.com:8000", h2=":443"
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.3.p.9">
                        <p>When multiple values are present, the order of the values reflects the server's preference
                            (with the first value being the most preferred alternative).</p>
                    </div>
                    <div id="rfc.section.3.p.10">
                        <p>The value(s) advertised by Alt-Svc can be used by clients to open a new connection to an
                            alternative service. Subsequent requests can start using this new connection immediately or
                            can continue using the existing connection while the new connection is created.</p>
                    </div>
                    <div id="rfc.section.3.p.11">
                        <p>When using HTTP/2 (<a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>), servers <em
                                class="bcp14">SHOULD</em> instead send an ALTSVC frame (<a href="#frame"
                                title="The ALTSVC HTTP/2 Frame">Section 4</a>). A single ALTSVC frame can be sent for a
                            connection; a new frame is not needed for every request. Note that, despite this
                            recommendation, Alt-Svc header fields remain valid in responses delivered over HTTP/2.</p>
                    </div>
                    <div id="rfc.section.3.p.12">
                        <p>Each "alt-value" is followed by an <em class="bcp14">OPTIONAL</em> semicolon-separated list
                            of additional parameters, each such "parameter" comprising a name and a value.</p>
                    </div>
                    <div id="rfc.section.3.p.13">
                        <p>This specification defines two parameters: "ma" and "persist", defined in <a
                                href="#caching-alt-svc-header-field-values"
                                title="Caching Alt-Svc Header Field Values">Section 3.1</a>. Unknown parameters <em
                                class="bcp14">MUST</em> be ignored. That is, the values (alt-value) they appear in <em
                                class="bcp14">MUST</em> be processed as if the unknown parameter was not present.</p>
                    </div>
                    <div id="rfc.section.3.p.14">
                        <p>New parameters can be defined in extension specifications (see <a href="#iana.parameters"
                                title="Alt-Svc Parameter Registry">Section 7.3</a> for registration details).</p>
                    </div>
                    <div id="rfc.section.3.p.15">
                        <p>Note that all field elements that allow "quoted-string" syntax <em class="bcp14">MUST</em> be
                            processed as per <a
                                href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#field.components"
                                title="Field Value Components">Section 3.2.6</a> of <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>.
                        </p>
                    </div>
                    <section id="caching-alt-svc-header-field-values">
                        <h3 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a>&nbsp;<a
                                href="#caching-alt-svc-header-field-values">Caching Alt-Svc Header Field Values</a></h3>
                        <div id="rfc.section.3.1.p.1">
                            <p>When an alternative service is advertised using Alt-Svc, it is considered fresh for 24
                                hours from generation of the message. This can be modified with the "ma" (max-age)
                                parameter.</p>
                        </div>
                        <div id="rfc.figure.u.8">
                            <p>Syntax:</p>
                            <div>
                                <pre class="inline">ma = <a href="#imported.abnf" class="smpl">delta-seconds</a>; see <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>, <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#delta-seconds" title="Delta Seconds">Section 1.2.1</a>
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.2">
                            <p>The delta-seconds value indicates the number of seconds since the response was generated
                                for which the alternative service is considered fresh.</p>
                        </div>
                        <div id="rfc.figure.u.9">
                            <div>
                                <pre class="text">Alt-Svc: h2=":443"; ma=3600
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.3">
                            <p>See <a
                                    href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7234.html#age.calculations"
                                    title="Calculating Age">Section 4.2.3</a> of <a href="#RFC7234"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a> for
                                details on determining the response age.</p>
                        </div>
                        <div id="rfc.figure.u.10">
                            <p>For example, a response:</p>
                            <div>
                                <pre class="text">HTTP/1.1 200 OK
Content-Type: text/html
Cache-Control: max-age=600
Age: 30
Alt-Svc: h2=":8000"; ma=60
</pre>
                            </div>
                            <p>indicates that an alternative service is available and usable for the next 60 seconds.
                                However, the response has already been cached for 30 seconds (as per the Age header
                                field value); therefore, the alternative service is only fresh for the 30 seconds from
                                when this response was received, minus estimated transit time.</p>
                        </div>
                        <div id="rfc.section.3.1.p.4">
                            <p>Note that the freshness lifetime for HTTP caching (here, 600 seconds) does not affect
                                caching of Alt-Svc values.</p>
                        </div>
                        <div id="rfc.section.3.1.p.5">
                            <p>When an Alt-Svc response header field is received from an origin, its value invalidates
                                and replaces all cached alternative services for that origin.</p>
                        </div>
                        <div id="rfc.section.3.1.p.6">
                            <p>By default, cached alternative services will be cleared when the client detects a network
                                change. Alternative services that are intended to be longer lived (such as those that
                                are not specific to the client access network) can carry the "persist" parameter with a
                                value "1" as a hint that the service is potentially useful beyond a network
                                configuration change.</p>
                        </div>
                        <div id="rfc.figure.u.11">
                            <p>Syntax:</p>
                            <div>
                                <pre class="inline">persist = "1"
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.7" class="avoidbreakafter">
                            <p>For example:</p>
                        </div>
                        <div id="rfc.figure.u.12">
                            <div>
                                <pre class="text">Alt-Svc: h2=":443"; ma=2592000; persist=1
</pre>
                            </div>
                        </div>
                        <div id="rfc.section.3.1.p.8">
                            <p>This specification only defines a single value for "persist". Clients <em
                                    class="bcp14">MUST</em> ignore "persist" parameters with values other than "1".</p>
                        </div>
                        <div id="rfc.section.3.1.p.9">
                            <p>See <a href="#caching" title="Alternative Service Caching">Section 2.2</a> for general
                                requirements on caching alternative services.</p>
                        </div>
                    </section>
                </section>
                <section id="frame">
                    <h2 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#frame">The ALTSVC HTTP/2
                            Frame</a></h2>
                    <div id="rfc.section.4.p.1">
                        <p>The ALTSVC HTTP/2 frame (<a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>, <a
                                href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7540.html#FramingLayer"
                                title="HTTP Frames">Section 4</a>) advertises the availability of an alternative service
                            to an HTTP/2 client.</p>
                    </div>
                    <div id="rfc.section.4.p.2">
                        <p>The ALTSVC frame is a non-critical extension to HTTP/2. Endpoints that do not support this
                            frame will ignore it (as per the extensibility rules defined in <a
                                href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7540.html#rfc.section.4.1">Section
                                4.1</a> of <a href="#RFC7540"><cite
                                    title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>).</p>
                    </div>
                    <div id="rfc.section.4.p.3">
                        <p>An ALTSVC frame from a server to a client on a stream other than stream 0 indicates that the
                            conveyed alternative service is associated with the origin of that stream.</p>
                    </div>
                    <div id="rfc.section.4.p.4">
                        <p>An ALTSVC frame from a server to a client on stream 0 indicates that the conveyed alternative
                            service is associated with the origin contained in the Origin field of the frame. An
                            association with an origin that the client does not consider authoritative for the current
                            connection <em class="bcp14">MUST</em> be ignored.</p>
                    </div>
                    <div id="rfc.section.4.p.5">
                        <p>The ALTSVC frame type is 0xa (decimal 10).</p>
                    </div>
                    <div id="rfc.figure.1">
                        <div>
                            <pre class="drawing"> +-------------------------------+-------------------------------+
 |         Origin-Len (16)       | Origin? (*)                 ...
 +-------------------------------+-------------------------------+
 |                   Alt-Svc-Field-Value (*)                   ...
 +---------------------------------------------------------------+
</pre>
                        </div>
                    </div>
                    <p class="figure">Figure 1: ALTSVC Frame Payload</p>
                    <div id="rfc.section.4.p.6">
                        <p>The ALTSVC frame contains the following fields: </p>
                        <dl>
                            <dt>Origin-Len:</dt>
                            <dd>An unsigned, 16-bit integer indicating the length, in octets, of the Origin field.</dd>
                            <dt>Origin:</dt>
                            <dd>An <em class="bcp14">OPTIONAL</em> sequence of characters containing the ASCII
                                serialization of an origin (<a href="#RFC6454"><cite
                                        title="The Web Origin Concept">[RFC6454]</cite></a>, <a
                                    href="https://www.rfc-editor.org/rfc/rfc6454.html#section-6.2">Section 6.2</a>) to
                                which the alternative service is applicable.</dd>
                            <dt>Alt-Svc-Field-Value:</dt>
                            <dd>A sequence of octets (length determined by subtracting the length of all preceding
                                fields from the frame length) containing a value identical to the Alt-Svc field value
                                defined in <a href="#alt-svc" title="The Alt-Svc HTTP Header Field">Section 3</a> (ABNF
                                production "Alt-Svc").</dd>
                        </dl>
                    </div>
                    <div id="rfc.section.4.p.7">
                        <p>The ALTSVC frame does not define any flags.</p>
                    </div>
                    <div id="rfc.section.4.p.8">
                        <p>The ALTSVC frame is intended for receipt by clients. A device acting as a server <em
                                class="bcp14">MUST</em> ignore it.</p>
                    </div>
                    <div id="rfc.section.4.p.9">
                        <p>An ALTSVC frame on stream 0 with empty (length 0) "Origin" information is invalid and <em
                                class="bcp14">MUST</em> be ignored. An ALTSVC frame on a stream other than stream 0
                            containing non-empty "Origin" information is invalid and <em class="bcp14">MUST</em> be
                            ignored.</p>
                    </div>
                    <div id="rfc.section.4.p.10">
                        <p>The ALTSVC frame is processed hop-by-hop. An intermediary <em class="bcp14">MUST NOT</em>
                            forward ALTSVC frames, though it can use the information contained in ALTSVC frames in
                            forming new ALTSVC frames to send to its own clients.</p>
                    </div>
                    <div id="rfc.section.4.p.11">
                        <p>Receiving an ALTSVC frame is semantically equivalent to receiving an Alt-Svc header field. As
                            a result, the ALTSVC frame causes alternative services for the corresponding origin to be
                            replaced. Note that it would be unwise to mix the use of Alt-Svc header fields with the use
                            of ALTSVC frames, as the sequence of receipt might be hard to predict.</p>
                    </div>
                </section>
                <section id="indicator">
                    <h2 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#indicator">The Alt-Used HTTP
                            Header Field</a></h2>
                    <div id="rfc.section.5.p.1">
                        <p>The Alt-Used header field is used in requests to identify the alternative service in use,
                            just as the Host header field (<a
                                href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#header.host"
                                title="Host">Section 5.4</a> of <a href="#RFC7230"><cite
                                    title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>)
                            identifies the host and port of the origin.</p>
                    </div>
                    <div id="rfc.figure.u.13">
                        <div>
                            <pre class="inline">Alt-Used     = uri-host [ ":" port ]
</pre>
                        </div>
                    </div>
                    <div id="rfc.section.5.p.2">
                        <p>Alt-Used is intended to allow alternative services to detect loops, differentiate traffic for
                            purposes of load balancing, and generally to ensure that it is possible to identify the
                            intended destination of traffic, since introducing this information after a protocol is in
                            use has proven to be problematic.</p>
                    </div>
                    <div id="rfc.section.5.p.3">
                        <p>When using an alternative service, clients <em class="bcp14">SHOULD</em> include an Alt-Used
                            header field in all requests.</p>
                    </div>
                    <div id="rfc.figure.u.14">
                        <p>For example:</p>
                        <div>
                            <pre class="text2">GET /thing HTTP/1.1
Host: origin.example.com
Alt-Used: alternate.example.net
</pre>
                        </div>
                    </div>
                </section>
                <section id="status">
                    <h2 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;<a href="#status">The 421 (Misdirected
                            Request) HTTP Status Code</a></h2>
                    <div id="rfc.section.6.p.1">
                        <p>The 421 (Misdirected Request) status code is defined in <a
                                href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7540.html#MisdirectedRequest"
                                title="The 421 (Misdirected Request) Status Code">Section 9.1.2</a> of <a
                                href="#RFC7540"><cite title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>
                            to indicate that the current server instance is not authoritative for the requested
                            resource. This can be used to indicate that an alternative service is not authoritative; see
                            <a href="#alternative" title="Alternative Services Concepts">Section 2</a>).
                        </p>
                    </div>
                    <div id="rfc.section.6.p.2">
                        <p>Clients receiving 421 (Misdirected Request) from an alternative service <em
                                class="bcp14">MUST</em> remove the corresponding entry from its alternative service
                            cache (see <a href="#caching" title="Alternative Service Caching">Section 2.2</a>) for that
                            origin. Regardless of the idempotency of the request method, they <em class="bcp14">MAY</em>
                            retry the request, either at another alternative server, or at the origin.</p>
                    </div>
                    <div id="rfc.section.6.p.3">
                        <p>An Alt-Svc header field in a 421 (Misdirected Request) response <em class="bcp14">MUST</em>
                            be ignored.</p>
                    </div>
                </section>
                <section id="iana-considerations">
                    <h2 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#iana-considerations">IANA
                            Considerations</a></h2>
                    <section id="n-header-field-registrations">
                        <h3 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a>&nbsp;<a
                                href="#n-header-field-registrations">Header Field Registrations</a></h3>
                        <div id="rfc.section.7.1.p.1">
                            <p>HTTP header fields are registered within the "Message Headers" registry maintained at
                                &lt;<a
                                    href="https://www.iana.org/assignments/message-headers/">https://www.iana.org/assignments/message-headers/</a>&gt;.
                            </p>
                        </div>
                        <div id="rfc.section.7.1.p.2" class="avoidbreakafter">
                            <p>This document defines the following HTTP header fields, so their associated registry
                                entries have been added according to the permanent registrations below (see <a
                                    href="#BCP90"><cite
                                        title="Registration Procedures for Message Header Fields">[BCP90]</cite></a>):
                            </p>
                        </div>
                        <div id="rfc.table.1" class="table table-condensed table-striped">
                            <div id="iana.header.registration.table"></div>
                            <table class="table table-condensed table-striped full tleft">
                                <thead>
                                    <tr>
                                        <th>Header Field Name</th>
                                        <th>Protocol</th>
                                        <th>Status</th>
                                        <th>Reference</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="text-left">Alt-Svc</td>
                                        <td class="text-left">http</td>
                                        <td class="text-left">standard</td>
                                        <td class="text-left"><a href="#alt-svc"
                                                title="The Alt-Svc HTTP Header Field">Section 3</a> </td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Alt-Used</td>
                                        <td class="text-left">http</td>
                                        <td class="text-left">standard</td>
                                        <td class="text-left"><a href="#indicator"
                                                title="The Alt-Used HTTP Header Field">Section 5</a> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div id="rfc.section.7.1.p.3">
                            <p>The change controller is: "IETF (iesg@ietf.org) -- Internet Engineering Task Force".</p>
                        </div>
                    </section>
                    <section id="alt-svc-frame-registration">
                        <h3 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a>&nbsp;<a
                                href="#alt-svc-frame-registration">The ALTSVC HTTP/2 Frame Type</a></h3>
                        <div id="rfc.section.7.2.p.1">
                            <p>This document registers the ALTSVC frame type in the "HTTP/2 Frame Type" registry (<a
                                    href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>, <a
                                    href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7540.html#iana-frames"
                                    title="Frame Type Registry">Section 11.2</a>). </p>
                            <ul class="empty">
                                <li>Frame Type: ALTSVC</li>
                                <li>Code: 0xa</li>
                                <li>Specification: <a href="#frame" title="The ALTSVC HTTP/2 Frame">Section 4</a> of
                                    this document</li>
                            </ul>
                        </div>
                    </section>
                    <section id="iana.parameters">
                        <h3 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3.</a>&nbsp;<a
                                href="#iana.parameters">Alt-Svc Parameter Registry</a></h3>
                        <div id="rfc.section.7.3.p.1">
                            <p>The "Hypertext Transfer Protocol (HTTP) Alt-Svc Parameter Registry" defines the name
                                space for parameters. It has been created and will be maintained at &lt;<a
                                    href="http://www.iana.org/assignments/http-alt-svc-parameters">http://www.iana.org/assignments/http-alt-svc-parameters</a>&gt;.
                            </p>
                        </div>
                        <section id="parameter.registry.procedure">
                            <h4 id="rfc.section.7.3.1"><a href="#rfc.section.7.3.1">7.3.1.</a>&nbsp;<a
                                    href="#parameter.registry.procedure">Procedure</a></h4>
                            <div id="rfc.section.7.3.1.p.1">
                                <p>A registration <em class="bcp14">MUST</em> include the following fields: </p>
                                <ul>
                                    <li>Parameter Name</li>
                                    <li>Pointer to specification text</li>
                                </ul>
                            </div>
                            <div id="rfc.section.7.3.1.p.2">
                                <p>Values to be added to this name space require Expert Review (see <a
                                        href="#RFC5226"><cite
                                            title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC5226]</cite></a>,
                                    <a href="https://www.rfc-editor.org/rfc/rfc5226.html#section-4.1">Section 4.1</a>).
                                </p>
                            </div>
                        </section>
                        <section id="parameter.registrations">
                            <h4 id="rfc.section.7.3.2"><a href="#rfc.section.7.3.2">7.3.2.</a>&nbsp;<a
                                    href="#parameter.registrations">Registrations</a></h4>
                            <div id="rfc.section.7.3.2.p.1" class="avoidbreakafter">
                                <p>The "Hypertext Transfer Protocol (HTTP) Alt-Svc Parameter Registry" has been
                                    populated with the registrations below:</p>
                            </div>
                            <div id="rfc.table.u.2" class="table table-condensed table-striped">
                                <table class="table table-condensed table-striped full tleft">
                                    <thead>
                                        <tr>
                                            <th>Alt-Svc Parameter</th>
                                            <th>Reference</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-left">ma</td>
                                            <td class="text-left"><a href="#caching-alt-svc-header-field-values"
                                                    title="Caching Alt-Svc Header Field Values">Section 3.1</a> </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left">persist</td>
                                            <td class="text-left"><a href="#caching-alt-svc-header-field-values"
                                                    title="Caching Alt-Svc Header Field Values">Section 3.1</a> </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </section>
                </section>
                <section id="internationalization-considerations">
                    <h2 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;<a
                            href="#internationalization-considerations">Internationalization Considerations</a></h2>
                    <div id="rfc.section.8.p.1">
                        <p>An internationalized domain name that appears in either the header field (<a href="#alt-svc"
                                title="The Alt-Svc HTTP Header Field">Section 3</a>) or the HTTP/2 frame (<a
                                href="#frame" title="The ALTSVC HTTP/2 Frame">Section 4</a>) <em class="bcp14">MUST</em>
                            be expressed using A-labels (<a href="#RFC5890"><cite
                                    title="Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework">[RFC5890]</cite></a>,
                            <a href="https://www.rfc-editor.org/rfc/rfc5890.html#section-2.3.2.1">Section 2.3.2.1</a>).
                        </p>
                    </div>
                </section>
                <section id="security-considerations">
                    <h2 id="rfc.section.9"><a href="#rfc.section.9">9.</a>&nbsp;<a
                            href="#security-considerations">Security Considerations</a></h2>
                    <section id="changing-ports">
                        <h3 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a>&nbsp;<a
                                href="#changing-ports">Changing Ports</a></h3>
                        <div id="rfc.section.9.1.p.1">
                            <p>Using an alternative service implies accessing an origin's resources on an alternative
                                port, at a minimum. Therefore, an attacker that can inject alternative services and
                                listen at the advertised port is able to hijack an origin. On certain servers, it is
                                normal for users to be able to control some personal pages available on a shared port
                                and also to accept requests on less-privileged ports.</p>
                        </div>
                        <div id="rfc.section.9.1.p.2">
                            <p>For example, an attacker that can add HTTP response header fields to some pages can
                                redirect traffic for an entire origin to a different port on the same host using the
                                Alt-Svc header field; if that port is under the attacker's control, they can thus
                                masquerade as the HTTP server.</p>
                        </div>
                        <div id="rfc.section.9.1.p.3">
                            <p>This risk is mitigated by the requirements in <a href="#host_auth"
                                    title="Host Authentication">Section 2.1</a>.</p>
                        </div>
                        <div id="rfc.section.9.1.p.4">
                            <p>On servers, this risk can also be reduced by restricting the ability to advertise
                                alternative services, and restricting who can open a port for listening on that host.
                            </p>
                        </div>
                    </section>
                    <section id="host_security">
                        <h3 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2.</a>&nbsp;<a
                                href="#host_security">Changing Hosts</a></h3>
                        <div id="rfc.section.9.2.p.1">
                            <p>When the host is changed due to the use of an alternative service, this presents an
                                opportunity for attackers to hijack communication to an origin.</p>
                        </div>
                        <div id="rfc.section.9.2.p.2">
                            <p>For example, if an attacker can convince a user agent to send all traffic for
                                "innocent.example.org" to "evil.example.com" by successfully associating it as an
                                alternative service, they can masquerade as that origin. This can be done locally (see
                                mitigations in <a href="#changing-ports" title="Changing Ports">Section 9.1</a>) or
                                remotely (e.g., by an intermediary as a man-in-the-middle attack).</p>
                        </div>
                        <div id="rfc.section.9.2.p.3">
                            <p>This is the reason for the requirement in <a href="#host_auth"
                                    title="Host Authentication">Section 2.1</a> that clients have reasonable assurances
                                that the alternative service is under control of and valid for the whole origin; for
                                example, presenting a certificate for the origin proves that the alternative service is
                                authorized to serve traffic for the origin.</p>
                        </div>
                        <div id="rfc.section.9.2.p.4">
                            <p>Note that this assurance is only as strong as the method used to authenticate the
                                alternative service. In particular, when TLS authentication is used to do so, there are
                                well-known exploits to make an attacker's certificate appear as legitimate.</p>
                        </div>
                        <div id="rfc.section.9.2.p.5">
                            <p>Alternative services could be used to persist such an attack. For example, an
                                intermediary could man-in-the-middle TLS-protected communication to a target and then
                                direct all traffic to an alternative service with a large freshness lifetime so that the
                                user agent still directs traffic to the attacker even when not using the intermediary.
                            </p>
                        </div>
                        <div id="rfc.section.9.2.p.6">
                            <p>Implementations <em class="bcp14">MUST</em> perform any certificate-pinning validation
                                (such as <a href="#RFC7469"><cite
                                        title="Public Key Pinning Extension for HTTP">[RFC7469]</cite></a>) on
                                alternative services just as they would on direct connections to the origin.
                                Implementations might also choose to add other requirements around which certificates
                                are acceptable for alternative services.</p>
                        </div>
                    </section>
                    <section id="changing-protocols">
                        <h3 id="rfc.section.9.3"><a href="#rfc.section.9.3">9.3.</a>&nbsp;<a
                                href="#changing-protocols">Changing Protocols</a></h3>
                        <div id="rfc.section.9.3.p.1">
                            <p>When the ALPN protocol is changed due to the use of an alternative service, the security
                                properties of the new connection to the origin can be different from that of the
                                "normal" connection to the origin, because the protocol identifier itself implies this.
                            </p>
                        </div>
                        <div id="rfc.section.9.3.p.2">
                            <p>For example, if an "https://" URI has a protocol advertised that does not use some form
                                of end-to-end encryption (most likely, TLS), this violates the expectations for security
                                that the URI scheme implies. Therefore, clients cannot use alternative services blindly,
                                but instead evaluate the option(s) presented to ensure that security requirements and
                                expectations of specifications, implementations, and end users are met.</p>
                        </div>
                    </section>
                    <section id="tracking">
                        <h3 id="rfc.section.9.4"><a href="#rfc.section.9.4">9.4.</a>&nbsp;<a href="#tracking">Tracking
                                Clients Using Alternative Services</a></h3>
                        <div id="rfc.section.9.4.p.1">
                            <p>Choosing an alternative service implies connecting to a new, server-supplied host name.
                                By using unique names, servers could conceivably track client requests. Such tracking
                                could follow users across multiple networks, when the "persist" flag is used.</p>
                        </div>
                        <div id="rfc.section.9.4.p.2">
                            <p>Clients that wish to prevent requests from being correlated can decide not to use
                                alternative services for multiple requests that would not otherwise be allowed to be
                                correlated.</p>
                        </div>
                        <div id="rfc.section.9.4.p.3">
                            <p>In a user agent, any alternative service information <em class="bcp14">MUST</em> be
                                removed when origin-specific data is cleared (typically, when cookies <a
                                    href="#RFC6265"><cite title="HTTP State Management Mechanism">[RFC6265]</cite></a>
                                are cleared).</p>
                        </div>
                    </section>
                    <section id="confusion-regarding-request-scheme">
                        <h3 id="rfc.section.9.5"><a href="#rfc.section.9.5">9.5.</a>&nbsp;<a
                                href="#confusion-regarding-request-scheme">Confusion regarding Request Scheme</a></h3>
                        <div id="rfc.section.9.5.p.1">
                            <p>Some server-side HTTP applications make assumptions about security based upon connection
                                context; for example, equating being served upon port 443 with the use of an "https://"
                                URI and the various security properties that implies.</p>
                        </div>
                        <div id="rfc.section.9.5.p.2">
                            <p>This affects not only the security properties of the connection itself, but also the
                                state of the client at the other end of it; for example, a Web browser treats "https://"
                                URIs differently than "http://" URIs in many ways, not just for purposes of protocol
                                handling.</p>
                        </div>
                        <div id="rfc.section.9.5.p.3">
                            <p>Since one of the uses of Alternative Services is to allow a connection to be migrated to
                                a different protocol and port, these applications can become confused about the security
                                properties of a given connection, sending information (for example, cookies and content)
                                that is intended for a secure context (such as an "https://" URI) to a client that is
                                not treating it as one.</p>
                        </div>
                        <div id="rfc.section.9.5.p.4">
                            <p>This risk can be mitigated in servers by using the URI scheme explicitly carried by the
                                protocol (such as ":scheme" in HTTP/2 or the "absolute form" of the request target in
                                HTTP/1.1) as an indication of security context, instead of other connection properties
                                (<a href="#RFC7540"><cite
                                        title="Hypertext Transfer Protocol version 2">[RFC7540]</cite></a>, <a
                                    href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7540.html#HttpRequest"
                                    title="Request Pseudo-Header Fields">Section 8.1.2.3</a> and <a
                                    href="#RFC7230"><cite
                                        title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>,
                                <a href="https://svn.tools.ietf.org/svn/wg/httpbis/specs/rfc7230.html#absolute-form"
                                    title="absolute-form">Section 5.3.2</a>).
                            </p>
                        </div>
                        <div id="rfc.section.9.5.p.5">
                            <p>When the protocol does not explicitly carry the scheme (as is usually the case for
                                HTTP/1.1 over TLS), servers can mitigate this risk by either assuming that all requests
                                have an insecure context, or by refraining from advertising alternative services for
                                insecure schemes (for example, HTTP).</p>
                        </div>
                    </section>
                </section>
                <section id="rfc.references">
                    <h2 id="rfc.section.10"><a href="#rfc.section.10">10.</a> References</h2>
                    <section>
                        <div id="rfc.references.1">
                            <h3 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a> Normative References</h3>
                            <dl class="dl-horizontal">
                                <dt id="RFC2119">[<a href="#RFC2119" class="smpl">RFC2119</a>]</dt>
                                <dd>Bradner, S., “<a href="https://www.rfc-editor.org/rfc/rfc2119.html">Key words for
                                        use in RFCs to Indicate Requirement Levels</a>”, <a
                                        href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>, RFC 2119, <a
                                        href="https://dx.doi.org/10.17487/RFC2119">DOI 10.17487/RFC2119</a>, March 1997,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.
                                </dd>
                                <dt id="RFC2818">[<a href="#RFC2818" class="smpl">RFC2818</a>]</dt>
                                <dd>Rescorla, E., “<a href="https://www.rfc-editor.org/rfc/rfc2818.html">HTTP Over
                                        TLS</a>”, RFC 2818, <a href="https://dx.doi.org/10.17487/RFC2818">DOI
                                        10.17487/RFC2818</a>, May 2000, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc2818">http://www.rfc-editor.org/info/rfc2818</a>&gt;.
                                </dd>
                                <dt id="RFC3986">[<a href="#RFC3986" class="smpl">RFC3986</a>]</dt>
                                <dd>Berners-Lee, T., Fielding, R., and L. Masinter, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3986.html">Uniform Resource Identifier
                                        (URI): Generic Syntax</a>”, <a href="https://www.rfc-editor.org/info/std66">STD
                                        66</a>, RFC 3986, <a href="https://dx.doi.org/10.17487/RFC3986">DOI
                                        10.17487/RFC3986</a>, January 2005, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.
                                </dd>
                                <dt id="RFC5226">[<a href="#RFC5226" class="smpl">RFC5226</a>]</dt>
                                <dd>Narten, T. and H. Alvestrand, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5226.html">Guidelines for Writing an
                                        IANA Considerations Section in RFCs</a>”, <a
                                        href="https://www.rfc-editor.org/info/bcp26">BCP 26</a>, RFC 5226, <a
                                        href="https://dx.doi.org/10.17487/RFC5226">DOI 10.17487/RFC5226</a>, May 2008,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5226">http://www.rfc-editor.org/info/rfc5226</a>&gt;.
                                </dd>
                                <dt id="RFC5234">[<a href="#RFC5234" class="smpl">RFC5234</a>]</dt>
                                <dd>Crocker, D., Ed. and P. Overell, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5234.html">Augmented BNF for Syntax
                                        Specifications: ABNF</a>”, <a href="https://www.rfc-editor.org/info/std68">STD
                                        68</a>, RFC 5234, <a href="https://dx.doi.org/10.17487/RFC5234">DOI
                                        10.17487/RFC5234</a>, January 2008, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5234">http://www.rfc-editor.org/info/rfc5234</a>&gt;.
                                </dd>
                                <dt id="RFC5890">[<a href="#RFC5890" class="smpl">RFC5890</a>]</dt>
                                <dd>Klensin, J., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5890.html">Internationalized Domain
                                        Names for Applications (IDNA): Definitions and Document Framework</a>”, RFC
                                    5890, <a href="https://dx.doi.org/10.17487/RFC5890">DOI 10.17487/RFC5890</a>, August
                                    2010, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5890">http://www.rfc-editor.org/info/rfc5890</a>&gt;.
                                </dd>
                                <dt id="RFC6066">[<a href="#RFC6066" class="smpl">RFC6066</a>]</dt>
                                <dd>Eastlake, D., “<a href="https://www.rfc-editor.org/rfc/rfc6066.html">Transport Layer
                                        Security (TLS) Extensions: Extension Definitions</a>”, RFC 6066, <a
                                        href="https://dx.doi.org/10.17487/RFC6066">DOI 10.17487/RFC6066</a>, January
                                    2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6066">http://www.rfc-editor.org/info/rfc6066</a>&gt;.
                                </dd>
                                <dt id="RFC6454">[<a href="#RFC6454" class="smpl">RFC6454</a>]</dt>
                                <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6454.html">The Web Origin
                                        Concept</a>”, RFC 6454, <a href="https://dx.doi.org/10.17487/RFC6454">DOI
                                        10.17487/RFC6454</a>, December 2011, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6454">http://www.rfc-editor.org/info/rfc6454</a>&gt;.
                                </dd>
                                <dt id="RFC7230">[<a href="#RFC7230" class="smpl">RFC7230</a>]</dt>
                                <dd>Fielding, R., Ed. and J. Reschke, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7230.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Message Syntax and Routing</a>”, RFC 7230, <a
                                        href="https://dx.doi.org/10.17487/RFC7230">DOI 10.17487/RFC7230</a>, June 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.
                                </dd>
                                <dt id="RFC7234">[<a href="#RFC7234" class="smpl">RFC7234</a>]</dt>
                                <dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7234.html">Hypertext Transfer Protocol
                                        (HTTP/1.1): Caching</a>”, RFC 7234, <a
                                        href="https://dx.doi.org/10.17487/RFC7234">DOI 10.17487/RFC7234</a>, June 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7234">http://www.rfc-editor.org/info/rfc7234</a>&gt;.
                                </dd>
                                <dt id="RFC7301">[<a href="#RFC7301" class="smpl">RFC7301</a>]</dt>
                                <dd>Friedl, S., Popov, A., Langley, A., and S. Emile, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7301.html">Transport Layer Security
                                        (TLS) Application-Layer Protocol Negotiation Extension</a>”, RFC 7301, <a
                                        href="https://dx.doi.org/10.17487/RFC7301">DOI 10.17487/RFC7301</a>, July 2014,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7301">http://www.rfc-editor.org/info/rfc7301</a>&gt;.
                                </dd>
                                <dt id="RFC7405">[<a href="#RFC7405" class="smpl">RFC7405</a>]</dt>
                                <dd>Kyzivat, P., “<a href="https://www.rfc-editor.org/rfc/rfc7405.html">Case-Sensitive
                                        String Support in ABNF</a>”, RFC 7405, <a
                                        href="https://dx.doi.org/10.17487/RFC7405">DOI 10.17487/RFC7405</a>, December
                                    2014, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7405">http://www.rfc-editor.org/info/rfc7405</a>&gt;.
                                </dd>
                                <dt id="RFC7540">[<a href="#RFC7540" class="smpl">RFC7540</a>]</dt>
                                <dd>Belshe, M., Peon, R., and M. Thomson, Ed., “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7540.html">Hypertext Transfer Protocol
                                        version 2</a>”, RFC 7540, <a href="https://dx.doi.org/10.17487/RFC7540">DOI
                                        10.17487/RFC7540</a>, May 2015, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7540">http://www.rfc-editor.org/info/rfc7540</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                    <section>
                        <div id="rfc.references.2">
                            <h3 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a> Informative References</h3>
                            <dl class="dl-horizontal">
                                <dt id="BCP90">[<a href="#BCP90" class="smpl">BCP90</a>]</dt>
                                <dd>Klyne, G., Nottingham, M., and J. Mogul, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc3864.html">Registration Procedures for
                                        Message Header Fields</a>”, <a href="https://www.rfc-editor.org/info/bcp90">BCP
                                        90</a>, RFC 3864, September 2004, &lt;<a
                                        href="http://www.rfc-editor.org/info/bcp90">http://www.rfc-editor.org/info/bcp90</a>&gt;.
                                </dd>
                                <dt id="RFC5246">[<a href="#RFC5246" class="smpl">RFC5246</a>]</dt>
                                <dd>Dierks, T. and E. Rescorla, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc5246.html">The Transport Layer Security
                                        (TLS) Protocol Version 1.2</a>”, RFC 5246, <a
                                        href="https://dx.doi.org/10.17487/RFC5246">DOI 10.17487/RFC5246</a>, August
                                    2008, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>&gt;.
                                </dd>
                                <dt id="RFC6265">[<a href="#RFC6265" class="smpl">RFC6265</a>]</dt>
                                <dd>Barth, A., “<a href="https://www.rfc-editor.org/rfc/rfc6265.html">HTTP State
                                        Management Mechanism</a>”, RFC 6265, <a
                                        href="https://dx.doi.org/10.17487/RFC6265">DOI 10.17487/RFC6265</a>, April 2011,
                                    &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc6265">http://www.rfc-editor.org/info/rfc6265</a>&gt;.
                                </dd>
                                <dt id="RFC7469">[<a href="#RFC7469" class="smpl">RFC7469</a>]</dt>
                                <dd>Evans, C., Palmer, C., and R. Sleevi, “<a
                                        href="https://www.rfc-editor.org/rfc/rfc7469.html">Public Key Pinning Extension
                                        for HTTP</a>”, RFC 7469, <a href="https://dx.doi.org/10.17487/RFC7469">DOI
                                        10.17487/RFC7469</a>, April 2015, &lt;<a
                                        href="http://www.rfc-editor.org/info/rfc7469">http://www.rfc-editor.org/info/rfc7469</a>&gt;.
                                </dd>
                            </dl>
                        </div>
                    </section>
                </section>
                <section id="acknowledgements">
                    <h2 id="rfc.section.unnumbered-1"><a href="#acknowledgements">Acknowledgements</a></h2>
                    <div id="rfc.section.unnumbered-1.p.1">
                        <p>Thanks to Adam Langley, Bence Beky, Chris Lonvick, Eliot Lear, Erik Nygren, Guy Podjarny,
                            Herve Ruellan, Lucas Pardue, Martin Thomson, Matthew Kerwin, Mike Bishop, Paul Hoffman,
                            Richard Barnes, Richard Bradbury, Stephen Farrell, Stephen Ludin, and Will Chan for their
                            feedback and suggestions.</p>
                    </div>
                    <div id="rfc.section.unnumbered-1.p.2">
                        <p>The Alt-Svc header field was influenced by the design of the Alternate-Protocol header field
                            in SPDY.</p>
                    </div>
                </section>
                <section id="rfc.authors" class="avoidbreakinside">
                    <h2><a href="#rfc.authors">Authors' Addresses</a></h2>
                    <address><b>Mark Nottingham</b><br>Akamai<br>Email: mnot@mnot.net<br>URI: <a
                            href="https://www.mnot.net/">https://www.mnot.net/</a></address>
                    <address><b>Patrick McManus</b><br>Mozilla<br>Email: mcmanus@ducksong.com<br>URI: <a
                            href="https://mozillians.org/u/pmcmanus/">https://mozillians.org/u/pmcmanus/</a></address>
                    <address><b>Julian F. Reschke</b><br>greenbytes GmbH<br>Email: julian.reschke@greenbytes.de<br>URI:
                        <a href="https://greenbytes.de/tech/webdav/">https://greenbytes.de/tech/webdav/</a>
                    </address>
                </section>
            </div>
        </div>
    </div>
    <script src="/assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
</body>

</html>